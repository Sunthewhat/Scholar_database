// @bun
var Ui=Object.create;var{getPrototypeOf:Zi,defineProperty:BE,getOwnPropertyNames:Vi}=Object;var wi=Object.prototype.hasOwnProperty;var c4=(A,F,B)=>{B=A!=null?Ui(Zi(A)):{};let D=F||!A||!A.__esModule?BE(B,"default",{value:A,enumerable:!0}):B;for(let $ of Vi(A))if(!wi.call(D,$))BE(D,$,{get:()=>A[$],enumerable:!0});return D};var z=(A,F)=>()=>(F||A((F={exports:{}}).exports,F),F.exports);var Li=(A,F)=>{for(var B in F)BE(A,B,{get:F[B],enumerable:!0,configurable:!0,set:(D)=>F[B]=()=>D})};var i=import.meta.require;var B6=z((On)=>{var mi=(()=>{let A=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array.prototype),Symbol.toStringTag).get;return(F)=>A.call(F)})();function t7(A){return mi(A)==="Uint8Array"}function hE(A){return typeof A==="object"&&A!=null&&Symbol.toStringTag in A&&(A[Symbol.toStringTag]==="ArrayBuffer"||A[Symbol.toStringTag]==="SharedArrayBuffer")}function o7(A){return A instanceof RegExp||Object.prototype.toString.call(A)==="[object RegExp]"}function vE(A){return typeof A==="object"&&A!=null&&Symbol.toStringTag in A&&A[Symbol.toStringTag]==="Map"}function e7(A){return A instanceof Date||Object.prototype.toString.call(A)==="[object Date]"}function R6(A,F){return JSON.stringify(A,(B,D)=>{if(typeof D==="bigint")return{$numberLong:`${D}`};else if(vE(D))return Object.fromEntries(D);return D})}function di(A){if(A!=null&&typeof A==="object"&&"stylize"in A&&typeof A.stylize==="function")return A.stylize}var m9=6,B8=Symbol.for("@@mdb.bson.version"),$A=2147483647,JA=-2147483648,CZ=Math.pow(2,63)-1,QZ=-Math.pow(2,63),KZ=Math.pow(2,53),zZ=-Math.pow(2,53),mE=1,UZ=2,dE=3,ZZ=4,lE=5,li=6,VZ=7,wZ=8,LZ=9,cE=10,lB=11,ci=12,pE=13,RZ=14,NZ=15,FA=16,PZ=17,iE=18,IZ=19,MZ=255,jZ=127,pi=0,nE=4,TZ=Object.freeze({double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:-1,maxKey:127});class _ extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor(A,F){super(A,F)}static isBSONError(A){return A!=null&&typeof A==="object"&&"bsonError"in A&&A.bsonError===!0&&"name"in A&&"message"in A&&"stack"in A}}class i4 extends _{get name(){return"BSONVersionError"}constructor(){super(`Unsupported BSON version, bson types must be from bson ${m9}.x.x`)}}class BA extends _{get name(){return"BSONRuntimeError"}constructor(A){super(A)}}class q3 extends _{get name(){return"BSONOffsetError"}constructor(A,F,B){super(`${A}. offset: ${F}`,B);this.offset=F}}var oU,eU;function kZ(A,F,B,D){if(D){oU??=new TextDecoder("utf8",{fatal:!0});try{return oU.decode(A.subarray(F,B))}catch($){throw new _("Invalid UTF-8 string in BSON document",{cause:$})}}return eU??=new TextDecoder("utf8",{fatal:!1}),eU.decode(A.subarray(F,B))}function OZ(A,F,B){if(A.length===0)return"";let D=B-F;if(D===0)return"";if(D>20)return null;if(D===1&&A[F]<128)return String.fromCharCode(A[F]);if(D===2&&A[F]<128&&A[F+1]<128)return String.fromCharCode(A[F])+String.fromCharCode(A[F+1]);if(D===3&&A[F]<128&&A[F+1]<128&&A[F+2]<128)return String.fromCharCode(A[F])+String.fromCharCode(A[F+1])+String.fromCharCode(A[F+2]);let $=[];for(let J=F;J<B;J++){let X=A[J];if(X>127)return null;$.push(X)}return String.fromCharCode(...$)}function ii(A,F,B){if(F.length===0)return 0;if(F.length>25)return null;if(A.length-B<F.length)return null;for(let D=0,$=B;D<F.length;D++,$++){let J=F.charCodeAt(D);if(J>127)return null;A[$]=J}return F.length}function ni(A){return X4.fromNumberArray(Array.from({length:A},()=>Math.floor(Math.random()*256)))}var si=(()=>{try{return i("crypto").randomBytes}catch{return ni}})(),X4={toLocalBufferType(A){if(Buffer.isBuffer(A))return A;if(ArrayBuffer.isView(A))return Buffer.from(A.buffer,A.byteOffset,A.byteLength);let F=A?.[Symbol.toStringTag]??Object.prototype.toString.call(A);if(F==="ArrayBuffer"||F==="SharedArrayBuffer"||F==="[object ArrayBuffer]"||F==="[object SharedArrayBuffer]")return Buffer.from(A);throw new _("Cannot create Buffer from the passed potentialBuffer.")},allocate(A){return Buffer.alloc(A)},allocateUnsafe(A){return Buffer.allocUnsafe(A)},equals(A,F){return X4.toLocalBufferType(A).equals(F)},fromNumberArray(A){return Buffer.from(A)},fromBase64(A){return Buffer.from(A,"base64")},toBase64(A){return X4.toLocalBufferType(A).toString("base64")},fromISO88591(A){return Buffer.from(A,"binary")},toISO88591(A){return X4.toLocalBufferType(A).toString("binary")},fromHex(A){return Buffer.from(A,"hex")},toHex(A){return X4.toLocalBufferType(A).toString("hex")},toUTF8(A,F,B,D){let $=B-F<=20?OZ(A,F,B):null;if($!=null)return $;let J=X4.toLocalBufferType(A).toString("utf8",F,B);if(D){for(let X=0;X<J.length;X++)if(J.charCodeAt(X)===65533){kZ(A,F,B,!0);break}}return J},utf8ByteLength(A){return Buffer.byteLength(A,"utf8")},encodeUTF8Into(A,F,B){let D=ii(A,F,B);if(D!=null)return D;return X4.toLocalBufferType(A).write(F,B,void 0,"utf8")},randomBytes:si,swap32(A){return X4.toLocalBufferType(A).swap32()}};function ai(){let{navigator:A}=globalThis;return typeof A==="object"&&A.product==="ReactNative"}function ri(A){if(A<0)throw new RangeError(`The argument 'byteLength' is invalid. Received ${A}`);return DA.fromNumberArray(Array.from({length:A},()=>Math.floor(Math.random()*256)))}var ti=(()=>{let{crypto:A}=globalThis;if(A!=null&&typeof A.getRandomValues==="function")return(F)=>{return A.getRandomValues(DA.allocate(F))};else{if(ai()){let{console:F}=globalThis;F?.warn?.("BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return ri}})(),AZ=/(\d|[a-f])/i,DA={toLocalBufferType(A){let F=A?.[Symbol.toStringTag]??Object.prototype.toString.call(A);if(F==="Uint8Array")return A;if(ArrayBuffer.isView(A))return new Uint8Array(A.buffer.slice(A.byteOffset,A.byteOffset+A.byteLength));if(F==="ArrayBuffer"||F==="SharedArrayBuffer"||F==="[object ArrayBuffer]"||F==="[object SharedArrayBuffer]")return new Uint8Array(A);throw new _("Cannot make a Uint8Array from passed potentialBuffer.")},allocate(A){if(typeof A!=="number")throw new TypeError(`The "size" argument must be of type number. Received ${String(A)}`);return new Uint8Array(A)},allocateUnsafe(A){return DA.allocate(A)},equals(A,F){if(A.byteLength!==F.byteLength)return!1;for(let B=0;B<A.byteLength;B++)if(A[B]!==F[B])return!1;return!0},fromNumberArray(A){return Uint8Array.from(A)},fromBase64(A){return Uint8Array.from(atob(A),(F)=>F.charCodeAt(0))},toBase64(A){return btoa(DA.toISO88591(A))},fromISO88591(A){return Uint8Array.from(A,(F)=>F.charCodeAt(0)&255)},toISO88591(A){return Array.from(Uint16Array.from(A),(F)=>String.fromCharCode(F)).join("")},fromHex(A){let F=A.length%2===0?A:A.slice(0,A.length-1),B=[];for(let D=0;D<F.length;D+=2){let $=F[D],J=F[D+1];if(!AZ.test($))break;if(!AZ.test(J))break;let X=Number.parseInt(`${$}${J}`,16);B.push(X)}return Uint8Array.from(B)},toHex(A){return Array.from(A,(F)=>F.toString(16).padStart(2,"0")).join("")},toUTF8(A,F,B,D){let $=B-F<=20?OZ(A,F,B):null;if($!=null)return $;return kZ(A,F,B,D)},utf8ByteLength(A){return new TextEncoder().encode(A).byteLength},encodeUTF8Into(A,F,B){let D=new TextEncoder().encode(F);return A.set(D,B),D.byteLength},randomBytes:ti,swap32(A){if(A.length%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let F=0;F<A.length;F+=4){let B=A[F],D=A[F+1],$=A[F+2],J=A[F+3];A[F]=J,A[F+1]=$,A[F+2]=D,A[F+3]=B}return A}},oi=typeof Buffer==="function"&&Buffer.prototype?._isBuffer!==!0,S=oi?X4:DA;class c2{get[B8](){return m9}[Symbol.for("nodejs.util.inspect.custom")](A,F,B){return this.inspect(A,F,B)}}var A8=new Float64Array(1),m1=new Uint8Array(A8.buffer,0,8);A8[0]=-1;var QE=m1[7]===0,Y1={isBigEndian:QE,getNonnegativeInt32LE(A,F){if(A[F+3]>127)throw new RangeError(`Size cannot be negative at offset: ${F}`);return A[F]|A[F+1]<<8|A[F+2]<<16|A[F+3]<<24},getInt32LE(A,F){return A[F]|A[F+1]<<8|A[F+2]<<16|A[F+3]<<24},getUint32LE(A,F){return A[F]+A[F+1]*256+A[F+2]*65536+A[F+3]*16777216},getUint32BE(A,F){return A[F+3]+A[F+2]*256+A[F+1]*65536+A[F]*16777216},getBigInt64LE(A,F){let B=BigInt(A[F+4]+A[F+5]*256+A[F+6]*65536+(A[F+7]<<24)),D=BigInt(A[F]+A[F+1]*256+A[F+2]*65536+A[F+3]*16777216);return(B<<BigInt(32))+D},getFloat64LE:QE?(A,F)=>{return m1[7]=A[F],m1[6]=A[F+1],m1[5]=A[F+2],m1[4]=A[F+3],m1[3]=A[F+4],m1[2]=A[F+5],m1[1]=A[F+6],m1[0]=A[F+7],A8[0]}:(A,F)=>{return m1[0]=A[F],m1[1]=A[F+1],m1[2]=A[F+2],m1[3]=A[F+3],m1[4]=A[F+4],m1[5]=A[F+5],m1[6]=A[F+6],m1[7]=A[F+7],A8[0]},setInt32BE(A,F,B){return A[F+3]=B,B>>>=8,A[F+2]=B,B>>>=8,A[F+1]=B,B>>>=8,A[F]=B,4},setInt32LE(A,F,B){return A[F]=B,B>>>=8,A[F+1]=B,B>>>=8,A[F+2]=B,B>>>=8,A[F+3]=B,4},setBigInt64LE(A,F,B){let D=BigInt(4294967295),$=Number(B&D);A[F]=$,$>>=8,A[F+1]=$,$>>=8,A[F+2]=$,$>>=8,A[F+3]=$;let J=Number(B>>BigInt(32)&D);return A[F+4]=J,J>>=8,A[F+5]=J,J>>=8,A[F+6]=J,J>>=8,A[F+7]=J,8},setFloat64LE:QE?(A,F,B)=>{return A8[0]=B,A[F]=m1[7],A[F+1]=m1[6],A[F+2]=m1[5],A[F+3]=m1[4],A[F+4]=m1[3],A[F+5]=m1[2],A[F+6]=m1[1],A[F+7]=m1[0],8}:(A,F,B)=>{return A8[0]=B,A[F]=m1[0],A[F+1]=m1[1],A[F+2]=m1[2],A[F+3]=m1[3],A[F+4]=m1[4],A[F+5]=m1[5],A[F+6]=m1[6],A[F+7]=m1[7],8}};class J1 extends c2{get _bsontype(){return"Binary"}constructor(A,F){super();if(A!=null&&typeof A==="string"&&!ArrayBuffer.isView(A)&&!hE(A)&&!Array.isArray(A))throw new _("Binary can only be constructed from Uint8Array or number[]");if(this.sub_type=F??J1.BSON_BINARY_SUBTYPE_DEFAULT,A==null)this.buffer=S.allocate(J1.BUFFER_SIZE),this.position=0;else this.buffer=Array.isArray(A)?S.fromNumberArray(A):S.toLocalBufferType(A),this.position=this.buffer.byteLength}put(A){if(typeof A==="string"&&A.length!==1)throw new _("only accepts single character String");else if(typeof A!=="number"&&A.length!==1)throw new _("only accepts single character Uint8Array or Array");let F;if(typeof A==="string")F=A.charCodeAt(0);else if(typeof A==="number")F=A;else F=A[0];if(F<0||F>255)throw new _("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=F;else{let B=S.allocate(J1.BUFFER_SIZE+this.buffer.length);B.set(this.buffer,0),this.buffer=B,this.buffer[this.position++]=F}}write(A,F){if(F=typeof F==="number"?F:this.position,this.buffer.byteLength<F+A.length){let B=S.allocate(this.buffer.byteLength+A.length);B.set(this.buffer,0),this.buffer=B}if(ArrayBuffer.isView(A))this.buffer.set(S.toLocalBufferType(A),F),this.position=F+A.byteLength>this.position?F+A.length:this.position;else if(typeof A==="string")throw new _("input cannot be string")}read(A,F){F=F&&F>0?F:this.position;let B=A+F;return this.buffer.subarray(A,B>this.position?this.position:B)}value(){return this.buffer.length===this.position?this.buffer:this.buffer.subarray(0,this.position)}length(){return this.position}toJSON(){return S.toBase64(this.buffer.subarray(0,this.position))}toString(A){if(A==="hex")return S.toHex(this.buffer.subarray(0,this.position));if(A==="base64")return S.toBase64(this.buffer.subarray(0,this.position));if(A==="utf8"||A==="utf-8")return S.toUTF8(this.buffer,0,this.position,!1);return S.toUTF8(this.buffer,0,this.position,!1)}toExtendedJSON(A){if(A=A||{},this.sub_type===J1.SUBTYPE_VECTOR)J4(this);let F=S.toBase64(this.buffer),B=Number(this.sub_type).toString(16);if(A.legacy)return{$binary:F,$type:B.length===1?"0"+B:B};return{$binary:{base64:F,subType:B.length===1?"0"+B:B}}}toUUID(){if(this.sub_type===J1.SUBTYPE_UUID)return new D2(this.buffer.subarray(0,this.position));throw new _(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${J1.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString(A,F){return new J1(S.fromHex(A),F)}static createFromBase64(A,F){return new J1(S.fromBase64(A),F)}static fromExtendedJSON(A,F){F=F||{};let B,D;if("$binary"in A){if(F.legacy&&typeof A.$binary==="string"&&"$type"in A)D=A.$type?parseInt(A.$type,16):0,B=S.fromBase64(A.$binary);else if(typeof A.$binary!=="string")D=A.$binary.subType?parseInt(A.$binary.subType,16):0,B=S.fromBase64(A.$binary.base64)}else if("$uuid"in A)D=4,B=D2.bytesFromString(A.$uuid);if(!B)throw new _(`Unexpected Binary Extended JSON format ${JSON.stringify(A)}`);return D===nE?new D2(B):new J1(B,D)}inspect(A,F,B){B??=R6;let D=S.toBase64(this.buffer.subarray(0,this.position)),$=B(D,F),J=B(this.sub_type,F);return`Binary.createFromBase64(${$}, ${J})`}toInt8Array(){if(this.sub_type!==J1.SUBTYPE_VECTOR)throw new _("Binary sub_type is not Vector");if(this.buffer[0]!==J1.VECTOR_TYPE.Int8)throw new _("Binary datatype field is not Int8");return J4(this),new Int8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toFloat32Array(){if(this.sub_type!==J1.SUBTYPE_VECTOR)throw new _("Binary sub_type is not Vector");if(this.buffer[0]!==J1.VECTOR_TYPE.Float32)throw new _("Binary datatype field is not Float32");J4(this);let A=new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position));if(Y1.isBigEndian)S.swap32(A);return new Float32Array(A.buffer)}toPackedBits(){if(this.sub_type!==J1.SUBTYPE_VECTOR)throw new _("Binary sub_type is not Vector");if(this.buffer[0]!==J1.VECTOR_TYPE.PackedBit)throw new _("Binary datatype field is not packed bit");return J4(this),new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toBits(){if(this.sub_type!==J1.SUBTYPE_VECTOR)throw new _("Binary sub_type is not Vector");if(this.buffer[0]!==J1.VECTOR_TYPE.PackedBit)throw new _("Binary datatype field is not packed bit");J4(this);let F=(this.length()-2)*8-this.buffer[1],B=new Int8Array(F);for(let D=0;D<B.length;D++){let $=D/8|0,J=this.buffer[$+2],X=7-D%8,E=J>>X&1;B[D]=E}return B}static fromInt8Array(A){let F=S.allocate(A.byteLength+2);F[0]=J1.VECTOR_TYPE.Int8,F[1]=0;let B=new Uint8Array(A.buffer,A.byteOffset,A.byteLength);F.set(B,2);let D=new this(F,this.SUBTYPE_VECTOR);return J4(D),D}static fromFloat32Array(A){let F=S.allocate(A.byteLength+2);F[0]=J1.VECTOR_TYPE.Float32,F[1]=0;let B=new Uint8Array(A.buffer,A.byteOffset,A.byteLength);if(F.set(B,2),Y1.isBigEndian)S.swap32(new Uint8Array(F.buffer,2));let D=new this(F,this.SUBTYPE_VECTOR);return J4(D),D}static fromPackedBits(A,F=0){let B=S.allocate(A.byteLength+2);B[0]=J1.VECTOR_TYPE.PackedBit,B[1]=F,B.set(A,2);let D=new this(B,this.SUBTYPE_VECTOR);return J4(D),D}static fromBits(A){let F=A.length+7>>>3,B=new Uint8Array(F+2);B[0]=J1.VECTOR_TYPE.PackedBit;let D=A.length%8;B[1]=D===0?0:8-D;for(let $=0;$<A.length;$++){let J=$>>>3,X=A[$];if(X!==0&&X!==1)throw new _(`Invalid bit value at ${$}: must be 0 or 1, found ${A[$]}`);if(X===0)continue;let E=7-$%8;B[J+2]|=X<<E}return new this(B,J1.SUBTYPE_VECTOR)}}J1.BSON_BINARY_SUBTYPE_DEFAULT=0;J1.BUFFER_SIZE=256;J1.SUBTYPE_DEFAULT=0;J1.SUBTYPE_FUNCTION=1;J1.SUBTYPE_BYTE_ARRAY=2;J1.SUBTYPE_UUID_OLD=3;J1.SUBTYPE_UUID=4;J1.SUBTYPE_MD5=5;J1.SUBTYPE_ENCRYPTED=6;J1.SUBTYPE_COLUMN=7;J1.SUBTYPE_SENSITIVE=8;J1.SUBTYPE_VECTOR=9;J1.SUBTYPE_USER_DEFINED=128;J1.VECTOR_TYPE=Object.freeze({Int8:3,Float32:39,PackedBit:16});function J4(A){if(A.sub_type!==J1.SUBTYPE_VECTOR)return;let F=A.position,B=A.buffer[0],D=A.buffer[1];if((B===J1.VECTOR_TYPE.Float32||B===J1.VECTOR_TYPE.Int8)&&D!==0)throw new _("Invalid Vector: padding must be zero for int8 and float32 vectors");if(B===J1.VECTOR_TYPE.Float32){if(F!==0&&F-2!==0&&(F-2)%4!==0)throw new _("Invalid Vector: Float32 vector must contain a multiple of 4 bytes")}if(B===J1.VECTOR_TYPE.PackedBit&&D!==0&&F===2)throw new _("Invalid Vector: padding must be zero for packed bit vectors that are empty");if(B===J1.VECTOR_TYPE.PackedBit&&D>7)throw new _(`Invalid Vector: padding must be a value between 0 and 7. found: ${D}`)}var KE=16,ei=/^[0-9A-F]{32}$/i,An=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i;class D2 extends J1{constructor(A){let F;if(A==null)F=D2.generate();else if(A instanceof D2)F=S.toLocalBufferType(new Uint8Array(A.buffer));else if(ArrayBuffer.isView(A)&&A.byteLength===KE)F=S.toLocalBufferType(A);else if(typeof A==="string")F=D2.bytesFromString(A);else throw new _("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");super(F,nE)}get id(){return this.buffer}set id(A){this.buffer=A}toHexString(A=!0){if(A)return[S.toHex(this.buffer.subarray(0,4)),S.toHex(this.buffer.subarray(4,6)),S.toHex(this.buffer.subarray(6,8)),S.toHex(this.buffer.subarray(8,10)),S.toHex(this.buffer.subarray(10,16))].join("-");return S.toHex(this.buffer)}toString(A){if(A==="hex")return S.toHex(this.id);if(A==="base64")return S.toBase64(this.id);return this.toHexString()}toJSON(){return this.toHexString()}equals(A){if(!A)return!1;if(A instanceof D2)return S.equals(A.id,this.id);try{return S.equals(new D2(A).id,this.id)}catch{return!1}}toBinary(){return new J1(this.id,J1.SUBTYPE_UUID)}static generate(){let A=S.randomBytes(KE);return A[6]=A[6]&15|64,A[8]=A[8]&63|128,A}static isValid(A){if(!A)return!1;if(typeof A==="string")return D2.isValidUUIDString(A);if(t7(A))return A.byteLength===KE;return A._bsontype==="Binary"&&A.sub_type===this.SUBTYPE_UUID&&A.buffer.byteLength===16}static createFromHexString(A){let F=D2.bytesFromString(A);return new D2(F)}static createFromBase64(A){return new D2(S.fromBase64(A))}static bytesFromString(A){if(!D2.isValidUUIDString(A))throw new _("UUID string representation must be 32 hex digits or canonical hyphenated representation");return S.fromHex(A.replace(/-/g,""))}static isValidUUIDString(A){return ei.test(A)||An.test(A)}inspect(A,F,B){return B??=R6,`new UUID(${B(this.toHexString(),F)})`}}class Y4 extends c2{get _bsontype(){return"Code"}constructor(A,F){super();this.code=A.toString(),this.scope=F??null}toJSON(){if(this.scope!=null)return{code:this.code,scope:this.scope};return{code:this.code}}toExtendedJSON(){if(this.scope)return{$code:this.code,$scope:this.scope};return{$code:this.code}}static fromExtendedJSON(A){return new Y4(A.$code,A.$scope)}inspect(A,F,B){B??=R6;let D=B(this.code,F),$=D.includes(`
`);if(this.scope!=null)D+=`,${$?`
`:" "}${B(this.scope,F)}`;let J=$&&this.scope===null;return`new Code(${$?`
`:""}${D}${J?`
`:""})`}}function uZ(A){return A!=null&&typeof A==="object"&&"$id"in A&&A.$id!=null&&"$ref"in A&&typeof A.$ref==="string"&&(!("$db"in A)||("$db"in A)&&typeof A.$db==="string")}class y3 extends c2{get _bsontype(){return"DBRef"}constructor(A,F,B,D){super();let $=A.split(".");if($.length===2)B=$.shift(),A=$.shift();this.collection=A,this.oid=F,this.db=B,this.fields=D||{}}get namespace(){return this.collection}set namespace(A){this.collection=A}toJSON(){let A=Object.assign({$ref:this.collection,$id:this.oid},this.fields);if(this.db!=null)A.$db=this.db;return A}toExtendedJSON(A){A=A||{};let F={$ref:this.collection,$id:this.oid};if(A.legacy)return F;if(this.db)F.$db=this.db;return F=Object.assign(F,this.fields),F}static fromExtendedJSON(A){let F=Object.assign({},A);return delete F.$ref,delete F.$id,delete F.$db,new y3(A.$ref,A.$id,A.$db,F)}inspect(A,F,B){B??=R6;let D=[B(this.namespace,F),B(this.oid,F),...this.db?[B(this.db,F)]:[],...Object.keys(this.fields).length>0?[B(this.fields,F)]:[]];return D[1]=B===R6?`new ObjectId(${D[1]})`:D[1],`new DBRef(${D.join(", ")})`}}function SZ(A){if(A==="")return A;let F=0,B=A[F]==="-",D=A[F]==="+";if(D||B)F+=1;let $=!1;for(;F<A.length&&A[F]==="0";++F)$=!0;if(!$)return D?A.slice(1):A;return`${B?"-":""}${A.length===F?"0":A.slice(F)}`}function Fn(A,F){F=F??10;let B="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,F);return new RegExp(`[^-+${B}]`,"i").test(A)?!1:A}var v6=void 0;try{v6=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var FZ=65536,Bn=16777216,F8=FZ*FZ,fZ=F8*F8,Dn=fZ/2,BZ={},DZ={},$n=20,Jn=/^(\+?0|(\+|-)?[1-9][0-9]*)$/;class P extends c2{get _bsontype(){return"Long"}get __isLong__(){return!0}constructor(A=0,F,B){super();let D=typeof F==="boolean"?F:Boolean(B),$=typeof F==="number"?F:0,J=typeof A==="string"?P.fromString(A,D):typeof A==="bigint"?P.fromBigInt(A,D):{low:A|0,high:$|0,unsigned:D};this.low=J.low,this.high=J.high,this.unsigned=J.unsigned}static fromBits(A,F,B){return new P(A,F,B)}static fromInt(A,F){let B,D,$;if(F){if(A>>>=0,$=0<=A&&A<256){if(D=DZ[A],D)return D}if(B=P.fromBits(A,(A|0)<0?-1:0,!0),$)DZ[A]=B;return B}else{if(A|=0,$=-128<=A&&A<128){if(D=BZ[A],D)return D}if(B=P.fromBits(A,A<0?-1:0,!1),$)BZ[A]=B;return B}}static fromNumber(A,F){if(isNaN(A))return F?P.UZERO:P.ZERO;if(F){if(A<0)return P.UZERO;if(A>=fZ)return P.MAX_UNSIGNED_VALUE}else{if(A<=-9223372036854776000)return P.MIN_VALUE;if(A+1>=Dn)return P.MAX_VALUE}if(A<0)return P.fromNumber(-A,F).neg();return P.fromBits(A%F8|0,A/F8|0,F)}static fromBigInt(A,F){let B=BigInt(4294967295),D=BigInt(32);return new P(Number(A&B),Number(A>>D&B),F)}static _fromString(A,F,B){if(A.length===0)throw new _("empty string");if(B<2||36<B)throw new _("radix");let D;if((D=A.indexOf("-"))>0)throw new _("interior hyphen");else if(D===0)return P._fromString(A.substring(1),F,B).neg();let $=P.fromNumber(Math.pow(B,8)),J=P.ZERO;for(let X=0;X<A.length;X+=8){let E=Math.min(8,A.length-X),Y=parseInt(A.substring(X,X+E),B);if(E<8){let G=P.fromNumber(Math.pow(B,E));J=J.mul(G).add(P.fromNumber(Y))}else J=J.mul($),J=J.add(P.fromNumber(Y))}return J.unsigned=F,J}static fromStringStrict(A,F,B){let D=!1;if(typeof F==="number")B=F,F=!1;else D=!!F;if(B??=10,A.trim()!==A)throw new _(`Input: '${A}' contains leading and/or trailing whitespace`);if(!Fn(A,B))throw new _(`Input: '${A}' contains invalid characters for radix: ${B}`);let $=SZ(A),J=P._fromString($,D,B);if(J.toString(B).toLowerCase()!==$.toLowerCase())throw new _(`Input: ${A} is not representable as ${J.unsigned?"an unsigned":"a signed"} 64-bit Long ${B!=null?`with radix: ${B}`:""}`);return J}static fromString(A,F,B){let D=!1;if(typeof F==="number")B=F,F=!1;else D=!!F;if(B??=10,A==="NaN"&&B<24)return P.ZERO;else if((A==="Infinity"||A==="+Infinity"||A==="-Infinity")&&B<35)return P.ZERO;return P._fromString(A,D,B)}static fromBytes(A,F,B){return B?P.fromBytesLE(A,F):P.fromBytesBE(A,F)}static fromBytesLE(A,F){return new P(A[0]|A[1]<<8|A[2]<<16|A[3]<<24,A[4]|A[5]<<8|A[6]<<16|A[7]<<24,F)}static fromBytesBE(A,F){return new P(A[4]<<24|A[5]<<16|A[6]<<8|A[7],A[0]<<24|A[1]<<16|A[2]<<8|A[3],F)}static isLong(A){return A!=null&&typeof A==="object"&&"__isLong__"in A&&A.__isLong__===!0}static fromValue(A,F){if(typeof A==="number")return P.fromNumber(A,F);if(typeof A==="string")return P.fromString(A,F);return P.fromBits(A.low,A.high,typeof F==="boolean"?F:A.unsigned)}add(A){if(!P.isLong(A))A=P.fromValue(A);let F=this.high>>>16,B=this.high&65535,D=this.low>>>16,$=this.low&65535,J=A.high>>>16,X=A.high&65535,E=A.low>>>16,Y=A.low&65535,G=0,H=0,W=0,q=0;return q+=$+Y,W+=q>>>16,q&=65535,W+=D+E,H+=W>>>16,W&=65535,H+=B+X,G+=H>>>16,H&=65535,G+=F+J,G&=65535,P.fromBits(W<<16|q,G<<16|H,this.unsigned)}and(A){if(!P.isLong(A))A=P.fromValue(A);return P.fromBits(this.low&A.low,this.high&A.high,this.unsigned)}compare(A){if(!P.isLong(A))A=P.fromValue(A);if(this.eq(A))return 0;let F=this.isNegative(),B=A.isNegative();if(F&&!B)return-1;if(!F&&B)return 1;if(!this.unsigned)return this.sub(A).isNegative()?-1:1;return A.high>>>0>this.high>>>0||A.high===this.high&&A.low>>>0>this.low>>>0?-1:1}comp(A){return this.compare(A)}divide(A){if(!P.isLong(A))A=P.fromValue(A);if(A.isZero())throw new _("division by zero");if(v6){if(!this.unsigned&&this.high===-2147483648&&A.low===-1&&A.high===-1)return this;let $=(this.unsigned?v6.div_u:v6.div_s)(this.low,this.high,A.low,A.high);return P.fromBits($,v6.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?P.UZERO:P.ZERO;let F,B,D;if(!this.unsigned){if(this.eq(P.MIN_VALUE))if(A.eq(P.ONE)||A.eq(P.NEG_ONE))return P.MIN_VALUE;else if(A.eq(P.MIN_VALUE))return P.ONE;else if(F=this.shr(1).div(A).shl(1),F.eq(P.ZERO))return A.isNegative()?P.ONE:P.NEG_ONE;else return B=this.sub(A.mul(F)),D=F.add(B.div(A)),D;else if(A.eq(P.MIN_VALUE))return this.unsigned?P.UZERO:P.ZERO;if(this.isNegative()){if(A.isNegative())return this.neg().div(A.neg());return this.neg().div(A).neg()}else if(A.isNegative())return this.div(A.neg()).neg();D=P.ZERO}else{if(!A.unsigned)A=A.toUnsigned();if(A.gt(this))return P.UZERO;if(A.gt(this.shru(1)))return P.UONE;D=P.UZERO}B=this;while(B.gte(A)){F=Math.max(1,Math.floor(B.toNumber()/A.toNumber()));let $=Math.ceil(Math.log(F)/Math.LN2),J=$<=48?1:Math.pow(2,$-48),X=P.fromNumber(F),E=X.mul(A);while(E.isNegative()||E.gt(B))F-=J,X=P.fromNumber(F,this.unsigned),E=X.mul(A);if(X.isZero())X=P.ONE;D=D.add(X),B=B.sub(E)}return D}div(A){return this.divide(A)}equals(A){if(!P.isLong(A))A=P.fromValue(A);if(this.unsigned!==A.unsigned&&this.high>>>31===1&&A.high>>>31===1)return!1;return this.high===A.high&&this.low===A.low}eq(A){return this.equals(A)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){if(this.isNegative())return this.eq(P.MIN_VALUE)?64:this.neg().getNumBitsAbs();let A=this.high!==0?this.high:this.low,F;for(F=31;F>0;F--)if((A&1<<F)!==0)break;return this.high!==0?F+33:F+1}greaterThan(A){return this.comp(A)>0}gt(A){return this.greaterThan(A)}greaterThanOrEqual(A){return this.comp(A)>=0}gte(A){return this.greaterThanOrEqual(A)}ge(A){return this.greaterThanOrEqual(A)}isEven(){return(this.low&1)===0}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return(this.low&1)===1}isPositive(){return this.unsigned||this.high>=0}isZero(){return this.high===0&&this.low===0}lessThan(A){return this.comp(A)<0}lt(A){return this.lessThan(A)}lessThanOrEqual(A){return this.comp(A)<=0}lte(A){return this.lessThanOrEqual(A)}modulo(A){if(!P.isLong(A))A=P.fromValue(A);if(v6){let F=(this.unsigned?v6.rem_u:v6.rem_s)(this.low,this.high,A.low,A.high);return P.fromBits(F,v6.get_high(),this.unsigned)}return this.sub(this.div(A).mul(A))}mod(A){return this.modulo(A)}rem(A){return this.modulo(A)}multiply(A){if(this.isZero())return P.ZERO;if(!P.isLong(A))A=P.fromValue(A);if(v6){let C=v6.mul(this.low,this.high,A.low,A.high);return P.fromBits(C,v6.get_high(),this.unsigned)}if(A.isZero())return P.ZERO;if(this.eq(P.MIN_VALUE))return A.isOdd()?P.MIN_VALUE:P.ZERO;if(A.eq(P.MIN_VALUE))return this.isOdd()?P.MIN_VALUE:P.ZERO;if(this.isNegative())if(A.isNegative())return this.neg().mul(A.neg());else return this.neg().mul(A).neg();else if(A.isNegative())return this.mul(A.neg()).neg();if(this.lt(P.TWO_PWR_24)&&A.lt(P.TWO_PWR_24))return P.fromNumber(this.toNumber()*A.toNumber(),this.unsigned);let F=this.high>>>16,B=this.high&65535,D=this.low>>>16,$=this.low&65535,J=A.high>>>16,X=A.high&65535,E=A.low>>>16,Y=A.low&65535,G=0,H=0,W=0,q=0;return q+=$*Y,W+=q>>>16,q&=65535,W+=D*Y,H+=W>>>16,W&=65535,W+=$*E,H+=W>>>16,W&=65535,H+=B*Y,G+=H>>>16,H&=65535,H+=D*E,G+=H>>>16,H&=65535,H+=$*X,G+=H>>>16,H&=65535,G+=F*Y+B*E+D*X+$*J,G&=65535,P.fromBits(W<<16|q,G<<16|H,this.unsigned)}mul(A){return this.multiply(A)}negate(){if(!this.unsigned&&this.eq(P.MIN_VALUE))return P.MIN_VALUE;return this.not().add(P.ONE)}neg(){return this.negate()}not(){return P.fromBits(~this.low,~this.high,this.unsigned)}notEquals(A){return!this.equals(A)}neq(A){return this.notEquals(A)}ne(A){return this.notEquals(A)}or(A){if(!P.isLong(A))A=P.fromValue(A);return P.fromBits(this.low|A.low,this.high|A.high,this.unsigned)}shiftLeft(A){if(P.isLong(A))A=A.toInt();if((A&=63)===0)return this;else if(A<32)return P.fromBits(this.low<<A,this.high<<A|this.low>>>32-A,this.unsigned);else return P.fromBits(0,this.low<<A-32,this.unsigned)}shl(A){return this.shiftLeft(A)}shiftRight(A){if(P.isLong(A))A=A.toInt();if((A&=63)===0)return this;else if(A<32)return P.fromBits(this.low>>>A|this.high<<32-A,this.high>>A,this.unsigned);else return P.fromBits(this.high>>A-32,this.high>=0?0:-1,this.unsigned)}shr(A){return this.shiftRight(A)}shiftRightUnsigned(A){if(P.isLong(A))A=A.toInt();if(A&=63,A===0)return this;else{let F=this.high;if(A<32){let B=this.low;return P.fromBits(B>>>A|F<<32-A,F>>>A,this.unsigned)}else if(A===32)return P.fromBits(F,0,this.unsigned);else return P.fromBits(F>>>A-32,0,this.unsigned)}}shr_u(A){return this.shiftRightUnsigned(A)}shru(A){return this.shiftRightUnsigned(A)}subtract(A){if(!P.isLong(A))A=P.fromValue(A);return this.add(A.neg())}sub(A){return this.subtract(A)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){if(this.unsigned)return(this.high>>>0)*F8+(this.low>>>0);return this.high*F8+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes(A){return A?this.toBytesLE():this.toBytesBE()}toBytesLE(){let A=this.high,F=this.low;return[F&255,F>>>8&255,F>>>16&255,F>>>24,A&255,A>>>8&255,A>>>16&255,A>>>24]}toBytesBE(){let A=this.high,F=this.low;return[A>>>24,A>>>16&255,A>>>8&255,A&255,F>>>24,F>>>16&255,F>>>8&255,F&255]}toSigned(){if(!this.unsigned)return this;return P.fromBits(this.low,this.high,!1)}toString(A){if(A=A||10,A<2||36<A)throw new _("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(P.MIN_VALUE)){let $=P.fromNumber(A),J=this.div($),X=J.mul($).sub(this);return J.toString(A)+X.toInt().toString(A)}else return"-"+this.neg().toString(A);let F=P.fromNumber(Math.pow(A,6),this.unsigned),B=this,D="";while(!0){let $=B.div(F),X=(B.sub($.mul(F)).toInt()>>>0).toString(A);if(B=$,B.isZero())return X+D;else{while(X.length<6)X="0"+X;D=""+X+D}}}toUnsigned(){if(this.unsigned)return this;return P.fromBits(this.low,this.high,!0)}xor(A){if(!P.isLong(A))A=P.fromValue(A);return P.fromBits(this.low^A.low,this.high^A.high,this.unsigned)}eqz(){return this.isZero()}le(A){return this.lessThanOrEqual(A)}toExtendedJSON(A){if(A&&A.relaxed)return this.toNumber();return{$numberLong:this.toString()}}static fromExtendedJSON(A,F){let{useBigInt64:B=!1,relaxed:D=!0}={...F};if(A.$numberLong.length>$n)throw new _("$numberLong string is too long");if(!Jn.test(A.$numberLong))throw new _(`$numberLong string "${A.$numberLong}" is in an invalid format`);if(B){let J=BigInt(A.$numberLong);return BigInt.asIntN(64,J)}let $=P.fromString(A.$numberLong);if(D)return $.toNumber();return $}inspect(A,F,B){B??=R6;let D=B(this.toString(),F),$=this.unsigned?`, ${B(this.unsigned,F)}`:"";return`new Long(${D}${$})`}}P.TWO_PWR_24=P.fromInt(Bn);P.MAX_UNSIGNED_VALUE=P.fromBits(-1,-1,!0);P.ZERO=P.fromInt(0);P.UZERO=P.fromInt(0,!0);P.ONE=P.fromInt(1);P.UONE=P.fromInt(1,!0);P.NEG_ONE=P.fromInt(-1);P.MAX_VALUE=P.fromBits(-1,2147483647,!1);P.MIN_VALUE=P.fromBits(0,-2147483648,!1);var Xn=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,En=/^(\+|-)?(Infinity|inf)$/i,Yn=/^(\+|-)?NaN$/i,a7=6111,e5=-6176,$Z=6176,JZ=34,zE=S.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),XZ=S.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),EZ=S.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),Gn=/^([-+])?(\d+)?$/,Hn=31,YZ=16383,Wn=30,qn=31;function GZ(A){return!isNaN(parseInt(A,10))}function Cn(A){let F=P.fromNumber(1e9),B=P.fromNumber(0);if(!A.parts[0]&&!A.parts[1]&&!A.parts[2]&&!A.parts[3])return{quotient:A,rem:B};for(let D=0;D<=3;D++)B=B.shiftLeft(32),B=B.add(new P(A.parts[D],0)),A.parts[D]=B.div(F).low,B=B.modulo(F);return{quotient:A,rem:B}}function Qn(A,F){if(!A&&!F)return{high:P.fromNumber(0),low:P.fromNumber(0)};let B=A.shiftRightUnsigned(32),D=new P(A.getLowBits(),0),$=F.shiftRightUnsigned(32),J=new P(F.getLowBits(),0),X=B.multiply($),E=B.multiply(J),Y=D.multiply($),G=D.multiply(J);return X=X.add(E.shiftRightUnsigned(32)),E=new P(E.getLowBits(),0).add(Y).add(G.shiftRightUnsigned(32)),X=X.add(E.shiftRightUnsigned(32)),G=E.shiftLeft(32).add(new P(G.getLowBits(),0)),{high:X,low:G}}function Kn(A,F){let B=A.high>>>0,D=F.high>>>0;if(B<D)return!0;else if(B===D){let $=A.low>>>0,J=F.low>>>0;if($<J)return!0}return!1}function W3(A,F){throw new _(`"${A}" is not a valid Decimal128 string - ${F}`)}class R2 extends c2{get _bsontype(){return"Decimal128"}constructor(A){super();if(typeof A==="string")this.bytes=R2.fromString(A).bytes;else if(A instanceof Uint8Array||t7(A)){if(A.byteLength!==16)throw new _("Decimal128 must take a Buffer of 16 bytes");this.bytes=A}else throw new _("Decimal128 must take a Buffer or string")}static fromString(A){return R2._fromString(A,{allowRounding:!1})}static fromStringWithRounding(A){return R2._fromString(A,{allowRounding:!0})}static _fromString(A,F){let B=!1,D=!1,$=!1,J=!1,X=0,E=0,Y=0,G=0,H=0,W=[0],q=0,C=0,Q=0,K=0,U=new P(0,0),Z=new P(0,0),V=0,w=0;if(A.length>=7000)throw new _(""+A+" not a valid Decimal128 string");let R=A.match(Xn),I=A.match(En),j=A.match(Yn);if(!R&&!I&&!j||A.length===0)throw new _(""+A+" not a valid Decimal128 string");if(R){let T=R[2],y=R[4],g=R[5],p=R[6];if(y&&p===void 0)W3(A,"missing exponent power");if(y&&T===void 0)W3(A,"missing exponent base");if(y===void 0&&(g||p))W3(A,"missing e before exponent")}if(A[w]==="+"||A[w]==="-")D=!0,B=A[w++]==="-";if(!GZ(A[w])&&A[w]!=="."){if(A[w]==="i"||A[w]==="I")return new R2(B?XZ:EZ);else if(A[w]==="N")return new R2(zE)}while(GZ(A[w])||A[w]==="."){if(A[w]==="."){if($)W3(A,"contains multiple periods");$=!0,w=w+1;continue}if(q<JZ){if(A[w]!=="0"||J){if(!J)H=E;J=!0,W[C++]=parseInt(A[w],10),q=q+1}}if(J)Y=Y+1;if($)G=G+1;E=E+1,w=w+1}if($&&!E)throw new _(""+A+" not a valid Decimal128 string");if(A[w]==="e"||A[w]==="E"){let T=A.substr(++w).match(Gn);if(!T||!T[2])return new R2(zE);K=parseInt(T[0],10),w=w+T[0].length}if(A[w])return new R2(zE);if(!q)W[0]=0,Y=1,q=1,X=0;else if(Q=q-1,X=Y,X!==1)while(A[H+X-1+Number(D)+Number($)]==="0")X=X-1;if(K<=G&&G>K+16384)K=e5;else K=K-G;while(K>a7){if(Q=Q+1,Q>=JZ){if(X===0){K=a7;break}W3(A,"overflow")}K=K-1}if(F.allowRounding){while(K<e5||q<Y){if(Q===0&&X<q){K=e5,X=0;break}if(q<Y)Y=Y-1;else Q=Q-1;if(K<a7)K=K+1;else{if(W.join("").match(/^0+$/)){K=a7;break}W3(A,"overflow")}}if(Q+1<X){let T=E;if($)H=H+1,T=T+1;if(D)H=H+1,T=T+1;let y=parseInt(A[H+Q+1],10),g=0;if(y>=5){if(g=1,y===5){g=W[Q]%2===1?1:0;for(let p=H+Q+2;p<T;p++)if(parseInt(A[p],10)){g=1;break}}}if(g){let p=Q;for(;p>=0;p--)if(++W[p]>9){if(W[p]=0,p===0)if(K<a7)K=K+1,W[p]=1;else return new R2(B?XZ:EZ)}else break}}}else{while(K<e5||q<Y){if(Q===0){if(X===0){K=e5;break}W3(A,"exponent underflow")}if(q<Y){if(A[Y-1+Number(D)+Number($)]!=="0"&&X!==0)W3(A,"inexact rounding");Y=Y-1}else{if(W[Q]!==0)W3(A,"inexact rounding");Q=Q-1}if(K<a7)K=K+1;else W3(A,"overflow")}if(Q+1<X){if($)H=H+1;if(D)H=H+1;if(parseInt(A[H+Q+1],10)!==0)W3(A,"inexact rounding")}}if(U=P.fromNumber(0),Z=P.fromNumber(0),X===0)U=P.fromNumber(0),Z=P.fromNumber(0);else if(Q<17){let T=0;Z=P.fromNumber(W[T++]),U=new P(0,0);for(;T<=Q;T++)Z=Z.multiply(P.fromNumber(10)),Z=Z.add(P.fromNumber(W[T]))}else{let T=0;U=P.fromNumber(W[T++]);for(;T<=Q-17;T++)U=U.multiply(P.fromNumber(10)),U=U.add(P.fromNumber(W[T]));Z=P.fromNumber(W[T++]);for(;T<=Q;T++)Z=Z.multiply(P.fromNumber(10)),Z=Z.add(P.fromNumber(W[T]))}let k=Qn(U,P.fromString("100000000000000000"));if(k.low=k.low.add(Z),Kn(k.low,Z))k.high=k.high.add(P.fromNumber(1));V=K+$Z;let u={low:P.fromNumber(0),high:P.fromNumber(0)};if(k.high.shiftRightUnsigned(49).and(P.fromNumber(1)).equals(P.fromNumber(1)))u.high=u.high.or(P.fromNumber(3).shiftLeft(61)),u.high=u.high.or(P.fromNumber(V).and(P.fromNumber(16383).shiftLeft(47))),u.high=u.high.or(k.high.and(P.fromNumber(140737488355327)));else u.high=u.high.or(P.fromNumber(V&16383).shiftLeft(49)),u.high=u.high.or(k.high.and(P.fromNumber(562949953421311)));if(u.low=k.low,B)u.high=u.high.or(P.fromString("9223372036854775808"));let x=S.allocateUnsafe(16);return w=0,x[w++]=u.low.low&255,x[w++]=u.low.low>>8&255,x[w++]=u.low.low>>16&255,x[w++]=u.low.low>>24&255,x[w++]=u.low.high&255,x[w++]=u.low.high>>8&255,x[w++]=u.low.high>>16&255,x[w++]=u.low.high>>24&255,x[w++]=u.high.low&255,x[w++]=u.high.low>>8&255,x[w++]=u.high.low>>16&255,x[w++]=u.high.low>>24&255,x[w++]=u.high.high&255,x[w++]=u.high.high>>8&255,x[w++]=u.high.high>>16&255,x[w++]=u.high.high>>24&255,new R2(x)}toString(){let A,F=0,B=new Array(36);for(let w=0;w<B.length;w++)B[w]=0;let D=0,$=!1,J,X={parts:[0,0,0,0]},E,Y,G=[];D=0;let H=this.bytes,W=H[D++]|H[D++]<<8|H[D++]<<16|H[D++]<<24,q=H[D++]|H[D++]<<8|H[D++]<<16|H[D++]<<24,C=H[D++]|H[D++]<<8|H[D++]<<16|H[D++]<<24,Q=H[D++]|H[D++]<<8|H[D++]<<16|H[D++]<<24;if(D=0,{low:new P(W,q),high:new P(C,Q)}.high.lessThan(P.ZERO))G.push("-");let U=Q>>26&Hn;if(U>>3===3)if(U===Wn)return G.join("")+"Infinity";else if(U===qn)return"NaN";else A=Q>>15&YZ,J=8+(Q>>14&1);else J=Q>>14&7,A=Q>>17&YZ;let Z=A-$Z;if(X.parts[0]=(Q&16383)+((J&15)<<14),X.parts[1]=C,X.parts[2]=q,X.parts[3]=W,X.parts[0]===0&&X.parts[1]===0&&X.parts[2]===0&&X.parts[3]===0)$=!0;else for(Y=3;Y>=0;Y--){let w=0,R=Cn(X);if(X=R.quotient,w=R.rem.low,!w)continue;for(E=8;E>=0;E--)B[Y*9+E]=w%10,w=Math.floor(w/10)}if($)F=1,B[D]=0;else{F=36;while(!B[D])F=F-1,D=D+1}let V=F-1+Z;if(V>=34||V<=-7||Z>0){if(F>34){if(G.push("0"),Z>0)G.push(`E+${Z}`);else if(Z<0)G.push(`E${Z}`);return G.join("")}if(G.push(`${B[D++]}`),F=F-1,F)G.push(".");for(let w=0;w<F;w++)G.push(`${B[D++]}`);if(G.push("E"),V>0)G.push(`+${V}`);else G.push(`${V}`)}else if(Z>=0)for(let w=0;w<F;w++)G.push(`${B[D++]}`);else{let w=F+Z;if(w>0)for(let R=0;R<w;R++)G.push(`${B[D++]}`);else G.push("0");G.push(".");while(w++<0)G.push("0");for(let R=0;R<F-Math.max(w-1,0);R++)G.push(`${B[D++]}`)}return G.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON(A){return R2.fromString(A.$numberDecimal)}inspect(A,F,B){return B??=R6,`new Decimal128(${B(this.toString(),F)})`}}class m6 extends c2{get _bsontype(){return"Double"}constructor(A){super();if(A instanceof Number)A=A.valueOf();this.value=+A}static fromString(A){let F=Number(A);if(A==="NaN")return new m6(NaN);if(A==="Infinity")return new m6(1/0);if(A==="-Infinity")return new m6(-1/0);if(!Number.isFinite(F))throw new _(`Input: ${A} is not representable as a Double`);if(A.trim()!==A)throw new _(`Input: '${A}' contains whitespace`);if(A==="")throw new _("Input is an empty string");if(/[^-0-9.+eE]/.test(A))throw new _(`Input: '${A}' is not in decimal or exponential notation`);return new m6(F)}valueOf(){return this.value}toJSON(){return this.value}toString(A){return this.value.toString(A)}toExtendedJSON(A){if(A&&(A.legacy||A.relaxed&&isFinite(this.value)))return this.value;if(Object.is(Math.sign(this.value),-0))return{$numberDouble:"-0.0"};return{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON(A,F){let B=parseFloat(A.$numberDouble);return F&&F.relaxed?B:new m6(B)}inspect(A,F,B){return B??=R6,`new Double(${B(this.value,F)})`}}class G4 extends c2{get _bsontype(){return"Int32"}constructor(A){super();if(A instanceof Number)A=A.valueOf();this.value=+A|0}static fromString(A){let F=SZ(A),B=Number(A);if($A<B)throw new _(`Input: '${A}' is larger than the maximum value for Int32`);else if(JA>B)throw new _(`Input: '${A}' is smaller than the minimum value for Int32`);else if(!Number.isSafeInteger(B))throw new _(`Input: '${A}' is not a safe integer`);else if(B.toString()!==F)throw new _(`Input: '${A}' is not a valid Int32 string`);return new G4(B)}valueOf(){return this.value}toString(A){return this.value.toString(A)}toJSON(){return this.value}toExtendedJSON(A){if(A&&(A.relaxed||A.legacy))return this.value;return{$numberInt:this.value.toString()}}static fromExtendedJSON(A,F){return F&&F.relaxed?parseInt(A.$numberInt,10):new G4(A.$numberInt)}inspect(A,F,B){return B??=R6,`new Int32(${B(this.value,F)})`}}class d9 extends c2{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new d9}inspect(){return"new MaxKey()"}}class l9 extends c2{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new l9}inspect(){return"new MinKey()"}}var v9=null,AA=new WeakMap;class E0 extends c2{get _bsontype(){return"ObjectId"}constructor(A){super();let F;if(typeof A==="object"&&A&&"id"in A){if(typeof A.id!=="string"&&!ArrayBuffer.isView(A.id))throw new _("Argument passed in must have an id that is of type string or Buffer");if("toHexString"in A&&typeof A.toHexString==="function")F=S.fromHex(A.toHexString());else F=A.id}else F=A;if(F==null||typeof F==="number")this.buffer=E0.generate(typeof F==="number"?F:void 0);else if(ArrayBuffer.isView(F)&&F.byteLength===12)this.buffer=S.toLocalBufferType(F);else if(typeof F==="string")if(E0.validateHexString(F)){if(this.buffer=S.fromHex(F),E0.cacheHexString)AA.set(this,F)}else throw new _("input must be a 24 character hex string, 12 byte Uint8Array, or an integer");else throw new _("Argument passed in does not match the accepted types")}get id(){return this.buffer}set id(A){if(this.buffer=A,E0.cacheHexString)AA.set(this,S.toHex(A))}static validateHexString(A){if(A?.length!==24)return!1;for(let F=0;F<24;F++){let B=A.charCodeAt(F);if(B>=48&&B<=57||B>=97&&B<=102||B>=65&&B<=70)continue;return!1}return!0}toHexString(){if(E0.cacheHexString){let F=AA.get(this);if(F)return F}let A=S.toHex(this.id);if(E0.cacheHexString)AA.set(this,A);return A}static getInc(){return E0.index=(E0.index+1)%16777215}static generate(A){if(typeof A!=="number")A=Math.floor(Date.now()/1000);let F=E0.getInc(),B=S.allocateUnsafe(12);if(Y1.setInt32BE(B,0,A),v9===null)v9=S.randomBytes(5);return B[4]=v9[0],B[5]=v9[1],B[6]=v9[2],B[7]=v9[3],B[8]=v9[4],B[11]=F&255,B[10]=F>>8&255,B[9]=F>>16&255,B}toString(A){if(A==="base64")return S.toBase64(this.id);if(A==="hex")return this.toHexString();return this.toHexString()}toJSON(){return this.toHexString()}static is(A){return A!=null&&typeof A==="object"&&"_bsontype"in A&&A._bsontype==="ObjectId"}equals(A){if(A===void 0||A===null)return!1;if(E0.is(A))return this.buffer[11]===A.buffer[11]&&S.equals(this.buffer,A.buffer);if(typeof A==="string")return A.toLowerCase()===this.toHexString();if(typeof A==="object"&&typeof A.toHexString==="function"){let F=A.toHexString(),B=this.toHexString();return typeof F==="string"&&F.toLowerCase()===B}return!1}getTimestamp(){let A=new Date,F=Y1.getUint32BE(this.buffer,0);return A.setTime(Math.floor(F)*1000),A}static createPk(){return new E0}serializeInto(A,F){return A[F]=this.buffer[0],A[F+1]=this.buffer[1],A[F+2]=this.buffer[2],A[F+3]=this.buffer[3],A[F+4]=this.buffer[4],A[F+5]=this.buffer[5],A[F+6]=this.buffer[6],A[F+7]=this.buffer[7],A[F+8]=this.buffer[8],A[F+9]=this.buffer[9],A[F+10]=this.buffer[10],A[F+11]=this.buffer[11],12}static createFromTime(A){let F=S.allocate(12);for(let B=11;B>=4;B--)F[B]=0;return Y1.setInt32BE(F,0,A),new E0(F)}static createFromHexString(A){if(A?.length!==24)throw new _("hex string must be 24 characters");return new E0(S.fromHex(A))}static createFromBase64(A){if(A?.length!==16)throw new _("base64 string must be 16 characters");return new E0(S.fromBase64(A))}static isValid(A){if(A==null)return!1;if(typeof A==="string")return E0.validateHexString(A);try{return new E0(A),!0}catch{return!1}}toExtendedJSON(){if(this.toHexString)return{$oid:this.toHexString()};return{$oid:this.toString("hex")}}static fromExtendedJSON(A){return new E0(A.$oid)}isCached(){return E0.cacheHexString&&AA.has(this)}inspect(A,F,B){return B??=R6,`new ObjectId(${B(this.toHexString(),F)})`}}E0.index=Math.floor(Math.random()*16777215);function mB(A,F,B){let D=5;if(Array.isArray(A))for(let $=0;$<A.length;$++)D+=HZ($.toString(),A[$],F,!0,B);else{if(typeof A?.toBSON==="function")A=A.toBSON();for(let $ of Object.keys(A))D+=HZ($,A[$],F,!1,B)}return D}function HZ(A,F,B=!1,D=!1,$=!1){if(typeof F?.toBSON==="function")F=F.toBSON();switch(typeof F){case"string":return 1+S.utf8ByteLength(A)+1+4+S.utf8ByteLength(F)+1;case"number":if(Math.floor(F)===F&&F>=zZ&&F<=KZ)if(F>=JA&&F<=$A)return(A!=null?S.utf8ByteLength(A)+1:0)+5;else return(A!=null?S.utf8ByteLength(A)+1:0)+9;else return(A!=null?S.utf8ByteLength(A)+1:0)+9;case"undefined":if(D||!$)return(A!=null?S.utf8ByteLength(A)+1:0)+1;return 0;case"boolean":return(A!=null?S.utf8ByteLength(A)+1:0)+2;case"object":if(F!=null&&typeof F._bsontype==="string"&&F[B8]!==m9)throw new i4;else if(F==null||F._bsontype==="MinKey"||F._bsontype==="MaxKey")return(A!=null?S.utf8ByteLength(A)+1:0)+1;else if(F._bsontype==="ObjectId")return(A!=null?S.utf8ByteLength(A)+1:0)+13;else if(F instanceof Date||e7(F))return(A!=null?S.utf8ByteLength(A)+1:0)+9;else if(ArrayBuffer.isView(F)||F instanceof ArrayBuffer||hE(F))return(A!=null?S.utf8ByteLength(A)+1:0)+6+F.byteLength;else if(F._bsontype==="Long"||F._bsontype==="Double"||F._bsontype==="Timestamp")return(A!=null?S.utf8ByteLength(A)+1:0)+9;else if(F._bsontype==="Decimal128")return(A!=null?S.utf8ByteLength(A)+1:0)+17;else if(F._bsontype==="Code")if(F.scope!=null&&Object.keys(F.scope).length>0)return(A!=null?S.utf8ByteLength(A)+1:0)+1+4+4+S.utf8ByteLength(F.code.toString())+1+mB(F.scope,B,$);else return(A!=null?S.utf8ByteLength(A)+1:0)+1+4+S.utf8ByteLength(F.code.toString())+1;else if(F._bsontype==="Binary"){let J=F;if(J.sub_type===J1.SUBTYPE_BYTE_ARRAY)return(A!=null?S.utf8ByteLength(A)+1:0)+(J.position+1+4+1+4);else return(A!=null?S.utf8ByteLength(A)+1:0)+(J.position+1+4+1)}else if(F._bsontype==="Symbol")return(A!=null?S.utf8ByteLength(A)+1:0)+S.utf8ByteLength(F.value)+4+1+1;else if(F._bsontype==="DBRef"){let J=Object.assign({$ref:F.collection,$id:F.oid},F.fields);if(F.db!=null)J.$db=F.db;return(A!=null?S.utf8ByteLength(A)+1:0)+1+mB(J,B,$)}else if(F instanceof RegExp||o7(F))return(A!=null?S.utf8ByteLength(A)+1:0)+1+S.utf8ByteLength(F.source)+1+(F.global?1:0)+(F.ignoreCase?1:0)+(F.multiline?1:0)+1;else if(F._bsontype==="BSONRegExp")return(A!=null?S.utf8ByteLength(A)+1:0)+1+S.utf8ByteLength(F.pattern)+1+S.utf8ByteLength(F.options)+1;else return(A!=null?S.utf8ByteLength(A)+1:0)+mB(F,B,$)+1;case"function":if(B)return(A!=null?S.utf8ByteLength(A)+1:0)+1+4+S.utf8ByteLength(F.toString())+1;return 0;case"bigint":return(A!=null?S.utf8ByteLength(A)+1:0)+9;case"symbol":return 0;default:throw new _(`Unrecognized JS type: ${typeof F}`)}}function zn(A){return A.split("").sort().join("")}class l6 extends c2{get _bsontype(){return"BSONRegExp"}constructor(A,F){super();if(this.pattern=A,this.options=zn(F??""),this.pattern.indexOf("\x00")!==-1)throw new _(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(this.options.indexOf("\x00")!==-1)throw new _(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let B=0;B<this.options.length;B++)if(!(this.options[B]==="i"||this.options[B]==="m"||this.options[B]==="x"||this.options[B]==="l"||this.options[B]==="s"||this.options[B]==="u"))throw new _(`The regular expression option [${this.options[B]}] is not supported`)}static parseOptions(A){return A?A.split("").sort().join(""):""}toExtendedJSON(A){if(A=A||{},A.legacy)return{$regex:this.pattern,$options:this.options};return{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON(A){if("$regex"in A)if(typeof A.$regex!=="string"){if(A.$regex._bsontype==="BSONRegExp")return A}else return new l6(A.$regex,l6.parseOptions(A.$options));if("$regularExpression"in A)return new l6(A.$regularExpression.pattern,l6.parseOptions(A.$regularExpression.options));throw new _(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(A)}`)}inspect(A,F,B){let D=di(F)??((X)=>X);B??=R6;let $=D(B(this.pattern),"regexp"),J=D(B(this.options),"regexp");return`new BSONRegExp(${$}, ${J})`}}class c9 extends c2{get _bsontype(){return"BSONSymbol"}constructor(A){super();this.value=A}valueOf(){return this.value}toString(){return this.value}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON(A){return new c9(A.$symbol)}inspect(A,F,B){return B??=R6,`new BSONSymbol(${B(this.value,F)})`}}var Un=P;class d6 extends Un{get _bsontype(){return"Timestamp"}get i(){return this.low>>>0}get t(){return this.high>>>0}constructor(A){if(A==null)super(0,0,!0);else if(typeof A==="bigint")super(A,!0);else if(P.isLong(A))super(A.low,A.high,!0);else if(typeof A==="object"&&"t"in A&&"i"in A){if(typeof A.t!=="number"&&(typeof A.t!=="object"||A.t._bsontype!=="Int32"))throw new _("Timestamp constructed from { t, i } must provide t as a number");if(typeof A.i!=="number"&&(typeof A.i!=="object"||A.i._bsontype!=="Int32"))throw new _("Timestamp constructed from { t, i } must provide i as a number");let F=Number(A.t),B=Number(A.i);if(F<0||Number.isNaN(F))throw new _("Timestamp constructed from { t, i } must provide a positive t");if(B<0||Number.isNaN(B))throw new _("Timestamp constructed from { t, i } must provide a positive i");if(F>4294967295)throw new _("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if(B>4294967295)throw new _("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super(B,F,!0)}else throw new _("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }")}toJSON(){return{$timestamp:this.toString()}}static fromInt(A){return new d6(P.fromInt(A,!0))}static fromNumber(A){return new d6(P.fromNumber(A,!0))}static fromBits(A,F){return new d6({i:A,t:F})}static fromString(A,F){return new d6(P.fromString(A,!0,F))}toExtendedJSON(){return{$timestamp:{t:this.t,i:this.i}}}static fromExtendedJSON(A){let F=P.isLong(A.$timestamp.i)?A.$timestamp.i.getLowBitsUnsigned():A.$timestamp.i,B=P.isLong(A.$timestamp.t)?A.$timestamp.t.getLowBitsUnsigned():A.$timestamp.t;return new d6({t:B,i:F})}inspect(A,F,B){B??=R6;let D=B(this.t,F),$=B(this.i,F);return`new Timestamp({ t: ${D}, i: ${$} })`}}d6.MAX_VALUE=P.MAX_UNSIGNED_VALUE;var Zn=P.fromNumber(KZ),Vn=P.fromNumber(zZ);function _Z(A,F,B){F=F==null?{}:F;let D=F&&F.index?F.index:0,$=Y1.getInt32LE(A,D);if($<5)throw new _(`bson size must be >= 5, is ${$}`);if(F.allowObjectSmallerThanBufferSize&&A.length<$)throw new _(`buffer length ${A.length} must be >= bson size ${$}`);if(!F.allowObjectSmallerThanBufferSize&&A.length!==$)throw new _(`buffer length ${A.length} must === bson size ${$}`);if($+D>A.byteLength)throw new _(`(bson size ${$} + options.index ${D} must be <= buffer length ${A.byteLength})`);if(A[D+$-1]!==0)throw new _("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return dB(A,D,F,B)}var wn=/^\$ref$|^\$id$|^\$db$/;function dB(A,F,B,D=!1){let $=B.fieldsAsRaw==null?null:B.fieldsAsRaw,J=B.raw==null?!1:B.raw,X=typeof B.bsonRegExp==="boolean"?B.bsonRegExp:!1,E=B.promoteBuffers??!1,Y=B.promoteLongs??!0,G=B.promoteValues??!0,H=B.useBigInt64??!1;if(H&&!G)throw new _("Must either request bigint or Long for int64 deserialization");if(H&&!Y)throw new _("Must either request bigint or Long for int64 deserialization");let W=B.validation==null?{utf8:!0}:B.validation,q=!0,C,Q,K=W.utf8;if(typeof K==="boolean")C=K;else{q=!1;let I=Object.keys(K).map(function(j){return K[j]});if(I.length===0)throw new _("UTF-8 validation setting cannot be empty");if(typeof I[0]!=="boolean")throw new _("Invalid UTF-8 validation option, must specify boolean values");if(C=I[0],!I.every((j)=>j===C))throw new _("Invalid UTF-8 validation option - keys must be all true or all false")}if(!q){Q=new Set;for(let I of Object.keys(K))Q.add(I)}let U=F;if(A.length<5)throw new _("corrupt bson message < 5 bytes long");let Z=Y1.getInt32LE(A,F);if(F+=4,Z<5||Z>A.length)throw new _("corrupt bson message");let V=D?[]:{},w=0,R=D?!1:null;while(!0){let I=A[F++];if(I===0)break;let j=F;while(A[j]!==0&&j<A.length)j++;if(j>=A.byteLength)throw new _("Bad BSON Document: illegal CString");let k=D?w++:S.toUTF8(A,F,j,!1),u=!0;if(q||Q?.has(k))u=C;else u=!C;if(R!==!1&&k[0]==="$")R=wn.test(k);let x;if(F=j+1,I===UZ){let T=Y1.getInt32LE(A,F);if(F+=4,T<=0||T>A.length-F||A[F+T-1]!==0)throw new _("bad string length in bson");x=S.toUTF8(A,F,F+T-1,u),F=F+T}else if(I===VZ){let T=S.allocateUnsafe(12);for(let y=0;y<12;y++)T[y]=A[F+y];x=new E0(T),F=F+12}else if(I===FA&&G===!1)x=new G4(Y1.getInt32LE(A,F)),F+=4;else if(I===FA)x=Y1.getInt32LE(A,F),F+=4;else if(I===mE){if(x=Y1.getFloat64LE(A,F),F+=8,G===!1)x=new m6(x)}else if(I===LZ){let T=Y1.getInt32LE(A,F),y=Y1.getInt32LE(A,F+4);F+=8,x=new Date(new P(T,y).toNumber())}else if(I===wZ){if(A[F]!==0&&A[F]!==1)throw new _("illegal boolean type value");x=A[F++]===1}else if(I===dE){let T=F,y=Y1.getInt32LE(A,F);if(y<=0||y>A.length-F)throw new _("bad embedded document length in bson");if(J)x=A.subarray(F,F+y);else{let g=B;if(!q)g={...B,validation:{utf8:u}};x=dB(A,T,g,!1)}F=F+y}else if(I===ZZ){let T=F,y=Y1.getInt32LE(A,F),g=B,p=F+y;if($&&$[k])g={...B,raw:!0};if(!q)g={...g,validation:{utf8:u}};if(x=dB(A,T,g,!0),F=F+y,A[F-1]!==0)throw new _("invalid array terminator byte");if(F!==p)throw new _("corrupted array bson")}else if(I===li)x=void 0;else if(I===cE)x=null;else if(I===iE)if(H)x=Y1.getBigInt64LE(A,F),F+=8;else{let T=Y1.getInt32LE(A,F),y=Y1.getInt32LE(A,F+4);F+=8;let g=new P(T,y);if(Y&&G===!0)x=g.lessThanOrEqual(Zn)&&g.greaterThanOrEqual(Vn)?g.toNumber():g;else x=g}else if(I===IZ){let T=S.allocateUnsafe(16);for(let y=0;y<16;y++)T[y]=A[F+y];F=F+16,x=new R2(T)}else if(I===lE){let T=Y1.getInt32LE(A,F);F+=4;let y=T,g=A[F++];if(T<0)throw new _("Negative binary type element size found");if(T>A.byteLength)throw new _("Binary type size larger than document size");if(g===J1.SUBTYPE_BYTE_ARRAY){if(T=Y1.getInt32LE(A,F),F+=4,T<0)throw new _("Negative binary type element size found for subtype 0x02");if(T>y-4)throw new _("Binary type with subtype 0x02 contains too long binary size");if(T<y-4)throw new _("Binary type with subtype 0x02 contains too short binary size")}if(E&&G)x=S.toLocalBufferType(A.subarray(F,F+T));else if(x=new J1(A.subarray(F,F+T),g),g===nE&&D2.isValid(x))x=x.toUUID();F=F+T}else if(I===lB&&X===!1){j=F;while(A[j]!==0&&j<A.length)j++;if(j>=A.length)throw new _("Bad BSON Document: illegal CString");let T=S.toUTF8(A,F,j,!1);F=j+1,j=F;while(A[j]!==0&&j<A.length)j++;if(j>=A.length)throw new _("Bad BSON Document: illegal CString");let y=S.toUTF8(A,F,j,!1);F=j+1;let g=new Array(y.length);for(j=0;j<y.length;j++)switch(y[j]){case"m":g[j]="m";break;case"s":g[j]="g";break;case"i":g[j]="i";break}x=new RegExp(T,g.join(""))}else if(I===lB&&X===!0){j=F;while(A[j]!==0&&j<A.length)j++;if(j>=A.length)throw new _("Bad BSON Document: illegal CString");let T=S.toUTF8(A,F,j,!1);F=j+1,j=F;while(A[j]!==0&&j<A.length)j++;if(j>=A.length)throw new _("Bad BSON Document: illegal CString");let y=S.toUTF8(A,F,j,!1);F=j+1,x=new l6(T,y)}else if(I===RZ){let T=Y1.getInt32LE(A,F);if(F+=4,T<=0||T>A.length-F||A[F+T-1]!==0)throw new _("bad string length in bson");let y=S.toUTF8(A,F,F+T-1,u);x=G?y:new c9(y),F=F+T}else if(I===PZ)x=new d6({i:Y1.getUint32LE(A,F),t:Y1.getUint32LE(A,F+4)}),F+=8;else if(I===MZ)x=new l9;else if(I===jZ)x=new d9;else if(I===pE){let T=Y1.getInt32LE(A,F);if(F+=4,T<=0||T>A.length-F||A[F+T-1]!==0)throw new _("bad string length in bson");let y=S.toUTF8(A,F,F+T-1,u);x=new Y4(y),F=F+T}else if(I===NZ){let T=Y1.getInt32LE(A,F);if(F+=4,T<13)throw new _("code_w_scope total size shorter minimum expected length");let y=Y1.getInt32LE(A,F);if(F+=4,y<=0||y>A.length-F||A[F+y-1]!==0)throw new _("bad string length in bson");let g=S.toUTF8(A,F,F+y-1,u);F=F+y;let p=F,A1=Y1.getInt32LE(A,F),L0=dB(A,p,B,!1);if(F=F+A1,T<8+A1+y)throw new _("code_w_scope total size is too short, truncating scope");if(T>8+A1+y)throw new _("code_w_scope total size is too long, clips outer document");x=new Y4(g,L0)}else if(I===ci){let T=Y1.getInt32LE(A,F);if(F+=4,T<=0||T>A.length-F||A[F+T-1]!==0)throw new _("bad string length in bson");let y=S.toUTF8(A,F,F+T-1,u);F=F+T;let g=S.allocateUnsafe(12);for(let A1=0;A1<12;A1++)g[A1]=A[F+A1];let p=new E0(g);F=F+12,x=new y3(y,p)}else throw new _(`Detected unknown BSON type ${I.toString(16)} for fieldname "${k}"`);if(k==="__proto__")Object.defineProperty(V,k,{value:x,writable:!0,enumerable:!0,configurable:!0});else V[k]=x}if(Z!==F-U){if(D)throw new _("corrupt array bson");throw new _("corrupt object bson")}if(!R)return V;if(uZ(V)){let I=Object.assign({},V);return delete I.$ref,delete I.$id,delete I.$db,new y3(V.$ref,V.$id,V.$db,I)}return V}var cB=/\x00/,WZ=new Set(["$db","$ref","$id","$clusterTime"]);function UE(A,F,B,D){A[D++]=UZ;let $=S.encodeUTF8Into(A,F,D);D=D+$+1,A[D-1]=0;let J=S.encodeUTF8Into(A,B,D+4);return Y1.setInt32LE(A,D,J+1),D=D+4+J,A[D++]=0,D}function ZE(A,F,B,D){let J=!Object.is(B,-0)&&Number.isSafeInteger(B)&&B<=$A&&B>=JA?FA:mE;A[D++]=J;let X=S.encodeUTF8Into(A,F,D);if(D=D+X,A[D++]=0,J===FA)D+=Y1.setInt32LE(A,D,B);else D+=Y1.setFloat64LE(A,D,B);return D}function VE(A,F,B,D){A[D++]=iE;let $=S.encodeUTF8Into(A,F,D);return D+=$,A[D++]=0,D+=Y1.setBigInt64LE(A,D,B),D}function r7(A,F,B,D){A[D++]=cE;let $=S.encodeUTF8Into(A,F,D);return D=D+$,A[D++]=0,D}function wE(A,F,B,D){A[D++]=wZ;let $=S.encodeUTF8Into(A,F,D);return D=D+$,A[D++]=0,A[D++]=B?1:0,D}function LE(A,F,B,D){A[D++]=LZ;let $=S.encodeUTF8Into(A,F,D);D=D+$,A[D++]=0;let J=P.fromNumber(B.getTime()),X=J.getLowBits(),E=J.getHighBits();return D+=Y1.setInt32LE(A,D,X),D+=Y1.setInt32LE(A,D,E),D}function RE(A,F,B,D){A[D++]=lB;let $=S.encodeUTF8Into(A,F,D);if(D=D+$,A[D++]=0,B.source&&B.source.match(cB)!=null)throw new _("value "+B.source+" must not contain null bytes");if(D=D+S.encodeUTF8Into(A,B.source,D),A[D++]=0,B.ignoreCase)A[D++]=105;if(B.global)A[D++]=115;if(B.multiline)A[D++]=109;return A[D++]=0,D}function NE(A,F,B,D){A[D++]=lB;let $=S.encodeUTF8Into(A,F,D);if(D=D+$,A[D++]=0,B.pattern.match(cB)!=null)throw new _("pattern "+B.pattern+" must not contain null bytes");D=D+S.encodeUTF8Into(A,B.pattern,D),A[D++]=0;let J=B.options.split("").sort().join("");return D=D+S.encodeUTF8Into(A,J,D),A[D++]=0,D}function PE(A,F,B,D){if(B===null)A[D++]=cE;else if(B._bsontype==="MinKey")A[D++]=MZ;else A[D++]=jZ;let $=S.encodeUTF8Into(A,F,D);return D=D+$,A[D++]=0,D}function IE(A,F,B,D){A[D++]=VZ;let $=S.encodeUTF8Into(A,F,D);return D=D+$,A[D++]=0,D+=B.serializeInto(A,D),D}function ME(A,F,B,D){A[D++]=lE;let $=S.encodeUTF8Into(A,F,D);D=D+$,A[D++]=0;let J=B.length;if(D+=Y1.setInt32LE(A,D,J),A[D++]=pi,J<=16)for(let X=0;X<J;X++)A[D+X]=B[X];else A.set(B,D);return D=D+J,D}function jE(A,F,B,D,$,J,X,E,Y){if(Y.has(B))throw new _("Cannot convert circular structure to BSON");Y.add(B),A[D++]=Array.isArray(B)?ZZ:dE;let G=S.encodeUTF8Into(A,F,D);D=D+G,A[D++]=0;let H=XA(A,B,$,D,J+1,X,E,Y);return Y.delete(B),H}function TE(A,F,B,D){A[D++]=IZ;let $=S.encodeUTF8Into(A,F,D);D=D+$,A[D++]=0;for(let J=0;J<16;J++)A[D+J]=B.bytes[J];return D+16}function kE(A,F,B,D){A[D++]=B._bsontype==="Long"?iE:PZ;let $=S.encodeUTF8Into(A,F,D);D=D+$,A[D++]=0;let J=B.getLowBits(),X=B.getHighBits();return D+=Y1.setInt32LE(A,D,J),D+=Y1.setInt32LE(A,D,X),D}function OE(A,F,B,D){B=B.valueOf(),A[D++]=FA;let $=S.encodeUTF8Into(A,F,D);return D=D+$,A[D++]=0,D+=Y1.setInt32LE(A,D,B),D}function uE(A,F,B,D){A[D++]=mE;let $=S.encodeUTF8Into(A,F,D);return D=D+$,A[D++]=0,D+=Y1.setFloat64LE(A,D,B.value),D}function SE(A,F,B,D){A[D++]=pE;let $=S.encodeUTF8Into(A,F,D);D=D+$,A[D++]=0;let J=B.toString(),X=S.encodeUTF8Into(A,J,D+4)+1;return Y1.setInt32LE(A,D,X),D=D+4+X-1,A[D++]=0,D}function fE(A,F,B,D,$=!1,J=0,X=!1,E=!0,Y){if(B.scope&&typeof B.scope==="object"){A[D++]=NZ;let G=S.encodeUTF8Into(A,F,D);D=D+G,A[D++]=0;let H=D,W=B.code;D=D+4;let q=S.encodeUTF8Into(A,W,D+4)+1;Y1.setInt32LE(A,D,q),A[D+4+q-1]=0,D=D+q+4;let C=XA(A,B.scope,$,D,J+1,X,E,Y);D=C-1;let Q=C-H;H+=Y1.setInt32LE(A,H,Q),A[D++]=0}else{A[D++]=pE;let G=S.encodeUTF8Into(A,F,D);D=D+G,A[D++]=0;let H=B.code.toString(),W=S.encodeUTF8Into(A,H,D+4)+1;Y1.setInt32LE(A,D,W),D=D+4+W-1,A[D++]=0}return D}function _E(A,F,B,D){A[D++]=lE;let $=S.encodeUTF8Into(A,F,D);D=D+$,A[D++]=0;let{buffer:J,position:X}=B;if(B.sub_type===J1.SUBTYPE_BYTE_ARRAY)X=X+4;if(D+=Y1.setInt32LE(A,D,X),A[D++]=B.sub_type,B.sub_type===J1.SUBTYPE_BYTE_ARRAY)X=X-4,D+=Y1.setInt32LE(A,D,X);if(B.sub_type===J1.SUBTYPE_VECTOR)J4(B);if(X<=16)for(let E=0;E<X;E++)A[D+E]=J[E];else A.set(J,D);return D=D+B.position,D}function xE(A,F,B,D){A[D++]=RZ;let $=S.encodeUTF8Into(A,F,D);D=D+$,A[D++]=0;let J=S.encodeUTF8Into(A,B.value,D+4)+1;return Y1.setInt32LE(A,D,J),D=D+4+J-1,A[D++]=0,D}function gE(A,F,B,D,$,J,X){A[D++]=dE;let E=S.encodeUTF8Into(A,F,D);D=D+E,A[D++]=0;let Y=D,G={$ref:B.collection||B.namespace,$id:B.oid};if(B.db!=null)G.$db=B.db;G=Object.assign(G,B.fields);let H=XA(A,G,!1,D,$+1,J,!0,X),W=H-Y;return Y+=Y1.setInt32LE(A,D,W),H}function XA(A,F,B,D,$,J,X,E){if(E==null){if(F==null)return A[0]=5,A[1]=0,A[2]=0,A[3]=0,A[4]=0,5;if(Array.isArray(F))throw new _("serialize does not support an array as the root input");if(typeof F!=="object")throw new _("serialize does not support non-object as the root input");else if("_bsontype"in F&&typeof F._bsontype==="string")throw new _("BSON types cannot be serialized as a document");else if(e7(F)||o7(F)||t7(F)||hE(F))throw new _("date, regexp, typedarray, and arraybuffer cannot be BSON documents");E=new Set}E.add(F);let Y=D+4;if(Array.isArray(F))for(let H=0;H<F.length;H++){let W=`${H}`,q=F[H];if(typeof q?.toBSON==="function")q=q.toBSON();let C=typeof q;if(q===void 0)Y=r7(A,W,q,Y);else if(q===null)Y=r7(A,W,q,Y);else if(C==="string")Y=UE(A,W,q,Y);else if(C==="number")Y=ZE(A,W,q,Y);else if(C==="bigint")Y=VE(A,W,q,Y);else if(C==="boolean")Y=wE(A,W,q,Y);else if(C==="object"&&q._bsontype==null)if(q instanceof Date||e7(q))Y=LE(A,W,q,Y);else if(q instanceof Uint8Array||t7(q))Y=ME(A,W,q,Y);else if(q instanceof RegExp||o7(q))Y=RE(A,W,q,Y);else Y=jE(A,W,q,Y,B,$,J,X,E);else if(C==="object"){if(q[B8]!==m9)throw new i4;else if(q._bsontype==="ObjectId")Y=IE(A,W,q,Y);else if(q._bsontype==="Decimal128")Y=TE(A,W,q,Y);else if(q._bsontype==="Long"||q._bsontype==="Timestamp")Y=kE(A,W,q,Y);else if(q._bsontype==="Double")Y=uE(A,W,q,Y);else if(q._bsontype==="Code")Y=fE(A,W,q,Y,B,$,J,X,E);else if(q._bsontype==="Binary")Y=_E(A,W,q,Y);else if(q._bsontype==="BSONSymbol")Y=xE(A,W,q,Y);else if(q._bsontype==="DBRef")Y=gE(A,W,q,Y,$,J,E);else if(q._bsontype==="BSONRegExp")Y=NE(A,W,q,Y);else if(q._bsontype==="Int32")Y=OE(A,W,q,Y);else if(q._bsontype==="MinKey"||q._bsontype==="MaxKey")Y=PE(A,W,q,Y);else if(typeof q._bsontype!=="undefined")throw new _(`Unrecognized or invalid _bsontype: ${String(q._bsontype)}`)}else if(C==="function"&&J)Y=SE(A,W,q,Y)}else if(F instanceof Map||vE(F)){let H=F.entries(),W=!1;while(!W){let q=H.next();if(W=!!q.done,W)continue;let C=q.value?q.value[0]:void 0,Q=q.value?q.value[1]:void 0;if(typeof Q?.toBSON==="function")Q=Q.toBSON();let K=typeof Q;if(typeof C==="string"&&!WZ.has(C)){if(C.match(cB)!=null)throw new _("key "+C+" must not contain null bytes");if(B){if(C[0]==="$")throw new _("key "+C+" must not start with '$'");else if(C.includes("."))throw new _("key "+C+" must not contain '.'")}}if(Q===void 0){if(X===!1)Y=r7(A,C,Q,Y)}else if(Q===null)Y=r7(A,C,Q,Y);else if(K==="string")Y=UE(A,C,Q,Y);else if(K==="number")Y=ZE(A,C,Q,Y);else if(K==="bigint")Y=VE(A,C,Q,Y);else if(K==="boolean")Y=wE(A,C,Q,Y);else if(K==="object"&&Q._bsontype==null)if(Q instanceof Date||e7(Q))Y=LE(A,C,Q,Y);else if(Q instanceof Uint8Array||t7(Q))Y=ME(A,C,Q,Y);else if(Q instanceof RegExp||o7(Q))Y=RE(A,C,Q,Y);else Y=jE(A,C,Q,Y,B,$,J,X,E);else if(K==="object"){if(Q[B8]!==m9)throw new i4;else if(Q._bsontype==="ObjectId")Y=IE(A,C,Q,Y);else if(Q._bsontype==="Decimal128")Y=TE(A,C,Q,Y);else if(Q._bsontype==="Long"||Q._bsontype==="Timestamp")Y=kE(A,C,Q,Y);else if(Q._bsontype==="Double")Y=uE(A,C,Q,Y);else if(Q._bsontype==="Code")Y=fE(A,C,Q,Y,B,$,J,X,E);else if(Q._bsontype==="Binary")Y=_E(A,C,Q,Y);else if(Q._bsontype==="BSONSymbol")Y=xE(A,C,Q,Y);else if(Q._bsontype==="DBRef")Y=gE(A,C,Q,Y,$,J,E);else if(Q._bsontype==="BSONRegExp")Y=NE(A,C,Q,Y);else if(Q._bsontype==="Int32")Y=OE(A,C,Q,Y);else if(Q._bsontype==="MinKey"||Q._bsontype==="MaxKey")Y=PE(A,C,Q,Y);else if(typeof Q._bsontype!=="undefined")throw new _(`Unrecognized or invalid _bsontype: ${String(Q._bsontype)}`)}else if(K==="function"&&J)Y=SE(A,C,Q,Y)}}else{if(typeof F?.toBSON==="function"){if(F=F.toBSON(),F!=null&&typeof F!=="object")throw new _("toBSON function did not return an object")}for(let H of Object.keys(F)){let W=F[H];if(typeof W?.toBSON==="function")W=W.toBSON();let q=typeof W;if(typeof H==="string"&&!WZ.has(H)){if(H.match(cB)!=null)throw new _("key "+H+" must not contain null bytes");if(B){if(H[0]==="$")throw new _("key "+H+" must not start with '$'");else if(H.includes("."))throw new _("key "+H+" must not contain '.'")}}if(W===void 0){if(X===!1)Y=r7(A,H,W,Y)}else if(W===null)Y=r7(A,H,W,Y);else if(q==="string")Y=UE(A,H,W,Y);else if(q==="number")Y=ZE(A,H,W,Y);else if(q==="bigint")Y=VE(A,H,W,Y);else if(q==="boolean")Y=wE(A,H,W,Y);else if(q==="object"&&W._bsontype==null)if(W instanceof Date||e7(W))Y=LE(A,H,W,Y);else if(W instanceof Uint8Array||t7(W))Y=ME(A,H,W,Y);else if(W instanceof RegExp||o7(W))Y=RE(A,H,W,Y);else Y=jE(A,H,W,Y,B,$,J,X,E);else if(q==="object"){if(W[B8]!==m9)throw new i4;else if(W._bsontype==="ObjectId")Y=IE(A,H,W,Y);else if(W._bsontype==="Decimal128")Y=TE(A,H,W,Y);else if(W._bsontype==="Long"||W._bsontype==="Timestamp")Y=kE(A,H,W,Y);else if(W._bsontype==="Double")Y=uE(A,H,W,Y);else if(W._bsontype==="Code")Y=fE(A,H,W,Y,B,$,J,X,E);else if(W._bsontype==="Binary")Y=_E(A,H,W,Y);else if(W._bsontype==="BSONSymbol")Y=xE(A,H,W,Y);else if(W._bsontype==="DBRef")Y=gE(A,H,W,Y,$,J,E);else if(W._bsontype==="BSONRegExp")Y=NE(A,H,W,Y);else if(W._bsontype==="Int32")Y=OE(A,H,W,Y);else if(W._bsontype==="MinKey"||W._bsontype==="MaxKey")Y=PE(A,H,W,Y);else if(typeof W._bsontype!=="undefined")throw new _(`Unrecognized or invalid _bsontype: ${String(W._bsontype)}`)}else if(q==="function"&&J)Y=SE(A,H,W,Y)}}E.delete(F),A[Y++]=0;let G=Y-D;return D+=Y1.setInt32LE(A,D,G),Y}function Ln(A){return A!=null&&typeof A==="object"&&"_bsontype"in A&&typeof A._bsontype==="string"}var Rn={$oid:E0,$binary:J1,$uuid:J1,$symbol:c9,$numberInt:G4,$numberDecimal:R2,$numberDouble:m6,$numberLong:P,$minKey:l9,$maxKey:d9,$regex:l6,$regularExpression:l6,$timestamp:d6};function xZ(A,F={}){if(typeof A==="number"){let D=A<=$A&&A>=JA,$=A<=CZ&&A>=QZ;if(F.relaxed||F.legacy)return A;if(Number.isInteger(A)&&!Object.is(A,-0)){if(D)return new G4(A);if($){if(F.useBigInt64)return BigInt(A);return P.fromNumber(A)}}return new m6(A)}if(A==null||typeof A!=="object")return A;if(A.$undefined)return null;let B=Object.keys(A).filter((D)=>D.startsWith("$")&&A[D]!=null);for(let D=0;D<B.length;D++){let $=Rn[B[D]];if($)return $.fromExtendedJSON(A,F)}if(A.$date!=null){let D=A.$date,$=new Date;if(F.legacy)if(typeof D==="number")$.setTime(D);else if(typeof D==="string")$.setTime(Date.parse(D));else if(typeof D==="bigint")$.setTime(Number(D));else throw new BA(`Unrecognized type for EJSON date: ${typeof D}`);else if(typeof D==="string")$.setTime(Date.parse(D));else if(P.isLong(D))$.setTime(D.toNumber());else if(typeof D==="number"&&F.relaxed)$.setTime(D);else if(typeof D==="bigint")$.setTime(Number(D));else throw new BA(`Unrecognized type for EJSON date: ${typeof D}`);return $}if(A.$code!=null){let D=Object.assign({},A);if(A.$scope)D.$scope=xZ(A.$scope);return Y4.fromExtendedJSON(A)}if(uZ(A)||A.$dbPointer){let D=A.$ref?A:A.$dbPointer;if(D instanceof y3)return D;let $=Object.keys(D).filter((X)=>X.startsWith("$")),J=!0;if($.forEach((X)=>{if(["$ref","$id","$db"].indexOf(X)===-1)J=!1}),J)return y3.fromExtendedJSON(D)}return A}function Nn(A,F){return A.map((B,D)=>{F.seenObjects.push({propertyName:`index ${D}`,obj:null});try{return E4(B,F)}finally{F.seenObjects.pop()}})}function qZ(A){let F=A.toISOString();return A.getUTCMilliseconds()!==0?F:F.slice(0,-5)+"Z"}function E4(A,F){if(A instanceof Map||vE(A)){let B=Object.create(null);for(let[D,$]of A){if(typeof D!=="string")throw new _("Can only serialize maps with string keys");B[D]=$}return E4(B,F)}if((typeof A==="object"||typeof A==="function")&&A!==null){let B=F.seenObjects.findIndex((D)=>D.obj===A);if(B!==-1){let D=F.seenObjects.map((H)=>H.propertyName),$=D.slice(0,B).map((H)=>`${H} -> `).join(""),J=D[B],X=" -> "+D.slice(B+1,D.length-1).map((H)=>`${H} -> `).join(""),E=D[D.length-1],Y=" ".repeat($.length+J.length/2),G="-".repeat(X.length+(J.length+E.length)/2-1);throw new _(`Converting circular structure to EJSON:
    ${$}${J}${X}${E}
    ${Y}\\${G}/`)}F.seenObjects[F.seenObjects.length-1].obj=A}if(Array.isArray(A))return Nn(A,F);if(A===void 0)return null;if(A instanceof Date||e7(A)){let B=A.getTime(),D=B>-1&&B<253402318800000;if(F.legacy)return F.relaxed&&D?{$date:A.getTime()}:{$date:qZ(A)};return F.relaxed&&D?{$date:qZ(A)}:{$date:{$numberLong:A.getTime().toString()}}}if(typeof A==="number"&&(!F.relaxed||!isFinite(A))){if(Number.isInteger(A)&&!Object.is(A,-0)){if(A>=JA&&A<=$A)return{$numberInt:A.toString()};if(A>=QZ&&A<=CZ)return{$numberLong:A.toString()}}return{$numberDouble:Object.is(A,-0)?"-0.0":A.toString()}}if(typeof A==="bigint"){if(!F.relaxed)return{$numberLong:BigInt.asIntN(64,A).toString()};return Number(BigInt.asIntN(64,A))}if(A instanceof RegExp||o7(A)){let B=A.flags;if(B===void 0){let $=A.toString().match(/[gimuy]*$/);if($)B=$[0]}return new l6(A.source,B).toExtendedJSON(F)}if(A!=null&&typeof A==="object")return In(A,F);return A}var Pn={Binary:(A)=>new J1(A.value(),A.sub_type),Code:(A)=>new Y4(A.code,A.scope),DBRef:(A)=>new y3(A.collection||A.namespace,A.oid,A.db,A.fields),Decimal128:(A)=>new R2(A.bytes),Double:(A)=>new m6(A.value),Int32:(A)=>new G4(A.value),Long:(A)=>P.fromBits(A.low!=null?A.low:A.low_,A.low!=null?A.high:A.high_,A.low!=null?A.unsigned:A.unsigned_),MaxKey:()=>new d9,MinKey:()=>new l9,ObjectId:(A)=>new E0(A),BSONRegExp:(A)=>new l6(A.pattern,A.options),BSONSymbol:(A)=>new c9(A.value),Timestamp:(A)=>d6.fromBits(A.low,A.high)};function In(A,F){if(A==null||typeof A!=="object")throw new _("not an object instance");let B=A._bsontype;if(typeof B==="undefined"){let D={};for(let $ of Object.keys(A)){F.seenObjects.push({propertyName:$,obj:null});try{let J=E4(A[$],F);if($==="__proto__")Object.defineProperty(D,$,{value:J,writable:!0,enumerable:!0,configurable:!0});else D[$]=J}finally{F.seenObjects.pop()}}return D}else if(A!=null&&typeof A==="object"&&typeof A._bsontype==="string"&&A[B8]!==m9)throw new i4;else if(Ln(A)){let D=A;if(typeof D.toExtendedJSON!=="function"){let $=Pn[A._bsontype];if(!$)throw new _("Unrecognized or invalid _bsontype: "+A._bsontype);D=$(D)}if(B==="Code"&&D.scope)D=new Y4(D.code,E4(D.scope,F));else if(B==="DBRef"&&D.oid)D=new y3(E4(D.collection,F),E4(D.oid,F),E4(D.db,F),E4(D.fields,F));return D.toExtendedJSON(F)}else throw new _("_bsontype must be a string, but was: "+typeof B)}function gZ(A,F){let B={useBigInt64:F?.useBigInt64??!1,relaxed:F?.relaxed??!0,legacy:F?.legacy??!1};return JSON.parse(A,(D,$)=>{if(D.indexOf("\x00")!==-1)throw new _(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify(D)}`);return xZ($,B)})}function bZ(A,F,B,D){if(B!=null&&typeof B==="object")D=B,B=0;if(F!=null&&typeof F==="object"&&!Array.isArray(F))D=F,F=void 0,B=0;let $=Object.assign({relaxed:!0,legacy:!1},D,{seenObjects:[{propertyName:"(root)",obj:null}]}),J=E4(A,$);return JSON.stringify(J,F,B)}function Mn(A,F){return F=F||{},JSON.parse(bZ(A,F))}function jn(A,F){return F=F||{},gZ(JSON.stringify(A),F)}var p9=Object.create(null);p9.parse=gZ;p9.stringify=bZ;p9.serialize=Mn;p9.deserialize=jn;Object.freeze(p9);var R0={double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:255,maxKey:127};function bE(A,F){try{return Y1.getNonnegativeInt32LE(A,F)}catch(B){throw new q3("BSON size cannot be negative",F,{cause:B})}}function yE(A,F){let B=F;for(;A[B]!==0;B++);if(B===A.length-1)throw new q3("Null terminator not found",F);return B}function Tn(A,F=0){if(F??=0,A.length<5)throw new q3(`Input must be at least 5 bytes, got ${A.length} bytes`,F);let B=bE(A,F);if(B>A.length-F)throw new q3(`Parsed documentSize (${B} bytes) does not match input length (${A.length} bytes)`,F);if(A[F+B-1]!==0)throw new q3("BSON documents must end in 0x00",F+B);let D=[],$=F+4;while($<=B+F){let J=A[$];if($+=1,J===0){if($-F!==B)throw new q3("Invalid 0x00 type byte",$);break}let X=$,E=yE(A,$)-X;$+=E+1;let Y;if(J===R0.double||J===R0.long||J===R0.date||J===R0.timestamp)Y=8;else if(J===R0.int)Y=4;else if(J===R0.objectId)Y=12;else if(J===R0.decimal)Y=16;else if(J===R0.bool)Y=1;else if(J===R0.null||J===R0.undefined||J===R0.maxKey||J===R0.minKey)Y=0;else if(J===R0.regex)Y=yE(A,yE(A,$)+1)+1-$;else if(J===R0.object||J===R0.array||J===R0.javascriptWithScope)Y=bE(A,$);else if(J===R0.string||J===R0.binData||J===R0.dbPointer||J===R0.javascript||J===R0.symbol){if(Y=bE(A,$)+4,J===R0.binData)Y+=1;if(J===R0.dbPointer)Y+=12}else throw new q3(`Invalid 0x${J.toString(16).padStart(2,"0")} type byte`,$);if(Y>B)throw new q3("value reports length larger than document",$);D.push([J,X,E,$,Y]),$+=Y}return D}var D8=Object.create(null);D8.parseToElements=Tn;D8.ByteUtils=S;D8.NumberUtils=Y1;Object.freeze(D8);var yZ=17825792,p4=S.allocate(yZ);function hZ(A){if(p4.length<A)p4=S.allocate(A)}function vZ(A,F={}){let B=typeof F.checkKeys==="boolean"?F.checkKeys:!1,D=typeof F.serializeFunctions==="boolean"?F.serializeFunctions:!1,$=typeof F.ignoreUndefined==="boolean"?F.ignoreUndefined:!0,J=typeof F.minInternalBufferSize==="number"?F.minInternalBufferSize:yZ;if(p4.length<J)p4=S.allocate(J);let X=XA(p4,A,B,0,0,D,$,null),E=S.allocateUnsafe(X);return E.set(p4.subarray(0,X),0),E}function mZ(A,F,B={}){let D=typeof B.checkKeys==="boolean"?B.checkKeys:!1,$=typeof B.serializeFunctions==="boolean"?B.serializeFunctions:!1,J=typeof B.ignoreUndefined==="boolean"?B.ignoreUndefined:!0,X=typeof B.index==="number"?B.index:0,E=XA(p4,A,D,0,0,$,J,null);return F.set(p4.subarray(0,E),X),X+E-1}function dZ(A,F={}){return _Z(S.toLocalBufferType(A),F)}function lZ(A,F={}){F=F||{};let B=typeof F.serializeFunctions==="boolean"?F.serializeFunctions:!1,D=typeof F.ignoreUndefined==="boolean"?F.ignoreUndefined:!0;return mB(A,B,D)}function cZ(A,F,B,D,$,J){let X=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},J),E=S.toLocalBufferType(A),Y=F;for(let G=0;G<B;G++){let H=Y1.getInt32LE(E,Y);X.index=Y,D[$+G]=_Z(E,X),Y=Y+H}return Y}var kn=Object.freeze({__proto__:null,BSONError:_,BSONOffsetError:q3,BSONRegExp:l6,BSONRuntimeError:BA,BSONSymbol:c9,BSONType:TZ,BSONValue:c2,BSONVersionError:i4,Binary:J1,Code:Y4,DBRef:y3,Decimal128:R2,Double:m6,EJSON:p9,Int32:G4,Long:P,MaxKey:d9,MinKey:l9,ObjectId:E0,Timestamp:d6,UUID:D2,calculateObjectSize:lZ,deserialize:dZ,deserializeStream:cZ,onDemand:D8,serialize:vZ,serializeWithBufferAndIndex:mZ,setInternalBufferSize:hZ});On.BSON=kn;On.BSONError=_;On.BSONOffsetError=q3;On.BSONRegExp=l6;On.BSONRuntimeError=BA;On.BSONSymbol=c9;On.BSONType=TZ;On.BSONValue=c2;On.BSONVersionError=i4;On.Binary=J1;On.Code=Y4;On.DBRef=y3;On.Decimal128=R2;On.Double=m6;On.EJSON=p9;On.Int32=G4;On.Long=P;On.MaxKey=d9;On.MinKey=l9;On.ObjectId=E0;On.Timestamp=d6;On.UUID=D2;On.calculateObjectSize=lZ;On.deserialize=dZ;On.deserializeStream=cZ;On.onDemand=D8;On.serialize=vZ;On.serializeWithBufferAndIndex=mZ;On.setInternalBufferSize=hZ});var y1=z((N0)=>{Object.defineProperty(N0,"__esModule",{value:!0});N0.toUTF8=N0.getBigInt64LE=N0.getFloat64LE=N0.getInt32LE=N0.UUID=N0.Timestamp=N0.serialize=N0.ObjectId=N0.MinKey=N0.MaxKey=N0.Long=N0.Int32=N0.EJSON=N0.Double=N0.deserialize=N0.Decimal128=N0.DBRef=N0.Code=N0.calculateObjectSize=N0.BSONType=N0.BSONSymbol=N0.BSONRegExp=N0.BSONError=N0.BSON=N0.Binary=void 0;N0.parseToElementsToArray=Es;N0.pluckBSONSerializeOptions=Ys;N0.resolveBSONOptions=Gs;N0.parseUtf8ValidationOption=Hs;var EA=B6(),h0=B6();Object.defineProperty(N0,"Binary",{enumerable:!0,get:function(){return h0.Binary}});Object.defineProperty(N0,"BSON",{enumerable:!0,get:function(){return h0.BSON}});Object.defineProperty(N0,"BSONError",{enumerable:!0,get:function(){return h0.BSONError}});Object.defineProperty(N0,"BSONRegExp",{enumerable:!0,get:function(){return h0.BSONRegExp}});Object.defineProperty(N0,"BSONSymbol",{enumerable:!0,get:function(){return h0.BSONSymbol}});Object.defineProperty(N0,"BSONType",{enumerable:!0,get:function(){return h0.BSONType}});Object.defineProperty(N0,"calculateObjectSize",{enumerable:!0,get:function(){return h0.calculateObjectSize}});Object.defineProperty(N0,"Code",{enumerable:!0,get:function(){return h0.Code}});Object.defineProperty(N0,"DBRef",{enumerable:!0,get:function(){return h0.DBRef}});Object.defineProperty(N0,"Decimal128",{enumerable:!0,get:function(){return h0.Decimal128}});Object.defineProperty(N0,"deserialize",{enumerable:!0,get:function(){return h0.deserialize}});Object.defineProperty(N0,"Double",{enumerable:!0,get:function(){return h0.Double}});Object.defineProperty(N0,"EJSON",{enumerable:!0,get:function(){return h0.EJSON}});Object.defineProperty(N0,"Int32",{enumerable:!0,get:function(){return h0.Int32}});Object.defineProperty(N0,"Long",{enumerable:!0,get:function(){return h0.Long}});Object.defineProperty(N0,"MaxKey",{enumerable:!0,get:function(){return h0.MaxKey}});Object.defineProperty(N0,"MinKey",{enumerable:!0,get:function(){return h0.MinKey}});Object.defineProperty(N0,"ObjectId",{enumerable:!0,get:function(){return h0.ObjectId}});Object.defineProperty(N0,"serialize",{enumerable:!0,get:function(){return h0.serialize}});Object.defineProperty(N0,"Timestamp",{enumerable:!0,get:function(){return h0.Timestamp}});Object.defineProperty(N0,"UUID",{enumerable:!0,get:function(){return h0.UUID}});function Es(A,F){let B=EA.BSON.onDemand.parseToElements(A,F);return Array.isArray(B)?B:[...B]}N0.getInt32LE=EA.BSON.onDemand.NumberUtils.getInt32LE;N0.getFloat64LE=EA.BSON.onDemand.NumberUtils.getFloat64LE;N0.getBigInt64LE=EA.BSON.onDemand.NumberUtils.getBigInt64LE;N0.toUTF8=EA.BSON.onDemand.ByteUtils.toUTF8;function Ys(A){let{fieldsAsRaw:F,useBigInt64:B,promoteValues:D,promoteBuffers:$,promoteLongs:J,serializeFunctions:X,ignoreUndefined:E,bsonRegExp:Y,raw:G,enableUtf8Validation:H}=A;return{fieldsAsRaw:F,useBigInt64:B,promoteValues:D,promoteBuffers:$,promoteLongs:J,serializeFunctions:X,ignoreUndefined:E,bsonRegExp:Y,raw:G,enableUtf8Validation:H}}function Gs(A,F){let B=F?.bsonOptions;return{raw:A?.raw??B?.raw??!1,useBigInt64:A?.useBigInt64??B?.useBigInt64??!1,promoteLongs:A?.promoteLongs??B?.promoteLongs??!0,promoteValues:A?.promoteValues??B?.promoteValues??!0,promoteBuffers:A?.promoteBuffers??B?.promoteBuffers??!1,ignoreUndefined:A?.ignoreUndefined??B?.ignoreUndefined??!1,bsonRegExp:A?.bsonRegExp??B?.bsonRegExp??!1,serializeFunctions:A?.serializeFunctions??B?.serializeFunctions??!1,fieldsAsRaw:A?.fieldsAsRaw??B?.fieldsAsRaw??{},enableUtf8Validation:A?.enableUtf8Validation??B?.enableUtf8Validation??!0}}function Hs(A){if(A?.enableUtf8Validation===!1)return{utf8:!1};return{utf8:{writeErrors:!1}}}});var s=z((IV)=>{Object.defineProperty(IV,"__esModule",{value:!0});IV.MongoWriteConcernError=IV.MongoServerSelectionError=IV.MongoSystemError=IV.MongoMissingDependencyError=IV.MongoMissingCredentialsError=IV.MongoCompatibilityError=IV.MongoInvalidArgumentError=IV.MongoParseError=IV.MongoNetworkTimeoutError=IV.MongoNetworkError=IV.MongoClientClosedError=IV.MongoTopologyClosedError=IV.MongoCursorExhaustedError=IV.MongoServerClosedError=IV.MongoCursorInUseError=IV.MongoOperationTimeoutError=IV.MongoUnexpectedServerResponseError=IV.MongoGridFSChunkError=IV.MongoGridFSStreamError=IV.MongoTailableCursorError=IV.MongoChangeStreamError=IV.MongoClientBulkWriteExecutionError=IV.MongoClientBulkWriteCursorError=IV.MongoClientBulkWriteError=IV.MongoGCPError=IV.MongoAzureError=IV.MongoOIDCError=IV.MongoAWSError=IV.MongoKerberosError=IV.MongoExpiredSessionError=IV.MongoTransactionError=IV.MongoNotConnectedError=IV.MongoDecompressionError=IV.MongoBatchReExecutionError=IV.MongoStalePrimaryError=IV.MongoRuntimeError=IV.MongoAPIError=IV.MongoDriverError=IV.MongoServerError=IV.MongoError=IV.MongoErrorLabel=IV.GET_MORE_RESUMABLE_CODES=IV.MONGODB_ERROR_CODES=IV.NODE_IS_RECOVERING_ERROR_MESSAGE=IV.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=IV.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=void 0;IV.needsRetryableWriteLabel=Vs;IV.isRetryableWriteError=NV;IV.isRetryableReadError=ws;IV.isNodeShuttingDownError=Is;IV.isSDAMUnrecoverableError=Ms;IV.isNetworkTimeoutError=js;IV.isResumableError=Ts;IV.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=new RegExp("not master","i");IV.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=new RegExp("not master or secondary","i");IV.NODE_IS_RECOVERING_ERROR_MESSAGE=new RegExp("node is recovering","i");IV.MONGODB_ERROR_CODES=Object.freeze({HostUnreachable:6,HostNotFound:7,AuthenticationFailed:18,NetworkTimeout:89,ShutdownInProgress:91,PrimarySteppedDown:189,ExceededTimeLimit:262,SocketException:9001,NotWritablePrimary:10107,InterruptedAtShutdown:11600,InterruptedDueToReplStateChange:11602,NotPrimaryNoSecondaryOk:13435,NotPrimaryOrSecondary:13436,StaleShardVersion:63,StaleEpoch:150,StaleConfig:13388,RetryChangeStream:234,FailedToSatisfyReadPreference:133,CursorNotFound:43,LegacyNotPrimary:10058,WriteConcernTimeout:64,NamespaceNotFound:26,IllegalOperation:20,MaxTimeMSExpired:50,UnknownReplWriteConcern:79,UnsatisfiableWriteConcern:100,Reauthenticate:391,ReadConcernMajorityNotAvailableYet:134});IV.GET_MORE_RESUMABLE_CODES=new Set([IV.MONGODB_ERROR_CODES.HostUnreachable,IV.MONGODB_ERROR_CODES.HostNotFound,IV.MONGODB_ERROR_CODES.NetworkTimeout,IV.MONGODB_ERROR_CODES.ShutdownInProgress,IV.MONGODB_ERROR_CODES.PrimarySteppedDown,IV.MONGODB_ERROR_CODES.ExceededTimeLimit,IV.MONGODB_ERROR_CODES.SocketException,IV.MONGODB_ERROR_CODES.NotWritablePrimary,IV.MONGODB_ERROR_CODES.InterruptedAtShutdown,IV.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,IV.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,IV.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,IV.MONGODB_ERROR_CODES.StaleShardVersion,IV.MONGODB_ERROR_CODES.StaleEpoch,IV.MONGODB_ERROR_CODES.StaleConfig,IV.MONGODB_ERROR_CODES.RetryChangeStream,IV.MONGODB_ERROR_CODES.FailedToSatisfyReadPreference,IV.MONGODB_ERROR_CODES.CursorNotFound]);IV.MongoErrorLabel=Object.freeze({RetryableWriteError:"RetryableWriteError",TransientTransactionError:"TransientTransactionError",UnknownTransactionCommitResult:"UnknownTransactionCommitResult",ResumableChangeStreamError:"ResumableChangeStreamError",HandshakeError:"HandshakeError",ResetPool:"ResetPool",PoolRequstedRetry:"PoolRequstedRetry",InterruptInUseConnections:"InterruptInUseConnections",NoWritesPerformed:"NoWritesPerformed"});function Zs(A){return A!=null&&typeof A==="object"&&"errors"in A&&Array.isArray(A.errors)}class h3 extends Error{get errorLabels(){return Array.from(this.errorLabelSet)}constructor(A,F){super(A,F);this.errorLabelSet=new Set}static buildErrorMessage(A){if(typeof A==="string")return A;if(Zs(A)&&A.message.length===0)return A.errors.length===0?"AggregateError has an empty errors array. Please check the `cause` property for more information.":A.errors.map(({message:F})=>F).join(", ");return A!=null&&typeof A==="object"&&"message"in A&&typeof A.message==="string"?A.message:"empty error message"}get name(){return"MongoError"}get errmsg(){return this.message}hasErrorLabel(A){return this.errorLabelSet.has(A)}addErrorLabel(A){this.errorLabelSet.add(A)}}IV.MongoError=h3;class pB extends h3{constructor(A){super(A.message||A.errmsg||A.$err||"n/a");if(A.errorLabels)for(let F of A.errorLabels)this.addErrorLabel(F);this.errorResponse=A;for(let F in A)if(F!=="errorLabels"&&F!=="errmsg"&&F!=="message"&&F!=="errorResponse")this[F]=A[F]}get name(){return"MongoServerError"}}IV.MongoServerError=pB;class $8 extends h3{constructor(A,F){super(A,F)}get name(){return"MongoDriverError"}}IV.MongoDriverError=$8;class N2 extends $8{constructor(A,F){super(A,F)}get name(){return"MongoAPIError"}}IV.MongoAPIError=N2;class N6 extends $8{constructor(A,F){super(A,F)}get name(){return"MongoRuntimeError"}}IV.MongoRuntimeError=N6;class iZ extends N6{constructor(A,F){super(A,F)}get name(){return"MongoStalePrimaryError"}}IV.MongoStalePrimaryError=iZ;class nZ extends N2{constructor(A="This batch has already been executed, create new batch to execute"){super(A)}get name(){return"MongoBatchReExecutionError"}}IV.MongoBatchReExecutionError=nZ;class sZ extends N6{constructor(A){super(A)}get name(){return"MongoDecompressionError"}}IV.MongoDecompressionError=sZ;class aZ extends N2{constructor(A){super(A)}get name(){return"MongoNotConnectedError"}}IV.MongoNotConnectedError=aZ;class rZ extends N2{constructor(A){super(A)}get name(){return"MongoTransactionError"}}IV.MongoTransactionError=rZ;class tZ extends N2{constructor(A="Cannot use a session that has ended"){super(A)}get name(){return"MongoExpiredSessionError"}}IV.MongoExpiredSessionError=tZ;class oZ extends N6{constructor(A){super(A)}get name(){return"MongoKerberosError"}}IV.MongoKerberosError=oZ;class eZ extends N6{constructor(A,F){super(A,F)}get name(){return"MongoAWSError"}}IV.MongoAWSError=eZ;class iB extends N6{constructor(A){super(A)}get name(){return"MongoOIDCError"}}IV.MongoOIDCError=iB;class AV extends iB{constructor(A){super(A)}get name(){return"MongoAzureError"}}IV.MongoAzureError=AV;class FV extends iB{constructor(A){super(A)}get name(){return"MongoGCPError"}}IV.MongoGCPError=FV;class BV extends pB{constructor(A){super(A);this.writeConcernErrors=[],this.writeErrors=new Map}get name(){return"MongoClientBulkWriteError"}}IV.MongoClientBulkWriteError=BV;class DV extends N6{constructor(A){super(A)}get name(){return"MongoClientBulkWriteCursorError"}}IV.MongoClientBulkWriteCursorError=DV;class $V extends N6{constructor(A){super(A)}get name(){return"MongoClientBulkWriteExecutionError"}}IV.MongoClientBulkWriteExecutionError=$V;class JV extends N6{constructor(A){super(A)}get name(){return"MongoChangeStreamError"}}IV.MongoChangeStreamError=JV;class XV extends N2{constructor(A="Tailable cursor does not support this operation"){super(A)}get name(){return"MongoTailableCursorError"}}IV.MongoTailableCursorError=XV;class EV extends N6{constructor(A){super(A)}get name(){return"MongoGridFSStreamError"}}IV.MongoGridFSStreamError=EV;class YV extends N6{constructor(A){super(A)}get name(){return"MongoGridFSChunkError"}}IV.MongoGridFSChunkError=YV;class GV extends N6{constructor(A,F){super(A,F)}get name(){return"MongoUnexpectedServerResponseError"}}IV.MongoUnexpectedServerResponseError=GV;class HV extends $8{get name(){return"MongoOperationTimeoutError"}}IV.MongoOperationTimeoutError=HV;class WV extends N2{constructor(A="Cursor is already initialized"){super(A)}get name(){return"MongoCursorInUseError"}}IV.MongoCursorInUseError=WV;class qV extends N2{constructor(A="Server is closed"){super(A)}get name(){return"MongoServerClosedError"}}IV.MongoServerClosedError=qV;class CV extends N2{constructor(A){super(A||"Cursor is exhausted")}get name(){return"MongoCursorExhaustedError"}}IV.MongoCursorExhaustedError=CV;class QV extends N2{constructor(A="Topology is closed"){super(A)}get name(){return"MongoTopologyClosedError"}}IV.MongoTopologyClosedError=QV;class KV extends N2{constructor(){super("Operation interrupted because client was closed")}get name(){return"MongoClientClosedError"}}IV.MongoClientClosedError=KV;class i9 extends h3{constructor(A,F){super(A,{cause:F?.cause});this.beforeHandshake=!!F?.beforeHandshake}get name(){return"MongoNetworkError"}}IV.MongoNetworkError=i9;class zV extends i9{constructor(A,F){super(A,F)}get name(){return"MongoNetworkTimeoutError"}}IV.MongoNetworkTimeoutError=zV;class aE extends $8{constructor(A){super(A)}get name(){return"MongoParseError"}}IV.MongoParseError=aE;class UV extends N2{constructor(A,F){super(A,F)}get name(){return"MongoInvalidArgumentError"}}IV.MongoInvalidArgumentError=UV;class ZV extends N2{constructor(A){super(A)}get name(){return"MongoCompatibilityError"}}IV.MongoCompatibilityError=ZV;class VV extends N2{constructor(A){super(A)}get name(){return"MongoMissingCredentialsError"}}IV.MongoMissingCredentialsError=VV;class wV extends N2{constructor(A,F){super(A,F);this.dependencyName=F.dependencyName}get name(){return"MongoMissingDependencyError"}}IV.MongoMissingDependencyError=wV;class rE extends h3{constructor(A,F){if(F&&F.error)super(h3.buildErrorMessage(F.error.message||F.error),{cause:F.error});else super(A);if(F)this.reason=F;this.code=F.error?.code}get name(){return"MongoSystemError"}}IV.MongoSystemError=rE;class LV extends rE{constructor(A,F){super(A,F)}get name(){return"MongoServerSelectionError"}}IV.MongoServerSelectionError=LV;class tE extends pB{constructor(A){super({...A.writeConcernError,...A});this.errInfo=A.writeConcernError.errInfo,this.result=A}get name(){return"MongoWriteConcernError"}}IV.MongoWriteConcernError=tE;var RV=new Set([IV.MONGODB_ERROR_CODES.HostUnreachable,IV.MONGODB_ERROR_CODES.HostNotFound,IV.MONGODB_ERROR_CODES.NetworkTimeout,IV.MONGODB_ERROR_CODES.ShutdownInProgress,IV.MONGODB_ERROR_CODES.PrimarySteppedDown,IV.MONGODB_ERROR_CODES.SocketException,IV.MONGODB_ERROR_CODES.NotWritablePrimary,IV.MONGODB_ERROR_CODES.InterruptedAtShutdown,IV.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,IV.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,IV.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,IV.MONGODB_ERROR_CODES.ExceededTimeLimit,IV.MONGODB_ERROR_CODES.ReadConcernMajorityNotAvailableYet]),sE=RV;function Vs(A,F,B){if(A instanceof i9)return!0;if(A instanceof h3){if((F>=9||NV(A))&&!A.hasErrorLabel(IV.MongoErrorLabel.HandshakeError))return!1}if(A instanceof tE){if(B==="Mongos"&&F<9)return sE.has(A.result.code??0);let J=A.result.writeConcernError.code??Number(A.code);return sE.has(Number.isNaN(J)?0:J)}if(A instanceof h3)return sE.has(Number(A.code));if(IV.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(A.message))return!0;if(IV.NODE_IS_RECOVERING_ERROR_MESSAGE.test(A.message))return!0;return!1}function NV(A){return A.hasErrorLabel(IV.MongoErrorLabel.RetryableWriteError)||A.hasErrorLabel(IV.MongoErrorLabel.PoolRequstedRetry)}function ws(A){if(typeof A.code==="number"?RV.has(A.code):!1)return!0;if(A instanceof i9)return!0;if(IV.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(A.message))return!0;if(IV.NODE_IS_RECOVERING_ERROR_MESSAGE.test(A.message))return!0;return!1}var Ls=new Set([IV.MONGODB_ERROR_CODES.ShutdownInProgress,IV.MONGODB_ERROR_CODES.PrimarySteppedDown,IV.MONGODB_ERROR_CODES.InterruptedAtShutdown,IV.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,IV.MONGODB_ERROR_CODES.NotPrimaryOrSecondary]),Rs=new Set([IV.MONGODB_ERROR_CODES.NotWritablePrimary,IV.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,IV.MONGODB_ERROR_CODES.LegacyNotPrimary]),Ns=new Set([IV.MONGODB_ERROR_CODES.InterruptedAtShutdown,IV.MONGODB_ERROR_CODES.ShutdownInProgress]);function PV(A){if(typeof A.code==="number")return Ls.has(A.code);return IV.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE.test(A.message)||IV.NODE_IS_RECOVERING_ERROR_MESSAGE.test(A.message)}function Ps(A){if(typeof A.code==="number")return Rs.has(A.code);if(PV(A))return!1;return IV.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(A.message)}function Is(A){return!!(typeof A.code==="number"&&Ns.has(A.code))}function Ms(A){if(A instanceof aE||A==null)return!0;return PV(A)||Ps(A)}function js(A){return!!(A instanceof i9&&A.message.match(/timed out/))}function Ts(A,F){if(A==null||!(A instanceof h3))return!1;if(A instanceof i9)return!0;if(F!=null&&F>=9){if(A.code===IV.MONGODB_ERROR_CODES.CursorNotFound)return!0;return A.hasErrorLabel(IV.MongoErrorLabel.ResumableChangeStreamError)}if(typeof A.code==="number")return IV.GET_MORE_RESUMABLE_CODES.has(A.code);return!1}});var v0=z((kV)=>{Object.defineProperty(kV,"__esModule",{value:!0});kV.END=kV.CHANGE=kV.INIT=kV.MORE=kV.RESPONSE=kV.SERVER_HEARTBEAT_FAILED=kV.SERVER_HEARTBEAT_SUCCEEDED=kV.SERVER_HEARTBEAT_STARTED=kV.COMMAND_FAILED=kV.COMMAND_SUCCEEDED=kV.COMMAND_STARTED=kV.CLUSTER_TIME_RECEIVED=kV.CONNECTION_CHECKED_IN=kV.CONNECTION_CHECKED_OUT=kV.CONNECTION_CHECK_OUT_FAILED=kV.CONNECTION_CHECK_OUT_STARTED=kV.CONNECTION_CLOSED=kV.CONNECTION_READY=kV.CONNECTION_CREATED=kV.CONNECTION_POOL_READY=kV.CONNECTION_POOL_CLEARED=kV.CONNECTION_POOL_CLOSED=kV.CONNECTION_POOL_CREATED=kV.WAITING_FOR_SUITABLE_SERVER=kV.SERVER_SELECTION_SUCCEEDED=kV.SERVER_SELECTION_FAILED=kV.SERVER_SELECTION_STARTED=kV.TOPOLOGY_DESCRIPTION_CHANGED=kV.TOPOLOGY_CLOSED=kV.TOPOLOGY_OPENING=kV.SERVER_DESCRIPTION_CHANGED=kV.SERVER_CLOSED=kV.SERVER_OPENING=kV.DESCRIPTION_RECEIVED=kV.UNPINNED=kV.PINNED=kV.MESSAGE=kV.ENDED=kV.CLOSED=kV.CONNECT=kV.OPEN=kV.CLOSE=kV.TIMEOUT=kV.ERROR=kV.SYSTEM_JS_COLLECTION=kV.SYSTEM_COMMAND_COLLECTION=kV.SYSTEM_USER_COLLECTION=kV.SYSTEM_PROFILE_COLLECTION=kV.SYSTEM_INDEX_COLLECTION=kV.SYSTEM_NAMESPACE_COLLECTION=void 0;kV.kDecoratedKeys=kV.kDecorateResult=kV.LEGACY_HELLO_COMMAND_CAMEL_CASE=kV.LEGACY_HELLO_COMMAND=kV.MONGO_CLIENT_EVENTS=kV.LOCAL_SERVER_EVENTS=kV.SERVER_RELAY_EVENTS=kV.APM_EVENTS=kV.TOPOLOGY_EVENTS=kV.CMAP_EVENTS=kV.HEARTBEAT_EVENTS=kV.RESUME_TOKEN_CHANGED=void 0;kV.SYSTEM_NAMESPACE_COLLECTION="system.namespaces";kV.SYSTEM_INDEX_COLLECTION="system.indexes";kV.SYSTEM_PROFILE_COLLECTION="system.profile";kV.SYSTEM_USER_COLLECTION="system.users";kV.SYSTEM_COMMAND_COLLECTION="$cmd";kV.SYSTEM_JS_COLLECTION="system.js";kV.ERROR="error";kV.TIMEOUT="timeout";kV.CLOSE="close";kV.OPEN="open";kV.CONNECT="connect";kV.CLOSED="closed";kV.ENDED="ended";kV.MESSAGE="message";kV.PINNED="pinned";kV.UNPINNED="unpinned";kV.DESCRIPTION_RECEIVED="descriptionReceived";kV.SERVER_OPENING="serverOpening";kV.SERVER_CLOSED="serverClosed";kV.SERVER_DESCRIPTION_CHANGED="serverDescriptionChanged";kV.TOPOLOGY_OPENING="topologyOpening";kV.TOPOLOGY_CLOSED="topologyClosed";kV.TOPOLOGY_DESCRIPTION_CHANGED="topologyDescriptionChanged";kV.SERVER_SELECTION_STARTED="serverSelectionStarted";kV.SERVER_SELECTION_FAILED="serverSelectionFailed";kV.SERVER_SELECTION_SUCCEEDED="serverSelectionSucceeded";kV.WAITING_FOR_SUITABLE_SERVER="waitingForSuitableServer";kV.CONNECTION_POOL_CREATED="connectionPoolCreated";kV.CONNECTION_POOL_CLOSED="connectionPoolClosed";kV.CONNECTION_POOL_CLEARED="connectionPoolCleared";kV.CONNECTION_POOL_READY="connectionPoolReady";kV.CONNECTION_CREATED="connectionCreated";kV.CONNECTION_READY="connectionReady";kV.CONNECTION_CLOSED="connectionClosed";kV.CONNECTION_CHECK_OUT_STARTED="connectionCheckOutStarted";kV.CONNECTION_CHECK_OUT_FAILED="connectionCheckOutFailed";kV.CONNECTION_CHECKED_OUT="connectionCheckedOut";kV.CONNECTION_CHECKED_IN="connectionCheckedIn";kV.CLUSTER_TIME_RECEIVED="clusterTimeReceived";kV.COMMAND_STARTED="commandStarted";kV.COMMAND_SUCCEEDED="commandSucceeded";kV.COMMAND_FAILED="commandFailed";kV.SERVER_HEARTBEAT_STARTED="serverHeartbeatStarted";kV.SERVER_HEARTBEAT_SUCCEEDED="serverHeartbeatSucceeded";kV.SERVER_HEARTBEAT_FAILED="serverHeartbeatFailed";kV.RESPONSE="response";kV.MORE="more";kV.INIT="init";kV.CHANGE="change";kV.END="end";kV.RESUME_TOKEN_CHANGED="resumeTokenChanged";kV.HEARTBEAT_EVENTS=Object.freeze([kV.SERVER_HEARTBEAT_STARTED,kV.SERVER_HEARTBEAT_SUCCEEDED,kV.SERVER_HEARTBEAT_FAILED]);kV.CMAP_EVENTS=Object.freeze([kV.CONNECTION_POOL_CREATED,kV.CONNECTION_POOL_READY,kV.CONNECTION_POOL_CLEARED,kV.CONNECTION_POOL_CLOSED,kV.CONNECTION_CREATED,kV.CONNECTION_READY,kV.CONNECTION_CLOSED,kV.CONNECTION_CHECK_OUT_STARTED,kV.CONNECTION_CHECK_OUT_FAILED,kV.CONNECTION_CHECKED_OUT,kV.CONNECTION_CHECKED_IN]);kV.TOPOLOGY_EVENTS=Object.freeze([kV.SERVER_OPENING,kV.SERVER_CLOSED,kV.SERVER_DESCRIPTION_CHANGED,kV.TOPOLOGY_OPENING,kV.TOPOLOGY_CLOSED,kV.TOPOLOGY_DESCRIPTION_CHANGED,kV.ERROR,kV.TIMEOUT,kV.CLOSE]);kV.APM_EVENTS=Object.freeze([kV.COMMAND_STARTED,kV.COMMAND_SUCCEEDED,kV.COMMAND_FAILED]);kV.SERVER_RELAY_EVENTS=Object.freeze([kV.SERVER_HEARTBEAT_STARTED,kV.SERVER_HEARTBEAT_SUCCEEDED,kV.SERVER_HEARTBEAT_FAILED,kV.COMMAND_STARTED,kV.COMMAND_SUCCEEDED,kV.COMMAND_FAILED,...kV.CMAP_EVENTS]);kV.LOCAL_SERVER_EVENTS=Object.freeze([kV.CONNECT,kV.DESCRIPTION_RECEIVED,kV.CLOSED,kV.ENDED]);kV.MONGO_CLIENT_EVENTS=Object.freeze([...kV.CMAP_EVENTS,...kV.APM_EVENTS,...kV.TOPOLOGY_EVENTS,...kV.HEARTBEAT_EVENTS]);kV.LEGACY_HELLO_COMMAND="ismaster";kV.LEGACY_HELLO_COMMAND_CAMEL_CASE="isMaster";kV.kDecorateResult=Symbol.for("@@mdb.decorateDecryptionResult");kV.kDecoratedKeys=Symbol.for("@@mdb.decryptedKeys")});var n9=z((Jw)=>{Object.defineProperty(Jw,"__esModule",{value:!0});Jw.OP_MSG=Jw.OP_COMPRESSED=Jw.OP_DELETE=Jw.OP_QUERY=Jw.OP_INSERT=Jw.OP_UPDATE=Jw.OP_REPLY=Jw.MIN_SUPPORTED_QE_SERVER_VERSION=Jw.MIN_SUPPORTED_QE_WIRE_VERSION=Jw.MAX_SUPPORTED_WIRE_VERSION=Jw.MIN_SUPPORTED_WIRE_VERSION=Jw.MAX_SUPPORTED_SERVER_VERSION=Jw.MIN_SUPPORTED_SERVER_VERSION=void 0;Jw.MIN_SUPPORTED_SERVER_VERSION="4.2";Jw.MAX_SUPPORTED_SERVER_VERSION="8.0";Jw.MIN_SUPPORTED_WIRE_VERSION=8;Jw.MAX_SUPPORTED_WIRE_VERSION=25;Jw.MIN_SUPPORTED_QE_WIRE_VERSION=21;Jw.MIN_SUPPORTED_QE_SERVER_VERSION="7.0";Jw.OP_REPLY=1;Jw.OP_UPDATE=2001;Jw.OP_INSERT=2002;Jw.OP_QUERY=2004;Jw.OP_DELETE=2006;Jw.OP_COMPRESSED=2012;Jw.OP_MSG=2013});var c6=z((Ew)=>{Object.defineProperty(Ew,"__esModule",{value:!0});Ew.ReadConcern=Ew.ReadConcernLevel=void 0;Ew.ReadConcernLevel=Object.freeze({local:"local",majority:"majority",linearizable:"linearizable",available:"available",snapshot:"snapshot"});class X8{constructor(A){this.level=Ew.ReadConcernLevel[A]??A}static fromOptions(A){if(A==null)return;if(A.readConcern){let{readConcern:F}=A;if(F instanceof X8)return F;else if(typeof F==="string")return new X8(F);else if("level"in F&&F.level)return new X8(F.level)}if(A.level)return new X8(A.level);return}static get MAJORITY(){return Ew.ReadConcernLevel.majority}static get AVAILABLE(){return Ew.ReadConcernLevel.available}static get LINEARIZABLE(){return Ew.ReadConcernLevel.linearizable}static get SNAPSHOT(){return Ew.ReadConcernLevel.snapshot}toJSON(){return{level:this.level}}}Ew.ReadConcern=X8});var t0=z((Gw)=>{Object.defineProperty(Gw,"__esModule",{value:!0});Gw.ReadPreference=Gw.ReadPreferenceMode=void 0;var s9=s();Gw.ReadPreferenceMode=Object.freeze({primary:"primary",primaryPreferred:"primaryPreferred",secondary:"secondary",secondaryPreferred:"secondaryPreferred",nearest:"nearest"});class O1{constructor(A,F,B){if(!O1.isValid(A))throw new s9.MongoInvalidArgumentError(`Invalid read preference mode ${JSON.stringify(A)}`);if(B==null&&typeof F==="object"&&!Array.isArray(F))B=F,F=void 0;else if(F&&!Array.isArray(F))throw new s9.MongoInvalidArgumentError("ReadPreference tags must be an array");if(this.mode=A,this.tags=F,this.hedge=B?.hedge,this.maxStalenessSeconds=void 0,this.minWireVersion=void 0,B=B??{},B.maxStalenessSeconds!=null){if(B.maxStalenessSeconds<=0)throw new s9.MongoInvalidArgumentError("maxStalenessSeconds must be a positive integer");this.maxStalenessSeconds=B.maxStalenessSeconds,this.minWireVersion=5}if(this.mode===O1.PRIMARY){if(this.tags&&Array.isArray(this.tags)&&this.tags.length>0)throw new s9.MongoInvalidArgumentError("Primary read preference cannot be combined with tags");if(this.maxStalenessSeconds)throw new s9.MongoInvalidArgumentError("Primary read preference cannot be combined with maxStalenessSeconds");if(this.hedge)throw new s9.MongoInvalidArgumentError("Primary read preference cannot be combined with hedge")}}get preference(){return this.mode}static fromString(A){return new O1(A)}static fromOptions(A){if(!A)return;let F=A.readPreference??A.session?.transaction.options.readPreference,B=A.readPreferenceTags;if(F==null)return;if(typeof F==="string")return new O1(F,B,{maxStalenessSeconds:A.maxStalenessSeconds,hedge:A.hedge});else if(!(F instanceof O1)&&typeof F==="object"){let D=F.mode||F.preference;if(D&&typeof D==="string")return new O1(D,F.tags??B,{maxStalenessSeconds:F.maxStalenessSeconds,hedge:A.hedge})}if(B)F.tags=B;return F}static translate(A){if(A.readPreference==null)return A;let F=A.readPreference;if(typeof F==="string")A.readPreference=new O1(F);else if(F&&!(F instanceof O1)&&typeof F==="object"){let B=F.mode||F.preference;if(B&&typeof B==="string")A.readPreference=new O1(B,F.tags,{maxStalenessSeconds:F.maxStalenessSeconds})}else if(!(F instanceof O1))throw new s9.MongoInvalidArgumentError(`Invalid read preference: ${F}`);return A}static isValid(A){return new Set([O1.PRIMARY,O1.PRIMARY_PREFERRED,O1.SECONDARY,O1.SECONDARY_PREFERRED,O1.NEAREST,null]).has(A)}isValid(A){return O1.isValid(typeof A==="string"?A:this.mode)}secondaryOk(){return new Set([O1.PRIMARY_PREFERRED,O1.SECONDARY,O1.SECONDARY_PREFERRED,O1.NEAREST]).has(this.mode)}equals(A){return A.mode===this.mode}toJSON(){let A={mode:this.mode};if(Array.isArray(this.tags))A.tags=this.tags;if(this.maxStalenessSeconds)A.maxStalenessSeconds=this.maxStalenessSeconds;if(this.hedge)A.hedge=this.hedge;return A}}Gw.ReadPreference=O1;O1.PRIMARY=Gw.ReadPreferenceMode.primary;O1.PRIMARY_PREFERRED=Gw.ReadPreferenceMode.primaryPreferred;O1.SECONDARY=Gw.ReadPreferenceMode.secondary;O1.SECONDARY_PREFERRED=Gw.ReadPreferenceMode.secondaryPreferred;O1.NEAREST=Gw.ReadPreferenceMode.nearest;O1.primary=new O1(Gw.ReadPreferenceMode.primary);O1.primaryPreferred=new O1(Gw.ReadPreferenceMode.primaryPreferred);O1.secondary=new O1(Gw.ReadPreferenceMode.secondary);O1.secondaryPreferred=new O1(Gw.ReadPreferenceMode.secondaryPreferred);O1.nearest=new O1(Gw.ReadPreferenceMode.nearest)});var P6=z((Ww)=>{Object.defineProperty(Ww,"__esModule",{value:!0});Ww.ServerType=Ww.TopologyType=Ww.STATE_CONNECTED=Ww.STATE_CONNECTING=Ww.STATE_CLOSED=Ww.STATE_CLOSING=void 0;Ww._advanceClusterTime=Xr;Ww.STATE_CLOSING="closing";Ww.STATE_CLOSED="closed";Ww.STATE_CONNECTING="connecting";Ww.STATE_CONNECTED="connected";Ww.TopologyType=Object.freeze({Single:"Single",ReplicaSetNoPrimary:"ReplicaSetNoPrimary",ReplicaSetWithPrimary:"ReplicaSetWithPrimary",Sharded:"Sharded",Unknown:"Unknown",LoadBalanced:"LoadBalanced"});Ww.ServerType=Object.freeze({Standalone:"Standalone",Mongos:"Mongos",PossiblePrimary:"PossiblePrimary",RSPrimary:"RSPrimary",RSSecondary:"RSSecondary",RSArbiter:"RSArbiter",RSOther:"RSOther",RSGhost:"RSGhost",Unknown:"Unknown",LoadBalancer:"LoadBalancer"});function Xr(A,F){if(A.clusterTime==null)A.clusterTime=F;else if(F.clusterTime.greaterThan(A.clusterTime.clusterTime))A.clusterTime=F}});var Kw=z((Cw)=>{Object.defineProperty(Cw,"__esModule",{value:!0});Cw.OnDemandDocument=void 0;var j1=y1();class aB{constructor(A,F=0,B=!1,D){this.bson=A,this.offset=F,this.isArray=B,this.cache=Object.create(null),this.indexFound=Object.create(null),this.elements=D??j1.parseToElementsToArray(this.bson,F)}isElementName(A,F){let B=F[2],D=F[1];if(A.length!==B)return!1;let $=D+B;for(let J=D,X=0;X<A.length&&J<$;X++,J++)if(this.bson[J]!==A.charCodeAt(X))return!1;return!0}getElement(A){let F=this.cache[A];if(F===!1)return null;if(F!=null)return F;if(typeof A==="number")if(this.isArray)if(A<this.elements.length){let D={element:this.elements[A],value:void 0};return this.cache[A]=D,this.indexFound[A]=!0,D}else return null;else return null;for(let B=0;B<this.elements.length;B++){let D=this.elements[B];if(!(B in this.indexFound)&&this.isElementName(A,D)){let $={element:D,value:void 0};return this.cache[A]=$,this.indexFound[B]=!0,$}}return this.cache[A]=!1,null}toJSValue(A,F){let B=A[0],D=A[3],$=A[4];if(F!==B)return null;switch(F){case j1.BSONType.null:case j1.BSONType.undefined:return null;case j1.BSONType.double:return j1.getFloat64LE(this.bson,D);case j1.BSONType.int:return j1.getInt32LE(this.bson,D);case j1.BSONType.long:return j1.getBigInt64LE(this.bson,D);case j1.BSONType.bool:return Boolean(this.bson[D]);case j1.BSONType.objectId:return new j1.ObjectId(this.bson.subarray(D,D+12));case j1.BSONType.timestamp:return new j1.Timestamp(j1.getBigInt64LE(this.bson,D));case j1.BSONType.string:return j1.toUTF8(this.bson,D+4,D+$-1,!1);case j1.BSONType.binData:{let J=j1.getInt32LE(this.bson,D),X=this.bson[D+4];if(X===2){let E=j1.getInt32LE(this.bson,D+1+4);if(E<0)throw new j1.BSONError("Negative binary type element size found for subtype 0x02");if(E>J-4)throw new j1.BSONError("Binary type with subtype 0x02 contains too long binary size");if(E<J-4)throw new j1.BSONError("Binary type with subtype 0x02 contains too short binary size");return new j1.Binary(this.bson.subarray(D+1+4+4,D+1+4+4+E),2)}return new j1.Binary(this.bson.subarray(D+1+4,D+1+4+J),X)}case j1.BSONType.date:return new Date(Number(j1.getBigInt64LE(this.bson,D)));case j1.BSONType.object:return new aB(this.bson,D);case j1.BSONType.array:return new aB(this.bson,D,!0);default:throw new j1.BSONError(`Unsupported BSON type: ${F}`)}}size(){return this.elements.length}has(A){let F=this.cache[A];if(F===!1)return!1;if(F!=null)return!0;return this.getElement(A)!=null}get(A,F,B){let D=this.getElement(A);if(D==null)if(B===!0)throw new j1.BSONError(`BSON element "${A}" is missing`);else return null;if(D.value==null){let $=this.toJSValue(D.element,F);if($==null)if(B===!0)throw new j1.BSONError(`BSON element "${A}" is missing`);else return null;D.value=$}return D.value}getNumber(A,F){let B=this.get(A,j1.BSONType.bool),D=B==null?null:B?1:0,$=this.get(A,j1.BSONType.long),J=$==null?null:Number($),X=D??J??this.get(A,j1.BSONType.int)??this.get(A,j1.BSONType.double);if(F===!0&&X==null)throw new j1.BSONError(`BSON element "${A}" is missing`);return X}toObject(A){return j1.deserialize(this.bson,{...A,index:this.offset,allowObjectSmallerThanBufferSize:!0})}toBytes(){let A=j1.getInt32LE(this.bson,this.offset);return this.bson.subarray(this.offset,this.offset+A)}}Cw.OnDemandDocument=aB});var Q3=z((ww)=>{Object.defineProperty(ww,"__esModule",{value:!0});ww.ClientBulkWriteCursorResponse=ww.ExplainedCursorResponse=ww.CursorResponse=ww.MongoDBResponse=void 0;ww.isErrorResponse=Uw;var _1=y1(),a9=s(),zw=F1(),Cr=Kw();function Uw(A,F){for(let B=0;B<F.length;B++){let D=F[B];if(D[2]===2){let $=D[1];if(A[$]===111&&A[$+1]===107){let J=D[3],X=D[4];for(let E=J;E<J+X;E++)if(A[E]!==0)return!1;return!0}}}return!0}class t9 extends Cr.OnDemandDocument{get(A,F,B){try{return super.get(A,F,B)}catch(D){throw new a9.MongoUnexpectedServerResponseError(D.message,{cause:D})}}static is(A){return A instanceof t9}static make(A){let F=_1.parseToElementsToArray(A,0);return Uw(A,F)?new t9(A,0,!1,F):new this(A,0,!1,F)}get isMaxTimeExpiredError(){if(this.ok===0&&this.code===a9.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;if(this.ok===0)return!1;if(this.get("writeConcernError",_1.BSONType.object)?.getNumber("code")===a9.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;let B=this.get("writeErrors",_1.BSONType.array);if(B?.size()){for(let D=0;D<B.size();D++)if(B.get(D,_1.BSONType.object)?.getNumber("code")===a9.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0}return!1}get recoveryToken(){return this.get("recoveryToken",_1.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}get atClusterTime(){return this.get("cursor",_1.BSONType.object)?.get("atClusterTime",_1.BSONType.timestamp)??this.get("atClusterTime",_1.BSONType.timestamp)}get operationTime(){return this.get("operationTime",_1.BSONType.timestamp)}get ok(){return this.getNumber("ok")?1:0}get $err(){return this.get("$err",_1.BSONType.string)}get errmsg(){return this.get("errmsg",_1.BSONType.string)}get code(){return this.getNumber("code")}get $clusterTime(){if(!("clusterTime"in this)){let A=this.get("$clusterTime",_1.BSONType.object);if(A==null)return this.clusterTime=null,null;let F=A.get("clusterTime",_1.BSONType.timestamp,!0),B=A.get("signature",_1.BSONType.object)?.toObject();this.clusterTime={clusterTime:F,signature:B}}return this.clusterTime??null}toObject(A){let F={..._1.pluckBSONSerializeOptions(A??{}),validation:_1.parseUtf8ValidationOption(A)};return super.toObject(F)}}ww.MongoDBResponse=t9;t9.empty=new t9(new Uint8Array([13,0,0,0,16,111,107,0,1,0,0,0,0]));class r9 extends t9{constructor(){super(...arguments);this._batch=null,this.iterated=0,this._encryptedBatch=null}static get emptyGetMore(){return new r9(_1.serialize({ok:1,cursor:{id:0n,nextBatch:[]}}))}static is(A){return A instanceof r9||A===r9.emptyGetMore}get cursor(){return this.get("cursor",_1.BSONType.object,!0)}get id(){try{return _1.Long.fromBigInt(this.cursor.get("id",_1.BSONType.long,!0))}catch(A){throw new a9.MongoUnexpectedServerResponseError(A.message,{cause:A})}}get ns(){let A=this.cursor.get("ns",_1.BSONType.string);if(A!=null)return zw.ns(A);return null}get length(){return Math.max(this.batchSize-this.iterated,0)}get encryptedBatch(){if(this.encryptedResponse==null)return null;if(this._encryptedBatch!=null)return this._encryptedBatch;let A=this.encryptedResponse?.get("cursor",_1.BSONType.object);if(A?.has("firstBatch"))this._encryptedBatch=A.get("firstBatch",_1.BSONType.array,!0);else if(A?.has("nextBatch"))this._encryptedBatch=A.get("nextBatch",_1.BSONType.array,!0);else throw new a9.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._encryptedBatch}get batch(){if(this._batch!=null)return this._batch;let A=this.cursor;if(A.has("firstBatch"))this._batch=A.get("firstBatch",_1.BSONType.array,!0);else if(A.has("nextBatch"))this._batch=A.get("nextBatch",_1.BSONType.array,!0);else throw new a9.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._batch}get batchSize(){return this.batch?.size()}get postBatchResumeToken(){return this.cursor.get("postBatchResumeToken",_1.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}shift(A){if(this.iterated>=this.batchSize)return null;let F=this.batch.get(this.iterated,_1.BSONType.object,!0)??null,B=this.encryptedBatch?.get(this.iterated,_1.BSONType.object,!0)??null;if(this.iterated+=1,A?.raw)return F.toBytes();else{let D=F.toObject(A);if(B)zw.decorateDecryptionResult(D,B.toObject(A),!0);return D}}clear(){this.iterated=this.batchSize}}ww.CursorResponse=r9;class Zw extends r9{constructor(){super(...arguments);this.isExplain=!0,this._length=1}get id(){return _1.Long.fromBigInt(0n)}get batchSize(){return 0}get ns(){return null}get length(){return this._length}shift(A){if(this._length===0)return null;return this._length-=1,this.toObject(A)}}ww.ExplainedCursorResponse=Zw;class Vw extends r9{get insertedCount(){return this.get("nInserted",_1.BSONType.int,!0)}get upsertedCount(){return this.get("nUpserted",_1.BSONType.int,!0)}get matchedCount(){return this.get("nMatched",_1.BSONType.int,!0)}get modifiedCount(){return this.get("nModified",_1.BSONType.int,!0)}get deletedCount(){return this.get("nDeleted",_1.BSONType.int,!0)}get writeConcernError(){return this.get("writeConcernError",_1.BSONType.object,!1)}}ww.ClientBulkWriteCursorResponse=Vw});var P2=z((Nw)=>{Object.defineProperty(Nw,"__esModule",{value:!0});Nw.WriteConcern=Nw.WRITE_CONCERN_KEYS=void 0;Nw.throwIfWriteConcernError=Vr;var Rw=Q3(),Zr=s();Nw.WRITE_CONCERN_KEYS=["w","wtimeout","j","journal","fsync"];class GA{constructor(A,F,B,D){if(A!=null)if(!Number.isNaN(Number(A)))this.w=Number(A);else this.w=A;if(F!=null)this.wtimeoutMS=this.wtimeout=F;if(B!=null)this.journal=this.j=B;if(D!=null)this.journal=this.j=D?!0:!1}static apply(A,F){let B={};if(F.w!=null)B.w=F.w;if(F.wtimeoutMS!=null)B.wtimeout=F.wtimeoutMS;if(F.journal!=null)B.j=F.j;return A.writeConcern=B,A}static fromOptions(A,F){if(A==null)return;F=F??{};let B;if(typeof A==="string"||typeof A==="number")B={w:A};else if(A instanceof GA)B=A;else B=A.writeConcern;let D=F instanceof GA?F:F.writeConcern,{w:$=void 0,wtimeout:J=void 0,j:X=void 0,fsync:E=void 0,journal:Y=void 0,wtimeoutMS:G=void 0}={...D,...B};if($!=null||J!=null||G!=null||X!=null||Y!=null||E!=null)return new GA($,J??G,X??Y,E);return}}Nw.WriteConcern=GA;function Vr(A){if(typeof A==="object"&&A!=null){let F=Rw.MongoDBResponse.is(A)&&A.has("writeConcernError")?A.toObject():!Rw.MongoDBResponse.is(A)&&("writeConcernError"in A)?A:null;if(F!=null)throw new Zr.MongoWriteConcernError(F)}}});var F1=z((bw)=>{Object.defineProperty(bw,"__esModule",{value:!0});bw.kDispose=bw.randomBytes=bw.COSMOS_DB_MSG=bw.DOCUMENT_DB_MSG=bw.COSMOS_DB_CHECK=bw.DOCUMENT_DB_CHECK=bw.MONGODB_WARNING_CODE=bw.DEFAULT_PK_FACTORY=bw.HostAddress=bw.BufferPool=bw.List=bw.MongoDBCollectionNamespace=bw.MongoDBNamespace=bw.ByteUtils=void 0;bw.isUint8Array=Or;bw.hostMatchesWildcards=ur;bw.normalizeHintField=Sr;bw.isObject=XY;bw.mergeOptions=_r;bw.filterOptions=xr;bw.applyRetryableWrites=gr;bw.isPromiseLike=br;bw.decorateWithCollation=yr;bw.decorateWithReadConcern=hr;bw.getTopology=kw;bw.ns=vr;bw.makeCounter=mr;bw.uuidV4=dr;bw.maxWireVersion=lr;bw.arrayStrictEqual=cr;bw.errorStrictEqual=pr;bw.makeStateMachine=ir;bw.now=Ow;bw.calculateDurationInMs=nr;bw.hasAtomicOperators=uw;bw.resolveTimeoutOptions=sr;bw.resolveOptions=ar;bw.isSuperset=Sw;bw.isHello=rr;bw.setDifference=tr;bw.isRecord=er;bw.emitWarning=_w;bw.emitWarningOnce=At;bw.enumToString=Ft;bw.supportsRetryableWrites=Bt;bw.shuffle=Dt;bw.commandSupportsReadConcern=$t;bw.compareObjectId=Jt;bw.parseInteger=xw;bw.parseUnsignedInteger=Xt;bw.checkParentDomainMatch=Et;bw.get=Yt;bw.request=Gt;bw.isHostMatch=Ht;bw.promiseWithResolvers=HY;bw.squashError=Wt;bw.once=qt;bw.maybeAddIdToDocuments=Ct;bw.fileIsAccessible=Qt;bw.csotMin=Kt;bw.noop=zt;bw.decorateDecryptionResult=gw;bw.addAbortListener=WY;bw.abortable=Ut;var jw=i("crypto"),Rr=i("fs"),Tw=i("http"),JY=i("timers"),Nr=i("url"),Pr=i("url"),Ir=i("util"),EY=y1(),Mr=n9(),rB=v0(),I2=s(),jr=c6(),Tr=t0(),kr=P6(),Iw=P2();bw.ByteUtils={toLocalBufferType(A){return Buffer.isBuffer(A)?A:Buffer.from(A.buffer,A.byteOffset,A.byteLength)},equals(A,F){return bw.ByteUtils.toLocalBufferType(A).equals(F)},compare(A,F){return bw.ByteUtils.toLocalBufferType(A).compare(F)},toBase64(A){return bw.ByteUtils.toLocalBufferType(A).toString("base64")}};function Or(A){return A!=null&&typeof A==="object"&&Symbol.toStringTag in A&&A[Symbol.toStringTag]==="Uint8Array"}function ur(A,F){for(let B of F)if(A===B||B.startsWith("*.")&&A?.endsWith(B.substring(2,B.length))||B.startsWith("*/")&&A?.endsWith(B.substring(2,B.length)))return!0;return!1}function Sr(A){let F=void 0;if(typeof A==="string")F=A;else if(Array.isArray(A))F={},A.forEach((B)=>{F[B]=1});else if(A!=null&&typeof A==="object"){F={};for(let B in A)F[B]=A[B]}return F}var fr=(A)=>Object.prototype.toString.call(A);function XY(A){return fr(A)==="[object Object]"}function _r(A,F){return{...A,...F}}function xr(A,F){let B={};for(let D in A)if(F.includes(D))B[D]=A[D];return B}function gr(A,F){if(F&&F.s.options?.retryWrites)A.retryWrites=!0;return A}function br(A){return A!=null&&typeof A==="object"&&"then"in A&&typeof A.then==="function"}function yr(A,F,B){let D=kw(F).capabilities;if(B.collation&&typeof B.collation==="object")if(D&&D.commandsTakeCollation)A.collation=B.collation;else throw new I2.MongoCompatibilityError("Current topology does not support collation")}function hr(A,F,B){if(B&&B.session&&B.session.inTransaction())return;let D=Object.assign({},A.readConcern||{});if(F.s.readConcern)Object.assign(D,F.s.readConcern);if(Object.keys(D).length>0)Object.assign(A,{readConcern:D})}function kw(A){if("topology"in A&&A.topology)return A.topology;else if("client"in A&&A.client.topology)return A.client.topology;throw new I2.MongoNotConnectedError("MongoClient must be connected to perform this operation")}function vr(A){return qA.fromString(A)}class qA{constructor(A,F){this.db=A,this.collection=F,this.collection=F===""?void 0:F}toString(){return this.collection?`${this.db}.${this.collection}`:this.db}withCollection(A){return new YY(this.db,A)}static fromString(A){if(typeof A!=="string"||A==="")throw new I2.MongoRuntimeError(`Cannot parse namespace from "${A}"`);let[F,...B]=A.split("."),D=B.join(".");return new qA(F,D===""?void 0:D)}}bw.MongoDBNamespace=qA;class YY extends qA{constructor(A,F){super(A,F);this.collection=F}static fromString(A){return super.fromString(A)}}bw.MongoDBCollectionNamespace=YY;function*mr(A=0){let F=A;while(!0){let B=F;F+=1,yield B}}function dr(){let A=jw.randomBytes(16);return A[6]=A[6]&15|64,A[8]=A[8]&63|128,A}function lr(A){if(A){if(A.loadBalanced||A.serverApi?.version)return Mr.MAX_SUPPORTED_WIRE_VERSION;if(A.hello)return A.hello.maxWireVersion;if("lastHello"in A&&typeof A.lastHello==="function"){let F=A.lastHello();if(F)return F.maxWireVersion}if(A.description&&"maxWireVersion"in A.description&&A.description.maxWireVersion!=null)return A.description.maxWireVersion}return 0}function cr(A,F){if(!Array.isArray(A)||!Array.isArray(F))return!1;return A.length===F.length&&A.every((B,D)=>B===F[D])}function pr(A,F){if(A===F)return!0;if(!A||!F)return A===F;if(A==null&&F!=null||A!=null&&F==null)return!1;if(A.constructor.name!==F.constructor.name)return!1;if(A.message!==F.message)return!1;return!0}function ir(A){return function F(B,D){let $=A[B.s.state];if($&&$.indexOf(D)<0)throw new I2.MongoRuntimeError(`illegal state transition from [${B.s.state}] => [${D}], allowed: [${$}]`);B.emit("stateChanged",B.s.state,D),B.s.state=D}}function Ow(){let A=process.hrtime();return Math.floor(A[0]*1000+A[1]/1e6)}function nr(A){if(typeof A!=="number")return-1;let F=Ow()-A;return F<0?0:F}function uw(A,F){if(Array.isArray(A)){for(let D of A)if(uw(D))return!0;return!1}let B=Object.keys(A);if(F?.ignoreUndefined){let D=!0;for(let $ of B)if(A[$]!==void 0){D=!1;break}if(D)throw new I2.MongoInvalidArgumentError("Update operations require that all atomic operators have defined values, but none were provided.")}return B.length>0&&B[0][0]==="$"}function sr(A,F){let{socketTimeoutMS:B,serverSelectionTimeoutMS:D,waitQueueTimeoutMS:$,timeoutMS:J}=A.s.options;return{socketTimeoutMS:B,serverSelectionTimeoutMS:D,waitQueueTimeoutMS:$,timeoutMS:J,...F}}function ar(A,F){let B=Object.assign({},F,EY.resolveBSONOptions(F,A)),D=F?.timeoutMS??A?.timeoutMS,$=F?.session;if(!$?.inTransaction()){let E=jr.ReadConcern.fromOptions(F)??A?.readConcern;if(E)B.readConcern=E;let Y=Iw.WriteConcern.fromOptions(F)??A?.writeConcern;if(Y){if(D!=null)Y=Iw.WriteConcern.fromOptions({writeConcern:{...Y,wtimeout:void 0,wtimeoutMS:void 0}});B.writeConcern=Y}}B.timeoutMS=D;let J=Tr.ReadPreference.fromOptions(F)??A?.readPreference;if(J)B.readPreference=J;if($?.explicit&&$?.timeoutContext!=null&&F?.timeoutMS!=null)throw new I2.MongoInvalidArgumentError("An operation cannot be given a timeoutMS setting when inside a withTransaction call that has a timeoutMS setting");return B}function Sw(A,F){A=Array.isArray(A)?new Set(A):A,F=Array.isArray(F)?new Set(F):F;for(let B of F)if(!A.has(B))return!1;return!0}function rr(A){return A[rB.LEGACY_HELLO_COMMAND]||A.hello?!0:!1}function tr(A,F){let B=new Set(A);for(let D of F)B.delete(D);return B}var or=(A,F)=>Object.prototype.hasOwnProperty.call(A,F);function er(A,F=void 0){if(!XY(A))return!1;let B=A.constructor;if(B&&B.prototype){if(!XY(B.prototype))return!1;if(!or(B.prototype,"isPrototypeOf"))return!1}if(F){let D=Object.keys(A);return Sw(D,F)}return!0}class GY{get length(){return this.count}get[Symbol.toStringTag](){return"List"}constructor(){this.count=0,this.head={next:null,prev:null,value:null},this.head.next=this.head,this.head.prev=this.head}toArray(){return Array.from(this)}toString(){return`head <=> ${this.toArray().join(" <=> ")} <=> head`}*[Symbol.iterator](){for(let A of this.nodes())yield A.value}*nodes(){let A=this.head.next;while(A!==this.head){let{next:F}=A;yield A,A=F}}push(A){this.count+=1;let F={next:this.head,prev:this.head.prev,value:A};this.head.prev.next=F,this.head.prev=F}pushMany(A){for(let F of A)this.push(F)}unshift(A){this.count+=1;let F={next:this.head.next,prev:this.head,value:A};this.head.next.prev=F,this.head.next=F}remove(A){if(A===this.head||this.length===0)return null;this.count-=1;let{prev:F,next:B}=A;return F.next=B,B.prev=F,A.value}shift(){return this.remove(this.head.next)}pop(){return this.remove(this.head.prev)}prune(A){for(let F of this.nodes())if(A(F.value))this.remove(F)}clear(){this.count=0,this.head.next=this.head,this.head.prev=this.head}first(){return this.head.next.value}last(){return this.head.prev.value}}bw.List=GY;class fw{constructor(){this.buffers=new GY,this.totalByteLength=0}get length(){return this.totalByteLength}append(A){this.buffers.push(A),this.totalByteLength+=A.length}getInt32(){if(this.totalByteLength<4)return null;let A=this.buffers.first();if(A!=null&&A.byteLength>=4)return A.readInt32LE(0);let F=this.read(4),B=F.readInt32LE(0);return this.totalByteLength+=4,this.buffers.unshift(F),B}read(A){if(typeof A!=="number"||A<0)throw new I2.MongoInvalidArgumentError('Argument "size" must be a non-negative number');if(A>this.totalByteLength)return Buffer.alloc(0);let F=Buffer.allocUnsafe(A);for(let B=0;B<A;){let D=this.buffers.shift();if(D==null)break;let $=A-B,J=Math.min($,D.byteLength),X=D.subarray(0,J);if(F.set(X,B),B+=J,this.totalByteLength-=J,J<D.byteLength)this.buffers.unshift(D.subarray(J))}return F}}bw.BufferPool=fw;class WA{constructor(A){this.host=void 0,this.port=void 0,this.socketPath=void 0,this.isIPv6=!1;let F=A.split(" ").join("%20");if(F.endsWith(".sock")){this.socketPath=decodeURIComponent(F);return}let B=`iLoveJS://${F}`,D;try{D=new Pr.URL(B)}catch(E){let Y=new I2.MongoRuntimeError(`Unable to parse ${F} with URL`);throw Y.cause=E,Y}let{hostname:$,port:J}=D,X=decodeURIComponent($).toLowerCase();if(X.startsWith("[")&&X.endsWith("]"))this.isIPv6=!0,X=X.substring(1,$.length-1);if(this.host=X.toLowerCase(),typeof J==="number")this.port=J;else if(typeof J==="string"&&J!=="")this.port=Number.parseInt(J,10);else this.port=27017;if(this.port===0)throw new I2.MongoParseError("Invalid port (zero) with hostname");Object.freeze(this)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new HostAddress('${this.toString()}')`}toString(){if(typeof this.host==="string"){if(this.isIPv6)return`[${this.host}]:${this.port}`;return`${this.host}:${this.port}`}return`${this.socketPath}`}static fromString(A){return new WA(A)}static fromHostPort(A,F){if(A.includes(":"))A=`[${A}]`;return WA.fromString(`${A}:${F}`)}static fromSrvRecord({name:A,port:F}){return WA.fromHostPort(A,F)}toHostPort(){if(this.socketPath)return{host:this.socketPath,port:0};let A=this.host??"",F=this.port??0;return{host:A,port:F}}}bw.HostAddress=WA;bw.DEFAULT_PK_FACTORY={createPk(){return new EY.ObjectId}};bw.MONGODB_WARNING_CODE="MONGODB DRIVER";function _w(A){return process.emitWarning(A,{code:bw.MONGODB_WARNING_CODE})}var Mw=new Set;function At(A){if(!Mw.has(A))return Mw.add(A),_w(A)}function Ft(A){return Object.values(A).join(", ")}function Bt(A){if(!A)return!1;if(A.loadBalanced)return!0;if(A.description.logicalSessionTimeoutMinutes!=null){if(A.description.type!==kr.ServerType.Standalone)return!0}return!1}function Dt(A,F=0){let B=Array.from(A);if(F>B.length)throw new I2.MongoRuntimeError("Limit must be less than the number of items");let D=B.length,$=F%B.length===0?1:B.length-F;while(D>$){let J=Math.floor(Math.random()*D);D-=1;let X=B[D];B[D]=B[J],B[J]=X}return F%B.length===0?B:B.slice($)}function $t(A){if(A.aggregate||A.count||A.distinct||A.find||A.geoNear)return!0;return!1}function Jt(A,F){if(A==null&&F==null)return 0;if(A==null)return-1;if(F==null)return 1;return bw.ByteUtils.compare(A.id,F.id)}function xw(A){if(typeof A==="number")return Math.trunc(A);let F=Number.parseInt(String(A),10);return Number.isNaN(F)?null:F}function Xt(A){let F=xw(A);return F!=null&&F>=0?F:null}function Et(A,F){let B=A.endsWith(".")?A.slice(0,A.length-1):A,D=F.endsWith(".")?F.slice(0,F.length-1):F,$=/^.*?\./,J=D.split(".").length<3,X=`.${B.replace($,"")}`,E=J?D:`.${D.replace($,"")}`;if(!E.startsWith("."))E="."+E;if(J&&B.split(".").length<=D.split(".").length)throw new I2.MongoAPIError("Server record does not have at least one more domain level than parent URI");if(!X.endsWith(E))throw new I2.MongoAPIError("Server record does not share hostname with parent URI")}function Yt(A,F={}){return new Promise((B,D)=>{let $,J=Tw.get(A,F,(X)=>{X.setEncoding("utf8");let E="";X.on("data",(Y)=>E+=Y),X.on("end",()=>{JY.clearTimeout($),B({status:X.statusCode,body:E})})}).on("error",(X)=>{JY.clearTimeout($),D(X)}).end();$=JY.setTimeout(()=>{J.destroy(new I2.MongoNetworkTimeoutError("request timed out after 10 seconds"))},1e4)})}async function Gt(A,F={}){return await new Promise((B,D)=>{let $={method:"GET",timeout:1e4,json:!0,...Nr.parse(A),...F},J=Tw.request($,(X)=>{X.setEncoding("utf8");let E="";X.on("data",(Y)=>{E+=Y}),X.once("end",()=>{if(F.json===!1){B(E);return}try{let Y=JSON.parse(E);B(Y)}catch{D(new I2.MongoRuntimeError(`Invalid JSON response: "${E}"`))}})});J.once("timeout",()=>J.destroy(new I2.MongoNetworkTimeoutError(`Network request to ${A} timed out after ${F.timeout} ms`))),J.once("error",(X)=>D(X)),J.end()})}bw.DOCUMENT_DB_CHECK=/(\.docdb\.amazonaws\.com$)|(\.docdb-elastic\.amazonaws\.com$)/;bw.COSMOS_DB_CHECK=/\.cosmos\.azure\.com$/;bw.DOCUMENT_DB_MSG="You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb";bw.COSMOS_DB_MSG="You appear to be connected to a CosmosDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/cosmosdb";function Ht(A,F){return F&&A.test(F.toLowerCase())?!0:!1}function HY(){let A,F;return{promise:new Promise(function D($,J){A=$,F=J}),resolve:A,reject:F}}function Wt(A){return}bw.randomBytes=Ir.promisify(jw.randomBytes);async function qt(A,F,B){B?.signal?.throwIfAborted();let{promise:D,resolve:$,reject:J}=HY(),X=(G)=>$(G),E=(G)=>J(G),Y=WY(B?.signal,function(){J(this.reason)});A.once(F,X).once("error",E);try{return await D}finally{A.off(F,X),A.off("error",E),Y?.[bw.kDispose]()}}function Ct(A,F,B){if((typeof B.forceServerObjectId==="boolean"?B.forceServerObjectId:A.s.db.options?.forceServerObjectId)===!0)return F;let $=(J)=>{if(J._id==null)J._id=A.s.pkFactory.createPk();return J};return Array.isArray(F)?F.map($):$(F)}async function Qt(A,F){try{return await Rr.promises.access(A,F),!0}catch{return!1}}function Kt(A,F){if(A===0)return F;if(F===0)return A;return Math.min(A,F)}function zt(){return}function gw(A,F,B=!0){if(B){if(Buffer.isBuffer(F))F=EY.deserialize(F);if(Buffer.isBuffer(A))throw new I2.MongoRuntimeError("Expected result of decryption to be deserialized BSON object")}if(!A||typeof A!=="object")return;for(let D of Object.keys(A)){let $=F[D];if($&&$._bsontype==="Binary"&&$.sub_type===6){if(!A[rB.kDecoratedKeys])Object.defineProperty(A,rB.kDecoratedKeys,{value:[],configurable:!0,enumerable:!1,writable:!1});A[rB.kDecoratedKeys].push(D);continue}gw(A[D],$,!1)}}bw.kDispose=Symbol.dispose??Symbol("dispose");function WY(A,F){if(A==null)return;return A.addEventListener("abort",F,{once:!0}),{[bw.kDispose]:()=>A.removeEventListener("abort",F)}}async function Ut(A,{signal:F}){if(F==null)return await A;let{promise:B,reject:D}=HY(),$=F.aborted?D(F.reason):WY(F,function(){D(this.reason)});try{return await Promise.race([A,B])}finally{$?.[bw.kDispose]()}}});var a4=z((cw)=>{Object.defineProperty(cw,"__esModule",{value:!0});cw.MongoLogger=cw.MongoLoggableComponent=cw.SEVERITY_LEVEL_MAP=cw.DEFAULT_MAX_DOCUMENT_LENGTH=cw.SeverityLevel=void 0;cw.parseSeverityFromString=QY;cw.createStdioLogger=o9;cw.stringifyWithMaxLen=s4;cw.defaultLogTransform=dw;var hw=i("util"),vw=y1(),Y0=v0(),e9=F1();cw.SeverityLevel=Object.freeze({EMERGENCY:"emergency",ALERT:"alert",CRITICAL:"critical",ERROR:"error",WARNING:"warn",NOTICE:"notice",INFORMATIONAL:"info",DEBUG:"debug",TRACE:"trace",OFF:"off"});cw.DEFAULT_MAX_DOCUMENT_LENGTH=1000;class mw extends Map{constructor(A){let F=[];for(let[B,D]of A)F.push([D,B]);F.push(...A);super(F)}getNumericSeverityLevel(A){return this.get(A)}getSeverityLevelName(A){return this.get(A)}}cw.SEVERITY_LEVEL_MAP=new mw([[cw.SeverityLevel.OFF,-1/0],[cw.SeverityLevel.EMERGENCY,0],[cw.SeverityLevel.ALERT,1],[cw.SeverityLevel.CRITICAL,2],[cw.SeverityLevel.ERROR,3],[cw.SeverityLevel.WARNING,4],[cw.SeverityLevel.NOTICE,5],[cw.SeverityLevel.INFORMATIONAL,6],[cw.SeverityLevel.DEBUG,7],[cw.SeverityLevel.TRACE,8]]);cw.MongoLoggableComponent=Object.freeze({COMMAND:"command",TOPOLOGY:"topology",SERVER_SELECTION:"serverSelection",CONNECTION:"connection",CLIENT:"client"});function QY(A){let F=Object.values(cw.SeverityLevel),B=A?.toLowerCase();if(B!=null&&F.includes(B))return B;return null}function o9(A){return{write:hw.promisify((F,B)=>{let D=hw.inspect(F,{compact:!0,breakLength:1/0});A.write(`${D}
`,"utf-8",B);return})}}function Io({MONGODB_LOG_PATH:A},{mongodbLogPath:F}){if(typeof F==="string"&&/^stderr$/i.test(F))return{mongodbLogPath:o9(process.stderr),mongodbLogPathIsStdErr:!0};if(typeof F==="string"&&/^stdout$/i.test(F))return{mongodbLogPath:o9(process.stdout),mongodbLogPathIsStdErr:!1};if(typeof F==="object"&&typeof F?.write==="function")return{mongodbLogPath:F,mongodbLogPathIsStdErr:!1};if(A&&/^stderr$/i.test(A))return{mongodbLogPath:o9(process.stderr),mongodbLogPathIsStdErr:!0};if(A&&/^stdout$/i.test(A))return{mongodbLogPath:o9(process.stdout),mongodbLogPathIsStdErr:!1};return{mongodbLogPath:o9(process.stderr),mongodbLogPathIsStdErr:!0}}function E8(A,F,B){return QY(A)??QY(F)??B}function Mo(A,F){let B=cw.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(A),D=cw.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(F);return B<D?-1:B>D?1:0}function s4(A,F,B={}){let D="",$=0,J=function X(E,Y){if($>=F)return;if(E==="")return $+=1,Y;if($+=E.length+4,Y==null)return Y;switch(typeof Y){case"string":$+=Y.length+2;break;case"number":case"bigint":$+=String(Y).length;break;case"boolean":$+=Y?4:5;break;case"object":if(e9.isUint8Array(Y))$+=22+Y.byteLength+Y.byteLength*0.33+18|0;else if("_bsontype"in Y){let G=Y;switch(G._bsontype){case"Int32":$+=String(G.value).length;break;case"Double":$+=(G.value|0)===G.value?String(G.value).length+2:String(G.value).length;break;case"Long":$+=G.toString().length;break;case"ObjectId":$+=35;break;case"MaxKey":case"MinKey":$+=13;break;case"Binary":$+=22+Y.position+Y.position*0.33+18|0;break;case"Timestamp":$+=19+String(G.t).length+5+String(G.i).length+2;break;case"Code":if(G.scope==null)$+=G.code.length+10+2;else $+=G.code.length+10+11;break;case"BSONRegExp":$+=34+G.pattern.length+13+G.options.length+3;break}}}return Y};if(typeof A==="string")D=A;else if(typeof A==="function")D=A.name;else try{if(F!==0)D=vw.EJSON.stringify(A,J,0,B);else D=vw.EJSON.stringify(A,B)}catch(X){D=`Extended JSON serialization failed with: ${X.message}`}if(F!==0&&D.length>F&&D.charCodeAt(F-1)!==D.codePointAt(F-1)){if(F--,F===0)return""}return F!==0&&D.length>F?`${D.slice(0,F)}...`:D}function jo(A){let F=A;return F.toLog!==void 0&&typeof F.toLog==="function"}function tB(A,F,B=cw.DEFAULT_MAX_DOCUMENT_LENGTH){let{selector:D,operation:$,topologyDescription:J,message:X}=F;return A.selector=s4(D,B),A.operation=$,A.topologyDescription=s4(J,B),A.message=X,A}function qY(A,F){A.commandName=F.commandName,A.requestId=F.requestId,A.driverConnectionId=F.connectionId;let{host:B,port:D}=e9.HostAddress.fromString(F.address).toHostPort();if(A.serverHost=B,A.serverPort=D,F?.serviceId)A.serviceId=F.serviceId.toHexString();return A.databaseName=F.databaseName,A.serverConnectionId=F.serverConnectionId,A}function I6(A,F){let{host:B,port:D}=e9.HostAddress.fromString(F.address).toHostPort();return A.serverHost=B,A.serverPort=D,A}function n4(A,F){return A.topologyId=F.topologyId,A}function CY(A,F){let{awaited:B,connectionId:D}=F;A.awaited=B,A.driverConnectionId=F.connectionId;let{host:$,port:J}=e9.HostAddress.fromString(D).toHostPort();return A.serverHost=$,A.serverPort=J,A}function dw(A,F=cw.DEFAULT_MAX_DOCUMENT_LENGTH){let B=Object.create(null);switch(A.name){case Y0.SERVER_SELECTION_STARTED:return B=tB(B,A,F),B;case Y0.SERVER_SELECTION_FAILED:return B=tB(B,A,F),B.failure=A.failure?.message,B;case Y0.SERVER_SELECTION_SUCCEEDED:return B=tB(B,A,F),B.serverHost=A.serverHost,B.serverPort=A.serverPort,B;case Y0.WAITING_FOR_SUITABLE_SERVER:return B=tB(B,A,F),B.remainingTimeMS=A.remainingTimeMS,B;case Y0.COMMAND_STARTED:return B=qY(B,A),B.message="Command started",B.command=s4(A.command,F,{relaxed:!0}),B.databaseName=A.databaseName,B;case Y0.COMMAND_SUCCEEDED:return B=qY(B,A),B.message="Command succeeded",B.durationMS=A.duration,B.reply=s4(A.reply,F,{relaxed:!0}),B;case Y0.COMMAND_FAILED:return B=qY(B,A),B.message="Command failed",B.durationMS=A.duration,B.failure=A.failure?.message??"(redacted)",B;case Y0.CONNECTION_POOL_CREATED:if(B=I6(B,A),B.message="Connection pool created",A.options){let{maxIdleTimeMS:D,minPoolSize:$,maxPoolSize:J,maxConnecting:X,waitQueueTimeoutMS:E}=A.options;B={...B,maxIdleTimeMS:D,minPoolSize:$,maxPoolSize:J,maxConnecting:X,waitQueueTimeoutMS:E}}return B;case Y0.CONNECTION_POOL_READY:return B=I6(B,A),B.message="Connection pool ready",B;case Y0.CONNECTION_POOL_CLEARED:if(B=I6(B,A),B.message="Connection pool cleared",A.serviceId?._bsontype==="ObjectId")B.serviceId=A.serviceId?.toHexString();return B;case Y0.CONNECTION_POOL_CLOSED:return B=I6(B,A),B.message="Connection pool closed",B;case Y0.CONNECTION_CREATED:return B=I6(B,A),B.message="Connection created",B.driverConnectionId=A.connectionId,B;case Y0.CONNECTION_READY:return B=I6(B,A),B.message="Connection ready",B.driverConnectionId=A.connectionId,B.durationMS=A.durationMS,B;case Y0.CONNECTION_CLOSED:switch(B=I6(B,A),B.message="Connection closed",B.driverConnectionId=A.connectionId,A.reason){case"stale":B.reason="Connection became stale because the pool was cleared";break;case"idle":B.reason="Connection has been available but unused for longer than the configured max idle time";break;case"error":if(B.reason="An error occurred while using the connection",A.error)B.error=A.error;break;case"poolClosed":B.reason="Connection pool was closed";break;default:B.reason=`Unknown close reason: ${A.reason}`}return B;case Y0.CONNECTION_CHECK_OUT_STARTED:return B=I6(B,A),B.message="Connection checkout started",B;case Y0.CONNECTION_CHECK_OUT_FAILED:switch(B=I6(B,A),B.message="Connection checkout failed",A.reason){case"poolClosed":B.reason="Connection pool was closed";break;case"timeout":B.reason="Wait queue timeout elapsed without a connection becoming available";break;case"connectionError":if(B.reason="An error occurred while trying to establish a new connection",A.error)B.error=A.error;break;default:B.reason=`Unknown close reason: ${A.reason}`}return B.durationMS=A.durationMS,B;case Y0.CONNECTION_CHECKED_OUT:return B=I6(B,A),B.message="Connection checked out",B.driverConnectionId=A.connectionId,B.durationMS=A.durationMS,B;case Y0.CONNECTION_CHECKED_IN:return B=I6(B,A),B.message="Connection checked in",B.driverConnectionId=A.connectionId,B;case Y0.SERVER_OPENING:return B=n4(B,A),B=I6(B,A),B.message="Starting server monitoring",B;case Y0.SERVER_CLOSED:return B=n4(B,A),B=I6(B,A),B.message="Stopped server monitoring",B;case Y0.SERVER_HEARTBEAT_STARTED:return B=n4(B,A),B=CY(B,A),B.message="Server heartbeat started",B;case Y0.SERVER_HEARTBEAT_SUCCEEDED:return B=n4(B,A),B=CY(B,A),B.message="Server heartbeat succeeded",B.durationMS=A.duration,B.serverConnectionId=A.serverConnectionId,B.reply=s4(A.reply,F,{relaxed:!0}),B;case Y0.SERVER_HEARTBEAT_FAILED:return B=n4(B,A),B=CY(B,A),B.message="Server heartbeat failed",B.durationMS=A.duration,B.failure=A.failure?.message,B;case Y0.TOPOLOGY_OPENING:return B=n4(B,A),B.message="Starting topology monitoring",B;case Y0.TOPOLOGY_CLOSED:return B=n4(B,A),B.message="Stopped topology monitoring",B;case Y0.TOPOLOGY_DESCRIPTION_CHANGED:return B=n4(B,A),B.message="Topology description changed",B.previousDescription=B.reply=s4(A.previousDescription,F),B.newDescription=B.reply=s4(A.newDescription,F),B;default:for(let[D,$]of Object.entries(A))if($!=null)B[D]=$}return B}class lw{constructor(A){this.pendingLog=null,this.error=this.log.bind(this,"error"),this.warn=this.log.bind(this,"warn"),this.info=this.log.bind(this,"info"),this.debug=this.log.bind(this,"debug"),this.trace=this.log.bind(this,"trace"),this.componentSeverities=A.componentSeverities,this.maxDocumentLength=A.maxDocumentLength,this.logDestination=A.logDestination,this.logDestinationIsStdErr=A.logDestinationIsStdErr,this.severities=this.createLoggingSeverities()}createLoggingSeverities(){let A=Object();for(let F of Object.values(cw.MongoLoggableComponent)){A[F]={};for(let B of Object.values(cw.SeverityLevel))A[F][B]=Mo(B,this.componentSeverities[F])<=0}return A}turnOffSeverities(){for(let A of Object.values(cw.MongoLoggableComponent)){this.componentSeverities[A]=cw.SeverityLevel.OFF;for(let F of Object.values(cw.SeverityLevel))this.severities[A][F]=!1}}logWriteFailureHandler(A){if(this.logDestinationIsStdErr){this.turnOffSeverities(),this.clearPendingLog();return}this.logDestination=o9(process.stderr),this.logDestinationIsStdErr=!0,this.clearPendingLog(),this.error(cw.MongoLoggableComponent.CLIENT,{toLog:function(){return{message:"User input for mongodbLogPath is now invalid. Logging is halted.",error:A.message}}}),this.turnOffSeverities(),this.clearPendingLog()}clearPendingLog(){this.pendingLog=null}willLog(A,F){if(F===cw.SeverityLevel.OFF)return!1;return this.severities[A][F]}log(A,F,B){if(!this.willLog(F,A))return;let D={t:new Date,c:F,s:A};if(typeof B==="string")D.message=B;else if(typeof B==="object")if(jo(B))D={...D,...B.toLog()};else D={...D,...dw(B,this.maxDocumentLength)};if(e9.isPromiseLike(this.pendingLog)){this.pendingLog=this.pendingLog.then(()=>this.logDestination.write(D)).then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this));return}try{let $=this.logDestination.write(D);if(e9.isPromiseLike($))this.pendingLog=$.then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this))}catch($){this.logWriteFailureHandler($)}}static resolveOptions(A,F){let B=Io(A,F),D={...A,...F,mongodbLogPath:B.mongodbLogPath,mongodbLogPathIsStdErr:B.mongodbLogPathIsStdErr},$=E8(D.mongodbLogComponentSeverities?.default,D.MONGODB_LOG_ALL,cw.SeverityLevel.OFF);return{componentSeverities:{command:E8(D.mongodbLogComponentSeverities?.command,D.MONGODB_LOG_COMMAND,$),topology:E8(D.mongodbLogComponentSeverities?.topology,D.MONGODB_LOG_TOPOLOGY,$),serverSelection:E8(D.mongodbLogComponentSeverities?.serverSelection,D.MONGODB_LOG_SERVER_SELECTION,$),connection:E8(D.mongodbLogComponentSeverities?.connection,D.MONGODB_LOG_CONNECTION,$),client:E8(D.mongodbLogComponentSeverities?.client,D.MONGODB_LOG_CLIENT,$),default:$},maxDocumentLength:D.mongodbLogMaxDocumentLength??e9.parseUnsignedInteger(D.MONGODB_LOG_MAX_DOCUMENT_LENGTH)??1000,logDestination:D.mongodbLogPath,logDestinationIsStdErr:D.mongodbLogPathIsStdErr}}}cw.MongoLogger=lw});var M6=z((nw)=>{Object.defineProperty(nw,"__esModule",{value:!0});nw.CancellationToken=nw.TypedEventEmitter=void 0;var So=i("events"),fo=a4(),_o=F1();class UY extends So.EventEmitter{emitAndLog(A,...F){if(this.emit(A,...F),this.component)this.mongoLogger?.debug(this.component,F[0])}emitAndLogHeartbeat(A,F,B,...D){if(this.emit(A,...D),this.component){let $={topologyId:F,serverConnectionId:B??null,...D[0]};this.mongoLogger?.debug(this.component,$)}}emitAndLogCommand(A,F,B,D,...$){if(A)this.emit(F,...$);if(D){let J={databaseName:B,...$[0]};this.mongoLogger?.debug(fo.MongoLoggableComponent.COMMAND,J)}}}nw.TypedEventEmitter=UY;class iw extends UY{constructor(...A){super(...A);this.on("error",_o.noop)}}nw.CancellationToken=iw});var KA=z((tw)=>{Object.defineProperty(tw,"__esModule",{value:!0});tw.MIN_SECONDARY_WRITE_WIRE_VERSION=void 0;tw.writableServerSelector=bo;tw.sameServerSelector=yo;tw.secondaryWritableServerSelector=ho;tw.readPreferenceServerSelector=ZY;var FD=s(),QA=t0(),j6=P6(),go=1e4,aw=90;tw.MIN_SECONDARY_WRITE_WIRE_VERSION=13;function bo(){return function A(F,B){return eB(F,B.filter((D)=>D.isWritable))}}function yo(A){return function F(B,D){if(!A)return[];return D.filter(($)=>{return $.address===A.address&&$.type!==j6.ServerType.Unknown})}}function ho(A,F){if(!F||!A||A&&A<tw.MIN_SECONDARY_WRITE_WIRE_VERSION)return ZY(QA.ReadPreference.primary);return ZY(F)}function vo(A,F,B){if(A.maxStalenessSeconds==null||A.maxStalenessSeconds<0)return B;let D=A.maxStalenessSeconds,$=(F.heartbeatFrequencyMS+go)/1000;if(D<$)throw new FD.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${$} seconds`);if(D<aw)throw new FD.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${aw} seconds`);if(F.type===j6.TopologyType.ReplicaSetWithPrimary){let J=Array.from(F.servers.values()).filter(AD)[0];return B.reduce((X,E)=>{let G=(E.lastUpdateTime-E.lastWriteDate-(J.lastUpdateTime-J.lastWriteDate)+F.heartbeatFrequencyMS)/1000,H=A.maxStalenessSeconds??0;if(G<=H)X.push(E);return X},[])}if(F.type===j6.TopologyType.ReplicaSetNoPrimary){if(B.length===0)return B;let J=B.reduce((X,E)=>E.lastWriteDate>X.lastWriteDate?E:X);return B.reduce((X,E)=>{let G=(J.lastWriteDate-E.lastWriteDate+F.heartbeatFrequencyMS)/1000,H=A.maxStalenessSeconds??0;if(G<=H)X.push(E);return X},[])}return B}function mo(A,F){let B=Object.keys(A),D=Object.keys(F);for(let $=0;$<B.length;++$){let J=B[$];if(D.indexOf(J)===-1||F[J]!==A[J])return!1}return!0}function lo(A,F){if(A.tags==null||Array.isArray(A.tags)&&A.tags.length===0)return F;for(let B=0;B<A.tags.length;++B){let D=A.tags[B],$=F.reduce((J,X)=>{if(mo(D,X.tags))J.push(X);return J},[]);if($.length)return $}return[]}function eB(A,F){let B=F.reduce(($,J)=>Math.min(J.roundTripTime,$),1/0),D=B+A.localThresholdMS;return F.reduce(($,J)=>{if(J.roundTripTime<=D&&J.roundTripTime>=B)$.push(J);return $},[])}function AD(A){return A.type===j6.ServerType.RSPrimary}function co(A){return A.type===j6.ServerType.RSSecondary}function po(A){return A.type===j6.ServerType.RSSecondary||A.type===j6.ServerType.RSPrimary}function rw(A){return A.type!==j6.ServerType.Unknown}function io(A){return A.type===j6.ServerType.LoadBalancer}function ZY(A){if(!A.isValid())throw new FD.MongoInvalidArgumentError("Invalid read preference specified");return function F(B,D,$=[]){let J=B.commonWireVersion;if(J&&A.minWireVersion&&A.minWireVersion>J)throw new FD.MongoCompatibilityError(`Minimum wire version '${A.minWireVersion}' required, but found '${J}'`);if(B.type===j6.TopologyType.LoadBalanced)return D.filter(io);if(B.type===j6.TopologyType.Unknown)return[];if(B.type===j6.TopologyType.Single)return eB(B,D.filter(rw));if(B.type===j6.TopologyType.Sharded){let G=D.filter((W)=>{return!$.includes(W)}),H=G.length>0?G:$;return eB(B,H.filter(rw))}let X=A.mode;if(X===QA.ReadPreference.PRIMARY)return D.filter(AD);if(X===QA.ReadPreference.PRIMARY_PREFERRED){let G=D.filter(AD);if(G.length)return G}let E=X===QA.ReadPreference.NEAREST?po:co,Y=eB(B,lo(A,vo(A,B,D.filter(E))));if(X===QA.ReadPreference.SECONDARY_PREFERRED&&Y.length===0)return D.filter(AD);return Y}}});var M2=z((ew)=>{Object.defineProperty(ew,"__esModule",{value:!0});ew.LegacyTimeoutContext=ew.CSOTTimeoutContext=ew.TimeoutContext=ew.Timeout=ew.TimeoutError=void 0;var ow=i("timers"),A7=s(),wY=F1();class BD extends Error{get name(){return"TimeoutError"}constructor(A,F){super(A,F);this.duration=F.duration}static is(A){return A!=null&&typeof A==="object"&&"name"in A&&A.name==="TimeoutError"}}ew.TimeoutError=BD;class T6 extends Promise{get remainingTime(){if(this.timedOut)return 0;if(this.duration===0)return 1/0;return this.start+this.duration-Math.trunc(performance.now())}get timeElapsed(){return Math.trunc(performance.now())-this.start}constructor(A=()=>null,F){let B=F?.duration??0,D=!!F?.unref,$=F?.rejection;if(B<0)throw new A7.MongoInvalidArgumentError("Cannot create a Timeout with a negative duration");let J;super((X,E)=>{J=E,A(wY.noop,E)});if(this.ended=null,this.timedOut=!1,this.cleared=!1,this.duration=B,this.start=Math.trunc(performance.now()),$==null&&this.duration>0){if(this.id=ow.setTimeout(()=>{this.ended=Math.trunc(performance.now()),this.timedOut=!0,J(new BD(`Expired after ${B}ms`,{duration:B}))},this.duration),typeof this.id.unref==="function"&&D)this.id.unref()}else if($!=null)this.ended=Math.trunc(performance.now()),this.timedOut=!0,J($)}clear(){ow.clearTimeout(this.id),this.id=void 0,this.timedOut=!1,this.cleared=!0}throwIfExpired(){if(this.timedOut)throw this.then(void 0,wY.squashError),new BD("Timed out",{duration:this.duration})}static expires(A,F){return new T6(void 0,{duration:A,unref:F})}static reject(A){return new T6(void 0,{duration:0,unref:!0,rejection:A})}}ew.Timeout=T6;function to(A){return A!=null&&typeof A==="object"&&"serverSelectionTimeoutMS"in A&&typeof A.serverSelectionTimeoutMS==="number"&&"waitQueueTimeoutMS"in A&&typeof A.waitQueueTimeoutMS==="number"}function oo(A){return A!=null&&typeof A==="object"&&"serverSelectionTimeoutMS"in A&&typeof A.serverSelectionTimeoutMS==="number"&&"timeoutMS"in A&&typeof A.timeoutMS==="number"}class DD{static create(A){if(A.session?.timeoutContext!=null)return A.session?.timeoutContext;if(oo(A))return new zA(A);else if(to(A))return new $D(A);else throw new A7.MongoRuntimeError("Unrecognized options")}}ew.TimeoutContext=DD;class zA extends DD{constructor(A){super();this.minRoundTripTime=0,this.start=Math.trunc(performance.now()),this.timeoutMS=A.timeoutMS,this.serverSelectionTimeoutMS=A.serverSelectionTimeoutMS,this.socketTimeoutMS=A.socketTimeoutMS,this.clearServerSelectionTimeout=!1}get maxTimeMS(){return this.remainingTimeMS-this.minRoundTripTime}get remainingTimeMS(){let A=Math.trunc(performance.now())-this.start;return this.timeoutMS<=0?1/0:this.timeoutMS-A}csotEnabled(){return!0}get serverSelectionTimeout(){if(typeof this._serverSelectionTimeout!=="object"||this._serverSelectionTimeout?.cleared){let{remainingTimeMS:A,serverSelectionTimeoutMS:F}=this;if(A<=0)return T6.reject(new A7.MongoOperationTimeoutError(`Timed out in server selection after ${this.timeoutMS}ms`));if(F!==0&&wY.csotMin(A,F)===F)this._serverSelectionTimeout=T6.expires(F);else if(A>0&&Number.isFinite(A))this._serverSelectionTimeout=T6.expires(A);else this._serverSelectionTimeout=null}return this._serverSelectionTimeout}get connectionCheckoutTimeout(){if(typeof this._connectionCheckoutTimeout!=="object"||this._connectionCheckoutTimeout?.cleared)if(typeof this._serverSelectionTimeout==="object")this._connectionCheckoutTimeout=this._serverSelectionTimeout;else throw new A7.MongoRuntimeError("Unreachable. If you are seeing this error, please file a ticket on the NODE driver project on Jira");return this._connectionCheckoutTimeout}get timeoutForSocketWrite(){let{remainingTimeMS:A}=this;if(!Number.isFinite(A))return null;if(A>0)return T6.expires(A);return T6.reject(new A7.MongoOperationTimeoutError("Timed out before socket write"))}get timeoutForSocketRead(){let{remainingTimeMS:A}=this;if(!Number.isFinite(A))return null;if(A>0)return T6.expires(A);return T6.reject(new A7.MongoOperationTimeoutError("Timed out before socket read"))}refresh(){this.start=Math.trunc(performance.now()),this.minRoundTripTime=0,this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}clear(){this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}getRemainingTimeMSOrThrow(A){let{remainingTimeMS:F}=this;if(F<=0)throw new A7.MongoOperationTimeoutError(A??`Expired after ${this.timeoutMS}ms`);return F}clone(){let A=new zA({timeoutMS:this.timeoutMS,serverSelectionTimeoutMS:this.serverSelectionTimeoutMS});return A.start=this.start,A}refreshed(){return new zA(this)}addMaxTimeMSToCommand(A,F){if(F.omitMaxTimeMS)return;let B=this.remainingTimeMS-this.minRoundTripTime;if(B>0&&Number.isFinite(B))A.maxTimeMS=B}getSocketTimeoutMS(){return 0}}ew.CSOTTimeoutContext=zA;class $D extends DD{constructor(A){super();this.options=A,this.clearServerSelectionTimeout=!0}csotEnabled(){return!1}get serverSelectionTimeout(){if(this.options.serverSelectionTimeoutMS!=null&&this.options.serverSelectionTimeoutMS>0)return T6.expires(this.options.serverSelectionTimeoutMS);return null}get connectionCheckoutTimeout(){if(this.options.waitQueueTimeoutMS!=null&&this.options.waitQueueTimeoutMS>0)return T6.expires(this.options.waitQueueTimeoutMS);return null}get timeoutForSocketWrite(){return null}get timeoutForSocketRead(){return null}refresh(){return}clear(){return}get maxTimeMS(){return null}refreshed(){return new $D(this.options)}addMaxTimeMSToCommand(A,F){}getSocketTimeoutMS(){return this.options.socketTimeoutMS}}ew.LegacyTimeoutContext=$D});var c1=z((BL)=>{Object.defineProperty(BL,"__esModule",{value:!0});BL.AbstractOperation=BL.Aspect=void 0;BL.defineAspects=$e;var De=y1(),LY=t0();BL.Aspect={READ_OPERATION:Symbol("READ_OPERATION"),WRITE_OPERATION:Symbol("WRITE_OPERATION"),RETRYABLE:Symbol("RETRYABLE"),EXPLAINABLE:Symbol("EXPLAINABLE"),SKIP_COLLATION:Symbol("SKIP_COLLATION"),CURSOR_CREATING:Symbol("CURSOR_CREATING"),MUST_SELECT_SAME_SERVER:Symbol("MUST_SELECT_SAME_SERVER"),COMMAND_BATCHING:Symbol("COMMAND_BATCHING")};class FL{constructor(A={}){this.readPreference=this.hasAspect(BL.Aspect.WRITE_OPERATION)?LY.ReadPreference.primary:LY.ReadPreference.fromOptions(A)??LY.ReadPreference.primary,this.bsonOptions=De.resolveBSONOptions(A),this._session=A.session!=null?A.session:void 0,this.options=A,this.bypassPinningCheck=!!A.bypassPinningCheck,this.trySecondaryWrite=!1}hasAspect(A){let F=this.constructor;if(F.aspects==null)return!1;return F.aspects.has(A)}get session(){return this._session}clearSession(){this._session=void 0}resetBatch(){return!0}get canRetryRead(){return this.hasAspect(BL.Aspect.RETRYABLE)&&this.hasAspect(BL.Aspect.READ_OPERATION)}get canRetryWrite(){return this.hasAspect(BL.Aspect.RETRYABLE)&&this.hasAspect(BL.Aspect.WRITE_OPERATION)}}BL.AbstractOperation=FL;function $e(A,F){if(!Array.isArray(F)&&!(F instanceof Set))F=[F];return F=new Set(F),Object.defineProperty(A,"aspects",{value:F,writable:!1}),F}});var T2=z((EL)=>{Object.defineProperty(EL,"__esModule",{value:!0});EL.executeOperation=Ye;var j2=s(),$L=t0(),JL=KA(),Xe=M2(),RY=F1(),H4=c1(),Ee=j2.MONGODB_ERROR_CODES.IllegalOperation,XL="This MongoDB deployment does not support retryable writes. Please add retryWrites=false to your connection string.";async function Ye(A,F,B){if(!(F instanceof H4.AbstractOperation))throw new j2.MongoRuntimeError("This method requires a valid operation instance");let D=A.topology==null?await RY.abortable(Ge(A),F.options):A.topology,$=F.session,J;if($==null)J=Symbol(),$=A.startSession({owner:J,explicit:!1});else if($.hasEnded)throw new j2.MongoExpiredSessionError("Use of expired sessions is not permitted");else if($.snapshotEnabled&&!D.capabilities.supportsSnapshotReads)throw new j2.MongoCompatibilityError("Snapshot reads require MongoDB 5.0 or later");else if($.client!==A)throw new j2.MongoInvalidArgumentError("ClientSession must be from the same MongoClient");let X=F.readPreference??$L.ReadPreference.primary,E=!!$?.inTransaction(),Y=F.hasAspect(H4.Aspect.READ_OPERATION);if(E&&!X.equals($L.ReadPreference.primary)&&(Y||F.commandName==="runCommand"))throw new j2.MongoTransactionError(`Read preference in a transaction must be primary, not: ${X.mode}`);if($?.isPinned&&$.transaction.isCommitted&&!F.bypassPinningCheck)$.unpin();B??=Xe.TimeoutContext.create({session:$,serverSelectionTimeoutMS:A.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:A.s.options.waitQueueTimeoutMS,timeoutMS:F.options.timeoutMS});try{return await He(F,{topology:D,timeoutContext:B,session:$,readPreference:X})}finally{if($?.owner!=null&&$.owner===J)await $.endSession()}}async function Ge(A){if(A.topology==null){if(A.s.hasBeenClosed)throw new j2.MongoNotConnectedError("Client must be connected before running operations");A.s.options.__skipPingOnConnect=!0;try{if(await A.connect(),A.topology==null)throw new j2.MongoRuntimeError("client.connect did not create a topology but also did not throw");return A.topology}finally{delete A.s.options.__skipPingOnConnect}}return A.topology}async function He(A,{topology:F,timeoutContext:B,session:D,readPreference:$}){let J;if(A.hasAspect(H4.Aspect.MUST_SELECT_SAME_SERVER))J=JL.sameServerSelector(A.server?.description);else if(A.trySecondaryWrite)J=JL.secondaryWritableServerSelector(F.commonWireVersion,$);else J=$;let X=await F.selectServer(J,{session:D,operationName:A.commandName,timeoutContext:B,signal:A.options.signal}),E=A.hasAspect(H4.Aspect.READ_OPERATION),Y=A.hasAspect(H4.Aspect.WRITE_OPERATION),G=D?.inTransaction()??!1,H=F.s.options.retryReads&&!G&&A.canRetryRead,W=F.s.options.retryWrites&&!G&&RY.supportsRetryableWrites(X)&&A.canRetryWrite,q=A.hasAspect(H4.Aspect.RETRYABLE)&&D!=null&&(E&&H||Y&&W);if(Y&&W&&D!=null)A.options.willRetryWrite=!0,D.incrementTransactionNumber();let C=q?B.csotEnabled()?1/0:2:1,Q,K;for(let U=0;U<C;U++){if(Q){if(Y&&Q.code===Ee)throw new j2.MongoServerError({message:XL,errmsg:XL,originalError:Q});if(A.hasAspect(H4.Aspect.COMMAND_BATCHING)&&!A.canRetryWrite)throw Q;if(Y&&!j2.isRetryableWriteError(Q))throw Q;if(E&&!j2.isRetryableReadError(Q))throw Q;if(Q instanceof j2.MongoNetworkError&&A.hasAspect(H4.Aspect.CURSOR_CREATING)&&D!=null&&D.isPinned&&!D.inTransaction())D.unpin({force:!0,forceClear:!0});if(X=await F.selectServer(J,{session:D,operationName:A.commandName,previousServer:K,signal:A.options.signal}),Y&&!RY.supportsRetryableWrites(X))throw new j2.MongoUnexpectedServerResponseError("Selected server does not support retryable writes")}try{if(U>0&&A.hasAspect(H4.Aspect.COMMAND_BATCHING))A.resetBatch();return await A.execute(X,D,B)}catch(Z){if(!(Z instanceof j2.MongoError))throw Z;if(Q!=null&&Z.hasErrorLabel(j2.MongoErrorLabel.NoWritesPerformed))throw Q;K=X.description,Q=Z,B.clear()}}throw Q??new j2.MongoRuntimeError("Tried to propagate retryability error, but no error was found.")}});var IY=z((YL)=>{Object.defineProperty(YL,"__esModule",{value:!0});YL.GetMoreOperation=void 0;var qe=Q3(),NY=s(),Ce=F1(),JD=c1();class PY extends JD.AbstractOperation{constructor(A,F,B,D){super(D);this.options=D,this.ns=A,this.cursorId=F,this.server=B}get commandName(){return"getMore"}async execute(A,F,B){if(A!==this.server)throw new NY.MongoRuntimeError("Getmore must run on the same server operation began on");if(this.cursorId==null||this.cursorId.isZero())throw new NY.MongoRuntimeError("Unable to iterate cursor with no id");let D=this.ns.collection;if(D==null)throw new NY.MongoRuntimeError("A collection name must be determined before getMore");let $={getMore:this.cursorId,collection:D};if(typeof this.options.batchSize==="number")$.batchSize=Math.abs(this.options.batchSize);if(typeof this.options.maxAwaitTimeMS==="number")$.maxTimeMS=this.options.maxAwaitTimeMS;if(this.options.comment!==void 0&&Ce.maxWireVersion(A)>=9)$.comment=this.options.comment;let J={returnFieldSelector:null,documentsReturnedIn:"nextBatch",timeoutContext:B,...this.options};return await A.command(this.ns,$,J,qe.CursorResponse)}}YL.GetMoreOperation=PY;JD.defineAspects(PY,[JD.Aspect.READ_OPERATION,JD.Aspect.MUST_SELECT_SAME_SERVER])});var CL=z((WL)=>{Object.defineProperty(WL,"__esModule",{value:!0});WL.KillCursorsOperation=void 0;var HL=s(),Qe=F1(),MY=c1();class jY extends MY.AbstractOperation{constructor(A,F,B,D){super(D);this.ns=F,this.cursorId=A,this.server=B}get commandName(){return"killCursors"}async execute(A,F,B){if(A!==this.server)throw new HL.MongoRuntimeError("Killcursor must run on the same server operation began on");let D=this.ns.collection;if(D==null)throw new HL.MongoRuntimeError("A collection name must be determined before killCursors");let $={killCursors:D,cursors:[this.cursorId]};try{await A.command(this.ns,$,{session:F,timeoutContext:B})}catch(J){Qe.squashError(J)}}}WL.KillCursorsOperation=jY;MY.defineAspects(jY,[MY.Aspect.MUST_SELECT_SAME_SERVER])});var TY=z((zL)=>{Object.defineProperty(zL,"__esModule",{value:!0});zL.OrderedBulkOperation=void 0;var Ke=y1(),QL=s(),XD=G8();class KL extends XD.BulkOperationBase{constructor(A,F){super(A,F,!0)}addToOperationsList(A,F){let B=Ke.calculateObjectSize(F,{checkKeys:!1,ignoreUndefined:!1});if(B>=this.s.maxBsonObjectSize)throw new QL.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);if(this.s.currentBatch==null)this.s.currentBatch=new XD.Batch(A,this.s.currentIndex);let D=this.s.maxKeySize;if(this.s.currentBatchSize+1>=this.s.maxWriteBatchSize||this.s.currentBatchSize>0&&this.s.currentBatchSizeBytes+D+B>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==A)this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new XD.Batch(A,this.s.currentIndex),this.s.currentBatchSize=0,this.s.currentBatchSizeBytes=0;if(A===XD.BatchType.INSERT)this.s.bulkResult.insertedIds.push({index:this.s.currentIndex,_id:F._id});if(Array.isArray(F))throw new QL.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentBatch.operations.push(F),this.s.currentBatchSize+=1,this.s.currentBatchSizeBytes+=D+B,this.s.currentIndex+=1,this}}zL.OrderedBulkOperation=KL});var kY=z((wL)=>{Object.defineProperty(wL,"__esModule",{value:!0});wL.UnorderedBulkOperation=void 0;var ze=y1(),ZL=s(),W4=G8();class VL extends W4.BulkOperationBase{constructor(A,F){super(A,F,!1)}handleWriteError(A){if(this.s.batches.length)return;return super.handleWriteError(A)}addToOperationsList(A,F){let B=ze.calculateObjectSize(F,{checkKeys:!1,ignoreUndefined:!1});if(B>=this.s.maxBsonObjectSize)throw new ZL.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);if(this.s.currentBatch=void 0,A===W4.BatchType.INSERT)this.s.currentBatch=this.s.currentInsertBatch;else if(A===W4.BatchType.UPDATE)this.s.currentBatch=this.s.currentUpdateBatch;else if(A===W4.BatchType.DELETE)this.s.currentBatch=this.s.currentRemoveBatch;let D=this.s.maxKeySize;if(this.s.currentBatch==null)this.s.currentBatch=new W4.Batch(A,this.s.currentIndex);if(this.s.currentBatch.size+1>=this.s.maxWriteBatchSize||this.s.currentBatch.size>0&&this.s.currentBatch.sizeBytes+D+B>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==A)this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new W4.Batch(A,this.s.currentIndex);if(Array.isArray(F))throw new ZL.MongoInvalidArgumentError("Operation passed in cannot be an Array");if(this.s.currentBatch.operations.push(F),this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentIndex=this.s.currentIndex+1,A===W4.BatchType.INSERT)this.s.currentInsertBatch=this.s.currentBatch,this.s.bulkResult.insertedIds.push({index:this.s.bulkResult.insertedIds.length,_id:F._id});else if(A===W4.BatchType.UPDATE)this.s.currentUpdateBatch=this.s.currentBatch;else if(A===W4.BatchType.DELETE)this.s.currentRemoveBatch=this.s.currentBatch;return this.s.currentBatch.size+=1,this.s.currentBatch.sizeBytes+=D+B,this}}wL.UnorderedBulkOperation=VL});var uY=z((PL)=>{Object.defineProperty(PL,"__esModule",{value:!0});PL.AggregateOperation=PL.DB_AGGREGATE_COLLECTION=void 0;var RL=Q3(),NL=s(),Ue=F1(),Ze=P2(),Ve=O0(),UA=c1();PL.DB_AGGREGATE_COLLECTION=1;var we=8;class OY extends Ve.CommandOperation{constructor(A,F,B){super(void 0,{...B,dbName:A.db});if(this.options={...B},this.target=A.collection||PL.DB_AGGREGATE_COLLECTION,this.pipeline=F,this.hasWriteStage=!1,typeof B?.out==="string")this.pipeline=this.pipeline.concat({$out:B.out}),this.hasWriteStage=!0;else if(F.length>0){let D=F[F.length-1];if(D.$out||D.$merge)this.hasWriteStage=!0}if(this.hasWriteStage)this.trySecondaryWrite=!0;else delete this.options.writeConcern;if(this.explain&&this.writeConcern)throw new NL.MongoInvalidArgumentError('Option "explain" cannot be used on an aggregate call with writeConcern');if(B?.cursor!=null&&typeof B.cursor!=="object")throw new NL.MongoInvalidArgumentError("Cursor options must be an object")}get commandName(){return"aggregate"}get canRetryRead(){return!this.hasWriteStage}addToPipeline(A){this.pipeline.push(A)}async execute(A,F,B){let D=this.options,$=Ue.maxWireVersion(A),J={aggregate:this.target,pipeline:this.pipeline};if(this.hasWriteStage&&$<we)this.readConcern=void 0;if(this.hasWriteStage&&this.writeConcern)Ze.WriteConcern.apply(J,this.writeConcern);if(D.bypassDocumentValidation===!0)J.bypassDocumentValidation=D.bypassDocumentValidation;if(typeof D.allowDiskUse==="boolean")J.allowDiskUse=D.allowDiskUse;if(D.hint)J.hint=D.hint;if(D.let)J.let=D.let;if(D.comment!==void 0)J.comment=D.comment;if(J.cursor=D.cursor||{},D.batchSize&&!this.hasWriteStage)J.cursor.batchSize=D.batchSize;return await super.executeCommand(A,F,J,B,this.explain?RL.ExplainedCursorResponse:RL.CursorResponse)}}PL.AggregateOperation=OY;UA.defineAspects(OY,[UA.Aspect.READ_OPERATION,UA.Aspect.RETRYABLE,UA.Aspect.EXPLAINABLE,UA.Aspect.CURSOR_CREATING])});var ZA=z((OL)=>{Object.defineProperty(OL,"__esModule",{value:!0});OL.AggregationCursor=void 0;var SY=s(),fY=F7(),jL=uY(),TL=T2(),Le=F1(),kL=k2();class _Y extends fY.ExplainableCursor{constructor(A,F,B=[],D={}){super(A,F,D);this.pipeline=B,this.aggregateOptions=D;let $=this.pipeline[this.pipeline.length-1];if(this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===kL.CursorTimeoutMode.ITERATION&&($?.$merge!=null||$?.$out!=null))throw new SY.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode")}clone(){let A=Le.mergeOptions({},this.aggregateOptions);return delete A.session,new _Y(this.client,this.namespace,this.pipeline,{...A})}map(A){return super.map(A)}async _initialize(A){let F={...this.aggregateOptions,...this.cursorOptions,session:A,signal:this.signal};if(F.explain)try{fY.validateExplainTimeoutOptions(F,fY.Explain.fromOptions(F))}catch{throw new SY.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in aggregateOptions")}let B=new jL.AggregateOperation(this.namespace,this.pipeline,F),D=await TL.executeOperation(this.client,B,this.timeoutContext);return{server:B.server,session:A,response:D}}async explain(A,F){let{explain:B,timeout:D}=this.resolveExplainTimeoutOptions(A,F);return(await TL.executeOperation(this.client,new jL.AggregateOperation(this.namespace,this.pipeline,{...this.aggregateOptions,...this.cursorOptions,...D,explain:B??!0}))).shift(this.deserializationOptions)}addStage(A){if(this.throwIfInitialized(),this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===kL.CursorTimeoutMode.ITERATION&&(A.$out!=null||A.$merge!=null))throw new SY.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode");return this.pipeline.push(A),this}group(A){return this.addStage({$group:A})}limit(A){return this.addStage({$limit:A})}match(A){return this.addStage({$match:A})}out(A){return this.addStage({$out:A})}project(A){return this.addStage({$project:A})}lookup(A){return this.addStage({$lookup:A})}redact(A){return this.addStage({$redact:A})}skip(A){return this.addStage({$skip:A})}sort(A){return this.addStage({$sort:A})}unwind(A){return this.addStage({$unwind:A})}geoNear(A){return this.addStage({$geoNear:A})}}OL.AggregationCursor=_Y});var bY=z((SL)=>{Object.defineProperty(SL,"__esModule",{value:!0});SL.CountOperation=void 0;var Re=O0(),xY=c1();class gY extends Re.CommandOperation{constructor(A,F,B){super({s:{namespace:A}},B);this.options=B,this.collectionName=A.collection,this.query=F}get commandName(){return"count"}async execute(A,F,B){let D=this.options,$={count:this.collectionName,query:this.query};if(typeof D.limit==="number")$.limit=D.limit;if(typeof D.skip==="number")$.skip=D.skip;if(D.hint!=null)$.hint=D.hint;if(typeof D.maxTimeMS==="number")$.maxTimeMS=D.maxTimeMS;let J=await super.executeCommand(A,F,$,B);return J?J.n:0}}SL.CountOperation=gY;xY.defineAspects(gY,[xY.Aspect.READ_OPERATION,xY.Aspect.RETRYABLE])});var W8=z((xL)=>{Object.defineProperty(xL,"__esModule",{value:!0});xL.formatSort=fe;var _L=s();function H8(A=1){let F=`${A}`.toLowerCase();if(Ne(A))return A;switch(F){case"ascending":case"asc":case"1":return 1;case"descending":case"desc":case"-1":return-1;default:throw new _L.MongoInvalidArgumentError(`Invalid sort direction: ${JSON.stringify(A)}`)}}function Ne(A){return typeof A==="object"&&A!=null&&"$meta"in A&&typeof A.$meta==="string"}function Pe(A){if(Array.isArray(A)&&A.length===2)try{return H8(A[1]),!0}catch{return!1}return!1}function Ie(A){return Array.isArray(A)&&Array.isArray(A[0])}function Me(A){return A instanceof Map&&A.size>0}function je(A){return Array.isArray(A)}function Te(A){return new Map([[`${A[0]}`,H8([A[1]])]])}function ke(A){let F=A.map(([B,D])=>[`${B}`,H8(D)]);return new Map(F)}function Oe(A){let F=A.map((B)=>[`${B}`,1]);return new Map(F)}function ue(A){let F=Object.entries(A).map(([B,D])=>[`${B}`,H8(D)]);return new Map(F)}function Se(A){let F=Array.from(A).map(([B,D])=>[`${B}`,H8(D)]);return new Map(F)}function fe(A,F){if(A==null)return;if(typeof A==="string")return new Map([[A,H8(F)]]);if(typeof A!=="object")throw new _L.MongoInvalidArgumentError(`Invalid sort format: ${JSON.stringify(A)} Sort must be a valid object`);if(!je(A)){if(Me(A))return Se(A);if(Object.keys(A).length)return ue(A);return}if(!A.length)return;if(Ie(A))return ke(A);if(Pe(A))return Te(A);return Oe(A)}});var vL=z((yL)=>{Object.defineProperty(yL,"__esModule",{value:!0});yL.FindOperation=void 0;var gL=Q3(),xe=s(),bL=F7(),ge=c6(),be=W8(),ye=F1(),he=O0(),VA=c1();class yY extends he.CommandOperation{constructor(A,F={},B={}){super(void 0,B);if(this.options={...B},delete this.options.writeConcern,this.ns=A,typeof F!=="object"||Array.isArray(F))throw new xe.MongoInvalidArgumentError("Query filter must be a plain object or ObjectId");this.filter=F!=null&&F._bsontype==="ObjectId"?{_id:F}:F}get commandName(){return"find"}async execute(A,F,B){this.server=A;let D=this.options,$=ve(this.ns,this.filter,D);if(this.explain)bL.validateExplainTimeoutOptions(this.options,this.explain),$=bL.decorateWithExplain($,this.explain);return await A.command(this.ns,$,{...this.options,...this.bsonOptions,documentsReturnedIn:"firstBatch",session:F,timeoutContext:B},this.explain?gL.ExplainedCursorResponse:gL.CursorResponse)}}yL.FindOperation=yY;function ve(A,F,B){let D={find:A.collection,filter:F};if(B.sort)D.sort=be.formatSort(B.sort);if(B.projection){let J=B.projection;if(J&&Array.isArray(J))J=J.length?J.reduce((X,E)=>{return X[E]=1,X},{}):{_id:1};D.projection=J}if(B.hint)D.hint=ye.normalizeHintField(B.hint);if(typeof B.skip==="number")D.skip=B.skip;if(typeof B.limit==="number")if(B.limit<0)D.limit=-B.limit,D.singleBatch=!0;else D.limit=B.limit;if(typeof B.batchSize==="number")if(B.batchSize<0){if(B.limit&&B.limit!==0&&Math.abs(B.batchSize)<Math.abs(B.limit))D.limit=-B.batchSize;D.singleBatch=!0}else D.batchSize=B.batchSize;if(typeof B.singleBatch==="boolean")D.singleBatch=B.singleBatch;if(B.comment!==void 0)D.comment=B.comment;if(typeof B.maxTimeMS==="number")D.maxTimeMS=B.maxTimeMS;let $=ge.ReadConcern.fromOptions(B);if($)D.readConcern=$.toJSON();if(B.max)D.max=B.max;if(B.min)D.min=B.min;if(typeof B.returnKey==="boolean")D.returnKey=B.returnKey;if(typeof B.showRecordId==="boolean")D.showRecordId=B.showRecordId;if(typeof B.tailable==="boolean")D.tailable=B.tailable;if(typeof B.oplogReplay==="boolean")D.oplogReplay=B.oplogReplay;if(typeof B.timeout==="boolean")D.noCursorTimeout=!B.timeout;else if(typeof B.noCursorTimeout==="boolean")D.noCursorTimeout=B.noCursorTimeout;if(typeof B.awaitData==="boolean")D.awaitData=B.awaitData;if(typeof B.allowPartialResults==="boolean")D.allowPartialResults=B.allowPartialResults;if(B.collation)D.collation=B.collation;if(typeof B.allowDiskUse==="boolean")D.allowDiskUse=B.allowDiskUse;if(B.let)D.let=B.let;return D}VA.defineAspects(yY,[VA.Aspect.READ_OPERATION,VA.Aspect.RETRYABLE,VA.Aspect.EXPLAINABLE,VA.Aspect.CURSOR_CREATING])});var cY=z((dL)=>{Object.defineProperty(dL,"__esModule",{value:!0});dL.FindCursor=dL.FLAGS=void 0;var me=Q3(),p6=s(),hY=F7(),de=bY(),vY=T2(),mL=vL(),mY=W8(),dY=F1();dL.FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];class lY extends hY.ExplainableCursor{constructor(A,F,B={},D={}){super(A,F,D);if(this.numReturned=0,this.cursorFilter=B,this.findOptions=D,D.sort!=null)this.findOptions.sort=mY.formatSort(D.sort)}clone(){let A=dY.mergeOptions({},this.findOptions);return delete A.session,new lY(this.client,this.namespace,this.cursorFilter,{...A})}map(A){return super.map(A)}async _initialize(A){let F={...this.findOptions,...this.cursorOptions,session:A,signal:this.signal};if(F.explain)try{hY.validateExplainTimeoutOptions(F,hY.Explain.fromOptions(F))}catch{throw new p6.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in findOptions")}let B=new mL.FindOperation(this.namespace,this.cursorFilter,F),D=await vY.executeOperation(this.client,B,this.timeoutContext);return this.numReturned=D.batchSize,{server:B.server,session:A,response:D}}async getMore(A){let F=this.numReturned;if(F){let D=this.findOptions.limit;if(A=D&&D>0&&F+A>D?D-F:A,A<=0){try{await this.close()}catch($){dY.squashError($)}return me.CursorResponse.emptyGetMore}}let B=await super.getMore(A);return this.numReturned=this.numReturned+B.batchSize,B}async count(A){if(dY.emitWarningOnce("cursor.count is deprecated and will be removed in the next major version, please use `collection.estimatedDocumentCount` or `collection.countDocuments` instead "),typeof A==="boolean")throw new p6.MongoInvalidArgumentError("Invalid first parameter to count");return await vY.executeOperation(this.client,new de.CountOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...A}))}async explain(A,F){let{explain:B,timeout:D}=this.resolveExplainTimeoutOptions(A,F);return(await vY.executeOperation(this.client,new mL.FindOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...D,explain:B??!0}))).shift(this.deserializationOptions)}filter(A){return this.throwIfInitialized(),this.cursorFilter=A,this}hint(A){return this.throwIfInitialized(),this.findOptions.hint=A,this}min(A){return this.throwIfInitialized(),this.findOptions.min=A,this}max(A){return this.throwIfInitialized(),this.findOptions.max=A,this}returnKey(A){return this.throwIfInitialized(),this.findOptions.returnKey=A,this}showRecordId(A){return this.throwIfInitialized(),this.findOptions.showRecordId=A,this}addQueryModifier(A,F){if(this.throwIfInitialized(),A[0]!=="$")throw new p6.MongoInvalidArgumentError(`${A} is not a valid query modifier`);switch(A.substr(1)){case"comment":this.findOptions.comment=F;break;case"explain":this.findOptions.explain=F;break;case"hint":this.findOptions.hint=F;break;case"max":this.findOptions.max=F;break;case"maxTimeMS":this.findOptions.maxTimeMS=F;break;case"min":this.findOptions.min=F;break;case"orderby":this.findOptions.sort=mY.formatSort(F);break;case"query":this.cursorFilter=F;break;case"returnKey":this.findOptions.returnKey=F;break;case"showDiskLoc":this.findOptions.showRecordId=F;break;default:throw new p6.MongoInvalidArgumentError(`Invalid query modifier: ${A}`)}return this}comment(A){return this.throwIfInitialized(),this.findOptions.comment=A,this}maxAwaitTimeMS(A){if(this.throwIfInitialized(),typeof A!=="number")throw new p6.MongoInvalidArgumentError("Argument for maxAwaitTimeMS must be a number");return this.findOptions.maxAwaitTimeMS=A,this}maxTimeMS(A){if(this.throwIfInitialized(),typeof A!=="number")throw new p6.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.findOptions.maxTimeMS=A,this}project(A){return this.throwIfInitialized(),this.findOptions.projection=A,this}sort(A,F){if(this.throwIfInitialized(),this.findOptions.tailable)throw new p6.MongoTailableCursorError("Tailable cursor does not support sorting");return this.findOptions.sort=mY.formatSort(A,F),this}allowDiskUse(A=!0){if(this.throwIfInitialized(),!this.findOptions.sort)throw new p6.MongoInvalidArgumentError('Option "allowDiskUse" requires a sort specification');if(!A)return this.findOptions.allowDiskUse=!1,this;return this.findOptions.allowDiskUse=!0,this}collation(A){return this.throwIfInitialized(),this.findOptions.collation=A,this}limit(A){if(this.throwIfInitialized(),this.findOptions.tailable)throw new p6.MongoTailableCursorError("Tailable cursor does not support limit");if(typeof A!=="number")throw new p6.MongoInvalidArgumentError('Operation "limit" requires an integer');return this.findOptions.limit=A,this}skip(A){if(this.throwIfInitialized(),this.findOptions.tailable)throw new p6.MongoTailableCursorError("Tailable cursor does not support skip");if(typeof A!=="number")throw new p6.MongoInvalidArgumentError('Operation "skip" requires an integer');return this.findOptions.skip=A,this}}dL.FindCursor=lY});var LA=z((cL)=>{Object.defineProperty(cL,"__esModule",{value:!0});cL.ListIndexesOperation=cL.DropIndexOperation=cL.CreateIndexesOperation=void 0;var ce=Q3(),pe=s(),pY=F1(),iY=O0(),r4=c1(),ie=new Set(["background","unique","name","partialFilterExpression","sparse","hidden","expireAfterSeconds","storageEngine","collation","version","weights","default_language","language_override","textIndexVersion","2dsphereIndexVersion","bits","min","max","bucketSize","wildcardProjection"]);function ne(A){return typeof A==="number"||A==="2d"||A==="2dsphere"||A==="text"||A==="geoHaystack"}function se(A){return Array.isArray(A)&&A.length===2&&ne(A[1])}function ae(A){let F=new Map,B=!Array.isArray(A)||se(A)?[A]:A;for(let D of B)if(typeof D==="string")F.set(D,1);else if(Array.isArray(D))F.set(D[0],D[1]??1);else if(D instanceof Map)for(let[$,J]of D)F.set($,J);else if(pY.isObject(D))for(let[$,J]of Object.entries(D))F.set($,J);return F}function re(A){let F=Object.entries(A).filter(([B])=>ie.has(B));return Object.fromEntries(F.map(([B,D])=>B==="version"?["v",D]:[B,D]))}class wA extends iY.CommandOperation{constructor(A,F,B,D){super(A,D);this.options=D??{},this.collectionName=F,this.indexes=B.map(($)=>{let J=$.key instanceof Map?$.key:new Map(Object.entries($.key)),X=$.name??Array.from(J).flat().join("_");return{...re($),name:X,key:J}})}static fromIndexDescriptionArray(A,F,B,D){return new wA(A,F,B,D)}static fromIndexSpecification(A,F,B,D={}){let $=ae(B),J={...D,key:$};return new wA(A,F,[J],D)}get commandName(){return"createIndexes"}async execute(A,F,B){let D=this.options,$=this.indexes,J=pY.maxWireVersion(A),X={createIndexes:this.collectionName,indexes:$};if(D.commitQuorum!=null){if(J<9)throw new pe.MongoCompatibilityError("Option `commitQuorum` for `createIndexes` not supported on servers < 4.4");X.commitQuorum=D.commitQuorum}return this.options.collation=void 0,await super.executeCommand(A,F,X,B),$.map((Y)=>Y.name||"")}}cL.CreateIndexesOperation=wA;class nY extends iY.CommandOperation{constructor(A,F,B){super(A,B);this.options=B??{},this.collection=A,this.indexName=F}get commandName(){return"dropIndexes"}async execute(A,F,B){let D={dropIndexes:this.collection.collectionName,index:this.indexName};return await super.executeCommand(A,F,D,B)}}cL.DropIndexOperation=nY;class sY extends iY.CommandOperation{constructor(A,F){super(A,F);this.options={...F},delete this.options.writeConcern,this.collectionNamespace=A.s.namespace}get commandName(){return"listIndexes"}async execute(A,F,B){let D=pY.maxWireVersion(A),$=this.options.batchSize?{batchSize:this.options.batchSize}:{},J={listIndexes:this.collectionNamespace.collection,cursor:$};if(D>=9&&this.options.comment!==void 0)J.comment=this.options.comment;return await super.executeCommand(A,F,J,B,ce.CursorResponse)}}cL.ListIndexesOperation=sY;r4.defineAspects(sY,[r4.Aspect.READ_OPERATION,r4.Aspect.RETRYABLE,r4.Aspect.CURSOR_CREATING]);r4.defineAspects(wA,[r4.Aspect.WRITE_OPERATION]);r4.defineAspects(nY,[r4.Aspect.WRITE_OPERATION])});var rY=z((iL)=>{Object.defineProperty(iL,"__esModule",{value:!0});iL.ListIndexesCursor=void 0;var ee=T2(),A11=LA(),F11=k2();class aY extends F11.AbstractCursor{constructor(A,F){super(A.client,A.s.namespace,F);this.parent=A,this.options=F}clone(){return new aY(this.parent,{...this.options,...this.cursorOptions})}async _initialize(A){let F=new A11.ListIndexesOperation(this.parent,{...this.cursorOptions,...this.options,session:A}),B=await ee.executeOperation(this.parent.client,F,this.timeoutContext);return{server:F.server,session:A,response:B}}}iL.ListIndexesCursor=aY});var tL=z((aL)=>{Object.defineProperty(aL,"__esModule",{value:!0});aL.ListSearchIndexesCursor=void 0;var B11=ZA();class sL extends B11.AggregationCursor{constructor({fullNamespace:A,client:F},B,D={}){let $=B==null?[{$listSearchIndexes:{}}]:[{$listSearchIndexes:{name:B}}];super(F,A,$,D)}}aL.ListSearchIndexesCursor=sL});var eY=z((oL)=>{Object.defineProperty(oL,"__esModule",{value:!0});oL.BulkWriteOperation=void 0;var tY=c1();class oY extends tY.AbstractOperation{constructor(A,F,B){super(B);this.options=B,this.collection=A,this.operations=F}get commandName(){return"bulkWrite"}async execute(A,F,B){let D=this.collection,$=this.operations,J={...this.options,...this.bsonOptions,readPreference:this.readPreference,timeoutContext:B},X=J.ordered===!1?D.initializeUnorderedBulkOp(J):D.initializeOrderedBulkOp(J);for(let E=0;E<$.length;E++)X.raw($[E]);return await X.execute({...J,session:F})}}oL.BulkWriteOperation=oY;tY.defineAspects(oY,[tY.Aspect.WRITE_OPERATION])});var DR=z((FR)=>{Object.defineProperty(FR,"__esModule",{value:!0});FR.DistinctOperation=void 0;var AR=F1(),D11=O0(),ED=c1();class AG extends D11.CommandOperation{constructor(A,F,B,D){super(A,D);this.options=D??{},this.collection=A,this.key=F,this.query=B}get commandName(){return"distinct"}async execute(A,F,B){let D=this.collection,$=this.key,J=this.query,X=this.options,E={distinct:D.collectionName,key:$,query:J};if(typeof X.maxTimeMS==="number")E.maxTimeMS=X.maxTimeMS;if(typeof X.comment!=="undefined")E.comment=X.comment;if(X.hint!=null)E.hint=X.hint;AR.decorateWithReadConcern(E,D,X),AR.decorateWithCollation(E,D,X);let Y=await super.executeCommand(A,F,E,B);return this.explain?Y:Y.values}}FR.DistinctOperation=AG;ED.defineAspects(AG,[ED.Aspect.READ_OPERATION,ED.Aspect.RETRYABLE,ED.Aspect.EXPLAINABLE])});var BG=z((XR)=>{Object.defineProperty(XR,"__esModule",{value:!0});XR.DropDatabaseOperation=XR.DropCollectionOperation=void 0;var $R=s(),JR=O0(),YD=c1();class GD extends JR.CommandOperation{constructor(A,F,B={}){super(A,B);this.db=A,this.options=B,this.name=F}get commandName(){return"drop"}async execute(A,F,B){let D=this.db,$=this.options,J=this.name,X=D.client.s.options.autoEncryption?.encryptedFieldsMap,E=$.encryptedFields??X?.[`${D.databaseName}.${J}`];if(!E&&X)E=(await D.listCollections({name:J},{nameOnly:!1}).toArray())?.[0]?.options?.encryptedFields;if(E){let Y=E.escCollection||`enxcol_.${J}.esc`,G=E.ecocCollection||`enxcol_.${J}.ecoc`;for(let H of[Y,G]){let W=new GD(D,H);try{await W.executeWithoutEncryptedFieldsCheck(A,F,B)}catch(q){if(!(q instanceof $R.MongoServerError)||q.code!==$R.MONGODB_ERROR_CODES.NamespaceNotFound)throw q}}}return await this.executeWithoutEncryptedFieldsCheck(A,F,B)}async executeWithoutEncryptedFieldsCheck(A,F,B){return await super.executeCommand(A,F,{drop:this.name},B),!0}}XR.DropCollectionOperation=GD;class FG extends JR.CommandOperation{constructor(A,F){super(A,F);this.options=F}get commandName(){return"dropDatabase"}async execute(A,F,B){return await super.executeCommand(A,F,{dropDatabase:1},B),!0}}XR.DropDatabaseOperation=FG;YD.defineAspects(GD,[YD.Aspect.WRITE_OPERATION]);YD.defineAspects(FG,[YD.Aspect.WRITE_OPERATION])});var HR=z((YR)=>{Object.defineProperty(YR,"__esModule",{value:!0});YR.EstimatedDocumentCountOperation=void 0;var J11=O0(),HD=c1();class DG extends J11.CommandOperation{constructor(A,F={}){super(A,F);this.options=F,this.collectionName=A.collectionName}get commandName(){return"count"}async execute(A,F,B){let D={count:this.collectionName};if(typeof this.options.maxTimeMS==="number")D.maxTimeMS=this.options.maxTimeMS;if(this.options.comment!==void 0)D.comment=this.options.comment;return(await super.executeCommand(A,F,D,B))?.n||0}}YR.EstimatedDocumentCountOperation=DG;HD.defineAspects(DG,[HD.Aspect.READ_OPERATION,HD.Aspect.RETRYABLE,HD.Aspect.CURSOR_CREATING])});var $G=z((KR)=>{Object.defineProperty(KR,"__esModule",{value:!0});KR.FindOneAndUpdateOperation=KR.FindOneAndReplaceOperation=KR.FindOneAndDeleteOperation=KR.FindAndModifyOperation=KR.ReturnDocument=void 0;var t4=s(),X11=t0(),E11=W8(),qD=F1(),Y11=O0(),WD=c1();KR.ReturnDocument=Object.freeze({BEFORE:"before",AFTER:"after"});function WR(A,F){if(A.new=F.returnDocument===KR.ReturnDocument.AFTER,A.upsert=F.upsert===!0,F.bypassDocumentValidation===!0)A.bypassDocumentValidation=F.bypassDocumentValidation;return A}class q8 extends Y11.CommandOperation{constructor(A,F,B){super(A,B);this.options=B??{},this.cmdBase={remove:!1,new:!1,upsert:!1},B.includeResultMetadata??=!1;let D=E11.formatSort(B.sort);if(D)this.cmdBase.sort=D;if(B.projection)this.cmdBase.fields=B.projection;if(B.maxTimeMS)this.cmdBase.maxTimeMS=B.maxTimeMS;if(B.writeConcern)this.cmdBase.writeConcern=B.writeConcern;if(B.let)this.cmdBase.let=B.let;if(B.comment!==void 0)this.cmdBase.comment=B.comment;this.readPreference=X11.ReadPreference.primary,this.collection=A,this.query=F}get commandName(){return"findAndModify"}async execute(A,F,B){let D=this.collection,$=this.query,J={...this.options,...this.bsonOptions},X={findAndModify:D.collectionName,query:$,...this.cmdBase};if(qD.decorateWithCollation(X,D,J),J.hint){if(this.writeConcern?.w===0||qD.maxWireVersion(A)<8)throw new t4.MongoCompatibilityError("The current topology does not support a hint on findAndModify commands");X.hint=J.hint}let E=await super.executeCommand(A,F,X,B);return J.includeResultMetadata?E:E.value??null}}KR.FindAndModifyOperation=q8;class qR extends q8{constructor(A,F,B){if(F==null||typeof F!=="object")throw new t4.MongoInvalidArgumentError('Argument "filter" must be an object');super(A,F,B);this.cmdBase.remove=!0}}KR.FindOneAndDeleteOperation=qR;class CR extends q8{constructor(A,F,B,D){if(F==null||typeof F!=="object")throw new t4.MongoInvalidArgumentError('Argument "filter" must be an object');if(B==null||typeof B!=="object")throw new t4.MongoInvalidArgumentError('Argument "replacement" must be an object');if(qD.hasAtomicOperators(B))throw new t4.MongoInvalidArgumentError("Replacement document must not contain atomic operators");super(A,F,D);this.cmdBase.update=B,WR(this.cmdBase,D)}}KR.FindOneAndReplaceOperation=CR;class QR extends q8{constructor(A,F,B,D){if(F==null||typeof F!=="object")throw new t4.MongoInvalidArgumentError('Argument "filter" must be an object');if(B==null||typeof B!=="object")throw new t4.MongoInvalidArgumentError('Argument "update" must be an object');if(!qD.hasAtomicOperators(B,D))throw new t4.MongoInvalidArgumentError("Update document requires atomic operators");super(A,F,D);if(this.cmdBase.update=B,WR(this.cmdBase,D),D.arrayFilters)this.cmdBase.arrayFilters=D.arrayFilters}}KR.FindOneAndUpdateOperation=QR;WD.defineAspects(q8,[WD.Aspect.WRITE_OPERATION,WD.Aspect.RETRYABLE,WD.Aspect.EXPLAINABLE])});var EG=z((ZR)=>{Object.defineProperty(ZR,"__esModule",{value:!0});ZR.InsertManyOperation=ZR.InsertOneOperation=ZR.InsertOperation=void 0;var CD=s(),q11=F1(),C11=P2(),Q11=eY(),K11=O0(),q4=c1();class QD extends K11.CommandOperation{constructor(A,F,B){super(void 0,B);this.options={...B,checkKeys:B.checkKeys??!1},this.ns=A,this.documents=F}get commandName(){return"insert"}async execute(A,F,B){let D=this.options??{},$=typeof D.ordered==="boolean"?D.ordered:!0,J={insert:this.ns.collection,documents:this.documents,ordered:$};if(typeof D.bypassDocumentValidation==="boolean")J.bypassDocumentValidation=D.bypassDocumentValidation;if(D.comment!==void 0)J.comment=D.comment;return await super.executeCommand(A,F,J,B)}}ZR.InsertOperation=QD;class JG extends QD{constructor(A,F,B){super(A.s.namespace,q11.maybeAddIdToDocuments(A,[F],B),B)}async execute(A,F,B){let D=await super.execute(A,F,B);if(D.code)throw new CD.MongoServerError(D);if(D.writeErrors)throw new CD.MongoServerError(D.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,insertedId:this.documents[0]._id}}}ZR.InsertOneOperation=JG;class XG extends q4.AbstractOperation{constructor(A,F,B){super(B);if(!Array.isArray(F))throw new CD.MongoInvalidArgumentError('Argument "docs" must be an array of documents');this.options=B,this.collection=A,this.docs=F}get commandName(){return"insert"}async execute(A,F,B){let D=this.collection,$={...this.options,...this.bsonOptions,readPreference:this.readPreference},J=C11.WriteConcern.fromOptions($),X=new Q11.BulkWriteOperation(D,this.docs.map((E)=>({insertOne:{document:E}})),$);try{let E=await X.execute(A,F,B);return{acknowledged:J?.w!==0,insertedCount:E.insertedCount,insertedIds:E.insertedIds}}catch(E){if(E&&E.message==="Operation must be an object with an operation key")throw new CD.MongoInvalidArgumentError("Collection.insertMany() cannot be called with an array that has null/undefined values");throw E}}}ZR.InsertManyOperation=XG;q4.defineAspects(QD,[q4.Aspect.RETRYABLE,q4.Aspect.WRITE_OPERATION]);q4.defineAspects(JG,[q4.Aspect.RETRYABLE,q4.Aspect.WRITE_OPERATION]);q4.defineAspects(XG,[q4.Aspect.WRITE_OPERATION])});var NR=z((LR)=>{Object.defineProperty(LR,"__esModule",{value:!0});LR.IsCappedOperation=void 0;var Z11=s(),V11=c1();class wR extends V11.AbstractOperation{constructor(A,F){super(F);this.options=F,this.collection=A}get commandName(){return"listCollections"}async execute(A,F){let B=this.collection,[D]=await B.s.db.listCollections({name:B.collectionName},{...this.options,nameOnly:!1,readPreference:this.readPreference,session:F}).toArray();if(D==null||D.options==null)throw new Z11.MongoAPIError(`collection ${B.namespace} not found`);return!!D.options?.capped}}LR.IsCappedOperation=wR});var jR=z((IR)=>{Object.defineProperty(IR,"__esModule",{value:!0});IR.OptionsOperation=void 0;var w11=s(),L11=c1();class PR extends L11.AbstractOperation{constructor(A,F){super(F);this.options=F,this.collection=A}get commandName(){return"listCollections"}async execute(A,F){let B=this.collection,[D]=await B.s.db.listCollections({name:B.collectionName},{...this.options,nameOnly:!1,readPreference:this.readPreference,session:F}).toArray();if(D==null||D.options==null)throw new w11.MongoAPIError(`collection ${B.namespace} not found`);return D.options}}IR.OptionsOperation=PR});var GG=z((kR)=>{Object.defineProperty(kR,"__esModule",{value:!0});kR.RenameOperation=void 0;var R11=B7(),N11=F1(),P11=O0(),TR=c1();class YG extends P11.CommandOperation{constructor(A,F,B){super(A,B);this.collection=A,this.newName=F,this.options=B,this.ns=new N11.MongoDBNamespace("admin","$cmd")}get commandName(){return"renameCollection"}async execute(A,F,B){let D=this.collection.namespace,$=this.collection.s.namespace.withCollection(this.newName).toString(),J=typeof this.options.dropTarget==="boolean"?this.options.dropTarget:!1,X={renameCollection:D,to:$,dropTarget:J};return await super.executeCommand(A,F,X,B),new R11.Collection(this.collection.s.db,this.newName,this.collection.s.options)}}kR.RenameOperation=YG;TR.defineAspects(YG,[TR.Aspect.WRITE_OPERATION])});var _R=z((SR)=>{Object.defineProperty(SR,"__esModule",{value:!0});SR.CreateSearchIndexesOperation=void 0;var I11=c1();class uR extends I11.AbstractOperation{constructor(A,F){super();this.collection=A,this.descriptions=F}get commandName(){return"createSearchIndexes"}async execute(A,F,B){let D=this.collection.fullNamespace,$={createSearchIndexes:D.collection,indexes:this.descriptions};return((await A.command(D,$,{session:F,timeoutContext:B}))?.indexesCreated??[]).map(({name:E})=>E)}}SR.CreateSearchIndexesOperation=uR});var hR=z((bR)=>{Object.defineProperty(bR,"__esModule",{value:!0});bR.DropSearchIndexOperation=void 0;var xR=s(),M11=c1();class gR extends M11.AbstractOperation{constructor(A,F){super();this.collection=A,this.name=F}get commandName(){return"dropSearchIndex"}async execute(A,F,B){let D=this.collection.fullNamespace,$={dropSearchIndex:D.collection};if(typeof this.name==="string")$.name=this.name;try{await A.command(D,$,{session:F,timeoutContext:B})}catch(J){if(!(J instanceof xR.MongoServerError&&J.code===xR.MONGODB_ERROR_CODES.NamespaceNotFound))throw J}}}bR.DropSearchIndexOperation=gR});var lR=z((mR)=>{Object.defineProperty(mR,"__esModule",{value:!0});mR.UpdateSearchIndexOperation=void 0;var j11=c1();class vR extends j11.AbstractOperation{constructor(A,F,B){super();this.collection=A,this.name=F,this.definition=B}get commandName(){return"updateSearchIndex"}async execute(A,F,B){let D=this.collection.fullNamespace,$={updateSearchIndex:D.collection,name:this.name,definition:this.definition};await A.command(D,$,{session:F,timeoutContext:B});return}}mR.UpdateSearchIndexOperation=vR});var QG=z((cR)=>{Object.defineProperty(cR,"__esModule",{value:!0});cR.ReplaceOneOperation=cR.UpdateManyOperation=cR.UpdateOneOperation=cR.UpdateOperation=void 0;cR.makeUpdateStatement=KD;var i6=s(),T11=W8(),HG=F1(),k11=O0(),J2=c1();class C8 extends k11.CommandOperation{constructor(A,F,B){super(void 0,B);this.options=B,this.ns=A,this.statements=F}get commandName(){return"update"}get canRetryWrite(){if(super.canRetryWrite===!1)return!1;return this.statements.every((A)=>A.multi==null||A.multi===!1)}async execute(A,F,B){let D=this.options??{},$=typeof D.ordered==="boolean"?D.ordered:!0,J={update:this.ns.collection,updates:this.statements,ordered:$};if(typeof D.bypassDocumentValidation==="boolean")J.bypassDocumentValidation=D.bypassDocumentValidation;if(D.let)J.let=D.let;if(D.comment!==void 0)J.comment=D.comment;if(this.writeConcern&&this.writeConcern.w===0){if(this.statements.find((Y)=>Y.hint))throw new i6.MongoCompatibilityError("hint is not supported with unacknowledged writes")}return await super.executeCommand(A,F,J,B)}}cR.UpdateOperation=C8;class WG extends C8{constructor(A,F,B,D){super(A.s.namespace,[KD(F,B,{...D,multi:!1})],D);if(!HG.hasAtomicOperators(B,D))throw new i6.MongoInvalidArgumentError("Update document requires atomic operators")}async execute(A,F,B){let D=await super.execute(A,F,B);if(this.explain!=null)return D;if(D.code)throw new i6.MongoServerError(D);if(D.writeErrors)throw new i6.MongoServerError(D.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:D.nModified??D.n,upsertedId:Array.isArray(D.upserted)&&D.upserted.length>0?D.upserted[0]._id:null,upsertedCount:Array.isArray(D.upserted)&&D.upserted.length?D.upserted.length:0,matchedCount:Array.isArray(D.upserted)&&D.upserted.length>0?0:D.n}}}cR.UpdateOneOperation=WG;class qG extends C8{constructor(A,F,B,D){super(A.s.namespace,[KD(F,B,{...D,multi:!0})],D);if(!HG.hasAtomicOperators(B,D))throw new i6.MongoInvalidArgumentError("Update document requires atomic operators")}async execute(A,F,B){let D=await super.execute(A,F,B);if(this.explain!=null)return D;if(D.code)throw new i6.MongoServerError(D);if(D.writeErrors)throw new i6.MongoServerError(D.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:D.nModified??D.n,upsertedId:Array.isArray(D.upserted)&&D.upserted.length>0?D.upserted[0]._id:null,upsertedCount:Array.isArray(D.upserted)&&D.upserted.length?D.upserted.length:0,matchedCount:Array.isArray(D.upserted)&&D.upserted.length>0?0:D.n}}}cR.UpdateManyOperation=qG;class CG extends C8{constructor(A,F,B,D){super(A.s.namespace,[KD(F,B,{...D,multi:!1})],D);if(HG.hasAtomicOperators(B))throw new i6.MongoInvalidArgumentError("Replacement document must not contain atomic operators")}async execute(A,F,B){let D=await super.execute(A,F,B);if(this.explain!=null)return D;if(D.code)throw new i6.MongoServerError(D);if(D.writeErrors)throw new i6.MongoServerError(D.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:D.nModified??D.n,upsertedId:Array.isArray(D.upserted)&&D.upserted.length>0?D.upserted[0]._id:null,upsertedCount:Array.isArray(D.upserted)&&D.upserted.length?D.upserted.length:0,matchedCount:Array.isArray(D.upserted)&&D.upserted.length>0?0:D.n}}}cR.ReplaceOneOperation=CG;function KD(A,F,B){if(A==null||typeof A!=="object")throw new i6.MongoInvalidArgumentError("Selector must be a valid JavaScript object");if(F==null||typeof F!=="object")throw new i6.MongoInvalidArgumentError("Document must be a valid JavaScript object");let D={q:A,u:F};if(typeof B.upsert==="boolean")D.upsert=B.upsert;if(B.multi)D.multi=B.multi;if(B.hint)D.hint=B.hint;if(B.arrayFilters)D.arrayFilters=B.arrayFilters;if(B.collation)D.collation=B.collation;if(!B.multi&&B.sort!=null)D.sort=T11.formatSort(B.sort);return D}J2.defineAspects(C8,[J2.Aspect.RETRYABLE,J2.Aspect.WRITE_OPERATION,J2.Aspect.SKIP_COLLATION]);J2.defineAspects(WG,[J2.Aspect.RETRYABLE,J2.Aspect.WRITE_OPERATION,J2.Aspect.EXPLAINABLE,J2.Aspect.SKIP_COLLATION]);J2.defineAspects(qG,[J2.Aspect.WRITE_OPERATION,J2.Aspect.EXPLAINABLE,J2.Aspect.SKIP_COLLATION]);J2.defineAspects(CG,[J2.Aspect.RETRYABLE,J2.Aspect.WRITE_OPERATION,J2.Aspect.SKIP_COLLATION])});var B7=z((aR)=>{Object.defineProperty(aR,"__esModule",{value:!0});aR.Collection=void 0;var _11=y1(),x11=TY(),g11=kY(),b11=D7(),y11=ZA(),h11=cY(),v11=rY(),m11=tL(),KG=s(),d11=eY(),l11=bY(),iR=VG(),c11=DR(),p11=BG(),i11=HR(),K0=T2(),zG=$G(),zD=LA(),nR=EG(),n11=NR(),s11=jR(),a11=GG(),r11=_R(),t11=hR(),o11=lR(),UG=QG(),e11=c6(),ZG=t0(),i1=F1(),A01=P2();class sR{constructor(A,F,B){this.s={db:A,options:B,namespace:new i1.MongoDBCollectionNamespace(A.databaseName,F),pkFactory:A.options?.pkFactory??i1.DEFAULT_PK_FACTORY,readPreference:ZG.ReadPreference.fromOptions(B),bsonOptions:_11.resolveBSONOptions(B,A),readConcern:e11.ReadConcern.fromOptions(B),writeConcern:A01.WriteConcern.fromOptions(B)},this.client=A.client}get dbName(){return this.s.namespace.db}get collectionName(){return this.s.namespace.collection}get namespace(){return this.fullNamespace.toString()}get fullNamespace(){return this.s.namespace}get readConcern(){if(this.s.readConcern==null)return this.s.db.readConcern;return this.s.readConcern}get readPreference(){if(this.s.readPreference==null)return this.s.db.readPreference;return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){if(this.s.writeConcern==null)return this.s.db.writeConcern;return this.s.writeConcern}get hint(){return this.s.collectionHint}set hint(A){this.s.collectionHint=i1.normalizeHintField(A)}get timeoutMS(){return this.s.options.timeoutMS}async insertOne(A,F){return await K0.executeOperation(this.client,new nR.InsertOneOperation(this,A,i1.resolveOptions(this,F)))}async insertMany(A,F){return await K0.executeOperation(this.client,new nR.InsertManyOperation(this,A,i1.resolveOptions(this,F??{ordered:!0})))}async bulkWrite(A,F){if(!Array.isArray(A))throw new KG.MongoInvalidArgumentError('Argument "operations" must be an array of documents');return await K0.executeOperation(this.client,new d11.BulkWriteOperation(this,A,i1.resolveOptions(this,F??{ordered:!0})))}async updateOne(A,F,B){return await K0.executeOperation(this.client,new UG.UpdateOneOperation(this,A,F,i1.resolveOptions(this,B)))}async replaceOne(A,F,B){return await K0.executeOperation(this.client,new UG.ReplaceOneOperation(this,A,F,i1.resolveOptions(this,B)))}async updateMany(A,F,B){return await K0.executeOperation(this.client,new UG.UpdateManyOperation(this,A,F,i1.resolveOptions(this,B)))}async deleteOne(A={},F={}){return await K0.executeOperation(this.client,new iR.DeleteOneOperation(this,A,i1.resolveOptions(this,F)))}async deleteMany(A={},F={}){return await K0.executeOperation(this.client,new iR.DeleteManyOperation(this,A,i1.resolveOptions(this,F)))}async rename(A,F){return await K0.executeOperation(this.client,new a11.RenameOperation(this,A,i1.resolveOptions(void 0,{...F,readPreference:ZG.ReadPreference.PRIMARY})))}async drop(A){return await K0.executeOperation(this.client,new p11.DropCollectionOperation(this.s.db,this.collectionName,A))}async findOne(A={},F={}){let B=this.find(A,F).limit(-1).batchSize(1),D=await B.next();return await B.close(),D}find(A={},F={}){return new h11.FindCursor(this.client,this.s.namespace,A,i1.resolveOptions(this,F))}async options(A){return await K0.executeOperation(this.client,new s11.OptionsOperation(this,i1.resolveOptions(this,A)))}async isCapped(A){return await K0.executeOperation(this.client,new n11.IsCappedOperation(this,i1.resolveOptions(this,A)))}async createIndex(A,F){return(await K0.executeOperation(this.client,zD.CreateIndexesOperation.fromIndexSpecification(this,this.collectionName,A,i1.resolveOptions(this,F))))[0]}async createIndexes(A,F){return await K0.executeOperation(this.client,zD.CreateIndexesOperation.fromIndexDescriptionArray(this,this.collectionName,A,i1.resolveOptions(this,{...F,maxTimeMS:void 0})))}async dropIndex(A,F){return await K0.executeOperation(this.client,new zD.DropIndexOperation(this,A,{...i1.resolveOptions(this,F),readPreference:ZG.ReadPreference.primary}))}async dropIndexes(A){try{return await K0.executeOperation(this.client,new zD.DropIndexOperation(this,"*",i1.resolveOptions(this,A))),!0}catch(F){if(F instanceof KG.MongoOperationTimeoutError)throw F;return!1}}listIndexes(A){return new v11.ListIndexesCursor(this,i1.resolveOptions(this,A))}async indexExists(A,F){let B=Array.isArray(A)?A:[A],D=new Set(await this.listIndexes(F).map(({name:$})=>$).toArray());return B.every(($)=>D.has($))}async indexInformation(A){return await this.indexes({...A,full:A?.full??!1})}async estimatedDocumentCount(A){return await K0.executeOperation(this.client,new i11.EstimatedDocumentCountOperation(this,i1.resolveOptions(this,A)))}async countDocuments(A={},F={}){let B=[];if(B.push({$match:A}),typeof F.skip==="number")B.push({$skip:F.skip});if(typeof F.limit==="number")B.push({$limit:F.limit});B.push({$group:{_id:1,n:{$sum:1}}});let D=this.aggregate(B,F),$=await D.next();return await D.close(),$?.n??0}async distinct(A,F={},B={}){return await K0.executeOperation(this.client,new c11.DistinctOperation(this,A,F,i1.resolveOptions(this,B)))}async indexes(A){let F=await this.listIndexes(A).toArray();if(A?.full??!0)return F;return Object.fromEntries(F.map(({name:$,key:J})=>[$,Object.entries(J)]))}async findOneAndDelete(A,F){return await K0.executeOperation(this.client,new zG.FindOneAndDeleteOperation(this,A,i1.resolveOptions(this,F)))}async findOneAndReplace(A,F,B){return await K0.executeOperation(this.client,new zG.FindOneAndReplaceOperation(this,A,F,i1.resolveOptions(this,B)))}async findOneAndUpdate(A,F,B){return await K0.executeOperation(this.client,new zG.FindOneAndUpdateOperation(this,A,F,i1.resolveOptions(this,B)))}aggregate(A=[],F){if(!Array.isArray(A))throw new KG.MongoInvalidArgumentError('Argument "pipeline" must be an array of aggregation stages');return new y11.AggregationCursor(this.client,this.s.namespace,A,i1.resolveOptions(this,F))}watch(A=[],F={}){if(!Array.isArray(A))F=A,A=[];return new b11.ChangeStream(this,A,i1.resolveOptions(this,F))}initializeUnorderedBulkOp(A){return new g11.UnorderedBulkOperation(this,i1.resolveOptions(this,A))}initializeOrderedBulkOp(A){return new x11.OrderedBulkOperation(this,i1.resolveOptions(this,A))}async count(A={},F={}){return await K0.executeOperation(this.client,new l11.CountOperation(this.fullNamespace,A,i1.resolveOptions(this,F)))}listSearchIndexes(A,F){F=typeof A==="object"?A:F==null?{}:F;let B=A==null?null:typeof A==="object"?null:A;return new m11.ListSearchIndexesCursor(this,B,F)}async createSearchIndex(A){let[F]=await this.createSearchIndexes([A]);return F}async createSearchIndexes(A){return await K0.executeOperation(this.client,new r11.CreateSearchIndexesOperation(this,A))}async dropSearchIndex(A){return await K0.executeOperation(this.client,new t11.DropSearchIndexOperation(this,A))}async updateSearchIndex(A,F){return await K0.executeOperation(this.client,new o11.UpdateSearchIndexOperation(this,A,F))}}aR.Collection=sR});var NG=z((oR)=>{Object.defineProperty(oR,"__esModule",{value:!0});oR.ChangeStreamCursor=void 0;var wG=D7(),tR=v0(),F01=uY(),B01=T2(),LG=F1(),D01=k2();class RG extends D01.AbstractCursor{constructor(A,F,B=[],D={}){super(A,F,{...D,tailable:!0,awaitData:!0});if(this.pipeline=B,this.changeStreamCursorOptions=D,this._resumeToken=null,this.startAtOperationTime=D.startAtOperationTime??null,D.startAfter)this.resumeToken=D.startAfter;else if(D.resumeAfter)this.resumeToken=D.resumeAfter}set resumeToken(A){this._resumeToken=A,this.emit(wG.ChangeStream.RESUME_TOKEN_CHANGED,A)}get resumeToken(){return this._resumeToken}get resumeOptions(){let A={...this.changeStreamCursorOptions};for(let F of["resumeAfter","startAfter","startAtOperationTime"])delete A[F];if(this.resumeToken!=null)if(this.changeStreamCursorOptions.startAfter&&!this.hasReceived)A.startAfter=this.resumeToken;else A.resumeAfter=this.resumeToken;else if(this.startAtOperationTime!=null&&LG.maxWireVersion(this.server)>=7)A.startAtOperationTime=this.startAtOperationTime;return A}cacheResumeToken(A){if(this.bufferedCount()===0&&this.postBatchResumeToken)this.resumeToken=this.postBatchResumeToken;else this.resumeToken=A;this.hasReceived=!0}_processBatch(A){let{postBatchResumeToken:F}=A;if(F){if(this.postBatchResumeToken=F,A.batchSize===0)this.resumeToken=F}}clone(){return new RG(this.client,this.namespace,this.pipeline,{...this.cursorOptions})}async _initialize(A){let F=new F01.AggregateOperation(this.namespace,this.pipeline,{...this.cursorOptions,...this.changeStreamCursorOptions,session:A}),B=await B01.executeOperation(A.client,F,this.timeoutContext),D=F.server;if(this.maxWireVersion=LG.maxWireVersion(D),this.startAtOperationTime==null&&this.changeStreamCursorOptions.resumeAfter==null&&this.changeStreamCursorOptions.startAfter==null&&this.maxWireVersion>=7)this.startAtOperationTime=B.operationTime;return this._processBatch(B),this.emit(tR.INIT,B),this.emit(tR.RESPONSE),{server:D,session:A,response:B}}async getMore(A){let F=await super.getMore(A);return this.maxWireVersion=LG.maxWireVersion(this.server),this._processBatch(F),this.emit(wG.ChangeStream.MORE,F),this.emit(wG.ChangeStream.RESPONSE),F}}oR.ChangeStreamCursor=RG});var DN=z((FN)=>{Object.defineProperty(FN,"__esModule",{value:!0});FN.ListDatabasesOperation=void 0;var AN=F1(),$01=O0(),PG=c1();class IG extends $01.CommandOperation{constructor(A,F){super(A,F);this.options=F??{},this.ns=new AN.MongoDBNamespace("admin","$cmd")}get commandName(){return"listDatabases"}async execute(A,F,B){let D={listDatabases:1};if(typeof this.options.nameOnly==="boolean")D.nameOnly=this.options.nameOnly;if(this.options.filter)D.filter=this.options.filter;if(typeof this.options.authorizedDatabases==="boolean")D.authorizedDatabases=this.options.authorizedDatabases;if(AN.maxWireVersion(A)>=9&&this.options.comment!==void 0)D.comment=this.options.comment;return await super.executeCommand(A,F,D,B)}}FN.ListDatabasesOperation=IG;PG.defineAspects(IG,[PG.Aspect.READ_OPERATION,PG.Aspect.RETRYABLE])});var jG=z((JN)=>{Object.defineProperty(JN,"__esModule",{value:!0});JN.RemoveUserOperation=void 0;var J01=O0(),$N=c1();class MG extends J01.CommandOperation{constructor(A,F,B){super(A,B);this.options=B,this.username=F}get commandName(){return"dropUser"}async execute(A,F,B){return await super.executeCommand(A,F,{dropUser:this.username},B),!0}}JN.RemoveUserOperation=MG;$N.defineAspects(MG,[$N.Aspect.WRITE_OPERATION])});var Q8=z((HN)=>{Object.defineProperty(HN,"__esModule",{value:!0});HN.RunAdminCommandOperation=HN.RunCommandOperation=void 0;var X01=F1(),EN=c1();class YN extends EN.AbstractOperation{constructor(A,F,B){super(B);this.command=F,this.options=B,this.ns=A.s.namespace.withCollection("$cmd")}get commandName(){return"runCommand"}async execute(A,F,B){return this.server=A,await A.command(this.ns,this.command,{...this.options,readPreference:this.readPreference,session:F,timeoutContext:B},this.options.responseType)}}HN.RunCommandOperation=YN;class GN extends EN.AbstractOperation{constructor(A,F){super(F);this.command=A,this.options=F,this.ns=new X01.MongoDBNamespace("admin","$cmd")}get commandName(){return"runCommand"}async execute(A,F,B){return this.server=A,await A.command(this.ns,this.command,{...this.options,readPreference:this.readPreference,session:F,timeoutContext:B})}}HN.RunAdminCommandOperation=GN});var KN=z((CN)=>{Object.defineProperty(CN,"__esModule",{value:!0});CN.ValidateCollectionOperation=void 0;var TG=s(),Y01=O0();class qN extends Y01.CommandOperation{constructor(A,F,B){let D={validate:F},$=Object.keys(B);for(let J=0;J<$.length;J++)if(Object.prototype.hasOwnProperty.call(B,$[J])&&$[J]!=="session")D[$[J]]=B[$[J]];super(A.s.db,B);this.options=B,this.command=D,this.collectionName=F}get commandName(){return"validate"}async execute(A,F,B){let D=this.collectionName,$=await super.executeCommand(A,F,this.command,B);if($.result!=null&&typeof $.result!=="string")throw new TG.MongoUnexpectedServerResponseError("Error with validation data");if($.result!=null&&$.result.match(/exception|corrupt/)!=null)throw new TG.MongoUnexpectedServerResponseError(`Invalid collection ${D}`);if($.valid!=null&&!$.valid)throw new TG.MongoUnexpectedServerResponseError(`Invalid collection ${D}`);return $}}CN.ValidateCollectionOperation=qN});var kG=z((UN)=>{Object.defineProperty(UN,"__esModule",{value:!0});UN.Admin=void 0;var G01=y1(),UD=T2(),H01=DN(),W01=jG(),q01=Q8(),C01=KN();class zN{constructor(A){this.s={db:A}}async command(A,F){return await UD.executeOperation(this.s.db.client,new q01.RunAdminCommandOperation(A,{...G01.resolveBSONOptions(F),session:F?.session,readPreference:F?.readPreference,timeoutMS:F?.timeoutMS??this.s.db.timeoutMS}))}async buildInfo(A){return await this.command({buildinfo:1},A)}async serverInfo(A){return await this.command({buildinfo:1},A)}async serverStatus(A){return await this.command({serverStatus:1},A)}async ping(A){return await this.command({ping:1},A)}async removeUser(A,F){return await UD.executeOperation(this.s.db.client,new W01.RemoveUserOperation(this.s.db,A,{dbName:"admin",...F}))}async validateCollection(A,F={}){return await UD.executeOperation(this.s.db.client,new C01.ValidateCollectionOperation(this,A,F))}async listDatabases(A){return await UD.executeOperation(this.s.db.client,new H01.ListDatabasesOperation(this.s.db,{timeoutMS:this.s.db.timeoutMS,...A}))}async replSetGetStatus(A){return await this.command({replSetGetStatus:1},A)}}UN.Admin=zN});var LN=z((VN)=>{Object.defineProperty(VN,"__esModule",{value:!0});VN.ListCollectionsOperation=void 0;var Q01=Q3(),K01=F1(),z01=O0(),ZD=c1();class OG extends z01.CommandOperation{constructor(A,F,B){super(A,B);if(this.options={...B},delete this.options.writeConcern,this.db=A,this.filter=F,this.nameOnly=!!this.options.nameOnly,this.authorizedCollections=!!this.options.authorizedCollections,typeof this.options.batchSize==="number")this.batchSize=this.options.batchSize}get commandName(){return"listCollections"}async execute(A,F,B){return await super.executeCommand(A,F,this.generateCommand(K01.maxWireVersion(A)),B,Q01.CursorResponse)}generateCommand(A){let F={listCollections:1,filter:this.filter,cursor:this.batchSize?{batchSize:this.batchSize}:{},nameOnly:this.nameOnly,authorizedCollections:this.authorizedCollections};if(A>=9&&this.options.comment!==void 0)F.comment=this.options.comment;return F}}VN.ListCollectionsOperation=OG;ZD.defineAspects(OG,[ZD.Aspect.READ_OPERATION,ZD.Aspect.RETRYABLE,ZD.Aspect.CURSOR_CREATING])});var SG=z((RN)=>{Object.defineProperty(RN,"__esModule",{value:!0});RN.ListCollectionsCursor=void 0;var U01=T2(),Z01=LN(),V01=k2();class uG extends V01.AbstractCursor{constructor(A,F,B){super(A.client,A.s.namespace,B);this.parent=A,this.filter=F,this.options=B}clone(){return new uG(this.parent,this.filter,{...this.options,...this.cursorOptions})}async _initialize(A){let F=new Z01.ListCollectionsOperation(this.parent,this.filter,{...this.cursorOptions,...this.options,session:A,signal:this.signal}),B=await U01.executeOperation(this.parent.client,F,this.timeoutContext);return{server:F.server,session:A,response:B}}}RN.ListCollectionsCursor=uG});var TN=z((MN)=>{Object.defineProperty(MN,"__esModule",{value:!0});MN.RunCommandCursor=void 0;var w01=Q3(),RA=s(),PN=T2(),L01=IY(),R01=Q8(),N01=F1(),P01=k2();class IN extends P01.AbstractCursor{setComment(A){return this.getMoreOptions.comment=A,this}setMaxTimeMS(A){return this.getMoreOptions.maxAwaitTimeMS=A,this}setBatchSize(A){return this.getMoreOptions.batchSize=A,this}clone(){throw new RA.MongoAPIError("Clone not supported, create a new cursor with db.runCursorCommand")}withReadConcern(A){throw new RA.MongoAPIError("RunCommandCursor does not support readConcern it must be attached to the command being run")}addCursorFlag(A,F){throw new RA.MongoAPIError("RunCommandCursor does not support cursor flags, they must be attached to the command being run")}maxTimeMS(A){throw new RA.MongoAPIError("maxTimeMS must be configured on the command document directly, to configure getMore.maxTimeMS use cursor.setMaxTimeMS()")}batchSize(A){throw new RA.MongoAPIError("batchSize must be configured on the command document directly, to configure getMore.batchSize use cursor.setBatchSize()")}constructor(A,F,B={}){super(A.client,N01.ns(A.namespace),B);this.getMoreOptions={},this.db=A,this.command=Object.freeze({...F})}async _initialize(A){let F=new R01.RunCommandOperation(this.db,this.command,{...this.cursorOptions,session:A,readPreference:this.cursorOptions.readPreference,responseType:w01.CursorResponse}),B=await PN.executeOperation(this.client,F,this.timeoutContext);return{server:F.server,session:A,response:B}}async getMore(A){let F=new L01.GetMoreOperation(this.namespace,this.id,this.server,{...this.cursorOptions,session:this.session,...this.getMoreOptions});return await PN.executeOperation(this.client,F,this.timeoutContext)}}MN.RunCommandCursor=IN});var SN=z((ON)=>{Object.defineProperty(ON,"__esModule",{value:!0});ON.CollectionsOperation=void 0;var I01=B7(),M01=c1();class kN extends M01.AbstractOperation{constructor(A,F){super(F);this.options=F,this.db=A}get commandName(){return"listCollections"}async execute(A,F){let B=await this.db.listCollections({},{...this.options,nameOnly:!0,readPreference:this.readPreference,session:F}).toArray(),D=[];for(let{name:$}of B)if(!$.includes("$"))D.push(new I01.Collection(this.db,$,this.db.s.options));return D}}ON.CollectionsOperation=kN});var bN=z((xN)=>{Object.defineProperty(xN,"__esModule",{value:!0});xN.CreateCollectionOperation=void 0;var fN=n9(),j01=B7(),T01=s(),k01=O0(),O01=LA(),_N=c1(),u01=new Set(["w","wtimeout","timeoutMS","j","fsync","autoIndexId","pkFactory","raw","readPreference","session","readConcern","writeConcern","raw","fieldsAsRaw","useBigInt64","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","serializeFunctions","ignoreUndefined","enableUtf8Validation"]),S01="Driver support of Queryable Encryption is incompatible with server. Upgrade server to use Queryable Encryption.";class VD extends k01.CommandOperation{constructor(A,F,B={}){super(A,B);this.options=B,this.db=A,this.name=F}get commandName(){return"create"}async execute(A,F,B){let D=this.db,$=this.name,J=this.options,X=J.encryptedFields??D.client.s.options.autoEncryption?.encryptedFieldsMap?.[`${D.databaseName}.${$}`];if(X){if(!A.loadBalanced&&A.description.maxWireVersion<fN.MIN_SUPPORTED_QE_WIRE_VERSION)throw new T01.MongoCompatibilityError(`${S01} The minimum server version required is ${fN.MIN_SUPPORTED_QE_SERVER_VERSION}`);let Y=X.escCollection??`enxcol_.${$}.esc`,G=X.ecocCollection??`enxcol_.${$}.ecoc`;for(let H of[Y,G])await new VD(D,H,{clusteredIndex:{key:{_id:1},unique:!0}}).executeWithoutEncryptedFieldsCheck(A,F,B);if(!J.encryptedFields)this.options={...this.options,encryptedFields:X}}let E=await this.executeWithoutEncryptedFieldsCheck(A,F,B);if(X)await O01.CreateIndexesOperation.fromIndexSpecification(D,$,{__safeContent__:1},{}).execute(A,F,B);return E}async executeWithoutEncryptedFieldsCheck(A,F,B){let D=this.db,$=this.name,J=this.options,X={create:$};for(let E in J)if(J[E]!=null&&typeof J[E]!=="function"&&!u01.has(E))X[E]=J[E];return await super.executeCommand(A,F,X,B),new j01.Collection(D,$,J)}}xN.CreateCollectionOperation=VD;_N.defineAspects(VD,[_N.Aspect.WRITE_OPERATION])});var dN=z((vN)=>{Object.defineProperty(vN,"__esModule",{value:!0});vN.ProfilingLevelOperation=void 0;var yN=s(),f01=O0();class hN extends f01.CommandOperation{constructor(A,F){super(A,F);this.options=F}get commandName(){return"profile"}async execute(A,F,B){let D=await super.executeCommand(A,F,{profile:-1},B);if(D.ok===1){let $=D.was;if($===0)return"off";if($===1)return"slow_only";if($===2)return"all";throw new yN.MongoUnexpectedServerResponseError(`Illegal profiling level value ${$}`)}else throw new yN.MongoUnexpectedServerResponseError("Error with profile command")}}vN.ProfilingLevelOperation=hN});var fG=z((cN)=>{Object.defineProperty(cN,"__esModule",{value:!0});cN.SetProfilingLevelOperation=cN.ProfilingLevel=void 0;var _01=s(),x01=F1(),g01=O0(),b01=new Set(["off","slow_only","all"]);cN.ProfilingLevel=Object.freeze({off:"off",slowOnly:"slow_only",all:"all"});class lN extends g01.CommandOperation{constructor(A,F,B){super(A,B);switch(this.options=B,F){case cN.ProfilingLevel.off:this.profile=0;break;case cN.ProfilingLevel.slowOnly:this.profile=1;break;case cN.ProfilingLevel.all:this.profile=2;break;default:this.profile=0;break}this.level=F}get commandName(){return"profile"}async execute(A,F,B){let D=this.level;if(!b01.has(D))throw new _01.MongoInvalidArgumentError(`Profiling level must be one of "${x01.enumToString(cN.ProfilingLevel)}"`);return await super.executeCommand(A,F,{profile:this.profile},B),D}}cN.SetProfilingLevelOperation=lN});var aN=z((nN)=>{Object.defineProperty(nN,"__esModule",{value:!0});nN.DbStatsOperation=void 0;var y01=O0(),iN=c1();class _G extends y01.CommandOperation{constructor(A,F){super(A,F);this.options=F}get commandName(){return"dbStats"}async execute(A,F,B){let D={dbStats:!0};if(this.options.scale!=null)D.scale=this.options.scale;return await super.executeCommand(A,F,D,B)}}nN.DbStatsOperation=_G;iN.defineAspects(_G,[iN.Aspect.READ_OPERATION])});var wD=z((AP)=>{Object.defineProperty(AP,"__esModule",{value:!0});AP.Db=void 0;var h01=kG(),rN=y1(),v01=D7(),m01=B7(),K8=v0(),d01=ZA(),l01=SG(),c01=TN(),tN=s(),p01=SN(),i01=bN(),oN=BG(),K3=T2(),n01=LA(),s01=dN(),a01=jG(),r01=GG(),t01=Q8(),o01=fG(),e01=aN(),A21=c6(),eN=t0(),o0=F1(),F21=P2(),B21=["writeConcern","readPreference","readPreferenceTags","native_parser","forceServerObjectId","pkFactory","serializeFunctions","raw","authSource","ignoreUndefined","readConcern","retryMiliSeconds","numberOfRetries","useBigInt64","promoteBuffers","promoteLongs","bsonRegExp","enableUtf8Validation","promoteValues","compression","retryWrites","timeoutMS"];class o4{constructor(A,F,B){if(B=B??{},B=o0.filterOptions(B,B21),typeof F==="string"&&F.includes("."))throw new tN.MongoInvalidArgumentError("Database names cannot contain the character '.'");this.s={options:B,readPreference:eN.ReadPreference.fromOptions(B),bsonOptions:rN.resolveBSONOptions(B,A),pkFactory:B?.pkFactory??o0.DEFAULT_PK_FACTORY,readConcern:A21.ReadConcern.fromOptions(B),writeConcern:F21.WriteConcern.fromOptions(B),namespace:new o0.MongoDBNamespace(F)},this.client=A}get databaseName(){return this.s.namespace.db}get options(){return this.s.options}get secondaryOk(){return this.s.readPreference?.preference!=="primary"||!1}get readConcern(){return this.s.readConcern}get readPreference(){if(this.s.readPreference==null)return this.client.readPreference;return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get namespace(){return this.s.namespace.toString()}get timeoutMS(){return this.s.options?.timeoutMS}async createCollection(A,F){return await K3.executeOperation(this.client,new i01.CreateCollectionOperation(this,A,o0.resolveOptions(this,F)))}async command(A,F){return await K3.executeOperation(this.client,new t01.RunCommandOperation(this,A,o0.resolveOptions(void 0,{...rN.resolveBSONOptions(F),timeoutMS:F?.timeoutMS??this.timeoutMS,session:F?.session,readPreference:F?.readPreference,signal:F?.signal})))}aggregate(A=[],F){return new d01.AggregationCursor(this.client,this.s.namespace,A,o0.resolveOptions(this,F))}admin(){return new h01.Admin(this)}collection(A,F={}){if(typeof F==="function")throw new tN.MongoInvalidArgumentError("The callback form of this helper has been removed.");return new m01.Collection(this,A,o0.resolveOptions(this,F))}async stats(A){return await K3.executeOperation(this.client,new e01.DbStatsOperation(this,o0.resolveOptions(this,A)))}listCollections(A={},F={}){return new l01.ListCollectionsCursor(this,A,o0.resolveOptions(this,F))}async renameCollection(A,F,B){return await K3.executeOperation(this.client,new r01.RenameOperation(this.collection(A),F,o0.resolveOptions(void 0,{...B,new_collection:!0,readPreference:eN.ReadPreference.primary})))}async dropCollection(A,F){return await K3.executeOperation(this.client,new oN.DropCollectionOperation(this,A,o0.resolveOptions(this,F)))}async dropDatabase(A){return await K3.executeOperation(this.client,new oN.DropDatabaseOperation(this,o0.resolveOptions(this,A)))}async collections(A){return await K3.executeOperation(this.client,new p01.CollectionsOperation(this,o0.resolveOptions(this,A)))}async createIndex(A,F,B){return(await K3.executeOperation(this.client,n01.CreateIndexesOperation.fromIndexSpecification(this,A,F,B)))[0]}async removeUser(A,F){return await K3.executeOperation(this.client,new a01.RemoveUserOperation(this,A,o0.resolveOptions(this,F)))}async setProfilingLevel(A,F){return await K3.executeOperation(this.client,new o01.SetProfilingLevelOperation(this,A,o0.resolveOptions(this,F)))}async profilingLevel(A){return await K3.executeOperation(this.client,new s01.ProfilingLevelOperation(this,o0.resolveOptions(this,A)))}async indexInformation(A,F){return await this.collection(A).indexInformation(o0.resolveOptions(this,F))}watch(A=[],F={}){if(!Array.isArray(A))F=A,A=[];return new v01.ChangeStream(this,A,o0.resolveOptions(this,F))}runCursorCommand(A,F){return new c01.RunCommandCursor(this,A,F)}}AP.Db=o4;o4.SYSTEM_NAMESPACE_COLLECTION=K8.SYSTEM_NAMESPACE_COLLECTION;o4.SYSTEM_INDEX_COLLECTION=K8.SYSTEM_INDEX_COLLECTION;o4.SYSTEM_PROFILE_COLLECTION=K8.SYSTEM_PROFILE_COLLECTION;o4.SYSTEM_USER_COLLECTION=K8.SYSTEM_USER_COLLECTION;o4.SYSTEM_COMMAND_COLLECTION=K8.SYSTEM_COMMAND_COLLECTION;o4.SYSTEM_JS_COLLECTION=K8.SYSTEM_JS_COLLECTION});var D7=z((BP)=>{Object.defineProperty(BP,"__esModule",{value:!0});BP.ChangeStream=void 0;var D21=B7(),z3=v0(),$21=k2(),J21=NG(),X21=wD(),e0=s(),E21=e4(),Y21=M6(),G21=z8(),H21=M2(),v3=F1(),W21=["resumeAfter","startAfter","startAtOperationTime","fullDocument","fullDocumentBeforeChange","showExpandedEvents"],$7={COLLECTION:Symbol("Collection"),DATABASE:Symbol("Database"),CLUSTER:Symbol("Cluster")},q21=[z3.RESUME_TOKEN_CHANGED,z3.END,z3.CLOSE],C21="A change stream document has been received that lacks a resume token (_id).",LD="ChangeStream is closed";class O2 extends Y21.TypedEventEmitter{async asyncDispose(){await this.close()}constructor(A,F=[],B={}){super();this.pipeline=F,this.options={...B};let D;if(delete this.options.writeConcern,A instanceof D21.Collection)this.type=$7.COLLECTION,D=A.s.db.client.options.serverSelectionTimeoutMS;else if(A instanceof X21.Db)this.type=$7.DATABASE,D=A.client.options.serverSelectionTimeoutMS;else if(A instanceof E21.MongoClient)this.type=$7.CLUSTER,D=A.options.serverSelectionTimeoutMS;else throw new e0.MongoChangeStreamError("Parent provided to ChangeStream constructor must be an instance of Collection, Db, or MongoClient");if(this.contextOwner=Symbol(),this.parent=A,this.namespace=A.s.namespace,!this.options.readPreference&&A.readPreference)this.options.readPreference=A.readPreference;if(this.cursor=this._createChangeStreamCursor(B),this.isClosed=!1,this.mode=!1,this.on("newListener",($)=>{if($==="change"&&this.cursor&&this.listenerCount("change")===0)this._streamEvents(this.cursor)}),this.on("removeListener",($)=>{if($==="change"&&this.listenerCount("change")===0&&this.cursor)this.cursorStream?.removeAllListeners("data")}),this.options.timeoutMS!=null)this.timeoutContext=new H21.CSOTTimeoutContext({timeoutMS:this.options.timeoutMS,serverSelectionTimeoutMS:D})}get resumeToken(){return this.cursor?.resumeToken}async hasNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{while(!0)try{return await this.cursor.hasNext()}catch(A){try{await this._processErrorIteratorMode(A,this.cursor.id!=null)}catch(F){if(F instanceof e0.MongoOperationTimeoutError&&this.cursor.id==null)throw F;try{await this.close()}catch(B){v3.squashError(B)}throw F}}}finally{this.timeoutContext?.clear()}}async next(){this._setIsIterator(),this.timeoutContext?.refresh();try{while(!0)try{let A=await this.cursor.next();return this._processChange(A??null)}catch(A){try{await this._processErrorIteratorMode(A,this.cursor.id!=null)}catch(F){if(F instanceof e0.MongoOperationTimeoutError&&this.cursor.id==null)throw F;try{await this.close()}catch(B){v3.squashError(B)}throw F}}}finally{this.timeoutContext?.clear()}}async tryNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{while(!0)try{return await this.cursor.tryNext()??null}catch(A){try{await this._processErrorIteratorMode(A,this.cursor.id!=null)}catch(F){if(F instanceof e0.MongoOperationTimeoutError&&this.cursor.id==null)throw F;try{await this.close()}catch(B){v3.squashError(B)}throw F}}}finally{this.timeoutContext?.clear()}}async*[Symbol.asyncIterator](){if(this.closed)return;try{while(!0)yield await this.next()}finally{try{await this.close()}catch(A){v3.squashError(A)}}}get closed(){return this.isClosed||this.cursor.closed}async close(){this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!0;let A=this.cursor;try{await A.close()}finally{this._endStream()}}stream(A){if(this.closed)throw new e0.MongoChangeStreamError(LD);return this.streamOptions=A,this.cursor.stream(A)}_setIsEmitter(){if(this.mode==="iterator")throw new e0.MongoAPIError("ChangeStream cannot be used as an EventEmitter after being used as an iterator");this.mode="emitter"}_setIsIterator(){if(this.mode==="emitter")throw new e0.MongoAPIError("ChangeStream cannot be used as an iterator after being used as an EventEmitter");this.mode="iterator"}_createChangeStreamCursor(A){let F=v3.filterOptions(A,W21);if(this.type===$7.CLUSTER)F.allChangesForCluster=!0;let B=[{$changeStream:F},...this.pipeline],D=this.type===$7.CLUSTER?this.parent:this.type===$7.DATABASE?this.parent.client:this.type===$7.COLLECTION?this.parent.client:null;if(D==null)throw new e0.MongoRuntimeError(`Changestream type should only be one of cluster, database, collection. Found ${this.type.toString()}`);let $=new J21.ChangeStreamCursor(D,this.namespace,B,{...A,timeoutContext:this.timeoutContext?new $21.CursorTimeoutContext(this.timeoutContext,this.contextOwner):void 0});for(let J of q21)$.on(J,(X)=>this.emit(J,X));if(this.listenerCount(O2.CHANGE)>0)this._streamEvents($);return $}_closeEmitterModeWithError(A){this.emit(O2.ERROR,A),this.close().then(void 0,v3.squashError)}_streamEvents(A){this._setIsEmitter();let F=this.cursorStream??A.stream();this.cursorStream=F,F.on("data",(B)=>{try{let D=this._processChange(B);this.emit(O2.CHANGE,D)}catch(D){this.emit(O2.ERROR,D)}this.timeoutContext?.refresh()}),F.on("error",(B)=>this._processErrorStreamMode(B,this.cursor.id!=null))}_endStream(){this.cursorStream?.removeAllListeners("data"),this.cursorStream?.removeAllListeners("close"),this.cursorStream?.removeAllListeners("end"),this.cursorStream?.destroy(),this.cursorStream=void 0}_processChange(A){if(this.isClosed)throw new e0.MongoAPIError(LD);if(A==null)throw new e0.MongoRuntimeError(LD);if(A&&!A._id)throw new e0.MongoChangeStreamError(C21);return this.cursor.cacheResumeToken(A._id),this.options.startAtOperationTime=void 0,A}_processErrorStreamMode(A,F){if(this.isClosed)return;if(F&&(e0.isResumableError(A,this.cursor.maxWireVersion)||A instanceof e0.MongoOperationTimeoutError))this._endStream(),this.cursor.close().then(()=>this._resume(A),(B)=>{return v3.squashError(B),this._resume(A)}).then(()=>{if(A instanceof e0.MongoOperationTimeoutError)this.emit(O2.ERROR,A)},()=>this._closeEmitterModeWithError(A));else this._closeEmitterModeWithError(A)}async _processErrorIteratorMode(A,F){if(this.isClosed)throw new e0.MongoAPIError(LD);if(F&&(e0.isResumableError(A,this.cursor.maxWireVersion)||A instanceof e0.MongoOperationTimeoutError)){try{await this.cursor.close()}catch(B){v3.squashError(B)}if(await this._resume(A),A instanceof e0.MongoOperationTimeoutError)throw A}else{try{await this.close()}catch(B){v3.squashError(B)}throw A}}async _resume(A){this.timeoutContext?.refresh();let F=v3.getTopology(this.parent);try{await F.selectServer(this.cursor.readPreference,{operationName:"reconnect topology in change stream",timeoutContext:this.timeoutContext}),this.cursor=this._createChangeStreamCursor(this.cursor.resumeOptions)}catch{throw await this.close(),A}}}BP.ChangeStream=O2;O2.RESPONSE=z3.RESPONSE;O2.MORE=z3.MORE;O2.INIT=z3.INIT;O2.CLOSE=z3.CLOSE;O2.CHANGE=z3.CHANGE;O2.END=z3.END;O2.ERROR=z3.ERROR;O2.RESUME_TOKEN_CHANGED=z3.RESUME_TOKEN_CHANGED;G21.configureResourceManagement(O2.prototype)});var U3=z(($P)=>{Object.defineProperty($P,"__esModule",{value:!0});$P.aws4=void 0;$P.getKerberos=Q21;$P.getZstdLibrary=K21;$P.getAwsCredentialProvider=z21;$P.getGcpMetadata=U21;$P.getSnappy=Z21;$P.getSocks=V21;$P.getMongoDBClientEncryption=L21;var A9=s();function PA(A){return new Proxy(A?{kModuleError:A}:{},{get:(B,D)=>{if(D==="kModuleError")return A;throw A},set:()=>{throw A}})}function Q21(){let A;try{A=(()=>{throw new Error("Cannot require module "+"kerberos");})()}catch(F){A=PA(new A9.MongoMissingDependencyError("Optional module `kerberos` not found. Please install it to enable kerberos authentication",{cause:F,dependencyName:"kerberos"}))}return A}function K21(){let A;try{A=(()=>{throw new Error("Cannot require module "+"@mongodb-js/zstd");})()}catch(F){A=PA(new A9.MongoMissingDependencyError("Optional module `@mongodb-js/zstd` not found. Please install it to enable zstd compression",{cause:F,dependencyName:"zstd"}))}return A}function z21(){try{return (()=>{throw new Error("Cannot require module "+"@aws-sdk/credential-providers");})()}catch(A){return PA(new A9.MongoMissingDependencyError("Optional module `@aws-sdk/credential-providers` not found. Please install it to enable getting aws credentials via the official sdk.",{cause:A,dependencyName:"@aws-sdk/credential-providers"}))}}function U21(){try{return (()=>{throw new Error("Cannot require module "+"gcp-metadata");})()}catch(A){return PA(new A9.MongoMissingDependencyError("Optional module `gcp-metadata` not found. Please install it to enable getting gcp credentials via the official sdk.",{cause:A,dependencyName:"gcp-metadata"}))}}function Z21(){try{return (()=>{throw new Error("Cannot require module "+"snappy");})()}catch(A){return{kModuleError:new A9.MongoMissingDependencyError("Optional module `snappy` not found. Please install it to enable snappy compression",{cause:A,dependencyName:"snappy"})}}}function V21(){try{return (()=>{throw new Error("Cannot require module "+"socks");})()}catch(A){return{kModuleError:new A9.MongoMissingDependencyError("Optional module `socks` not found. Please install it to connections over a SOCKS5 proxy",{cause:A,dependencyName:"socks"})}}}$P.aws4=w21();function w21(){let A;try{A=(()=>{throw new Error("Cannot require module "+"aws4");})()}catch(F){A=PA(new A9.MongoMissingDependencyError("Optional module `aws4` not found. Please install it to enable AWS authentication",{cause:F,dependencyName:"aws4"}))}return A}function L21(){let A=null;try{A=(()=>{throw new Error("Cannot require module "+"mongodb-client-encryption");})()}catch(F){return{kModuleError:new A9.MongoMissingDependencyError("Optional module `mongodb-client-encryption` not found. Please install it to use auto encryption or ClientEncryption.",{cause:F,dependencyName:"mongodb-client-encryption"})}}return A}});var F9=z((YP)=>{Object.defineProperty(YP,"__esModule",{value:!0});YP.AuthProvider=YP.AuthContext=void 0;var k21=s();class XP{constructor(A,F,B){this.reauthenticating=!1,this.connection=A,this.credentials=F,this.options=B}}YP.AuthContext=XP;class EP{async prepare(A,F){return A}async reauth(A){if(A.reauthenticating)throw new k21.MongoRuntimeError("Reauthentication already in progress.");try{A.reauthenticating=!0,await this.auth(A)}finally{A.reauthenticating=!1}}}YP.AuthProvider=EP});var ND=z((QP)=>{Object.defineProperty(QP,"__esModule",{value:!0});QP.GSSAPI=QP.GSSAPICanonicalizationValue=void 0;QP.performGSSAPICanonicalizeHostName=CP;QP.resolveCname=bG;var gG=i("dns"),u21=U3(),HP=s(),S21=F1(),f21=F9();QP.GSSAPICanonicalizationValue=Object.freeze({on:!0,off:!1,none:"none",forward:"forward",forwardAndReverse:"forwardAndReverse"});async function xG(A,F){return await A.command(S21.ns("$external.$cmd"),F)}var IA;class WP extends f21.AuthProvider{async auth(A){let{connection:F,credentials:B}=A;if(B==null)throw new HP.MongoMissingCredentialsError("Credentials required for GSSAPI authentication");let{username:D}=B,$=await _21(A),J=await $.step(""),X=await xG(F,x21(J)),E=await qP($,10,X.payload),Y=await xG(F,g21(E,X.conversationId)),G=await b21($,D,Y.payload);await xG(F,{saslContinue:1,conversationId:Y.conversationId,payload:G})}}QP.GSSAPI=WP;async function _21(A){let{hostAddress:F}=A.options,{credentials:B}=A;if(!F||typeof F.host!=="string"||!B)throw new HP.MongoInvalidArgumentError("Connection must have host and port and credentials defined.");if(y21(),"kModuleError"in IA)throw IA.kModuleError;let{initializeClient:D}=IA,{username:$,password:J}=B,X=B.mechanismProperties,E=X.SERVICE_NAME??"mongodb",Y=await CP(F.host,X),G={};if(J!=null)Object.assign(G,{user:$,password:J});let H=X.SERVICE_HOST??Y,W=`${E}${process.platform==="win32"?"/":"@"}${H}`;if("SERVICE_REALM"in X)W=`${W}@${X.SERVICE_REALM}`;return await D(W,G)}function x21(A){return{saslStart:1,mechanism:"GSSAPI",payload:A,autoAuthorize:1}}function g21(A,F){return{saslContinue:1,conversationId:F,payload:A}}async function qP(A,F,B){try{return await A.step(B)||""}catch(D){if(F===0)throw D;return await qP(A,F-1,B)}}async function b21(A,F,B){let D=await A.unwrap(B);return await A.wrap(D||"",{user:F})}async function CP(A,F){let B=F.CANONICALIZE_HOST_NAME;if(!B||B===QP.GSSAPICanonicalizationValue.none)return A;if(B===QP.GSSAPICanonicalizationValue.on||B===QP.GSSAPICanonicalizationValue.forwardAndReverse){let{address:D}=await gG.promises.lookup(A);try{let $=await gG.promises.resolvePtr(D);return $.length>0?$[0]:A}catch{return await bG(A)}}else return await bG(A)}async function bG(A){try{let F=await gG.promises.resolveCname(A);return F.length>0?F[0]:A}catch{return A}}function y21(){if(!IA)IA=u21.getKerberos()}});var m3=z((zP)=>{Object.defineProperty(zP,"__esModule",{value:!0});zP.AUTH_MECHS_AUTH_SRC_EXTERNAL=zP.AuthMechanism=void 0;zP.AuthMechanism=Object.freeze({MONGODB_AWS:"MONGODB-AWS",MONGODB_CR:"MONGODB-CR",MONGODB_DEFAULT:"DEFAULT",MONGODB_GSSAPI:"GSSAPI",MONGODB_PLAIN:"PLAIN",MONGODB_SCRAM_SHA1:"SCRAM-SHA-1",MONGODB_SCRAM_SHA256:"SCRAM-SHA-256",MONGODB_X509:"MONGODB-X509",MONGODB_OIDC:"MONGODB-OIDC"});zP.AUTH_MECHS_AUTH_SRC_EXTERNAL=new Set([zP.AuthMechanism.MONGODB_GSSAPI,zP.AuthMechanism.MONGODB_AWS,zP.AuthMechanism.MONGODB_OIDC,zP.AuthMechanism.MONGODB_X509])});var ID=z((wP)=>{Object.defineProperty(wP,"__esModule",{value:!0});wP.MongoCredentials=wP.DEFAULT_ALLOWED_HOSTS=void 0;var n6=s(),m21=ND(),p2=m3();function d21(A){if(A){if(Array.isArray(A.saslSupportedMechs))return A.saslSupportedMechs.includes(p2.AuthMechanism.MONGODB_SCRAM_SHA256)?p2.AuthMechanism.MONGODB_SCRAM_SHA256:p2.AuthMechanism.MONGODB_SCRAM_SHA1}return p2.AuthMechanism.MONGODB_SCRAM_SHA256}var ZP=["test","azure","gcp","k8s"],VP="Auth mechanism property ALLOWED_HOSTS must be an array of strings.";wP.DEFAULT_ALLOWED_HOSTS=["*.mongodb.net","*.mongodb-qa.net","*.mongodb-dev.net","*.mongodbgov.net","localhost","127.0.0.1","::1"];var l21="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure or gcp.";class PD{constructor(A){if(this.username=A.username??"",this.password=A.password,this.source=A.source,!this.source&&A.db)this.source=A.db;if(this.mechanism=A.mechanism||p2.AuthMechanism.MONGODB_DEFAULT,this.mechanismProperties=A.mechanismProperties||{},this.mechanism.match(/MONGODB-AWS/i)){if(!this.username&&process.env.AWS_ACCESS_KEY_ID)this.username=process.env.AWS_ACCESS_KEY_ID;if(!this.password&&process.env.AWS_SECRET_ACCESS_KEY)this.password=process.env.AWS_SECRET_ACCESS_KEY;if(this.mechanismProperties.AWS_SESSION_TOKEN==null&&process.env.AWS_SESSION_TOKEN!=null)this.mechanismProperties={...this.mechanismProperties,AWS_SESSION_TOKEN:process.env.AWS_SESSION_TOKEN}}if(this.mechanism===p2.AuthMechanism.MONGODB_OIDC&&!this.mechanismProperties.ALLOWED_HOSTS)this.mechanismProperties={...this.mechanismProperties,ALLOWED_HOSTS:wP.DEFAULT_ALLOWED_HOSTS};Object.freeze(this.mechanismProperties),Object.freeze(this)}equals(A){return this.mechanism===A.mechanism&&this.username===A.username&&this.password===A.password&&this.source===A.source}resolveAuthMechanism(A){if(this.mechanism.match(/DEFAULT/i))return new PD({username:this.username,password:this.password,source:this.source,mechanism:d21(A),mechanismProperties:this.mechanismProperties});return this}validate(){if((this.mechanism===p2.AuthMechanism.MONGODB_GSSAPI||this.mechanism===p2.AuthMechanism.MONGODB_PLAIN||this.mechanism===p2.AuthMechanism.MONGODB_SCRAM_SHA1||this.mechanism===p2.AuthMechanism.MONGODB_SCRAM_SHA256)&&!this.username)throw new n6.MongoMissingCredentialsError(`Username required for mechanism '${this.mechanism}'`);if(this.mechanism===p2.AuthMechanism.MONGODB_OIDC){if(this.username&&this.mechanismProperties.ENVIRONMENT&&this.mechanismProperties.ENVIRONMENT!=="azure")throw new n6.MongoInvalidArgumentError(`username and ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' may not be used together for mechanism '${this.mechanism}'.`);if(this.username&&this.password)throw new n6.MongoInvalidArgumentError(`No password is allowed in ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' for '${this.mechanism}'.`);if((this.mechanismProperties.ENVIRONMENT==="azure"||this.mechanismProperties.ENVIRONMENT==="gcp")&&!this.mechanismProperties.TOKEN_RESOURCE)throw new n6.MongoInvalidArgumentError(l21);if(this.mechanismProperties.ENVIRONMENT&&!ZP.includes(this.mechanismProperties.ENVIRONMENT))throw new n6.MongoInvalidArgumentError(`Currently only a ENVIRONMENT in ${ZP.join(",")} is supported for mechanism '${this.mechanism}'.`);if(!this.mechanismProperties.ENVIRONMENT&&!this.mechanismProperties.OIDC_CALLBACK&&!this.mechanismProperties.OIDC_HUMAN_CALLBACK)throw new n6.MongoInvalidArgumentError(`Either a ENVIRONMENT, OIDC_CALLBACK, or OIDC_HUMAN_CALLBACK must be specified for mechanism '${this.mechanism}'.`);if(this.mechanismProperties.ALLOWED_HOSTS){let F=this.mechanismProperties.ALLOWED_HOSTS;if(!Array.isArray(F))throw new n6.MongoInvalidArgumentError(VP);for(let B of F)if(typeof B!=="string")throw new n6.MongoInvalidArgumentError(VP)}}if(p2.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(this.mechanism)){if(this.source!=null&&this.source!=="$external")throw new n6.MongoAPIError(`Invalid source '${this.source}' for mechanism '${this.mechanism}' specified.`)}if(this.mechanism===p2.AuthMechanism.MONGODB_PLAIN&&this.source==null)throw new n6.MongoAPIError("PLAIN Authentication Mechanism needs an auth source");if(this.mechanism===p2.AuthMechanism.MONGODB_X509&&this.password!=null){if(this.password===""){Reflect.set(this,"password",void 0);return}throw new n6.MongoAPIError("Password not allowed for mechanism MONGODB-X509")}let A=this.mechanismProperties.CANONICALIZE_HOST_NAME??!1;if(!Object.values(m21.GSSAPICanonicalizationValue).includes(A))throw new n6.MongoAPIError(`Invalid CANONICALIZE_HOST_NAME value: ${A}`)}static merge(A,F){return new PD({username:F.username??A?.username??"",password:F.password??A?.password??"",mechanism:F.mechanism??A?.mechanism??p2.AuthMechanism.MONGODB_DEFAULT,mechanismProperties:F.mechanismProperties??A?.mechanismProperties??{},source:F.source??F.db??A?.source??"admin"})}}wP.MongoCredentials=PD});var jD=z((MP)=>{function r1(A,F,B){if(B.globals)A=B.globals[A.name];return new A(`${B.context?B.context:"Value"} ${F}.`)}function V8(A,F){if(typeof A==="bigint")throw r1(TypeError,"is a BigInt which cannot be converted to a number",F);if(!F.globals)return Number(A);return F.globals.Number(A)}function PP(A){if(A>0&&A%1===0.5&&(A&1)===0||A<0&&A%1===-0.5&&(A&1)===1)return jA(Math.floor(A));return jA(Math.round(A))}function MD(A){return jA(Math.trunc(A))}function NP(A){return A<0?-1:1}function c21(A,F){let B=A%F;if(NP(F)!==NP(B))return B+F;return B}function jA(A){return A===0?0:A}function w8(A,{unsigned:F}){let B,D;if(F)B=0,D=2**A-1;else B=-(2**(A-1)),D=2**(A-1)-1;let $=2**A,J=2**(A-1);return(X,E={})=>{let Y=V8(X,E);if(Y=jA(Y),E.enforceRange){if(!Number.isFinite(Y))throw r1(TypeError,"is not a finite number",E);if(Y=MD(Y),Y<B||Y>D)throw r1(TypeError,`is outside the accepted range of ${B} to ${D}, inclusive`,E);return Y}if(!Number.isNaN(Y)&&E.clamp)return Y=Math.min(Math.max(Y,B),D),Y=PP(Y),Y;if(!Number.isFinite(Y)||Y===0)return 0;if(Y=MD(Y),Y>=B&&Y<=D)return Y;if(Y=c21(Y,$),!F&&Y>=J)return Y-$;return Y}}function IP(A,{unsigned:F}){let B=Number.MAX_SAFE_INTEGER,D=F?0:Number.MIN_SAFE_INTEGER,$=F?BigInt.asUintN:BigInt.asIntN;return(J,X={})=>{let E=V8(J,X);if(E=jA(E),X.enforceRange){if(!Number.isFinite(E))throw r1(TypeError,"is not a finite number",X);if(E=MD(E),E<D||E>B)throw r1(TypeError,`is outside the accepted range of ${D} to ${B}, inclusive`,X);return E}if(!Number.isNaN(E)&&X.clamp)return E=Math.min(Math.max(E,D),B),E=PP(E),E;if(!Number.isFinite(E)||E===0)return 0;let Y=BigInt(MD(E));return Y=$(A,Y),Number(Y)}}MP.any=(A)=>{return A};MP.undefined=()=>{return};MP.boolean=(A)=>{return Boolean(A)};MP.byte=w8(8,{unsigned:!1});MP.octet=w8(8,{unsigned:!0});MP.short=w8(16,{unsigned:!1});MP["unsigned short"]=w8(16,{unsigned:!0});MP.long=w8(32,{unsigned:!1});MP["unsigned long"]=w8(32,{unsigned:!0});MP["long long"]=IP(64,{unsigned:!1});MP["unsigned long long"]=IP(64,{unsigned:!0});MP.double=(A,F={})=>{let B=V8(A,F);if(!Number.isFinite(B))throw r1(TypeError,"is not a finite floating-point value",F);return B};MP["unrestricted double"]=(A,F={})=>{return V8(A,F)};MP.float=(A,F={})=>{let B=V8(A,F);if(!Number.isFinite(B))throw r1(TypeError,"is not a finite floating-point value",F);if(Object.is(B,-0))return B;let D=Math.fround(B);if(!Number.isFinite(D))throw r1(TypeError,"is outside the range of a single-precision floating-point value",F);return D};MP["unrestricted float"]=(A,F={})=>{let B=V8(A,F);if(isNaN(B))return B;if(Object.is(B,-0))return B;return Math.fround(B)};MP.DOMString=(A,F={})=>{if(F.treatNullAsEmptyString&&A===null)return"";if(typeof A==="symbol")throw r1(TypeError,"is a symbol, which cannot be converted to a string",F);return(F.globals?F.globals.String:String)(A)};MP.ByteString=(A,F={})=>{let B=MP.DOMString(A,F),D;for(let $=0;(D=B.codePointAt($))!==void 0;++$)if(D>255)throw r1(TypeError,"is not a valid ByteString",F);return B};MP.USVString=(A,F={})=>{let B=MP.DOMString(A,F),D=B.length,$=[];for(let J=0;J<D;++J){let X=B.charCodeAt(J);if(X<55296||X>57343)$.push(String.fromCodePoint(X));else if(56320<=X&&X<=57343)$.push(String.fromCodePoint(65533));else if(J===D-1)$.push(String.fromCodePoint(65533));else{let E=B.charCodeAt(J+1);if(56320<=E&&E<=57343){let Y=X&1023,G=E&1023;$.push(String.fromCodePoint(65536+1024*Y+G)),++J}else $.push(String.fromCodePoint(65533))}}return $.join("")};MP.object=(A,F={})=>{if(A===null||typeof A!=="object"&&typeof A!=="function")throw r1(TypeError,"is not an object",F);return A};var p21=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get,i21=typeof SharedArrayBuffer==="function"?Object.getOwnPropertyDescriptor(SharedArrayBuffer.prototype,"byteLength").get:null;function yG(A){try{return p21.call(A),!0}catch{return!1}}function U8(A){try{return i21.call(A),!0}catch{return!1}}function Z8(A){try{return new Uint8Array(A),!1}catch{return!0}}MP.ArrayBuffer=(A,F={})=>{if(!yG(A)){if(F.allowShared&&!U8(A))throw r1(TypeError,"is not an ArrayBuffer or SharedArrayBuffer",F);throw r1(TypeError,"is not an ArrayBuffer",F)}if(Z8(A))throw r1(TypeError,"is a detached ArrayBuffer",F);return A};var n21=Object.getOwnPropertyDescriptor(DataView.prototype,"byteLength").get;MP.DataView=(A,F={})=>{try{n21.call(A)}catch(B){throw r1(TypeError,"is not a DataView",F)}if(!F.allowShared&&U8(A.buffer))throw r1(TypeError,"is backed by a SharedArrayBuffer, which is not allowed",F);if(Z8(A.buffer))throw r1(TypeError,"is backed by a detached ArrayBuffer",F);return A};var s21=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array).prototype,Symbol.toStringTag).get;[Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Uint8ClampedArray,Float32Array,Float64Array].forEach((A)=>{let{name:F}=A,B=/^[AEIOU]/u.test(F)?"an":"a";MP[F]=(D,$={})=>{if(!ArrayBuffer.isView(D)||s21.call(D)!==F)throw r1(TypeError,`is not ${B} ${F} object`,$);if(!$.allowShared&&U8(D.buffer))throw r1(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",$);if(Z8(D.buffer))throw r1(TypeError,"is a view on a detached ArrayBuffer",$);return D}});MP.ArrayBufferView=(A,F={})=>{if(!ArrayBuffer.isView(A))throw r1(TypeError,"is not a view on an ArrayBuffer or SharedArrayBuffer",F);if(!F.allowShared&&U8(A.buffer))throw r1(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",F);if(Z8(A.buffer))throw r1(TypeError,"is a view on a detached ArrayBuffer",F);return A};MP.BufferSource=(A,F={})=>{if(ArrayBuffer.isView(A)){if(!F.allowShared&&U8(A.buffer))throw r1(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",F);if(Z8(A.buffer))throw r1(TypeError,"is a view on a detached ArrayBuffer",F);return A}if(!F.allowShared&&!yG(A))throw r1(TypeError,"is not an ArrayBuffer or a view on one",F);if(F.allowShared&&!U8(A)&&!yG(A))throw r1(TypeError,"is not an ArrayBuffer, SharedArrayBuffer, or a view on one",F);if(Z8(A))throw r1(TypeError,"is a detached ArrayBuffer",F);return A};MP.DOMTimeStamp=MP["unsigned long long"]});var kD=z((_P,xP)=>{function U61(A){return typeof A==="object"&&A!==null||typeof A==="function"}var TP=Function.prototype.call.bind(Object.prototype.hasOwnProperty);function Z61(A,F){for(let B of Reflect.ownKeys(F)){let D=Reflect.getOwnPropertyDescriptor(F,B);if(D&&!Reflect.defineProperty(A,B,D))throw new TypeError(`Cannot redefine property: ${String(B)}`)}}function V61(A,F){let B=uP(A);return Object.defineProperties(Object.create(B["%Object.prototype%"]),Object.getOwnPropertyDescriptors(F))}var kP=Symbol("wrapper"),OP=Symbol("impl"),L8=Symbol("SameObject caches"),TD=Symbol.for("[webidl2js] constructor registry"),w61=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);function uP(A){if(TP(A,TD))return A[TD];let F=Object.create(null);F["%Object.prototype%"]=A.Object.prototype,F["%IteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(new A.Array()[Symbol.iterator]()));try{F["%AsyncIteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(A.eval("(async function* () {})").prototype))}catch{F["%AsyncIteratorPrototype%"]=w61}return A[TD]=F,F}function L61(A,F,B){if(!A[L8])A[L8]=Object.create(null);if(F in A[L8])return A[L8][F];return A[L8][F]=B(),A[L8][F]}function SP(A){return A?A[kP]:null}function fP(A){return A?A[OP]:null}function R61(A){let F=SP(A);return F?F:A}function N61(A){let F=fP(A);return F?F:A}var P61=Symbol("internal");function I61(A){if(typeof A!=="string")return!1;let F=A>>>0;if(F===4294967295)return!1;let B=`${F}`;if(A!==B)return!1;return!0}var M61=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get;function j61(A){try{return M61.call(A),!0}catch(F){return!1}}function T61([A,F],B){let D;switch(B){case"key":D=A;break;case"value":D=F;break;case"key+value":D=[A,F];break}return{value:D,done:!1}}var k61=Symbol("supports property index"),O61=Symbol("supported property indices"),u61=Symbol("supports property name"),S61=Symbol("supported property names"),f61=Symbol("indexed property get"),_61=Symbol("indexed property set new"),x61=Symbol("indexed property set existing"),g61=Symbol("named property get"),b61=Symbol("named property set new"),y61=Symbol("named property set existing"),h61=Symbol("named property delete"),v61=Symbol("async iterator get the next iteration result"),m61=Symbol("async iterator return steps"),d61=Symbol("async iterator initialization steps"),l61=Symbol("async iterator end of iteration");xP.exports=_P={isObject:U61,hasOwn:TP,define:Z61,newObjectInRealm:V61,wrapperSymbol:kP,implSymbol:OP,getSameObject:L61,ctorRegistrySymbol:TD,initCtorRegistry:uP,wrapperForImpl:SP,implForWrapper:fP,tryWrapperForImpl:R61,tryImplForWrapper:N61,iterInternalSymbol:P61,isArrayBuffer:j61,isArrayIndexPropName:I61,supportsPropertyIndex:k61,supportedPropertyIndices:O61,supportsPropertyName:u61,supportedPropertyNames:S61,indexedGet:f61,indexedSetNew:_61,indexedSetExisting:x61,namedGet:g61,namedSetNew:b61,namedSetExisting:y61,namedDelete:h61,asyncIteratorNext:v61,asyncIteratorReturn:m61,asyncIteratorInit:d61,asyncIteratorEOI:l61,iteratorResult:T61}});var lP=z((bP1,dP)=>{var c61=/^xn--/,p61=/[^\0-\x7F]/,i61=/[\x2E\u3002\uFF0E\uFF61]/g,n61={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d3=Math.floor,vG=String.fromCharCode;function B9(A){throw new RangeError(n61[A])}function s61(A,F){let B=[],D=A.length;while(D--)B[D]=F(A[D]);return B}function bP(A,F){let B=A.split("@"),D="";if(B.length>1)D=B[0]+"@",A=B[1];A=A.replace(i61,".");let $=A.split("."),J=s61($,F).join(".");return D+J}function yP(A){let F=[],B=0,D=A.length;while(B<D){let $=A.charCodeAt(B++);if($>=55296&&$<=56319&&B<D){let J=A.charCodeAt(B++);if((J&64512)==56320)F.push((($&1023)<<10)+(J&1023)+65536);else F.push($),B--}else F.push($)}return F}var a61=(A)=>String.fromCodePoint(...A),r61=function(A){if(A>=48&&A<58)return 26+(A-48);if(A>=65&&A<91)return A-65;if(A>=97&&A<123)return A-97;return 36},gP=function(A,F){return A+22+75*(A<26)-((F!=0)<<5)},hP=function(A,F,B){let D=0;A=B?d3(A/700):A>>1,A+=d3(A/F);for(;A>455;D+=36)A=d3(A/35);return d3(D+36*A/(A+38))},vP=function(A){let F=[],B=A.length,D=0,$=128,J=72,X=A.lastIndexOf("-");if(X<0)X=0;for(let E=0;E<X;++E){if(A.charCodeAt(E)>=128)B9("not-basic");F.push(A.charCodeAt(E))}for(let E=X>0?X+1:0;E<B;){let Y=D;for(let H=1,W=36;;W+=36){if(E>=B)B9("invalid-input");let q=r61(A.charCodeAt(E++));if(q>=36)B9("invalid-input");if(q>d3((2147483647-D)/H))B9("overflow");D+=q*H;let C=W<=J?1:W>=J+26?26:W-J;if(q<C)break;let Q=36-C;if(H>d3(2147483647/Q))B9("overflow");H*=Q}let G=F.length+1;if(J=hP(D-Y,G,Y==0),d3(D/G)>2147483647-$)B9("overflow");$+=d3(D/G),D%=G,F.splice(D++,0,$)}return String.fromCodePoint(...F)},mP=function(A){let F=[];A=yP(A);let B=A.length,D=128,$=0,J=72;for(let Y of A)if(Y<128)F.push(vG(Y));let X=F.length,E=X;if(X)F.push("-");while(E<B){let Y=2147483647;for(let H of A)if(H>=D&&H<Y)Y=H;let G=E+1;if(Y-D>d3((2147483647-$)/G))B9("overflow");$+=(Y-D)*G,D=Y;for(let H of A){if(H<D&&++$>2147483647)B9("overflow");if(H===D){let W=$;for(let q=36;;q+=36){let C=q<=J?1:q>=J+26?26:q-J;if(W<C)break;let Q=W-C,K=36-C;F.push(vG(gP(C+Q%K,0))),W=d3(Q/K)}F.push(vG(gP(W,0))),J=hP($,G,E===X),$=0,++E}}++$,++D}return F.join("")},t61=function(A){return bP(A,function(F){return c61.test(F)?vP(F.slice(4).toLowerCase()):F})},o61=function(A){return bP(A,function(F){return p61.test(F)?"xn--"+mP(F):F})},e61={version:"2.3.1",ucs2:{decode:yP,encode:a61},decode:vP,encode:mP,toASCII:o61,toUnicode:t61};dP.exports=e61});var pP=z((yP1,cP)=>{var A31=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113B8}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]/u,F31=/[\u094D\u09CD\u0A4D\u0ACD\u0B4D\u0BCD\u0C4D\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E3A\u0EBA\u0F84\u1039\u103A\u1714\u1715\u1734\u17D2\u1A60\u1B44\u1BAA\u1BAB\u1BF2\u1BF3\u2D7F\uA806\uA82C\uA8C4\uA953\uA9C0\uAAF6\uABED\u{10A3F}\u{11046}\u{11070}\u{1107F}\u{110B9}\u{11133}\u{11134}\u{111C0}\u{11235}\u{112EA}\u{1134D}\u{113CE}-\u{113D0}\u{11442}\u{114C2}\u{115BF}\u{1163F}\u{116B6}\u{1172B}\u{11839}\u{1193D}\u{1193E}\u{119E0}\u{11A34}\u{11A47}\u{11A99}\u{11C3F}\u{11D44}\u{11D45}\u{11D97}\u{11F41}\u{11F42}\u{1612F}]/u,B31=/[\u0620\u0626\u0628\u062A-\u062E\u0633-\u063F\u0641-\u0647\u0649\u064A\u066E\u066F\u0678-\u0687\u069A-\u06BF\u06C1\u06C2\u06CC\u06CE\u06D0\u06D1\u06FA-\u06FC\u06FF\u0712-\u0714\u071A-\u071D\u071F-\u0727\u0729\u072B\u072D\u072E\u074E-\u0758\u075C-\u076A\u076D-\u0770\u0772\u0775-\u0777\u077A-\u077F\u07CA-\u07EA\u0841-\u0845\u0848\u084A-\u0853\u0855\u0860\u0862-\u0865\u0868\u0886\u0889-\u088D\u08A0-\u08A9\u08AF\u08B0\u08B3-\u08B8\u08BA-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA872\u{10AC0}-\u{10AC4}\u{10ACD}\u{10AD3}-\u{10ADC}\u{10ADE}-\u{10AE0}\u{10AEB}-\u{10AEE}\u{10B80}\u{10B82}\u{10B86}-\u{10B88}\u{10B8A}\u{10B8B}\u{10B8D}\u{10B90}\u{10BAD}\u{10BAE}\u{10D00}-\u{10D21}\u{10D23}\u{10EC3}\u{10EC4}\u{10F30}-\u{10F32}\u{10F34}-\u{10F44}\u{10F51}-\u{10F53}\u{10F70}-\u{10F73}\u{10F76}-\u{10F81}\u{10FB0}\u{10FB2}\u{10FB3}\u{10FB8}\u{10FBB}\u{10FBC}\u{10FBE}\u{10FBF}\u{10FC1}\u{10FC4}\u{10FCA}\u{10FCB}\u{1E900}-\u{1E943}][\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*\u200C[\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*[\u0620\u0622-\u063F\u0641-\u064A\u066E\u066F\u0671-\u0673\u0675-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u077F\u07CA-\u07EA\u0840-\u0858\u0860\u0862-\u0865\u0867-\u086A\u0870-\u0882\u0886\u0889-\u088E\u08A0-\u08AC\u08AE-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA871\u{10AC0}-\u{10AC5}\u{10AC7}\u{10AC9}\u{10ACA}\u{10ACE}-\u{10AD6}\u{10AD8}-\u{10AE1}\u{10AE4}\u{10AEB}-\u{10AEF}\u{10B80}-\u{10B91}\u{10BA9}-\u{10BAE}\u{10D01}-\u{10D23}\u{10EC2}-\u{10EC4}\u{10F30}-\u{10F44}\u{10F51}-\u{10F54}\u{10F70}-\u{10F81}\u{10FB0}\u{10FB2}-\u{10FB6}\u{10FB8}-\u{10FBF}\u{10FC1}-\u{10FC4}\u{10FC9}\u{10FCA}\u{1E900}-\u{1E943}]/u,D31=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,$31=/[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u249C-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCEF}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D800}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]/u,J31=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D4A}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,X31=/^[\0-\x08\x0E-\x1B!-@\[-`\{-\x84\x86-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02B9\u02BA\u02C2-\u02CF\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u036F\u0374\u0375\u037E\u0384\u0385\u0387\u03F6\u0483-\u0489\u058A\u058D-\u058F\u0591-\u05C7\u05D0-\u05EA\u05EF-\u05F4\u0600-\u070D\u070F-\u074A\u074D-\u07B1\u07C0-\u07FA\u07FD-\u082D\u0830-\u083E\u0840-\u085B\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u0897-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09F2\u09F3\u09FB\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AF1\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0BF3-\u0BFA\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C78-\u0C7E\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E3F\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39-\u0F3D\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1390-\u1399\u1400\u169B\u169C\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DB\u17DD\u17F0-\u17F9\u1800-\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1940\u1944\u1945\u19DE-\u19FF\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u200B-\u200D\u200F-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2070\u2074-\u207E\u2080-\u208E\u20A0-\u20C0\u20D0-\u20F0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u2150-\u215F\u2189-\u218B\u2190-\u2335\u237B-\u2394\u2396-\u2429\u2440-\u244A\u2460-\u249B\u24EA-\u26AB\u26AD-\u27FF\u2900-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF9-\u2CFF\u2D7F\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u3004\u3008-\u3020\u302A-\u302D\u3030\u3036\u3037\u303D-\u303F\u3099-\u309C\u30A0\u30FB\u31C0-\u31E5\u31EF\u321D\u321E\u3250-\u325F\u327C-\u327E\u32B1-\u32BF\u32CC-\u32CF\u3377-\u337A\u33DE\u33DF\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA60D-\uA60F\uA66F-\uA67F\uA69E\uA69F\uA6F0\uA6F1\uA700-\uA721\uA788\uA802\uA806\uA80B\uA825\uA826\uA828-\uA82C\uA838\uA839\uA874-\uA877\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uAB6A\uAB6B\uABE5\uABE8\uABED\uFB1D-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD8F\uFD92-\uFDC7\uFDCF\uFDF0-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE74\uFE76-\uFEFC\uFEFF\uFF01-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10101}\u{10140}-\u{1018C}\u{10190}-\u{1019C}\u{101A0}\u{101FD}\u{102E0}-\u{102FB}\u{10376}-\u{1037A}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{1091F}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A38}-\u{10A3A}\u{10A3F}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE6}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B39}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D27}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D69}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAB}-\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10EFC}-\u{10F27}\u{10F30}-\u{10F59}\u{10F70}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{11001}\u{11038}-\u{11046}\u{11052}-\u{11065}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{11660}-\u{1166C}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{11FD5}-\u{11FF1}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE2}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CC00}-\u{1CCD5}\u{1CCF0}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D1E9}\u{1D1EA}\u{1D200}-\u{1D245}\u{1D300}-\u{1D356}\u{1D6C1}\u{1D6DB}\u{1D6FB}\u{1D715}\u{1D735}\u{1D74F}\u{1D76F}\u{1D789}\u{1D7A9}\u{1D7C3}\u{1D7CE}-\u{1D7FF}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E2FF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8D6}\u{1E900}-\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F10F}\u{1F12F}\u{1F16A}-\u{1F16F}\u{1F1AD}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*$/u,E31=/[0-9\xB2\xB3\xB9\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\u{102E1}-\u{102FB}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u,Y31=/[0-9\xB2\xB3\xB9\u06F0-\u06F9\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFF10-\uFF19\u{102E1}-\u{102FB}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}]/u,G31=/[\u0600-\u0605\u0660-\u0669\u066B\u066C\u06DD\u0890\u0891\u08E2\u{10D30}-\u{10D39}\u{10D40}-\u{10D49}\u{10E60}-\u{10E7E}]/u,H31=/^[\0-\x08\x0E-\x1B!-\x84\x86-\u0377\u037A-\u037F\u0384-\u038A\u038C\u038E-\u03A1\u03A3-\u052F\u0531-\u0556\u0559-\u058A\u058D-\u058F\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0606\u0607\u0609\u060A\u060C\u060E-\u061A\u064B-\u065F\u066A\u0670\u06D6-\u06DC\u06DE-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07F6-\u07F9\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A76\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AF1\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B77\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BFA\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C77-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4F\u0D54-\u0D63\u0D66-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E3A\u0E3F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F47\u0F49-\u0F6C\u0F71-\u0F97\u0F99-\u0FBC\u0FBE-\u0FCC\u0FCE-\u0FDA\u1000-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u137C\u1380-\u1399\u13A0-\u13F5\u13F8-\u13FD\u1400-\u167F\u1681-\u169C\u16A0-\u16F8\u1700-\u1715\u171F-\u1736\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u1800-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1940\u1944-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u19DE-\u1A1B\u1A1E-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1AB0-\u1ACE\u1B00-\u1B4C\u1B4E-\u1BF3\u1BFC-\u1C37\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD0-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u200B-\u200E\u2010-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2071\u2074-\u208E\u2090-\u209C\u20A0-\u20C0\u20D0-\u20F0\u2100-\u218B\u2190-\u2429\u2440-\u244A\u2460-\u2B73\u2B76-\u2B95\u2B97-\u2CF3\u2CF9-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u303F\u3041-\u3096\u3099-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31E5\u31EF-\u321E\u3220-\uA48C\uA490-\uA4C6\uA4D0-\uA62B\uA640-\uA6F7\uA700-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA82C\uA830-\uA839\uA840-\uA877\uA880-\uA8C5\uA8CE-\uA8D9\uA8E0-\uA953\uA95F-\uA97C\uA980-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA5C-\uAAC2\uAADB-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB6B\uAB70-\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1E\uFB29\uFD3E-\uFD4F\uFDCF\uFDFD-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}-\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1018E}\u{10190}-\u{1019C}\u{101A0}\u{101D0}-\u{101FD}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E0}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{1037A}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{1091F}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10B39}-\u{10B3F}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6E}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{1104D}\u{11052}-\u{11075}\u{1107F}-\u{110C2}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11100}-\u{11134}\u{11136}-\u{11147}\u{11150}-\u{11176}\u{11180}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{11241}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112EA}\u{112F0}-\u{112F9}\u{11300}-\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133B}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D5}\u{113D7}\u{113D8}\u{113E1}\u{113E2}\u{11400}-\u{1145B}\u{1145D}-\u{11461}\u{11480}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B5}\u{115B8}-\u{115DD}\u{11600}-\u{11644}\u{11650}-\u{11659}\u{11660}-\u{1166C}\u{11680}-\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171D}-\u{1172B}\u{11730}-\u{11746}\u{11800}-\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D7}\u{119DA}-\u{119E4}\u{11A00}-\u{11A47}\u{11A50}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C36}\u{11C38}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D47}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF8}\u{11F00}-\u{11F10}\u{11F12}-\u{11F3A}\u{11F3E}-\u{11F5A}\u{11FB0}\u{11FC0}-\u{11FF1}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{13455}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF0}-\u{16AF5}\u{16B00}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F4F}-\u{16F87}\u{16F8F}-\u{16F9F}\u{16FE0}-\u{16FE4}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}-\u{1BCA3}\u{1CC00}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D1EA}\u{1D200}-\u{1D245}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D300}-\u{1D356}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D7CB}\u{1D7CE}-\u{1DA8B}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E030}-\u{1E06D}\u{1E08F}\u{1E100}-\u{1E12C}\u{1E130}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AE}\u{1E2C0}-\u{1E2F9}\u{1E2FF}\u{1E4D0}-\u{1E4F9}\u{1E5D0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F1AD}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]*$/u,W31=/[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u06F0-\u06F9\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u2488-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E1}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCF9}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D7CE}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F100}-\u{1F10A}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1FBF0}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u;cP.exports={combiningMarks:A31,combiningClassVirama:F31,validZWNJ:B31,bidiDomain:D31,bidiS1LTR:$31,bidiS1RTL:J31,bidiS2:X31,bidiS3:E31,bidiS4EN:Y31,bidiS4AN:G31,bidiS5:H31,bidiS6:W31}});var iP=z((hP1,q31)=>{q31.exports=[[[0,44],2],[[45,46],2],[47,2],[[48,57],2],[[58,64],2],[65,1,"a"],[66,1,"b"],[67,1,"c"],[68,1,"d"],[69,1,"e"],[70,1,"f"],[71,1,"g"],[72,1,"h"],[73,1,"i"],[74,1,"j"],[75,1,"k"],[76,1,"l"],[77,1,"m"],[78,1,"n"],[79,1,"o"],[80,1,"p"],[81,1,"q"],[82,1,"r"],[83,1,"s"],[84,1,"t"],[85,1,"u"],[86,1,"v"],[87,1,"w"],[88,1,"x"],[89,1,"y"],[90,1,"z"],[[91,96],2],[[97,122],2],[[123,127],2],[[128,159],3],[160,1," "],[[161,167],2],[168,1," \u0308"],[169,2],[170,1,"a"],[[171,172],2],[173,7],[174,2],[175,1," \u0304"],[[176,177],2],[178,1,"2"],[179,1,"3"],[180,1," \u0301"],[181,1,"\u03BC"],[182,2],[183,2],[184,1," \u0327"],[185,1,"1"],[186,1,"o"],[187,2],[188,1,"1\u20444"],[189,1,"1\u20442"],[190,1,"3\u20444"],[191,2],[192,1,"\xE0"],[193,1,"\xE1"],[194,1,"\xE2"],[195,1,"\xE3"],[196,1,"\xE4"],[197,1,"\xE5"],[198,1,"\xE6"],[199,1,"\xE7"],[200,1,"\xE8"],[201,1,"\xE9"],[202,1,"\xEA"],[203,1,"\xEB"],[204,1,"\xEC"],[205,1,"\xED"],[206,1,"\xEE"],[207,1,"\xEF"],[208,1,"\xF0"],[209,1,"\xF1"],[210,1,"\xF2"],[211,1,"\xF3"],[212,1,"\xF4"],[213,1,"\xF5"],[214,1,"\xF6"],[215,2],[216,1,"\xF8"],[217,1,"\xF9"],[218,1,"\xFA"],[219,1,"\xFB"],[220,1,"\xFC"],[221,1,"\xFD"],[222,1,"\xFE"],[223,6,"ss"],[[224,246],2],[247,2],[[248,255],2],[256,1,"\u0101"],[257,2],[258,1,"\u0103"],[259,2],[260,1,"\u0105"],[261,2],[262,1,"\u0107"],[263,2],[264,1,"\u0109"],[265,2],[266,1,"\u010B"],[267,2],[268,1,"\u010D"],[269,2],[270,1,"\u010F"],[271,2],[272,1,"\u0111"],[273,2],[274,1,"\u0113"],[275,2],[276,1,"\u0115"],[277,2],[278,1,"\u0117"],[279,2],[280,1,"\u0119"],[281,2],[282,1,"\u011B"],[283,2],[284,1,"\u011D"],[285,2],[286,1,"\u011F"],[287,2],[288,1,"\u0121"],[289,2],[290,1,"\u0123"],[291,2],[292,1,"\u0125"],[293,2],[294,1,"\u0127"],[295,2],[296,1,"\u0129"],[297,2],[298,1,"\u012B"],[299,2],[300,1,"\u012D"],[301,2],[302,1,"\u012F"],[303,2],[304,1,"i\u0307"],[305,2],[[306,307],1,"ij"],[308,1,"\u0135"],[309,2],[310,1,"\u0137"],[[311,312],2],[313,1,"\u013A"],[314,2],[315,1,"\u013C"],[316,2],[317,1,"\u013E"],[318,2],[[319,320],1,"l\xB7"],[321,1,"\u0142"],[322,2],[323,1,"\u0144"],[324,2],[325,1,"\u0146"],[326,2],[327,1,"\u0148"],[328,2],[329,1,"\u02BCn"],[330,1,"\u014B"],[331,2],[332,1,"\u014D"],[333,2],[334,1,"\u014F"],[335,2],[336,1,"\u0151"],[337,2],[338,1,"\u0153"],[339,2],[340,1,"\u0155"],[341,2],[342,1,"\u0157"],[343,2],[344,1,"\u0159"],[345,2],[346,1,"\u015B"],[347,2],[348,1,"\u015D"],[349,2],[350,1,"\u015F"],[351,2],[352,1,"\u0161"],[353,2],[354,1,"\u0163"],[355,2],[356,1,"\u0165"],[357,2],[358,1,"\u0167"],[359,2],[360,1,"\u0169"],[361,2],[362,1,"\u016B"],[363,2],[364,1,"\u016D"],[365,2],[366,1,"\u016F"],[367,2],[368,1,"\u0171"],[369,2],[370,1,"\u0173"],[371,2],[372,1,"\u0175"],[373,2],[374,1,"\u0177"],[375,2],[376,1,"\xFF"],[377,1,"\u017A"],[378,2],[379,1,"\u017C"],[380,2],[381,1,"\u017E"],[382,2],[383,1,"s"],[384,2],[385,1,"\u0253"],[386,1,"\u0183"],[387,2],[388,1,"\u0185"],[389,2],[390,1,"\u0254"],[391,1,"\u0188"],[392,2],[393,1,"\u0256"],[394,1,"\u0257"],[395,1,"\u018C"],[[396,397],2],[398,1,"\u01DD"],[399,1,"\u0259"],[400,1,"\u025B"],[401,1,"\u0192"],[402,2],[403,1,"\u0260"],[404,1,"\u0263"],[405,2],[406,1,"\u0269"],[407,1,"\u0268"],[408,1,"\u0199"],[[409,411],2],[412,1,"\u026F"],[413,1,"\u0272"],[414,2],[415,1,"\u0275"],[416,1,"\u01A1"],[417,2],[418,1,"\u01A3"],[419,2],[420,1,"\u01A5"],[421,2],[422,1,"\u0280"],[423,1,"\u01A8"],[424,2],[425,1,"\u0283"],[[426,427],2],[428,1,"\u01AD"],[429,2],[430,1,"\u0288"],[431,1,"\u01B0"],[432,2],[433,1,"\u028A"],[434,1,"\u028B"],[435,1,"\u01B4"],[436,2],[437,1,"\u01B6"],[438,2],[439,1,"\u0292"],[440,1,"\u01B9"],[[441,443],2],[444,1,"\u01BD"],[[445,451],2],[[452,454],1,"d\u017E"],[[455,457],1,"lj"],[[458,460],1,"nj"],[461,1,"\u01CE"],[462,2],[463,1,"\u01D0"],[464,2],[465,1,"\u01D2"],[466,2],[467,1,"\u01D4"],[468,2],[469,1,"\u01D6"],[470,2],[471,1,"\u01D8"],[472,2],[473,1,"\u01DA"],[474,2],[475,1,"\u01DC"],[[476,477],2],[478,1,"\u01DF"],[479,2],[480,1,"\u01E1"],[481,2],[482,1,"\u01E3"],[483,2],[484,1,"\u01E5"],[485,2],[486,1,"\u01E7"],[487,2],[488,1,"\u01E9"],[489,2],[490,1,"\u01EB"],[491,2],[492,1,"\u01ED"],[493,2],[494,1,"\u01EF"],[[495,496],2],[[497,499],1,"dz"],[500,1,"\u01F5"],[501,2],[502,1,"\u0195"],[503,1,"\u01BF"],[504,1,"\u01F9"],[505,2],[506,1,"\u01FB"],[507,2],[508,1,"\u01FD"],[509,2],[510,1,"\u01FF"],[511,2],[512,1,"\u0201"],[513,2],[514,1,"\u0203"],[515,2],[516,1,"\u0205"],[517,2],[518,1,"\u0207"],[519,2],[520,1,"\u0209"],[521,2],[522,1,"\u020B"],[523,2],[524,1,"\u020D"],[525,2],[526,1,"\u020F"],[527,2],[528,1,"\u0211"],[529,2],[530,1,"\u0213"],[531,2],[532,1,"\u0215"],[533,2],[534,1,"\u0217"],[535,2],[536,1,"\u0219"],[537,2],[538,1,"\u021B"],[539,2],[540,1,"\u021D"],[541,2],[542,1,"\u021F"],[543,2],[544,1,"\u019E"],[545,2],[546,1,"\u0223"],[547,2],[548,1,"\u0225"],[549,2],[550,1,"\u0227"],[551,2],[552,1,"\u0229"],[553,2],[554,1,"\u022B"],[555,2],[556,1,"\u022D"],[557,2],[558,1,"\u022F"],[559,2],[560,1,"\u0231"],[561,2],[562,1,"\u0233"],[563,2],[[564,566],2],[[567,569],2],[570,1,"\u2C65"],[571,1,"\u023C"],[572,2],[573,1,"\u019A"],[574,1,"\u2C66"],[[575,576],2],[577,1,"\u0242"],[578,2],[579,1,"\u0180"],[580,1,"\u0289"],[581,1,"\u028C"],[582,1,"\u0247"],[583,2],[584,1,"\u0249"],[585,2],[586,1,"\u024B"],[587,2],[588,1,"\u024D"],[589,2],[590,1,"\u024F"],[591,2],[[592,680],2],[[681,685],2],[[686,687],2],[688,1,"h"],[689,1,"\u0266"],[690,1,"j"],[691,1,"r"],[692,1,"\u0279"],[693,1,"\u027B"],[694,1,"\u0281"],[695,1,"w"],[696,1,"y"],[[697,705],2],[[706,709],2],[[710,721],2],[[722,727],2],[728,1," \u0306"],[729,1," \u0307"],[730,1," \u030A"],[731,1," \u0328"],[732,1," \u0303"],[733,1," \u030B"],[734,2],[735,2],[736,1,"\u0263"],[737,1,"l"],[738,1,"s"],[739,1,"x"],[740,1,"\u0295"],[[741,745],2],[[746,747],2],[748,2],[749,2],[750,2],[[751,767],2],[[768,831],2],[832,1,"\u0300"],[833,1,"\u0301"],[834,2],[835,1,"\u0313"],[836,1,"\u0308\u0301"],[837,1,"\u03B9"],[[838,846],2],[847,7],[[848,855],2],[[856,860],2],[[861,863],2],[[864,865],2],[866,2],[[867,879],2],[880,1,"\u0371"],[881,2],[882,1,"\u0373"],[883,2],[884,1,"\u02B9"],[885,2],[886,1,"\u0377"],[887,2],[[888,889],3],[890,1," \u03B9"],[[891,893],2],[894,1,";"],[895,1,"\u03F3"],[[896,899],3],[900,1," \u0301"],[901,1," \u0308\u0301"],[902,1,"\u03AC"],[903,1,"\xB7"],[904,1,"\u03AD"],[905,1,"\u03AE"],[906,1,"\u03AF"],[907,3],[908,1,"\u03CC"],[909,3],[910,1,"\u03CD"],[911,1,"\u03CE"],[912,2],[913,1,"\u03B1"],[914,1,"\u03B2"],[915,1,"\u03B3"],[916,1,"\u03B4"],[917,1,"\u03B5"],[918,1,"\u03B6"],[919,1,"\u03B7"],[920,1,"\u03B8"],[921,1,"\u03B9"],[922,1,"\u03BA"],[923,1,"\u03BB"],[924,1,"\u03BC"],[925,1,"\u03BD"],[926,1,"\u03BE"],[927,1,"\u03BF"],[928,1,"\u03C0"],[929,1,"\u03C1"],[930,3],[931,1,"\u03C3"],[932,1,"\u03C4"],[933,1,"\u03C5"],[934,1,"\u03C6"],[935,1,"\u03C7"],[936,1,"\u03C8"],[937,1,"\u03C9"],[938,1,"\u03CA"],[939,1,"\u03CB"],[[940,961],2],[962,6,"\u03C3"],[[963,974],2],[975,1,"\u03D7"],[976,1,"\u03B2"],[977,1,"\u03B8"],[978,1,"\u03C5"],[979,1,"\u03CD"],[980,1,"\u03CB"],[981,1,"\u03C6"],[982,1,"\u03C0"],[983,2],[984,1,"\u03D9"],[985,2],[986,1,"\u03DB"],[987,2],[988,1,"\u03DD"],[989,2],[990,1,"\u03DF"],[991,2],[992,1,"\u03E1"],[993,2],[994,1,"\u03E3"],[995,2],[996,1,"\u03E5"],[997,2],[998,1,"\u03E7"],[999,2],[1000,1,"\u03E9"],[1001,2],[1002,1,"\u03EB"],[1003,2],[1004,1,"\u03ED"],[1005,2],[1006,1,"\u03EF"],[1007,2],[1008,1,"\u03BA"],[1009,1,"\u03C1"],[1010,1,"\u03C3"],[1011,2],[1012,1,"\u03B8"],[1013,1,"\u03B5"],[1014,2],[1015,1,"\u03F8"],[1016,2],[1017,1,"\u03C3"],[1018,1,"\u03FB"],[1019,2],[1020,2],[1021,1,"\u037B"],[1022,1,"\u037C"],[1023,1,"\u037D"],[1024,1,"\u0450"],[1025,1,"\u0451"],[1026,1,"\u0452"],[1027,1,"\u0453"],[1028,1,"\u0454"],[1029,1,"\u0455"],[1030,1,"\u0456"],[1031,1,"\u0457"],[1032,1,"\u0458"],[1033,1,"\u0459"],[1034,1,"\u045A"],[1035,1,"\u045B"],[1036,1,"\u045C"],[1037,1,"\u045D"],[1038,1,"\u045E"],[1039,1,"\u045F"],[1040,1,"\u0430"],[1041,1,"\u0431"],[1042,1,"\u0432"],[1043,1,"\u0433"],[1044,1,"\u0434"],[1045,1,"\u0435"],[1046,1,"\u0436"],[1047,1,"\u0437"],[1048,1,"\u0438"],[1049,1,"\u0439"],[1050,1,"\u043A"],[1051,1,"\u043B"],[1052,1,"\u043C"],[1053,1,"\u043D"],[1054,1,"\u043E"],[1055,1,"\u043F"],[1056,1,"\u0440"],[1057,1,"\u0441"],[1058,1,"\u0442"],[1059,1,"\u0443"],[1060,1,"\u0444"],[1061,1,"\u0445"],[1062,1,"\u0446"],[1063,1,"\u0447"],[1064,1,"\u0448"],[1065,1,"\u0449"],[1066,1,"\u044A"],[1067,1,"\u044B"],[1068,1,"\u044C"],[1069,1,"\u044D"],[1070,1,"\u044E"],[1071,1,"\u044F"],[[1072,1103],2],[1104,2],[[1105,1116],2],[1117,2],[[1118,1119],2],[1120,1,"\u0461"],[1121,2],[1122,1,"\u0463"],[1123,2],[1124,1,"\u0465"],[1125,2],[1126,1,"\u0467"],[1127,2],[1128,1,"\u0469"],[1129,2],[1130,1,"\u046B"],[1131,2],[1132,1,"\u046D"],[1133,2],[1134,1,"\u046F"],[1135,2],[1136,1,"\u0471"],[1137,2],[1138,1,"\u0473"],[1139,2],[1140,1,"\u0475"],[1141,2],[1142,1,"\u0477"],[1143,2],[1144,1,"\u0479"],[1145,2],[1146,1,"\u047B"],[1147,2],[1148,1,"\u047D"],[1149,2],[1150,1,"\u047F"],[1151,2],[1152,1,"\u0481"],[1153,2],[1154,2],[[1155,1158],2],[1159,2],[[1160,1161],2],[1162,1,"\u048B"],[1163,2],[1164,1,"\u048D"],[1165,2],[1166,1,"\u048F"],[1167,2],[1168,1,"\u0491"],[1169,2],[1170,1,"\u0493"],[1171,2],[1172,1,"\u0495"],[1173,2],[1174,1,"\u0497"],[1175,2],[1176,1,"\u0499"],[1177,2],[1178,1,"\u049B"],[1179,2],[1180,1,"\u049D"],[1181,2],[1182,1,"\u049F"],[1183,2],[1184,1,"\u04A1"],[1185,2],[1186,1,"\u04A3"],[1187,2],[1188,1,"\u04A5"],[1189,2],[1190,1,"\u04A7"],[1191,2],[1192,1,"\u04A9"],[1193,2],[1194,1,"\u04AB"],[1195,2],[1196,1,"\u04AD"],[1197,2],[1198,1,"\u04AF"],[1199,2],[1200,1,"\u04B1"],[1201,2],[1202,1,"\u04B3"],[1203,2],[1204,1,"\u04B5"],[1205,2],[1206,1,"\u04B7"],[1207,2],[1208,1,"\u04B9"],[1209,2],[1210,1,"\u04BB"],[1211,2],[1212,1,"\u04BD"],[1213,2],[1214,1,"\u04BF"],[1215,2],[1216,1,"\u04CF"],[1217,1,"\u04C2"],[1218,2],[1219,1,"\u04C4"],[1220,2],[1221,1,"\u04C6"],[1222,2],[1223,1,"\u04C8"],[1224,2],[1225,1,"\u04CA"],[1226,2],[1227,1,"\u04CC"],[1228,2],[1229,1,"\u04CE"],[1230,2],[1231,2],[1232,1,"\u04D1"],[1233,2],[1234,1,"\u04D3"],[1235,2],[1236,1,"\u04D5"],[1237,2],[1238,1,"\u04D7"],[1239,2],[1240,1,"\u04D9"],[1241,2],[1242,1,"\u04DB"],[1243,2],[1244,1,"\u04DD"],[1245,2],[1246,1,"\u04DF"],[1247,2],[1248,1,"\u04E1"],[1249,2],[1250,1,"\u04E3"],[1251,2],[1252,1,"\u04E5"],[1253,2],[1254,1,"\u04E7"],[1255,2],[1256,1,"\u04E9"],[1257,2],[1258,1,"\u04EB"],[1259,2],[1260,1,"\u04ED"],[1261,2],[1262,1,"\u04EF"],[1263,2],[1264,1,"\u04F1"],[1265,2],[1266,1,"\u04F3"],[1267,2],[1268,1,"\u04F5"],[1269,2],[1270,1,"\u04F7"],[1271,2],[1272,1,"\u04F9"],[1273,2],[1274,1,"\u04FB"],[1275,2],[1276,1,"\u04FD"],[1277,2],[1278,1,"\u04FF"],[1279,2],[1280,1,"\u0501"],[1281,2],[1282,1,"\u0503"],[1283,2],[1284,1,"\u0505"],[1285,2],[1286,1,"\u0507"],[1287,2],[1288,1,"\u0509"],[1289,2],[1290,1,"\u050B"],[1291,2],[1292,1,"\u050D"],[1293,2],[1294,1,"\u050F"],[1295,2],[1296,1,"\u0511"],[1297,2],[1298,1,"\u0513"],[1299,2],[1300,1,"\u0515"],[1301,2],[1302,1,"\u0517"],[1303,2],[1304,1,"\u0519"],[1305,2],[1306,1,"\u051B"],[1307,2],[1308,1,"\u051D"],[1309,2],[1310,1,"\u051F"],[1311,2],[1312,1,"\u0521"],[1313,2],[1314,1,"\u0523"],[1315,2],[1316,1,"\u0525"],[1317,2],[1318,1,"\u0527"],[1319,2],[1320,1,"\u0529"],[1321,2],[1322,1,"\u052B"],[1323,2],[1324,1,"\u052D"],[1325,2],[1326,1,"\u052F"],[1327,2],[1328,3],[1329,1,"\u0561"],[1330,1,"\u0562"],[1331,1,"\u0563"],[1332,1,"\u0564"],[1333,1,"\u0565"],[1334,1,"\u0566"],[1335,1,"\u0567"],[1336,1,"\u0568"],[1337,1,"\u0569"],[1338,1,"\u056A"],[1339,1,"\u056B"],[1340,1,"\u056C"],[1341,1,"\u056D"],[1342,1,"\u056E"],[1343,1,"\u056F"],[1344,1,"\u0570"],[1345,1,"\u0571"],[1346,1,"\u0572"],[1347,1,"\u0573"],[1348,1,"\u0574"],[1349,1,"\u0575"],[1350,1,"\u0576"],[1351,1,"\u0577"],[1352,1,"\u0578"],[1353,1,"\u0579"],[1354,1,"\u057A"],[1355,1,"\u057B"],[1356,1,"\u057C"],[1357,1,"\u057D"],[1358,1,"\u057E"],[1359,1,"\u057F"],[1360,1,"\u0580"],[1361,1,"\u0581"],[1362,1,"\u0582"],[1363,1,"\u0583"],[1364,1,"\u0584"],[1365,1,"\u0585"],[1366,1,"\u0586"],[[1367,1368],3],[1369,2],[[1370,1375],2],[1376,2],[[1377,1414],2],[1415,1,"\u0565\u0582"],[1416,2],[1417,2],[1418,2],[[1419,1420],3],[[1421,1422],2],[1423,2],[1424,3],[[1425,1441],2],[1442,2],[[1443,1455],2],[[1456,1465],2],[1466,2],[[1467,1469],2],[1470,2],[1471,2],[1472,2],[[1473,1474],2],[1475,2],[1476,2],[1477,2],[1478,2],[1479,2],[[1480,1487],3],[[1488,1514],2],[[1515,1518],3],[1519,2],[[1520,1524],2],[[1525,1535],3],[[1536,1539],3],[1540,3],[1541,3],[[1542,1546],2],[1547,2],[1548,2],[[1549,1551],2],[[1552,1557],2],[[1558,1562],2],[1563,2],[1564,3],[1565,2],[1566,2],[1567,2],[1568,2],[[1569,1594],2],[[1595,1599],2],[1600,2],[[1601,1618],2],[[1619,1621],2],[[1622,1624],2],[[1625,1630],2],[1631,2],[[1632,1641],2],[[1642,1645],2],[[1646,1647],2],[[1648,1652],2],[1653,1,"\u0627\u0674"],[1654,1,"\u0648\u0674"],[1655,1,"\u06C7\u0674"],[1656,1,"\u064A\u0674"],[[1657,1719],2],[[1720,1721],2],[[1722,1726],2],[1727,2],[[1728,1742],2],[1743,2],[[1744,1747],2],[1748,2],[[1749,1756],2],[1757,3],[1758,2],[[1759,1768],2],[1769,2],[[1770,1773],2],[[1774,1775],2],[[1776,1785],2],[[1786,1790],2],[1791,2],[[1792,1805],2],[1806,3],[1807,3],[[1808,1836],2],[[1837,1839],2],[[1840,1866],2],[[1867,1868],3],[[1869,1871],2],[[1872,1901],2],[[1902,1919],2],[[1920,1968],2],[1969,2],[[1970,1983],3],[[1984,2037],2],[[2038,2042],2],[[2043,2044],3],[2045,2],[[2046,2047],2],[[2048,2093],2],[[2094,2095],3],[[2096,2110],2],[2111,3],[[2112,2139],2],[[2140,2141],3],[2142,2],[2143,3],[[2144,2154],2],[[2155,2159],3],[[2160,2183],2],[2184,2],[[2185,2190],2],[2191,3],[[2192,2193],3],[[2194,2198],3],[2199,2],[[2200,2207],2],[2208,2],[2209,2],[[2210,2220],2],[[2221,2226],2],[[2227,2228],2],[2229,2],[[2230,2237],2],[[2238,2247],2],[[2248,2258],2],[2259,2],[[2260,2273],2],[2274,3],[2275,2],[[2276,2302],2],[2303,2],[2304,2],[[2305,2307],2],[2308,2],[[2309,2361],2],[[2362,2363],2],[[2364,2381],2],[2382,2],[2383,2],[[2384,2388],2],[2389,2],[[2390,2391],2],[2392,1,"\u0915\u093C"],[2393,1,"\u0916\u093C"],[2394,1,"\u0917\u093C"],[2395,1,"\u091C\u093C"],[2396,1,"\u0921\u093C"],[2397,1,"\u0922\u093C"],[2398,1,"\u092B\u093C"],[2399,1,"\u092F\u093C"],[[2400,2403],2],[[2404,2405],2],[[2406,2415],2],[2416,2],[[2417,2418],2],[[2419,2423],2],[2424,2],[[2425,2426],2],[[2427,2428],2],[2429,2],[[2430,2431],2],[2432,2],[[2433,2435],2],[2436,3],[[2437,2444],2],[[2445,2446],3],[[2447,2448],2],[[2449,2450],3],[[2451,2472],2],[2473,3],[[2474,2480],2],[2481,3],[2482,2],[[2483,2485],3],[[2486,2489],2],[[2490,2491],3],[2492,2],[2493,2],[[2494,2500],2],[[2501,2502],3],[[2503,2504],2],[[2505,2506],3],[[2507,2509],2],[2510,2],[[2511,2518],3],[2519,2],[[2520,2523],3],[2524,1,"\u09A1\u09BC"],[2525,1,"\u09A2\u09BC"],[2526,3],[2527,1,"\u09AF\u09BC"],[[2528,2531],2],[[2532,2533],3],[[2534,2545],2],[[2546,2554],2],[2555,2],[2556,2],[2557,2],[2558,2],[[2559,2560],3],[2561,2],[2562,2],[2563,2],[2564,3],[[2565,2570],2],[[2571,2574],3],[[2575,2576],2],[[2577,2578],3],[[2579,2600],2],[2601,3],[[2602,2608],2],[2609,3],[2610,2],[2611,1,"\u0A32\u0A3C"],[2612,3],[2613,2],[2614,1,"\u0A38\u0A3C"],[2615,3],[[2616,2617],2],[[2618,2619],3],[2620,2],[2621,3],[[2622,2626],2],[[2627,2630],3],[[2631,2632],2],[[2633,2634],3],[[2635,2637],2],[[2638,2640],3],[2641,2],[[2642,2648],3],[2649,1,"\u0A16\u0A3C"],[2650,1,"\u0A17\u0A3C"],[2651,1,"\u0A1C\u0A3C"],[2652,2],[2653,3],[2654,1,"\u0A2B\u0A3C"],[[2655,2661],3],[[2662,2676],2],[2677,2],[2678,2],[[2679,2688],3],[[2689,2691],2],[2692,3],[[2693,2699],2],[2700,2],[2701,2],[2702,3],[[2703,2705],2],[2706,3],[[2707,2728],2],[2729,3],[[2730,2736],2],[2737,3],[[2738,2739],2],[2740,3],[[2741,2745],2],[[2746,2747],3],[[2748,2757],2],[2758,3],[[2759,2761],2],[2762,3],[[2763,2765],2],[[2766,2767],3],[2768,2],[[2769,2783],3],[2784,2],[[2785,2787],2],[[2788,2789],3],[[2790,2799],2],[2800,2],[2801,2],[[2802,2808],3],[2809,2],[[2810,2815],2],[2816,3],[[2817,2819],2],[2820,3],[[2821,2828],2],[[2829,2830],3],[[2831,2832],2],[[2833,2834],3],[[2835,2856],2],[2857,3],[[2858,2864],2],[2865,3],[[2866,2867],2],[2868,3],[2869,2],[[2870,2873],2],[[2874,2875],3],[[2876,2883],2],[2884,2],[[2885,2886],3],[[2887,2888],2],[[2889,2890],3],[[2891,2893],2],[[2894,2900],3],[2901,2],[[2902,2903],2],[[2904,2907],3],[2908,1,"\u0B21\u0B3C"],[2909,1,"\u0B22\u0B3C"],[2910,3],[[2911,2913],2],[[2914,2915],2],[[2916,2917],3],[[2918,2927],2],[2928,2],[2929,2],[[2930,2935],2],[[2936,2945],3],[[2946,2947],2],[2948,3],[[2949,2954],2],[[2955,2957],3],[[2958,2960],2],[2961,3],[[2962,2965],2],[[2966,2968],3],[[2969,2970],2],[2971,3],[2972,2],[2973,3],[[2974,2975],2],[[2976,2978],3],[[2979,2980],2],[[2981,2983],3],[[2984,2986],2],[[2987,2989],3],[[2990,2997],2],[2998,2],[[2999,3001],2],[[3002,3005],3],[[3006,3010],2],[[3011,3013],3],[[3014,3016],2],[3017,3],[[3018,3021],2],[[3022,3023],3],[3024,2],[[3025,3030],3],[3031,2],[[3032,3045],3],[3046,2],[[3047,3055],2],[[3056,3058],2],[[3059,3066],2],[[3067,3071],3],[3072,2],[[3073,3075],2],[3076,2],[[3077,3084],2],[3085,3],[[3086,3088],2],[3089,3],[[3090,3112],2],[3113,3],[[3114,3123],2],[3124,2],[[3125,3129],2],[[3130,3131],3],[3132,2],[3133,2],[[3134,3140],2],[3141,3],[[3142,3144],2],[3145,3],[[3146,3149],2],[[3150,3156],3],[[3157,3158],2],[3159,3],[[3160,3161],2],[3162,2],[[3163,3164],3],[3165,2],[[3166,3167],3],[[3168,3169],2],[[3170,3171],2],[[3172,3173],3],[[3174,3183],2],[[3184,3190],3],[3191,2],[[3192,3199],2],[3200,2],[3201,2],[[3202,3203],2],[3204,2],[[3205,3212],2],[3213,3],[[3214,3216],2],[3217,3],[[3218,3240],2],[3241,3],[[3242,3251],2],[3252,3],[[3253,3257],2],[[3258,3259],3],[[3260,3261],2],[[3262,3268],2],[3269,3],[[3270,3272],2],[3273,3],[[3274,3277],2],[[3278,3284],3],[[3285,3286],2],[[3287,3292],3],[3293,2],[3294,2],[3295,3],[[3296,3297],2],[[3298,3299],2],[[3300,3301],3],[[3302,3311],2],[3312,3],[[3313,3314],2],[3315,2],[[3316,3327],3],[3328,2],[3329,2],[[3330,3331],2],[3332,2],[[3333,3340],2],[3341,3],[[3342,3344],2],[3345,3],[[3346,3368],2],[3369,2],[[3370,3385],2],[3386,2],[[3387,3388],2],[3389,2],[[3390,3395],2],[3396,2],[3397,3],[[3398,3400],2],[3401,3],[[3402,3405],2],[3406,2],[3407,2],[[3408,3411],3],[[3412,3414],2],[3415,2],[[3416,3422],2],[3423,2],[[3424,3425],2],[[3426,3427],2],[[3428,3429],3],[[3430,3439],2],[[3440,3445],2],[[3446,3448],2],[3449,2],[[3450,3455],2],[3456,3],[3457,2],[[3458,3459],2],[3460,3],[[3461,3478],2],[[3479,3481],3],[[3482,3505],2],[3506,3],[[3507,3515],2],[3516,3],[3517,2],[[3518,3519],3],[[3520,3526],2],[[3527,3529],3],[3530,2],[[3531,3534],3],[[3535,3540],2],[3541,3],[3542,2],[3543,3],[[3544,3551],2],[[3552,3557],3],[[3558,3567],2],[[3568,3569],3],[[3570,3571],2],[3572,2],[[3573,3584],3],[[3585,3634],2],[3635,1,"\u0E4D\u0E32"],[[3636,3642],2],[[3643,3646],3],[3647,2],[[3648,3662],2],[3663,2],[[3664,3673],2],[[3674,3675],2],[[3676,3712],3],[[3713,3714],2],[3715,3],[3716,2],[3717,3],[3718,2],[[3719,3720],2],[3721,2],[3722,2],[3723,3],[3724,2],[3725,2],[[3726,3731],2],[[3732,3735],2],[3736,2],[[3737,3743],2],[3744,2],[[3745,3747],2],[3748,3],[3749,2],[3750,3],[3751,2],[[3752,3753],2],[[3754,3755],2],[3756,2],[[3757,3762],2],[3763,1,"\u0ECD\u0EB2"],[[3764,3769],2],[3770,2],[[3771,3773],2],[[3774,3775],3],[[3776,3780],2],[3781,3],[3782,2],[3783,3],[[3784,3789],2],[3790,2],[3791,3],[[3792,3801],2],[[3802,3803],3],[3804,1,"\u0EAB\u0E99"],[3805,1,"\u0EAB\u0EA1"],[[3806,3807],2],[[3808,3839],3],[3840,2],[[3841,3850],2],[3851,2],[3852,1,"\u0F0B"],[[3853,3863],2],[[3864,3865],2],[[3866,3871],2],[[3872,3881],2],[[3882,3892],2],[3893,2],[3894,2],[3895,2],[3896,2],[3897,2],[[3898,3901],2],[[3902,3906],2],[3907,1,"\u0F42\u0FB7"],[[3908,3911],2],[3912,3],[[3913,3916],2],[3917,1,"\u0F4C\u0FB7"],[[3918,3921],2],[3922,1,"\u0F51\u0FB7"],[[3923,3926],2],[3927,1,"\u0F56\u0FB7"],[[3928,3931],2],[3932,1,"\u0F5B\u0FB7"],[[3933,3944],2],[3945,1,"\u0F40\u0FB5"],[3946,2],[[3947,3948],2],[[3949,3952],3],[[3953,3954],2],[3955,1,"\u0F71\u0F72"],[3956,2],[3957,1,"\u0F71\u0F74"],[3958,1,"\u0FB2\u0F80"],[3959,1,"\u0FB2\u0F71\u0F80"],[3960,1,"\u0FB3\u0F80"],[3961,1,"\u0FB3\u0F71\u0F80"],[[3962,3968],2],[3969,1,"\u0F71\u0F80"],[[3970,3972],2],[3973,2],[[3974,3979],2],[[3980,3983],2],[[3984,3986],2],[3987,1,"\u0F92\u0FB7"],[[3988,3989],2],[3990,2],[3991,2],[3992,3],[[3993,3996],2],[3997,1,"\u0F9C\u0FB7"],[[3998,4001],2],[4002,1,"\u0FA1\u0FB7"],[[4003,4006],2],[4007,1,"\u0FA6\u0FB7"],[[4008,4011],2],[4012,1,"\u0FAB\u0FB7"],[4013,2],[[4014,4016],2],[[4017,4023],2],[4024,2],[4025,1,"\u0F90\u0FB5"],[[4026,4028],2],[4029,3],[[4030,4037],2],[4038,2],[[4039,4044],2],[4045,3],[4046,2],[4047,2],[[4048,4049],2],[[4050,4052],2],[[4053,4056],2],[[4057,4058],2],[[4059,4095],3],[[4096,4129],2],[4130,2],[[4131,4135],2],[4136,2],[[4137,4138],2],[4139,2],[[4140,4146],2],[[4147,4149],2],[[4150,4153],2],[[4154,4159],2],[[4160,4169],2],[[4170,4175],2],[[4176,4185],2],[[4186,4249],2],[[4250,4253],2],[[4254,4255],2],[4256,1,"\u2D00"],[4257,1,"\u2D01"],[4258,1,"\u2D02"],[4259,1,"\u2D03"],[4260,1,"\u2D04"],[4261,1,"\u2D05"],[4262,1,"\u2D06"],[4263,1,"\u2D07"],[4264,1,"\u2D08"],[4265,1,"\u2D09"],[4266,1,"\u2D0A"],[4267,1,"\u2D0B"],[4268,1,"\u2D0C"],[4269,1,"\u2D0D"],[4270,1,"\u2D0E"],[4271,1,"\u2D0F"],[4272,1,"\u2D10"],[4273,1,"\u2D11"],[4274,1,"\u2D12"],[4275,1,"\u2D13"],[4276,1,"\u2D14"],[4277,1,"\u2D15"],[4278,1,"\u2D16"],[4279,1,"\u2D17"],[4280,1,"\u2D18"],[4281,1,"\u2D19"],[4282,1,"\u2D1A"],[4283,1,"\u2D1B"],[4284,1,"\u2D1C"],[4285,1,"\u2D1D"],[4286,1,"\u2D1E"],[4287,1,"\u2D1F"],[4288,1,"\u2D20"],[4289,1,"\u2D21"],[4290,1,"\u2D22"],[4291,1,"\u2D23"],[4292,1,"\u2D24"],[4293,1,"\u2D25"],[4294,3],[4295,1,"\u2D27"],[[4296,4300],3],[4301,1,"\u2D2D"],[[4302,4303],3],[[4304,4342],2],[[4343,4344],2],[[4345,4346],2],[4347,2],[4348,1,"\u10DC"],[[4349,4351],2],[[4352,4441],2],[[4442,4446],2],[[4447,4448],7],[[4449,4514],2],[[4515,4519],2],[[4520,4601],2],[[4602,4607],2],[[4608,4614],2],[4615,2],[[4616,4678],2],[4679,2],[4680,2],[4681,3],[[4682,4685],2],[[4686,4687],3],[[4688,4694],2],[4695,3],[4696,2],[4697,3],[[4698,4701],2],[[4702,4703],3],[[4704,4742],2],[4743,2],[4744,2],[4745,3],[[4746,4749],2],[[4750,4751],3],[[4752,4782],2],[4783,2],[4784,2],[4785,3],[[4786,4789],2],[[4790,4791],3],[[4792,4798],2],[4799,3],[4800,2],[4801,3],[[4802,4805],2],[[4806,4807],3],[[4808,4814],2],[4815,2],[[4816,4822],2],[4823,3],[[4824,4846],2],[4847,2],[[4848,4878],2],[4879,2],[4880,2],[4881,3],[[4882,4885],2],[[4886,4887],3],[[4888,4894],2],[4895,2],[[4896,4934],2],[4935,2],[[4936,4954],2],[[4955,4956],3],[[4957,4958],2],[4959,2],[4960,2],[[4961,4988],2],[[4989,4991],3],[[4992,5007],2],[[5008,5017],2],[[5018,5023],3],[[5024,5108],2],[5109,2],[[5110,5111],3],[5112,1,"\u13F0"],[5113,1,"\u13F1"],[5114,1,"\u13F2"],[5115,1,"\u13F3"],[5116,1,"\u13F4"],[5117,1,"\u13F5"],[[5118,5119],3],[5120,2],[[5121,5740],2],[[5741,5742],2],[[5743,5750],2],[[5751,5759],2],[5760,3],[[5761,5786],2],[[5787,5788],2],[[5789,5791],3],[[5792,5866],2],[[5867,5872],2],[[5873,5880],2],[[5881,5887],3],[[5888,5900],2],[5901,2],[[5902,5908],2],[5909,2],[[5910,5918],3],[5919,2],[[5920,5940],2],[[5941,5942],2],[[5943,5951],3],[[5952,5971],2],[[5972,5983],3],[[5984,5996],2],[5997,3],[[5998,6000],2],[6001,3],[[6002,6003],2],[[6004,6015],3],[[6016,6067],2],[[6068,6069],7],[[6070,6099],2],[[6100,6102],2],[6103,2],[[6104,6107],2],[6108,2],[6109,2],[[6110,6111],3],[[6112,6121],2],[[6122,6127],3],[[6128,6137],2],[[6138,6143],3],[[6144,6154],2],[[6155,6158],7],[6159,7],[[6160,6169],2],[[6170,6175],3],[[6176,6263],2],[6264,2],[[6265,6271],3],[[6272,6313],2],[6314,2],[[6315,6319],3],[[6320,6389],2],[[6390,6399],3],[[6400,6428],2],[[6429,6430],2],[6431,3],[[6432,6443],2],[[6444,6447],3],[[6448,6459],2],[[6460,6463],3],[6464,2],[[6465,6467],3],[[6468,6469],2],[[6470,6509],2],[[6510,6511],3],[[6512,6516],2],[[6517,6527],3],[[6528,6569],2],[[6570,6571],2],[[6572,6575],3],[[6576,6601],2],[[6602,6607],3],[[6608,6617],2],[6618,2],[[6619,6621],3],[[6622,6623],2],[[6624,6655],2],[[6656,6683],2],[[6684,6685],3],[[6686,6687],2],[[6688,6750],2],[6751,3],[[6752,6780],2],[[6781,6782],3],[[6783,6793],2],[[6794,6799],3],[[6800,6809],2],[[6810,6815],3],[[6816,6822],2],[6823,2],[[6824,6829],2],[[6830,6831],3],[[6832,6845],2],[6846,2],[[6847,6848],2],[[6849,6862],2],[[6863,6911],3],[[6912,6987],2],[6988,2],[6989,3],[[6990,6991],2],[[6992,7001],2],[[7002,7018],2],[[7019,7027],2],[[7028,7036],2],[[7037,7038],2],[7039,2],[[7040,7082],2],[[7083,7085],2],[[7086,7097],2],[[7098,7103],2],[[7104,7155],2],[[7156,7163],3],[[7164,7167],2],[[7168,7223],2],[[7224,7226],3],[[7227,7231],2],[[7232,7241],2],[[7242,7244],3],[[7245,7293],2],[[7294,7295],2],[7296,1,"\u0432"],[7297,1,"\u0434"],[7298,1,"\u043E"],[7299,1,"\u0441"],[[7300,7301],1,"\u0442"],[7302,1,"\u044A"],[7303,1,"\u0463"],[7304,1,"\uA64B"],[7305,1,"\u1C8A"],[7306,2],[[7307,7311],3],[7312,1,"\u10D0"],[7313,1,"\u10D1"],[7314,1,"\u10D2"],[7315,1,"\u10D3"],[7316,1,"\u10D4"],[7317,1,"\u10D5"],[7318,1,"\u10D6"],[7319,1,"\u10D7"],[7320,1,"\u10D8"],[7321,1,"\u10D9"],[7322,1,"\u10DA"],[7323,1,"\u10DB"],[7324,1,"\u10DC"],[7325,1,"\u10DD"],[7326,1,"\u10DE"],[7327,1,"\u10DF"],[7328,1,"\u10E0"],[7329,1,"\u10E1"],[7330,1,"\u10E2"],[7331,1,"\u10E3"],[7332,1,"\u10E4"],[7333,1,"\u10E5"],[7334,1,"\u10E6"],[7335,1,"\u10E7"],[7336,1,"\u10E8"],[7337,1,"\u10E9"],[7338,1,"\u10EA"],[7339,1,"\u10EB"],[7340,1,"\u10EC"],[7341,1,"\u10ED"],[7342,1,"\u10EE"],[7343,1,"\u10EF"],[7344,1,"\u10F0"],[7345,1,"\u10F1"],[7346,1,"\u10F2"],[7347,1,"\u10F3"],[7348,1,"\u10F4"],[7349,1,"\u10F5"],[7350,1,"\u10F6"],[7351,1,"\u10F7"],[7352,1,"\u10F8"],[7353,1,"\u10F9"],[7354,1,"\u10FA"],[[7355,7356],3],[7357,1,"\u10FD"],[7358,1,"\u10FE"],[7359,1,"\u10FF"],[[7360,7367],2],[[7368,7375],3],[[7376,7378],2],[7379,2],[[7380,7410],2],[[7411,7414],2],[7415,2],[[7416,7417],2],[7418,2],[[7419,7423],3],[[7424,7467],2],[7468,1,"a"],[7469,1,"\xE6"],[7470,1,"b"],[7471,2],[7472,1,"d"],[7473,1,"e"],[7474,1,"\u01DD"],[7475,1,"g"],[7476,1,"h"],[7477,1,"i"],[7478,1,"j"],[7479,1,"k"],[7480,1,"l"],[7481,1,"m"],[7482,1,"n"],[7483,2],[7484,1,"o"],[7485,1,"\u0223"],[7486,1,"p"],[7487,1,"r"],[7488,1,"t"],[7489,1,"u"],[7490,1,"w"],[7491,1,"a"],[7492,1,"\u0250"],[7493,1,"\u0251"],[7494,1,"\u1D02"],[7495,1,"b"],[7496,1,"d"],[7497,1,"e"],[7498,1,"\u0259"],[7499,1,"\u025B"],[7500,1,"\u025C"],[7501,1,"g"],[7502,2],[7503,1,"k"],[7504,1,"m"],[7505,1,"\u014B"],[7506,1,"o"],[7507,1,"\u0254"],[7508,1,"\u1D16"],[7509,1,"\u1D17"],[7510,1,"p"],[7511,1,"t"],[7512,1,"u"],[7513,1,"\u1D1D"],[7514,1,"\u026F"],[7515,1,"v"],[7516,1,"\u1D25"],[7517,1,"\u03B2"],[7518,1,"\u03B3"],[7519,1,"\u03B4"],[7520,1,"\u03C6"],[7521,1,"\u03C7"],[7522,1,"i"],[7523,1,"r"],[7524,1,"u"],[7525,1,"v"],[7526,1,"\u03B2"],[7527,1,"\u03B3"],[7528,1,"\u03C1"],[7529,1,"\u03C6"],[7530,1,"\u03C7"],[7531,2],[[7532,7543],2],[7544,1,"\u043D"],[[7545,7578],2],[7579,1,"\u0252"],[7580,1,"c"],[7581,1,"\u0255"],[7582,1,"\xF0"],[7583,1,"\u025C"],[7584,1,"f"],[7585,1,"\u025F"],[7586,1,"\u0261"],[7587,1,"\u0265"],[7588,1,"\u0268"],[7589,1,"\u0269"],[7590,1,"\u026A"],[7591,1,"\u1D7B"],[7592,1,"\u029D"],[7593,1,"\u026D"],[7594,1,"\u1D85"],[7595,1,"\u029F"],[7596,1,"\u0271"],[7597,1,"\u0270"],[7598,1,"\u0272"],[7599,1,"\u0273"],[7600,1,"\u0274"],[7601,1,"\u0275"],[7602,1,"\u0278"],[7603,1,"\u0282"],[7604,1,"\u0283"],[7605,1,"\u01AB"],[7606,1,"\u0289"],[7607,1,"\u028A"],[7608,1,"\u1D1C"],[7609,1,"\u028B"],[7610,1,"\u028C"],[7611,1,"z"],[7612,1,"\u0290"],[7613,1,"\u0291"],[7614,1,"\u0292"],[7615,1,"\u03B8"],[[7616,7619],2],[[7620,7626],2],[[7627,7654],2],[[7655,7669],2],[[7670,7673],2],[7674,2],[7675,2],[7676,2],[7677,2],[[7678,7679],2],[7680,1,"\u1E01"],[7681,2],[7682,1,"\u1E03"],[7683,2],[7684,1,"\u1E05"],[7685,2],[7686,1,"\u1E07"],[7687,2],[7688,1,"\u1E09"],[7689,2],[7690,1,"\u1E0B"],[7691,2],[7692,1,"\u1E0D"],[7693,2],[7694,1,"\u1E0F"],[7695,2],[7696,1,"\u1E11"],[7697,2],[7698,1,"\u1E13"],[7699,2],[7700,1,"\u1E15"],[7701,2],[7702,1,"\u1E17"],[7703,2],[7704,1,"\u1E19"],[7705,2],[7706,1,"\u1E1B"],[7707,2],[7708,1,"\u1E1D"],[7709,2],[7710,1,"\u1E1F"],[7711,2],[7712,1,"\u1E21"],[7713,2],[7714,1,"\u1E23"],[7715,2],[7716,1,"\u1E25"],[7717,2],[7718,1,"\u1E27"],[7719,2],[7720,1,"\u1E29"],[7721,2],[7722,1,"\u1E2B"],[7723,2],[7724,1,"\u1E2D"],[7725,2],[7726,1,"\u1E2F"],[7727,2],[7728,1,"\u1E31"],[7729,2],[7730,1,"\u1E33"],[7731,2],[7732,1,"\u1E35"],[7733,2],[7734,1,"\u1E37"],[7735,2],[7736,1,"\u1E39"],[7737,2],[7738,1,"\u1E3B"],[7739,2],[7740,1,"\u1E3D"],[7741,2],[7742,1,"\u1E3F"],[7743,2],[7744,1,"\u1E41"],[7745,2],[7746,1,"\u1E43"],[7747,2],[7748,1,"\u1E45"],[7749,2],[7750,1,"\u1E47"],[7751,2],[7752,1,"\u1E49"],[7753,2],[7754,1,"\u1E4B"],[7755,2],[7756,1,"\u1E4D"],[7757,2],[7758,1,"\u1E4F"],[7759,2],[7760,1,"\u1E51"],[7761,2],[7762,1,"\u1E53"],[7763,2],[7764,1,"\u1E55"],[7765,2],[7766,1,"\u1E57"],[7767,2],[7768,1,"\u1E59"],[7769,2],[7770,1,"\u1E5B"],[7771,2],[7772,1,"\u1E5D"],[7773,2],[7774,1,"\u1E5F"],[7775,2],[7776,1,"\u1E61"],[7777,2],[7778,1,"\u1E63"],[7779,2],[7780,1,"\u1E65"],[7781,2],[7782,1,"\u1E67"],[7783,2],[7784,1,"\u1E69"],[7785,2],[7786,1,"\u1E6B"],[7787,2],[7788,1,"\u1E6D"],[7789,2],[7790,1,"\u1E6F"],[7791,2],[7792,1,"\u1E71"],[7793,2],[7794,1,"\u1E73"],[7795,2],[7796,1,"\u1E75"],[7797,2],[7798,1,"\u1E77"],[7799,2],[7800,1,"\u1E79"],[7801,2],[7802,1,"\u1E7B"],[7803,2],[7804,1,"\u1E7D"],[7805,2],[7806,1,"\u1E7F"],[7807,2],[7808,1,"\u1E81"],[7809,2],[7810,1,"\u1E83"],[7811,2],[7812,1,"\u1E85"],[7813,2],[7814,1,"\u1E87"],[7815,2],[7816,1,"\u1E89"],[7817,2],[7818,1,"\u1E8B"],[7819,2],[7820,1,"\u1E8D"],[7821,2],[7822,1,"\u1E8F"],[7823,2],[7824,1,"\u1E91"],[7825,2],[7826,1,"\u1E93"],[7827,2],[7828,1,"\u1E95"],[[7829,7833],2],[7834,1,"a\u02BE"],[7835,1,"\u1E61"],[[7836,7837],2],[7838,1,"\xDF"],[7839,2],[7840,1,"\u1EA1"],[7841,2],[7842,1,"\u1EA3"],[7843,2],[7844,1,"\u1EA5"],[7845,2],[7846,1,"\u1EA7"],[7847,2],[7848,1,"\u1EA9"],[7849,2],[7850,1,"\u1EAB"],[7851,2],[7852,1,"\u1EAD"],[7853,2],[7854,1,"\u1EAF"],[7855,2],[7856,1,"\u1EB1"],[7857,2],[7858,1,"\u1EB3"],[7859,2],[7860,1,"\u1EB5"],[7861,2],[7862,1,"\u1EB7"],[7863,2],[7864,1,"\u1EB9"],[7865,2],[7866,1,"\u1EBB"],[7867,2],[7868,1,"\u1EBD"],[7869,2],[7870,1,"\u1EBF"],[7871,2],[7872,1,"\u1EC1"],[7873,2],[7874,1,"\u1EC3"],[7875,2],[7876,1,"\u1EC5"],[7877,2],[7878,1,"\u1EC7"],[7879,2],[7880,1,"\u1EC9"],[7881,2],[7882,1,"\u1ECB"],[7883,2],[7884,1,"\u1ECD"],[7885,2],[7886,1,"\u1ECF"],[7887,2],[7888,1,"\u1ED1"],[7889,2],[7890,1,"\u1ED3"],[7891,2],[7892,1,"\u1ED5"],[7893,2],[7894,1,"\u1ED7"],[7895,2],[7896,1,"\u1ED9"],[7897,2],[7898,1,"\u1EDB"],[7899,2],[7900,1,"\u1EDD"],[7901,2],[7902,1,"\u1EDF"],[7903,2],[7904,1,"\u1EE1"],[7905,2],[7906,1,"\u1EE3"],[7907,2],[7908,1,"\u1EE5"],[7909,2],[7910,1,"\u1EE7"],[7911,2],[7912,1,"\u1EE9"],[7913,2],[7914,1,"\u1EEB"],[7915,2],[7916,1,"\u1EED"],[7917,2],[7918,1,"\u1EEF"],[7919,2],[7920,1,"\u1EF1"],[7921,2],[7922,1,"\u1EF3"],[7923,2],[7924,1,"\u1EF5"],[7925,2],[7926,1,"\u1EF7"],[7927,2],[7928,1,"\u1EF9"],[7929,2],[7930,1,"\u1EFB"],[7931,2],[7932,1,"\u1EFD"],[7933,2],[7934,1,"\u1EFF"],[7935,2],[[7936,7943],2],[7944,1,"\u1F00"],[7945,1,"\u1F01"],[7946,1,"\u1F02"],[7947,1,"\u1F03"],[7948,1,"\u1F04"],[7949,1,"\u1F05"],[7950,1,"\u1F06"],[7951,1,"\u1F07"],[[7952,7957],2],[[7958,7959],3],[7960,1,"\u1F10"],[7961,1,"\u1F11"],[7962,1,"\u1F12"],[7963,1,"\u1F13"],[7964,1,"\u1F14"],[7965,1,"\u1F15"],[[7966,7967],3],[[7968,7975],2],[7976,1,"\u1F20"],[7977,1,"\u1F21"],[7978,1,"\u1F22"],[7979,1,"\u1F23"],[7980,1,"\u1F24"],[7981,1,"\u1F25"],[7982,1,"\u1F26"],[7983,1,"\u1F27"],[[7984,7991],2],[7992,1,"\u1F30"],[7993,1,"\u1F31"],[7994,1,"\u1F32"],[7995,1,"\u1F33"],[7996,1,"\u1F34"],[7997,1,"\u1F35"],[7998,1,"\u1F36"],[7999,1,"\u1F37"],[[8000,8005],2],[[8006,8007],3],[8008,1,"\u1F40"],[8009,1,"\u1F41"],[8010,1,"\u1F42"],[8011,1,"\u1F43"],[8012,1,"\u1F44"],[8013,1,"\u1F45"],[[8014,8015],3],[[8016,8023],2],[8024,3],[8025,1,"\u1F51"],[8026,3],[8027,1,"\u1F53"],[8028,3],[8029,1,"\u1F55"],[8030,3],[8031,1,"\u1F57"],[[8032,8039],2],[8040,1,"\u1F60"],[8041,1,"\u1F61"],[8042,1,"\u1F62"],[8043,1,"\u1F63"],[8044,1,"\u1F64"],[8045,1,"\u1F65"],[8046,1,"\u1F66"],[8047,1,"\u1F67"],[8048,2],[8049,1,"\u03AC"],[8050,2],[8051,1,"\u03AD"],[8052,2],[8053,1,"\u03AE"],[8054,2],[8055,1,"\u03AF"],[8056,2],[8057,1,"\u03CC"],[8058,2],[8059,1,"\u03CD"],[8060,2],[8061,1,"\u03CE"],[[8062,8063],3],[8064,1,"\u1F00\u03B9"],[8065,1,"\u1F01\u03B9"],[8066,1,"\u1F02\u03B9"],[8067,1,"\u1F03\u03B9"],[8068,1,"\u1F04\u03B9"],[8069,1,"\u1F05\u03B9"],[8070,1,"\u1F06\u03B9"],[8071,1,"\u1F07\u03B9"],[8072,1,"\u1F00\u03B9"],[8073,1,"\u1F01\u03B9"],[8074,1,"\u1F02\u03B9"],[8075,1,"\u1F03\u03B9"],[8076,1,"\u1F04\u03B9"],[8077,1,"\u1F05\u03B9"],[8078,1,"\u1F06\u03B9"],[8079,1,"\u1F07\u03B9"],[8080,1,"\u1F20\u03B9"],[8081,1,"\u1F21\u03B9"],[8082,1,"\u1F22\u03B9"],[8083,1,"\u1F23\u03B9"],[8084,1,"\u1F24\u03B9"],[8085,1,"\u1F25\u03B9"],[8086,1,"\u1F26\u03B9"],[8087,1,"\u1F27\u03B9"],[8088,1,"\u1F20\u03B9"],[8089,1,"\u1F21\u03B9"],[8090,1,"\u1F22\u03B9"],[8091,1,"\u1F23\u03B9"],[8092,1,"\u1F24\u03B9"],[8093,1,"\u1F25\u03B9"],[8094,1,"\u1F26\u03B9"],[8095,1,"\u1F27\u03B9"],[8096,1,"\u1F60\u03B9"],[8097,1,"\u1F61\u03B9"],[8098,1,"\u1F62\u03B9"],[8099,1,"\u1F63\u03B9"],[8100,1,"\u1F64\u03B9"],[8101,1,"\u1F65\u03B9"],[8102,1,"\u1F66\u03B9"],[8103,1,"\u1F67\u03B9"],[8104,1,"\u1F60\u03B9"],[8105,1,"\u1F61\u03B9"],[8106,1,"\u1F62\u03B9"],[8107,1,"\u1F63\u03B9"],[8108,1,"\u1F64\u03B9"],[8109,1,"\u1F65\u03B9"],[8110,1,"\u1F66\u03B9"],[8111,1,"\u1F67\u03B9"],[[8112,8113],2],[8114,1,"\u1F70\u03B9"],[8115,1,"\u03B1\u03B9"],[8116,1,"\u03AC\u03B9"],[8117,3],[8118,2],[8119,1,"\u1FB6\u03B9"],[8120,1,"\u1FB0"],[8121,1,"\u1FB1"],[8122,1,"\u1F70"],[8123,1,"\u03AC"],[8124,1,"\u03B1\u03B9"],[8125,1," \u0313"],[8126,1,"\u03B9"],[8127,1," \u0313"],[8128,1," \u0342"],[8129,1," \u0308\u0342"],[8130,1,"\u1F74\u03B9"],[8131,1,"\u03B7\u03B9"],[8132,1,"\u03AE\u03B9"],[8133,3],[8134,2],[8135,1,"\u1FC6\u03B9"],[8136,1,"\u1F72"],[8137,1,"\u03AD"],[8138,1,"\u1F74"],[8139,1,"\u03AE"],[8140,1,"\u03B7\u03B9"],[8141,1," \u0313\u0300"],[8142,1," \u0313\u0301"],[8143,1," \u0313\u0342"],[[8144,8146],2],[8147,1,"\u0390"],[[8148,8149],3],[[8150,8151],2],[8152,1,"\u1FD0"],[8153,1,"\u1FD1"],[8154,1,"\u1F76"],[8155,1,"\u03AF"],[8156,3],[8157,1," \u0314\u0300"],[8158,1," \u0314\u0301"],[8159,1," \u0314\u0342"],[[8160,8162],2],[8163,1,"\u03B0"],[[8164,8167],2],[8168,1,"\u1FE0"],[8169,1,"\u1FE1"],[8170,1,"\u1F7A"],[8171,1,"\u03CD"],[8172,1,"\u1FE5"],[8173,1," \u0308\u0300"],[8174,1," \u0308\u0301"],[8175,1,"`"],[[8176,8177],3],[8178,1,"\u1F7C\u03B9"],[8179,1,"\u03C9\u03B9"],[8180,1,"\u03CE\u03B9"],[8181,3],[8182,2],[8183,1,"\u1FF6\u03B9"],[8184,1,"\u1F78"],[8185,1,"\u03CC"],[8186,1,"\u1F7C"],[8187,1,"\u03CE"],[8188,1,"\u03C9\u03B9"],[8189,1," \u0301"],[8190,1," \u0314"],[8191,3],[[8192,8202],1," "],[8203,7],[[8204,8205],6,""],[[8206,8207],3],[8208,2],[8209,1,"\u2010"],[[8210,8214],2],[8215,1," \u0333"],[[8216,8227],2],[[8228,8230],3],[8231,2],[[8232,8238],3],[8239,1," "],[[8240,8242],2],[8243,1,"\u2032\u2032"],[8244,1,"\u2032\u2032\u2032"],[8245,2],[8246,1,"\u2035\u2035"],[8247,1,"\u2035\u2035\u2035"],[[8248,8251],2],[8252,1,"!!"],[8253,2],[8254,1," \u0305"],[[8255,8262],2],[8263,1,"??"],[8264,1,"?!"],[8265,1,"!?"],[[8266,8269],2],[[8270,8274],2],[[8275,8276],2],[[8277,8278],2],[8279,1,"\u2032\u2032\u2032\u2032"],[[8280,8286],2],[8287,1," "],[[8288,8291],7],[8292,7],[8293,3],[[8294,8297],3],[[8298,8303],7],[8304,1,"0"],[8305,1,"i"],[[8306,8307],3],[8308,1,"4"],[8309,1,"5"],[8310,1,"6"],[8311,1,"7"],[8312,1,"8"],[8313,1,"9"],[8314,1,"+"],[8315,1,"\u2212"],[8316,1,"="],[8317,1,"("],[8318,1,")"],[8319,1,"n"],[8320,1,"0"],[8321,1,"1"],[8322,1,"2"],[8323,1,"3"],[8324,1,"4"],[8325,1,"5"],[8326,1,"6"],[8327,1,"7"],[8328,1,"8"],[8329,1,"9"],[8330,1,"+"],[8331,1,"\u2212"],[8332,1,"="],[8333,1,"("],[8334,1,")"],[8335,3],[8336,1,"a"],[8337,1,"e"],[8338,1,"o"],[8339,1,"x"],[8340,1,"\u0259"],[8341,1,"h"],[8342,1,"k"],[8343,1,"l"],[8344,1,"m"],[8345,1,"n"],[8346,1,"p"],[8347,1,"s"],[8348,1,"t"],[[8349,8351],3],[[8352,8359],2],[8360,1,"rs"],[[8361,8362],2],[8363,2],[8364,2],[[8365,8367],2],[[8368,8369],2],[[8370,8373],2],[[8374,8376],2],[8377,2],[8378,2],[[8379,8381],2],[8382,2],[8383,2],[8384,2],[[8385,8399],3],[[8400,8417],2],[[8418,8419],2],[[8420,8426],2],[8427,2],[[8428,8431],2],[8432,2],[[8433,8447],3],[8448,1,"a/c"],[8449,1,"a/s"],[8450,1,"c"],[8451,1,"\xB0c"],[8452,2],[8453,1,"c/o"],[8454,1,"c/u"],[8455,1,"\u025B"],[8456,2],[8457,1,"\xB0f"],[8458,1,"g"],[[8459,8462],1,"h"],[8463,1,"\u0127"],[[8464,8465],1,"i"],[[8466,8467],1,"l"],[8468,2],[8469,1,"n"],[8470,1,"no"],[[8471,8472],2],[8473,1,"p"],[8474,1,"q"],[[8475,8477],1,"r"],[[8478,8479],2],[8480,1,"sm"],[8481,1,"tel"],[8482,1,"tm"],[8483,2],[8484,1,"z"],[8485,2],[8486,1,"\u03C9"],[8487,2],[8488,1,"z"],[8489,2],[8490,1,"k"],[8491,1,"\xE5"],[8492,1,"b"],[8493,1,"c"],[8494,2],[[8495,8496],1,"e"],[8497,1,"f"],[8498,1,"\u214E"],[8499,1,"m"],[8500,1,"o"],[8501,1,"\u05D0"],[8502,1,"\u05D1"],[8503,1,"\u05D2"],[8504,1,"\u05D3"],[8505,1,"i"],[8506,2],[8507,1,"fax"],[8508,1,"\u03C0"],[[8509,8510],1,"\u03B3"],[8511,1,"\u03C0"],[8512,1,"\u2211"],[[8513,8516],2],[[8517,8518],1,"d"],[8519,1,"e"],[8520,1,"i"],[8521,1,"j"],[[8522,8523],2],[8524,2],[8525,2],[8526,2],[8527,2],[8528,1,"1\u20447"],[8529,1,"1\u20449"],[8530,1,"1\u204410"],[8531,1,"1\u20443"],[8532,1,"2\u20443"],[8533,1,"1\u20445"],[8534,1,"2\u20445"],[8535,1,"3\u20445"],[8536,1,"4\u20445"],[8537,1,"1\u20446"],[8538,1,"5\u20446"],[8539,1,"1\u20448"],[8540,1,"3\u20448"],[8541,1,"5\u20448"],[8542,1,"7\u20448"],[8543,1,"1\u2044"],[8544,1,"i"],[8545,1,"ii"],[8546,1,"iii"],[8547,1,"iv"],[8548,1,"v"],[8549,1,"vi"],[8550,1,"vii"],[8551,1,"viii"],[8552,1,"ix"],[8553,1,"x"],[8554,1,"xi"],[8555,1,"xii"],[8556,1,"l"],[8557,1,"c"],[8558,1,"d"],[8559,1,"m"],[8560,1,"i"],[8561,1,"ii"],[8562,1,"iii"],[8563,1,"iv"],[8564,1,"v"],[8565,1,"vi"],[8566,1,"vii"],[8567,1,"viii"],[8568,1,"ix"],[8569,1,"x"],[8570,1,"xi"],[8571,1,"xii"],[8572,1,"l"],[8573,1,"c"],[8574,1,"d"],[8575,1,"m"],[[8576,8578],2],[8579,1,"\u2184"],[8580,2],[[8581,8584],2],[8585,1,"0\u20443"],[[8586,8587],2],[[8588,8591],3],[[8592,8682],2],[[8683,8691],2],[[8692,8703],2],[[8704,8747],2],[8748,1,"\u222B\u222B"],[8749,1,"\u222B\u222B\u222B"],[8750,2],[8751,1,"\u222E\u222E"],[8752,1,"\u222E\u222E\u222E"],[[8753,8945],2],[[8946,8959],2],[8960,2],[8961,2],[[8962,9000],2],[9001,1,"\u3008"],[9002,1,"\u3009"],[[9003,9082],2],[9083,2],[9084,2],[[9085,9114],2],[[9115,9166],2],[[9167,9168],2],[[9169,9179],2],[[9180,9191],2],[9192,2],[[9193,9203],2],[[9204,9210],2],[[9211,9214],2],[9215,2],[[9216,9252],2],[[9253,9254],2],[[9255,9257],2],[[9258,9279],3],[[9280,9290],2],[[9291,9311],3],[9312,1,"1"],[9313,1,"2"],[9314,1,"3"],[9315,1,"4"],[9316,1,"5"],[9317,1,"6"],[9318,1,"7"],[9319,1,"8"],[9320,1,"9"],[9321,1,"10"],[9322,1,"11"],[9323,1,"12"],[9324,1,"13"],[9325,1,"14"],[9326,1,"15"],[9327,1,"16"],[9328,1,"17"],[9329,1,"18"],[9330,1,"19"],[9331,1,"20"],[9332,1,"(1)"],[9333,1,"(2)"],[9334,1,"(3)"],[9335,1,"(4)"],[9336,1,"(5)"],[9337,1,"(6)"],[9338,1,"(7)"],[9339,1,"(8)"],[9340,1,"(9)"],[9341,1,"(10)"],[9342,1,"(11)"],[9343,1,"(12)"],[9344,1,"(13)"],[9345,1,"(14)"],[9346,1,"(15)"],[9347,1,"(16)"],[9348,1,"(17)"],[9349,1,"(18)"],[9350,1,"(19)"],[9351,1,"(20)"],[[9352,9371],3],[9372,1,"(a)"],[9373,1,"(b)"],[9374,1,"(c)"],[9375,1,"(d)"],[9376,1,"(e)"],[9377,1,"(f)"],[9378,1,"(g)"],[9379,1,"(h)"],[9380,1,"(i)"],[9381,1,"(j)"],[9382,1,"(k)"],[9383,1,"(l)"],[9384,1,"(m)"],[9385,1,"(n)"],[9386,1,"(o)"],[9387,1,"(p)"],[9388,1,"(q)"],[9389,1,"(r)"],[9390,1,"(s)"],[9391,1,"(t)"],[9392,1,"(u)"],[9393,1,"(v)"],[9394,1,"(w)"],[9395,1,"(x)"],[9396,1,"(y)"],[9397,1,"(z)"],[9398,1,"a"],[9399,1,"b"],[9400,1,"c"],[9401,1,"d"],[9402,1,"e"],[9403,1,"f"],[9404,1,"g"],[9405,1,"h"],[9406,1,"i"],[9407,1,"j"],[9408,1,"k"],[9409,1,"l"],[9410,1,"m"],[9411,1,"n"],[9412,1,"o"],[9413,1,"p"],[9414,1,"q"],[9415,1,"r"],[9416,1,"s"],[9417,1,"t"],[9418,1,"u"],[9419,1,"v"],[9420,1,"w"],[9421,1,"x"],[9422,1,"y"],[9423,1,"z"],[9424,1,"a"],[9425,1,"b"],[9426,1,"c"],[9427,1,"d"],[9428,1,"e"],[9429,1,"f"],[9430,1,"g"],[9431,1,"h"],[9432,1,"i"],[9433,1,"j"],[9434,1,"k"],[9435,1,"l"],[9436,1,"m"],[9437,1,"n"],[9438,1,"o"],[9439,1,"p"],[9440,1,"q"],[9441,1,"r"],[9442,1,"s"],[9443,1,"t"],[9444,1,"u"],[9445,1,"v"],[9446,1,"w"],[9447,1,"x"],[9448,1,"y"],[9449,1,"z"],[9450,1,"0"],[[9451,9470],2],[9471,2],[[9472,9621],2],[[9622,9631],2],[[9632,9711],2],[[9712,9719],2],[[9720,9727],2],[[9728,9747],2],[[9748,9749],2],[[9750,9751],2],[9752,2],[9753,2],[[9754,9839],2],[[9840,9841],2],[[9842,9853],2],[[9854,9855],2],[[9856,9865],2],[[9866,9873],2],[[9874,9884],2],[9885,2],[[9886,9887],2],[[9888,9889],2],[[9890,9905],2],[9906,2],[[9907,9916],2],[[9917,9919],2],[[9920,9923],2],[[9924,9933],2],[9934,2],[[9935,9953],2],[9954,2],[9955,2],[[9956,9959],2],[[9960,9983],2],[9984,2],[[9985,9988],2],[9989,2],[[9990,9993],2],[[9994,9995],2],[[9996,10023],2],[10024,2],[[10025,10059],2],[10060,2],[10061,2],[10062,2],[[10063,10066],2],[[10067,10069],2],[10070,2],[10071,2],[[10072,10078],2],[[10079,10080],2],[[10081,10087],2],[[10088,10101],2],[[10102,10132],2],[[10133,10135],2],[[10136,10159],2],[10160,2],[[10161,10174],2],[10175,2],[[10176,10182],2],[[10183,10186],2],[10187,2],[10188,2],[10189,2],[[10190,10191],2],[[10192,10219],2],[[10220,10223],2],[[10224,10239],2],[[10240,10495],2],[[10496,10763],2],[10764,1,"\u222B\u222B\u222B\u222B"],[[10765,10867],2],[10868,1,"::="],[10869,1,"=="],[10870,1,"==="],[[10871,10971],2],[10972,1,"\u2ADD\u0338"],[[10973,11007],2],[[11008,11021],2],[[11022,11027],2],[[11028,11034],2],[[11035,11039],2],[[11040,11043],2],[[11044,11084],2],[[11085,11087],2],[[11088,11092],2],[[11093,11097],2],[[11098,11123],2],[[11124,11125],3],[[11126,11157],2],[11158,3],[11159,2],[[11160,11193],2],[[11194,11196],2],[[11197,11208],2],[11209,2],[[11210,11217],2],[11218,2],[[11219,11243],2],[[11244,11247],2],[[11248,11262],2],[11263,2],[11264,1,"\u2C30"],[11265,1,"\u2C31"],[11266,1,"\u2C32"],[11267,1,"\u2C33"],[11268,1,"\u2C34"],[11269,1,"\u2C35"],[11270,1,"\u2C36"],[11271,1,"\u2C37"],[11272,1,"\u2C38"],[11273,1,"\u2C39"],[11274,1,"\u2C3A"],[11275,1,"\u2C3B"],[11276,1,"\u2C3C"],[11277,1,"\u2C3D"],[11278,1,"\u2C3E"],[11279,1,"\u2C3F"],[11280,1,"\u2C40"],[11281,1,"\u2C41"],[11282,1,"\u2C42"],[11283,1,"\u2C43"],[11284,1,"\u2C44"],[11285,1,"\u2C45"],[11286,1,"\u2C46"],[11287,1,"\u2C47"],[11288,1,"\u2C48"],[11289,1,"\u2C49"],[11290,1,"\u2C4A"],[11291,1,"\u2C4B"],[11292,1,"\u2C4C"],[11293,1,"\u2C4D"],[11294,1,"\u2C4E"],[11295,1,"\u2C4F"],[11296,1,"\u2C50"],[11297,1,"\u2C51"],[11298,1,"\u2C52"],[11299,1,"\u2C53"],[11300,1,"\u2C54"],[11301,1,"\u2C55"],[11302,1,"\u2C56"],[11303,1,"\u2C57"],[11304,1,"\u2C58"],[11305,1,"\u2C59"],[11306,1,"\u2C5A"],[11307,1,"\u2C5B"],[11308,1,"\u2C5C"],[11309,1,"\u2C5D"],[11310,1,"\u2C5E"],[11311,1,"\u2C5F"],[[11312,11358],2],[11359,2],[11360,1,"\u2C61"],[11361,2],[11362,1,"\u026B"],[11363,1,"\u1D7D"],[11364,1,"\u027D"],[[11365,11366],2],[11367,1,"\u2C68"],[11368,2],[11369,1,"\u2C6A"],[11370,2],[11371,1,"\u2C6C"],[11372,2],[11373,1,"\u0251"],[11374,1,"\u0271"],[11375,1,"\u0250"],[11376,1,"\u0252"],[11377,2],[11378,1,"\u2C73"],[11379,2],[11380,2],[11381,1,"\u2C76"],[[11382,11383],2],[[11384,11387],2],[11388,1,"j"],[11389,1,"v"],[11390,1,"\u023F"],[11391,1,"\u0240"],[11392,1,"\u2C81"],[11393,2],[11394,1,"\u2C83"],[11395,2],[11396,1,"\u2C85"],[11397,2],[11398,1,"\u2C87"],[11399,2],[11400,1,"\u2C89"],[11401,2],[11402,1,"\u2C8B"],[11403,2],[11404,1,"\u2C8D"],[11405,2],[11406,1,"\u2C8F"],[11407,2],[11408,1,"\u2C91"],[11409,2],[11410,1,"\u2C93"],[11411,2],[11412,1,"\u2C95"],[11413,2],[11414,1,"\u2C97"],[11415,2],[11416,1,"\u2C99"],[11417,2],[11418,1,"\u2C9B"],[11419,2],[11420,1,"\u2C9D"],[11421,2],[11422,1,"\u2C9F"],[11423,2],[11424,1,"\u2CA1"],[11425,2],[11426,1,"\u2CA3"],[11427,2],[11428,1,"\u2CA5"],[11429,2],[11430,1,"\u2CA7"],[11431,2],[11432,1,"\u2CA9"],[11433,2],[11434,1,"\u2CAB"],[11435,2],[11436,1,"\u2CAD"],[11437,2],[11438,1,"\u2CAF"],[11439,2],[11440,1,"\u2CB1"],[11441,2],[11442,1,"\u2CB3"],[11443,2],[11444,1,"\u2CB5"],[11445,2],[11446,1,"\u2CB7"],[11447,2],[11448,1,"\u2CB9"],[11449,2],[11450,1,"\u2CBB"],[11451,2],[11452,1,"\u2CBD"],[11453,2],[11454,1,"\u2CBF"],[11455,2],[11456,1,"\u2CC1"],[11457,2],[11458,1,"\u2CC3"],[11459,2],[11460,1,"\u2CC5"],[11461,2],[11462,1,"\u2CC7"],[11463,2],[11464,1,"\u2CC9"],[11465,2],[11466,1,"\u2CCB"],[11467,2],[11468,1,"\u2CCD"],[11469,2],[11470,1,"\u2CCF"],[11471,2],[11472,1,"\u2CD1"],[11473,2],[11474,1,"\u2CD3"],[11475,2],[11476,1,"\u2CD5"],[11477,2],[11478,1,"\u2CD7"],[11479,2],[11480,1,"\u2CD9"],[11481,2],[11482,1,"\u2CDB"],[11483,2],[11484,1,"\u2CDD"],[11485,2],[11486,1,"\u2CDF"],[11487,2],[11488,1,"\u2CE1"],[11489,2],[11490,1,"\u2CE3"],[[11491,11492],2],[[11493,11498],2],[11499,1,"\u2CEC"],[11500,2],[11501,1,"\u2CEE"],[[11502,11505],2],[11506,1,"\u2CF3"],[11507,2],[[11508,11512],3],[[11513,11519],2],[[11520,11557],2],[11558,3],[11559,2],[[11560,11564],3],[11565,2],[[11566,11567],3],[[11568,11621],2],[[11622,11623],2],[[11624,11630],3],[11631,1,"\u2D61"],[11632,2],[[11633,11646],3],[11647,2],[[11648,11670],2],[[11671,11679],3],[[11680,11686],2],[11687,3],[[11688,11694],2],[11695,3],[[11696,11702],2],[11703,3],[[11704,11710],2],[11711,3],[[11712,11718],2],[11719,3],[[11720,11726],2],[11727,3],[[11728,11734],2],[11735,3],[[11736,11742],2],[11743,3],[[11744,11775],2],[[11776,11799],2],[[11800,11803],2],[[11804,11805],2],[[11806,11822],2],[11823,2],[11824,2],[11825,2],[[11826,11835],2],[[11836,11842],2],[[11843,11844],2],[[11845,11849],2],[[11850,11854],2],[11855,2],[[11856,11858],2],[[11859,11869],2],[[11870,11903],3],[[11904,11929],2],[11930,3],[[11931,11934],2],[11935,1,"\u6BCD"],[[11936,12018],2],[12019,1,"\u9F9F"],[[12020,12031],3],[12032,1,"\u4E00"],[12033,1,"\u4E28"],[12034,1,"\u4E36"],[12035,1,"\u4E3F"],[12036,1,"\u4E59"],[12037,1,"\u4E85"],[12038,1,"\u4E8C"],[12039,1,"\u4EA0"],[12040,1,"\u4EBA"],[12041,1,"\u513F"],[12042,1,"\u5165"],[12043,1,"\u516B"],[12044,1,"\u5182"],[12045,1,"\u5196"],[12046,1,"\u51AB"],[12047,1,"\u51E0"],[12048,1,"\u51F5"],[12049,1,"\u5200"],[12050,1,"\u529B"],[12051,1,"\u52F9"],[12052,1,"\u5315"],[12053,1,"\u531A"],[12054,1,"\u5338"],[12055,1,"\u5341"],[12056,1,"\u535C"],[12057,1,"\u5369"],[12058,1,"\u5382"],[12059,1,"\u53B6"],[12060,1,"\u53C8"],[12061,1,"\u53E3"],[12062,1,"\u56D7"],[12063,1,"\u571F"],[12064,1,"\u58EB"],[12065,1,"\u5902"],[12066,1,"\u590A"],[12067,1,"\u5915"],[12068,1,"\u5927"],[12069,1,"\u5973"],[12070,1,"\u5B50"],[12071,1,"\u5B80"],[12072,1,"\u5BF8"],[12073,1,"\u5C0F"],[12074,1,"\u5C22"],[12075,1,"\u5C38"],[12076,1,"\u5C6E"],[12077,1,"\u5C71"],[12078,1,"\u5DDB"],[12079,1,"\u5DE5"],[12080,1,"\u5DF1"],[12081,1,"\u5DFE"],[12082,1,"\u5E72"],[12083,1,"\u5E7A"],[12084,1,"\u5E7F"],[12085,1,"\u5EF4"],[12086,1,"\u5EFE"],[12087,1,"\u5F0B"],[12088,1,"\u5F13"],[12089,1,"\u5F50"],[12090,1,"\u5F61"],[12091,1,"\u5F73"],[12092,1,"\u5FC3"],[12093,1,"\u6208"],[12094,1,"\u6236"],[12095,1,"\u624B"],[12096,1,"\u652F"],[12097,1,"\u6534"],[12098,1,"\u6587"],[12099,1,"\u6597"],[12100,1,"\u65A4"],[12101,1,"\u65B9"],[12102,1,"\u65E0"],[12103,1,"\u65E5"],[12104,1,"\u66F0"],[12105,1,"\u6708"],[12106,1,"\u6728"],[12107,1,"\u6B20"],[12108,1,"\u6B62"],[12109,1,"\u6B79"],[12110,1,"\u6BB3"],[12111,1,"\u6BCB"],[12112,1,"\u6BD4"],[12113,1,"\u6BDB"],[12114,1,"\u6C0F"],[12115,1,"\u6C14"],[12116,1,"\u6C34"],[12117,1,"\u706B"],[12118,1,"\u722A"],[12119,1,"\u7236"],[12120,1,"\u723B"],[12121,1,"\u723F"],[12122,1,"\u7247"],[12123,1,"\u7259"],[12124,1,"\u725B"],[12125,1,"\u72AC"],[12126,1,"\u7384"],[12127,1,"\u7389"],[12128,1,"\u74DC"],[12129,1,"\u74E6"],[12130,1,"\u7518"],[12131,1,"\u751F"],[12132,1,"\u7528"],[12133,1,"\u7530"],[12134,1,"\u758B"],[12135,1,"\u7592"],[12136,1,"\u7676"],[12137,1,"\u767D"],[12138,1,"\u76AE"],[12139,1,"\u76BF"],[12140,1,"\u76EE"],[12141,1,"\u77DB"],[12142,1,"\u77E2"],[12143,1,"\u77F3"],[12144,1,"\u793A"],[12145,1,"\u79B8"],[12146,1,"\u79BE"],[12147,1,"\u7A74"],[12148,1,"\u7ACB"],[12149,1,"\u7AF9"],[12150,1,"\u7C73"],[12151,1,"\u7CF8"],[12152,1,"\u7F36"],[12153,1,"\u7F51"],[12154,1,"\u7F8A"],[12155,1,"\u7FBD"],[12156,1,"\u8001"],[12157,1,"\u800C"],[12158,1,"\u8012"],[12159,1,"\u8033"],[12160,1,"\u807F"],[12161,1,"\u8089"],[12162,1,"\u81E3"],[12163,1,"\u81EA"],[12164,1,"\u81F3"],[12165,1,"\u81FC"],[12166,1,"\u820C"],[12167,1,"\u821B"],[12168,1,"\u821F"],[12169,1,"\u826E"],[12170,1,"\u8272"],[12171,1,"\u8278"],[12172,1,"\u864D"],[12173,1,"\u866B"],[12174,1,"\u8840"],[12175,1,"\u884C"],[12176,1,"\u8863"],[12177,1,"\u897E"],[12178,1,"\u898B"],[12179,1,"\u89D2"],[12180,1,"\u8A00"],[12181,1,"\u8C37"],[12182,1,"\u8C46"],[12183,1,"\u8C55"],[12184,1,"\u8C78"],[12185,1,"\u8C9D"],[12186,1,"\u8D64"],[12187,1,"\u8D70"],[12188,1,"\u8DB3"],[12189,1,"\u8EAB"],[12190,1,"\u8ECA"],[12191,1,"\u8F9B"],[12192,1,"\u8FB0"],[12193,1,"\u8FB5"],[12194,1,"\u9091"],[12195,1,"\u9149"],[12196,1,"\u91C6"],[12197,1,"\u91CC"],[12198,1,"\u91D1"],[12199,1,"\u9577"],[12200,1,"\u9580"],[12201,1,"\u961C"],[12202,1,"\u96B6"],[12203,1,"\u96B9"],[12204,1,"\u96E8"],[12205,1,"\u9751"],[12206,1,"\u975E"],[12207,1,"\u9762"],[12208,1,"\u9769"],[12209,1,"\u97CB"],[12210,1,"\u97ED"],[12211,1,"\u97F3"],[12212,1,"\u9801"],[12213,1,"\u98A8"],[12214,1,"\u98DB"],[12215,1,"\u98DF"],[12216,1,"\u9996"],[12217,1,"\u9999"],[12218,1,"\u99AC"],[12219,1,"\u9AA8"],[12220,1,"\u9AD8"],[12221,1,"\u9ADF"],[12222,1,"\u9B25"],[12223,1,"\u9B2F"],[12224,1,"\u9B32"],[12225,1,"\u9B3C"],[12226,1,"\u9B5A"],[12227,1,"\u9CE5"],[12228,1,"\u9E75"],[12229,1,"\u9E7F"],[12230,1,"\u9EA5"],[12231,1,"\u9EBB"],[12232,1,"\u9EC3"],[12233,1,"\u9ECD"],[12234,1,"\u9ED1"],[12235,1,"\u9EF9"],[12236,1,"\u9EFD"],[12237,1,"\u9F0E"],[12238,1,"\u9F13"],[12239,1,"\u9F20"],[12240,1,"\u9F3B"],[12241,1,"\u9F4A"],[12242,1,"\u9F52"],[12243,1,"\u9F8D"],[12244,1,"\u9F9C"],[12245,1,"\u9FA0"],[[12246,12271],3],[[12272,12283],3],[[12284,12287],3],[12288,1," "],[12289,2],[12290,1,"."],[[12291,12292],2],[[12293,12295],2],[[12296,12329],2],[[12330,12333],2],[[12334,12341],2],[12342,1,"\u3012"],[12343,2],[12344,1,"\u5341"],[12345,1,"\u5344"],[12346,1,"\u5345"],[12347,2],[12348,2],[12349,2],[12350,2],[12351,2],[12352,3],[[12353,12436],2],[[12437,12438],2],[[12439,12440],3],[[12441,12442],2],[12443,1," \u3099"],[12444,1," \u309A"],[[12445,12446],2],[12447,1,"\u3088\u308A"],[12448,2],[[12449,12542],2],[12543,1,"\u30B3\u30C8"],[[12544,12548],3],[[12549,12588],2],[12589,2],[12590,2],[12591,2],[12592,3],[12593,1,"\u1100"],[12594,1,"\u1101"],[12595,1,"\u11AA"],[12596,1,"\u1102"],[12597,1,"\u11AC"],[12598,1,"\u11AD"],[12599,1,"\u1103"],[12600,1,"\u1104"],[12601,1,"\u1105"],[12602,1,"\u11B0"],[12603,1,"\u11B1"],[12604,1,"\u11B2"],[12605,1,"\u11B3"],[12606,1,"\u11B4"],[12607,1,"\u11B5"],[12608,1,"\u111A"],[12609,1,"\u1106"],[12610,1,"\u1107"],[12611,1,"\u1108"],[12612,1,"\u1121"],[12613,1,"\u1109"],[12614,1,"\u110A"],[12615,1,"\u110B"],[12616,1,"\u110C"],[12617,1,"\u110D"],[12618,1,"\u110E"],[12619,1,"\u110F"],[12620,1,"\u1110"],[12621,1,"\u1111"],[12622,1,"\u1112"],[12623,1,"\u1161"],[12624,1,"\u1162"],[12625,1,"\u1163"],[12626,1,"\u1164"],[12627,1,"\u1165"],[12628,1,"\u1166"],[12629,1,"\u1167"],[12630,1,"\u1168"],[12631,1,"\u1169"],[12632,1,"\u116A"],[12633,1,"\u116B"],[12634,1,"\u116C"],[12635,1,"\u116D"],[12636,1,"\u116E"],[12637,1,"\u116F"],[12638,1,"\u1170"],[12639,1,"\u1171"],[12640,1,"\u1172"],[12641,1,"\u1173"],[12642,1,"\u1174"],[12643,1,"\u1175"],[12644,7],[12645,1,"\u1114"],[12646,1,"\u1115"],[12647,1,"\u11C7"],[12648,1,"\u11C8"],[12649,1,"\u11CC"],[12650,1,"\u11CE"],[12651,1,"\u11D3"],[12652,1,"\u11D7"],[12653,1,"\u11D9"],[12654,1,"\u111C"],[12655,1,"\u11DD"],[12656,1,"\u11DF"],[12657,1,"\u111D"],[12658,1,"\u111E"],[12659,1,"\u1120"],[12660,1,"\u1122"],[12661,1,"\u1123"],[12662,1,"\u1127"],[12663,1,"\u1129"],[12664,1,"\u112B"],[12665,1,"\u112C"],[12666,1,"\u112D"],[12667,1,"\u112E"],[12668,1,"\u112F"],[12669,1,"\u1132"],[12670,1,"\u1136"],[12671,1,"\u1140"],[12672,1,"\u1147"],[12673,1,"\u114C"],[12674,1,"\u11F1"],[12675,1,"\u11F2"],[12676,1,"\u1157"],[12677,1,"\u1158"],[12678,1,"\u1159"],[12679,1,"\u1184"],[12680,1,"\u1185"],[12681,1,"\u1188"],[12682,1,"\u1191"],[12683,1,"\u1192"],[12684,1,"\u1194"],[12685,1,"\u119E"],[12686,1,"\u11A1"],[12687,3],[[12688,12689],2],[12690,1,"\u4E00"],[12691,1,"\u4E8C"],[12692,1,"\u4E09"],[12693,1,"\u56DB"],[12694,1,"\u4E0A"],[12695,1,"\u4E2D"],[12696,1,"\u4E0B"],[12697,1,"\u7532"],[12698,1,"\u4E59"],[12699,1,"\u4E19"],[12700,1,"\u4E01"],[12701,1,"\u5929"],[12702,1,"\u5730"],[12703,1,"\u4EBA"],[[12704,12727],2],[[12728,12730],2],[[12731,12735],2],[[12736,12751],2],[[12752,12771],2],[[12772,12773],2],[[12774,12782],3],[12783,3],[[12784,12799],2],[12800,1,"(\u1100)"],[12801,1,"(\u1102)"],[12802,1,"(\u1103)"],[12803,1,"(\u1105)"],[12804,1,"(\u1106)"],[12805,1,"(\u1107)"],[12806,1,"(\u1109)"],[12807,1,"(\u110B)"],[12808,1,"(\u110C)"],[12809,1,"(\u110E)"],[12810,1,"(\u110F)"],[12811,1,"(\u1110)"],[12812,1,"(\u1111)"],[12813,1,"(\u1112)"],[12814,1,"(\uAC00)"],[12815,1,"(\uB098)"],[12816,1,"(\uB2E4)"],[12817,1,"(\uB77C)"],[12818,1,"(\uB9C8)"],[12819,1,"(\uBC14)"],[12820,1,"(\uC0AC)"],[12821,1,"(\uC544)"],[12822,1,"(\uC790)"],[12823,1,"(\uCC28)"],[12824,1,"(\uCE74)"],[12825,1,"(\uD0C0)"],[12826,1,"(\uD30C)"],[12827,1,"(\uD558)"],[12828,1,"(\uC8FC)"],[12829,1,"(\uC624\uC804)"],[12830,1,"(\uC624\uD6C4)"],[12831,3],[12832,1,"(\u4E00)"],[12833,1,"(\u4E8C)"],[12834,1,"(\u4E09)"],[12835,1,"(\u56DB)"],[12836,1,"(\u4E94)"],[12837,1,"(\u516D)"],[12838,1,"(\u4E03)"],[12839,1,"(\u516B)"],[12840,1,"(\u4E5D)"],[12841,1,"(\u5341)"],[12842,1,"(\u6708)"],[12843,1,"(\u706B)"],[12844,1,"(\u6C34)"],[12845,1,"(\u6728)"],[12846,1,"(\u91D1)"],[12847,1,"(\u571F)"],[12848,1,"(\u65E5)"],[12849,1,"(\u682A)"],[12850,1,"(\u6709)"],[12851,1,"(\u793E)"],[12852,1,"(\u540D)"],[12853,1,"(\u7279)"],[12854,1,"(\u8CA1)"],[12855,1,"(\u795D)"],[12856,1,"(\u52B4)"],[12857,1,"(\u4EE3)"],[12858,1,"(\u547C)"],[12859,1,"(\u5B66)"],[12860,1,"(\u76E3)"],[12861,1,"(\u4F01)"],[12862,1,"(\u8CC7)"],[12863,1,"(\u5354)"],[12864,1,"(\u796D)"],[12865,1,"(\u4F11)"],[12866,1,"(\u81EA)"],[12867,1,"(\u81F3)"],[12868,1,"\u554F"],[12869,1,"\u5E7C"],[12870,1,"\u6587"],[12871,1,"\u7B8F"],[[12872,12879],2],[12880,1,"pte"],[12881,1,"21"],[12882,1,"22"],[12883,1,"23"],[12884,1,"24"],[12885,1,"25"],[12886,1,"26"],[12887,1,"27"],[12888,1,"28"],[12889,1,"29"],[12890,1,"30"],[12891,1,"31"],[12892,1,"32"],[12893,1,"33"],[12894,1,"34"],[12895,1,"35"],[12896,1,"\u1100"],[12897,1,"\u1102"],[12898,1,"\u1103"],[12899,1,"\u1105"],[12900,1,"\u1106"],[12901,1,"\u1107"],[12902,1,"\u1109"],[12903,1,"\u110B"],[12904,1,"\u110C"],[12905,1,"\u110E"],[12906,1,"\u110F"],[12907,1,"\u1110"],[12908,1,"\u1111"],[12909,1,"\u1112"],[12910,1,"\uAC00"],[12911,1,"\uB098"],[12912,1,"\uB2E4"],[12913,1,"\uB77C"],[12914,1,"\uB9C8"],[12915,1,"\uBC14"],[12916,1,"\uC0AC"],[12917,1,"\uC544"],[12918,1,"\uC790"],[12919,1,"\uCC28"],[12920,1,"\uCE74"],[12921,1,"\uD0C0"],[12922,1,"\uD30C"],[12923,1,"\uD558"],[12924,1,"\uCC38\uACE0"],[12925,1,"\uC8FC\uC758"],[12926,1,"\uC6B0"],[12927,2],[12928,1,"\u4E00"],[12929,1,"\u4E8C"],[12930,1,"\u4E09"],[12931,1,"\u56DB"],[12932,1,"\u4E94"],[12933,1,"\u516D"],[12934,1,"\u4E03"],[12935,1,"\u516B"],[12936,1,"\u4E5D"],[12937,1,"\u5341"],[12938,1,"\u6708"],[12939,1,"\u706B"],[12940,1,"\u6C34"],[12941,1,"\u6728"],[12942,1,"\u91D1"],[12943,1,"\u571F"],[12944,1,"\u65E5"],[12945,1,"\u682A"],[12946,1,"\u6709"],[12947,1,"\u793E"],[12948,1,"\u540D"],[12949,1,"\u7279"],[12950,1,"\u8CA1"],[12951,1,"\u795D"],[12952,1,"\u52B4"],[12953,1,"\u79D8"],[12954,1,"\u7537"],[12955,1,"\u5973"],[12956,1,"\u9069"],[12957,1,"\u512A"],[12958,1,"\u5370"],[12959,1,"\u6CE8"],[12960,1,"\u9805"],[12961,1,"\u4F11"],[12962,1,"\u5199"],[12963,1,"\u6B63"],[12964,1,"\u4E0A"],[12965,1,"\u4E2D"],[12966,1,"\u4E0B"],[12967,1,"\u5DE6"],[12968,1,"\u53F3"],[12969,1,"\u533B"],[12970,1,"\u5B97"],[12971,1,"\u5B66"],[12972,1,"\u76E3"],[12973,1,"\u4F01"],[12974,1,"\u8CC7"],[12975,1,"\u5354"],[12976,1,"\u591C"],[12977,1,"36"],[12978,1,"37"],[12979,1,"38"],[12980,1,"39"],[12981,1,"40"],[12982,1,"41"],[12983,1,"42"],[12984,1,"43"],[12985,1,"44"],[12986,1,"45"],[12987,1,"46"],[12988,1,"47"],[12989,1,"48"],[12990,1,"49"],[12991,1,"50"],[12992,1,"1\u6708"],[12993,1,"2\u6708"],[12994,1,"3\u6708"],[12995,1,"4\u6708"],[12996,1,"5\u6708"],[12997,1,"6\u6708"],[12998,1,"7\u6708"],[12999,1,"8\u6708"],[13000,1,"9\u6708"],[13001,1,"10\u6708"],[13002,1,"11\u6708"],[13003,1,"12\u6708"],[13004,1,"hg"],[13005,1,"erg"],[13006,1,"ev"],[13007,1,"ltd"],[13008,1,"\u30A2"],[13009,1,"\u30A4"],[13010,1,"\u30A6"],[13011,1,"\u30A8"],[13012,1,"\u30AA"],[13013,1,"\u30AB"],[13014,1,"\u30AD"],[13015,1,"\u30AF"],[13016,1,"\u30B1"],[13017,1,"\u30B3"],[13018,1,"\u30B5"],[13019,1,"\u30B7"],[13020,1,"\u30B9"],[13021,1,"\u30BB"],[13022,1,"\u30BD"],[13023,1,"\u30BF"],[13024,1,"\u30C1"],[13025,1,"\u30C4"],[13026,1,"\u30C6"],[13027,1,"\u30C8"],[13028,1,"\u30CA"],[13029,1,"\u30CB"],[13030,1,"\u30CC"],[13031,1,"\u30CD"],[13032,1,"\u30CE"],[13033,1,"\u30CF"],[13034,1,"\u30D2"],[13035,1,"\u30D5"],[13036,1,"\u30D8"],[13037,1,"\u30DB"],[13038,1,"\u30DE"],[13039,1,"\u30DF"],[13040,1,"\u30E0"],[13041,1,"\u30E1"],[13042,1,"\u30E2"],[13043,1,"\u30E4"],[13044,1,"\u30E6"],[13045,1,"\u30E8"],[13046,1,"\u30E9"],[13047,1,"\u30EA"],[13048,1,"\u30EB"],[13049,1,"\u30EC"],[13050,1,"\u30ED"],[13051,1,"\u30EF"],[13052,1,"\u30F0"],[13053,1,"\u30F1"],[13054,1,"\u30F2"],[13055,1,"\u4EE4\u548C"],[13056,1,"\u30A2\u30D1\u30FC\u30C8"],[13057,1,"\u30A2\u30EB\u30D5\u30A1"],[13058,1,"\u30A2\u30F3\u30DA\u30A2"],[13059,1,"\u30A2\u30FC\u30EB"],[13060,1,"\u30A4\u30CB\u30F3\u30B0"],[13061,1,"\u30A4\u30F3\u30C1"],[13062,1,"\u30A6\u30A9\u30F3"],[13063,1,"\u30A8\u30B9\u30AF\u30FC\u30C9"],[13064,1,"\u30A8\u30FC\u30AB\u30FC"],[13065,1,"\u30AA\u30F3\u30B9"],[13066,1,"\u30AA\u30FC\u30E0"],[13067,1,"\u30AB\u30A4\u30EA"],[13068,1,"\u30AB\u30E9\u30C3\u30C8"],[13069,1,"\u30AB\u30ED\u30EA\u30FC"],[13070,1,"\u30AC\u30ED\u30F3"],[13071,1,"\u30AC\u30F3\u30DE"],[13072,1,"\u30AE\u30AC"],[13073,1,"\u30AE\u30CB\u30FC"],[13074,1,"\u30AD\u30E5\u30EA\u30FC"],[13075,1,"\u30AE\u30EB\u30C0\u30FC"],[13076,1,"\u30AD\u30ED"],[13077,1,"\u30AD\u30ED\u30B0\u30E9\u30E0"],[13078,1,"\u30AD\u30ED\u30E1\u30FC\u30C8\u30EB"],[13079,1,"\u30AD\u30ED\u30EF\u30C3\u30C8"],[13080,1,"\u30B0\u30E9\u30E0"],[13081,1,"\u30B0\u30E9\u30E0\u30C8\u30F3"],[13082,1,"\u30AF\u30EB\u30BC\u30A4\u30ED"],[13083,1,"\u30AF\u30ED\u30FC\u30CD"],[13084,1,"\u30B1\u30FC\u30B9"],[13085,1,"\u30B3\u30EB\u30CA"],[13086,1,"\u30B3\u30FC\u30DD"],[13087,1,"\u30B5\u30A4\u30AF\u30EB"],[13088,1,"\u30B5\u30F3\u30C1\u30FC\u30E0"],[13089,1,"\u30B7\u30EA\u30F3\u30B0"],[13090,1,"\u30BB\u30F3\u30C1"],[13091,1,"\u30BB\u30F3\u30C8"],[13092,1,"\u30C0\u30FC\u30B9"],[13093,1,"\u30C7\u30B7"],[13094,1,"\u30C9\u30EB"],[13095,1,"\u30C8\u30F3"],[13096,1,"\u30CA\u30CE"],[13097,1,"\u30CE\u30C3\u30C8"],[13098,1,"\u30CF\u30A4\u30C4"],[13099,1,"\u30D1\u30FC\u30BB\u30F3\u30C8"],[13100,1,"\u30D1\u30FC\u30C4"],[13101,1,"\u30D0\u30FC\u30EC\u30EB"],[13102,1,"\u30D4\u30A2\u30B9\u30C8\u30EB"],[13103,1,"\u30D4\u30AF\u30EB"],[13104,1,"\u30D4\u30B3"],[13105,1,"\u30D3\u30EB"],[13106,1,"\u30D5\u30A1\u30E9\u30C3\u30C9"],[13107,1,"\u30D5\u30A3\u30FC\u30C8"],[13108,1,"\u30D6\u30C3\u30B7\u30A7\u30EB"],[13109,1,"\u30D5\u30E9\u30F3"],[13110,1,"\u30D8\u30AF\u30BF\u30FC\u30EB"],[13111,1,"\u30DA\u30BD"],[13112,1,"\u30DA\u30CB\u30D2"],[13113,1,"\u30D8\u30EB\u30C4"],[13114,1,"\u30DA\u30F3\u30B9"],[13115,1,"\u30DA\u30FC\u30B8"],[13116,1,"\u30D9\u30FC\u30BF"],[13117,1,"\u30DD\u30A4\u30F3\u30C8"],[13118,1,"\u30DC\u30EB\u30C8"],[13119,1,"\u30DB\u30F3"],[13120,1,"\u30DD\u30F3\u30C9"],[13121,1,"\u30DB\u30FC\u30EB"],[13122,1,"\u30DB\u30FC\u30F3"],[13123,1,"\u30DE\u30A4\u30AF\u30ED"],[13124,1,"\u30DE\u30A4\u30EB"],[13125,1,"\u30DE\u30C3\u30CF"],[13126,1,"\u30DE\u30EB\u30AF"],[13127,1,"\u30DE\u30F3\u30B7\u30E7\u30F3"],[13128,1,"\u30DF\u30AF\u30ED\u30F3"],[13129,1,"\u30DF\u30EA"],[13130,1,"\u30DF\u30EA\u30D0\u30FC\u30EB"],[13131,1,"\u30E1\u30AC"],[13132,1,"\u30E1\u30AC\u30C8\u30F3"],[13133,1,"\u30E1\u30FC\u30C8\u30EB"],[13134,1,"\u30E4\u30FC\u30C9"],[13135,1,"\u30E4\u30FC\u30EB"],[13136,1,"\u30E6\u30A2\u30F3"],[13137,1,"\u30EA\u30C3\u30C8\u30EB"],[13138,1,"\u30EA\u30E9"],[13139,1,"\u30EB\u30D4\u30FC"],[13140,1,"\u30EB\u30FC\u30D6\u30EB"],[13141,1,"\u30EC\u30E0"],[13142,1,"\u30EC\u30F3\u30C8\u30B2\u30F3"],[13143,1,"\u30EF\u30C3\u30C8"],[13144,1,"0\u70B9"],[13145,1,"1\u70B9"],[13146,1,"2\u70B9"],[13147,1,"3\u70B9"],[13148,1,"4\u70B9"],[13149,1,"5\u70B9"],[13150,1,"6\u70B9"],[13151,1,"7\u70B9"],[13152,1,"8\u70B9"],[13153,1,"9\u70B9"],[13154,1,"10\u70B9"],[13155,1,"11\u70B9"],[13156,1,"12\u70B9"],[13157,1,"13\u70B9"],[13158,1,"14\u70B9"],[13159,1,"15\u70B9"],[13160,1,"16\u70B9"],[13161,1,"17\u70B9"],[13162,1,"18\u70B9"],[13163,1,"19\u70B9"],[13164,1,"20\u70B9"],[13165,1,"21\u70B9"],[13166,1,"22\u70B9"],[13167,1,"23\u70B9"],[13168,1,"24\u70B9"],[13169,1,"hpa"],[13170,1,"da"],[13171,1,"au"],[13172,1,"bar"],[13173,1,"ov"],[13174,1,"pc"],[13175,1,"dm"],[13176,1,"dm2"],[13177,1,"dm3"],[13178,1,"iu"],[13179,1,"\u5E73\u6210"],[13180,1,"\u662D\u548C"],[13181,1,"\u5927\u6B63"],[13182,1,"\u660E\u6CBB"],[13183,1,"\u682A\u5F0F\u4F1A\u793E"],[13184,1,"pa"],[13185,1,"na"],[13186,1,"\u03BCa"],[13187,1,"ma"],[13188,1,"ka"],[13189,1,"kb"],[13190,1,"mb"],[13191,1,"gb"],[13192,1,"cal"],[13193,1,"kcal"],[13194,1,"pf"],[13195,1,"nf"],[13196,1,"\u03BCf"],[13197,1,"\u03BCg"],[13198,1,"mg"],[13199,1,"kg"],[13200,1,"hz"],[13201,1,"khz"],[13202,1,"mhz"],[13203,1,"ghz"],[13204,1,"thz"],[13205,1,"\u03BCl"],[13206,1,"ml"],[13207,1,"dl"],[13208,1,"kl"],[13209,1,"fm"],[13210,1,"nm"],[13211,1,"\u03BCm"],[13212,1,"mm"],[13213,1,"cm"],[13214,1,"km"],[13215,1,"mm2"],[13216,1,"cm2"],[13217,1,"m2"],[13218,1,"km2"],[13219,1,"mm3"],[13220,1,"cm3"],[13221,1,"m3"],[13222,1,"km3"],[13223,1,"m\u2215s"],[13224,1,"m\u2215s2"],[13225,1,"pa"],[13226,1,"kpa"],[13227,1,"mpa"],[13228,1,"gpa"],[13229,1,"rad"],[13230,1,"rad\u2215s"],[13231,1,"rad\u2215s2"],[13232,1,"ps"],[13233,1,"ns"],[13234,1,"\u03BCs"],[13235,1,"ms"],[13236,1,"pv"],[13237,1,"nv"],[13238,1,"\u03BCv"],[13239,1,"mv"],[13240,1,"kv"],[13241,1,"mv"],[13242,1,"pw"],[13243,1,"nw"],[13244,1,"\u03BCw"],[13245,1,"mw"],[13246,1,"kw"],[13247,1,"mw"],[13248,1,"k\u03C9"],[13249,1,"m\u03C9"],[13250,3],[13251,1,"bq"],[13252,1,"cc"],[13253,1,"cd"],[13254,1,"c\u2215kg"],[13255,3],[13256,1,"db"],[13257,1,"gy"],[13258,1,"ha"],[13259,1,"hp"],[13260,1,"in"],[13261,1,"kk"],[13262,1,"km"],[13263,1,"kt"],[13264,1,"lm"],[13265,1,"ln"],[13266,1,"log"],[13267,1,"lx"],[13268,1,"mb"],[13269,1,"mil"],[13270,1,"mol"],[13271,1,"ph"],[13272,3],[13273,1,"ppm"],[13274,1,"pr"],[13275,1,"sr"],[13276,1,"sv"],[13277,1,"wb"],[13278,1,"v\u2215m"],[13279,1,"a\u2215m"],[13280,1,"1\u65E5"],[13281,1,"2\u65E5"],[13282,1,"3\u65E5"],[13283,1,"4\u65E5"],[13284,1,"5\u65E5"],[13285,1,"6\u65E5"],[13286,1,"7\u65E5"],[13287,1,"8\u65E5"],[13288,1,"9\u65E5"],[13289,1,"10\u65E5"],[13290,1,"11\u65E5"],[13291,1,"12\u65E5"],[13292,1,"13\u65E5"],[13293,1,"14\u65E5"],[13294,1,"15\u65E5"],[13295,1,"16\u65E5"],[13296,1,"17\u65E5"],[13297,1,"18\u65E5"],[13298,1,"19\u65E5"],[13299,1,"20\u65E5"],[13300,1,"21\u65E5"],[13301,1,"22\u65E5"],[13302,1,"23\u65E5"],[13303,1,"24\u65E5"],[13304,1,"25\u65E5"],[13305,1,"26\u65E5"],[13306,1,"27\u65E5"],[13307,1,"28\u65E5"],[13308,1,"29\u65E5"],[13309,1,"30\u65E5"],[13310,1,"31\u65E5"],[13311,1,"gal"],[[13312,19893],2],[[19894,19903],2],[[19904,19967],2],[[19968,40869],2],[[40870,40891],2],[[40892,40899],2],[[40900,40907],2],[40908,2],[[40909,40917],2],[[40918,40938],2],[[40939,40943],2],[[40944,40956],2],[[40957,40959],2],[[40960,42124],2],[[42125,42127],3],[[42128,42145],2],[[42146,42147],2],[[42148,42163],2],[42164,2],[[42165,42176],2],[42177,2],[[42178,42180],2],[42181,2],[42182,2],[[42183,42191],3],[[42192,42237],2],[[42238,42239],2],[[42240,42508],2],[[42509,42511],2],[[42512,42539],2],[[42540,42559],3],[42560,1,"\uA641"],[42561,2],[42562,1,"\uA643"],[42563,2],[42564,1,"\uA645"],[42565,2],[42566,1,"\uA647"],[42567,2],[42568,1,"\uA649"],[42569,2],[42570,1,"\uA64B"],[42571,2],[42572,1,"\uA64D"],[42573,2],[42574,1,"\uA64F"],[42575,2],[42576,1,"\uA651"],[42577,2],[42578,1,"\uA653"],[42579,2],[42580,1,"\uA655"],[42581,2],[42582,1,"\uA657"],[42583,2],[42584,1,"\uA659"],[42585,2],[42586,1,"\uA65B"],[42587,2],[42588,1,"\uA65D"],[42589,2],[42590,1,"\uA65F"],[42591,2],[42592,1,"\uA661"],[42593,2],[42594,1,"\uA663"],[42595,2],[42596,1,"\uA665"],[42597,2],[42598,1,"\uA667"],[42599,2],[42600,1,"\uA669"],[42601,2],[42602,1,"\uA66B"],[42603,2],[42604,1,"\uA66D"],[[42605,42607],2],[[42608,42611],2],[[42612,42619],2],[[42620,42621],2],[42622,2],[42623,2],[42624,1,"\uA681"],[42625,2],[42626,1,"\uA683"],[42627,2],[42628,1,"\uA685"],[42629,2],[42630,1,"\uA687"],[42631,2],[42632,1,"\uA689"],[42633,2],[42634,1,"\uA68B"],[42635,2],[42636,1,"\uA68D"],[42637,2],[42638,1,"\uA68F"],[42639,2],[42640,1,"\uA691"],[42641,2],[42642,1,"\uA693"],[42643,2],[42644,1,"\uA695"],[42645,2],[42646,1,"\uA697"],[42647,2],[42648,1,"\uA699"],[42649,2],[42650,1,"\uA69B"],[42651,2],[42652,1,"\u044A"],[42653,1,"\u044C"],[42654,2],[42655,2],[[42656,42725],2],[[42726,42735],2],[[42736,42737],2],[[42738,42743],2],[[42744,42751],3],[[42752,42774],2],[[42775,42778],2],[[42779,42783],2],[[42784,42785],2],[42786,1,"\uA723"],[42787,2],[42788,1,"\uA725"],[42789,2],[42790,1,"\uA727"],[42791,2],[42792,1,"\uA729"],[42793,2],[42794,1,"\uA72B"],[42795,2],[42796,1,"\uA72D"],[42797,2],[42798,1,"\uA72F"],[[42799,42801],2],[42802,1,"\uA733"],[42803,2],[42804,1,"\uA735"],[42805,2],[42806,1,"\uA737"],[42807,2],[42808,1,"\uA739"],[42809,2],[42810,1,"\uA73B"],[42811,2],[42812,1,"\uA73D"],[42813,2],[42814,1,"\uA73F"],[42815,2],[42816,1,"\uA741"],[42817,2],[42818,1,"\uA743"],[42819,2],[42820,1,"\uA745"],[42821,2],[42822,1,"\uA747"],[42823,2],[42824,1,"\uA749"],[42825,2],[42826,1,"\uA74B"],[42827,2],[42828,1,"\uA74D"],[42829,2],[42830,1,"\uA74F"],[42831,2],[42832,1,"\uA751"],[42833,2],[42834,1,"\uA753"],[42835,2],[42836,1,"\uA755"],[42837,2],[42838,1,"\uA757"],[42839,2],[42840,1,"\uA759"],[42841,2],[42842,1,"\uA75B"],[42843,2],[42844,1,"\uA75D"],[42845,2],[42846,1,"\uA75F"],[42847,2],[42848,1,"\uA761"],[42849,2],[42850,1,"\uA763"],[42851,2],[42852,1,"\uA765"],[42853,2],[42854,1,"\uA767"],[42855,2],[42856,1,"\uA769"],[42857,2],[42858,1,"\uA76B"],[42859,2],[42860,1,"\uA76D"],[42861,2],[42862,1,"\uA76F"],[42863,2],[42864,1,"\uA76F"],[[42865,42872],2],[42873,1,"\uA77A"],[42874,2],[42875,1,"\uA77C"],[42876,2],[42877,1,"\u1D79"],[42878,1,"\uA77F"],[42879,2],[42880,1,"\uA781"],[42881,2],[42882,1,"\uA783"],[42883,2],[42884,1,"\uA785"],[42885,2],[42886,1,"\uA787"],[[42887,42888],2],[[42889,42890],2],[42891,1,"\uA78C"],[42892,2],[42893,1,"\u0265"],[42894,2],[42895,2],[42896,1,"\uA791"],[42897,2],[42898,1,"\uA793"],[42899,2],[[42900,42901],2],[42902,1,"\uA797"],[42903,2],[42904,1,"\uA799"],[42905,2],[42906,1,"\uA79B"],[42907,2],[42908,1,"\uA79D"],[42909,2],[42910,1,"\uA79F"],[42911,2],[42912,1,"\uA7A1"],[42913,2],[42914,1,"\uA7A3"],[42915,2],[42916,1,"\uA7A5"],[42917,2],[42918,1,"\uA7A7"],[42919,2],[42920,1,"\uA7A9"],[42921,2],[42922,1,"\u0266"],[42923,1,"\u025C"],[42924,1,"\u0261"],[42925,1,"\u026C"],[42926,1,"\u026A"],[42927,2],[42928,1,"\u029E"],[42929,1,"\u0287"],[42930,1,"\u029D"],[42931,1,"\uAB53"],[42932,1,"\uA7B5"],[42933,2],[42934,1,"\uA7B7"],[42935,2],[42936,1,"\uA7B9"],[42937,2],[42938,1,"\uA7BB"],[42939,2],[42940,1,"\uA7BD"],[42941,2],[42942,1,"\uA7BF"],[42943,2],[42944,1,"\uA7C1"],[42945,2],[42946,1,"\uA7C3"],[42947,2],[42948,1,"\uA794"],[42949,1,"\u0282"],[42950,1,"\u1D8E"],[42951,1,"\uA7C8"],[42952,2],[42953,1,"\uA7CA"],[42954,2],[42955,1,"\u0264"],[42956,1,"\uA7CD"],[42957,2],[[42958,42959],3],[42960,1,"\uA7D1"],[42961,2],[42962,3],[42963,2],[42964,3],[42965,2],[42966,1,"\uA7D7"],[42967,2],[42968,1,"\uA7D9"],[42969,2],[42970,1,"\uA7DB"],[42971,2],[42972,1,"\u019B"],[[42973,42993],3],[42994,1,"c"],[42995,1,"f"],[42996,1,"q"],[42997,1,"\uA7F6"],[42998,2],[42999,2],[43000,1,"\u0127"],[43001,1,"\u0153"],[43002,2],[[43003,43007],2],[[43008,43047],2],[[43048,43051],2],[43052,2],[[43053,43055],3],[[43056,43065],2],[[43066,43071],3],[[43072,43123],2],[[43124,43127],2],[[43128,43135],3],[[43136,43204],2],[43205,2],[[43206,43213],3],[[43214,43215],2],[[43216,43225],2],[[43226,43231],3],[[43232,43255],2],[[43256,43258],2],[43259,2],[43260,2],[43261,2],[[43262,43263],2],[[43264,43309],2],[[43310,43311],2],[[43312,43347],2],[[43348,43358],3],[43359,2],[[43360,43388],2],[[43389,43391],3],[[43392,43456],2],[[43457,43469],2],[43470,3],[[43471,43481],2],[[43482,43485],3],[[43486,43487],2],[[43488,43518],2],[43519,3],[[43520,43574],2],[[43575,43583],3],[[43584,43597],2],[[43598,43599],3],[[43600,43609],2],[[43610,43611],3],[[43612,43615],2],[[43616,43638],2],[[43639,43641],2],[[43642,43643],2],[[43644,43647],2],[[43648,43714],2],[[43715,43738],3],[[43739,43741],2],[[43742,43743],2],[[43744,43759],2],[[43760,43761],2],[[43762,43766],2],[[43767,43776],3],[[43777,43782],2],[[43783,43784],3],[[43785,43790],2],[[43791,43792],3],[[43793,43798],2],[[43799,43807],3],[[43808,43814],2],[43815,3],[[43816,43822],2],[43823,3],[[43824,43866],2],[43867,2],[43868,1,"\uA727"],[43869,1,"\uAB37"],[43870,1,"\u026B"],[43871,1,"\uAB52"],[[43872,43875],2],[[43876,43877],2],[[43878,43879],2],[43880,2],[43881,1,"\u028D"],[[43882,43883],2],[[43884,43887],3],[43888,1,"\u13A0"],[43889,1,"\u13A1"],[43890,1,"\u13A2"],[43891,1,"\u13A3"],[43892,1,"\u13A4"],[43893,1,"\u13A5"],[43894,1,"\u13A6"],[43895,1,"\u13A7"],[43896,1,"\u13A8"],[43897,1,"\u13A9"],[43898,1,"\u13AA"],[43899,1,"\u13AB"],[43900,1,"\u13AC"],[43901,1,"\u13AD"],[43902,1,"\u13AE"],[43903,1,"\u13AF"],[43904,1,"\u13B0"],[43905,1,"\u13B1"],[43906,1,"\u13B2"],[43907,1,"\u13B3"],[43908,1,"\u13B4"],[43909,1,"\u13B5"],[43910,1,"\u13B6"],[43911,1,"\u13B7"],[43912,1,"\u13B8"],[43913,1,"\u13B9"],[43914,1,"\u13BA"],[43915,1,"\u13BB"],[43916,1,"\u13BC"],[43917,1,"\u13BD"],[43918,1,"\u13BE"],[43919,1,"\u13BF"],[43920,1,"\u13C0"],[43921,1,"\u13C1"],[43922,1,"\u13C2"],[43923,1,"\u13C3"],[43924,1,"\u13C4"],[43925,1,"\u13C5"],[43926,1,"\u13C6"],[43927,1,"\u13C7"],[43928,1,"\u13C8"],[43929,1,"\u13C9"],[43930,1,"\u13CA"],[43931,1,"\u13CB"],[43932,1,"\u13CC"],[43933,1,"\u13CD"],[43934,1,"\u13CE"],[43935,1,"\u13CF"],[43936,1,"\u13D0"],[43937,1,"\u13D1"],[43938,1,"\u13D2"],[43939,1,"\u13D3"],[43940,1,"\u13D4"],[43941,1,"\u13D5"],[43942,1,"\u13D6"],[43943,1,"\u13D7"],[43944,1,"\u13D8"],[43945,1,"\u13D9"],[43946,1,"\u13DA"],[43947,1,"\u13DB"],[43948,1,"\u13DC"],[43949,1,"\u13DD"],[43950,1,"\u13DE"],[43951,1,"\u13DF"],[43952,1,"\u13E0"],[43953,1,"\u13E1"],[43954,1,"\u13E2"],[43955,1,"\u13E3"],[43956,1,"\u13E4"],[43957,1,"\u13E5"],[43958,1,"\u13E6"],[43959,1,"\u13E7"],[43960,1,"\u13E8"],[43961,1,"\u13E9"],[43962,1,"\u13EA"],[43963,1,"\u13EB"],[43964,1,"\u13EC"],[43965,1,"\u13ED"],[43966,1,"\u13EE"],[43967,1,"\u13EF"],[[43968,44010],2],[44011,2],[[44012,44013],2],[[44014,44015],3],[[44016,44025],2],[[44026,44031],3],[[44032,55203],2],[[55204,55215],3],[[55216,55238],2],[[55239,55242],3],[[55243,55291],2],[[55292,55295],3],[[55296,57343],3],[[57344,63743],3],[63744,1,"\u8C48"],[63745,1,"\u66F4"],[63746,1,"\u8ECA"],[63747,1,"\u8CC8"],[63748,1,"\u6ED1"],[63749,1,"\u4E32"],[63750,1,"\u53E5"],[[63751,63752],1,"\u9F9C"],[63753,1,"\u5951"],[63754,1,"\u91D1"],[63755,1,"\u5587"],[63756,1,"\u5948"],[63757,1,"\u61F6"],[63758,1,"\u7669"],[63759,1,"\u7F85"],[63760,1,"\u863F"],[63761,1,"\u87BA"],[63762,1,"\u88F8"],[63763,1,"\u908F"],[63764,1,"\u6A02"],[63765,1,"\u6D1B"],[63766,1,"\u70D9"],[63767,1,"\u73DE"],[63768,1,"\u843D"],[63769,1,"\u916A"],[63770,1,"\u99F1"],[63771,1,"\u4E82"],[63772,1,"\u5375"],[63773,1,"\u6B04"],[63774,1,"\u721B"],[63775,1,"\u862D"],[63776,1,"\u9E1E"],[63777,1,"\u5D50"],[63778,1,"\u6FEB"],[63779,1,"\u85CD"],[63780,1,"\u8964"],[63781,1,"\u62C9"],[63782,1,"\u81D8"],[63783,1,"\u881F"],[63784,1,"\u5ECA"],[63785,1,"\u6717"],[63786,1,"\u6D6A"],[63787,1,"\u72FC"],[63788,1,"\u90CE"],[63789,1,"\u4F86"],[63790,1,"\u51B7"],[63791,1,"\u52DE"],[63792,1,"\u64C4"],[63793,1,"\u6AD3"],[63794,1,"\u7210"],[63795,1,"\u76E7"],[63796,1,"\u8001"],[63797,1,"\u8606"],[63798,1,"\u865C"],[63799,1,"\u8DEF"],[63800,1,"\u9732"],[63801,1,"\u9B6F"],[63802,1,"\u9DFA"],[63803,1,"\u788C"],[63804,1,"\u797F"],[63805,1,"\u7DA0"],[63806,1,"\u83C9"],[63807,1,"\u9304"],[63808,1,"\u9E7F"],[63809,1,"\u8AD6"],[63810,1,"\u58DF"],[63811,1,"\u5F04"],[63812,1,"\u7C60"],[63813,1,"\u807E"],[63814,1,"\u7262"],[63815,1,"\u78CA"],[63816,1,"\u8CC2"],[63817,1,"\u96F7"],[63818,1,"\u58D8"],[63819,1,"\u5C62"],[63820,1,"\u6A13"],[63821,1,"\u6DDA"],[63822,1,"\u6F0F"],[63823,1,"\u7D2F"],[63824,1,"\u7E37"],[63825,1,"\u964B"],[63826,1,"\u52D2"],[63827,1,"\u808B"],[63828,1,"\u51DC"],[63829,1,"\u51CC"],[63830,1,"\u7A1C"],[63831,1,"\u7DBE"],[63832,1,"\u83F1"],[63833,1,"\u9675"],[63834,1,"\u8B80"],[63835,1,"\u62CF"],[63836,1,"\u6A02"],[63837,1,"\u8AFE"],[63838,1,"\u4E39"],[63839,1,"\u5BE7"],[63840,1,"\u6012"],[63841,1,"\u7387"],[63842,1,"\u7570"],[63843,1,"\u5317"],[63844,1,"\u78FB"],[63845,1,"\u4FBF"],[63846,1,"\u5FA9"],[63847,1,"\u4E0D"],[63848,1,"\u6CCC"],[63849,1,"\u6578"],[63850,1,"\u7D22"],[63851,1,"\u53C3"],[63852,1,"\u585E"],[63853,1,"\u7701"],[63854,1,"\u8449"],[63855,1,"\u8AAA"],[63856,1,"\u6BBA"],[63857,1,"\u8FB0"],[63858,1,"\u6C88"],[63859,1,"\u62FE"],[63860,1,"\u82E5"],[63861,1,"\u63A0"],[63862,1,"\u7565"],[63863,1,"\u4EAE"],[63864,1,"\u5169"],[63865,1,"\u51C9"],[63866,1,"\u6881"],[63867,1,"\u7CE7"],[63868,1,"\u826F"],[63869,1,"\u8AD2"],[63870,1,"\u91CF"],[63871,1,"\u52F5"],[63872,1,"\u5442"],[63873,1,"\u5973"],[63874,1,"\u5EEC"],[63875,1,"\u65C5"],[63876,1,"\u6FFE"],[63877,1,"\u792A"],[63878,1,"\u95AD"],[63879,1,"\u9A6A"],[63880,1,"\u9E97"],[63881,1,"\u9ECE"],[63882,1,"\u529B"],[63883,1,"\u66C6"],[63884,1,"\u6B77"],[63885,1,"\u8F62"],[63886,1,"\u5E74"],[63887,1,"\u6190"],[63888,1,"\u6200"],[63889,1,"\u649A"],[63890,1,"\u6F23"],[63891,1,"\u7149"],[63892,1,"\u7489"],[63893,1,"\u79CA"],[63894,1,"\u7DF4"],[63895,1,"\u806F"],[63896,1,"\u8F26"],[63897,1,"\u84EE"],[63898,1,"\u9023"],[63899,1,"\u934A"],[63900,1,"\u5217"],[63901,1,"\u52A3"],[63902,1,"\u54BD"],[63903,1,"\u70C8"],[63904,1,"\u88C2"],[63905,1,"\u8AAA"],[63906,1,"\u5EC9"],[63907,1,"\u5FF5"],[63908,1,"\u637B"],[63909,1,"\u6BAE"],[63910,1,"\u7C3E"],[63911,1,"\u7375"],[63912,1,"\u4EE4"],[63913,1,"\u56F9"],[63914,1,"\u5BE7"],[63915,1,"\u5DBA"],[63916,1,"\u601C"],[63917,1,"\u73B2"],[63918,1,"\u7469"],[63919,1,"\u7F9A"],[63920,1,"\u8046"],[63921,1,"\u9234"],[63922,1,"\u96F6"],[63923,1,"\u9748"],[63924,1,"\u9818"],[63925,1,"\u4F8B"],[63926,1,"\u79AE"],[63927,1,"\u91B4"],[63928,1,"\u96B8"],[63929,1,"\u60E1"],[63930,1,"\u4E86"],[63931,1,"\u50DA"],[63932,1,"\u5BEE"],[63933,1,"\u5C3F"],[63934,1,"\u6599"],[63935,1,"\u6A02"],[63936,1,"\u71CE"],[63937,1,"\u7642"],[63938,1,"\u84FC"],[63939,1,"\u907C"],[63940,1,"\u9F8D"],[63941,1,"\u6688"],[63942,1,"\u962E"],[63943,1,"\u5289"],[63944,1,"\u677B"],[63945,1,"\u67F3"],[63946,1,"\u6D41"],[63947,1,"\u6E9C"],[63948,1,"\u7409"],[63949,1,"\u7559"],[63950,1,"\u786B"],[63951,1,"\u7D10"],[63952,1,"\u985E"],[63953,1,"\u516D"],[63954,1,"\u622E"],[63955,1,"\u9678"],[63956,1,"\u502B"],[63957,1,"\u5D19"],[63958,1,"\u6DEA"],[63959,1,"\u8F2A"],[63960,1,"\u5F8B"],[63961,1,"\u6144"],[63962,1,"\u6817"],[63963,1,"\u7387"],[63964,1,"\u9686"],[63965,1,"\u5229"],[63966,1,"\u540F"],[63967,1,"\u5C65"],[63968,1,"\u6613"],[63969,1,"\u674E"],[63970,1,"\u68A8"],[63971,1,"\u6CE5"],[63972,1,"\u7406"],[63973,1,"\u75E2"],[63974,1,"\u7F79"],[63975,1,"\u88CF"],[63976,1,"\u88E1"],[63977,1,"\u91CC"],[63978,1,"\u96E2"],[63979,1,"\u533F"],[63980,1,"\u6EBA"],[63981,1,"\u541D"],[63982,1,"\u71D0"],[63983,1,"\u7498"],[63984,1,"\u85FA"],[63985,1,"\u96A3"],[63986,1,"\u9C57"],[63987,1,"\u9E9F"],[63988,1,"\u6797"],[63989,1,"\u6DCB"],[63990,1,"\u81E8"],[63991,1,"\u7ACB"],[63992,1,"\u7B20"],[63993,1,"\u7C92"],[63994,1,"\u72C0"],[63995,1,"\u7099"],[63996,1,"\u8B58"],[63997,1,"\u4EC0"],[63998,1,"\u8336"],[63999,1,"\u523A"],[64000,1,"\u5207"],[64001,1,"\u5EA6"],[64002,1,"\u62D3"],[64003,1,"\u7CD6"],[64004,1,"\u5B85"],[64005,1,"\u6D1E"],[64006,1,"\u66B4"],[64007,1,"\u8F3B"],[64008,1,"\u884C"],[64009,1,"\u964D"],[64010,1,"\u898B"],[64011,1,"\u5ED3"],[64012,1,"\u5140"],[64013,1,"\u55C0"],[[64014,64015],2],[64016,1,"\u585A"],[64017,2],[64018,1,"\u6674"],[[64019,64020],2],[64021,1,"\u51DE"],[64022,1,"\u732A"],[64023,1,"\u76CA"],[64024,1,"\u793C"],[64025,1,"\u795E"],[64026,1,"\u7965"],[64027,1,"\u798F"],[64028,1,"\u9756"],[64029,1,"\u7CBE"],[64030,1,"\u7FBD"],[64031,2],[64032,1,"\u8612"],[64033,2],[64034,1,"\u8AF8"],[[64035,64036],2],[64037,1,"\u9038"],[64038,1,"\u90FD"],[[64039,64041],2],[64042,1,"\u98EF"],[64043,1,"\u98FC"],[64044,1,"\u9928"],[64045,1,"\u9DB4"],[64046,1,"\u90DE"],[64047,1,"\u96B7"],[64048,1,"\u4FAE"],[64049,1,"\u50E7"],[64050,1,"\u514D"],[64051,1,"\u52C9"],[64052,1,"\u52E4"],[64053,1,"\u5351"],[64054,1,"\u559D"],[64055,1,"\u5606"],[64056,1,"\u5668"],[64057,1,"\u5840"],[64058,1,"\u58A8"],[64059,1,"\u5C64"],[64060,1,"\u5C6E"],[64061,1,"\u6094"],[64062,1,"\u6168"],[64063,1,"\u618E"],[64064,1,"\u61F2"],[64065,1,"\u654F"],[64066,1,"\u65E2"],[64067,1,"\u6691"],[64068,1,"\u6885"],[64069,1,"\u6D77"],[64070,1,"\u6E1A"],[64071,1,"\u6F22"],[64072,1,"\u716E"],[64073,1,"\u722B"],[64074,1,"\u7422"],[64075,1,"\u7891"],[64076,1,"\u793E"],[64077,1,"\u7949"],[64078,1,"\u7948"],[64079,1,"\u7950"],[64080,1,"\u7956"],[64081,1,"\u795D"],[64082,1,"\u798D"],[64083,1,"\u798E"],[64084,1,"\u7A40"],[64085,1,"\u7A81"],[64086,1,"\u7BC0"],[64087,1,"\u7DF4"],[64088,1,"\u7E09"],[64089,1,"\u7E41"],[64090,1,"\u7F72"],[64091,1,"\u8005"],[64092,1,"\u81ED"],[[64093,64094],1,"\u8279"],[64095,1,"\u8457"],[64096,1,"\u8910"],[64097,1,"\u8996"],[64098,1,"\u8B01"],[64099,1,"\u8B39"],[64100,1,"\u8CD3"],[64101,1,"\u8D08"],[64102,1,"\u8FB6"],[64103,1,"\u9038"],[64104,1,"\u96E3"],[64105,1,"\u97FF"],[64106,1,"\u983B"],[64107,1,"\u6075"],[64108,1,"\uD850\uDEEE"],[64109,1,"\u8218"],[[64110,64111],3],[64112,1,"\u4E26"],[64113,1,"\u51B5"],[64114,1,"\u5168"],[64115,1,"\u4F80"],[64116,1,"\u5145"],[64117,1,"\u5180"],[64118,1,"\u52C7"],[64119,1,"\u52FA"],[64120,1,"\u559D"],[64121,1,"\u5555"],[64122,1,"\u5599"],[64123,1,"\u55E2"],[64124,1,"\u585A"],[64125,1,"\u58B3"],[64126,1,"\u5944"],[64127,1,"\u5954"],[64128,1,"\u5A62"],[64129,1,"\u5B28"],[64130,1,"\u5ED2"],[64131,1,"\u5ED9"],[64132,1,"\u5F69"],[64133,1,"\u5FAD"],[64134,1,"\u60D8"],[64135,1,"\u614E"],[64136,1,"\u6108"],[64137,1,"\u618E"],[64138,1,"\u6160"],[64139,1,"\u61F2"],[64140,1,"\u6234"],[64141,1,"\u63C4"],[64142,1,"\u641C"],[64143,1,"\u6452"],[64144,1,"\u6556"],[64145,1,"\u6674"],[64146,1,"\u6717"],[64147,1,"\u671B"],[64148,1,"\u6756"],[64149,1,"\u6B79"],[64150,1,"\u6BBA"],[64151,1,"\u6D41"],[64152,1,"\u6EDB"],[64153,1,"\u6ECB"],[64154,1,"\u6F22"],[64155,1,"\u701E"],[64156,1,"\u716E"],[64157,1,"\u77A7"],[64158,1,"\u7235"],[64159,1,"\u72AF"],[64160,1,"\u732A"],[64161,1,"\u7471"],[64162,1,"\u7506"],[64163,1,"\u753B"],[64164,1,"\u761D"],[64165,1,"\u761F"],[64166,1,"\u76CA"],[64167,1,"\u76DB"],[64168,1,"\u76F4"],[64169,1,"\u774A"],[64170,1,"\u7740"],[64171,1,"\u78CC"],[64172,1,"\u7AB1"],[64173,1,"\u7BC0"],[64174,1,"\u7C7B"],[64175,1,"\u7D5B"],[64176,1,"\u7DF4"],[64177,1,"\u7F3E"],[64178,1,"\u8005"],[64179,1,"\u8352"],[64180,1,"\u83EF"],[64181,1,"\u8779"],[64182,1,"\u8941"],[64183,1,"\u8986"],[64184,1,"\u8996"],[64185,1,"\u8ABF"],[64186,1,"\u8AF8"],[64187,1,"\u8ACB"],[64188,1,"\u8B01"],[64189,1,"\u8AFE"],[64190,1,"\u8AED"],[64191,1,"\u8B39"],[64192,1,"\u8B8A"],[64193,1,"\u8D08"],[64194,1,"\u8F38"],[64195,1,"\u9072"],[64196,1,"\u9199"],[64197,1,"\u9276"],[64198,1,"\u967C"],[64199,1,"\u96E3"],[64200,1,"\u9756"],[64201,1,"\u97DB"],[64202,1,"\u97FF"],[64203,1,"\u980B"],[64204,1,"\u983B"],[64205,1,"\u9B12"],[64206,1,"\u9F9C"],[64207,1,"\uD84A\uDC4A"],[64208,1,"\uD84A\uDC44"],[64209,1,"\uD84C\uDFD5"],[64210,1,"\u3B9D"],[64211,1,"\u4018"],[64212,1,"\u4039"],[64213,1,"\uD854\uDE49"],[64214,1,"\uD857\uDCD0"],[64215,1,"\uD85F\uDED3"],[64216,1,"\u9F43"],[64217,1,"\u9F8E"],[[64218,64255],3],[64256,1,"ff"],[64257,1,"fi"],[64258,1,"fl"],[64259,1,"ffi"],[64260,1,"ffl"],[[64261,64262],1,"st"],[[64263,64274],3],[64275,1,"\u0574\u0576"],[64276,1,"\u0574\u0565"],[64277,1,"\u0574\u056B"],[64278,1,"\u057E\u0576"],[64279,1,"\u0574\u056D"],[[64280,64284],3],[64285,1,"\u05D9\u05B4"],[64286,2],[64287,1,"\u05F2\u05B7"],[64288,1,"\u05E2"],[64289,1,"\u05D0"],[64290,1,"\u05D3"],[64291,1,"\u05D4"],[64292,1,"\u05DB"],[64293,1,"\u05DC"],[64294,1,"\u05DD"],[64295,1,"\u05E8"],[64296,1,"\u05EA"],[64297,1,"+"],[64298,1,"\u05E9\u05C1"],[64299,1,"\u05E9\u05C2"],[64300,1,"\u05E9\u05BC\u05C1"],[64301,1,"\u05E9\u05BC\u05C2"],[64302,1,"\u05D0\u05B7"],[64303,1,"\u05D0\u05B8"],[64304,1,"\u05D0\u05BC"],[64305,1,"\u05D1\u05BC"],[64306,1,"\u05D2\u05BC"],[64307,1,"\u05D3\u05BC"],[64308,1,"\u05D4\u05BC"],[64309,1,"\u05D5\u05BC"],[64310,1,"\u05D6\u05BC"],[64311,3],[64312,1,"\u05D8\u05BC"],[64313,1,"\u05D9\u05BC"],[64314,1,"\u05DA\u05BC"],[64315,1,"\u05DB\u05BC"],[64316,1,"\u05DC\u05BC"],[64317,3],[64318,1,"\u05DE\u05BC"],[64319,3],[64320,1,"\u05E0\u05BC"],[64321,1,"\u05E1\u05BC"],[64322,3],[64323,1,"\u05E3\u05BC"],[64324,1,"\u05E4\u05BC"],[64325,3],[64326,1,"\u05E6\u05BC"],[64327,1,"\u05E7\u05BC"],[64328,1,"\u05E8\u05BC"],[64329,1,"\u05E9\u05BC"],[64330,1,"\u05EA\u05BC"],[64331,1,"\u05D5\u05B9"],[64332,1,"\u05D1\u05BF"],[64333,1,"\u05DB\u05BF"],[64334,1,"\u05E4\u05BF"],[64335,1,"\u05D0\u05DC"],[[64336,64337],1,"\u0671"],[[64338,64341],1,"\u067B"],[[64342,64345],1,"\u067E"],[[64346,64349],1,"\u0680"],[[64350,64353],1,"\u067A"],[[64354,64357],1,"\u067F"],[[64358,64361],1,"\u0679"],[[64362,64365],1,"\u06A4"],[[64366,64369],1,"\u06A6"],[[64370,64373],1,"\u0684"],[[64374,64377],1,"\u0683"],[[64378,64381],1,"\u0686"],[[64382,64385],1,"\u0687"],[[64386,64387],1,"\u068D"],[[64388,64389],1,"\u068C"],[[64390,64391],1,"\u068E"],[[64392,64393],1,"\u0688"],[[64394,64395],1,"\u0698"],[[64396,64397],1,"\u0691"],[[64398,64401],1,"\u06A9"],[[64402,64405],1,"\u06AF"],[[64406,64409],1,"\u06B3"],[[64410,64413],1,"\u06B1"],[[64414,64415],1,"\u06BA"],[[64416,64419],1,"\u06BB"],[[64420,64421],1,"\u06C0"],[[64422,64425],1,"\u06C1"],[[64426,64429],1,"\u06BE"],[[64430,64431],1,"\u06D2"],[[64432,64433],1,"\u06D3"],[[64434,64449],2],[64450,2],[[64451,64466],3],[[64467,64470],1,"\u06AD"],[[64471,64472],1,"\u06C7"],[[64473,64474],1,"\u06C6"],[[64475,64476],1,"\u06C8"],[64477,1,"\u06C7\u0674"],[[64478,64479],1,"\u06CB"],[[64480,64481],1,"\u06C5"],[[64482,64483],1,"\u06C9"],[[64484,64487],1,"\u06D0"],[[64488,64489],1,"\u0649"],[[64490,64491],1,"\u0626\u0627"],[[64492,64493],1,"\u0626\u06D5"],[[64494,64495],1,"\u0626\u0648"],[[64496,64497],1,"\u0626\u06C7"],[[64498,64499],1,"\u0626\u06C6"],[[64500,64501],1,"\u0626\u06C8"],[[64502,64504],1,"\u0626\u06D0"],[[64505,64507],1,"\u0626\u0649"],[[64508,64511],1,"\u06CC"],[64512,1,"\u0626\u062C"],[64513,1,"\u0626\u062D"],[64514,1,"\u0626\u0645"],[64515,1,"\u0626\u0649"],[64516,1,"\u0626\u064A"],[64517,1,"\u0628\u062C"],[64518,1,"\u0628\u062D"],[64519,1,"\u0628\u062E"],[64520,1,"\u0628\u0645"],[64521,1,"\u0628\u0649"],[64522,1,"\u0628\u064A"],[64523,1,"\u062A\u062C"],[64524,1,"\u062A\u062D"],[64525,1,"\u062A\u062E"],[64526,1,"\u062A\u0645"],[64527,1,"\u062A\u0649"],[64528,1,"\u062A\u064A"],[64529,1,"\u062B\u062C"],[64530,1,"\u062B\u0645"],[64531,1,"\u062B\u0649"],[64532,1,"\u062B\u064A"],[64533,1,"\u062C\u062D"],[64534,1,"\u062C\u0645"],[64535,1,"\u062D\u062C"],[64536,1,"\u062D\u0645"],[64537,1,"\u062E\u062C"],[64538,1,"\u062E\u062D"],[64539,1,"\u062E\u0645"],[64540,1,"\u0633\u062C"],[64541,1,"\u0633\u062D"],[64542,1,"\u0633\u062E"],[64543,1,"\u0633\u0645"],[64544,1,"\u0635\u062D"],[64545,1,"\u0635\u0645"],[64546,1,"\u0636\u062C"],[64547,1,"\u0636\u062D"],[64548,1,"\u0636\u062E"],[64549,1,"\u0636\u0645"],[64550,1,"\u0637\u062D"],[64551,1,"\u0637\u0645"],[64552,1,"\u0638\u0645"],[64553,1,"\u0639\u062C"],[64554,1,"\u0639\u0645"],[64555,1,"\u063A\u062C"],[64556,1,"\u063A\u0645"],[64557,1,"\u0641\u062C"],[64558,1,"\u0641\u062D"],[64559,1,"\u0641\u062E"],[64560,1,"\u0641\u0645"],[64561,1,"\u0641\u0649"],[64562,1,"\u0641\u064A"],[64563,1,"\u0642\u062D"],[64564,1,"\u0642\u0645"],[64565,1,"\u0642\u0649"],[64566,1,"\u0642\u064A"],[64567,1,"\u0643\u0627"],[64568,1,"\u0643\u062C"],[64569,1,"\u0643\u062D"],[64570,1,"\u0643\u062E"],[64571,1,"\u0643\u0644"],[64572,1,"\u0643\u0645"],[64573,1,"\u0643\u0649"],[64574,1,"\u0643\u064A"],[64575,1,"\u0644\u062C"],[64576,1,"\u0644\u062D"],[64577,1,"\u0644\u062E"],[64578,1,"\u0644\u0645"],[64579,1,"\u0644\u0649"],[64580,1,"\u0644\u064A"],[64581,1,"\u0645\u062C"],[64582,1,"\u0645\u062D"],[64583,1,"\u0645\u062E"],[64584,1,"\u0645\u0645"],[64585,1,"\u0645\u0649"],[64586,1,"\u0645\u064A"],[64587,1,"\u0646\u062C"],[64588,1,"\u0646\u062D"],[64589,1,"\u0646\u062E"],[64590,1,"\u0646\u0645"],[64591,1,"\u0646\u0649"],[64592,1,"\u0646\u064A"],[64593,1,"\u0647\u062C"],[64594,1,"\u0647\u0645"],[64595,1,"\u0647\u0649"],[64596,1,"\u0647\u064A"],[64597,1,"\u064A\u062C"],[64598,1,"\u064A\u062D"],[64599,1,"\u064A\u062E"],[64600,1,"\u064A\u0645"],[64601,1,"\u064A\u0649"],[64602,1,"\u064A\u064A"],[64603,1,"\u0630\u0670"],[64604,1,"\u0631\u0670"],[64605,1,"\u0649\u0670"],[64606,1," \u064C\u0651"],[64607,1," \u064D\u0651"],[64608,1," \u064E\u0651"],[64609,1," \u064F\u0651"],[64610,1," \u0650\u0651"],[64611,1," \u0651\u0670"],[64612,1,"\u0626\u0631"],[64613,1,"\u0626\u0632"],[64614,1,"\u0626\u0645"],[64615,1,"\u0626\u0646"],[64616,1,"\u0626\u0649"],[64617,1,"\u0626\u064A"],[64618,1,"\u0628\u0631"],[64619,1,"\u0628\u0632"],[64620,1,"\u0628\u0645"],[64621,1,"\u0628\u0646"],[64622,1,"\u0628\u0649"],[64623,1,"\u0628\u064A"],[64624,1,"\u062A\u0631"],[64625,1,"\u062A\u0632"],[64626,1,"\u062A\u0645"],[64627,1,"\u062A\u0646"],[64628,1,"\u062A\u0649"],[64629,1,"\u062A\u064A"],[64630,1,"\u062B\u0631"],[64631,1,"\u062B\u0632"],[64632,1,"\u062B\u0645"],[64633,1,"\u062B\u0646"],[64634,1,"\u062B\u0649"],[64635,1,"\u062B\u064A"],[64636,1,"\u0641\u0649"],[64637,1,"\u0641\u064A"],[64638,1,"\u0642\u0649"],[64639,1,"\u0642\u064A"],[64640,1,"\u0643\u0627"],[64641,1,"\u0643\u0644"],[64642,1,"\u0643\u0645"],[64643,1,"\u0643\u0649"],[64644,1,"\u0643\u064A"],[64645,1,"\u0644\u0645"],[64646,1,"\u0644\u0649"],[64647,1,"\u0644\u064A"],[64648,1,"\u0645\u0627"],[64649,1,"\u0645\u0645"],[64650,1,"\u0646\u0631"],[64651,1,"\u0646\u0632"],[64652,1,"\u0646\u0645"],[64653,1,"\u0646\u0646"],[64654,1,"\u0646\u0649"],[64655,1,"\u0646\u064A"],[64656,1,"\u0649\u0670"],[64657,1,"\u064A\u0631"],[64658,1,"\u064A\u0632"],[64659,1,"\u064A\u0645"],[64660,1,"\u064A\u0646"],[64661,1,"\u064A\u0649"],[64662,1,"\u064A\u064A"],[64663,1,"\u0626\u062C"],[64664,1,"\u0626\u062D"],[64665,1,"\u0626\u062E"],[64666,1,"\u0626\u0645"],[64667,1,"\u0626\u0647"],[64668,1,"\u0628\u062C"],[64669,1,"\u0628\u062D"],[64670,1,"\u0628\u062E"],[64671,1,"\u0628\u0645"],[64672,1,"\u0628\u0647"],[64673,1,"\u062A\u062C"],[64674,1,"\u062A\u062D"],[64675,1,"\u062A\u062E"],[64676,1,"\u062A\u0645"],[64677,1,"\u062A\u0647"],[64678,1,"\u062B\u0645"],[64679,1,"\u062C\u062D"],[64680,1,"\u062C\u0645"],[64681,1,"\u062D\u062C"],[64682,1,"\u062D\u0645"],[64683,1,"\u062E\u062C"],[64684,1,"\u062E\u0645"],[64685,1,"\u0633\u062C"],[64686,1,"\u0633\u062D"],[64687,1,"\u0633\u062E"],[64688,1,"\u0633\u0645"],[64689,1,"\u0635\u062D"],[64690,1,"\u0635\u062E"],[64691,1,"\u0635\u0645"],[64692,1,"\u0636\u062C"],[64693,1,"\u0636\u062D"],[64694,1,"\u0636\u062E"],[64695,1,"\u0636\u0645"],[64696,1,"\u0637\u062D"],[64697,1,"\u0638\u0645"],[64698,1,"\u0639\u062C"],[64699,1,"\u0639\u0645"],[64700,1,"\u063A\u062C"],[64701,1,"\u063A\u0645"],[64702,1,"\u0641\u062C"],[64703,1,"\u0641\u062D"],[64704,1,"\u0641\u062E"],[64705,1,"\u0641\u0645"],[64706,1,"\u0642\u062D"],[64707,1,"\u0642\u0645"],[64708,1,"\u0643\u062C"],[64709,1,"\u0643\u062D"],[64710,1,"\u0643\u062E"],[64711,1,"\u0643\u0644"],[64712,1,"\u0643\u0645"],[64713,1,"\u0644\u062C"],[64714,1,"\u0644\u062D"],[64715,1,"\u0644\u062E"],[64716,1,"\u0644\u0645"],[64717,1,"\u0644\u0647"],[64718,1,"\u0645\u062C"],[64719,1,"\u0645\u062D"],[64720,1,"\u0645\u062E"],[64721,1,"\u0645\u0645"],[64722,1,"\u0646\u062C"],[64723,1,"\u0646\u062D"],[64724,1,"\u0646\u062E"],[64725,1,"\u0646\u0645"],[64726,1,"\u0646\u0647"],[64727,1,"\u0647\u062C"],[64728,1,"\u0647\u0645"],[64729,1,"\u0647\u0670"],[64730,1,"\u064A\u062C"],[64731,1,"\u064A\u062D"],[64732,1,"\u064A\u062E"],[64733,1,"\u064A\u0645"],[64734,1,"\u064A\u0647"],[64735,1,"\u0626\u0645"],[64736,1,"\u0626\u0647"],[64737,1,"\u0628\u0645"],[64738,1,"\u0628\u0647"],[64739,1,"\u062A\u0645"],[64740,1,"\u062A\u0647"],[64741,1,"\u062B\u0645"],[64742,1,"\u062B\u0647"],[64743,1,"\u0633\u0645"],[64744,1,"\u0633\u0647"],[64745,1,"\u0634\u0645"],[64746,1,"\u0634\u0647"],[64747,1,"\u0643\u0644"],[64748,1,"\u0643\u0645"],[64749,1,"\u0644\u0645"],[64750,1,"\u0646\u0645"],[64751,1,"\u0646\u0647"],[64752,1,"\u064A\u0645"],[64753,1,"\u064A\u0647"],[64754,1,"\u0640\u064E\u0651"],[64755,1,"\u0640\u064F\u0651"],[64756,1,"\u0640\u0650\u0651"],[64757,1,"\u0637\u0649"],[64758,1,"\u0637\u064A"],[64759,1,"\u0639\u0649"],[64760,1,"\u0639\u064A"],[64761,1,"\u063A\u0649"],[64762,1,"\u063A\u064A"],[64763,1,"\u0633\u0649"],[64764,1,"\u0633\u064A"],[64765,1,"\u0634\u0649"],[64766,1,"\u0634\u064A"],[64767,1,"\u062D\u0649"],[64768,1,"\u062D\u064A"],[64769,1,"\u062C\u0649"],[64770,1,"\u062C\u064A"],[64771,1,"\u062E\u0649"],[64772,1,"\u062E\u064A"],[64773,1,"\u0635\u0649"],[64774,1,"\u0635\u064A"],[64775,1,"\u0636\u0649"],[64776,1,"\u0636\u064A"],[64777,1,"\u0634\u062C"],[64778,1,"\u0634\u062D"],[64779,1,"\u0634\u062E"],[64780,1,"\u0634\u0645"],[64781,1,"\u0634\u0631"],[64782,1,"\u0633\u0631"],[64783,1,"\u0635\u0631"],[64784,1,"\u0636\u0631"],[64785,1,"\u0637\u0649"],[64786,1,"\u0637\u064A"],[64787,1,"\u0639\u0649"],[64788,1,"\u0639\u064A"],[64789,1,"\u063A\u0649"],[64790,1,"\u063A\u064A"],[64791,1,"\u0633\u0649"],[64792,1,"\u0633\u064A"],[64793,1,"\u0634\u0649"],[64794,1,"\u0634\u064A"],[64795,1,"\u062D\u0649"],[64796,1,"\u062D\u064A"],[64797,1,"\u062C\u0649"],[64798,1,"\u062C\u064A"],[64799,1,"\u062E\u0649"],[64800,1,"\u062E\u064A"],[64801,1,"\u0635\u0649"],[64802,1,"\u0635\u064A"],[64803,1,"\u0636\u0649"],[64804,1,"\u0636\u064A"],[64805,1,"\u0634\u062C"],[64806,1,"\u0634\u062D"],[64807,1,"\u0634\u062E"],[64808,1,"\u0634\u0645"],[64809,1,"\u0634\u0631"],[64810,1,"\u0633\u0631"],[64811,1,"\u0635\u0631"],[64812,1,"\u0636\u0631"],[64813,1,"\u0634\u062C"],[64814,1,"\u0634\u062D"],[64815,1,"\u0634\u062E"],[64816,1,"\u0634\u0645"],[64817,1,"\u0633\u0647"],[64818,1,"\u0634\u0647"],[64819,1,"\u0637\u0645"],[64820,1,"\u0633\u062C"],[64821,1,"\u0633\u062D"],[64822,1,"\u0633\u062E"],[64823,1,"\u0634\u062C"],[64824,1,"\u0634\u062D"],[64825,1,"\u0634\u062E"],[64826,1,"\u0637\u0645"],[64827,1,"\u0638\u0645"],[[64828,64829],1,"\u0627\u064B"],[[64830,64831],2],[[64832,64847],2],[64848,1,"\u062A\u062C\u0645"],[[64849,64850],1,"\u062A\u062D\u062C"],[64851,1,"\u062A\u062D\u0645"],[64852,1,"\u062A\u062E\u0645"],[64853,1,"\u062A\u0645\u062C"],[64854,1,"\u062A\u0645\u062D"],[64855,1,"\u062A\u0645\u062E"],[[64856,64857],1,"\u062C\u0645\u062D"],[64858,1,"\u062D\u0645\u064A"],[64859,1,"\u062D\u0645\u0649"],[64860,1,"\u0633\u062D\u062C"],[64861,1,"\u0633\u062C\u062D"],[64862,1,"\u0633\u062C\u0649"],[[64863,64864],1,"\u0633\u0645\u062D"],[64865,1,"\u0633\u0645\u062C"],[[64866,64867],1,"\u0633\u0645\u0645"],[[64868,64869],1,"\u0635\u062D\u062D"],[64870,1,"\u0635\u0645\u0645"],[[64871,64872],1,"\u0634\u062D\u0645"],[64873,1,"\u0634\u062C\u064A"],[[64874,64875],1,"\u0634\u0645\u062E"],[[64876,64877],1,"\u0634\u0645\u0645"],[64878,1,"\u0636\u062D\u0649"],[[64879,64880],1,"\u0636\u062E\u0645"],[[64881,64882],1,"\u0637\u0645\u062D"],[64883,1,"\u0637\u0645\u0645"],[64884,1,"\u0637\u0645\u064A"],[64885,1,"\u0639\u062C\u0645"],[[64886,64887],1,"\u0639\u0645\u0645"],[64888,1,"\u0639\u0645\u0649"],[64889,1,"\u063A\u0645\u0645"],[64890,1,"\u063A\u0645\u064A"],[64891,1,"\u063A\u0645\u0649"],[[64892,64893],1,"\u0641\u062E\u0645"],[64894,1,"\u0642\u0645\u062D"],[64895,1,"\u0642\u0645\u0645"],[64896,1,"\u0644\u062D\u0645"],[64897,1,"\u0644\u062D\u064A"],[64898,1,"\u0644\u062D\u0649"],[[64899,64900],1,"\u0644\u062C\u062C"],[[64901,64902],1,"\u0644\u062E\u0645"],[[64903,64904],1,"\u0644\u0645\u062D"],[64905,1,"\u0645\u062D\u062C"],[64906,1,"\u0645\u062D\u0645"],[64907,1,"\u0645\u062D\u064A"],[64908,1,"\u0645\u062C\u062D"],[64909,1,"\u0645\u062C\u0645"],[64910,1,"\u0645\u062E\u062C"],[64911,1,"\u0645\u062E\u0645"],[[64912,64913],3],[64914,1,"\u0645\u062C\u062E"],[64915,1,"\u0647\u0645\u062C"],[64916,1,"\u0647\u0645\u0645"],[64917,1,"\u0646\u062D\u0645"],[64918,1,"\u0646\u062D\u0649"],[[64919,64920],1,"\u0646\u062C\u0645"],[64921,1,"\u0646\u062C\u0649"],[64922,1,"\u0646\u0645\u064A"],[64923,1,"\u0646\u0645\u0649"],[[64924,64925],1,"\u064A\u0645\u0645"],[64926,1,"\u0628\u062E\u064A"],[64927,1,"\u062A\u062C\u064A"],[64928,1,"\u062A\u062C\u0649"],[64929,1,"\u062A\u062E\u064A"],[64930,1,"\u062A\u062E\u0649"],[64931,1,"\u062A\u0645\u064A"],[64932,1,"\u062A\u0645\u0649"],[64933,1,"\u062C\u0645\u064A"],[64934,1,"\u062C\u062D\u0649"],[64935,1,"\u062C\u0645\u0649"],[64936,1,"\u0633\u062E\u0649"],[64937,1,"\u0635\u062D\u064A"],[64938,1,"\u0634\u062D\u064A"],[64939,1,"\u0636\u062D\u064A"],[64940,1,"\u0644\u062C\u064A"],[64941,1,"\u0644\u0645\u064A"],[64942,1,"\u064A\u062D\u064A"],[64943,1,"\u064A\u062C\u064A"],[64944,1,"\u064A\u0645\u064A"],[64945,1,"\u0645\u0645\u064A"],[64946,1,"\u0642\u0645\u064A"],[64947,1,"\u0646\u062D\u064A"],[64948,1,"\u0642\u0645\u062D"],[64949,1,"\u0644\u062D\u0645"],[64950,1,"\u0639\u0645\u064A"],[64951,1,"\u0643\u0645\u064A"],[64952,1,"\u0646\u062C\u062D"],[64953,1,"\u0645\u062E\u064A"],[64954,1,"\u0644\u062C\u0645"],[64955,1,"\u0643\u0645\u0645"],[64956,1,"\u0644\u062C\u0645"],[64957,1,"\u0646\u062C\u062D"],[64958,1,"\u062C\u062D\u064A"],[64959,1,"\u062D\u062C\u064A"],[64960,1,"\u0645\u062C\u064A"],[64961,1,"\u0641\u0645\u064A"],[64962,1,"\u0628\u062D\u064A"],[64963,1,"\u0643\u0645\u0645"],[64964,1,"\u0639\u062C\u0645"],[64965,1,"\u0635\u0645\u0645"],[64966,1,"\u0633\u062E\u064A"],[64967,1,"\u0646\u062C\u064A"],[[64968,64974],3],[64975,2],[[64976,65007],3],[65008,1,"\u0635\u0644\u06D2"],[65009,1,"\u0642\u0644\u06D2"],[65010,1,"\u0627\u0644\u0644\u0647"],[65011,1,"\u0627\u0643\u0628\u0631"],[65012,1,"\u0645\u062D\u0645\u062F"],[65013,1,"\u0635\u0644\u0639\u0645"],[65014,1,"\u0631\u0633\u0648\u0644"],[65015,1,"\u0639\u0644\u064A\u0647"],[65016,1,"\u0648\u0633\u0644\u0645"],[65017,1,"\u0635\u0644\u0649"],[65018,1,"\u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u064A\u0647 \u0648\u0633\u0644\u0645"],[65019,1,"\u062C\u0644 \u062C\u0644\u0627\u0644\u0647"],[65020,1,"\u0631\u06CC\u0627\u0644"],[65021,2],[[65022,65023],2],[[65024,65039],7],[65040,1,","],[65041,1,"\u3001"],[65042,3],[65043,1,":"],[65044,1,";"],[65045,1,"!"],[65046,1,"?"],[65047,1,"\u3016"],[65048,1,"\u3017"],[65049,3],[[65050,65055],3],[[65056,65059],2],[[65060,65062],2],[[65063,65069],2],[[65070,65071],2],[65072,3],[65073,1,"\u2014"],[65074,1,"\u2013"],[[65075,65076],1,"_"],[65077,1,"("],[65078,1,")"],[65079,1,"{"],[65080,1,"}"],[65081,1,"\u3014"],[65082,1,"\u3015"],[65083,1,"\u3010"],[65084,1,"\u3011"],[65085,1,"\u300A"],[65086,1,"\u300B"],[65087,1,"\u3008"],[65088,1,"\u3009"],[65089,1,"\u300C"],[65090,1,"\u300D"],[65091,1,"\u300E"],[65092,1,"\u300F"],[[65093,65094],2],[65095,1,"["],[65096,1,"]"],[[65097,65100],1," \u0305"],[[65101,65103],1,"_"],[65104,1,","],[65105,1,"\u3001"],[65106,3],[65107,3],[65108,1,";"],[65109,1,":"],[65110,1,"?"],[65111,1,"!"],[65112,1,"\u2014"],[65113,1,"("],[65114,1,")"],[65115,1,"{"],[65116,1,"}"],[65117,1,"\u3014"],[65118,1,"\u3015"],[65119,1,"#"],[65120,1,"&"],[65121,1,"*"],[65122,1,"+"],[65123,1,"-"],[65124,1,"<"],[65125,1,">"],[65126,1,"="],[65127,3],[65128,1,"\\"],[65129,1,"$"],[65130,1,"%"],[65131,1,"@"],[[65132,65135],3],[65136,1," \u064B"],[65137,1,"\u0640\u064B"],[65138,1," \u064C"],[65139,2],[65140,1," \u064D"],[65141,3],[65142,1," \u064E"],[65143,1,"\u0640\u064E"],[65144,1," \u064F"],[65145,1,"\u0640\u064F"],[65146,1," \u0650"],[65147,1,"\u0640\u0650"],[65148,1," \u0651"],[65149,1,"\u0640\u0651"],[65150,1," \u0652"],[65151,1,"\u0640\u0652"],[65152,1,"\u0621"],[[65153,65154],1,"\u0622"],[[65155,65156],1,"\u0623"],[[65157,65158],1,"\u0624"],[[65159,65160],1,"\u0625"],[[65161,65164],1,"\u0626"],[[65165,65166],1,"\u0627"],[[65167,65170],1,"\u0628"],[[65171,65172],1,"\u0629"],[[65173,65176],1,"\u062A"],[[65177,65180],1,"\u062B"],[[65181,65184],1,"\u062C"],[[65185,65188],1,"\u062D"],[[65189,65192],1,"\u062E"],[[65193,65194],1,"\u062F"],[[65195,65196],1,"\u0630"],[[65197,65198],1,"\u0631"],[[65199,65200],1,"\u0632"],[[65201,65204],1,"\u0633"],[[65205,65208],1,"\u0634"],[[65209,65212],1,"\u0635"],[[65213,65216],1,"\u0636"],[[65217,65220],1,"\u0637"],[[65221,65224],1,"\u0638"],[[65225,65228],1,"\u0639"],[[65229,65232],1,"\u063A"],[[65233,65236],1,"\u0641"],[[65237,65240],1,"\u0642"],[[65241,65244],1,"\u0643"],[[65245,65248],1,"\u0644"],[[65249,65252],1,"\u0645"],[[65253,65256],1,"\u0646"],[[65257,65260],1,"\u0647"],[[65261,65262],1,"\u0648"],[[65263,65264],1,"\u0649"],[[65265,65268],1,"\u064A"],[[65269,65270],1,"\u0644\u0622"],[[65271,65272],1,"\u0644\u0623"],[[65273,65274],1,"\u0644\u0625"],[[65275,65276],1,"\u0644\u0627"],[[65277,65278],3],[65279,7],[65280,3],[65281,1,"!"],[65282,1,'"'],[65283,1,"#"],[65284,1,"$"],[65285,1,"%"],[65286,1,"&"],[65287,1,"'"],[65288,1,"("],[65289,1,")"],[65290,1,"*"],[65291,1,"+"],[65292,1,","],[65293,1,"-"],[65294,1,"."],[65295,1,"/"],[65296,1,"0"],[65297,1,"1"],[65298,1,"2"],[65299,1,"3"],[65300,1,"4"],[65301,1,"5"],[65302,1,"6"],[65303,1,"7"],[65304,1,"8"],[65305,1,"9"],[65306,1,":"],[65307,1,";"],[65308,1,"<"],[65309,1,"="],[65310,1,">"],[65311,1,"?"],[65312,1,"@"],[65313,1,"a"],[65314,1,"b"],[65315,1,"c"],[65316,1,"d"],[65317,1,"e"],[65318,1,"f"],[65319,1,"g"],[65320,1,"h"],[65321,1,"i"],[65322,1,"j"],[65323,1,"k"],[65324,1,"l"],[65325,1,"m"],[65326,1,"n"],[65327,1,"o"],[65328,1,"p"],[65329,1,"q"],[65330,1,"r"],[65331,1,"s"],[65332,1,"t"],[65333,1,"u"],[65334,1,"v"],[65335,1,"w"],[65336,1,"x"],[65337,1,"y"],[65338,1,"z"],[65339,1,"["],[65340,1,"\\"],[65341,1,"]"],[65342,1,"^"],[65343,1,"_"],[65344,1,"`"],[65345,1,"a"],[65346,1,"b"],[65347,1,"c"],[65348,1,"d"],[65349,1,"e"],[65350,1,"f"],[65351,1,"g"],[65352,1,"h"],[65353,1,"i"],[65354,1,"j"],[65355,1,"k"],[65356,1,"l"],[65357,1,"m"],[65358,1,"n"],[65359,1,"o"],[65360,1,"p"],[65361,1,"q"],[65362,1,"r"],[65363,1,"s"],[65364,1,"t"],[65365,1,"u"],[65366,1,"v"],[65367,1,"w"],[65368,1,"x"],[65369,1,"y"],[65370,1,"z"],[65371,1,"{"],[65372,1,"|"],[65373,1,"}"],[65374,1,"~"],[65375,1,"\u2985"],[65376,1,"\u2986"],[65377,1,"."],[65378,1,"\u300C"],[65379,1,"\u300D"],[65380,1,"\u3001"],[65381,1,"\u30FB"],[65382,1,"\u30F2"],[65383,1,"\u30A1"],[65384,1,"\u30A3"],[65385,1,"\u30A5"],[65386,1,"\u30A7"],[65387,1,"\u30A9"],[65388,1,"\u30E3"],[65389,1,"\u30E5"],[65390,1,"\u30E7"],[65391,1,"\u30C3"],[65392,1,"\u30FC"],[65393,1,"\u30A2"],[65394,1,"\u30A4"],[65395,1,"\u30A6"],[65396,1,"\u30A8"],[65397,1,"\u30AA"],[65398,1,"\u30AB"],[65399,1,"\u30AD"],[65400,1,"\u30AF"],[65401,1,"\u30B1"],[65402,1,"\u30B3"],[65403,1,"\u30B5"],[65404,1,"\u30B7"],[65405,1,"\u30B9"],[65406,1,"\u30BB"],[65407,1,"\u30BD"],[65408,1,"\u30BF"],[65409,1,"\u30C1"],[65410,1,"\u30C4"],[65411,1,"\u30C6"],[65412,1,"\u30C8"],[65413,1,"\u30CA"],[65414,1,"\u30CB"],[65415,1,"\u30CC"],[65416,1,"\u30CD"],[65417,1,"\u30CE"],[65418,1,"\u30CF"],[65419,1,"\u30D2"],[65420,1,"\u30D5"],[65421,1,"\u30D8"],[65422,1,"\u30DB"],[65423,1,"\u30DE"],[65424,1,"\u30DF"],[65425,1,"\u30E0"],[65426,1,"\u30E1"],[65427,1,"\u30E2"],[65428,1,"\u30E4"],[65429,1,"\u30E6"],[65430,1,"\u30E8"],[65431,1,"\u30E9"],[65432,1,"\u30EA"],[65433,1,"\u30EB"],[65434,1,"\u30EC"],[65435,1,"\u30ED"],[65436,1,"\u30EF"],[65437,1,"\u30F3"],[65438,1,"\u3099"],[65439,1,"\u309A"],[65440,7],[65441,1,"\u1100"],[65442,1,"\u1101"],[65443,1,"\u11AA"],[65444,1,"\u1102"],[65445,1,"\u11AC"],[65446,1,"\u11AD"],[65447,1,"\u1103"],[65448,1,"\u1104"],[65449,1,"\u1105"],[65450,1,"\u11B0"],[65451,1,"\u11B1"],[65452,1,"\u11B2"],[65453,1,"\u11B3"],[65454,1,"\u11B4"],[65455,1,"\u11B5"],[65456,1,"\u111A"],[65457,1,"\u1106"],[65458,1,"\u1107"],[65459,1,"\u1108"],[65460,1,"\u1121"],[65461,1,"\u1109"],[65462,1,"\u110A"],[65463,1,"\u110B"],[65464,1,"\u110C"],[65465,1,"\u110D"],[65466,1,"\u110E"],[65467,1,"\u110F"],[65468,1,"\u1110"],[65469,1,"\u1111"],[65470,1,"\u1112"],[[65471,65473],3],[65474,1,"\u1161"],[65475,1,"\u1162"],[65476,1,"\u1163"],[65477,1,"\u1164"],[65478,1,"\u1165"],[65479,1,"\u1166"],[[65480,65481],3],[65482,1,"\u1167"],[65483,1,"\u1168"],[65484,1,"\u1169"],[65485,1,"\u116A"],[65486,1,"\u116B"],[65487,1,"\u116C"],[[65488,65489],3],[65490,1,"\u116D"],[65491,1,"\u116E"],[65492,1,"\u116F"],[65493,1,"\u1170"],[65494,1,"\u1171"],[65495,1,"\u1172"],[[65496,65497],3],[65498,1,"\u1173"],[65499,1,"\u1174"],[65500,1,"\u1175"],[[65501,65503],3],[65504,1,"\xA2"],[65505,1,"\xA3"],[65506,1,"\xAC"],[65507,1," \u0304"],[65508,1,"\xA6"],[65509,1,"\xA5"],[65510,1,"\u20A9"],[65511,3],[65512,1,"\u2502"],[65513,1,"\u2190"],[65514,1,"\u2191"],[65515,1,"\u2192"],[65516,1,"\u2193"],[65517,1,"\u25A0"],[65518,1,"\u25CB"],[[65519,65528],3],[[65529,65531],3],[65532,3],[65533,3],[[65534,65535],3],[[65536,65547],2],[65548,3],[[65549,65574],2],[65575,3],[[65576,65594],2],[65595,3],[[65596,65597],2],[65598,3],[[65599,65613],2],[[65614,65615],3],[[65616,65629],2],[[65630,65663],3],[[65664,65786],2],[[65787,65791],3],[[65792,65794],2],[[65795,65798],3],[[65799,65843],2],[[65844,65846],3],[[65847,65855],2],[[65856,65930],2],[[65931,65932],2],[[65933,65934],2],[65935,3],[[65936,65947],2],[65948,2],[[65949,65951],3],[65952,2],[[65953,65999],3],[[66000,66044],2],[66045,2],[[66046,66175],3],[[66176,66204],2],[[66205,66207],3],[[66208,66256],2],[[66257,66271],3],[66272,2],[[66273,66299],2],[[66300,66303],3],[[66304,66334],2],[66335,2],[[66336,66339],2],[[66340,66348],3],[[66349,66351],2],[[66352,66368],2],[66369,2],[[66370,66377],2],[66378,2],[[66379,66383],3],[[66384,66426],2],[[66427,66431],3],[[66432,66461],2],[66462,3],[66463,2],[[66464,66499],2],[[66500,66503],3],[[66504,66511],2],[[66512,66517],2],[[66518,66559],3],[66560,1,"\uD801\uDC28"],[66561,1,"\uD801\uDC29"],[66562,1,"\uD801\uDC2A"],[66563,1,"\uD801\uDC2B"],[66564,1,"\uD801\uDC2C"],[66565,1,"\uD801\uDC2D"],[66566,1,"\uD801\uDC2E"],[66567,1,"\uD801\uDC2F"],[66568,1,"\uD801\uDC30"],[66569,1,"\uD801\uDC31"],[66570,1,"\uD801\uDC32"],[66571,1,"\uD801\uDC33"],[66572,1,"\uD801\uDC34"],[66573,1,"\uD801\uDC35"],[66574,1,"\uD801\uDC36"],[66575,1,"\uD801\uDC37"],[66576,1,"\uD801\uDC38"],[66577,1,"\uD801\uDC39"],[66578,1,"\uD801\uDC3A"],[66579,1,"\uD801\uDC3B"],[66580,1,"\uD801\uDC3C"],[66581,1,"\uD801\uDC3D"],[66582,1,"\uD801\uDC3E"],[66583,1,"\uD801\uDC3F"],[66584,1,"\uD801\uDC40"],[66585,1,"\uD801\uDC41"],[66586,1,"\uD801\uDC42"],[66587,1,"\uD801\uDC43"],[66588,1,"\uD801\uDC44"],[66589,1,"\uD801\uDC45"],[66590,1,"\uD801\uDC46"],[66591,1,"\uD801\uDC47"],[66592,1,"\uD801\uDC48"],[66593,1,"\uD801\uDC49"],[66594,1,"\uD801\uDC4A"],[66595,1,"\uD801\uDC4B"],[66596,1,"\uD801\uDC4C"],[66597,1,"\uD801\uDC4D"],[66598,1,"\uD801\uDC4E"],[66599,1,"\uD801\uDC4F"],[[66600,66637],2],[[66638,66717],2],[[66718,66719],3],[[66720,66729],2],[[66730,66735],3],[66736,1,"\uD801\uDCD8"],[66737,1,"\uD801\uDCD9"],[66738,1,"\uD801\uDCDA"],[66739,1,"\uD801\uDCDB"],[66740,1,"\uD801\uDCDC"],[66741,1,"\uD801\uDCDD"],[66742,1,"\uD801\uDCDE"],[66743,1,"\uD801\uDCDF"],[66744,1,"\uD801\uDCE0"],[66745,1,"\uD801\uDCE1"],[66746,1,"\uD801\uDCE2"],[66747,1,"\uD801\uDCE3"],[66748,1,"\uD801\uDCE4"],[66749,1,"\uD801\uDCE5"],[66750,1,"\uD801\uDCE6"],[66751,1,"\uD801\uDCE7"],[66752,1,"\uD801\uDCE8"],[66753,1,"\uD801\uDCE9"],[66754,1,"\uD801\uDCEA"],[66755,1,"\uD801\uDCEB"],[66756,1,"\uD801\uDCEC"],[66757,1,"\uD801\uDCED"],[66758,1,"\uD801\uDCEE"],[66759,1,"\uD801\uDCEF"],[66760,1,"\uD801\uDCF0"],[66761,1,"\uD801\uDCF1"],[66762,1,"\uD801\uDCF2"],[66763,1,"\uD801\uDCF3"],[66764,1,"\uD801\uDCF4"],[66765,1,"\uD801\uDCF5"],[66766,1,"\uD801\uDCF6"],[66767,1,"\uD801\uDCF7"],[66768,1,"\uD801\uDCF8"],[66769,1,"\uD801\uDCF9"],[66770,1,"\uD801\uDCFA"],[66771,1,"\uD801\uDCFB"],[[66772,66775],3],[[66776,66811],2],[[66812,66815],3],[[66816,66855],2],[[66856,66863],3],[[66864,66915],2],[[66916,66926],3],[66927,2],[66928,1,"\uD801\uDD97"],[66929,1,"\uD801\uDD98"],[66930,1,"\uD801\uDD99"],[66931,1,"\uD801\uDD9A"],[66932,1,"\uD801\uDD9B"],[66933,1,"\uD801\uDD9C"],[66934,1,"\uD801\uDD9D"],[66935,1,"\uD801\uDD9E"],[66936,1,"\uD801\uDD9F"],[66937,1,"\uD801\uDDA0"],[66938,1,"\uD801\uDDA1"],[66939,3],[66940,1,"\uD801\uDDA3"],[66941,1,"\uD801\uDDA4"],[66942,1,"\uD801\uDDA5"],[66943,1,"\uD801\uDDA6"],[66944,1,"\uD801\uDDA7"],[66945,1,"\uD801\uDDA8"],[66946,1,"\uD801\uDDA9"],[66947,1,"\uD801\uDDAA"],[66948,1,"\uD801\uDDAB"],[66949,1,"\uD801\uDDAC"],[66950,1,"\uD801\uDDAD"],[66951,1,"\uD801\uDDAE"],[66952,1,"\uD801\uDDAF"],[66953,1,"\uD801\uDDB0"],[66954,1,"\uD801\uDDB1"],[66955,3],[66956,1,"\uD801\uDDB3"],[66957,1,"\uD801\uDDB4"],[66958,1,"\uD801\uDDB5"],[66959,1,"\uD801\uDDB6"],[66960,1,"\uD801\uDDB7"],[66961,1,"\uD801\uDDB8"],[66962,1,"\uD801\uDDB9"],[66963,3],[66964,1,"\uD801\uDDBB"],[66965,1,"\uD801\uDDBC"],[66966,3],[[66967,66977],2],[66978,3],[[66979,66993],2],[66994,3],[[66995,67001],2],[67002,3],[[67003,67004],2],[[67005,67007],3],[[67008,67059],2],[[67060,67071],3],[[67072,67382],2],[[67383,67391],3],[[67392,67413],2],[[67414,67423],3],[[67424,67431],2],[[67432,67455],3],[67456,2],[67457,1,"\u02D0"],[67458,1,"\u02D1"],[67459,1,"\xE6"],[67460,1,"\u0299"],[67461,1,"\u0253"],[67462,3],[67463,1,"\u02A3"],[67464,1,"\uAB66"],[67465,1,"\u02A5"],[67466,1,"\u02A4"],[67467,1,"\u0256"],[67468,1,"\u0257"],[67469,1,"\u1D91"],[67470,1,"\u0258"],[67471,1,"\u025E"],[67472,1,"\u02A9"],[67473,1,"\u0264"],[67474,1,"\u0262"],[67475,1,"\u0260"],[67476,1,"\u029B"],[67477,1,"\u0127"],[67478,1,"\u029C"],[67479,1,"\u0267"],[67480,1,"\u0284"],[67481,1,"\u02AA"],[67482,1,"\u02AB"],[67483,1,"\u026C"],[67484,1,"\uD837\uDF04"],[67485,1,"\uA78E"],[67486,1,"\u026E"],[67487,1,"\uD837\uDF05"],[67488,1,"\u028E"],[67489,1,"\uD837\uDF06"],[67490,1,"\xF8"],[67491,1,"\u0276"],[67492,1,"\u0277"],[67493,1,"q"],[67494,1,"\u027A"],[67495,1,"\uD837\uDF08"],[67496,1,"\u027D"],[67497,1,"\u027E"],[67498,1,"\u0280"],[67499,1,"\u02A8"],[67500,1,"\u02A6"],[67501,1,"\uAB67"],[67502,1,"\u02A7"],[67503,1,"\u0288"],[67504,1,"\u2C71"],[67505,3],[67506,1,"\u028F"],[67507,1,"\u02A1"],[67508,1,"\u02A2"],[67509,1,"\u0298"],[67510,1,"\u01C0"],[67511,1,"\u01C1"],[67512,1,"\u01C2"],[67513,1,"\uD837\uDF0A"],[67514,1,"\uD837\uDF1E"],[[67515,67583],3],[[67584,67589],2],[[67590,67591],3],[67592,2],[67593,3],[[67594,67637],2],[67638,3],[[67639,67640],2],[[67641,67643],3],[67644,2],[[67645,67646],3],[67647,2],[[67648,67669],2],[67670,3],[[67671,67679],2],[[67680,67702],2],[[67703,67711],2],[[67712,67742],2],[[67743,67750],3],[[67751,67759],2],[[67760,67807],3],[[67808,67826],2],[67827,3],[[67828,67829],2],[[67830,67834],3],[[67835,67839],2],[[67840,67861],2],[[67862,67865],2],[[67866,67867],2],[[67868,67870],3],[67871,2],[[67872,67897],2],[[67898,67902],3],[67903,2],[[67904,67967],3],[[67968,68023],2],[[68024,68027],3],[[68028,68029],2],[[68030,68031],2],[[68032,68047],2],[[68048,68049],3],[[68050,68095],2],[[68096,68099],2],[68100,3],[[68101,68102],2],[[68103,68107],3],[[68108,68115],2],[68116,3],[[68117,68119],2],[68120,3],[[68121,68147],2],[[68148,68149],2],[[68150,68151],3],[[68152,68154],2],[[68155,68158],3],[68159,2],[[68160,68167],2],[68168,2],[[68169,68175],3],[[68176,68184],2],[[68185,68191],3],[[68192,68220],2],[[68221,68223],2],[[68224,68252],2],[[68253,68255],2],[[68256,68287],3],[[68288,68295],2],[68296,2],[[68297,68326],2],[[68327,68330],3],[[68331,68342],2],[[68343,68351],3],[[68352,68405],2],[[68406,68408],3],[[68409,68415],2],[[68416,68437],2],[[68438,68439],3],[[68440,68447],2],[[68448,68466],2],[[68467,68471],3],[[68472,68479],2],[[68480,68497],2],[[68498,68504],3],[[68505,68508],2],[[68509,68520],3],[[68521,68527],2],[[68528,68607],3],[[68608,68680],2],[[68681,68735],3],[68736,1,"\uD803\uDCC0"],[68737,1,"\uD803\uDCC1"],[68738,1,"\uD803\uDCC2"],[68739,1,"\uD803\uDCC3"],[68740,1,"\uD803\uDCC4"],[68741,1,"\uD803\uDCC5"],[68742,1,"\uD803\uDCC6"],[68743,1,"\uD803\uDCC7"],[68744,1,"\uD803\uDCC8"],[68745,1,"\uD803\uDCC9"],[68746,1,"\uD803\uDCCA"],[68747,1,"\uD803\uDCCB"],[68748,1,"\uD803\uDCCC"],[68749,1,"\uD803\uDCCD"],[68750,1,"\uD803\uDCCE"],[68751,1,"\uD803\uDCCF"],[68752,1,"\uD803\uDCD0"],[68753,1,"\uD803\uDCD1"],[68754,1,"\uD803\uDCD2"],[68755,1,"\uD803\uDCD3"],[68756,1,"\uD803\uDCD4"],[68757,1,"\uD803\uDCD5"],[68758,1,"\uD803\uDCD6"],[68759,1,"\uD803\uDCD7"],[68760,1,"\uD803\uDCD8"],[68761,1,"\uD803\uDCD9"],[68762,1,"\uD803\uDCDA"],[68763,1,"\uD803\uDCDB"],[68764,1,"\uD803\uDCDC"],[68765,1,"\uD803\uDCDD"],[68766,1,"\uD803\uDCDE"],[68767,1,"\uD803\uDCDF"],[68768,1,"\uD803\uDCE0"],[68769,1,"\uD803\uDCE1"],[68770,1,"\uD803\uDCE2"],[68771,1,"\uD803\uDCE3"],[68772,1,"\uD803\uDCE4"],[68773,1,"\uD803\uDCE5"],[68774,1,"\uD803\uDCE6"],[68775,1,"\uD803\uDCE7"],[68776,1,"\uD803\uDCE8"],[68777,1,"\uD803\uDCE9"],[68778,1,"\uD803\uDCEA"],[68779,1,"\uD803\uDCEB"],[68780,1,"\uD803\uDCEC"],[68781,1,"\uD803\uDCED"],[68782,1,"\uD803\uDCEE"],[68783,1,"\uD803\uDCEF"],[68784,1,"\uD803\uDCF0"],[68785,1,"\uD803\uDCF1"],[68786,1,"\uD803\uDCF2"],[[68787,68799],3],[[68800,68850],2],[[68851,68857],3],[[68858,68863],2],[[68864,68903],2],[[68904,68911],3],[[68912,68921],2],[[68922,68927],3],[[68928,68943],2],[68944,1,"\uD803\uDD70"],[68945,1,"\uD803\uDD71"],[68946,1,"\uD803\uDD72"],[68947,1,"\uD803\uDD73"],[68948,1,"\uD803\uDD74"],[68949,1,"\uD803\uDD75"],[68950,1,"\uD803\uDD76"],[68951,1,"\uD803\uDD77"],[68952,1,"\uD803\uDD78"],[68953,1,"\uD803\uDD79"],[68954,1,"\uD803\uDD7A"],[68955,1,"\uD803\uDD7B"],[68956,1,"\uD803\uDD7C"],[68957,1,"\uD803\uDD7D"],[68958,1,"\uD803\uDD7E"],[68959,1,"\uD803\uDD7F"],[68960,1,"\uD803\uDD80"],[68961,1,"\uD803\uDD81"],[68962,1,"\uD803\uDD82"],[68963,1,"\uD803\uDD83"],[68964,1,"\uD803\uDD84"],[68965,1,"\uD803\uDD85"],[[68966,68968],3],[[68969,68973],2],[68974,2],[[68975,68997],2],[[68998,69005],3],[[69006,69007],2],[[69008,69215],3],[[69216,69246],2],[69247,3],[[69248,69289],2],[69290,3],[[69291,69292],2],[69293,2],[[69294,69295],3],[[69296,69297],2],[[69298,69313],3],[[69314,69316],2],[[69317,69371],3],[69372,2],[[69373,69375],2],[[69376,69404],2],[[69405,69414],2],[69415,2],[[69416,69423],3],[[69424,69456],2],[[69457,69465],2],[[69466,69487],3],[[69488,69509],2],[[69510,69513],2],[[69514,69551],3],[[69552,69572],2],[[69573,69579],2],[[69580,69599],3],[[69600,69622],2],[[69623,69631],3],[[69632,69702],2],[[69703,69709],2],[[69710,69713],3],[[69714,69733],2],[[69734,69743],2],[[69744,69749],2],[[69750,69758],3],[69759,2],[[69760,69818],2],[[69819,69820],2],[69821,3],[[69822,69825],2],[69826,2],[[69827,69836],3],[69837,3],[[69838,69839],3],[[69840,69864],2],[[69865,69871],3],[[69872,69881],2],[[69882,69887],3],[[69888,69940],2],[69941,3],[[69942,69951],2],[[69952,69955],2],[[69956,69958],2],[69959,2],[[69960,69967],3],[[69968,70003],2],[[70004,70005],2],[70006,2],[[70007,70015],3],[[70016,70084],2],[[70085,70088],2],[[70089,70092],2],[70093,2],[[70094,70095],2],[[70096,70105],2],[70106,2],[70107,2],[70108,2],[[70109,70111],2],[70112,3],[[70113,70132],2],[[70133,70143],3],[[70144,70161],2],[70162,3],[[70163,70199],2],[[70200,70205],2],[70206,2],[[70207,70209],2],[[70210,70271],3],[[70272,70278],2],[70279,3],[70280,2],[70281,3],[[70282,70285],2],[70286,3],[[70287,70301],2],[70302,3],[[70303,70312],2],[70313,2],[[70314,70319],3],[[70320,70378],2],[[70379,70383],3],[[70384,70393],2],[[70394,70399],3],[70400,2],[[70401,70403],2],[70404,3],[[70405,70412],2],[[70413,70414],3],[[70415,70416],2],[[70417,70418],3],[[70419,70440],2],[70441,3],[[70442,70448],2],[70449,3],[[70450,70451],2],[70452,3],[[70453,70457],2],[70458,3],[70459,2],[[70460,70468],2],[[70469,70470],3],[[70471,70472],2],[[70473,70474],3],[[70475,70477],2],[[70478,70479],3],[70480,2],[[70481,70486],3],[70487,2],[[70488,70492],3],[[70493,70499],2],[[70500,70501],3],[[70502,70508],2],[[70509,70511],3],[[70512,70516],2],[[70517,70527],3],[[70528,70537],2],[70538,3],[70539,2],[[70540,70541],3],[70542,2],[70543,3],[[70544,70581],2],[70582,3],[[70583,70592],2],[70593,3],[70594,2],[[70595,70596],3],[70597,2],[70598,3],[[70599,70602],2],[70603,3],[[70604,70611],2],[[70612,70613],2],[70614,3],[[70615,70616],2],[[70617,70624],3],[[70625,70626],2],[[70627,70655],3],[[70656,70730],2],[[70731,70735],2],[[70736,70745],2],[70746,2],[70747,2],[70748,3],[70749,2],[70750,2],[70751,2],[[70752,70753],2],[[70754,70783],3],[[70784,70853],2],[70854,2],[70855,2],[[70856,70863],3],[[70864,70873],2],[[70874,71039],3],[[71040,71093],2],[[71094,71095],3],[[71096,71104],2],[[71105,71113],2],[[71114,71127],2],[[71128,71133],2],[[71134,71167],3],[[71168,71232],2],[[71233,71235],2],[71236,2],[[71237,71247],3],[[71248,71257],2],[[71258,71263],3],[[71264,71276],2],[[71277,71295],3],[[71296,71351],2],[71352,2],[71353,2],[[71354,71359],3],[[71360,71369],2],[[71370,71375],3],[[71376,71395],2],[[71396,71423],3],[[71424,71449],2],[71450,2],[[71451,71452],3],[[71453,71467],2],[[71468,71471],3],[[71472,71481],2],[[71482,71487],2],[[71488,71494],2],[[71495,71679],3],[[71680,71738],2],[71739,2],[[71740,71839],3],[71840,1,"\uD806\uDCC0"],[71841,1,"\uD806\uDCC1"],[71842,1,"\uD806\uDCC2"],[71843,1,"\uD806\uDCC3"],[71844,1,"\uD806\uDCC4"],[71845,1,"\uD806\uDCC5"],[71846,1,"\uD806\uDCC6"],[71847,1,"\uD806\uDCC7"],[71848,1,"\uD806\uDCC8"],[71849,1,"\uD806\uDCC9"],[71850,1,"\uD806\uDCCA"],[71851,1,"\uD806\uDCCB"],[71852,1,"\uD806\uDCCC"],[71853,1,"\uD806\uDCCD"],[71854,1,"\uD806\uDCCE"],[71855,1,"\uD806\uDCCF"],[71856,1,"\uD806\uDCD0"],[71857,1,"\uD806\uDCD1"],[71858,1,"\uD806\uDCD2"],[71859,1,"\uD806\uDCD3"],[71860,1,"\uD806\uDCD4"],[71861,1,"\uD806\uDCD5"],[71862,1,"\uD806\uDCD6"],[71863,1,"\uD806\uDCD7"],[71864,1,"\uD806\uDCD8"],[71865,1,"\uD806\uDCD9"],[71866,1,"\uD806\uDCDA"],[71867,1,"\uD806\uDCDB"],[71868,1,"\uD806\uDCDC"],[71869,1,"\uD806\uDCDD"],[71870,1,"\uD806\uDCDE"],[71871,1,"\uD806\uDCDF"],[[71872,71913],2],[[71914,71922],2],[[71923,71934],3],[71935,2],[[71936,71942],2],[[71943,71944],3],[71945,2],[[71946,71947],3],[[71948,71955],2],[71956,3],[[71957,71958],2],[71959,3],[[71960,71989],2],[71990,3],[[71991,71992],2],[[71993,71994],3],[[71995,72003],2],[[72004,72006],2],[[72007,72015],3],[[72016,72025],2],[[72026,72095],3],[[72096,72103],2],[[72104,72105],3],[[72106,72151],2],[[72152,72153],3],[[72154,72161],2],[72162,2],[[72163,72164],2],[[72165,72191],3],[[72192,72254],2],[[72255,72262],2],[72263,2],[[72264,72271],3],[[72272,72323],2],[[72324,72325],2],[[72326,72345],2],[[72346,72348],2],[72349,2],[[72350,72354],2],[[72355,72367],3],[[72368,72383],2],[[72384,72440],2],[[72441,72447],3],[[72448,72457],2],[[72458,72639],3],[[72640,72672],2],[72673,2],[[72674,72687],3],[[72688,72697],2],[[72698,72703],3],[[72704,72712],2],[72713,3],[[72714,72758],2],[72759,3],[[72760,72768],2],[[72769,72773],2],[[72774,72783],3],[[72784,72793],2],[[72794,72812],2],[[72813,72815],3],[[72816,72817],2],[[72818,72847],2],[[72848,72849],3],[[72850,72871],2],[72872,3],[[72873,72886],2],[[72887,72959],3],[[72960,72966],2],[72967,3],[[72968,72969],2],[72970,3],[[72971,73014],2],[[73015,73017],3],[73018,2],[73019,3],[[73020,73021],2],[73022,3],[[73023,73031],2],[[73032,73039],3],[[73040,73049],2],[[73050,73055],3],[[73056,73061],2],[73062,3],[[73063,73064],2],[73065,3],[[73066,73102],2],[73103,3],[[73104,73105],2],[73106,3],[[73107,73112],2],[[73113,73119],3],[[73120,73129],2],[[73130,73439],3],[[73440,73462],2],[[73463,73464],2],[[73465,73471],3],[[73472,73488],2],[73489,3],[[73490,73530],2],[[73531,73533],3],[[73534,73538],2],[[73539,73551],2],[[73552,73561],2],[73562,2],[[73563,73647],3],[73648,2],[[73649,73663],3],[[73664,73713],2],[[73714,73726],3],[73727,2],[[73728,74606],2],[[74607,74648],2],[74649,2],[[74650,74751],3],[[74752,74850],2],[[74851,74862],2],[74863,3],[[74864,74867],2],[74868,2],[[74869,74879],3],[[74880,75075],2],[[75076,77711],3],[[77712,77808],2],[[77809,77810],2],[[77811,77823],3],[[77824,78894],2],[78895,2],[[78896,78904],3],[[78905,78911],3],[[78912,78933],2],[[78934,78943],3],[[78944,82938],2],[[82939,82943],3],[[82944,83526],2],[[83527,90367],3],[[90368,90425],2],[[90426,92159],3],[[92160,92728],2],[[92729,92735],3],[[92736,92766],2],[92767,3],[[92768,92777],2],[[92778,92781],3],[[92782,92783],2],[[92784,92862],2],[92863,3],[[92864,92873],2],[[92874,92879],3],[[92880,92909],2],[[92910,92911],3],[[92912,92916],2],[92917,2],[[92918,92927],3],[[92928,92982],2],[[92983,92991],2],[[92992,92995],2],[[92996,92997],2],[[92998,93007],3],[[93008,93017],2],[93018,3],[[93019,93025],2],[93026,3],[[93027,93047],2],[[93048,93052],3],[[93053,93071],2],[[93072,93503],3],[[93504,93548],2],[[93549,93551],2],[[93552,93561],2],[[93562,93759],3],[93760,1,"\uD81B\uDE60"],[93761,1,"\uD81B\uDE61"],[93762,1,"\uD81B\uDE62"],[93763,1,"\uD81B\uDE63"],[93764,1,"\uD81B\uDE64"],[93765,1,"\uD81B\uDE65"],[93766,1,"\uD81B\uDE66"],[93767,1,"\uD81B\uDE67"],[93768,1,"\uD81B\uDE68"],[93769,1,"\uD81B\uDE69"],[93770,1,"\uD81B\uDE6A"],[93771,1,"\uD81B\uDE6B"],[93772,1,"\uD81B\uDE6C"],[93773,1,"\uD81B\uDE6D"],[93774,1,"\uD81B\uDE6E"],[93775,1,"\uD81B\uDE6F"],[93776,1,"\uD81B\uDE70"],[93777,1,"\uD81B\uDE71"],[93778,1,"\uD81B\uDE72"],[93779,1,"\uD81B\uDE73"],[93780,1,"\uD81B\uDE74"],[93781,1,"\uD81B\uDE75"],[93782,1,"\uD81B\uDE76"],[93783,1,"\uD81B\uDE77"],[93784,1,"\uD81B\uDE78"],[93785,1,"\uD81B\uDE79"],[93786,1,"\uD81B\uDE7A"],[93787,1,"\uD81B\uDE7B"],[93788,1,"\uD81B\uDE7C"],[93789,1,"\uD81B\uDE7D"],[93790,1,"\uD81B\uDE7E"],[93791,1,"\uD81B\uDE7F"],[[93792,93823],2],[[93824,93850],2],[[93851,93951],3],[[93952,94020],2],[[94021,94026],2],[[94027,94030],3],[94031,2],[[94032,94078],2],[[94079,94087],2],[[94088,94094],3],[[94095,94111],2],[[94112,94175],3],[94176,2],[94177,2],[94178,2],[94179,2],[94180,2],[[94181,94191],3],[[94192,94193],2],[[94194,94207],3],[[94208,100332],2],[[100333,100337],2],[[100338,100343],2],[[100344,100351],3],[[100352,101106],2],[[101107,101589],2],[[101590,101630],3],[101631,2],[[101632,101640],2],[[101641,110575],3],[[110576,110579],2],[110580,3],[[110581,110587],2],[110588,3],[[110589,110590],2],[110591,3],[[110592,110593],2],[[110594,110878],2],[[110879,110882],2],[[110883,110897],3],[110898,2],[[110899,110927],3],[[110928,110930],2],[[110931,110932],3],[110933,2],[[110934,110947],3],[[110948,110951],2],[[110952,110959],3],[[110960,111355],2],[[111356,113663],3],[[113664,113770],2],[[113771,113775],3],[[113776,113788],2],[[113789,113791],3],[[113792,113800],2],[[113801,113807],3],[[113808,113817],2],[[113818,113819],3],[113820,2],[[113821,113822],2],[113823,2],[[113824,113827],7],[[113828,117759],3],[[117760,117973],2],[117974,1,"a"],[117975,1,"b"],[117976,1,"c"],[117977,1,"d"],[117978,1,"e"],[117979,1,"f"],[117980,1,"g"],[117981,1,"h"],[117982,1,"i"],[117983,1,"j"],[117984,1,"k"],[117985,1,"l"],[117986,1,"m"],[117987,1,"n"],[117988,1,"o"],[117989,1,"p"],[117990,1,"q"],[117991,1,"r"],[117992,1,"s"],[117993,1,"t"],[117994,1,"u"],[117995,1,"v"],[117996,1,"w"],[117997,1,"x"],[117998,1,"y"],[117999,1,"z"],[118000,1,"0"],[118001,1,"1"],[118002,1,"2"],[118003,1,"3"],[118004,1,"4"],[118005,1,"5"],[118006,1,"6"],[118007,1,"7"],[118008,1,"8"],[118009,1,"9"],[[118010,118015],3],[[118016,118451],2],[[118452,118527],3],[[118528,118573],2],[[118574,118575],3],[[118576,118598],2],[[118599,118607],3],[[118608,118723],2],[[118724,118783],3],[[118784,119029],2],[[119030,119039],3],[[119040,119078],2],[[119079,119080],3],[119081,2],[[119082,119133],2],[119134,1,"\uD834\uDD57\uD834\uDD65"],[119135,1,"\uD834\uDD58\uD834\uDD65"],[119136,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD6E"],[119137,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD6F"],[119138,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD70"],[119139,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD71"],[119140,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD72"],[[119141,119154],2],[[119155,119162],7],[[119163,119226],2],[119227,1,"\uD834\uDDB9\uD834\uDD65"],[119228,1,"\uD834\uDDBA\uD834\uDD65"],[119229,1,"\uD834\uDDB9\uD834\uDD65\uD834\uDD6E"],[119230,1,"\uD834\uDDBA\uD834\uDD65\uD834\uDD6E"],[119231,1,"\uD834\uDDB9\uD834\uDD65\uD834\uDD6F"],[119232,1,"\uD834\uDDBA\uD834\uDD65\uD834\uDD6F"],[[119233,119261],2],[[119262,119272],2],[[119273,119274],2],[[119275,119295],3],[[119296,119365],2],[[119366,119487],3],[[119488,119507],2],[[119508,119519],3],[[119520,119539],2],[[119540,119551],3],[[119552,119638],2],[[119639,119647],3],[[119648,119665],2],[[119666,119672],2],[[119673,119807],3],[119808,1,"a"],[119809,1,"b"],[119810,1,"c"],[119811,1,"d"],[119812,1,"e"],[119813,1,"f"],[119814,1,"g"],[119815,1,"h"],[119816,1,"i"],[119817,1,"j"],[119818,1,"k"],[119819,1,"l"],[119820,1,"m"],[119821,1,"n"],[119822,1,"o"],[119823,1,"p"],[119824,1,"q"],[119825,1,"r"],[119826,1,"s"],[119827,1,"t"],[119828,1,"u"],[119829,1,"v"],[119830,1,"w"],[119831,1,"x"],[119832,1,"y"],[119833,1,"z"],[119834,1,"a"],[119835,1,"b"],[119836,1,"c"],[119837,1,"d"],[119838,1,"e"],[119839,1,"f"],[119840,1,"g"],[119841,1,"h"],[119842,1,"i"],[119843,1,"j"],[119844,1,"k"],[119845,1,"l"],[119846,1,"m"],[119847,1,"n"],[119848,1,"o"],[119849,1,"p"],[119850,1,"q"],[119851,1,"r"],[119852,1,"s"],[119853,1,"t"],[119854,1,"u"],[119855,1,"v"],[119856,1,"w"],[119857,1,"x"],[119858,1,"y"],[119859,1,"z"],[119860,1,"a"],[119861,1,"b"],[119862,1,"c"],[119863,1,"d"],[119864,1,"e"],[119865,1,"f"],[119866,1,"g"],[119867,1,"h"],[119868,1,"i"],[119869,1,"j"],[119870,1,"k"],[119871,1,"l"],[119872,1,"m"],[119873,1,"n"],[119874,1,"o"],[119875,1,"p"],[119876,1,"q"],[119877,1,"r"],[119878,1,"s"],[119879,1,"t"],[119880,1,"u"],[119881,1,"v"],[119882,1,"w"],[119883,1,"x"],[119884,1,"y"],[119885,1,"z"],[119886,1,"a"],[119887,1,"b"],[119888,1,"c"],[119889,1,"d"],[119890,1,"e"],[119891,1,"f"],[119892,1,"g"],[119893,3],[119894,1,"i"],[119895,1,"j"],[119896,1,"k"],[119897,1,"l"],[119898,1,"m"],[119899,1,"n"],[119900,1,"o"],[119901,1,"p"],[119902,1,"q"],[119903,1,"r"],[119904,1,"s"],[119905,1,"t"],[119906,1,"u"],[119907,1,"v"],[119908,1,"w"],[119909,1,"x"],[119910,1,"y"],[119911,1,"z"],[119912,1,"a"],[119913,1,"b"],[119914,1,"c"],[119915,1,"d"],[119916,1,"e"],[119917,1,"f"],[119918,1,"g"],[119919,1,"h"],[119920,1,"i"],[119921,1,"j"],[119922,1,"k"],[119923,1,"l"],[119924,1,"m"],[119925,1,"n"],[119926,1,"o"],[119927,1,"p"],[119928,1,"q"],[119929,1,"r"],[119930,1,"s"],[119931,1,"t"],[119932,1,"u"],[119933,1,"v"],[119934,1,"w"],[119935,1,"x"],[119936,1,"y"],[119937,1,"z"],[119938,1,"a"],[119939,1,"b"],[119940,1,"c"],[119941,1,"d"],[119942,1,"e"],[119943,1,"f"],[119944,1,"g"],[119945,1,"h"],[119946,1,"i"],[119947,1,"j"],[119948,1,"k"],[119949,1,"l"],[119950,1,"m"],[119951,1,"n"],[119952,1,"o"],[119953,1,"p"],[119954,1,"q"],[119955,1,"r"],[119956,1,"s"],[119957,1,"t"],[119958,1,"u"],[119959,1,"v"],[119960,1,"w"],[119961,1,"x"],[119962,1,"y"],[119963,1,"z"],[119964,1,"a"],[119965,3],[119966,1,"c"],[119967,1,"d"],[[119968,119969],3],[119970,1,"g"],[[119971,119972],3],[119973,1,"j"],[119974,1,"k"],[[119975,119976],3],[119977,1,"n"],[119978,1,"o"],[119979,1,"p"],[119980,1,"q"],[119981,3],[119982,1,"s"],[119983,1,"t"],[119984,1,"u"],[119985,1,"v"],[119986,1,"w"],[119987,1,"x"],[119988,1,"y"],[119989,1,"z"],[119990,1,"a"],[119991,1,"b"],[119992,1,"c"],[119993,1,"d"],[119994,3],[119995,1,"f"],[119996,3],[119997,1,"h"],[119998,1,"i"],[119999,1,"j"],[120000,1,"k"],[120001,1,"l"],[120002,1,"m"],[120003,1,"n"],[120004,3],[120005,1,"p"],[120006,1,"q"],[120007,1,"r"],[120008,1,"s"],[120009,1,"t"],[120010,1,"u"],[120011,1,"v"],[120012,1,"w"],[120013,1,"x"],[120014,1,"y"],[120015,1,"z"],[120016,1,"a"],[120017,1,"b"],[120018,1,"c"],[120019,1,"d"],[120020,1,"e"],[120021,1,"f"],[120022,1,"g"],[120023,1,"h"],[120024,1,"i"],[120025,1,"j"],[120026,1,"k"],[120027,1,"l"],[120028,1,"m"],[120029,1,"n"],[120030,1,"o"],[120031,1,"p"],[120032,1,"q"],[120033,1,"r"],[120034,1,"s"],[120035,1,"t"],[120036,1,"u"],[120037,1,"v"],[120038,1,"w"],[120039,1,"x"],[120040,1,"y"],[120041,1,"z"],[120042,1,"a"],[120043,1,"b"],[120044,1,"c"],[120045,1,"d"],[120046,1,"e"],[120047,1,"f"],[120048,1,"g"],[120049,1,"h"],[120050,1,"i"],[120051,1,"j"],[120052,1,"k"],[120053,1,"l"],[120054,1,"m"],[120055,1,"n"],[120056,1,"o"],[120057,1,"p"],[120058,1,"q"],[120059,1,"r"],[120060,1,"s"],[120061,1,"t"],[120062,1,"u"],[120063,1,"v"],[120064,1,"w"],[120065,1,"x"],[120066,1,"y"],[120067,1,"z"],[120068,1,"a"],[120069,1,"b"],[120070,3],[120071,1,"d"],[120072,1,"e"],[120073,1,"f"],[120074,1,"g"],[[120075,120076],3],[120077,1,"j"],[120078,1,"k"],[120079,1,"l"],[120080,1,"m"],[120081,1,"n"],[120082,1,"o"],[120083,1,"p"],[120084,1,"q"],[120085,3],[120086,1,"s"],[120087,1,"t"],[120088,1,"u"],[120089,1,"v"],[120090,1,"w"],[120091,1,"x"],[120092,1,"y"],[120093,3],[120094,1,"a"],[120095,1,"b"],[120096,1,"c"],[120097,1,"d"],[120098,1,"e"],[120099,1,"f"],[120100,1,"g"],[120101,1,"h"],[120102,1,"i"],[120103,1,"j"],[120104,1,"k"],[120105,1,"l"],[120106,1,"m"],[120107,1,"n"],[120108,1,"o"],[120109,1,"p"],[120110,1,"q"],[120111,1,"r"],[120112,1,"s"],[120113,1,"t"],[120114,1,"u"],[120115,1,"v"],[120116,1,"w"],[120117,1,"x"],[120118,1,"y"],[120119,1,"z"],[120120,1,"a"],[120121,1,"b"],[120122,3],[120123,1,"d"],[120124,1,"e"],[120125,1,"f"],[120126,1,"g"],[120127,3],[120128,1,"i"],[120129,1,"j"],[120130,1,"k"],[120131,1,"l"],[120132,1,"m"],[120133,3],[120134,1,"o"],[[120135,120137],3],[120138,1,"s"],[120139,1,"t"],[120140,1,"u"],[120141,1,"v"],[120142,1,"w"],[120143,1,"x"],[120144,1,"y"],[120145,3],[120146,1,"a"],[120147,1,"b"],[120148,1,"c"],[120149,1,"d"],[120150,1,"e"],[120151,1,"f"],[120152,1,"g"],[120153,1,"h"],[120154,1,"i"],[120155,1,"j"],[120156,1,"k"],[120157,1,"l"],[120158,1,"m"],[120159,1,"n"],[120160,1,"o"],[120161,1,"p"],[120162,1,"q"],[120163,1,"r"],[120164,1,"s"],[120165,1,"t"],[120166,1,"u"],[120167,1,"v"],[120168,1,"w"],[120169,1,"x"],[120170,1,"y"],[120171,1,"z"],[120172,1,"a"],[120173,1,"b"],[120174,1,"c"],[120175,1,"d"],[120176,1,"e"],[120177,1,"f"],[120178,1,"g"],[120179,1,"h"],[120180,1,"i"],[120181,1,"j"],[120182,1,"k"],[120183,1,"l"],[120184,1,"m"],[120185,1,"n"],[120186,1,"o"],[120187,1,"p"],[120188,1,"q"],[120189,1,"r"],[120190,1,"s"],[120191,1,"t"],[120192,1,"u"],[120193,1,"v"],[120194,1,"w"],[120195,1,"x"],[120196,1,"y"],[120197,1,"z"],[120198,1,"a"],[120199,1,"b"],[120200,1,"c"],[120201,1,"d"],[120202,1,"e"],[120203,1,"f"],[120204,1,"g"],[120205,1,"h"],[120206,1,"i"],[120207,1,"j"],[120208,1,"k"],[120209,1,"l"],[120210,1,"m"],[120211,1,"n"],[120212,1,"o"],[120213,1,"p"],[120214,1,"q"],[120215,1,"r"],[120216,1,"s"],[120217,1,"t"],[120218,1,"u"],[120219,1,"v"],[120220,1,"w"],[120221,1,"x"],[120222,1,"y"],[120223,1,"z"],[120224,1,"a"],[120225,1,"b"],[120226,1,"c"],[120227,1,"d"],[120228,1,"e"],[120229,1,"f"],[120230,1,"g"],[120231,1,"h"],[120232,1,"i"],[120233,1,"j"],[120234,1,"k"],[120235,1,"l"],[120236,1,"m"],[120237,1,"n"],[120238,1,"o"],[120239,1,"p"],[120240,1,"q"],[120241,1,"r"],[120242,1,"s"],[120243,1,"t"],[120244,1,"u"],[120245,1,"v"],[120246,1,"w"],[120247,1,"x"],[120248,1,"y"],[120249,1,"z"],[120250,1,"a"],[120251,1,"b"],[120252,1,"c"],[120253,1,"d"],[120254,1,"e"],[120255,1,"f"],[120256,1,"g"],[120257,1,"h"],[120258,1,"i"],[120259,1,"j"],[120260,1,"k"],[120261,1,"l"],[120262,1,"m"],[120263,1,"n"],[120264,1,"o"],[120265,1,"p"],[120266,1,"q"],[120267,1,"r"],[120268,1,"s"],[120269,1,"t"],[120270,1,"u"],[120271,1,"v"],[120272,1,"w"],[120273,1,"x"],[120274,1,"y"],[120275,1,"z"],[120276,1,"a"],[120277,1,"b"],[120278,1,"c"],[120279,1,"d"],[120280,1,"e"],[120281,1,"f"],[120282,1,"g"],[120283,1,"h"],[120284,1,"i"],[120285,1,"j"],[120286,1,"k"],[120287,1,"l"],[120288,1,"m"],[120289,1,"n"],[120290,1,"o"],[120291,1,"p"],[120292,1,"q"],[120293,1,"r"],[120294,1,"s"],[120295,1,"t"],[120296,1,"u"],[120297,1,"v"],[120298,1,"w"],[120299,1,"x"],[120300,1,"y"],[120301,1,"z"],[120302,1,"a"],[120303,1,"b"],[120304,1,"c"],[120305,1,"d"],[120306,1,"e"],[120307,1,"f"],[120308,1,"g"],[120309,1,"h"],[120310,1,"i"],[120311,1,"j"],[120312,1,"k"],[120313,1,"l"],[120314,1,"m"],[120315,1,"n"],[120316,1,"o"],[120317,1,"p"],[120318,1,"q"],[120319,1,"r"],[120320,1,"s"],[120321,1,"t"],[120322,1,"u"],[120323,1,"v"],[120324,1,"w"],[120325,1,"x"],[120326,1,"y"],[120327,1,"z"],[120328,1,"a"],[120329,1,"b"],[120330,1,"c"],[120331,1,"d"],[120332,1,"e"],[120333,1,"f"],[120334,1,"g"],[120335,1,"h"],[120336,1,"i"],[120337,1,"j"],[120338,1,"k"],[120339,1,"l"],[120340,1,"m"],[120341,1,"n"],[120342,1,"o"],[120343,1,"p"],[120344,1,"q"],[120345,1,"r"],[120346,1,"s"],[120347,1,"t"],[120348,1,"u"],[120349,1,"v"],[120350,1,"w"],[120351,1,"x"],[120352,1,"y"],[120353,1,"z"],[120354,1,"a"],[120355,1,"b"],[120356,1,"c"],[120357,1,"d"],[120358,1,"e"],[120359,1,"f"],[120360,1,"g"],[120361,1,"h"],[120362,1,"i"],[120363,1,"j"],[120364,1,"k"],[120365,1,"l"],[120366,1,"m"],[120367,1,"n"],[120368,1,"o"],[120369,1,"p"],[120370,1,"q"],[120371,1,"r"],[120372,1,"s"],[120373,1,"t"],[120374,1,"u"],[120375,1,"v"],[120376,1,"w"],[120377,1,"x"],[120378,1,"y"],[120379,1,"z"],[120380,1,"a"],[120381,1,"b"],[120382,1,"c"],[120383,1,"d"],[120384,1,"e"],[120385,1,"f"],[120386,1,"g"],[120387,1,"h"],[120388,1,"i"],[120389,1,"j"],[120390,1,"k"],[120391,1,"l"],[120392,1,"m"],[120393,1,"n"],[120394,1,"o"],[120395,1,"p"],[120396,1,"q"],[120397,1,"r"],[120398,1,"s"],[120399,1,"t"],[120400,1,"u"],[120401,1,"v"],[120402,1,"w"],[120403,1,"x"],[120404,1,"y"],[120405,1,"z"],[120406,1,"a"],[120407,1,"b"],[120408,1,"c"],[120409,1,"d"],[120410,1,"e"],[120411,1,"f"],[120412,1,"g"],[120413,1,"h"],[120414,1,"i"],[120415,1,"j"],[120416,1,"k"],[120417,1,"l"],[120418,1,"m"],[120419,1,"n"],[120420,1,"o"],[120421,1,"p"],[120422,1,"q"],[120423,1,"r"],[120424,1,"s"],[120425,1,"t"],[120426,1,"u"],[120427,1,"v"],[120428,1,"w"],[120429,1,"x"],[120430,1,"y"],[120431,1,"z"],[120432,1,"a"],[120433,1,"b"],[120434,1,"c"],[120435,1,"d"],[120436,1,"e"],[120437,1,"f"],[120438,1,"g"],[120439,1,"h"],[120440,1,"i"],[120441,1,"j"],[120442,1,"k"],[120443,1,"l"],[120444,1,"m"],[120445,1,"n"],[120446,1,"o"],[120447,1,"p"],[120448,1,"q"],[120449,1,"r"],[120450,1,"s"],[120451,1,"t"],[120452,1,"u"],[120453,1,"v"],[120454,1,"w"],[120455,1,"x"],[120456,1,"y"],[120457,1,"z"],[120458,1,"a"],[120459,1,"b"],[120460,1,"c"],[120461,1,"d"],[120462,1,"e"],[120463,1,"f"],[120464,1,"g"],[120465,1,"h"],[120466,1,"i"],[120467,1,"j"],[120468,1,"k"],[120469,1,"l"],[120470,1,"m"],[120471,1,"n"],[120472,1,"o"],[120473,1,"p"],[120474,1,"q"],[120475,1,"r"],[120476,1,"s"],[120477,1,"t"],[120478,1,"u"],[120479,1,"v"],[120480,1,"w"],[120481,1,"x"],[120482,1,"y"],[120483,1,"z"],[120484,1,"\u0131"],[120485,1,"\u0237"],[[120486,120487],3],[120488,1,"\u03B1"],[120489,1,"\u03B2"],[120490,1,"\u03B3"],[120491,1,"\u03B4"],[120492,1,"\u03B5"],[120493,1,"\u03B6"],[120494,1,"\u03B7"],[120495,1,"\u03B8"],[120496,1,"\u03B9"],[120497,1,"\u03BA"],[120498,1,"\u03BB"],[120499,1,"\u03BC"],[120500,1,"\u03BD"],[120501,1,"\u03BE"],[120502,1,"\u03BF"],[120503,1,"\u03C0"],[120504,1,"\u03C1"],[120505,1,"\u03B8"],[120506,1,"\u03C3"],[120507,1,"\u03C4"],[120508,1,"\u03C5"],[120509,1,"\u03C6"],[120510,1,"\u03C7"],[120511,1,"\u03C8"],[120512,1,"\u03C9"],[120513,1,"\u2207"],[120514,1,"\u03B1"],[120515,1,"\u03B2"],[120516,1,"\u03B3"],[120517,1,"\u03B4"],[120518,1,"\u03B5"],[120519,1,"\u03B6"],[120520,1,"\u03B7"],[120521,1,"\u03B8"],[120522,1,"\u03B9"],[120523,1,"\u03BA"],[120524,1,"\u03BB"],[120525,1,"\u03BC"],[120526,1,"\u03BD"],[120527,1,"\u03BE"],[120528,1,"\u03BF"],[120529,1,"\u03C0"],[120530,1,"\u03C1"],[[120531,120532],1,"\u03C3"],[120533,1,"\u03C4"],[120534,1,"\u03C5"],[120535,1,"\u03C6"],[120536,1,"\u03C7"],[120537,1,"\u03C8"],[120538,1,"\u03C9"],[120539,1,"\u2202"],[120540,1,"\u03B5"],[120541,1,"\u03B8"],[120542,1,"\u03BA"],[120543,1,"\u03C6"],[120544,1,"\u03C1"],[120545,1,"\u03C0"],[120546,1,"\u03B1"],[120547,1,"\u03B2"],[120548,1,"\u03B3"],[120549,1,"\u03B4"],[120550,1,"\u03B5"],[120551,1,"\u03B6"],[120552,1,"\u03B7"],[120553,1,"\u03B8"],[120554,1,"\u03B9"],[120555,1,"\u03BA"],[120556,1,"\u03BB"],[120557,1,"\u03BC"],[120558,1,"\u03BD"],[120559,1,"\u03BE"],[120560,1,"\u03BF"],[120561,1,"\u03C0"],[120562,1,"\u03C1"],[120563,1,"\u03B8"],[120564,1,"\u03C3"],[120565,1,"\u03C4"],[120566,1,"\u03C5"],[120567,1,"\u03C6"],[120568,1,"\u03C7"],[120569,1,"\u03C8"],[120570,1,"\u03C9"],[120571,1,"\u2207"],[120572,1,"\u03B1"],[120573,1,"\u03B2"],[120574,1,"\u03B3"],[120575,1,"\u03B4"],[120576,1,"\u03B5"],[120577,1,"\u03B6"],[120578,1,"\u03B7"],[120579,1,"\u03B8"],[120580,1,"\u03B9"],[120581,1,"\u03BA"],[120582,1,"\u03BB"],[120583,1,"\u03BC"],[120584,1,"\u03BD"],[120585,1,"\u03BE"],[120586,1,"\u03BF"],[120587,1,"\u03C0"],[120588,1,"\u03C1"],[[120589,120590],1,"\u03C3"],[120591,1,"\u03C4"],[120592,1,"\u03C5"],[120593,1,"\u03C6"],[120594,1,"\u03C7"],[120595,1,"\u03C8"],[120596,1,"\u03C9"],[120597,1,"\u2202"],[120598,1,"\u03B5"],[120599,1,"\u03B8"],[120600,1,"\u03BA"],[120601,1,"\u03C6"],[120602,1,"\u03C1"],[120603,1,"\u03C0"],[120604,1,"\u03B1"],[120605,1,"\u03B2"],[120606,1,"\u03B3"],[120607,1,"\u03B4"],[120608,1,"\u03B5"],[120609,1,"\u03B6"],[120610,1,"\u03B7"],[120611,1,"\u03B8"],[120612,1,"\u03B9"],[120613,1,"\u03BA"],[120614,1,"\u03BB"],[120615,1,"\u03BC"],[120616,1,"\u03BD"],[120617,1,"\u03BE"],[120618,1,"\u03BF"],[120619,1,"\u03C0"],[120620,1,"\u03C1"],[120621,1,"\u03B8"],[120622,1,"\u03C3"],[120623,1,"\u03C4"],[120624,1,"\u03C5"],[120625,1,"\u03C6"],[120626,1,"\u03C7"],[120627,1,"\u03C8"],[120628,1,"\u03C9"],[120629,1,"\u2207"],[120630,1,"\u03B1"],[120631,1,"\u03B2"],[120632,1,"\u03B3"],[120633,1,"\u03B4"],[120634,1,"\u03B5"],[120635,1,"\u03B6"],[120636,1,"\u03B7"],[120637,1,"\u03B8"],[120638,1,"\u03B9"],[120639,1,"\u03BA"],[120640,1,"\u03BB"],[120641,1,"\u03BC"],[120642,1,"\u03BD"],[120643,1,"\u03BE"],[120644,1,"\u03BF"],[120645,1,"\u03C0"],[120646,1,"\u03C1"],[[120647,120648],1,"\u03C3"],[120649,1,"\u03C4"],[120650,1,"\u03C5"],[120651,1,"\u03C6"],[120652,1,"\u03C7"],[120653,1,"\u03C8"],[120654,1,"\u03C9"],[120655,1,"\u2202"],[120656,1,"\u03B5"],[120657,1,"\u03B8"],[120658,1,"\u03BA"],[120659,1,"\u03C6"],[120660,1,"\u03C1"],[120661,1,"\u03C0"],[120662,1,"\u03B1"],[120663,1,"\u03B2"],[120664,1,"\u03B3"],[120665,1,"\u03B4"],[120666,1,"\u03B5"],[120667,1,"\u03B6"],[120668,1,"\u03B7"],[120669,1,"\u03B8"],[120670,1,"\u03B9"],[120671,1,"\u03BA"],[120672,1,"\u03BB"],[120673,1,"\u03BC"],[120674,1,"\u03BD"],[120675,1,"\u03BE"],[120676,1,"\u03BF"],[120677,1,"\u03C0"],[120678,1,"\u03C1"],[120679,1,"\u03B8"],[120680,1,"\u03C3"],[120681,1,"\u03C4"],[120682,1,"\u03C5"],[120683,1,"\u03C6"],[120684,1,"\u03C7"],[120685,1,"\u03C8"],[120686,1,"\u03C9"],[120687,1,"\u2207"],[120688,1,"\u03B1"],[120689,1,"\u03B2"],[120690,1,"\u03B3"],[120691,1,"\u03B4"],[120692,1,"\u03B5"],[120693,1,"\u03B6"],[120694,1,"\u03B7"],[120695,1,"\u03B8"],[120696,1,"\u03B9"],[120697,1,"\u03BA"],[120698,1,"\u03BB"],[120699,1,"\u03BC"],[120700,1,"\u03BD"],[120701,1,"\u03BE"],[120702,1,"\u03BF"],[120703,1,"\u03C0"],[120704,1,"\u03C1"],[[120705,120706],1,"\u03C3"],[120707,1,"\u03C4"],[120708,1,"\u03C5"],[120709,1,"\u03C6"],[120710,1,"\u03C7"],[120711,1,"\u03C8"],[120712,1,"\u03C9"],[120713,1,"\u2202"],[120714,1,"\u03B5"],[120715,1,"\u03B8"],[120716,1,"\u03BA"],[120717,1,"\u03C6"],[120718,1,"\u03C1"],[120719,1,"\u03C0"],[120720,1,"\u03B1"],[120721,1,"\u03B2"],[120722,1,"\u03B3"],[120723,1,"\u03B4"],[120724,1,"\u03B5"],[120725,1,"\u03B6"],[120726,1,"\u03B7"],[120727,1,"\u03B8"],[120728,1,"\u03B9"],[120729,1,"\u03BA"],[120730,1,"\u03BB"],[120731,1,"\u03BC"],[120732,1,"\u03BD"],[120733,1,"\u03BE"],[120734,1,"\u03BF"],[120735,1,"\u03C0"],[120736,1,"\u03C1"],[120737,1,"\u03B8"],[120738,1,"\u03C3"],[120739,1,"\u03C4"],[120740,1,"\u03C5"],[120741,1,"\u03C6"],[120742,1,"\u03C7"],[120743,1,"\u03C8"],[120744,1,"\u03C9"],[120745,1,"\u2207"],[120746,1,"\u03B1"],[120747,1,"\u03B2"],[120748,1,"\u03B3"],[120749,1,"\u03B4"],[120750,1,"\u03B5"],[120751,1,"\u03B6"],[120752,1,"\u03B7"],[120753,1,"\u03B8"],[120754,1,"\u03B9"],[120755,1,"\u03BA"],[120756,1,"\u03BB"],[120757,1,"\u03BC"],[120758,1,"\u03BD"],[120759,1,"\u03BE"],[120760,1,"\u03BF"],[120761,1,"\u03C0"],[120762,1,"\u03C1"],[[120763,120764],1,"\u03C3"],[120765,1,"\u03C4"],[120766,1,"\u03C5"],[120767,1,"\u03C6"],[120768,1,"\u03C7"],[120769,1,"\u03C8"],[120770,1,"\u03C9"],[120771,1,"\u2202"],[120772,1,"\u03B5"],[120773,1,"\u03B8"],[120774,1,"\u03BA"],[120775,1,"\u03C6"],[120776,1,"\u03C1"],[120777,1,"\u03C0"],[[120778,120779],1,"\u03DD"],[[120780,120781],3],[120782,1,"0"],[120783,1,"1"],[120784,1,"2"],[120785,1,"3"],[120786,1,"4"],[120787,1,"5"],[120788,1,"6"],[120789,1,"7"],[120790,1,"8"],[120791,1,"9"],[120792,1,"0"],[120793,1,"1"],[120794,1,"2"],[120795,1,"3"],[120796,1,"4"],[120797,1,"5"],[120798,1,"6"],[120799,1,"7"],[120800,1,"8"],[120801,1,"9"],[120802,1,"0"],[120803,1,"1"],[120804,1,"2"],[120805,1,"3"],[120806,1,"4"],[120807,1,"5"],[120808,1,"6"],[120809,1,"7"],[120810,1,"8"],[120811,1,"9"],[120812,1,"0"],[120813,1,"1"],[120814,1,"2"],[120815,1,"3"],[120816,1,"4"],[120817,1,"5"],[120818,1,"6"],[120819,1,"7"],[120820,1,"8"],[120821,1,"9"],[120822,1,"0"],[120823,1,"1"],[120824,1,"2"],[120825,1,"3"],[120826,1,"4"],[120827,1,"5"],[120828,1,"6"],[120829,1,"7"],[120830,1,"8"],[120831,1,"9"],[[120832,121343],2],[[121344,121398],2],[[121399,121402],2],[[121403,121452],2],[[121453,121460],2],[121461,2],[[121462,121475],2],[121476,2],[[121477,121483],2],[[121484,121498],3],[[121499,121503],2],[121504,3],[[121505,121519],2],[[121520,122623],3],[[122624,122654],2],[[122655,122660],3],[[122661,122666],2],[[122667,122879],3],[[122880,122886],2],[122887,3],[[122888,122904],2],[[122905,122906],3],[[122907,122913],2],[122914,3],[[122915,122916],2],[122917,3],[[122918,122922],2],[[122923,122927],3],[122928,1,"\u0430"],[122929,1,"\u0431"],[122930,1,"\u0432"],[122931,1,"\u0433"],[122932,1,"\u0434"],[122933,1,"\u0435"],[122934,1,"\u0436"],[122935,1,"\u0437"],[122936,1,"\u0438"],[122937,1,"\u043A"],[122938,1,"\u043B"],[122939,1,"\u043C"],[122940,1,"\u043E"],[122941,1,"\u043F"],[122942,1,"\u0440"],[122943,1,"\u0441"],[122944,1,"\u0442"],[122945,1,"\u0443"],[122946,1,"\u0444"],[122947,1,"\u0445"],[122948,1,"\u0446"],[122949,1,"\u0447"],[122950,1,"\u0448"],[122951,1,"\u044B"],[122952,1,"\u044D"],[122953,1,"\u044E"],[122954,1,"\uA689"],[122955,1,"\u04D9"],[122956,1,"\u0456"],[122957,1,"\u0458"],[122958,1,"\u04E9"],[122959,1,"\u04AF"],[122960,1,"\u04CF"],[122961,1,"\u0430"],[122962,1,"\u0431"],[122963,1,"\u0432"],[122964,1,"\u0433"],[122965,1,"\u0434"],[122966,1,"\u0435"],[122967,1,"\u0436"],[122968,1,"\u0437"],[122969,1,"\u0438"],[122970,1,"\u043A"],[122971,1,"\u043B"],[122972,1,"\u043E"],[122973,1,"\u043F"],[122974,1,"\u0441"],[122975,1,"\u0443"],[122976,1,"\u0444"],[122977,1,"\u0445"],[122978,1,"\u0446"],[122979,1,"\u0447"],[122980,1,"\u0448"],[122981,1,"\u044A"],[122982,1,"\u044B"],[122983,1,"\u0491"],[122984,1,"\u0456"],[122985,1,"\u0455"],[122986,1,"\u045F"],[122987,1,"\u04AB"],[122988,1,"\uA651"],[122989,1,"\u04B1"],[[122990,123022],3],[123023,2],[[123024,123135],3],[[123136,123180],2],[[123181,123183],3],[[123184,123197],2],[[123198,123199],3],[[123200,123209],2],[[123210,123213],3],[123214,2],[123215,2],[[123216,123535],3],[[123536,123566],2],[[123567,123583],3],[[123584,123641],2],[[123642,123646],3],[123647,2],[[123648,124111],3],[[124112,124153],2],[[124154,124367],3],[[124368,124410],2],[[124411,124414],3],[124415,2],[[124416,124895],3],[[124896,124902],2],[124903,3],[[124904,124907],2],[124908,3],[[124909,124910],2],[124911,3],[[124912,124926],2],[124927,3],[[124928,125124],2],[[125125,125126],3],[[125127,125135],2],[[125136,125142],2],[[125143,125183],3],[125184,1,"\uD83A\uDD22"],[125185,1,"\uD83A\uDD23"],[125186,1,"\uD83A\uDD24"],[125187,1,"\uD83A\uDD25"],[125188,1,"\uD83A\uDD26"],[125189,1,"\uD83A\uDD27"],[125190,1,"\uD83A\uDD28"],[125191,1,"\uD83A\uDD29"],[125192,1,"\uD83A\uDD2A"],[125193,1,"\uD83A\uDD2B"],[125194,1,"\uD83A\uDD2C"],[125195,1,"\uD83A\uDD2D"],[125196,1,"\uD83A\uDD2E"],[125197,1,"\uD83A\uDD2F"],[125198,1,"\uD83A\uDD30"],[125199,1,"\uD83A\uDD31"],[125200,1,"\uD83A\uDD32"],[125201,1,"\uD83A\uDD33"],[125202,1,"\uD83A\uDD34"],[125203,1,"\uD83A\uDD35"],[125204,1,"\uD83A\uDD36"],[125205,1,"\uD83A\uDD37"],[125206,1,"\uD83A\uDD38"],[125207,1,"\uD83A\uDD39"],[125208,1,"\uD83A\uDD3A"],[125209,1,"\uD83A\uDD3B"],[125210,1,"\uD83A\uDD3C"],[125211,1,"\uD83A\uDD3D"],[125212,1,"\uD83A\uDD3E"],[125213,1,"\uD83A\uDD3F"],[125214,1,"\uD83A\uDD40"],[125215,1,"\uD83A\uDD41"],[125216,1,"\uD83A\uDD42"],[125217,1,"\uD83A\uDD43"],[[125218,125258],2],[125259,2],[[125260,125263],3],[[125264,125273],2],[[125274,125277],3],[[125278,125279],2],[[125280,126064],3],[[126065,126132],2],[[126133,126208],3],[[126209,126269],2],[[126270,126463],3],[126464,1,"\u0627"],[126465,1,"\u0628"],[126466,1,"\u062C"],[126467,1,"\u062F"],[126468,3],[126469,1,"\u0648"],[126470,1,"\u0632"],[126471,1,"\u062D"],[126472,1,"\u0637"],[126473,1,"\u064A"],[126474,1,"\u0643"],[126475,1,"\u0644"],[126476,1,"\u0645"],[126477,1,"\u0646"],[126478,1,"\u0633"],[126479,1,"\u0639"],[126480,1,"\u0641"],[126481,1,"\u0635"],[126482,1,"\u0642"],[126483,1,"\u0631"],[126484,1,"\u0634"],[126485,1,"\u062A"],[126486,1,"\u062B"],[126487,1,"\u062E"],[126488,1,"\u0630"],[126489,1,"\u0636"],[126490,1,"\u0638"],[126491,1,"\u063A"],[126492,1,"\u066E"],[126493,1,"\u06BA"],[126494,1,"\u06A1"],[126495,1,"\u066F"],[126496,3],[126497,1,"\u0628"],[126498,1,"\u062C"],[126499,3],[126500,1,"\u0647"],[[126501,126502],3],[126503,1,"\u062D"],[126504,3],[126505,1,"\u064A"],[126506,1,"\u0643"],[126507,1,"\u0644"],[126508,1,"\u0645"],[126509,1,"\u0646"],[126510,1,"\u0633"],[126511,1,"\u0639"],[126512,1,"\u0641"],[126513,1,"\u0635"],[126514,1,"\u0642"],[126515,3],[126516,1,"\u0634"],[126517,1,"\u062A"],[126518,1,"\u062B"],[126519,1,"\u062E"],[126520,3],[126521,1,"\u0636"],[126522,3],[126523,1,"\u063A"],[[126524,126529],3],[126530,1,"\u062C"],[[126531,126534],3],[126535,1,"\u062D"],[126536,3],[126537,1,"\u064A"],[126538,3],[126539,1,"\u0644"],[126540,3],[126541,1,"\u0646"],[126542,1,"\u0633"],[126543,1,"\u0639"],[126544,3],[126545,1,"\u0635"],[126546,1,"\u0642"],[126547,3],[126548,1,"\u0634"],[[126549,126550],3],[126551,1,"\u062E"],[126552,3],[126553,1,"\u0636"],[126554,3],[126555,1,"\u063A"],[126556,3],[126557,1,"\u06BA"],[126558,3],[126559,1,"\u066F"],[126560,3],[126561,1,"\u0628"],[126562,1,"\u062C"],[126563,3],[126564,1,"\u0647"],[[126565,126566],3],[126567,1,"\u062D"],[126568,1,"\u0637"],[126569,1,"\u064A"],[126570,1,"\u0643"],[126571,3],[126572,1,"\u0645"],[126573,1,"\u0646"],[126574,1,"\u0633"],[126575,1,"\u0639"],[126576,1,"\u0641"],[126577,1,"\u0635"],[126578,1,"\u0642"],[126579,3],[126580,1,"\u0634"],[126581,1,"\u062A"],[126582,1,"\u062B"],[126583,1,"\u062E"],[126584,3],[126585,1,"\u0636"],[126586,1,"\u0638"],[126587,1,"\u063A"],[126588,1,"\u066E"],[126589,3],[126590,1,"\u06A1"],[126591,3],[126592,1,"\u0627"],[126593,1,"\u0628"],[126594,1,"\u062C"],[126595,1,"\u062F"],[126596,1,"\u0647"],[126597,1,"\u0648"],[126598,1,"\u0632"],[126599,1,"\u062D"],[126600,1,"\u0637"],[126601,1,"\u064A"],[126602,3],[126603,1,"\u0644"],[126604,1,"\u0645"],[126605,1,"\u0646"],[126606,1,"\u0633"],[126607,1,"\u0639"],[126608,1,"\u0641"],[126609,1,"\u0635"],[126610,1,"\u0642"],[126611,1,"\u0631"],[126612,1,"\u0634"],[126613,1,"\u062A"],[126614,1,"\u062B"],[126615,1,"\u062E"],[126616,1,"\u0630"],[126617,1,"\u0636"],[126618,1,"\u0638"],[126619,1,"\u063A"],[[126620,126624],3],[126625,1,"\u0628"],[126626,1,"\u062C"],[126627,1,"\u062F"],[126628,3],[126629,1,"\u0648"],[126630,1,"\u0632"],[126631,1,"\u062D"],[126632,1,"\u0637"],[126633,1,"\u064A"],[126634,3],[126635,1,"\u0644"],[126636,1,"\u0645"],[126637,1,"\u0646"],[126638,1,"\u0633"],[126639,1,"\u0639"],[126640,1,"\u0641"],[126641,1,"\u0635"],[126642,1,"\u0642"],[126643,1,"\u0631"],[126644,1,"\u0634"],[126645,1,"\u062A"],[126646,1,"\u062B"],[126647,1,"\u062E"],[126648,1,"\u0630"],[126649,1,"\u0636"],[126650,1,"\u0638"],[126651,1,"\u063A"],[[126652,126703],3],[[126704,126705],2],[[126706,126975],3],[[126976,127019],2],[[127020,127023],3],[[127024,127123],2],[[127124,127135],3],[[127136,127150],2],[[127151,127152],3],[[127153,127166],2],[127167,2],[127168,3],[[127169,127183],2],[127184,3],[[127185,127199],2],[[127200,127221],2],[[127222,127231],3],[127232,3],[127233,1,"0,"],[127234,1,"1,"],[127235,1,"2,"],[127236,1,"3,"],[127237,1,"4,"],[127238,1,"5,"],[127239,1,"6,"],[127240,1,"7,"],[127241,1,"8,"],[127242,1,"9,"],[[127243,127244],2],[[127245,127247],2],[127248,1,"(a)"],[127249,1,"(b)"],[127250,1,"(c)"],[127251,1,"(d)"],[127252,1,"(e)"],[127253,1,"(f)"],[127254,1,"(g)"],[127255,1,"(h)"],[127256,1,"(i)"],[127257,1,"(j)"],[127258,1,"(k)"],[127259,1,"(l)"],[127260,1,"(m)"],[127261,1,"(n)"],[127262,1,"(o)"],[127263,1,"(p)"],[127264,1,"(q)"],[127265,1,"(r)"],[127266,1,"(s)"],[127267,1,"(t)"],[127268,1,"(u)"],[127269,1,"(v)"],[127270,1,"(w)"],[127271,1,"(x)"],[127272,1,"(y)"],[127273,1,"(z)"],[127274,1,"\u3014s\u3015"],[127275,1,"c"],[127276,1,"r"],[127277,1,"cd"],[127278,1,"wz"],[127279,2],[127280,1,"a"],[127281,1,"b"],[127282,1,"c"],[127283,1,"d"],[127284,1,"e"],[127285,1,"f"],[127286,1,"g"],[127287,1,"h"],[127288,1,"i"],[127289,1,"j"],[127290,1,"k"],[127291,1,"l"],[127292,1,"m"],[127293,1,"n"],[127294,1,"o"],[127295,1,"p"],[127296,1,"q"],[127297,1,"r"],[127298,1,"s"],[127299,1,"t"],[127300,1,"u"],[127301,1,"v"],[127302,1,"w"],[127303,1,"x"],[127304,1,"y"],[127305,1,"z"],[127306,1,"hv"],[127307,1,"mv"],[127308,1,"sd"],[127309,1,"ss"],[127310,1,"ppv"],[127311,1,"wc"],[[127312,127318],2],[127319,2],[[127320,127326],2],[127327,2],[[127328,127337],2],[127338,1,"mc"],[127339,1,"md"],[127340,1,"mr"],[[127341,127343],2],[[127344,127352],2],[127353,2],[127354,2],[[127355,127356],2],[[127357,127358],2],[127359,2],[[127360,127369],2],[[127370,127373],2],[[127374,127375],2],[127376,1,"dj"],[[127377,127386],2],[[127387,127404],2],[127405,2],[[127406,127461],3],[[127462,127487],2],[127488,1,"\u307B\u304B"],[127489,1,"\u30B3\u30B3"],[127490,1,"\u30B5"],[[127491,127503],3],[127504,1,"\u624B"],[127505,1,"\u5B57"],[127506,1,"\u53CC"],[127507,1,"\u30C7"],[127508,1,"\u4E8C"],[127509,1,"\u591A"],[127510,1,"\u89E3"],[127511,1,"\u5929"],[127512,1,"\u4EA4"],[127513,1,"\u6620"],[127514,1,"\u7121"],[127515,1,"\u6599"],[127516,1,"\u524D"],[127517,1,"\u5F8C"],[127518,1,"\u518D"],[127519,1,"\u65B0"],[127520,1,"\u521D"],[127521,1,"\u7D42"],[127522,1,"\u751F"],[127523,1,"\u8CA9"],[127524,1,"\u58F0"],[127525,1,"\u5439"],[127526,1,"\u6F14"],[127527,1,"\u6295"],[127528,1,"\u6355"],[127529,1,"\u4E00"],[127530,1,"\u4E09"],[127531,1,"\u904A"],[127532,1,"\u5DE6"],[127533,1,"\u4E2D"],[127534,1,"\u53F3"],[127535,1,"\u6307"],[127536,1,"\u8D70"],[127537,1,"\u6253"],[127538,1,"\u7981"],[127539,1,"\u7A7A"],[127540,1,"\u5408"],[127541,1,"\u6E80"],[127542,1,"\u6709"],[127543,1,"\u6708"],[127544,1,"\u7533"],[127545,1,"\u5272"],[127546,1,"\u55B6"],[127547,1,"\u914D"],[[127548,127551],3],[127552,1,"\u3014\u672C\u3015"],[127553,1,"\u3014\u4E09\u3015"],[127554,1,"\u3014\u4E8C\u3015"],[127555,1,"\u3014\u5B89\u3015"],[127556,1,"\u3014\u70B9\u3015"],[127557,1,"\u3014\u6253\u3015"],[127558,1,"\u3014\u76D7\u3015"],[127559,1,"\u3014\u52DD\u3015"],[127560,1,"\u3014\u6557\u3015"],[[127561,127567],3],[127568,1,"\u5F97"],[127569,1,"\u53EF"],[[127570,127583],3],[[127584,127589],2],[[127590,127743],3],[[127744,127776],2],[[127777,127788],2],[[127789,127791],2],[[127792,127797],2],[127798,2],[[127799,127868],2],[127869,2],[[127870,127871],2],[[127872,127891],2],[[127892,127903],2],[[127904,127940],2],[127941,2],[[127942,127946],2],[[127947,127950],2],[[127951,127955],2],[[127956,127967],2],[[127968,127984],2],[[127985,127991],2],[[127992,127999],2],[[128000,128062],2],[128063,2],[128064,2],[128065,2],[[128066,128247],2],[128248,2],[[128249,128252],2],[[128253,128254],2],[128255,2],[[128256,128317],2],[[128318,128319],2],[[128320,128323],2],[[128324,128330],2],[[128331,128335],2],[[128336,128359],2],[[128360,128377],2],[128378,2],[[128379,128419],2],[128420,2],[[128421,128506],2],[[128507,128511],2],[128512,2],[[128513,128528],2],[128529,2],[[128530,128532],2],[128533,2],[128534,2],[128535,2],[128536,2],[128537,2],[128538,2],[128539,2],[[128540,128542],2],[128543,2],[[128544,128549],2],[[128550,128551],2],[[128552,128555],2],[128556,2],[128557,2],[[128558,128559],2],[[128560,128563],2],[128564,2],[[128565,128576],2],[[128577,128578],2],[[128579,128580],2],[[128581,128591],2],[[128592,128639],2],[[128640,128709],2],[[128710,128719],2],[128720,2],[[128721,128722],2],[[128723,128724],2],[128725,2],[[128726,128727],2],[[128728,128731],3],[128732,2],[[128733,128735],2],[[128736,128748],2],[[128749,128751],3],[[128752,128755],2],[[128756,128758],2],[[128759,128760],2],[128761,2],[128762,2],[[128763,128764],2],[[128765,128767],3],[[128768,128883],2],[[128884,128886],2],[[128887,128890],3],[[128891,128895],2],[[128896,128980],2],[[128981,128984],2],[128985,2],[[128986,128991],3],[[128992,129003],2],[[129004,129007],3],[129008,2],[[129009,129023],3],[[129024,129035],2],[[129036,129039],3],[[129040,129095],2],[[129096,129103],3],[[129104,129113],2],[[129114,129119],3],[[129120,129159],2],[[129160,129167],3],[[129168,129197],2],[[129198,129199],3],[[129200,129201],2],[[129202,129211],2],[[129212,129215],3],[[129216,129217],2],[[129218,129279],3],[[129280,129291],2],[129292,2],[[129293,129295],2],[[129296,129304],2],[[129305,129310],2],[129311,2],[[129312,129319],2],[[129320,129327],2],[129328,2],[[129329,129330],2],[[129331,129342],2],[129343,2],[[129344,129355],2],[129356,2],[[129357,129359],2],[[129360,129374],2],[[129375,129387],2],[[129388,129392],2],[129393,2],[129394,2],[[129395,129398],2],[[129399,129400],2],[129401,2],[129402,2],[129403,2],[[129404,129407],2],[[129408,129412],2],[[129413,129425],2],[[129426,129431],2],[[129432,129442],2],[[129443,129444],2],[[129445,129450],2],[[129451,129453],2],[[129454,129455],2],[[129456,129465],2],[[129466,129471],2],[129472,2],[[129473,129474],2],[[129475,129482],2],[129483,2],[129484,2],[[129485,129487],2],[[129488,129510],2],[[129511,129535],2],[[129536,129619],2],[[129620,129631],3],[[129632,129645],2],[[129646,129647],3],[[129648,129651],2],[129652,2],[[129653,129655],2],[[129656,129658],2],[[129659,129660],2],[[129661,129663],3],[[129664,129666],2],[[129667,129670],2],[[129671,129672],2],[129673,2],[[129674,129678],3],[129679,2],[[129680,129685],2],[[129686,129704],2],[[129705,129708],2],[[129709,129711],2],[[129712,129718],2],[[129719,129722],2],[[129723,129725],2],[129726,2],[129727,2],[[129728,129730],2],[[129731,129733],2],[129734,2],[[129735,129741],3],[[129742,129743],2],[[129744,129750],2],[[129751,129753],2],[[129754,129755],2],[129756,2],[[129757,129758],3],[129759,2],[[129760,129767],2],[129768,2],[129769,2],[[129770,129775],3],[[129776,129782],2],[[129783,129784],2],[[129785,129791],3],[[129792,129938],2],[129939,3],[[129940,129994],2],[[129995,130031],2],[130032,1,"0"],[130033,1,"1"],[130034,1,"2"],[130035,1,"3"],[130036,1,"4"],[130037,1,"5"],[130038,1,"6"],[130039,1,"7"],[130040,1,"8"],[130041,1,"9"],[[130042,131069],3],[[131070,131071],3],[[131072,173782],2],[[173783,173789],2],[[173790,173791],2],[[173792,173823],3],[[173824,177972],2],[[177973,177976],2],[177977,2],[[177978,177983],3],[[177984,178205],2],[[178206,178207],3],[[178208,183969],2],[[183970,183983],3],[[183984,191456],2],[[191457,191471],3],[[191472,192093],2],[[192094,194559],3],[194560,1,"\u4E3D"],[194561,1,"\u4E38"],[194562,1,"\u4E41"],[194563,1,"\uD840\uDD22"],[194564,1,"\u4F60"],[194565,1,"\u4FAE"],[194566,1,"\u4FBB"],[194567,1,"\u5002"],[194568,1,"\u507A"],[194569,1,"\u5099"],[194570,1,"\u50E7"],[194571,1,"\u50CF"],[194572,1,"\u349E"],[194573,1,"\uD841\uDE3A"],[194574,1,"\u514D"],[194575,1,"\u5154"],[194576,1,"\u5164"],[194577,1,"\u5177"],[194578,1,"\uD841\uDD1C"],[194579,1,"\u34B9"],[194580,1,"\u5167"],[194581,1,"\u518D"],[194582,1,"\uD841\uDD4B"],[194583,1,"\u5197"],[194584,1,"\u51A4"],[194585,1,"\u4ECC"],[194586,1,"\u51AC"],[194587,1,"\u51B5"],[194588,1,"\uD864\uDDDF"],[194589,1,"\u51F5"],[194590,1,"\u5203"],[194591,1,"\u34DF"],[194592,1,"\u523B"],[194593,1,"\u5246"],[194594,1,"\u5272"],[194595,1,"\u5277"],[194596,1,"\u3515"],[194597,1,"\u52C7"],[194598,1,"\u52C9"],[194599,1,"\u52E4"],[194600,1,"\u52FA"],[194601,1,"\u5305"],[194602,1,"\u5306"],[194603,1,"\u5317"],[194604,1,"\u5349"],[194605,1,"\u5351"],[194606,1,"\u535A"],[194607,1,"\u5373"],[194608,1,"\u537D"],[[194609,194611],1,"\u537F"],[194612,1,"\uD842\uDE2C"],[194613,1,"\u7070"],[194614,1,"\u53CA"],[194615,1,"\u53DF"],[194616,1,"\uD842\uDF63"],[194617,1,"\u53EB"],[194618,1,"\u53F1"],[194619,1,"\u5406"],[194620,1,"\u549E"],[194621,1,"\u5438"],[194622,1,"\u5448"],[194623,1,"\u5468"],[194624,1,"\u54A2"],[194625,1,"\u54F6"],[194626,1,"\u5510"],[194627,1,"\u5553"],[194628,1,"\u5563"],[[194629,194630],1,"\u5584"],[194631,1,"\u5599"],[194632,1,"\u55AB"],[194633,1,"\u55B3"],[194634,1,"\u55C2"],[194635,1,"\u5716"],[194636,1,"\u5606"],[194637,1,"\u5717"],[194638,1,"\u5651"],[194639,1,"\u5674"],[194640,1,"\u5207"],[194641,1,"\u58EE"],[194642,1,"\u57CE"],[194643,1,"\u57F4"],[194644,1,"\u580D"],[194645,1,"\u578B"],[194646,1,"\u5832"],[194647,1,"\u5831"],[194648,1,"\u58AC"],[194649,1,"\uD845\uDCE4"],[194650,1,"\u58F2"],[194651,1,"\u58F7"],[194652,1,"\u5906"],[194653,1,"\u591A"],[194654,1,"\u5922"],[194655,1,"\u5962"],[194656,1,"\uD845\uDEA8"],[194657,1,"\uD845\uDEEA"],[194658,1,"\u59EC"],[194659,1,"\u5A1B"],[194660,1,"\u5A27"],[194661,1,"\u59D8"],[194662,1,"\u5A66"],[194663,1,"\u36EE"],[194664,1,"\u36FC"],[194665,1,"\u5B08"],[[194666,194667],1,"\u5B3E"],[194668,1,"\uD846\uDDC8"],[194669,1,"\u5BC3"],[194670,1,"\u5BD8"],[194671,1,"\u5BE7"],[194672,1,"\u5BF3"],[194673,1,"\uD846\uDF18"],[194674,1,"\u5BFF"],[194675,1,"\u5C06"],[194676,1,"\u5F53"],[194677,1,"\u5C22"],[194678,1,"\u3781"],[194679,1,"\u5C60"],[194680,1,"\u5C6E"],[194681,1,"\u5CC0"],[194682,1,"\u5C8D"],[194683,1,"\uD847\uDDE4"],[194684,1,"\u5D43"],[194685,1,"\uD847\uDDE6"],[194686,1,"\u5D6E"],[194687,1,"\u5D6B"],[194688,1,"\u5D7C"],[194689,1,"\u5DE1"],[194690,1,"\u5DE2"],[194691,1,"\u382F"],[194692,1,"\u5DFD"],[194693,1,"\u5E28"],[194694,1,"\u5E3D"],[194695,1,"\u5E69"],[194696,1,"\u3862"],[194697,1,"\uD848\uDD83"],[194698,1,"\u387C"],[194699,1,"\u5EB0"],[194700,1,"\u5EB3"],[194701,1,"\u5EB6"],[194702,1,"\u5ECA"],[194703,1,"\uD868\uDF92"],[194704,1,"\u5EFE"],[[194705,194706],1,"\uD848\uDF31"],[194707,1,"\u8201"],[[194708,194709],1,"\u5F22"],[194710,1,"\u38C7"],[194711,1,"\uD84C\uDEB8"],[194712,1,"\uD858\uDDDA"],[194713,1,"\u5F62"],[194714,1,"\u5F6B"],[194715,1,"\u38E3"],[194716,1,"\u5F9A"],[194717,1,"\u5FCD"],[194718,1,"\u5FD7"],[194719,1,"\u5FF9"],[194720,1,"\u6081"],[194721,1,"\u393A"],[194722,1,"\u391C"],[194723,1,"\u6094"],[194724,1,"\uD849\uDED4"],[194725,1,"\u60C7"],[194726,1,"\u6148"],[194727,1,"\u614C"],[194728,1,"\u614E"],[194729,1,"\u614C"],[194730,1,"\u617A"],[194731,1,"\u618E"],[194732,1,"\u61B2"],[194733,1,"\u61A4"],[194734,1,"\u61AF"],[194735,1,"\u61DE"],[194736,1,"\u61F2"],[194737,1,"\u61F6"],[194738,1,"\u6210"],[194739,1,"\u621B"],[194740,1,"\u625D"],[194741,1,"\u62B1"],[194742,1,"\u62D4"],[194743,1,"\u6350"],[194744,1,"\uD84A\uDF0C"],[194745,1,"\u633D"],[194746,1,"\u62FC"],[194747,1,"\u6368"],[194748,1,"\u6383"],[194749,1,"\u63E4"],[194750,1,"\uD84A\uDFF1"],[194751,1,"\u6422"],[194752,1,"\u63C5"],[194753,1,"\u63A9"],[194754,1,"\u3A2E"],[194755,1,"\u6469"],[194756,1,"\u647E"],[194757,1,"\u649D"],[194758,1,"\u6477"],[194759,1,"\u3A6C"],[194760,1,"\u654F"],[194761,1,"\u656C"],[194762,1,"\uD84C\uDC0A"],[194763,1,"\u65E3"],[194764,1,"\u66F8"],[194765,1,"\u6649"],[194766,1,"\u3B19"],[194767,1,"\u6691"],[194768,1,"\u3B08"],[194769,1,"\u3AE4"],[194770,1,"\u5192"],[194771,1,"\u5195"],[194772,1,"\u6700"],[194773,1,"\u669C"],[194774,1,"\u80AD"],[194775,1,"\u43D9"],[194776,1,"\u6717"],[194777,1,"\u671B"],[194778,1,"\u6721"],[194779,1,"\u675E"],[194780,1,"\u6753"],[194781,1,"\uD84C\uDFC3"],[194782,1,"\u3B49"],[194783,1,"\u67FA"],[194784,1,"\u6785"],[194785,1,"\u6852"],[194786,1,"\u6885"],[194787,1,"\uD84D\uDC6D"],[194788,1,"\u688E"],[194789,1,"\u681F"],[194790,1,"\u6914"],[194791,1,"\u3B9D"],[194792,1,"\u6942"],[194793,1,"\u69A3"],[194794,1,"\u69EA"],[194795,1,"\u6AA8"],[194796,1,"\uD84D\uDEA3"],[194797,1,"\u6ADB"],[194798,1,"\u3C18"],[194799,1,"\u6B21"],[194800,1,"\uD84E\uDCA7"],[194801,1,"\u6B54"],[194802,1,"\u3C4E"],[194803,1,"\u6B72"],[194804,1,"\u6B9F"],[194805,1,"\u6BBA"],[194806,1,"\u6BBB"],[194807,1,"\uD84E\uDE8D"],[194808,1,"\uD847\uDD0B"],[194809,1,"\uD84E\uDEFA"],[194810,1,"\u6C4E"],[194811,1,"\uD84F\uDCBC"],[194812,1,"\u6CBF"],[194813,1,"\u6CCD"],[194814,1,"\u6C67"],[194815,1,"\u6D16"],[194816,1,"\u6D3E"],[194817,1,"\u6D77"],[194818,1,"\u6D41"],[194819,1,"\u6D69"],[194820,1,"\u6D78"],[194821,1,"\u6D85"],[194822,1,"\uD84F\uDD1E"],[194823,1,"\u6D34"],[194824,1,"\u6E2F"],[194825,1,"\u6E6E"],[194826,1,"\u3D33"],[194827,1,"\u6ECB"],[194828,1,"\u6EC7"],[194829,1,"\uD84F\uDED1"],[194830,1,"\u6DF9"],[194831,1,"\u6F6E"],[194832,1,"\uD84F\uDF5E"],[194833,1,"\uD84F\uDF8E"],[194834,1,"\u6FC6"],[194835,1,"\u7039"],[194836,1,"\u701E"],[194837,1,"\u701B"],[194838,1,"\u3D96"],[194839,1,"\u704A"],[194840,1,"\u707D"],[194841,1,"\u7077"],[194842,1,"\u70AD"],[194843,1,"\uD841\uDD25"],[194844,1,"\u7145"],[194845,1,"\uD850\uDE63"],[194846,1,"\u719C"],[194847,1,"\uD850\uDFAB"],[194848,1,"\u7228"],[194849,1,"\u7235"],[194850,1,"\u7250"],[194851,1,"\uD851\uDE08"],[194852,1,"\u7280"],[194853,1,"\u7295"],[194854,1,"\uD851\uDF35"],[194855,1,"\uD852\uDC14"],[194856,1,"\u737A"],[194857,1,"\u738B"],[194858,1,"\u3EAC"],[194859,1,"\u73A5"],[[194860,194861],1,"\u3EB8"],[194862,1,"\u7447"],[194863,1,"\u745C"],[194864,1,"\u7471"],[194865,1,"\u7485"],[194866,1,"\u74CA"],[194867,1,"\u3F1B"],[194868,1,"\u7524"],[194869,1,"\uD853\uDC36"],[194870,1,"\u753E"],[194871,1,"\uD853\uDC92"],[194872,1,"\u7570"],[194873,1,"\uD848\uDD9F"],[194874,1,"\u7610"],[194875,1,"\uD853\uDFA1"],[194876,1,"\uD853\uDFB8"],[194877,1,"\uD854\uDC44"],[194878,1,"\u3FFC"],[194879,1,"\u4008"],[194880,1,"\u76F4"],[194881,1,"\uD854\uDCF3"],[194882,1,"\uD854\uDCF2"],[194883,1,"\uD854\uDD19"],[194884,1,"\uD854\uDD33"],[194885,1,"\u771E"],[[194886,194887],1,"\u771F"],[194888,1,"\u774A"],[194889,1,"\u4039"],[194890,1,"\u778B"],[194891,1,"\u4046"],[194892,1,"\u4096"],[194893,1,"\uD855\uDC1D"],[194894,1,"\u784E"],[194895,1,"\u788C"],[194896,1,"\u78CC"],[194897,1,"\u40E3"],[194898,1,"\uD855\uDE26"],[194899,1,"\u7956"],[194900,1,"\uD855\uDE9A"],[194901,1,"\uD855\uDEC5"],[194902,1,"\u798F"],[194903,1,"\u79EB"],[194904,1,"\u412F"],[194905,1,"\u7A40"],[194906,1,"\u7A4A"],[194907,1,"\u7A4F"],[194908,1,"\uD856\uDD7C"],[[194909,194910],1,"\uD856\uDEA7"],[194911,1,"\u7AEE"],[194912,1,"\u4202"],[194913,1,"\uD856\uDFAB"],[194914,1,"\u7BC6"],[194915,1,"\u7BC9"],[194916,1,"\u4227"],[194917,1,"\uD857\uDC80"],[194918,1,"\u7CD2"],[194919,1,"\u42A0"],[194920,1,"\u7CE8"],[194921,1,"\u7CE3"],[194922,1,"\u7D00"],[194923,1,"\uD857\uDF86"],[194924,1,"\u7D63"],[194925,1,"\u4301"],[194926,1,"\u7DC7"],[194927,1,"\u7E02"],[194928,1,"\u7E45"],[194929,1,"\u4334"],[194930,1,"\uD858\uDE28"],[194931,1,"\uD858\uDE47"],[194932,1,"\u4359"],[194933,1,"\uD858\uDED9"],[194934,1,"\u7F7A"],[194935,1,"\uD858\uDF3E"],[194936,1,"\u7F95"],[194937,1,"\u7FFA"],[194938,1,"\u8005"],[194939,1,"\uD859\uDCDA"],[194940,1,"\uD859\uDD23"],[194941,1,"\u8060"],[194942,1,"\uD859\uDDA8"],[194943,1,"\u8070"],[194944,1,"\uD84C\uDF5F"],[194945,1,"\u43D5"],[194946,1,"\u80B2"],[194947,1,"\u8103"],[194948,1,"\u440B"],[194949,1,"\u813E"],[194950,1,"\u5AB5"],[194951,1,"\uD859\uDFA7"],[194952,1,"\uD859\uDFB5"],[194953,1,"\uD84C\uDF93"],[194954,1,"\uD84C\uDF9C"],[194955,1,"\u8201"],[194956,1,"\u8204"],[194957,1,"\u8F9E"],[194958,1,"\u446B"],[194959,1,"\u8291"],[194960,1,"\u828B"],[194961,1,"\u829D"],[194962,1,"\u52B3"],[194963,1,"\u82B1"],[194964,1,"\u82B3"],[194965,1,"\u82BD"],[194966,1,"\u82E6"],[194967,1,"\uD85A\uDF3C"],[194968,1,"\u82E5"],[194969,1,"\u831D"],[194970,1,"\u8363"],[194971,1,"\u83AD"],[194972,1,"\u8323"],[194973,1,"\u83BD"],[194974,1,"\u83E7"],[194975,1,"\u8457"],[194976,1,"\u8353"],[194977,1,"\u83CA"],[194978,1,"\u83CC"],[194979,1,"\u83DC"],[194980,1,"\uD85B\uDC36"],[194981,1,"\uD85B\uDD6B"],[194982,1,"\uD85B\uDCD5"],[194983,1,"\u452B"],[194984,1,"\u84F1"],[194985,1,"\u84F3"],[194986,1,"\u8516"],[194987,1,"\uD85C\uDFCA"],[194988,1,"\u8564"],[194989,1,"\uD85B\uDF2C"],[194990,1,"\u455D"],[194991,1,"\u4561"],[194992,1,"\uD85B\uDFB1"],[194993,1,"\uD85C\uDCD2"],[194994,1,"\u456B"],[194995,1,"\u8650"],[194996,1,"\u865C"],[194997,1,"\u8667"],[194998,1,"\u8669"],[194999,1,"\u86A9"],[195000,1,"\u8688"],[195001,1,"\u870E"],[195002,1,"\u86E2"],[195003,1,"\u8779"],[195004,1,"\u8728"],[195005,1,"\u876B"],[195006,1,"\u8786"],[195007,1,"\u45D7"],[195008,1,"\u87E1"],[195009,1,"\u8801"],[195010,1,"\u45F9"],[195011,1,"\u8860"],[195012,1,"\u8863"],[195013,1,"\uD85D\uDE67"],[195014,1,"\u88D7"],[195015,1,"\u88DE"],[195016,1,"\u4635"],[195017,1,"\u88FA"],[195018,1,"\u34BB"],[195019,1,"\uD85E\uDCAE"],[195020,1,"\uD85E\uDD66"],[195021,1,"\u46BE"],[195022,1,"\u46C7"],[195023,1,"\u8AA0"],[195024,1,"\u8AED"],[195025,1,"\u8B8A"],[195026,1,"\u8C55"],[195027,1,"\uD85F\uDCA8"],[195028,1,"\u8CAB"],[195029,1,"\u8CC1"],[195030,1,"\u8D1B"],[195031,1,"\u8D77"],[195032,1,"\uD85F\uDF2F"],[195033,1,"\uD842\uDC04"],[195034,1,"\u8DCB"],[195035,1,"\u8DBC"],[195036,1,"\u8DF0"],[195037,1,"\uD842\uDCDE"],[195038,1,"\u8ED4"],[195039,1,"\u8F38"],[195040,1,"\uD861\uDDD2"],[195041,1,"\uD861\uDDED"],[195042,1,"\u9094"],[195043,1,"\u90F1"],[195044,1,"\u9111"],[195045,1,"\uD861\uDF2E"],[195046,1,"\u911B"],[195047,1,"\u9238"],[195048,1,"\u92D7"],[195049,1,"\u92D8"],[195050,1,"\u927C"],[195051,1,"\u93F9"],[195052,1,"\u9415"],[195053,1,"\uD862\uDFFA"],[195054,1,"\u958B"],[195055,1,"\u4995"],[195056,1,"\u95B7"],[195057,1,"\uD863\uDD77"],[195058,1,"\u49E6"],[195059,1,"\u96C3"],[195060,1,"\u5DB2"],[195061,1,"\u9723"],[195062,1,"\uD864\uDD45"],[195063,1,"\uD864\uDE1A"],[195064,1,"\u4A6E"],[195065,1,"\u4A76"],[195066,1,"\u97E0"],[195067,1,"\uD865\uDC0A"],[195068,1,"\u4AB2"],[195069,1,"\uD865\uDC96"],[[195070,195071],1,"\u980B"],[195072,1,"\u9829"],[195073,1,"\uD865\uDDB6"],[195074,1,"\u98E2"],[195075,1,"\u4B33"],[195076,1,"\u9929"],[195077,1,"\u99A7"],[195078,1,"\u99C2"],[195079,1,"\u99FE"],[195080,1,"\u4BCE"],[195081,1,"\uD866\uDF30"],[195082,1,"\u9B12"],[195083,1,"\u9C40"],[195084,1,"\u9CFD"],[195085,1,"\u4CCE"],[195086,1,"\u4CED"],[195087,1,"\u9D67"],[195088,1,"\uD868\uDCCE"],[195089,1,"\u4CF8"],[195090,1,"\uD868\uDD05"],[195091,1,"\uD868\uDE0E"],[195092,1,"\uD868\uDE91"],[195093,1,"\u9EBB"],[195094,1,"\u4D56"],[195095,1,"\u9EF9"],[195096,1,"\u9EFE"],[195097,1,"\u9F05"],[195098,1,"\u9F0F"],[195099,1,"\u9F16"],[195100,1,"\u9F3B"],[195101,1,"\uD869\uDE00"],[[195102,196605],3],[[196606,196607],3],[[196608,201546],2],[[201547,201551],3],[[201552,205743],2],[[205744,262141],3],[[262142,262143],3],[[262144,327677],3],[[327678,327679],3],[[327680,393213],3],[[393214,393215],3],[[393216,458749],3],[[458750,458751],3],[[458752,524285],3],[[524286,524287],3],[[524288,589821],3],[[589822,589823],3],[[589824,655357],3],[[655358,655359],3],[[655360,720893],3],[[720894,720895],3],[[720896,786429],3],[[786430,786431],3],[[786432,851965],3],[[851966,851967],3],[[851968,917501],3],[[917502,917503],3],[917504,3],[917505,3],[[917506,917535],3],[[917536,917631],3],[[917632,917759],3],[[917760,917999],7],[[918000,983037],3],[[983038,983039],3],[[983040,1048573],3],[[1048574,1048575],3],[[1048576,1114109],3],[[1114110,1114111],3]]});var sP=z((C31,nP)=>{C31.STATUS_MAPPING={mapped:1,valid:2,disallowed:3,deviation:6,ignored:7}});var eP=z((vP1,oP)=>{var dG=lP(),s6=pP(),aP=iP(),{STATUS_MAPPING:D9}=sP();function mG(A){return/[^\x00-\x7F]/u.test(A)}function rP(A){let F=0,B=aP.length-1;while(F<=B){let D=Math.floor((F+B)/2),$=aP[D],J=Array.isArray($[0])?$[0][0]:$[0],X=Array.isArray($[0])?$[0][1]:$[0];if(J<=A&&X>=A)return $.slice(1);else if(J>A)B=D-1;else F=D+1}return null}function K31(A,{transitionalProcessing:F}){let B="";for(let D of A){let[$,J]=rP(D.codePointAt(0));switch($){case D9.disallowed:B+=D;break;case D9.ignored:break;case D9.mapped:if(F&&D==="\u1E9E")B+="ss";else B+=J;break;case D9.deviation:if(F)B+=J;else B+=D;break;case D9.valid:B+=D;break}}return B}function z31(A,{checkHyphens:F,checkBidi:B,checkJoiners:D,transitionalProcessing:$,useSTD3ASCIIRules:J,isBidi:X}){if(A.length===0)return!0;if(A.normalize("NFC")!==A)return!1;let E=Array.from(A);if(F){if(E[2]==="-"&&E[3]==="-"||(A.startsWith("-")||A.endsWith("-")))return!1}if(!F){if(A.startsWith("xn--"))return!1}if(A.includes("."))return!1;if(s6.combiningMarks.test(E[0]))return!1;for(let Y of E){let G=Y.codePointAt(0),[H]=rP(G);if($){if(H!==D9.valid)return!1}else if(H!==D9.valid&&H!==D9.deviation)return!1;if(J&&G<=127){if(!/^(?:[a-z]|[0-9]|-)$/u.test(Y))return!1}}if(D){let Y=0;for(let[G,H]of E.entries())if(H==="\u200C"||H==="\u200D"){if(G>0){if(s6.combiningClassVirama.test(E[G-1]))continue;if(H==="\u200C"){let W=E.indexOf("\u200C",G+1),q=W<0?E.slice(Y):E.slice(Y,W);if(s6.validZWNJ.test(q.join(""))){Y=G+1;continue}}}return!1}}if(B&&X){let Y;if(s6.bidiS1LTR.test(E[0]))Y=!1;else if(s6.bidiS1RTL.test(E[0]))Y=!0;else return!1;if(Y){if(!s6.bidiS2.test(A)||!s6.bidiS3.test(A)||s6.bidiS4EN.test(A)&&s6.bidiS4AN.test(A))return!1}else if(!s6.bidiS5.test(A)||!s6.bidiS6.test(A))return!1}return!0}function U31(A){let F=A.map((B)=>{if(B.startsWith("xn--"))try{return dG.decode(B.substring(4))}catch{return""}return B}).join(".");return s6.bidiDomain.test(F)}function tP(A,F){let B=K31(A,F);B=B.normalize("NFC");let D=B.split("."),$=U31(D),J=!1;for(let[X,E]of D.entries()){let Y=E,G=F.transitionalProcessing;if(Y.startsWith("xn--")){if(mG(Y)){J=!0;continue}try{Y=dG.decode(Y.substring(4))}catch{if(!F.ignoreInvalidPunycode){J=!0;continue}}if(D[X]=Y,Y===""||!mG(Y))J=!0;G=!1}if(J)continue;if(!z31(Y,{...F,transitionalProcessing:G,isBidi:$}))J=!0}return{string:D.join("."),error:J}}function Z31(A,{checkHyphens:F=!1,checkBidi:B=!1,checkJoiners:D=!1,useSTD3ASCIIRules:$=!1,verifyDNSLength:J=!1,transitionalProcessing:X=!1,ignoreInvalidPunycode:E=!1}={}){let Y=tP(A,{checkHyphens:F,checkBidi:B,checkJoiners:D,useSTD3ASCIIRules:$,transitionalProcessing:X,ignoreInvalidPunycode:E}),G=Y.string.split(".");if(G=G.map((H)=>{if(mG(H))try{return`xn--${dG.encode(H)}`}catch{Y.error=!0}return H}),J){let H=G.join(".").length;if(H>253||H===0)Y.error=!0;for(let W=0;W<G.length;++W)if(G[W].length>63||G[W].length===0){Y.error=!0;break}}if(Y.error)return null;return G.join(".")}function V31(A,{checkHyphens:F=!1,checkBidi:B=!1,checkJoiners:D=!1,useSTD3ASCIIRules:$=!1,transitionalProcessing:J=!1,ignoreInvalidPunycode:X=!1}={}){let E=tP(A,{checkHyphens:F,checkBidi:B,checkJoiners:D,useSTD3ASCIIRules:$,transitionalProcessing:J,ignoreInvalidPunycode:X});return{domain:E.string,error:E.error}}oP.exports={toASCII:Z31,toUnicode:V31}});var cG=z((mP1,FI)=>{function lG(A){return A>=48&&A<=57}function AI(A){return A>=65&&A<=90||A>=97&&A<=122}function w31(A){return AI(A)||lG(A)}function L31(A){return lG(A)||A>=65&&A<=70||A>=97&&A<=102}FI.exports={isASCIIDigit:lG,isASCIIAlpha:AI,isASCIIAlphanumeric:w31,isASCIIHex:L31}});var OD=z((dP1,BI)=>{var R31=new TextEncoder,N31=new TextDecoder("utf-8",{ignoreBOM:!0});function P31(A){return R31.encode(A)}function I31(A){return N31.decode(A)}BI.exports={utf8Encode:P31,utf8DecodeWithoutBOM:I31}});var uD=z((lP1,GI)=>{var{isASCIIHex:DI}=cG(),{utf8Encode:$I}=OD();function g1(A){return A.codePointAt(0)}function M31(A){let F=A.toString(16).toUpperCase();if(F.length===1)F=`0${F}`;return`%${F}`}function JI(A){let F=new Uint8Array(A.byteLength),B=0;for(let D=0;D<A.byteLength;++D){let $=A[D];if($!==37)F[B++]=$;else if($===37&&(!DI(A[D+1])||!DI(A[D+2])))F[B++]=$;else{let J=parseInt(String.fromCodePoint(A[D+1],A[D+2]),16);F[B++]=J,D+=2}}return F.slice(0,B)}function j31(A){let F=$I(A);return JI(F)}function pG(A){return A<=31||A>126}var T31=new Set([g1(" "),g1('"'),g1("<"),g1(">"),g1("`")]);function k31(A){return pG(A)||T31.has(A)}var O31=new Set([g1(" "),g1('"'),g1("#"),g1("<"),g1(">")]);function iG(A){return pG(A)||O31.has(A)}function u31(A){return iG(A)||A===g1("'")}var S31=new Set([g1("?"),g1("`"),g1("{"),g1("}"),g1("^")]);function XI(A){return iG(A)||S31.has(A)}var f31=new Set([g1("/"),g1(":"),g1(";"),g1("="),g1("@"),g1("["),g1("\\"),g1("]"),g1("|")]);function EI(A){return XI(A)||f31.has(A)}var _31=new Set([g1("$"),g1("%"),g1("&"),g1("+"),g1(",")]);function x31(A){return EI(A)||_31.has(A)}var g31=new Set([g1("!"),g1("'"),g1("("),g1(")"),g1("~")]);function b31(A){return x31(A)||g31.has(A)}function YI(A,F){let B=$I(A),D="";for(let $ of B)if(!F($))D+=String.fromCharCode($);else D+=M31($);return D}function y31(A,F){return YI(String.fromCodePoint(A),F)}function h31(A,F,B=!1){let D="";for(let $ of A)if(B&&$===" ")D+="+";else D+=YI($,F);return D}GI.exports={isC0ControlPercentEncode:pG,isFragmentPercentEncode:k31,isQueryPercentEncode:iG,isSpecialQueryPercentEncode:u31,isPathPercentEncode:XI,isUserinfoPercentEncode:EI,isURLEncodedPercentEncode:b31,percentDecodeString:j31,percentDecodeBytes:JI,utf8PercentEncodeString:h31,utf8PercentEncodeCodePoint:y31}});var oG=z((q41,i2)=>{var v31=eP(),E2=cG(),{utf8DecodeWithoutBOM:m31}=OD(),{percentDecodeString:d31,utf8PercentEncodeCodePoint:fD,utf8PercentEncodeString:_D,isC0ControlPercentEncode:QI,isFragmentPercentEncode:l31,isQueryPercentEncode:c31,isSpecialQueryPercentEncode:p31,isPathPercentEncode:i31,isUserinfoPercentEncode:aG}=uD();function n(A){return A.codePointAt(0)}var KI={ftp:21,file:null,http:80,https:443,ws:80,wss:443},V1=Symbol("failure");function HI(A){return[...A].length}function WI(A,F){let B=A[F];return isNaN(B)?void 0:String.fromCodePoint(B)}function qI(A){return A==="."||A.toLowerCase()==="%2e"}function n31(A){return A=A.toLowerCase(),A===".."||A==="%2e."||A===".%2e"||A==="%2e%2e"}function s31(A,F){return E2.isASCIIAlpha(A)&&(F===n(":")||F===n("|"))}function zI(A){return A.length===2&&E2.isASCIIAlpha(A.codePointAt(0))&&(A[1]===":"||A[1]==="|")}function a31(A){return A.length===2&&E2.isASCIIAlpha(A.codePointAt(0))&&A[1]===":"}function UI(A){return A.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|<|>|\?|@|\[|\\|\]|\^|\|/u)!==-1}function r31(A){return UI(A)||A.search(/[\u0000-\u001F]|%|\u007F/u)!==-1}function SD(A){return KI[A]!==void 0}function X2(A){return SD(A.scheme)}function nG(A){return!SD(A.scheme)}function ZI(A){return KI[A]}function VI(A){if(A==="")return V1;let F=10;if(A.length>=2&&A.charAt(0)==="0"&&A.charAt(1).toLowerCase()==="x")A=A.substring(2),F=16;else if(A.length>=2&&A.charAt(0)==="0")A=A.substring(1),F=8;if(A==="")return 0;let B=/[^0-7]/u;if(F===10)B=/[^0-9]/u;if(F===16)B=/[^0-9A-Fa-f]/u;if(B.test(A))return V1;return parseInt(A,F)}function t31(A){let F=A.split(".");if(F[F.length-1]===""){if(F.length>1)F.pop()}if(F.length>4)return V1;let B=[];for(let J of F){let X=VI(J);if(X===V1)return V1;B.push(X)}for(let J=0;J<B.length-1;++J)if(B[J]>255)return V1;if(B[B.length-1]>=256**(5-B.length))return V1;let D=B.pop(),$=0;for(let J of B)D+=J*256**(3-$),++$;return D}function o31(A){let F="",B=A;for(let D=1;D<=4;++D){if(F=String(B%256)+F,D!==4)F=`.${F}`;B=Math.floor(B/256)}return F}function e31(A){let F=[0,0,0,0,0,0,0,0],B=0,D=null,$=0;if(A=Array.from(A,(J)=>J.codePointAt(0)),A[$]===n(":")){if(A[$+1]!==n(":"))return V1;$+=2,++B,D=B}while($<A.length){if(B===8)return V1;if(A[$]===n(":")){if(D!==null)return V1;++$,++B,D=B;continue}let J=0,X=0;while(X<4&&E2.isASCIIHex(A[$]))J=J*16+parseInt(WI(A,$),16),++$,++X;if(A[$]===n(".")){if(X===0)return V1;if($-=X,B>6)return V1;let E=0;while(A[$]!==void 0){let Y=null;if(E>0)if(A[$]===n(".")&&E<4)++$;else return V1;if(!E2.isASCIIDigit(A[$]))return V1;while(E2.isASCIIDigit(A[$])){let G=parseInt(WI(A,$));if(Y===null)Y=G;else if(Y===0)return V1;else Y=Y*10+G;if(Y>255)return V1;++$}if(F[B]=F[B]*256+Y,++E,E===2||E===4)++B}if(E!==4)return V1;break}else if(A[$]===n(":")){if(++$,A[$]===void 0)return V1}else if(A[$]!==void 0)return V1;F[B]=J,++B}if(D!==null){let J=B-D;B=7;while(B!==0&&J>0){let X=F[D+J-1];F[D+J-1]=F[B],F[B]=X,--B,--J}}else if(D===null&&B!==8)return V1;return F}function A41(A){let F="",B=D41(A),D=!1;for(let $=0;$<=7;++$){if(D&&A[$]===0)continue;else if(D)D=!1;if(B===$){F+=$===0?"::":":",D=!0;continue}if(F+=A[$].toString(16),$!==7)F+=":"}return F}function sG(A,F=!1){if(A[0]==="["){if(A[A.length-1]!=="]")return V1;return e31(A.substring(1,A.length-1))}if(F)return B41(A);let B=m31(d31(A)),D=$41(B);if(D===V1)return V1;if(F41(D))return t31(D);return D}function F41(A){let F=A.split(".");if(F[F.length-1]===""){if(F.length===1)return!1;F.pop()}let B=F[F.length-1];if(VI(B)!==V1)return!0;if(/^[0-9]+$/u.test(B))return!0;return!1}function B41(A){if(UI(A))return V1;return _D(A,QI)}function D41(A){let F=null,B=1,D=null,$=0;for(let J=0;J<A.length;++J)if(A[J]!==0){if($>B)F=D,B=$;D=null,$=0}else{if(D===null)D=J;++$}if($>B)return D;return F}function rG(A){if(typeof A==="number")return o31(A);if(A instanceof Array)return`[${A41(A)}]`;return A}function $41(A,F=!1){let B=v31.toASCII(A,{checkHyphens:F,checkBidi:!0,checkJoiners:!0,useSTD3ASCIIRules:F,transitionalProcessing:!1,verifyDNSLength:F,ignoreInvalidPunycode:!1});if(B===null)return V1;if(!F){if(B==="")return V1;if(r31(B))return V1}return B}function J41(A){let F=0,B=A.length;for(;F<B;++F)if(A.charCodeAt(F)>32)break;for(;B>F;--B)if(A.charCodeAt(B-1)>32)break;return A.substring(F,B)}function X41(A){return A.replace(/\u0009|\u000A|\u000D/ug,"")}function wI(A){let{path:F}=A;if(F.length===0)return;if(A.scheme==="file"&&F.length===1&&Y41(F[0]))return;F.pop()}function LI(A){return A.username!==""||A.password!==""}function E41(A){return A.host===null||A.host===""||A.scheme==="file"}function TA(A){return typeof A.path==="string"}function Y41(A){return/^[A-Za-z]:$/u.test(A)}function u0(A,F,B,D,$){if(this.pointer=0,this.input=A,this.base=F||null,this.encodingOverride=B||"utf-8",this.stateOverride=$,this.url=D,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null};let X=J41(this.input);if(X!==this.input)this.parseError=!0;this.input=X}let J=X41(this.input);if(J!==this.input)this.parseError=!0;this.input=J,this.state=$||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=Array.from(this.input,(X)=>X.codePointAt(0));for(;this.pointer<=this.input.length;++this.pointer){let X=this.input[this.pointer],E=isNaN(X)?void 0:String.fromCodePoint(X),Y=this[`parse ${this.state}`](X,E);if(!Y)break;else if(Y===V1){this.failure=!0;break}}}u0.prototype["parse scheme start"]=function A(F,B){if(E2.isASCIIAlpha(F))this.buffer+=B.toLowerCase(),this.state="scheme";else if(!this.stateOverride)this.state="no scheme",--this.pointer;else return this.parseError=!0,V1;return!0};u0.prototype["parse scheme"]=function A(F,B){if(E2.isASCIIAlphanumeric(F)||F===n("+")||F===n("-")||F===n("."))this.buffer+=B.toLowerCase();else if(F===n(":")){if(this.stateOverride){if(X2(this.url)&&!SD(this.buffer))return!1;if(!X2(this.url)&&SD(this.buffer))return!1;if((LI(this.url)||this.url.port!==null)&&this.buffer==="file")return!1;if(this.url.scheme==="file"&&this.url.host==="")return!1}if(this.url.scheme=this.buffer,this.stateOverride){if(this.url.port===ZI(this.url.scheme))this.url.port=null;return!1}if(this.buffer="",this.url.scheme==="file"){if(this.input[this.pointer+1]!==n("/")||this.input[this.pointer+2]!==n("/"))this.parseError=!0;this.state="file"}else if(X2(this.url)&&this.base!==null&&this.base.scheme===this.url.scheme)this.state="special relative or authority";else if(X2(this.url))this.state="special authority slashes";else if(this.input[this.pointer+1]===n("/"))this.state="path or authority",++this.pointer;else this.url.path="",this.state="opaque path"}else if(!this.stateOverride)this.buffer="",this.state="no scheme",this.pointer=-1;else return this.parseError=!0,V1;return!0};u0.prototype["parse no scheme"]=function A(F){if(this.base===null||TA(this.base)&&F!==n("#"))return V1;else if(TA(this.base)&&F===n("#"))this.url.scheme=this.base.scheme,this.url.path=this.base.path,this.url.query=this.base.query,this.url.fragment="",this.state="fragment";else if(this.base.scheme==="file")this.state="file",--this.pointer;else this.state="relative",--this.pointer;return!0};u0.prototype["parse special relative or authority"]=function A(F){if(F===n("/")&&this.input[this.pointer+1]===n("/"))this.state="special authority ignore slashes",++this.pointer;else this.parseError=!0,this.state="relative",--this.pointer;return!0};u0.prototype["parse path or authority"]=function A(F){if(F===n("/"))this.state="authority";else this.state="path",--this.pointer;return!0};u0.prototype["parse relative"]=function A(F){if(this.url.scheme=this.base.scheme,F===n("/"))this.state="relative slash";else if(X2(this.url)&&F===n("\\"))this.parseError=!0,this.state="relative slash";else if(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,F===n("?"))this.url.query="",this.state="query";else if(F===n("#"))this.url.fragment="",this.state="fragment";else if(!isNaN(F))this.url.query=null,this.url.path.pop(),this.state="path",--this.pointer;return!0};u0.prototype["parse relative slash"]=function A(F){if(X2(this.url)&&(F===n("/")||F===n("\\"))){if(F===n("\\"))this.parseError=!0;this.state="special authority ignore slashes"}else if(F===n("/"))this.state="authority";else this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer;return!0};u0.prototype["parse special authority slashes"]=function A(F){if(F===n("/")&&this.input[this.pointer+1]===n("/"))this.state="special authority ignore slashes",++this.pointer;else this.parseError=!0,this.state="special authority ignore slashes",--this.pointer;return!0};u0.prototype["parse special authority ignore slashes"]=function A(F){if(F!==n("/")&&F!==n("\\"))this.state="authority",--this.pointer;else this.parseError=!0;return!0};u0.prototype["parse authority"]=function A(F,B){if(F===n("@")){if(this.parseError=!0,this.atFlag)this.buffer=`%40${this.buffer}`;this.atFlag=!0;let D=HI(this.buffer);for(let $=0;$<D;++$){let J=this.buffer.codePointAt($);if(J===n(":")&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}let X=fD(J,aG);if(this.passwordTokenSeenFlag)this.url.password+=X;else this.url.username+=X}this.buffer=""}else if(isNaN(F)||F===n("/")||F===n("?")||F===n("#")||X2(this.url)&&F===n("\\")){if(this.atFlag&&this.buffer==="")return this.parseError=!0,V1;this.pointer-=HI(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=B;return!0};u0.prototype["parse hostname"]=u0.prototype["parse host"]=function A(F,B){if(this.stateOverride&&this.url.scheme==="file")--this.pointer,this.state="file host";else if(F===n(":")&&!this.arrFlag){if(this.buffer==="")return this.parseError=!0,V1;if(this.stateOverride==="hostname")return!1;let D=sG(this.buffer,nG(this.url));if(D===V1)return V1;this.url.host=D,this.buffer="",this.state="port"}else if(isNaN(F)||F===n("/")||F===n("?")||F===n("#")||X2(this.url)&&F===n("\\")){if(--this.pointer,X2(this.url)&&this.buffer==="")return this.parseError=!0,V1;else if(this.stateOverride&&this.buffer===""&&(LI(this.url)||this.url.port!==null))return this.parseError=!0,!1;let D=sG(this.buffer,nG(this.url));if(D===V1)return V1;if(this.url.host=D,this.buffer="",this.state="path start",this.stateOverride)return!1}else{if(F===n("["))this.arrFlag=!0;else if(F===n("]"))this.arrFlag=!1;this.buffer+=B}return!0};u0.prototype["parse port"]=function A(F,B){if(E2.isASCIIDigit(F))this.buffer+=B;else if(isNaN(F)||F===n("/")||F===n("?")||F===n("#")||X2(this.url)&&F===n("\\")||this.stateOverride){if(this.buffer!==""){let D=parseInt(this.buffer);if(D>65535)return this.parseError=!0,V1;this.url.port=D===ZI(this.url.scheme)?null:D,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}else return this.parseError=!0,V1;return!0};var G41=new Set([n("/"),n("\\"),n("?"),n("#")]);function RI(A,F){let B=A.length-F;return B>=2&&s31(A[F],A[F+1])&&(B===2||G41.has(A[F+2]))}u0.prototype["parse file"]=function A(F){if(this.url.scheme="file",this.url.host="",F===n("/")||F===n("\\")){if(F===n("\\"))this.parseError=!0;this.state="file slash"}else if(this.base!==null&&this.base.scheme==="file"){if(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,F===n("?"))this.url.query="",this.state="query";else if(F===n("#"))this.url.fragment="",this.state="fragment";else if(!isNaN(F)){if(this.url.query=null,!RI(this.input,this.pointer))wI(this.url);else this.parseError=!0,this.url.path=[];this.state="path",--this.pointer}}else this.state="path",--this.pointer;return!0};u0.prototype["parse file slash"]=function A(F){if(F===n("/")||F===n("\\")){if(F===n("\\"))this.parseError=!0;this.state="file host"}else{if(this.base!==null&&this.base.scheme==="file"){if(!RI(this.input,this.pointer)&&a31(this.base.path[0]))this.url.path.push(this.base.path[0]);this.url.host=this.base.host}this.state="path",--this.pointer}return!0};u0.prototype["parse file host"]=function A(F,B){if(isNaN(F)||F===n("/")||F===n("\\")||F===n("?")||F===n("#"))if(--this.pointer,!this.stateOverride&&zI(this.buffer))this.parseError=!0,this.state="path";else if(this.buffer===""){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let D=sG(this.buffer,nG(this.url));if(D===V1)return V1;if(D==="localhost")D="";if(this.url.host=D,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=B;return!0};u0.prototype["parse path start"]=function A(F){if(X2(this.url)){if(F===n("\\"))this.parseError=!0;if(this.state="path",F!==n("/")&&F!==n("\\"))--this.pointer}else if(!this.stateOverride&&F===n("?"))this.url.query="",this.state="query";else if(!this.stateOverride&&F===n("#"))this.url.fragment="",this.state="fragment";else if(F!==void 0){if(this.state="path",F!==n("/"))--this.pointer}else if(this.stateOverride&&this.url.host===null)this.url.path.push("");return!0};u0.prototype["parse path"]=function A(F){if(isNaN(F)||F===n("/")||X2(this.url)&&F===n("\\")||!this.stateOverride&&(F===n("?")||F===n("#"))){if(X2(this.url)&&F===n("\\"))this.parseError=!0;if(n31(this.buffer)){if(wI(this.url),F!==n("/")&&!(X2(this.url)&&F===n("\\")))this.url.path.push("")}else if(qI(this.buffer)&&F!==n("/")&&!(X2(this.url)&&F===n("\\")))this.url.path.push("");else if(!qI(this.buffer)){if(this.url.scheme==="file"&&this.url.path.length===0&&zI(this.buffer))this.buffer=`${this.buffer[0]}:`;this.url.path.push(this.buffer)}if(this.buffer="",F===n("?"))this.url.query="",this.state="query";if(F===n("#"))this.url.fragment="",this.state="fragment"}else{if(F===n("%")&&(!E2.isASCIIHex(this.input[this.pointer+1])||!E2.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.buffer+=fD(F,i31)}return!0};u0.prototype["parse opaque path"]=function A(F){if(F===n("?"))this.url.query="",this.state="query";else if(F===n("#"))this.url.fragment="",this.state="fragment";else if(F===n(" ")){let B=this.input[this.pointer+1];if(B===n("?")||B===n("#"))this.url.path+="%20";else this.url.path+=" "}else{if(!isNaN(F)&&F!==n("%"))this.parseError=!0;if(F===n("%")&&(!E2.isASCIIHex(this.input[this.pointer+1])||!E2.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;if(!isNaN(F))this.url.path+=fD(F,QI)}return!0};u0.prototype["parse query"]=function A(F,B){if(!X2(this.url)||this.url.scheme==="ws"||this.url.scheme==="wss")this.encodingOverride="utf-8";if(!this.stateOverride&&F===n("#")||isNaN(F)){let D=X2(this.url)?p31:c31;if(this.url.query+=_D(this.buffer,D),this.buffer="",F===n("#"))this.url.fragment="",this.state="fragment"}else if(!isNaN(F)){if(F===n("%")&&(!E2.isASCIIHex(this.input[this.pointer+1])||!E2.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.buffer+=B}return!0};u0.prototype["parse fragment"]=function A(F){if(!isNaN(F)){if(F===n("%")&&(!E2.isASCIIHex(this.input[this.pointer+1])||!E2.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.url.fragment+=fD(F,l31)}return!0};function H41(A,F){let B=`${A.scheme}:`;if(A.host!==null){if(B+="//",A.username!==""||A.password!==""){if(B+=A.username,A.password!=="")B+=`:${A.password}`;B+="@"}if(B+=rG(A.host),A.port!==null)B+=`:${A.port}`}if(A.host===null&&!TA(A)&&A.path.length>1&&A.path[0]==="")B+="/.";if(B+=tG(A),A.query!==null)B+=`?${A.query}`;if(!F&&A.fragment!==null)B+=`#${A.fragment}`;return B}function W41(A){let F=`${A.scheme}://`;if(F+=rG(A.host),A.port!==null)F+=`:${A.port}`;return F}function tG(A){if(TA(A))return A.path;let F="";for(let B of A.path)F+=`/${B}`;return F}q41.serializeURL=H41;q41.serializePath=tG;q41.serializeURLOrigin=function(A){switch(A.scheme){case"blob":{let F=q41.parseURL(tG(A));if(F===null)return"null";if(F.scheme!=="http"&&F.scheme!=="https")return"null";return q41.serializeURLOrigin(F)}case"ftp":case"http":case"https":case"ws":case"wss":return W41({scheme:A.scheme,host:A.host,port:A.port});case"file":return"null";default:return"null"}};q41.basicURLParse=function(A,F){if(F===void 0)F={};let B=new u0(A,F.baseURL,F.encodingOverride,F.url,F.stateOverride);if(B.failure)return null;return B.url};q41.setTheUsername=function(A,F){A.username=_D(F,aG)};q41.setThePassword=function(A,F){A.password=_D(F,aG)};q41.serializeHost=rG;q41.cannotHaveAUsernamePasswordPort=E41;q41.hasAnOpaquePath=TA;q41.serializeInteger=function(A){return String(A)};q41.parseURL=function(A,F){if(F===void 0)F={};return q41.basicURLParse(A,{baseURL:F.baseURL,encodingOverride:F.encodingOverride})}});var eG=z((cP1,OI)=>{var{utf8Encode:R41,utf8DecodeWithoutBOM:PI}=OD(),{percentDecodeBytes:II,utf8PercentEncodeString:MI,isURLEncodedPercentEncode:jI}=uD();function TI(A){return A.codePointAt(0)}function N41(A){let F=M41(A,TI("&")),B=[];for(let D of F){if(D.length===0)continue;let $,J,X=D.indexOf(TI("="));if(X>=0)$=D.slice(0,X),J=D.slice(X+1);else $=D,J=new Uint8Array(0);$=kI($,43,32),J=kI(J,43,32);let E=PI(II($)),Y=PI(II(J));B.push([E,Y])}return B}function P41(A){return N41(R41(A))}function I41(A){let F="";for(let[B,D]of A.entries()){let $=MI(D[0],jI,!0),J=MI(D[1],jI,!0);if(B!==0)F+="&";F+=`${$}=${J}`}return F}function M41(A,F){let B=[],D=0,$=A.indexOf(F);while($>=0)B.push(A.slice(D,$)),D=$+1,$=A.indexOf(F,D);if(D!==A.length)B.push(A.slice(D));return B}function kI(A,F,B){let D=A.indexOf(F);while(D>=0)A[D]=B,D=A.indexOf(F,D+1);return A}OI.exports={parseUrlencodedString:P41,serializeUrlencoded:I41}});var SI=z((j41)=>{var uI=jD(),xD=kD();j41.convert=(A,F,{context:B="The provided value"}={})=>{if(typeof F!=="function")throw new A.TypeError(B+" is not a function");function D(...$){let J=xD.tryWrapperForImpl(this),X;for(let E=0;E<$.length;E++)$[E]=xD.tryWrapperForImpl($[E]);return X=Reflect.apply(F,J,$),X=uI.any(X,{context:B,globals:A}),X}return D.construct=(...$)=>{for(let X=0;X<$.length;X++)$[X]=xD.tryWrapperForImpl($[X]);let J=Reflect.construct(F,$);return J=uI.any(J,{context:B,globals:A}),J},D[xD.wrapperSymbol]=F,D.objectReference=F,D}});var fI=z((k41)=>{var AH=eG();k41.implementation=class A{constructor(F,B,{doNotStripQMark:D=!1}){let $=B[0];if(this._list=[],this._url=null,!D&&typeof $==="string"&&$[0]==="?")$=$.slice(1);if(Array.isArray($))for(let J of $){if(J.length!==2)throw new TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element does not contain exactly two elements.");this._list.push([J[0],J[1]])}else if(typeof $==="object"&&Object.getPrototypeOf($)===null)for(let J of Object.keys($)){let X=$[J];this._list.push([J,X])}else this._list=AH.parseUrlencodedString($)}_updateSteps(){if(this._url!==null){let F=AH.serializeUrlencoded(this._list);if(F==="")F=null;this._url._url.query=F}}get size(){return this._list.length}append(F,B){this._list.push([F,B]),this._updateSteps()}delete(F,B){let D=0;while(D<this._list.length)if(this._list[D][0]===F&&(B===void 0||this._list[D][1]===B))this._list.splice(D,1);else D++;this._updateSteps()}get(F){for(let B of this._list)if(B[0]===F)return B[1];return null}getAll(F){let B=[];for(let D of this._list)if(D[0]===F)B.push(D[1]);return B}has(F,B){for(let D of this._list)if(D[0]===F&&(B===void 0||D[1]===B))return!0;return!1}set(F,B){let D=!1,$=0;while($<this._list.length)if(this._list[$][0]===F)if(D)this._list.splice($,1);else D=!0,this._list[$][1]=B,$++;else $++;if(!D)this._list.push([F,B]);this._updateSteps()}sort(){this._list.sort((F,B)=>{if(F[0]<B[0])return-1;if(F[0]>B[0])return 1;return 0}),this._updateSteps()}[Symbol.iterator](){return this._list[Symbol.iterator]()}toString(){return AH.serializeUrlencoded(this._list)}}});var BH=z((f41)=>{var D6=jD(),D0=kD(),u41=SI(),_I=D0.newObjectInRealm,m0=D0.implSymbol,xI=D0.ctorRegistrySymbol;f41.is=(A)=>{return D0.isObject(A)&&D0.hasOwn(A,m0)&&A[m0]instanceof $9.implementation};f41.isImpl=(A)=>{return D0.isObject(A)&&A instanceof $9.implementation};f41.convert=(A,F,{context:B="The provided value"}={})=>{if(f41.is(F))return D0.implForWrapper(F);throw new A.TypeError(`${B} is not of type 'URLSearchParams'.`)};f41.createDefaultIterator=(A,F,B)=>{let $=A[xI]["URLSearchParams Iterator"],J=Object.create($);return Object.defineProperty(J,D0.iterInternalSymbol,{value:{target:F,kind:B,index:0},configurable:!0}),J};function gI(A,F){let B;if(F!==void 0)B=F.prototype;if(!D0.isObject(B))B=A[xI].URLSearchParams.prototype;return Object.create(B)}f41.create=(A,F,B)=>{let D=gI(A);return f41.setup(D,A,F,B)};f41.createImpl=(A,F,B)=>{let D=f41.create(A,F,B);return D0.implForWrapper(D)};f41._internalSetup=(A,F)=>{};f41.setup=(A,F,B=[],D={})=>{if(D.wrapper=A,f41._internalSetup(A,F),Object.defineProperty(A,m0,{value:new $9.implementation(F,B,D),configurable:!0}),A[m0][D0.wrapperSymbol]=A,$9.init)$9.init(A[m0]);return A};f41.new=(A,F)=>{let B=gI(A,F);if(f41._internalSetup(B,A),Object.defineProperty(B,m0,{value:Object.create($9.implementation.prototype),configurable:!0}),B[m0][D0.wrapperSymbol]=B,$9.init)$9.init(B[m0]);return B[m0]};var S41=new Set(["Window","Worker"]);f41.install=(A,F)=>{if(!F.some(($)=>S41.has($)))return;let B=D0.initCtorRegistry(A);class D{constructor(){let $=[];{let J=arguments[0];if(J!==void 0)if(D0.isObject(J))if(J[Symbol.iterator]!==void 0)if(!D0.isObject(J))throw new A.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence is not an iterable object.");else{let X=[],E=J;for(let Y of E){if(!D0.isObject(Y))throw new A.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element is not an iterable object.");else{let G=[],H=Y;for(let W of H)W=D6.USVString(W,{context:"Failed to construct 'URLSearchParams': parameter 1 sequence's element's element",globals:A}),G.push(W);Y=G}X.push(Y)}J=X}else if(!D0.isObject(J))throw new A.TypeError("Failed to construct 'URLSearchParams': parameter 1 record is not an object.");else{let X=Object.create(null);for(let E of Reflect.ownKeys(J)){let Y=Object.getOwnPropertyDescriptor(J,E);if(Y&&Y.enumerable){let G=E;G=D6.USVString(G,{context:"Failed to construct 'URLSearchParams': parameter 1 record's key",globals:A});let H=J[E];H=D6.USVString(H,{context:"Failed to construct 'URLSearchParams': parameter 1 record's value",globals:A}),X[G]=H}}J=X}else J=D6.USVString(J,{context:"Failed to construct 'URLSearchParams': parameter 1",globals:A});else J="";$.push(J)}return f41.setup(Object.create(new.target.prototype),A,$)}append($,J){let X=this!==null&&this!==void 0?this:A;if(!f41.is(X))throw new A.TypeError("'append' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new A.TypeError(`Failed to execute 'append' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let E=[];{let Y=arguments[0];Y=D6.USVString(Y,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 1",globals:A}),E.push(Y)}{let Y=arguments[1];Y=D6.USVString(Y,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 2",globals:A}),E.push(Y)}return D0.tryWrapperForImpl(X[m0].append(...E))}delete($){let J=this!==null&&this!==void 0?this:A;if(!f41.is(J))throw new A.TypeError("'delete' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new A.TypeError(`Failed to execute 'delete' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let X=[];{let E=arguments[0];E=D6.USVString(E,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 1",globals:A}),X.push(E)}{let E=arguments[1];if(E!==void 0)E=D6.USVString(E,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 2",globals:A});X.push(E)}return D0.tryWrapperForImpl(J[m0].delete(...X))}get($){let J=this!==null&&this!==void 0?this:A;if(!f41.is(J))throw new A.TypeError("'get' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new A.TypeError(`Failed to execute 'get' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let X=[];{let E=arguments[0];E=D6.USVString(E,{context:"Failed to execute 'get' on 'URLSearchParams': parameter 1",globals:A}),X.push(E)}return J[m0].get(...X)}getAll($){let J=this!==null&&this!==void 0?this:A;if(!f41.is(J))throw new A.TypeError("'getAll' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new A.TypeError(`Failed to execute 'getAll' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let X=[];{let E=arguments[0];E=D6.USVString(E,{context:"Failed to execute 'getAll' on 'URLSearchParams': parameter 1",globals:A}),X.push(E)}return D0.tryWrapperForImpl(J[m0].getAll(...X))}has($){let J=this!==null&&this!==void 0?this:A;if(!f41.is(J))throw new A.TypeError("'has' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new A.TypeError(`Failed to execute 'has' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let X=[];{let E=arguments[0];E=D6.USVString(E,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 1",globals:A}),X.push(E)}{let E=arguments[1];if(E!==void 0)E=D6.USVString(E,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 2",globals:A});X.push(E)}return J[m0].has(...X)}set($,J){let X=this!==null&&this!==void 0?this:A;if(!f41.is(X))throw new A.TypeError("'set' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new A.TypeError(`Failed to execute 'set' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let E=[];{let Y=arguments[0];Y=D6.USVString(Y,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 1",globals:A}),E.push(Y)}{let Y=arguments[1];Y=D6.USVString(Y,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 2",globals:A}),E.push(Y)}return D0.tryWrapperForImpl(X[m0].set(...E))}sort(){let $=this!==null&&this!==void 0?this:A;if(!f41.is($))throw new A.TypeError("'sort' called on an object that is not a valid instance of URLSearchParams.");return D0.tryWrapperForImpl($[m0].sort())}toString(){let $=this!==null&&this!==void 0?this:A;if(!f41.is($))throw new A.TypeError("'toString' called on an object that is not a valid instance of URLSearchParams.");return $[m0].toString()}keys(){if(!f41.is(this))throw new A.TypeError("'keys' called on an object that is not a valid instance of URLSearchParams.");return f41.createDefaultIterator(A,this,"key")}values(){if(!f41.is(this))throw new A.TypeError("'values' called on an object that is not a valid instance of URLSearchParams.");return f41.createDefaultIterator(A,this,"value")}entries(){if(!f41.is(this))throw new A.TypeError("'entries' called on an object that is not a valid instance of URLSearchParams.");return f41.createDefaultIterator(A,this,"key+value")}forEach($){if(!f41.is(this))throw new A.TypeError("'forEach' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new A.TypeError("Failed to execute 'forEach' on 'iterable': 1 argument required, but only 0 present.");$=u41.convert(A,$,{context:"Failed to execute 'forEach' on 'iterable': The callback provided as parameter 1"});let J=arguments[1],X=Array.from(this[m0]),E=0;while(E<X.length){let[Y,G]=X[E].map(D0.tryWrapperForImpl);$.call(J,G,Y,this),X=Array.from(this[m0]),E++}}get size(){let $=this!==null&&this!==void 0?this:A;if(!f41.is($))throw new A.TypeError("'get size' called on an object that is not a valid instance of URLSearchParams.");return $[m0].size}}Object.defineProperties(D.prototype,{append:{enumerable:!0},delete:{enumerable:!0},get:{enumerable:!0},getAll:{enumerable:!0},has:{enumerable:!0},set:{enumerable:!0},sort:{enumerable:!0},toString:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0},forEach:{enumerable:!0},size:{enumerable:!0},[Symbol.toStringTag]:{value:"URLSearchParams",configurable:!0},[Symbol.iterator]:{value:D.prototype.entries,configurable:!0,writable:!0}}),B.URLSearchParams=D,B["URLSearchParams Iterator"]=Object.create(B["%IteratorPrototype%"],{[Symbol.toStringTag]:{configurable:!0,value:"URLSearchParams Iterator"}}),D0.define(B["URLSearchParams Iterator"],{next(){let $=this&&this[D0.iterInternalSymbol];if(!$)throw new A.TypeError("next() called on a value that is not a URLSearchParams iterator object");let{target:J,kind:X,index:E}=$,Y=Array.from(J[m0]),G=Y.length;if(E>=G)return _I(A,{value:void 0,done:!0});let H=Y[E];return $.index=E+1,_I(A,D0.iteratorResult(H.map(D0.tryWrapperForImpl),X))}}),Object.defineProperty(A,"URLSearchParams",{configurable:!0,writable:!0,value:D})};var $9=fI()});var vI=z((v41)=>{var t1=oG(),hI=eG(),h41=BH();v41.implementation=class A{constructor(F,[B,D]){let $=null;if(D!==void 0){if($=t1.basicURLParse(D),$===null)throw new TypeError(`Invalid base URL: ${D}`)}let J=t1.basicURLParse(B,{baseURL:$});if(J===null)throw new TypeError(`Invalid URL: ${B}`);let X=J.query!==null?J.query:"";this._url=J,this._query=h41.createImpl(F,[X],{doNotStripQMark:!0}),this._query._url=this}static parse(F,B,D){try{return new A(F,[B,D])}catch{return null}}static canParse(F,B){let D=null;if(B!==void 0){if(D=t1.basicURLParse(B),D===null)return!1}if(t1.basicURLParse(F,{baseURL:D})===null)return!1;return!0}get href(){return t1.serializeURL(this._url)}set href(F){let B=t1.basicURLParse(F);if(B===null)throw new TypeError(`Invalid URL: ${F}`);this._url=B,this._query._list.splice(0);let{query:D}=B;if(D!==null)this._query._list=hI.parseUrlencodedString(D)}get origin(){return t1.serializeURLOrigin(this._url)}get protocol(){return`${this._url.scheme}:`}set protocol(F){t1.basicURLParse(`${F}:`,{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(F){if(t1.cannotHaveAUsernamePasswordPort(this._url))return;t1.setTheUsername(this._url,F)}get password(){return this._url.password}set password(F){if(t1.cannotHaveAUsernamePasswordPort(this._url))return;t1.setThePassword(this._url,F)}get host(){let F=this._url;if(F.host===null)return"";if(F.port===null)return t1.serializeHost(F.host);return`${t1.serializeHost(F.host)}:${t1.serializeInteger(F.port)}`}set host(F){if(t1.hasAnOpaquePath(this._url))return;t1.basicURLParse(F,{url:this._url,stateOverride:"host"})}get hostname(){if(this._url.host===null)return"";return t1.serializeHost(this._url.host)}set hostname(F){if(t1.hasAnOpaquePath(this._url))return;t1.basicURLParse(F,{url:this._url,stateOverride:"hostname"})}get port(){if(this._url.port===null)return"";return t1.serializeInteger(this._url.port)}set port(F){if(t1.cannotHaveAUsernamePasswordPort(this._url))return;if(F==="")this._url.port=null;else t1.basicURLParse(F,{url:this._url,stateOverride:"port"})}get pathname(){return t1.serializePath(this._url)}set pathname(F){if(t1.hasAnOpaquePath(this._url))return;this._url.path=[],t1.basicURLParse(F,{url:this._url,stateOverride:"path start"})}get search(){if(this._url.query===null||this._url.query==="")return"";return`?${this._url.query}`}set search(F){let B=this._url;if(F===""){B.query=null,this._query._list=[];return}let D=F[0]==="?"?F.substring(1):F;B.query="",t1.basicURLParse(D,{url:B,stateOverride:"query"}),this._query._list=hI.parseUrlencodedString(D)}get searchParams(){return this._query}get hash(){if(this._url.fragment===null||this._url.fragment==="")return"";return`#${this._url.fragment}`}set hash(F){if(F===""){this._url.fragment=null;return}let B=F[0]==="#"?F.substring(1):F;this._url.fragment="",t1.basicURLParse(B,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}}});var cI=z((c41)=>{var u2=jD(),$6=kD(),d1=$6.implSymbol,d41=$6.ctorRegistrySymbol;c41.is=(A)=>{return $6.isObject(A)&&$6.hasOwn(A,d1)&&A[d1]instanceof l3.implementation};c41.isImpl=(A)=>{return $6.isObject(A)&&A instanceof l3.implementation};c41.convert=(A,F,{context:B="The provided value"}={})=>{if(c41.is(F))return $6.implForWrapper(F);throw new A.TypeError(`${B} is not of type 'URL'.`)};function mI(A,F){let B;if(F!==void 0)B=F.prototype;if(!$6.isObject(B))B=A[d41].URL.prototype;return Object.create(B)}c41.create=(A,F,B)=>{let D=mI(A);return c41.setup(D,A,F,B)};c41.createImpl=(A,F,B)=>{let D=c41.create(A,F,B);return $6.implForWrapper(D)};c41._internalSetup=(A,F)=>{};c41.setup=(A,F,B=[],D={})=>{if(D.wrapper=A,c41._internalSetup(A,F),Object.defineProperty(A,d1,{value:new l3.implementation(F,B,D),configurable:!0}),A[d1][$6.wrapperSymbol]=A,l3.init)l3.init(A[d1]);return A};c41.new=(A,F)=>{let B=mI(A,F);if(c41._internalSetup(B,A),Object.defineProperty(B,d1,{value:Object.create(l3.implementation.prototype),configurable:!0}),B[d1][$6.wrapperSymbol]=B,l3.init)l3.init(B[d1]);return B[d1]};var l41=new Set(["Window","Worker"]);c41.install=(A,F)=>{if(!F.some(($)=>l41.has($)))return;let B=$6.initCtorRegistry(A);class D{constructor($){if(arguments.length<1)throw new A.TypeError(`Failed to construct 'URL': 1 argument required, but only ${arguments.length} present.`);let J=[];{let X=arguments[0];X=u2.USVString(X,{context:"Failed to construct 'URL': parameter 1",globals:A}),J.push(X)}{let X=arguments[1];if(X!==void 0)X=u2.USVString(X,{context:"Failed to construct 'URL': parameter 2",globals:A});J.push(X)}return c41.setup(Object.create(new.target.prototype),A,J)}toJSON(){let $=this!==null&&this!==void 0?this:A;if(!c41.is($))throw new A.TypeError("'toJSON' called on an object that is not a valid instance of URL.");return $[d1].toJSON()}get href(){let $=this!==null&&this!==void 0?this:A;if(!c41.is($))throw new A.TypeError("'get href' called on an object that is not a valid instance of URL.");return $[d1].href}set href($){let J=this!==null&&this!==void 0?this:A;if(!c41.is(J))throw new A.TypeError("'set href' called on an object that is not a valid instance of URL.");$=u2.USVString($,{context:"Failed to set the 'href' property on 'URL': The provided value",globals:A}),J[d1].href=$}toString(){let $=this;if(!c41.is($))throw new A.TypeError("'toString' called on an object that is not a valid instance of URL.");return $[d1].href}get origin(){let $=this!==null&&this!==void 0?this:A;if(!c41.is($))throw new A.TypeError("'get origin' called on an object that is not a valid instance of URL.");return $[d1].origin}get protocol(){let $=this!==null&&this!==void 0?this:A;if(!c41.is($))throw new A.TypeError("'get protocol' called on an object that is not a valid instance of URL.");return $[d1].protocol}set protocol($){let J=this!==null&&this!==void 0?this:A;if(!c41.is(J))throw new A.TypeError("'set protocol' called on an object that is not a valid instance of URL.");$=u2.USVString($,{context:"Failed to set the 'protocol' property on 'URL': The provided value",globals:A}),J[d1].protocol=$}get username(){let $=this!==null&&this!==void 0?this:A;if(!c41.is($))throw new A.TypeError("'get username' called on an object that is not a valid instance of URL.");return $[d1].username}set username($){let J=this!==null&&this!==void 0?this:A;if(!c41.is(J))throw new A.TypeError("'set username' called on an object that is not a valid instance of URL.");$=u2.USVString($,{context:"Failed to set the 'username' property on 'URL': The provided value",globals:A}),J[d1].username=$}get password(){let $=this!==null&&this!==void 0?this:A;if(!c41.is($))throw new A.TypeError("'get password' called on an object that is not a valid instance of URL.");return $[d1].password}set password($){let J=this!==null&&this!==void 0?this:A;if(!c41.is(J))throw new A.TypeError("'set password' called on an object that is not a valid instance of URL.");$=u2.USVString($,{context:"Failed to set the 'password' property on 'URL': The provided value",globals:A}),J[d1].password=$}get host(){let $=this!==null&&this!==void 0?this:A;if(!c41.is($))throw new A.TypeError("'get host' called on an object that is not a valid instance of URL.");return $[d1].host}set host($){let J=this!==null&&this!==void 0?this:A;if(!c41.is(J))throw new A.TypeError("'set host' called on an object that is not a valid instance of URL.");$=u2.USVString($,{context:"Failed to set the 'host' property on 'URL': The provided value",globals:A}),J[d1].host=$}get hostname(){let $=this!==null&&this!==void 0?this:A;if(!c41.is($))throw new A.TypeError("'get hostname' called on an object that is not a valid instance of URL.");return $[d1].hostname}set hostname($){let J=this!==null&&this!==void 0?this:A;if(!c41.is(J))throw new A.TypeError("'set hostname' called on an object that is not a valid instance of URL.");$=u2.USVString($,{context:"Failed to set the 'hostname' property on 'URL': The provided value",globals:A}),J[d1].hostname=$}get port(){let $=this!==null&&this!==void 0?this:A;if(!c41.is($))throw new A.TypeError("'get port' called on an object that is not a valid instance of URL.");return $[d1].port}set port($){let J=this!==null&&this!==void 0?this:A;if(!c41.is(J))throw new A.TypeError("'set port' called on an object that is not a valid instance of URL.");$=u2.USVString($,{context:"Failed to set the 'port' property on 'URL': The provided value",globals:A}),J[d1].port=$}get pathname(){let $=this!==null&&this!==void 0?this:A;if(!c41.is($))throw new A.TypeError("'get pathname' called on an object that is not a valid instance of URL.");return $[d1].pathname}set pathname($){let J=this!==null&&this!==void 0?this:A;if(!c41.is(J))throw new A.TypeError("'set pathname' called on an object that is not a valid instance of URL.");$=u2.USVString($,{context:"Failed to set the 'pathname' property on 'URL': The provided value",globals:A}),J[d1].pathname=$}get search(){let $=this!==null&&this!==void 0?this:A;if(!c41.is($))throw new A.TypeError("'get search' called on an object that is not a valid instance of URL.");return $[d1].search}set search($){let J=this!==null&&this!==void 0?this:A;if(!c41.is(J))throw new A.TypeError("'set search' called on an object that is not a valid instance of URL.");$=u2.USVString($,{context:"Failed to set the 'search' property on 'URL': The provided value",globals:A}),J[d1].search=$}get searchParams(){let $=this!==null&&this!==void 0?this:A;if(!c41.is($))throw new A.TypeError("'get searchParams' called on an object that is not a valid instance of URL.");return $6.getSameObject(this,"searchParams",()=>{return $6.tryWrapperForImpl($[d1].searchParams)})}get hash(){let $=this!==null&&this!==void 0?this:A;if(!c41.is($))throw new A.TypeError("'get hash' called on an object that is not a valid instance of URL.");return $[d1].hash}set hash($){let J=this!==null&&this!==void 0?this:A;if(!c41.is(J))throw new A.TypeError("'set hash' called on an object that is not a valid instance of URL.");$=u2.USVString($,{context:"Failed to set the 'hash' property on 'URL': The provided value",globals:A}),J[d1].hash=$}static parse($){if(arguments.length<1)throw new A.TypeError(`Failed to execute 'parse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let J=[];{let X=arguments[0];X=u2.USVString(X,{context:"Failed to execute 'parse' on 'URL': parameter 1",globals:A}),J.push(X)}{let X=arguments[1];if(X!==void 0)X=u2.USVString(X,{context:"Failed to execute 'parse' on 'URL': parameter 2",globals:A});J.push(X)}return $6.tryWrapperForImpl(l3.implementation.parse(A,...J))}static canParse($){if(arguments.length<1)throw new A.TypeError(`Failed to execute 'canParse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let J=[];{let X=arguments[0];X=u2.USVString(X,{context:"Failed to execute 'canParse' on 'URL': parameter 1",globals:A}),J.push(X)}{let X=arguments[1];if(X!==void 0)X=u2.USVString(X,{context:"Failed to execute 'canParse' on 'URL': parameter 2",globals:A});J.push(X)}return l3.implementation.canParse(...J)}}if(Object.defineProperties(D.prototype,{toJSON:{enumerable:!0},href:{enumerable:!0},toString:{enumerable:!0},origin:{enumerable:!0},protocol:{enumerable:!0},username:{enumerable:!0},password:{enumerable:!0},host:{enumerable:!0},hostname:{enumerable:!0},port:{enumerable:!0},pathname:{enumerable:!0},search:{enumerable:!0},searchParams:{enumerable:!0},hash:{enumerable:!0},[Symbol.toStringTag]:{value:"URL",configurable:!0}}),Object.defineProperties(D,{parse:{enumerable:!0},canParse:{enumerable:!0}}),B.URL=D,Object.defineProperty(A,"URL",{configurable:!0,writable:!0,value:D}),F.includes("Window"))Object.defineProperty(A,"webkitURL",{configurable:!0,writable:!0,value:D})};var l3=vI()});var pI=z((o41)=>{var r41=cI(),t41=BH();o41.URL=r41;o41.URLSearchParams=t41});var nI=z((D91)=>{var{URL:F91,URLSearchParams:B91}=pI(),Z3=oG(),iI=uD(),bD={Array,Object,Promise,String,TypeError};F91.install(bD,["Window"]);B91.install(bD,["Window"]);D91.URL=bD.URL;D91.URLSearchParams=bD.URLSearchParams;D91.parseURL=Z3.parseURL;D91.basicURLParse=Z3.basicURLParse;D91.serializeURL=Z3.serializeURL;D91.serializePath=Z3.serializePath;D91.serializeHost=Z3.serializeHost;D91.serializeInteger=Z3.serializeInteger;D91.serializeURLOrigin=Z3.serializeURLOrigin;D91.setTheUsername=Z3.setTheUsername;D91.setThePassword=Z3.setThePassword;D91.cannotHaveAUsernamePasswordPort=Z3.cannotHaveAUsernamePasswordPort;D91.hasAnOpaquePath=Z3.hasAnOpaquePath;D91.percentDecodeString=iI.percentDecodeString;D91.percentDecodeBytes=iI.percentDecodeBytes});var aI=z((a6)=>{var V91=a6&&a6.__createBinding||(Object.create?function(A,F,B,D){if(D===void 0)D=B;var $=Object.getOwnPropertyDescriptor(F,B);if(!$||("get"in $?!F.__esModule:$.writable||$.configurable))$={enumerable:!0,get:function(){return F[B]}};Object.defineProperty(A,D,$)}:function(A,F,B,D){if(D===void 0)D=B;A[D]=F[B]}),w91=a6&&a6.__setModuleDefault||(Object.create?function(A,F){Object.defineProperty(A,"default",{enumerable:!0,value:F})}:function(A,F){A.default=F}),L91=a6&&a6.__importStar||function(A){if(A&&A.__esModule)return A;var F={};if(A!=null){for(var B in A)if(B!=="default"&&Object.prototype.hasOwnProperty.call(A,B))V91(F,A,B)}return w91(F,A),F};Object.defineProperty(a6,"__esModule",{value:!0});a6.redactConnectionString=a6.redactValidConnectionString=void 0;var sI=L91($H());function R91(A,F){var B,D;let $=A.clone(),J=(B=F===null||F===void 0?void 0:F.replacementString)!==null&&B!==void 0?B:"_credentials_",X=(D=F===null||F===void 0?void 0:F.redactUsernames)!==null&&D!==void 0?D:!0;if(($.username||$.password)&&X)$.username=J,$.password="";else if($.password)$.password=J;if($.searchParams.has("authMechanismProperties")){let E=new sI.CommaAndColonSeparatedRecord($.searchParams.get("authMechanismProperties"));if(E.get("AWS_SESSION_TOKEN"))E.set("AWS_SESSION_TOKEN",J),$.searchParams.set("authMechanismProperties",E.toString())}if($.searchParams.has("tlsCertificateKeyFilePassword"))$.searchParams.set("tlsCertificateKeyFilePassword",J);if($.searchParams.has("proxyUsername")&&X)$.searchParams.set("proxyUsername",J);if($.searchParams.has("proxyPassword"))$.searchParams.set("proxyPassword",J);return $}a6.redactValidConnectionString=R91;function N91(A,F){var B,D;let $=(B=F===null||F===void 0?void 0:F.replacementString)!==null&&B!==void 0?B:"<credentials>",J=(D=F===null||F===void 0?void 0:F.redactUsernames)!==null&&D!==void 0?D:!0,X;try{X=new sI.default(A)}catch(G){}if(X)return F={...F,replacementString:"___credentials___"},X.redact(F).toString().replace(/___credentials___/g,$);let E=$,Y=[(G)=>G.replace(J?/(\/\/)(.*)(@)/g:/(\/\/[^@]*:)(.*)(@)/g,`$1${E}$3`),(G)=>G.replace(/(AWS_SESSION_TOKEN(:|%3A))([^,&]+)/gi,`$1${E}`),(G)=>G.replace(/(tlsCertificateKeyFilePassword=)([^&]+)/gi,`$1${E}`),(G)=>J?G.replace(/(proxyUsername=)([^&]+)/gi,`$1${E}`):G,(G)=>G.replace(/(proxyPassword=)([^&]+)/gi,`$1${E}`)];for(let G of Y)A=G(A);return A}a6.redactConnectionString=N91});var $H=z((XH)=>{Object.defineProperty(XH,"__esModule",{value:!0});XH.CommaAndColonSeparatedRecord=XH.ConnectionString=XH.redactConnectionString=void 0;var P91=nI(),rI=aI();Object.defineProperty(XH,"redactConnectionString",{enumerable:!0,get:function(){return rI.redactConnectionString}});var kA="__this_is_a_placeholder__";function I91(A){return A.startsWith("mongodb://")||A.startsWith("mongodb+srv://")}var M91=/^(?<protocol>[^/]+):\/\/(?:(?<username>[^:@]*)(?::(?<password>[^@]*))?@)?(?<hosts>(?!:)[^/?@]*)(?<rest>.*)/;class JH extends Map{delete(A){return super.delete(this._normalizeKey(A))}get(A){return super.get(this._normalizeKey(A))}has(A){return super.has(this._normalizeKey(A))}set(A,F){return super.set(this._normalizeKey(A),F)}_normalizeKey(A){A=`${A}`;for(let F of this.keys())if(F.toLowerCase()===A.toLowerCase()){A=F;break}return A}}function j91(A){return class F extends A{append(B,D){return super.append(this._normalizeKey(B),D)}delete(B){return super.delete(this._normalizeKey(B))}get(B){return super.get(this._normalizeKey(B))}getAll(B){return super.getAll(this._normalizeKey(B))}has(B){return super.has(this._normalizeKey(B))}set(B,D){return super.set(this._normalizeKey(B),D)}keys(){return super.keys()}values(){return super.values()}entries(){return super.entries()}[Symbol.iterator](){return super[Symbol.iterator]()}_normalizeKey(B){return JH.prototype._normalizeKey.call(this,B)}}}class tI extends P91.URL{}class c3 extends Error{get name(){return"MongoParseError"}}class OA extends tI{constructor(A,F={}){var B;let{looseValidation:D}=F;if(!D&&!I91(A))throw new c3('Invalid scheme, expected connection string to start with "mongodb://" or "mongodb+srv://"');let $=A.match(M91);if(!$)throw new c3(`Invalid connection string "${A}"`);let{protocol:J,username:X,password:E,hosts:Y,rest:G}=(B=$.groups)!==null&&B!==void 0?B:{};if(!D){if(!J||!Y)throw new c3(`Protocol and host list are required in "${A}"`);try{decodeURIComponent(X!==null&&X!==void 0?X:""),decodeURIComponent(E!==null&&E!==void 0?E:"")}catch(q){throw new c3(q.message)}let W=/[:/?#[\]@]/gi;if(X===null||X===void 0?void 0:X.match(W))throw new c3(`Username contains unescaped characters ${X}`);if(!X||!E){let q=A.replace(`${J}://`,"");if(q.startsWith("@")||q.startsWith(":"))throw new c3("URI contained empty userinfo section")}if(E===null||E===void 0?void 0:E.match(W))throw new c3("Password contains unescaped characters")}let H="";if(typeof X==="string")H+=X;if(typeof E==="string")H+=`:${E}`;if(H)H+="@";try{super(`${J.toLowerCase()}://${H}${kA}${G}`)}catch(W){if(D)new OA(A,{...F,looseValidation:!1});if(typeof W.message==="string")W.message=W.message.replace(kA,Y);throw W}if(this._hosts=Y.split(","),!D){if(this.isSRV&&this.hosts.length!==1)throw new c3("mongodb+srv URI cannot have multiple service names");if(this.isSRV&&this.hosts.some((W)=>W.includes(":")))throw new c3("mongodb+srv URI cannot have port number")}if(!this.pathname)this.pathname="/";Object.setPrototypeOf(this.searchParams,j91(this.searchParams.constructor).prototype)}get host(){return kA}set host(A){throw new Error("No single host for connection string")}get hostname(){return kA}set hostname(A){throw new Error("No single host for connection string")}get port(){return""}set port(A){throw new Error("No single host for connection string")}get href(){return this.toString()}set href(A){throw new Error("Cannot set href for connection strings")}get isSRV(){return this.protocol.includes("srv")}get hosts(){return this._hosts}set hosts(A){this._hosts=A}toString(){return super.toString().replace(kA,this.hosts.join(","))}clone(){return new OA(this.toString(),{looseValidation:!0})}redact(A){return rI.redactValidConnectionString(this,A)}typedSearchParams(){return this.searchParams}[Symbol.for("nodejs.util.inspect.custom")](){let{href:A,origin:F,protocol:B,username:D,password:$,hosts:J,pathname:X,search:E,searchParams:Y,hash:G}=this;return{href:A,origin:F,protocol:B,username:D,password:$,hosts:J,pathname:X,search:E,searchParams:Y,hash:G}}}XH.ConnectionString=OA;class oI extends JH{constructor(A){super();for(let F of(A!==null&&A!==void 0?A:"").split(",")){if(!F)continue;let B=F.indexOf(":");if(B===-1)this.set(F,"");else this.set(F.slice(0,B),F.slice(B+1))}}toString(){return[...this].map((A)=>A.join(":")).join(",")}}XH.CommaAndColonSeparatedRecord=oI;XH.default=OA});var AM=z((FI1,O91)=>{O91.exports={name:"mongodb",version:"6.17.0",description:"The official MongoDB driver for Node.js",main:"lib/index.js",files:["lib","src","etc/prepare.js","mongodb.d.ts","tsconfig.json"],types:"mongodb.d.ts",repository:{type:"git",url:"git@github.com:mongodb/node-mongodb-native.git"},keywords:["mongodb","driver","official"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},dependencies:{"@mongodb-js/saslprep":"^1.1.9",bson:"^6.10.4","mongodb-connection-string-url":"^3.0.0"},peerDependencies:{"@aws-sdk/credential-providers":"^3.188.0","@mongodb-js/zstd":"^1.1.0 || ^2.0.0","gcp-metadata":"^5.2.0",kerberos:"^2.0.1","mongodb-client-encryption":">=6.0.0 <7",snappy:"^7.2.2",socks:"^2.7.1"},peerDependenciesMeta:{"@aws-sdk/credential-providers":{optional:!0},"@mongodb-js/zstd":{optional:!0},kerberos:{optional:!0},snappy:{optional:!0},"mongodb-client-encryption":{optional:!0},"gcp-metadata":{optional:!0},socks:{optional:!0}},devDependencies:{"@aws-sdk/credential-providers":"^3.632.0","@iarna/toml":"^2.2.5","@istanbuljs/nyc-config-typescript":"^1.0.2","@microsoft/api-extractor":"^7.52.5","@microsoft/tsdoc-config":"^0.17.1","@mongodb-js/zstd":"^2.0.1","@types/chai":"^4.3.17","@types/chai-subset":"^1.3.5","@types/express":"^5.0.1","@types/kerberos":"^1.1.5","@types/mocha":"^10.0.9","@types/node":"^22.15.3","@types/saslprep":"^1.0.3","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/sinon-chai":"^4.0.0","@types/whatwg-url":"^13.0.0","@typescript-eslint/eslint-plugin":"^8.31.1","@typescript-eslint/parser":"^8.31.1",chai:"^4.4.1","chai-subset":"^1.6.0",chalk:"^4.1.2",eslint:"^9.25.1","eslint-config-prettier":"^10.1.2","eslint-plugin-mocha":"^10.4.1","eslint-plugin-prettier":"^5.2.3","eslint-plugin-simple-import-sort":"^12.1.1","eslint-plugin-tsdoc":"^0.4.0","eslint-plugin-unused-imports":"^4.1.4",express:"^5.1.0","gcp-metadata":"^5.3.0","js-yaml":"^4.1.0",mocha:"^10.8.2","mocha-sinon":"^2.1.2","mongodb-client-encryption":"^6.4.0","mongodb-legacy":"^6.1.3",nyc:"^15.1.0",prettier:"^3.5.3",semver:"^7.7.0",sinon:"^18.0.1","sinon-chai":"^3.7.0",snappy:"^7.2.2",socks:"^2.8.1","source-map-support":"^0.5.21","ts-node":"^10.9.2",tsd:"^0.31.2",typescript:"5.5","typescript-cached-transpile":"^0.0.6","v8-heapsnapshot":"^1.3.1",yargs:"^17.7.2"},license:"Apache-2.0",engines:{node:">=16.20.1"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},homepage:"https://github.com/mongodb/node-mongodb-native",scripts:{"build:evergreen":"node .evergreen/generate_evergreen_tasks.js","build:ts":"node ./node_modules/typescript/bin/tsc","build:dts":"npm run build:ts && api-extractor run && node etc/clean_definition_files.cjs && ESLINT_USE_FLAT_CONFIG=false eslint --no-ignore --fix mongodb.d.ts lib/beta.d.ts","build:docs":"./etc/docs/build.ts","build:typedoc":"typedoc","build:nightly":"node ./.github/scripts/nightly.mjs","check:bench":"npm --prefix test/benchmarks/driver_bench start","check:coverage":"nyc npm run test:all","check:integration-coverage":"nyc npm run check:test","check:lambda":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/handler.test.js","check:lambda:aws":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/aws_handler.test.js","check:lint":"npm run build:dts && npm run check:dts && npm run check:eslint && npm run check:tsd","check:eslint":"npm run build:dts && ESLINT_USE_FLAT_CONFIG=false eslint -v && ESLINT_USE_FLAT_CONFIG=false eslint --max-warnings=0 --ext '.js,.ts' src test","check:tsd":"tsd --version && tsd","check:dependencies":"mocha test/action/dependency.test.ts","check:dts":"node ./node_modules/typescript/bin/tsc --noEmit mongodb.d.ts && tsd","check:search-indexes":"nyc mocha --config test/mocha_mongodb.js test/manual/search-index-management.prose.test.ts","check:test":"mocha --config test/mocha_mongodb.js test/integration","check:unit":"nyc mocha test/unit","check:ts":"node ./node_modules/typescript/bin/tsc -v && node ./node_modules/typescript/bin/tsc --noEmit","check:atlas":"nyc mocha --config test/manual/mocharc.js test/manual/atlas_connectivity.test.ts","check:resource-management":"nyc mocha --config test/manual/mocharc.js test/manual/resource_management.test.ts","check:drivers-atlas-testing":"nyc mocha --config test/mocha_mongodb.js test/atlas/drivers_atlas_testing.test.ts","check:adl":"nyc mocha --config test/mocha_mongodb.js test/manual/atlas-data-lake-testing","check:aws":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_aws.test.ts","check:oidc-auth":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/auth.spec.test.ts","check:oidc-test":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc.prose.test.ts","check:oidc-azure":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_azure.prose.05.test.ts","check:oidc-gcp":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_gcp.prose.06.test.ts","check:oidc-k8s":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_k8s.prose.07.test.ts","check:kerberos":"nyc mocha --config test/manual/mocharc.js test/manual/kerberos.test.ts","check:tls":"nyc mocha --config test/manual/mocharc.js test/manual/tls_support.test.ts","check:ldap":"nyc mocha --config test/manual/mocharc.js test/manual/ldap.test.ts","check:socks5":"nyc mocha --config test/manual/mocharc.js test/manual/socks5.test.ts","check:csfle":"nyc mocha --config test/mocha_mongodb.js test/integration/client-side-encryption","check:snappy":"nyc mocha test/unit/assorted/snappy.test.js","check:x509":"nyc mocha test/manual/x509_auth.test.ts","fix:eslint":"npm run check:eslint -- --fix",prepare:"node etc/prepare.js","preview:docs":"ts-node etc/docs/preview.ts",test:"npm run check:lint && npm run test:all","test:all":"npm run check:unit && npm run check:test","update:docs":"npm run build:docs -- --yes"},tsd:{directory:"test/types",compilerOptions:{strict:!0,target:"esnext",module:"commonjs",moduleResolution:"node"}}}});var EH=z((JM)=>{Object.defineProperty(JM,"__esModule",{value:!0});JM.LimitedSizeDocument=void 0;JM.makeClientMetadata=S91;JM.addContainerMetadata=_91;JM.getFAASEnv=$M;var uA=i("os"),SA=i("process"),R8=y1(),FM=s(),u91=F1(),BM=AM().version;class yD{constructor(A){this.maxSize=A,this.document=new Map,this.documentSize=5}ifItFitsItSits(A,F){let B=R8.BSON.serialize(new Map().set(A,F)).byteLength-5;if(B+this.documentSize>this.maxSize)return!1;return this.documentSize+=B,this.document.set(A,F),!0}toObject(){return R8.BSON.deserialize(R8.BSON.serialize(this.document),{promoteLongs:!1,promoteBuffers:!1,promoteValues:!1,useBigInt64:!1})}}JM.LimitedSizeDocument=yD;function S91(A){let F=new yD(512),{appName:B=""}=A;if(B.length>0){let H=Buffer.byteLength(B,"utf8")<=128?A.appName:Buffer.from(B,"utf8").subarray(0,128).toString("utf8");F.ifItFitsItSits("application",{name:H})}let{name:D="",version:$="",platform:J=""}=A.driverInfo,X={name:D.length>0?`nodejs|${D}`:"nodejs",version:$.length>0?`${BM}|${$}`:BM};if(!F.ifItFitsItSits("driver",X))throw new FM.MongoInvalidArgumentError("Unable to include driverInfo name and version, metadata cannot exceed 512 bytes");let E=x91();if(J.length>0)E=`${E}|${J}`;if(!F.ifItFitsItSits("platform",E))throw new FM.MongoInvalidArgumentError("Unable to include driverInfo platform, metadata cannot exceed 512 bytes");let Y=new Map().set("name",SA.platform).set("architecture",SA.arch).set("version",uA.release()).set("type",uA.type());if(!F.ifItFitsItSits("os",Y))for(let H of Y.keys()){if(Y.delete(H),Y.size===0)break;if(F.ifItFitsItSits("os",Y))break}let G=$M();if(G!=null){if(!F.ifItFitsItSits("env",G))for(let H of G.keys()){if(G.delete(H),G.size===0)break;if(F.ifItFitsItSits("env",G))break}}return F.toObject()}var DM;async function f91(){let A={};DM??=u91.fileIsAccessible("/.dockerenv");let F=await DM,{KUBERNETES_SERVICE_HOST:B=""}=SA.env,D=B.length>0?!0:!1;if(F)A.runtime="docker";if(D)A.orchestrator="kubernetes";return A}async function _91(A){let F=await f91();if(Object.keys(F).length===0)return A;let B=new yD(512),D={...A?.env,container:F};for(let[$,J]of Object.entries(A))if($!=="env")B.ifItFitsItSits($,J);else if(!B.ifItFitsItSits("env",D))B.ifItFitsItSits("env",J);if(!("env"in A))B.ifItFitsItSits("env",D);return B.toObject()}function $M(){let{AWS_EXECUTION_ENV:A="",AWS_LAMBDA_RUNTIME_API:F="",FUNCTIONS_WORKER_RUNTIME:B="",K_SERVICE:D="",FUNCTION_NAME:$="",VERCEL:J="",AWS_LAMBDA_FUNCTION_MEMORY_SIZE:X="",AWS_REGION:E="",FUNCTION_MEMORY_MB:Y="",FUNCTION_REGION:G="",FUNCTION_TIMEOUT_SEC:H="",VERCEL_REGION:W=""}=SA.env,q=A.startsWith("AWS_Lambda_")||F.length>0,C=B.length>0,Q=D.length>0||$.length>0,K=J.length>0,U=new Map;if(K&&!(C||Q)){if(W.length>0)U.set("region",W);return U.set("name","vercel"),U}if(q&&!(C||Q||K)){if(E.length>0)U.set("region",E);if(X.length>0&&Number.isInteger(+X))U.set("memory_mb",new R8.Int32(X));return U.set("name","aws.lambda"),U}if(C&&!(Q||q||K))return U.set("name","azure.func"),U;if(Q&&!(C||q||K)){if(G.length>0)U.set("region",G);if(Y.length>0&&Number.isInteger(+Y))U.set("memory_mb",new R8.Int32(Y));if(H.length>0&&Number.isInteger(+H))U.set("timeout_sec",new R8.Int32(H));return U.set("name","gcp.func"),U}return null}function x91(){if("Deno"in globalThis)return`Deno v${typeof Deno?.version?.deno==="string"?Deno?.version?.deno:"0.0.0-unknown"}, ${uA.endianness()}`;if("Bun"in globalThis)return`Bun v${typeof Bun?.version==="string"?Bun?.version:"0.0.0-unknown"}, ${uA.endianness()}`;return`Node.js ${SA.version}, ${uA.endianness()}`}});var _A=z((QM)=>{Object.defineProperty(QM,"__esModule",{value:!0});QM.OpCompressedRequest=QM.OpMsgResponse=QM.OpMsgRequest=QM.DocumentSequence=QM.OpReply=QM.OpQueryRequest=void 0;var I8=y1(),fA=s(),YH=xA(),N8=n9(),P8=0,h91=2,v91=4,m91=8,d91=16,l91=32,c91=64,p91=128,i91=1,n91=2,s91=4,a91=8,r91=I8.BSON.onDemand.ByteUtils.encodeUTF8Into;class HH{constructor(A,F,B){this.databaseName=A,this.query=F,this.moreToCome=!1;let D=`${A}.$cmd`;if(typeof A!=="string")throw new fA.MongoRuntimeError("Database name must be a string for a query");if(F==null)throw new fA.MongoRuntimeError("A query document must be specified for query");if(D.indexOf("\x00")!==-1)throw new fA.MongoRuntimeError("Namespace cannot contain a null character");this.ns=D,this.numberToSkip=B.numberToSkip||0,this.numberToReturn=B.numberToReturn||0,this.returnFieldSelector=B.returnFieldSelector||void 0,this.requestId=B.requestId??HH.getRequestId(),this.pre32Limit=B.pre32Limit,this.serializeFunctions=typeof B.serializeFunctions==="boolean"?B.serializeFunctions:!1,this.ignoreUndefined=typeof B.ignoreUndefined==="boolean"?B.ignoreUndefined:!1,this.maxBsonSize=B.maxBsonSize||16777216,this.checkKeys=typeof B.checkKeys==="boolean"?B.checkKeys:!1,this.batchSize=this.numberToReturn,this.tailable=!1,this.secondaryOk=typeof B.secondaryOk==="boolean"?B.secondaryOk:!1,this.oplogReplay=!1,this.noCursorTimeout=!1,this.awaitData=!1,this.exhaust=!1,this.partial=!1}incRequestId(){this.requestId=P8++}nextRequestId(){return P8+1}static getRequestId(){return++P8}toBin(){let A=[],F=null,B=0;if(this.tailable)B|=h91;if(this.secondaryOk)B|=v91;if(this.oplogReplay)B|=m91;if(this.noCursorTimeout)B|=d91;if(this.awaitData)B|=l91;if(this.exhaust)B|=c91;if(this.partial)B|=p91;if(this.batchSize!==this.numberToReturn)this.numberToReturn=this.batchSize;let D=Buffer.alloc(20+Buffer.byteLength(this.ns)+1+4+4);A.push(D);let $=I8.serialize(this.query,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});if(A.push($),this.returnFieldSelector&&Object.keys(this.returnFieldSelector).length>0)F=I8.serialize(this.returnFieldSelector,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined}),A.push(F);let J=D.length+$.length+(F?F.length:0),X=4;return D[3]=J>>24&255,D[2]=J>>16&255,D[1]=J>>8&255,D[0]=J&255,D[X+3]=this.requestId>>24&255,D[X+2]=this.requestId>>16&255,D[X+1]=this.requestId>>8&255,D[X]=this.requestId&255,X=X+4,D[X+3]=0,D[X+2]=0,D[X+1]=0,D[X]=0,X=X+4,D[X+3]=N8.OP_QUERY>>24&255,D[X+2]=N8.OP_QUERY>>16&255,D[X+1]=N8.OP_QUERY>>8&255,D[X]=N8.OP_QUERY&255,X=X+4,D[X+3]=B>>24&255,D[X+2]=B>>16&255,D[X+1]=B>>8&255,D[X]=B&255,X=X+4,X=X+D.write(this.ns,X,"utf8")+1,D[X-1]=0,D[X+3]=this.numberToSkip>>24&255,D[X+2]=this.numberToSkip>>16&255,D[X+1]=this.numberToSkip>>8&255,D[X]=this.numberToSkip&255,X=X+4,D[X+3]=this.numberToReturn>>24&255,D[X+2]=this.numberToReturn>>16&255,D[X+1]=this.numberToReturn>>8&255,D[X]=this.numberToReturn&255,X=X+4,A}}QM.OpQueryRequest=HH;class YM{constructor(A,F,B,D){this.index=0,this.sections=[],this.moreToCome=!1,this.parsed=!1,this.raw=A,this.data=B,this.opts=D??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=F.length,this.requestId=F.requestId,this.responseTo=F.responseTo,this.opCode=F.opCode,this.fromCompressed=F.fromCompressed,this.useBigInt64=typeof this.opts.useBigInt64==="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs==="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues==="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers==="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp==="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];if(this.index=20,this.responseFlags=this.data.readInt32LE(0),this.cursorId=new I8.Long(this.data.readInt32LE(4),this.data.readInt32LE(8)),this.startingFrom=this.data.readInt32LE(12),this.numberReturned=this.data.readInt32LE(16),this.numberReturned<0||this.numberReturned>4294967295)throw new RangeError(`OP_REPLY numberReturned is an invalid array length ${this.numberReturned}`);this.cursorNotFound=(this.responseFlags&i91)!==0,this.queryFailure=(this.responseFlags&n91)!==0,this.shardConfigStale=(this.responseFlags&s91)!==0,this.awaitCapable=(this.responseFlags&a91)!==0;for(let A=0;A<this.numberReturned;A++){let F=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24,B=this.data.subarray(this.index,this.index+F);this.sections.push(B),this.index=this.index+F}return this.parsed=!0,this.sections[0]}}QM.OpReply=YM;var GM=1,HM=2,WM=65536;class WH{constructor(A,F){this.field=A,this.documents=[],this.chunks=[],this.serializedDocumentsLength=0;let B=Buffer.allocUnsafe(5+this.field.length+1);if(B[0]=1,r91(B,`${this.field}\x00`,5),this.chunks.push(B),this.header=B,F)for(let D of F)this.push(D,I8.serialize(D))}push(A,F){return this.serializedDocumentsLength+=F.length,this.documents.push(A),this.chunks.push(F),this.header?.writeInt32LE(4+this.field.length+1+this.serializedDocumentsLength,1),this.serializedDocumentsLength+this.header.length}toBin(){return Buffer.concat(this.chunks)}}QM.DocumentSequence=WH;class hD{constructor(A,F,B){if(this.databaseName=A,this.command=F,this.options=B,F==null)throw new fA.MongoInvalidArgumentError("Query document must be specified for query");this.command.$db=A,this.options=B??{},this.requestId=B.requestId?B.requestId:hD.getRequestId(),this.serializeFunctions=typeof B.serializeFunctions==="boolean"?B.serializeFunctions:!1,this.ignoreUndefined=typeof B.ignoreUndefined==="boolean"?B.ignoreUndefined:!1,this.checkKeys=typeof B.checkKeys==="boolean"?B.checkKeys:!1,this.maxBsonSize=B.maxBsonSize||16777216,this.checksumPresent=!1,this.moreToCome=B.moreToCome??F.writeConcern?.w===0,this.exhaustAllowed=typeof B.exhaustAllowed==="boolean"?B.exhaustAllowed:!1}toBin(){let A=[],F=0;if(this.checksumPresent)F|=GM;if(this.moreToCome)F|=HM;if(this.exhaustAllowed)F|=WM;let B=Buffer.alloc(20);A.push(B);let D=B.length,$=this.command;return D+=this.makeSections(A,$),B.writeInt32LE(D,0),B.writeInt32LE(this.requestId,4),B.writeInt32LE(0,8),B.writeInt32LE(N8.OP_MSG,12),B.writeUInt32LE(F,16),A}makeSections(A,F){let B=this.extractDocumentSequences(F),D=Buffer.allocUnsafe(1);D[0]=0;let $=this.serializeBson(F);return A.push(D),A.push($),A.push(B),D.length+$.length+B.length}extractDocumentSequences(A){let F=[];for(let[B,D]of Object.entries(A))if(D instanceof WH)F.push(D.toBin()),delete A[B];if(F.length>0)return Buffer.concat(F);return Buffer.alloc(0)}serializeBson(A){return I8.serialize(A,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined})}static getRequestId(){return P8=P8+1&2147483647,P8}}QM.OpMsgRequest=hD;class qM{constructor(A,F,B,D){this.index=0,this.sections=[],this.parsed=!1,this.raw=A,this.data=B,this.opts=D??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=F.length,this.requestId=F.requestId,this.responseTo=F.responseTo,this.opCode=F.opCode,this.fromCompressed=F.fromCompressed,this.responseFlags=B.readInt32LE(0),this.checksumPresent=(this.responseFlags&GM)!==0,this.moreToCome=(this.responseFlags&HM)!==0,this.exhaustAllowed=(this.responseFlags&WM)!==0,this.useBigInt64=typeof this.opts.useBigInt64==="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs==="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues==="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers==="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp==="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];this.index=4;while(this.index<this.data.length){let A=this.data.readUInt8(this.index++);if(A===0){let F=this.data.readUInt32LE(this.index),B=this.data.subarray(this.index,this.index+F);this.sections.push(B),this.index+=F}else if(A===1)throw new fA.MongoRuntimeError("OP_MSG Payload Type 1 detected unsupported protocol")}return this.parsed=!0,this.sections[0]}}QM.OpMsgResponse=qM;var GH=16,EM=9;class CM{constructor(A,F){this.command=A,this.options=F}static canCompress(A){let F=A instanceof hD?A.command:A.query,B=Object.keys(F)[0];return!YH.uncompressibleCommands.has(B)}async toBin(){let A=Buffer.concat(this.command.toBin()),F=A.slice(GH),B=A.readInt32LE(12),D=await YH.compress(this.options,F),$=Buffer.alloc(GH);$.writeInt32LE(GH+EM+D.length,0),$.writeInt32LE(this.command.requestId,4),$.writeInt32LE(0,8),$.writeInt32LE(N8.OP_COMPRESSED,12);let J=Buffer.alloc(EM);return J.writeInt32LE(B,0),J.writeInt32LE(F.length,4),J.writeUInt8(YH.Compressor[this.options.agreedCompressor],8),[$,J,D]}}QM.OpCompressedRequest=CM});var xA=z((LM)=>{Object.defineProperty(LM,"__esModule",{value:!0});LM.uncompressibleCommands=LM.Compressor=void 0;LM.compress=X71;LM.decompress=VM;LM.compressCommand=E71;LM.decompressResponse=Y71;var zM=i("util"),vD=i("zlib"),B71=v0(),UM=U3(),CH=s(),M8=_A(),qH=n9();LM.Compressor=Object.freeze({none:0,snappy:1,zlib:2,zstd:3});LM.uncompressibleCommands=new Set([B71.LEGACY_HELLO_COMMAND,"saslStart","saslContinue","getnonce","authenticate","createUser","updateUser","copydbSaslStart","copydbgetnonce","copydb"]);var D71=3,$71=zM.promisify(vD.inflate.bind(vD)),J71=zM.promisify(vD.deflate.bind(vD)),X9,J7=null;function ZM(){if(J7==null){let A=UM.getSnappy();if("kModuleError"in A)throw A.kModuleError;J7=A}return J7}async function X71(A,F){let B={};switch(A.agreedCompressor){case"snappy":return J7??=ZM(),await J7.compress(F);case"zstd":{if(wM(),"kModuleError"in X9)throw X9.kModuleError;return await X9.compress(F,D71)}case"zlib":{if(A.zlibCompressionLevel)B.level=A.zlibCompressionLevel;return await J71(F,B)}default:throw new CH.MongoInvalidArgumentError(`Unknown compressor ${A.agreedCompressor} failed to compress`)}}async function VM(A,F){if(A!==LM.Compressor.snappy&&A!==LM.Compressor.zstd&&A!==LM.Compressor.zlib&&A!==LM.Compressor.none)throw new CH.MongoDecompressionError(`Server sent message compressed using an unsupported compressor. (Received compressor ID ${A})`);switch(A){case LM.Compressor.snappy:return J7??=ZM(),await J7.uncompress(F,{asBuffer:!0});case LM.Compressor.zstd:{if(wM(),"kModuleError"in X9)throw X9.kModuleError;return await X9.decompress(F)}case LM.Compressor.zlib:return await $71(F);default:return F}}function wM(){if(!X9)X9=UM.getZstdLibrary()}var gA=16;async function E71(A,F){let D=await(F.agreedCompressor==="none"||!M8.OpCompressedRequest.canCompress(A)?A:new M8.OpCompressedRequest(A,{agreedCompressor:F.agreedCompressor??"none",zlibCompressionLevel:F.zlibCompressionLevel??0})).toBin();return Buffer.concat(D)}async function Y71(A){let F={length:A.readInt32LE(0),requestId:A.readInt32LE(4),responseTo:A.readInt32LE(8),opCode:A.readInt32LE(12)};if(F.opCode!==qH.OP_COMPRESSED){let E=F.opCode===qH.OP_MSG?M8.OpMsgResponse:M8.OpReply,Y=A.subarray(gA);return new E(A,F,Y)}let B={...F,fromCompressed:!0,opCode:A.readInt32LE(gA),length:A.readInt32LE(gA+4)},D=A[gA+8],$=A.slice(gA+9),J=B.opCode===qH.OP_MSG?M8.OpMsgResponse:M8.OpReply,X=await VM(D,$);if(X.length!==B.length)throw new CH.MongoDecompressionError("Message body and message header must be the same length");return new J(A,B,X)}});var KH=z((NM)=>{Object.defineProperty(NM,"__esModule",{value:!0});NM.hmacSha256Hook=NM.hmacSha512Hook=NM.aes256CtrDecryptHook=NM.aes256CtrEncryptHook=NM.aes256CbcDecryptHook=NM.aes256CbcEncryptHook=void 0;NM.makeAES256Hook=yA;NM.randomHook=C71;NM.sha256Hook=Q71;NM.makeHmacHook=QH;NM.signRsaSha256Hook=K71;var bA=i("crypto");function yA(A,F){return function(B,D,$,J){let X;try{let E=bA[A](F,B,D);E.setAutoPadding(!1),X=E.update($);let Y=E.final();if(Y.length>0)X=Buffer.concat([X,Y])}catch(E){return E}return X.copy(J),X.length}}function C71(A,F){try{bA.randomFillSync(A,0,F)}catch(B){return B}return F}function Q71(A,F){let B;try{B=bA.createHash("sha256").update(A).digest()}catch(D){return D}return B.copy(F),B.length}function QH(A){return(F,B,D)=>{let $;try{$=bA.createHmac(A,F).update(B).digest()}catch(J){return J}return $.copy(D),$.length}}function K71(A,F,B){let D;try{let $=bA.createSign("sha256WithRSAEncryption"),J=Buffer.from(`-----BEGIN PRIVATE KEY-----
${A.toString("base64")}
-----END PRIVATE KEY-----
`);D=$.update(F).end().sign(J)}catch($){return $}return D.copy(B),D.length}NM.aes256CbcEncryptHook=yA("createCipheriv","aes-256-cbc");NM.aes256CbcDecryptHook=yA("createDecipheriv","aes-256-cbc");NM.aes256CtrEncryptHook=yA("createCipheriv","aes-256-ctr");NM.aes256CtrDecryptHook=yA("createDecipheriv","aes-256-ctr");NM.hmacSha512Hook=QH("sha512");NM.hmacSha256Hook=QH("sha256")});var j8=z((OM)=>{Object.defineProperty(OM,"__esModule",{value:!0});OM.MongoCryptKMSRequestNetworkTimeoutError=OM.MongoCryptAzureKMSRequestError=OM.MongoCryptCreateEncryptedCollectionError=OM.MongoCryptCreateDataKeyError=OM.MongoCryptInvalidArgumentError=OM.MongoCryptError=void 0;var M71=s();class X7 extends M71.MongoError{constructor(A,F={}){super(A,F)}get name(){return"MongoCryptError"}}OM.MongoCryptError=X7;class IM extends X7{constructor(A){super(A)}get name(){return"MongoCryptInvalidArgumentError"}}OM.MongoCryptInvalidArgumentError=IM;class MM extends X7{constructor(A,{cause:F}){super(`Unable to complete creating data keys: ${F.message}`,{cause:F});this.encryptedFields=A}get name(){return"MongoCryptCreateDataKeyError"}}OM.MongoCryptCreateDataKeyError=MM;class jM extends X7{constructor(A,{cause:F}){super(`Unable to create collection: ${F.message}`,{cause:F});this.encryptedFields=A}get name(){return"MongoCryptCreateEncryptedCollectionError"}}OM.MongoCryptCreateEncryptedCollectionError=jM;class TM extends X7{constructor(A,F){super(A);this.body=F}get name(){return"MongoCryptAzureKMSRequestError"}}OM.MongoCryptAzureKMSRequestError=TM;class kM extends X7{get name(){return"MongoCryptKMSRequestNetworkTimeoutError"}}OM.MongoCryptKMSRequestNetworkTimeoutError=kM});var UH=z((xM)=>{Object.defineProperty(xM,"__esModule",{value:!0});xM.LegacyAWSTemporaryCredentialProvider=xM.AWSSDKCredentialProvider=xM.AWSTemporaryCredentialProvider=void 0;var S71=U3(),f71=s(),mD=F1(),_71="http://169.254.170.2",zH="http://169.254.169.254",SM="/latest/meta-data/iam/security-credentials";class V3{static get awsSDK(){return V3._awsSDK??=S71.getAwsCredentialProvider(),V3._awsSDK}static get isAWSSDKInstalled(){return!("kModuleError"in V3.awsSDK)}}xM.AWSTemporaryCredentialProvider=V3;class fM extends V3{constructor(A){super();if(A)this._provider=A}get provider(){if("kModuleError"in V3.awsSDK)throw V3.awsSDK.kModuleError;if(this._provider)return this._provider;let{AWS_STS_REGIONAL_ENDPOINTS:A="",AWS_REGION:F=""}=process.env;A=A.toLowerCase(),F=F.toLowerCase();let B=F.length!==0&&A.length!==0,$=A==="regional"||A==="legacy"&&!new Set(["ap-northeast-1","ap-south-1","ap-southeast-1","ap-southeast-2","aws-global","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]).has(F);return this._provider=B&&$?V3.awsSDK.fromNodeProviderChain({clientConfig:{region:F}}):V3.awsSDK.fromNodeProviderChain(),this._provider}async getCredentials(){try{let A=await this.provider();return{AccessKeyId:A.accessKeyId,SecretAccessKey:A.secretAccessKey,Token:A.sessionToken,Expiration:A.expiration}}catch(A){throw new f71.MongoAWSError(A.message,{cause:A})}}}xM.AWSSDKCredentialProvider=fM;class _M extends V3{async getCredentials(){if(process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI)return await mD.request(`${_71}${process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI}`);let A=await mD.request(`${zH}/latest/api/token`,{method:"PUT",json:!1,headers:{"X-aws-ec2-metadata-token-ttl-seconds":30}}),F=await mD.request(`${zH}/${SM}`,{json:!1,headers:{"X-aws-ec2-metadata-token":A}});return await mD.request(`${zH}/${SM}/${F}`,{headers:{"X-aws-ec2-metadata-token":A}})}}xM.LegacyAWSTemporaryCredentialProvider=_M});var yM=z((bM)=>{Object.defineProperty(bM,"__esModule",{value:!0});bM.loadAWSCredentials=y71;var b71=UH();async function y71(A,F){let B=new b71.AWSSDKCredentialProvider(F),{SecretAccessKey:D="",AccessKeyId:$="",Token:J}=await B.getCredentials(),X={secretAccessKey:D,accessKeyId:$};return J!=null&&(X.sessionToken=J),{...A,aws:X}}});var wH=z((dM)=>{Object.defineProperty(dM,"__esModule",{value:!0});dM.tokenCache=dM.AzureCredentialCache=dM.AZURE_BASE_URL=void 0;dM.addAzureParams=hM;dM.prepareRequest=vM;dM.fetchAzureKMSToken=mM;dM.loadAzureCredentials=c71;var v71=s(),m71=F1(),T8=j8(),d71=6000;dM.AZURE_BASE_URL="http://169.254.169.254/metadata/identity/oauth2/token?";class ZH{constructor(){this.cachedToken=null}async getToken(){if(this.cachedToken==null||this.needsRefresh(this.cachedToken))this.cachedToken=await this._getToken();return{accessToken:this.cachedToken.accessToken}}needsRefresh(A){return A.expiresOnTimestamp-Date.now()<=d71}resetCache(){this.cachedToken=null}_getToken(){return mM()}}dM.AzureCredentialCache=ZH;dM.tokenCache=new ZH;async function l71(A){let{status:F,body:B}=A,D=(()=>{try{return JSON.parse(B)}catch{throw new T8.MongoCryptAzureKMSRequestError("Malformed JSON body in GET request.")}})();if(F!==200)throw new T8.MongoCryptAzureKMSRequestError("Unable to complete request.",D);if(!D.access_token)throw new T8.MongoCryptAzureKMSRequestError("Malformed response body - missing field `access_token`.");if(!D.expires_in)throw new T8.MongoCryptAzureKMSRequestError("Malformed response body - missing field `expires_in`.");let $=Number(D.expires_in)*1000;if(Number.isNaN($))throw new T8.MongoCryptAzureKMSRequestError("Malformed response body - unable to parse int from `expires_in` field.");return{accessToken:D.access_token,expiresOnTimestamp:Date.now()+$}}function hM(A,F,B){if(A.searchParams.append("api-version","2018-02-01"),A.searchParams.append("resource",F),B)A.searchParams.append("client_id",B);return A}function vM(A){let F=new URL(A.url?.toString()??dM.AZURE_BASE_URL);return hM(F,"https://vault.azure.net"),{headers:{...A.headers,"Content-Type":"application/json",Metadata:!0},url:F}}async function mM(A={}){let{headers:F,url:B}=vM(A);try{let D=await m71.get(B,{headers:F});return await l71(D)}catch(D){if(D instanceof v71.MongoNetworkTimeoutError)throw new T8.MongoCryptAzureKMSRequestError(`[Azure KMS] ${D.message}`);throw D}}async function c71(A){let F=await dM.tokenCache.getToken();return{...A,azure:F}}});var pM=z((cM)=>{Object.defineProperty(cM,"__esModule",{value:!0});cM.loadGCPCredentials=t71;var r71=U3();async function t71(A){let F=r71.getGcpMetadata();if("kModuleError"in F)return A;let{access_token:B}=await F.instance({property:"service-accounts/default/token"});return{...A,gcp:{accessToken:B}}}});var LH=z((iM)=>{Object.defineProperty(iM,"__esModule",{value:!0});iM.isEmptyCredentials=dD;iM.refreshKMSCredentials=B81;var e71=yM(),A81=wH(),F81=pM();function dD(A,F){let B=F[A];if(B==null)return!1;return typeof B==="object"&&Object.keys(B).length===0}async function B81(A,F){let B=A;if(dD("aws",A))B=await e71.loadAWSCredentials(B,F?.aws);if(dD("gcp",A))B=await F81.loadGCPCredentials(B);if(dD("azure",A))B=await A81.loadAzureCredentials(B);return B}});var RH=z((Jj)=>{Object.defineProperty(Jj,"__esModule",{value:!0});Jj.StateMachine=void 0;var nM=i("fs/promises"),J81=i("net"),X81=i("tls"),C4=y1(),sM=k2(),E81=U3(),Y81=s(),aM=M2(),E9=F1(),G81=lD(),Y9=j8(),hA=null;function H81(){if(hA==null){let A=E81.getSocks();if("kModuleError"in A)throw A.kModuleError;hA=A}return hA}var E7=0,tM=1,oM=2,eM=3,Aj=7,Fj=4,Bj=5,Dj=6,W81=443,q81=new Map([[E7,"MONGOCRYPT_CTX_ERROR"],[tM,"MONGOCRYPT_CTX_NEED_MONGO_COLLINFO"],[oM,"MONGOCRYPT_CTX_NEED_MONGO_MARKINGS"],[eM,"MONGOCRYPT_CTX_NEED_MONGO_KEYS"],[Aj,"MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS"],[Fj,"MONGOCRYPT_CTX_NEED_KMS"],[Bj,"MONGOCRYPT_CTX_READY"],[Dj,"MONGOCRYPT_CTX_DONE"]]),C81=["tlsInsecure","tlsAllowInvalidCertificates","tlsAllowInvalidHostnames","tlsDisableOCSPEndpointCheck","tlsDisableCertificateRevocationCheck"];function rM(A){if(process.env.MONGODB_CRYPT_DEBUG)console.error(A)}var Q81;class $j{constructor(A,F=C4.pluckBSONSerializeOptions(A)){this.options=A,this.bsonOptions=F}async execute(A,F,B){let{_keyVaultNamespace:D,_keyVaultClient:$,_metaDataClient:J,_mongocryptdClient:X,_mongocryptdManager:E}=A,Y=null,G=()=>F.status,H=()=>F.state;while(H()!==Dj&&H()!==E7)switch(B.signal?.throwIfAborted(),rM(`[context#${F.id}] ${q81.get(H())||H()}`),H()){case tM:{let W=C4.deserialize(F.nextMongoOperation());if(!J)throw new Y9.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_COLLINFO but metadata client is undefined");let q=this.fetchCollectionInfo(J,F.ns,W,B);for await(let C of q)if(F.addMongoOperationResponse(C4.serialize(C)),H()===E7)break;if(H()===E7)break;F.finishMongoOperation();break}case oM:{let W=F.nextMongoOperation();if(H()===E7)break;if(!X)throw new Y9.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_MARKINGS but mongocryptdClient is undefined");let q=E?await E.withRespawn(this.markCommand.bind(this,X,F.ns,W,B)):await this.markCommand(X,F.ns,W,B);F.addMongoOperationResponse(q),F.finishMongoOperation();break}case eM:{let W=F.nextMongoOperation(),q=await this.fetchKeys($,D,W,B);if(q.length===0)Y=Q81??=C4.serialize({v:[]});for(let C of q)F.addMongoOperationResponse(C4.serialize(C));F.finishMongoOperation();break}case Aj:{let W=await A.askForKMSCredentials();F.provideKMSProviders(C4.serialize(W));break}case Fj:{await Promise.all(this.requests(F,B)),F.finishKMSRequests();break}case Bj:{let W=F.finalize();if(H()===E7){let q=G().message||"Finalization error";throw new Y9.MongoCryptError(q)}Y=W;break}default:throw new Y9.MongoCryptError(`Unknown state: ${H()}`)}if(H()===E7||Y==null){let W=G().message;if(!W)rM("unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.");throw new Y9.MongoCryptError(W??"unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.")}return Y}async kmsRequest(A,F){let B=A.endpoint.split(":"),D=B[1]!=null?Number.parseInt(B[1],10):W81,$={host:B[0],servername:B[0],port:D,...G81.autoSelectSocketOptions(this.options.socketOptions||{})},J=A.message,X=new E9.BufferPool,E,Y;function G(){for(let Q of[Y,E])if(Q)Q.destroy()}function H(Q){return new Y9.MongoCryptError("KMS request failed",{cause:Q})}function W(){return new Y9.MongoCryptError("KMS request closed")}let q=this.options.tlsOptions;if(q){let Q=A.kmsProvider,K=q[Q];if(K){let U=this.validateTlsOptions(Q,K);if(U)throw U;try{await this.setTlsOptions(K,$)}catch(Z){throw H(Z)}}}let C;try{if(this.options.proxyOptions&&this.options.proxyOptions.proxyHost){E=new J81.Socket;let{promise:Z,reject:V,resolve:w}=E9.promiseWithResolvers();E.once("error",(I)=>V(H(I))).once("close",()=>V(W())).once("connect",()=>w());let R={...$,host:this.options.proxyOptions.proxyHost,port:this.options.proxyOptions.proxyPort||1080};E.connect(R),await Z;try{hA??=H81(),$.socket=(await hA.SocksClient.createConnection({existing_socket:E,command:"connect",destination:{host:$.host,port:$.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:this.options.proxyOptions.proxyUsername,password:this.options.proxyOptions.proxyPassword}})).socket}catch(I){throw H(I)}}Y=X81.connect($,()=>{Y.write(J)});let{promise:Q,reject:K,resolve:U}=E9.promiseWithResolvers();C=E9.addAbortListener(F?.signal,function(){G(),K(this.reason)}),Y.once("error",(Z)=>K(H(Z))).once("close",()=>K(W())).on("data",(Z)=>{X.append(Z);while(A.bytesNeeded>0&&X.length){let V=Math.min(A.bytesNeeded,X.length);A.addResponse(X.read(V))}if(A.bytesNeeded<=0)U()}),await(F?.timeoutContext?.csotEnabled()?Promise.all([Q,aM.Timeout.expires(F.timeoutContext?.remainingTimeMS)]):Q)}catch(Q){if(Q instanceof aM.TimeoutError)throw new Y81.MongoOperationTimeoutError("KMS request timed out");throw Q}finally{G(),C?.[E9.kDispose]()}}*requests(A,F){for(let B=A.nextKMSRequest();B!=null;B=A.nextKMSRequest())yield this.kmsRequest(B,F)}validateTlsOptions(A,F){let B=Object.keys(F);for(let D of C81)if(B.includes(D))return new Y9.MongoCryptError(`Insecure TLS options prohibited for ${A}: ${D}`)}async setTlsOptions(A,F){if(A.tlsCertificateKeyFile){let B=await nM.readFile(A.tlsCertificateKeyFile);F.cert=F.key=B}if(A.tlsCAFile)F.ca=await nM.readFile(A.tlsCAFile);if(A.tlsCertificateKeyFilePassword)F.passphrase=A.tlsCertificateKeyFilePassword}fetchCollectionInfo(A,F,B,D){let{db:$}=E9.MongoDBCollectionNamespace.fromString(F);return A.db($).listCollections(B,{promoteLongs:!1,promoteValues:!1,timeoutContext:D?.timeoutContext&&new sM.CursorTimeoutContext(D?.timeoutContext,Symbol()),signal:D?.signal,nameOnly:!1})}async markCommand(A,F,B,D){let{db:$}=E9.MongoDBCollectionNamespace.fromString(F),J={promoteLongs:!1,promoteValues:!1},X=C4.deserialize(B,J),E={timeoutMS:void 0,signal:void 0};if(D?.timeoutContext?.csotEnabled())E.timeoutMS=D.timeoutContext.remainingTimeMS;if(D?.signal)E.signal=D.signal;let Y=await A.db($).command(X,{...J,...E});return C4.serialize(Y,this.bsonOptions)}fetchKeys(A,F,B,D){let{db:$,collection:J}=E9.MongoDBCollectionNamespace.fromString(F),X={timeoutContext:void 0,signal:void 0};if(D?.timeoutContext!=null)X.timeoutContext=new sM.CursorTimeoutContext(D.timeoutContext,Symbol());if(D?.signal!=null)X.signal=D.signal;return A.db($).collection(J,{readConcern:{level:"majority"}}).find(C4.deserialize(B),X).toArray()}}Jj.StateMachine=$j});var lD=z((Yj)=>{Object.defineProperty(Yj,"__esModule",{value:!0});Yj.ClientEncryption=void 0;Yj.autoSelectSocketOptions=mA;var J6=y1(),K81=U3(),vA=M2(),X6=F1(),z81=KH(),G9=j8(),Ej=LH(),cD=RH();class pD{static getMongoCrypt(){let A=K81.getMongoDBClientEncryption();if("kModuleError"in A)throw A.kModuleError;return A.MongoCrypt}constructor(A,F){this._client=A,this._proxyOptions=F.proxyOptions??{},this._tlsOptions=F.tlsOptions??{},this._kmsProviders=F.kmsProviders||{};let{timeoutMS:B}=X6.resolveTimeoutOptions(A,F);if(this._timeoutMS=B,this._credentialProviders=F.credentialProviders,F.credentialProviders?.aws&&!Ej.isEmptyCredentials("aws",this._kmsProviders))throw new G9.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");if(F.keyVaultNamespace==null)throw new G9.MongoCryptInvalidArgumentError("Missing required option `keyVaultNamespace`");let D={...F,cryptoCallbacks:z81,kmsProviders:!Buffer.isBuffer(this._kmsProviders)?J6.serialize(this._kmsProviders):this._kmsProviders};this._keyVaultNamespace=F.keyVaultNamespace,this._keyVaultClient=F.keyVaultClient||A;let $=pD.getMongoCrypt();this._mongoCrypt=new $(D)}async createDataKey(A,F={}){if(F.keyAltNames&&!Array.isArray(F.keyAltNames))throw new G9.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but was of type ${typeof F.keyAltNames}.`);let B=void 0;if(F.keyAltNames&&F.keyAltNames.length>0)B=F.keyAltNames.map((q,C)=>{if(typeof q!=="string")throw new G9.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but item at index ${C} was of type ${typeof q}`);return J6.serialize({keyAltName:q})});let D=void 0;if(F.keyMaterial)D=J6.serialize({keyMaterial:F.keyMaterial});let $=J6.serialize({provider:A,...F.masterKey}),J=this._mongoCrypt.makeDataKeyContext($,{keyAltNames:B,keyMaterial:D}),X=new cD.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:mA(this._client.s.options)}),E=F?.timeoutContext??vA.TimeoutContext.create(X6.resolveTimeoutOptions(this._client,{timeoutMS:this._timeoutMS})),Y=J6.deserialize(await X.execute(this,J,{timeoutContext:E})),{db:G,collection:H}=X6.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),{insertedId:W}=await this._keyVaultClient.db(G).collection(H).insertOne(Y,{writeConcern:{w:"majority"},timeoutMS:E?.csotEnabled()?E?.getRemainingTimeMSOrThrow():void 0});return W}async rewrapManyDataKey(A,F){let B=void 0;if(F){let q=Object.assign({provider:F.provider},F.masterKey);B=J6.serialize(q)}let D=J6.serialize(A),$=this._mongoCrypt.makeRewrapManyDataKeyContext(D,B),J=new cD.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:mA(this._client.s.options)}),X=vA.TimeoutContext.create(X6.resolveTimeoutOptions(this._client,{timeoutMS:this._timeoutMS})),{v:E}=J6.deserialize(await J.execute(this,$,{timeoutContext:X}));if(E.length===0)return{};let{db:Y,collection:G}=X6.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),H=E.map((q)=>({updateOne:{filter:{_id:q._id},update:{$set:{masterKey:q.masterKey,keyMaterial:q.keyMaterial},$currentDate:{updateDate:!0}}}}));return{bulkWriteResult:await this._keyVaultClient.db(Y).collection(G).bulkWrite(H,{writeConcern:{w:"majority"},timeoutMS:X.csotEnabled()?X?.remainingTimeMS:void 0})}}async deleteKey(A){let{db:F,collection:B}=X6.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(F).collection(B).deleteOne({_id:A},{writeConcern:{w:"majority"},timeoutMS:this._timeoutMS})}getKeys(){let{db:A,collection:F}=X6.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return this._keyVaultClient.db(A).collection(F).find({},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKey(A){let{db:F,collection:B}=X6.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(F).collection(B).findOne({_id:A},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKeyByAltName(A){let{db:F,collection:B}=X6.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(F).collection(B).findOne({keyAltNames:A},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async addKeyAltName(A,F){let{db:B,collection:D}=X6.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(B).collection(D).findOneAndUpdate({_id:A},{$addToSet:{keyAltNames:F}},{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async removeKeyAltName(A,F){let{db:B,collection:D}=X6.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),$=[{$set:{keyAltNames:{$cond:[{$eq:["$keyAltNames",[F]]},"$$REMOVE",{$filter:{input:"$keyAltNames",cond:{$ne:["$$this",F]}}}]}}}];return await this._keyVaultClient.db(B).collection(D).findOneAndUpdate({_id:A},$,{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async createEncryptedCollection(A,F,B){let{provider:D,masterKey:$,createCollectionOptions:{encryptedFields:{...J},...X}}=B,E=this._timeoutMS!=null?vA.TimeoutContext.create(X6.resolveTimeoutOptions(this._client,{timeoutMS:this._timeoutMS})):void 0;if(Array.isArray(J.fields)){let Y=J.fields.map(async(W)=>W==null||typeof W!=="object"||W.keyId!=null?W:{...W,keyId:await this.createDataKey(D,{masterKey:$,timeoutContext:E?.csotEnabled()?E?.clone():void 0})}),G=await Promise.allSettled(Y);J.fields=G.map((W,q)=>W.status==="fulfilled"?W.value:J.fields[q]);let H=G.find((W)=>W.status==="rejected");if(H!=null)throw new G9.MongoCryptCreateDataKeyError(J,{cause:H.reason})}try{return{collection:await A.createCollection(F,{...X,encryptedFields:J,timeoutMS:E?.csotEnabled()?E?.getRemainingTimeMSOrThrow():void 0}),encryptedFields:J}}catch(Y){throw new G9.MongoCryptCreateEncryptedCollectionError(J,{cause:Y})}}async encrypt(A,F){return await this._encrypt(A,!1,F)}async encryptExpression(A,F){return await this._encrypt(A,!0,F)}async decrypt(A){let F=J6.serialize({v:A}),B=this._mongoCrypt.makeExplicitDecryptionContext(F),D=new cD.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:mA(this._client.s.options)}),$=this._timeoutMS!=null?vA.TimeoutContext.create(X6.resolveTimeoutOptions(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:J}=J6.deserialize(await D.execute(this,B,{timeoutContext:$}));return J}async askForKMSCredentials(){return await Ej.refreshKMSCredentials(this._kmsProviders,this._credentialProviders)}static get libmongocryptVersion(){return pD.getMongoCrypt().libmongocryptVersion}async _encrypt(A,F,B){let{algorithm:D,keyId:$,keyAltName:J,contentionFactor:X,queryType:E,rangeOptions:Y}=B,G={expressionMode:F,algorithm:D};if($)G.keyId=$.buffer;if(J){if($)throw new G9.MongoCryptInvalidArgumentError('"options" cannot contain both "keyId" and "keyAltName"');if(typeof J!=="string")throw new G9.MongoCryptInvalidArgumentError(`"options.keyAltName" must be of type string, but was of type ${typeof J}`);G.keyAltName=J6.serialize({keyAltName:J})}if(typeof X==="number"||typeof X==="bigint")G.contentionFactor=X;if(typeof E==="string")G.queryType=E;if(typeof Y==="object")G.rangeOptions=J6.serialize(Y);let H=J6.serialize({v:A}),W=new cD.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:mA(this._client.s.options)}),q=this._mongoCrypt.makeExplicitEncryptionContext(H,G),C=this._timeoutMS!=null?vA.TimeoutContext.create(X6.resolveTimeoutOptions(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:Q}=J6.deserialize(await W.execute(this,q,{timeoutContext:C}));return Q}}Yj.ClientEncryption=pD;function mA(A){let F={autoSelectFamily:!0};if("autoSelectFamily"in A)F.autoSelectFamily=A.autoSelectFamily;if("autoSelectFamilyAttemptTimeout"in A)F.autoSelectFamilyAttemptTimeout=A.autoSelectFamilyAttemptTimeout;return F}});var qj=z((Hj)=>{Object.defineProperty(Hj,"__esModule",{value:!0});Hj.MongocryptdManager=void 0;var Z81=s();class iD{constructor(A={}){if(this.spawnPath="",this.spawnArgs=[],this.uri=typeof A.mongocryptdURI==="string"&&A.mongocryptdURI.length>0?A.mongocryptdURI:iD.DEFAULT_MONGOCRYPTD_URI,this.bypassSpawn=!!A.mongocryptdBypassSpawn,Object.hasOwn(A,"mongocryptdSpawnPath")&&A.mongocryptdSpawnPath)this.spawnPath=A.mongocryptdSpawnPath;if(Object.hasOwn(A,"mongocryptdSpawnArgs")&&Array.isArray(A.mongocryptdSpawnArgs))this.spawnArgs=this.spawnArgs.concat(A.mongocryptdSpawnArgs);if(this.spawnArgs.filter((F)=>typeof F==="string").every((F)=>F.indexOf("--idleShutdownTimeoutSecs")<0))this.spawnArgs.push("--idleShutdownTimeoutSecs","60")}async spawn(){let A=this.spawnPath||"mongocryptd",{spawn:F}=i("child_process");this._child=F(A,this.spawnArgs,{stdio:"ignore",detached:!0}),this._child.on("error",()=>{}),this._child.unref()}async withRespawn(A){try{return await A()}catch(B){if(!(B instanceof Z81.MongoNetworkTimeoutError&&!this.bypassSpawn))throw B}return await this.spawn(),await A()}}Hj.MongocryptdManager=iD;iD.DEFAULT_MONGOCRYPTD_URI="mongodb://localhost:27020"});var IH=z((Zj)=>{var Uj;Object.defineProperty(Zj,"__esModule",{value:!0});Zj.AutoEncrypter=Zj.AutoEncryptionLoggerLevel=void 0;var Cj=i("net"),dA=y1(),V81=v0(),w81=U3(),NH=s(),L81=e4(),R81=F1(),PH=lD(),N81=KH(),Qj=j8(),P81=qj(),Kj=LH(),zj=RH();Zj.AutoEncryptionLoggerLevel=Object.freeze({FatalError:0,Error:1,Warning:2,Info:3,Trace:4});class nD{static getMongoCrypt(){let A=w81.getMongoDBClientEncryption();if("kModuleError"in A)throw A.kModuleError;return A.MongoCrypt}constructor(A,F){if(this[Uj]=!1,this._client=A,this._bypassEncryption=F.bypassAutoEncryption===!0,this._keyVaultNamespace=F.keyVaultNamespace||"admin.datakeys",this._keyVaultClient=F.keyVaultClient||A,this._metaDataClient=F.metadataClient||A,this._proxyOptions=F.proxyOptions||{},this._tlsOptions=F.tlsOptions||{},this._kmsProviders=F.kmsProviders||{},this._credentialProviders=F.credentialProviders,F.credentialProviders?.aws&&!Kj.isEmptyCredentials("aws",this._kmsProviders))throw new Qj.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");let B={enableMultipleCollinfo:!0,cryptoCallbacks:N81};if(F.schemaMap)B.schemaMap=Buffer.isBuffer(F.schemaMap)?F.schemaMap:dA.serialize(F.schemaMap);if(F.encryptedFieldsMap)B.encryptedFieldsMap=Buffer.isBuffer(F.encryptedFieldsMap)?F.encryptedFieldsMap:dA.serialize(F.encryptedFieldsMap);if(B.kmsProviders=!Buffer.isBuffer(this._kmsProviders)?dA.serialize(this._kmsProviders):this._kmsProviders,F.options?.logger)B.logger=F.options.logger;if(F.extraOptions&&F.extraOptions.cryptSharedLibPath)B.cryptSharedLibPath=F.extraOptions.cryptSharedLibPath;if(F.bypassQueryAnalysis)B.bypassQueryAnalysis=F.bypassQueryAnalysis;if(F.keyExpirationMS!=null)B.keyExpirationMS=F.keyExpirationMS;if(this._bypassMongocryptdAndCryptShared=this._bypassEncryption||!!F.bypassQueryAnalysis,F.extraOptions&&F.extraOptions.cryptSharedLibSearchPaths)B.cryptSharedLibSearchPaths=F.extraOptions.cryptSharedLibSearchPaths;else if(!this._bypassMongocryptdAndCryptShared)B.cryptSharedLibSearchPaths=["$SYSTEM"];let D=nD.getMongoCrypt();if(this._mongocrypt=new D(B),this._contextCounter=0,F.extraOptions&&F.extraOptions.cryptSharedLibRequired&&!this.cryptSharedLibVersionInfo)throw new Qj.MongoCryptInvalidArgumentError("`cryptSharedLibRequired` set but no crypt_shared library loaded");if(!this._bypassMongocryptdAndCryptShared&&!this.cryptSharedLibVersionInfo){this._mongocryptdManager=new P81.MongocryptdManager(F.extraOptions);let $={serverSelectionTimeoutMS:1e4};if((F.extraOptions==null||typeof F.extraOptions.mongocryptdURI!=="string")&&!Cj.getDefaultAutoSelectFamily)$.family=4;if(Cj.getDefaultAutoSelectFamily)Object.assign($,PH.autoSelectSocketOptions(this._client.s?.options??{}));this._mongocryptdClient=new L81.MongoClient(this._mongocryptdManager.uri,$)}}async init(){if(this._bypassMongocryptdAndCryptShared||this.cryptSharedLibVersionInfo)return;if(!this._mongocryptdManager)throw new NH.MongoRuntimeError("Reached impossible state: mongocryptdManager is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdClient)throw new NH.MongoRuntimeError("Reached impossible state: mongocryptdClient is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdManager.bypassSpawn)await this._mongocryptdManager.spawn();try{return await this._mongocryptdClient.connect()}catch(A){throw new NH.MongoRuntimeError("Unable to connect to `mongocryptd`, please make sure it is running or in your PATH for auto-spawn",{cause:A})}}async close(){await this._mongocryptdClient?.close()}async encrypt(A,F,B={}){if(B.signal?.throwIfAborted(),this._bypassEncryption)return F;let D=Buffer.isBuffer(F)?F:dA.serialize(F,B),$=this._mongocrypt.makeEncryptionContext(R81.MongoDBCollectionNamespace.fromString(A).db,D);$.id=this._contextCounter++,$.ns=A,$.document=F;let J=new zj.StateMachine({promoteValues:!1,promoteLongs:!1,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:PH.autoSelectSocketOptions(this._client.s.options)});return dA.deserialize(await J.execute(this,$,B),{promoteValues:!1,promoteLongs:!1})}async decrypt(A,F={}){F.signal?.throwIfAborted();let B=this._mongocrypt.makeDecryptionContext(A);return B.id=this._contextCounter++,await new zj.StateMachine({...F,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:PH.autoSelectSocketOptions(this._client.s.options)}).execute(this,B,F)}async askForKMSCredentials(){return await Kj.refreshKMSCredentials(this._kmsProviders,this._credentialProviders)}get cryptSharedLibVersionInfo(){return this._mongocrypt.cryptSharedLibVersionInfo}static get libmongocryptVersion(){return nD.getMongoCrypt().libmongocryptVersion}}Zj.AutoEncrypter=nD;Uj=V81.kDecorateResult});var Pj=z((Rj)=>{Object.defineProperty(Rj,"__esModule",{value:!0});Rj.Encrypter=void 0;var M81=IH(),j81=v0(),T81=U3(),wj=s(),k81=e4();class Lj{constructor(A,F,B){if(typeof B.autoEncryption!=="object")throw new wj.MongoInvalidArgumentError('Option "autoEncryption" must be specified');if(this.internalClient=null,this.bypassAutoEncryption=!!B.autoEncryption.bypassAutoEncryption,this.needsConnecting=!1,B.maxPoolSize===0&&B.autoEncryption.keyVaultClient==null)B.autoEncryption.keyVaultClient=A;else if(B.autoEncryption.keyVaultClient==null)B.autoEncryption.keyVaultClient=this.getInternalClient(A,F,B);if(this.bypassAutoEncryption)B.autoEncryption.metadataClient=void 0;else if(B.maxPoolSize===0)B.autoEncryption.metadataClient=A;else B.autoEncryption.metadataClient=this.getInternalClient(A,F,B);if(B.proxyHost)B.autoEncryption.proxyOptions={proxyHost:B.proxyHost,proxyPort:B.proxyPort,proxyUsername:B.proxyUsername,proxyPassword:B.proxyPassword};this.autoEncrypter=new M81.AutoEncrypter(A,B.autoEncryption)}getInternalClient(A,F,B){let D=this.internalClient;if(D==null){let $={};for(let J of[...Object.getOwnPropertyNames(B),...Object.getOwnPropertySymbols(B)]){if(["autoEncryption","minPoolSize","servers","caseTranslate","dbName"].includes(J))continue;Reflect.set($,J,Reflect.get(B,J))}$.minPoolSize=0,D=new k81.MongoClient(F,$),this.internalClient=D;for(let J of j81.MONGO_CLIENT_EVENTS)for(let X of A.listeners(J))D.on(J,X);A.on("newListener",(J,X)=>{D?.on(J,X)}),this.needsConnecting=!0}return D}async connectInternalClient(){let A=this.internalClient;if(this.needsConnecting&&A!=null)this.needsConnecting=!1,await A.connect()}async close(A){let F;try{await this.autoEncrypter.close()}catch(D){F=D}let B=this.internalClient;if(B!=null&&A!==B)return await B.close();if(F!=null)throw F}static checkForMongoCrypt(){let A=T81.getMongoDBClientEncryption();if("kModuleError"in A)throw new wj.MongoMissingDependencyError("Auto-encryption requested, but the module is not installed. Please add `mongodb-client-encryption` as a dependency of your project",{cause:A.kModuleError,dependencyName:"mongodb-client-encryption"})}}Rj.Encrypter=Lj});var MH=z((Ij)=>{Object.defineProperty(Ij,"__esModule",{value:!0});Ij.ConnectionPoolMetrics=void 0;class Q4{constructor(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}markPinned(A){if(A===Q4.TXN)this.txnConnections+=1;else if(A===Q4.CURSOR)this.cursorConnections+=1;else this.otherConnections+=1}markUnpinned(A){if(A===Q4.TXN)this.txnConnections-=1;else if(A===Q4.CURSOR)this.cursorConnections-=1;else this.otherConnections-=1}info(A){return`Timed out while checking out a connection from connection pool: maxPoolSize: ${A}, connections in use by cursors: ${this.cursorConnections}, connections in use by transactions: ${this.txnConnections}, connections in use by other operations: ${this.otherConnections}`}reset(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}}Ij.ConnectionPoolMetrics=Q4;Q4.TXN="txn";Q4.CURSOR="cursor";Q4.OTHER="other"});var lA=z((Oj)=>{Object.defineProperty(Oj,"__esModule",{value:!0});Oj.ServerDescription=void 0;Oj.parseServerType=Tj;Oj.compareTopologyVersion=kj;var k8=y1(),O81=s(),O8=F1(),i0=P6(),u81=new Set([i0.ServerType.RSPrimary,i0.ServerType.Standalone,i0.ServerType.Mongos,i0.ServerType.LoadBalancer]),S81=new Set([i0.ServerType.RSPrimary,i0.ServerType.RSSecondary,i0.ServerType.Mongos,i0.ServerType.Standalone,i0.ServerType.LoadBalancer]);class jj{constructor(A,F,B={}){if(A==null||A==="")throw new O81.MongoRuntimeError("ServerDescription must be provided with a non-empty address");this.address=typeof A==="string"?O8.HostAddress.fromString(A).toString():A.toString(),this.type=Tj(F,B),this.hosts=F?.hosts?.map((D)=>D.toLowerCase())??[],this.passives=F?.passives?.map((D)=>D.toLowerCase())??[],this.arbiters=F?.arbiters?.map((D)=>D.toLowerCase())??[],this.tags=F?.tags??{},this.minWireVersion=F?.minWireVersion??0,this.maxWireVersion=F?.maxWireVersion??0,this.roundTripTime=B?.roundTripTime??-1,this.minRoundTripTime=B?.minRoundTripTime??0,this.lastUpdateTime=O8.now(),this.lastWriteDate=F?.lastWrite?.lastWriteDate??0,this.error=B.error??null,this.error?.stack,this.topologyVersion=this.error?.topologyVersion??F?.topologyVersion??null,this.setName=F?.setName??null,this.setVersion=F?.setVersion??null,this.electionId=F?.electionId??null,this.logicalSessionTimeoutMinutes=F?.logicalSessionTimeoutMinutes??null,this.maxMessageSizeBytes=F?.maxMessageSizeBytes??null,this.maxWriteBatchSize=F?.maxWriteBatchSize??null,this.maxBsonObjectSize=F?.maxBsonObjectSize??null,this.primary=F?.primary??null,this.me=F?.me?.toLowerCase()??null,this.$clusterTime=F?.$clusterTime??null,this.iscryptd=Boolean(F?.iscryptd)}get hostAddress(){return O8.HostAddress.fromString(this.address)}get allHosts(){return this.hosts.concat(this.arbiters).concat(this.passives)}get isReadable(){return this.type===i0.ServerType.RSSecondary||this.isWritable}get isDataBearing(){return S81.has(this.type)}get isWritable(){return u81.has(this.type)}get host(){let A=`:${this.port}`.length;return this.address.slice(0,-A)}get port(){let A=this.address.split(":").pop();return A?Number.parseInt(A,10):27017}equals(A){let F=this.topologyVersion===A?.topologyVersion||kj(this.topologyVersion,A?.topologyVersion)===0,B=this.electionId!=null&&A?.electionId!=null?O8.compareObjectId(this.electionId,A.electionId)===0:this.electionId===A?.electionId;return A!=null&&A.iscryptd===this.iscryptd&&O8.errorStrictEqual(this.error,A.error)&&this.type===A.type&&this.minWireVersion===A.minWireVersion&&O8.arrayStrictEqual(this.hosts,A.hosts)&&f81(this.tags,A.tags)&&this.setName===A.setName&&this.setVersion===A.setVersion&&B&&this.primary===A.primary&&this.logicalSessionTimeoutMinutes===A.logicalSessionTimeoutMinutes&&F}}Oj.ServerDescription=jj;function Tj(A,F){if(F?.loadBalanced)return i0.ServerType.LoadBalancer;if(!A||!A.ok)return i0.ServerType.Unknown;if(A.isreplicaset)return i0.ServerType.RSGhost;if(A.msg&&A.msg==="isdbgrid")return i0.ServerType.Mongos;if(A.setName)if(A.hidden)return i0.ServerType.RSOther;else if(A.isWritablePrimary)return i0.ServerType.RSPrimary;else if(A.secondary)return i0.ServerType.RSSecondary;else if(A.arbiterOnly)return i0.ServerType.RSArbiter;else return i0.ServerType.RSOther;return i0.ServerType.Standalone}function f81(A,F){let B=Object.keys(A),D=Object.keys(F);return B.length===D.length&&B.every(($)=>F[$]===A[$])}function kj(A,F){if(A==null||F==null)return-1;if(!A.processId.equals(F.processId))return-1;let B=typeof A.counter==="bigint"?k8.Long.fromBigInt(A.counter):k8.Long.isLong(A.counter)?A.counter:k8.Long.fromNumber(A.counter),D=typeof F.counter==="bigint"?k8.Long.fromBigInt(F.counter):k8.Long.isLong(F.counter)?F.counter:k8.Long.fromNumber(F.counter);return B.compare(D)}});var TH=z((bj)=>{Object.defineProperty(bj,"__esModule",{value:!0});bj.TopologyDescription=void 0;var g81=y1(),aD=n9(),sD=s(),jH=F1(),x1=P6(),H9=lA(),b81=aD.MIN_SUPPORTED_SERVER_VERSION,y81=aD.MAX_SUPPORTED_SERVER_VERSION,Sj=aD.MIN_SUPPORTED_WIRE_VERSION,fj=aD.MAX_SUPPORTED_WIRE_VERSION,h81=new Set([x1.ServerType.Mongos,x1.ServerType.Unknown]),_j=new Set([x1.ServerType.Mongos,x1.ServerType.Standalone]),xj=new Set([x1.ServerType.RSSecondary,x1.ServerType.RSArbiter,x1.ServerType.RSOther]);class cA{constructor(A,F=null,B=null,D=null,$=null,J=null,X=null){X=X??{},this.type=A??x1.TopologyType.Unknown,this.servers=F??new Map,this.stale=!1,this.compatible=!0,this.heartbeatFrequencyMS=X.heartbeatFrequencyMS??0,this.localThresholdMS=X.localThresholdMS??15,this.setName=B??null,this.maxElectionId=$??null,this.maxSetVersion=D??null,this.commonWireVersion=J??0;for(let E of this.servers.values()){if(E.type===x1.ServerType.Unknown||E.type===x1.ServerType.LoadBalancer)continue;if(E.minWireVersion>fj)this.compatible=!1,this.compatibilityError=`Server at ${E.address} requires wire version ${E.minWireVersion}, but this version of the driver only supports up to ${fj} (MongoDB ${y81})`;if(E.maxWireVersion<Sj){this.compatible=!1,this.compatibilityError=`Server at ${E.address} reports wire version ${E.maxWireVersion}, but this version of the driver requires at least ${Sj} (MongoDB ${b81}).`;break}}this.logicalSessionTimeoutMinutes=null;for(let[,E]of this.servers)if(E.isReadable){if(E.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=null;break}if(this.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=E.logicalSessionTimeoutMinutes;continue}this.logicalSessionTimeoutMinutes=Math.min(this.logicalSessionTimeoutMinutes,E.logicalSessionTimeoutMinutes)}}updateFromSrvPollingEvent(A,F=0){let B=A.hostnames(),D=new Set(this.servers.keys()),$=new Set(B),J=new Set;for(let E of D)if($.delete(E),!B.has(E))J.add(E);if($.size===0&&J.size===0)return this;let X=new Map(this.servers);for(let E of J)X.delete(E);if($.size>0){if(F===0)for(let E of $)X.set(E,new H9.ServerDescription(E));else if(X.size<F){let E=jH.shuffle($,F-X.size);for(let Y of E)X.set(Y,new H9.ServerDescription(Y))}}return new cA(this.type,X,this.setName,this.maxSetVersion,this.maxElectionId,this.commonWireVersion,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}update(A){let F=A.address,{type:B,setName:D,maxSetVersion:$,maxElectionId:J,commonWireVersion:X}=this,E=A.type,Y=new Map(this.servers);if(A.maxWireVersion!==0)if(X==null)X=A.maxWireVersion;else X=Math.min(X,A.maxWireVersion);if(typeof A.setName==="string"&&typeof D==="string"&&A.setName!==D)if(B===x1.TopologyType.Single)A=new H9.ServerDescription(F);else Y.delete(F);if(Y.set(F,A),B===x1.TopologyType.Single)return new cA(x1.TopologyType.Single,Y,D,$,J,X,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS});if(B===x1.TopologyType.Unknown)if(E===x1.ServerType.Standalone&&this.servers.size!==1)Y.delete(F);else B=v81(E);if(B===x1.TopologyType.Sharded){if(!h81.has(E))Y.delete(F)}if(B===x1.TopologyType.ReplicaSetNoPrimary){if(_j.has(E))Y.delete(F);if(E===x1.ServerType.RSPrimary){let G=gj(Y,A,D,$,J);B=G[0],D=G[1],$=G[2],J=G[3]}else if(xj.has(E)){let G=d81(Y,A,D);B=G[0],D=G[1]}}if(B===x1.TopologyType.ReplicaSetWithPrimary)if(_j.has(E))Y.delete(F),B=Y7(Y);else if(E===x1.ServerType.RSPrimary){let G=gj(Y,A,D,$,J);B=G[0],D=G[1],$=G[2],J=G[3]}else if(xj.has(E))B=m81(Y,A,D);else B=Y7(Y);return new cA(B,Y,D,$,J,X,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}get error(){let A=Array.from(this.servers.values()).filter((F)=>F.error);if(A.length>0)return A[0].error;return null}get hasKnownServers(){return Array.from(this.servers.values()).some((A)=>A.type!==x1.ServerType.Unknown)}get hasDataBearingServers(){return Array.from(this.servers.values()).some((A)=>A.isDataBearing)}hasServer(A){return this.servers.has(A)}toJSON(){return g81.EJSON.serialize(this)}}bj.TopologyDescription=cA;function v81(A){switch(A){case x1.ServerType.Standalone:return x1.TopologyType.Single;case x1.ServerType.Mongos:return x1.TopologyType.Sharded;case x1.ServerType.RSPrimary:return x1.TopologyType.ReplicaSetWithPrimary;case x1.ServerType.RSOther:case x1.ServerType.RSSecondary:return x1.TopologyType.ReplicaSetNoPrimary;default:return x1.TopologyType.Unknown}}function gj(A,F,B=null,D=null,$=null){let J=(Y,G,H)=>{return`primary marked stale due to electionId/setVersion mismatch: server setVersion: ${Y.setVersion}, server electionId: ${Y.electionId}, topology setVersion: ${G}, topology electionId: ${H}`};if(B=B||F.setName,B!==F.setName)return A.delete(F.address),[Y7(A),B,D,$];if(F.maxWireVersion>=17){let Y=jH.compareObjectId($,F.electionId),G=Y===0,H=Y===-1,W=(D??-1)<=(F.setVersion??-1);if(H||G&&W)$=F.electionId,D=F.setVersion;else return A.set(F.address,new H9.ServerDescription(F.address,void 0,{error:new sD.MongoStalePrimaryError(J(F,D,$))})),[Y7(A),B,D,$]}else{let Y=F.electionId?F.electionId:null;if(F.setVersion&&Y){if(D&&$){if(D>F.setVersion||jH.compareObjectId($,Y)>0)return A.set(F.address,new H9.ServerDescription(F.address,void 0,{error:new sD.MongoStalePrimaryError(J(F,D,$))})),[Y7(A),B,D,$]}$=F.electionId}if(F.setVersion!=null&&(D==null||F.setVersion>D))D=F.setVersion}for(let[Y,G]of A)if(G.type===x1.ServerType.RSPrimary&&G.address!==F.address){A.set(Y,new H9.ServerDescription(G.address,void 0,{error:new sD.MongoStalePrimaryError("primary marked stale due to discovery of newer primary")}));break}F.allHosts.forEach((Y)=>{if(!A.has(Y))A.set(Y,new H9.ServerDescription(Y))});let X=Array.from(A.keys()),E=F.allHosts;return X.filter((Y)=>E.indexOf(Y)===-1).forEach((Y)=>{A.delete(Y)}),[Y7(A),B,D,$]}function m81(A,F,B=null){if(B==null)throw new sD.MongoRuntimeError('Argument "setName" is required if connected to a replica set');if(B!==F.setName||F.me&&F.address!==F.me)A.delete(F.address);return Y7(A)}function d81(A,F,B=null){let D=x1.TopologyType.ReplicaSetNoPrimary;if(B=B??F.setName,B!==F.setName)return A.delete(F.address),[D,B];if(F.allHosts.forEach(($)=>{if(!A.has($))A.set($,new H9.ServerDescription($))}),F.me&&F.address!==F.me)A.delete(F.address);return[D,B]}function Y7(A){for(let F of A.values())if(F.type===x1.ServerType.RSPrimary)return x1.TopologyType.ReplicaSetWithPrimary;return x1.TopologyType.ReplicaSetNoPrimary}});var OH=z((vj)=>{Object.defineProperty(vj,"__esModule",{value:!0});vj.getReadPreference=p81;vj.isSharded=i81;var l81=s(),kH=t0(),hj=P6(),c81=TH();function p81(A){let F=A?.readPreference??kH.ReadPreference.primary;if(typeof F==="string")F=kH.ReadPreference.fromString(F);if(!(F instanceof kH.ReadPreference))throw new l81.MongoInvalidArgumentError('Option "readPreference" must be a ReadPreference instance');return F}function i81(A){if(A==null)return!1;if(A.description&&A.description.type===hj.ServerType.Mongos)return!0;if(A.description&&A.description instanceof c81.TopologyDescription)return Array.from(A.description.servers.values()).some((B)=>B.type===hj.ServerType.Mongos);return!1}});var uH=z((lj)=>{Object.defineProperty(lj,"__esModule",{value:!0});lj.Transaction=lj.TxnState=void 0;lj.isTransactionCommand=F51;var mj=s(),a81=c6(),r81=t0(),t81=P2();lj.TxnState=Object.freeze({NO_TRANSACTION:"NO_TRANSACTION",STARTING_TRANSACTION:"STARTING_TRANSACTION",TRANSACTION_IN_PROGRESS:"TRANSACTION_IN_PROGRESS",TRANSACTION_COMMITTED:"TRANSACTION_COMMITTED",TRANSACTION_COMMITTED_EMPTY:"TRANSACTION_COMMITTED_EMPTY",TRANSACTION_ABORTED:"TRANSACTION_ABORTED"});var o81={[lj.TxnState.NO_TRANSACTION]:[lj.TxnState.NO_TRANSACTION,lj.TxnState.STARTING_TRANSACTION],[lj.TxnState.STARTING_TRANSACTION]:[lj.TxnState.TRANSACTION_IN_PROGRESS,lj.TxnState.TRANSACTION_COMMITTED,lj.TxnState.TRANSACTION_COMMITTED_EMPTY,lj.TxnState.TRANSACTION_ABORTED],[lj.TxnState.TRANSACTION_IN_PROGRESS]:[lj.TxnState.TRANSACTION_IN_PROGRESS,lj.TxnState.TRANSACTION_COMMITTED,lj.TxnState.TRANSACTION_ABORTED],[lj.TxnState.TRANSACTION_COMMITTED]:[lj.TxnState.TRANSACTION_COMMITTED,lj.TxnState.TRANSACTION_COMMITTED_EMPTY,lj.TxnState.STARTING_TRANSACTION,lj.TxnState.NO_TRANSACTION],[lj.TxnState.TRANSACTION_ABORTED]:[lj.TxnState.STARTING_TRANSACTION,lj.TxnState.NO_TRANSACTION],[lj.TxnState.TRANSACTION_COMMITTED_EMPTY]:[lj.TxnState.TRANSACTION_COMMITTED_EMPTY,lj.TxnState.NO_TRANSACTION]},e81=new Set([lj.TxnState.STARTING_TRANSACTION,lj.TxnState.TRANSACTION_IN_PROGRESS]),A51=new Set([lj.TxnState.TRANSACTION_COMMITTED,lj.TxnState.TRANSACTION_COMMITTED_EMPTY,lj.TxnState.TRANSACTION_ABORTED]);class dj{constructor(A){A=A??{},this.state=lj.TxnState.NO_TRANSACTION,this.options={};let F=t81.WriteConcern.fromOptions(A);if(F){if(F.w===0)throw new mj.MongoTransactionError("Transactions do not support unacknowledged write concern");this.options.writeConcern=F}if(A.readConcern)this.options.readConcern=a81.ReadConcern.fromOptions(A);if(A.readPreference)this.options.readPreference=r81.ReadPreference.fromOptions(A);if(A.maxCommitTimeMS)this.options.maxTimeMS=A.maxCommitTimeMS;this._pinnedServer=void 0,this._recoveryToken=void 0}get server(){return this._pinnedServer}get recoveryToken(){return this._recoveryToken}get isPinned(){return!!this.server}get isStarting(){return this.state===lj.TxnState.STARTING_TRANSACTION}get isActive(){return e81.has(this.state)}get isCommitted(){return A51.has(this.state)}transition(A){let F=o81[this.state];if(F&&F.includes(A)){if(this.state=A,this.state===lj.TxnState.NO_TRANSACTION||this.state===lj.TxnState.STARTING_TRANSACTION||this.state===lj.TxnState.TRANSACTION_ABORTED)this.unpinServer();return}throw new mj.MongoRuntimeError(`Attempted illegal state transition from [${this.state}] to [${A}]`)}pinServer(A){if(this.isActive)this._pinnedServer=A}unpinServer(){this._pinnedServer=void 0}}lj.Transaction=dj;function F51(A){return!!(A.commitTransaction||A.abortTransaction)}});var S8=z((aj)=>{Object.defineProperty(aj,"__esModule",{value:!0});aj.ServerSessionPool=aj.ServerSession=aj.ClientSession=void 0;aj.maybeClearPinnedConnection=oD;aj.applySession=G51;aj.updateSessionFromResponse=H51;var tD=y1(),eD=MH(),D51=OH(),nj=v0(),C1=s(),$51=M6(),rD=T2(),SH=Q8(),J51=c6(),fH=t0(),X51=z8(),xH=P6(),_H=M2(),o1=uH(),s2=F1(),u8=P2(),E51=8;class A$ extends $51.TypedEventEmitter{constructor(A,F,B,D){super();if(this.timeoutContext=null,this.on("error",s2.noop),A==null)throw new C1.MongoRuntimeError("ClientSession requires a MongoClient");if(F==null||!(F instanceof gH))throw new C1.MongoRuntimeError("ClientSession requires a ServerSessionPool");if(B=B??{},this.snapshotEnabled=B.snapshot===!0,B.causalConsistency===!0&&this.snapshotEnabled)throw new C1.MongoInvalidArgumentError('Properties "causalConsistency" and "snapshot" are mutually exclusive');this.client=A,this.sessionPool=F,this.hasEnded=!1,this.clientOptions=D,this.timeoutMS=B.defaultTimeoutMS??A.s.options?.timeoutMS,this.explicit=!!B.explicit,this._serverSession=this.explicit?this.sessionPool.acquire():null,this.txnNumberIncrement=0;let $=this.explicit&&B.snapshot!==!0;this.supports={causalConsistency:B.causalConsistency??$},this.clusterTime=B.initialClusterTime,this.operationTime=void 0,this.owner=B.owner,this.defaultTransactionOptions={...B.defaultTransactionOptions},this.transaction=new o1.Transaction}get id(){return this.serverSession?.id}get serverSession(){let A=this._serverSession;if(A==null){if(this.explicit)throw new C1.MongoRuntimeError("Unexpected null serverSession for an explicit session");if(this.hasEnded)throw new C1.MongoRuntimeError("Unexpected null serverSession for an ended implicit session");A=this.sessionPool.acquire(),this._serverSession=A}return A}get loadBalanced(){return this.client.topology?.description.type===xH.TopologyType.LoadBalanced}pin(A){if(this.pinnedConnection)throw TypeError("Cannot pin multiple connections to the same session");this.pinnedConnection=A,A.emit(nj.PINNED,this.inTransaction()?eD.ConnectionPoolMetrics.TXN:eD.ConnectionPoolMetrics.CURSOR)}unpin(A){if(this.loadBalanced)return oD(this,A);this.transaction.unpinServer()}get isPinned(){return this.loadBalanced?!!this.pinnedConnection:this.transaction.isPinned}async endSession(A){try{if(this.inTransaction())await this.abortTransaction({...A,throwTimeout:!0})}catch(F){if(F.name==="MongoOperationTimeoutError")throw F;s2.squashError(F)}finally{if(!this.hasEnded){let F=this.serverSession;if(F!=null)this.sessionPool.release(F),this._serverSession=new B$(F);this.hasEnded=!0,this.emit("ended",this)}oD(this,{force:!0,...A})}}async asyncDispose(){await this.endSession({force:!0})}advanceOperationTime(A){if(this.operationTime==null){this.operationTime=A;return}if(A.greaterThan(this.operationTime))this.operationTime=A}advanceClusterTime(A){if(!A||typeof A!=="object")throw new C1.MongoInvalidArgumentError("input cluster time must be an object");if(!A.clusterTime||A.clusterTime._bsontype!=="Timestamp")throw new C1.MongoInvalidArgumentError('input cluster time "clusterTime" property must be a valid BSON Timestamp');if(!A.signature||A.signature.hash?._bsontype!=="Binary"||typeof A.signature.keyId!=="bigint"&&typeof A.signature.keyId!=="number"&&A.signature.keyId?._bsontype!=="Long")throw new C1.MongoInvalidArgumentError('input cluster time must have a valid "signature" property with BSON Binary hash and BSON Long keyId');xH._advanceClusterTime(this,A)}equals(A){if(!(A instanceof A$))return!1;if(this.id==null||A.id==null)return!1;return s2.ByteUtils.equals(this.id.id.buffer,A.id.id.buffer)}incrementTransactionNumber(){this.txnNumberIncrement+=1}inTransaction(){return this.transaction.isActive}startTransaction(A){if(this.snapshotEnabled)throw new C1.MongoCompatibilityError("Transactions are not supported in snapshot sessions");if(this.inTransaction())throw new C1.MongoTransactionError("Transaction already in progress");if(this.isPinned&&this.transaction.isCommitted)this.unpin();let F=s2.maxWireVersion(this.client.topology);if(D51.isSharded(this.client.topology)&&F!=null&&F<E51)throw new C1.MongoCompatibilityError("Transactions are not supported on sharded clusters in MongoDB < 4.2.");this.commitAttempted=!1,this.incrementTransactionNumber(),this.transaction=new o1.Transaction({readConcern:A?.readConcern??this.defaultTransactionOptions.readConcern??this.clientOptions?.readConcern,writeConcern:A?.writeConcern??this.defaultTransactionOptions.writeConcern??this.clientOptions?.writeConcern,readPreference:A?.readPreference??this.defaultTransactionOptions.readPreference??this.clientOptions?.readPreference,maxCommitTimeMS:A?.maxCommitTimeMS??this.defaultTransactionOptions.maxCommitTimeMS}),this.transaction.transition(o1.TxnState.STARTING_TRANSACTION)}async commitTransaction(A){if(this.transaction.state===o1.TxnState.NO_TRANSACTION)throw new C1.MongoTransactionError("No transaction started");if(this.transaction.state===o1.TxnState.STARTING_TRANSACTION||this.transaction.state===o1.TxnState.TRANSACTION_COMMITTED_EMPTY){this.transaction.transition(o1.TxnState.TRANSACTION_COMMITTED_EMPTY);return}if(this.transaction.state===o1.TxnState.TRANSACTION_ABORTED)throw new C1.MongoTransactionError("Cannot call commitTransaction after calling abortTransaction");let F={commitTransaction:1},B=typeof A?.timeoutMS==="number"?A.timeoutMS:typeof this.timeoutMS==="number"?this.timeoutMS:null,D=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;if(D!=null)if(B==null&&this.timeoutContext==null)u8.WriteConcern.apply(F,{wtimeoutMS:1e4,w:"majority",...D});else{let X=Object.keys(D);if(X.length>2||!X.includes("wtimeoutMS")&&!X.includes("wTimeoutMS"))u8.WriteConcern.apply(F,{...D,wtimeoutMS:void 0})}if(this.transaction.state===o1.TxnState.TRANSACTION_COMMITTED||this.commitAttempted)if(B==null&&this.timeoutContext==null)u8.WriteConcern.apply(F,{wtimeoutMS:1e4,...D,w:"majority"});else u8.WriteConcern.apply(F,{w:"majority",...D,wtimeoutMS:void 0});if(typeof this.transaction.options.maxTimeMS==="number")F.maxTimeMS=this.transaction.options.maxTimeMS;if(this.transaction.recoveryToken)F.recoveryToken=this.transaction.recoveryToken;let $=new SH.RunAdminCommandOperation(F,{session:this,readPreference:fH.ReadPreference.primary,bypassPinningCheck:!0}),J=this.timeoutContext??(typeof B==="number"?_H.TimeoutContext.create({serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS,timeoutMS:B}):null);try{await rD.executeOperation(this.client,$,J),this.commitAttempted=void 0;return}catch(X){if(this.commitAttempted=!0,X instanceof C1.MongoError&&C1.isRetryableWriteError(X)){u8.WriteConcern.apply(F,{wtimeoutMS:1e4,...D,w:"majority"}),this.unpin({force:!0});try{await rD.executeOperation(this.client,new SH.RunAdminCommandOperation(F,{session:this,readPreference:fH.ReadPreference.primary,bypassPinningCheck:!0}),J);return}catch(E){if(ij(E))E.addErrorLabel(C1.MongoErrorLabel.UnknownTransactionCommitResult);if(pj(E))this.unpin({error:E});throw E}}if(ij(X))X.addErrorLabel(C1.MongoErrorLabel.UnknownTransactionCommitResult);if(pj(X))this.unpin({error:X});throw X}finally{this.transaction.transition(o1.TxnState.TRANSACTION_COMMITTED)}}async abortTransaction(A){if(this.transaction.state===o1.TxnState.NO_TRANSACTION)throw new C1.MongoTransactionError("No transaction started");if(this.transaction.state===o1.TxnState.STARTING_TRANSACTION){this.transaction.transition(o1.TxnState.TRANSACTION_ABORTED);return}if(this.transaction.state===o1.TxnState.TRANSACTION_ABORTED)throw new C1.MongoTransactionError("Cannot call abortTransaction twice");if(this.transaction.state===o1.TxnState.TRANSACTION_COMMITTED||this.transaction.state===o1.TxnState.TRANSACTION_COMMITTED_EMPTY)throw new C1.MongoTransactionError("Cannot call abortTransaction after calling commitTransaction");let F={abortTransaction:1},B=typeof A?.timeoutMS==="number"?A.timeoutMS:this.timeoutContext?.csotEnabled()?this.timeoutContext.timeoutMS:typeof this.timeoutMS==="number"?this.timeoutMS:null,D=B!=null?_H.TimeoutContext.create({timeoutMS:B,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null,$=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;if($!=null&&B==null)u8.WriteConcern.apply(F,{wtimeoutMS:1e4,w:"majority",...$});if(this.transaction.recoveryToken)F.recoveryToken=this.transaction.recoveryToken;let J=new SH.RunAdminCommandOperation(F,{session:this,readPreference:fH.ReadPreference.primary,bypassPinningCheck:!0});try{await rD.executeOperation(this.client,J,D),this.unpin();return}catch(X){if(this.unpin(),X.name==="MongoRuntimeError")throw X;if(A?.throwTimeout&&X.name==="MongoOperationTimeoutError")throw X;if(X instanceof C1.MongoError&&C1.isRetryableWriteError(X))try{await rD.executeOperation(this.client,J,D);return}catch(E){if(E.name==="MongoRuntimeError")throw E;if(A?.throwTimeout&&E.name==="MongoOperationTimeoutError")throw E}}finally{if(this.transaction.transition(o1.TxnState.TRANSACTION_ABORTED),this.loadBalanced)oD(this,{force:!1})}}toBSON(){throw new C1.MongoRuntimeError("ClientSession cannot be serialized to BSON.")}async withTransaction(A,F){let D=F?.timeoutMS??this.timeoutMS??null;this.timeoutContext=D!=null?_H.TimeoutContext.create({timeoutMS:D,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null;let $=this.timeoutContext?.csotEnabled()?this.timeoutContext.start:s2.now(),J=!1,X;try{while(!J){this.startTransaction(F);try{let E=A(this);if(!s2.isPromiseLike(E))throw new C1.MongoInvalidArgumentError("Function provided to `withTransaction` must return a Promise");if(X=await E,this.transaction.state===o1.TxnState.NO_TRANSACTION||this.transaction.state===o1.TxnState.TRANSACTION_COMMITTED||this.transaction.state===o1.TxnState.TRANSACTION_ABORTED)return X}catch(E){if(!(E instanceof C1.MongoError)||E instanceof C1.MongoInvalidArgumentError)throw await this.abortTransaction(),E;if(this.transaction.state===o1.TxnState.STARTING_TRANSACTION||this.transaction.state===o1.TxnState.TRANSACTION_IN_PROGRESS)await this.abortTransaction();if(E.hasErrorLabel(C1.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||s2.now()-$<120000))continue;throw E}while(!J)try{await this.commitTransaction(),J=!0}catch(E){if(!F$(E)&&E.hasErrorLabel(C1.MongoErrorLabel.UnknownTransactionCommitResult)&&(this.timeoutContext!=null||s2.now()-$<120000))continue;if(E.hasErrorLabel(C1.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||s2.now()-$<120000))break;throw E}}return X}finally{this.timeoutContext=null}}}aj.ClientSession=A$;X51.configureResourceManagement(A$.prototype);var Y51=new Set(["CannotSatisfyWriteConcern","UnknownReplWriteConcern","UnsatisfiableWriteConcern"]);function pj(A){if(A instanceof C1.MongoError){if(C1.isRetryableWriteError(A)||A instanceof C1.MongoWriteConcernError||F$(A)){if(sj(A))return!0}else if(A.hasErrorLabel(C1.MongoErrorLabel.TransientTransactionError))return!0}return!1}function ij(A){let F=C1.isRetryableWriteError(A);return F||=A instanceof C1.MongoWriteConcernError,F||=F$(A),F&&=sj(A),F}function sj(A){let F=A instanceof C1.MongoServerError&&A.codeName&&Y51.has(A.codeName);return F$(A)||!F&&A.code!==C1.MONGODB_ERROR_CODES.UnsatisfiableWriteConcern&&A.code!==C1.MONGODB_ERROR_CODES.UnknownReplWriteConcern}function oD(A,F){let B=A.pinnedConnection,D=F?.error;if(A.inTransaction()&&D&&D instanceof C1.MongoError&&D.hasErrorLabel(C1.MongoErrorLabel.TransientTransactionError))return;let $=A.client.topology;if(B&&$!=null){let X=Array.from($.s.servers.values())[0];if(F?.error==null||F?.force){if(X.pool.checkIn(B),A.pinnedConnection=void 0,B.emit(nj.UNPINNED,A.transaction.state!==o1.TxnState.NO_TRANSACTION?eD.ConnectionPoolMetrics.TXN:eD.ConnectionPoolMetrics.CURSOR),F?.forceClear)X.pool.clear({serviceId:B.serviceId})}}}function F$(A){if(A==null||!(A instanceof C1.MongoServerError))return!1;return A.code===C1.MONGODB_ERROR_CODES.MaxTimeMSExpired||A.writeConcernError?.code===C1.MONGODB_ERROR_CODES.MaxTimeMSExpired}class B${constructor(A){if(A!=null){let F=Buffer.allocUnsafe(16);F.set(A.id.id.buffer),this.id={id:new tD.Binary(F,A.id.id.sub_type)},this.lastUse=A.lastUse,this.txnNumber=A.txnNumber,this.isDirty=A.isDirty;return}this.id={id:new tD.Binary(s2.uuidV4(),tD.Binary.SUBTYPE_UUID)},this.lastUse=s2.now(),this.txnNumber=0,this.isDirty=!1}hasTimedOut(A){return Math.round(s2.calculateDurationInMs(this.lastUse)%86400000%3600000/60000)>A-1}}aj.ServerSession=B$;class gH{constructor(A){if(A==null)throw new C1.MongoRuntimeError("ServerSessionPool requires a MongoClient");this.client=A,this.sessions=new s2.List}acquire(){let A=this.client.topology?.logicalSessionTimeoutMinutes??10,F=null;while(this.sessions.length>0){let B=this.sessions.shift();if(B!=null&&(!!this.client.topology?.loadBalanced||!B.hasTimedOut(A))){F=B;break}}if(F==null)F=new B$;return F}release(A){let F=this.client.topology?.logicalSessionTimeoutMinutes??10;if(this.client.topology?.loadBalanced&&!F)this.sessions.unshift(A);if(!F)return;if(this.sessions.prune((B)=>B.hasTimedOut(F)),!A.hasTimedOut(F)){if(A.isDirty)return;this.sessions.unshift(A)}}}aj.ServerSessionPool=gH;function G51(A,F,B){if(A.hasEnded)return new C1.MongoExpiredSessionError;let D=A.serverSession;if(D==null)return new C1.MongoRuntimeError("Unable to acquire server session");if(B.writeConcern?.w===0){if(A&&A.explicit)return new C1.MongoAPIError("Cannot have explicit session with unacknowledged writes");return}D.lastUse=s2.now(),F.lsid=D.id;let $=A.inTransaction()||o1.isTransactionCommand(F);if(!!B.willRetryWrite||$)D.txnNumber+=A.txnNumberIncrement,A.txnNumberIncrement=0,F.txnNumber=tD.Long.fromNumber(D.txnNumber);if(!$){if(A.transaction.state!==o1.TxnState.NO_TRANSACTION)A.transaction.transition(o1.TxnState.NO_TRANSACTION);if(A.supports.causalConsistency&&A.operationTime&&s2.commandSupportsReadConcern(F))F.readConcern=F.readConcern||{},Object.assign(F.readConcern,{afterClusterTime:A.operationTime});else if(A.snapshotEnabled){if(F.readConcern=F.readConcern||{level:J51.ReadConcernLevel.snapshot},A.snapshotTime!=null)Object.assign(F.readConcern,{atClusterTime:A.snapshotTime})}return}if(F.autocommit=!1,A.transaction.state===o1.TxnState.STARTING_TRANSACTION){A.transaction.transition(o1.TxnState.TRANSACTION_IN_PROGRESS),F.startTransaction=!0;let X=A.transaction.options.readConcern||A?.clientOptions?.readConcern;if(X)F.readConcern=X;if(A.supports.causalConsistency&&A.operationTime)F.readConcern=F.readConcern||{},Object.assign(F.readConcern,{afterClusterTime:A.operationTime})}return}function H51(A,F){if(F.$clusterTime)xH._advanceClusterTime(A,F.$clusterTime);if(F.operationTime&&A&&A.supports.causalConsistency)A.advanceOperationTime(F.operationTime);if(F.recoveryToken&&A&&A.inTransaction())A.transaction._recoveryToken=F.recoveryToken;if(A?.snapshotEnabled&&A.snapshotTime==null){let B=F.atClusterTime;if(B)A.snapshotTime=B}}});var dH=z((DT)=>{Object.defineProperty(DT,"__esModule",{value:!0});DT.SENSITIVE_COMMANDS=DT.CommandFailedEvent=DT.CommandSucceededEvent=DT.CommandStartedEvent=void 0;var pA=v0(),ej=F1(),bH=_A();class AT{constructor(A,F,B){this.name=pA.COMMAND_STARTED;let D=vH(F),$=yH(D),{address:J,connectionId:X,serviceId:E}=mH(A);if(DT.SENSITIVE_COMMANDS.has($))this.commandObj={},this.commandObj[$]=!0;this.address=J,this.connectionId=X,this.serviceId=E,this.requestId=F.requestId,this.databaseName=F.databaseName,this.commandName=$,this.command=hH($,D,D),this.serverConnectionId=B}get hasServiceId(){return!!this.serviceId}}DT.CommandStartedEvent=AT;class FT{constructor(A,F,B,D,$){this.name=pA.COMMAND_SUCCEEDED;let J=vH(F),X=yH(J),{address:E,connectionId:Y,serviceId:G}=mH(A);this.address=E,this.connectionId=Y,this.serviceId=G,this.requestId=F.requestId,this.commandName=X,this.duration=ej.calculateDurationInMs(D),this.reply=hH(X,J,Z51(B)),this.serverConnectionId=$}get hasServiceId(){return!!this.serviceId}}DT.CommandSucceededEvent=FT;class BT{constructor(A,F,B,D,$){this.name=pA.COMMAND_FAILED;let J=vH(F),X=yH(J),{address:E,connectionId:Y,serviceId:G}=mH(A);this.address=E,this.connectionId=Y,this.serviceId=G,this.requestId=F.requestId,this.commandName=X,this.duration=ej.calculateDurationInMs(D),this.failure=hH(X,J,B),this.serverConnectionId=$}get hasServiceId(){return!!this.serviceId}}DT.CommandFailedEvent=BT;DT.SENSITIVE_COMMANDS=new Set(["authenticate","saslStart","saslContinue","getnonce","createUser","updateUser","copydbgetnonce","copydbsaslstart","copydb"]);var z51=new Set(["hello",pA.LEGACY_HELLO_COMMAND,pA.LEGACY_HELLO_COMMAND_CAMEL_CASE]),yH=(A)=>Object.keys(A)[0],U51=(A)=>A.ns.split(".")[1],hH=(A,F,B)=>DT.SENSITIVE_COMMANDS.has(A)||z51.has(A)&&F.speculativeAuthenticate?{}:B,tj={$query:"filter",$orderby:"sort",$hint:"hint",$comment:"comment",$maxScan:"maxScan",$max:"max",$min:"min",$returnKey:"returnKey",$showDiskLoc:"showRecordId",$maxTimeMS:"maxTimeMS",$snapshot:"snapshot"},oj={numberToSkip:"skip",numberToReturn:"batchSize",returnFieldSelector:"projection"};function vH(A){if(A instanceof bH.OpMsgRequest){let D={...A.command};if(D.ops instanceof bH.DocumentSequence)D.ops=D.ops.documents;if(D.nsInfo instanceof bH.DocumentSequence)D.nsInfo=D.nsInfo.documents;return D}if(A.query?.$query){let D;if(A.ns==="admin.$cmd")D=Object.assign({},A.query.$query);else D={find:U51(A)},Object.keys(tj).forEach(($)=>{if(A.query[$]!=null)D[tj[$]]={...A.query[$]}});return Object.keys(oj).forEach(($)=>{let J=$;if(A[J]!=null)D[oj[J]]=A[J]}),D}let F={},B={...A};if(A.query)F={...A.query},B.query=F;return A.query?F:B}function Z51(A){if(!A)return A;return A.result?A.result:A}function mH(A){let F;if("id"in A)F=A.id;return{address:A.address,serviceId:A.serviceId,connectionId:F}}});var ET=z((JT)=>{Object.defineProperty(JT,"__esModule",{value:!0});JT.StreamDescription=void 0;var R51=y1(),N51=P6(),P51=lA(),I51=["minWireVersion","maxWireVersion","maxBsonObjectSize","maxMessageSizeBytes","maxWriteBatchSize","logicalSessionTimeoutMinutes"];class $T{constructor(A,F){this.hello=null,this.address=A,this.type=N51.ServerType.Unknown,this.minWireVersion=void 0,this.maxWireVersion=void 0,this.maxBsonObjectSize=16777216,this.maxMessageSizeBytes=48000000,this.maxWriteBatchSize=1e5,this.logicalSessionTimeoutMinutes=F?.logicalSessionTimeoutMinutes,this.loadBalanced=!!F?.loadBalanced,this.compressors=F&&F.compressors&&Array.isArray(F.compressors)?F.compressors:[],this.serverConnectionId=null}receiveResponse(A){if(A==null)return;if(this.hello=A,this.type=P51.parseServerType(A),"connectionId"in A)this.serverConnectionId=this.parseServerConnectionID(A.connectionId);else this.serverConnectionId=null;for(let F of I51){if(A[F]!=null)this[F]=A[F];if("__nodejs_mock_server__"in A)this.__nodejs_mock_server__=A.__nodejs_mock_server__}if(A.compression)this.compressor=this.compressors.filter((F)=>A.compression?.includes(F))[0]}parseServerConnectionID(A){return R51.Long.isLong(A)?A.toBigInt():BigInt(A)}}JT.StreamDescription=$T});var GT=z((YT)=>{Object.defineProperty(YT,"__esModule",{value:!0});YT.onData=M51;var iA=F1();function M51(A,{timeoutContext:F,signal:B}){B?.throwIfAborted();let D=new iA.List,$=new iA.List,J=null,X=!1,E={next(){let C=D.shift();if(C!=null)return Promise.resolve({value:C,done:!1});if(J!=null){let Z=Promise.reject(J);return J=null,Z}if(X)return q();let{promise:Q,resolve:K,reject:U}=iA.promiseWithResolvers();return $.push({resolve:K,reject:U}),Q},return(){return q()},throw(C){return W(C),Promise.resolve({value:void 0,done:!0})},[Symbol.asyncIterator](){return this}};A.on("data",H),A.on("error",W);let Y=iA.addAbortListener(B,function(){W(this.reason)}),G=F?.timeoutForSocketRead;return G?.throwIfExpired(),G?.then(void 0,W),E;function H(C){let Q=$.shift();if(Q!=null)Q.resolve({value:C,done:!1});else D.push(C)}function W(C){let Q=$.shift();if(Q!=null)Q.reject(C);else J=C;q()}function q(){A.off("data",H),A.off("error",W),Y?.[iA.kDispose](),X=!0,G?.clear();let C={value:void 0,done:X};for(let Q of $)Q.resolve(C);return Promise.resolve(C)}}});var J$=z((KT)=>{Object.defineProperty(KT,"__esModule",{value:!0});KT.CryptoConnection=KT.SizedMessageTransform=KT.Connection=void 0;KT.hasSessionSupport=g51;var T51=i("stream"),CT=i("timers"),k51=y1(),W9=v0(),Z0=s(),HT=a4(),O51=M6(),u51=t0(),S51=P6(),WT=S8(),qT=M2(),k6=F1(),lH=dH(),$$=_A(),f51=ET(),_51=xA(),x51=GT(),nA=Q3(),cH=OH();function g51(A){return A.description.logicalSessionTimeoutMinutes!=null}function b51(A,F){if(F.proxyHost)return F.hostAddress.toString();let{remoteAddress:B,remotePort:D}=A;if(typeof B==="string"&&typeof D==="number")return k6.HostAddress.fromHostPort(B,D).toString();return k6.uuidV4().toString("hex")}class Y2 extends O51.TypedEventEmitter{constructor(A,F){super();this.lastHelloMS=-1,this.helloOk=!1,this.delayedTimeoutId=null,this.closed=!1,this.clusterTime=null,this.error=null,this.dataEvents=null,this.on("error",k6.noop),this.socket=A,this.id=F.id,this.address=b51(A,F),this.socketTimeoutMS=F.socketTimeoutMS??0,this.monitorCommands=F.monitorCommands,this.serverApi=F.serverApi,this.mongoLogger=F.mongoLogger,this.established=!1,this.description=new f51.StreamDescription(this.address,F),this.generation=F.generation,this.lastUseTime=k6.now(),this.messageStream=this.socket.on("error",this.onSocketError.bind(this)).pipe(new pH({connection:this})).on("error",this.onTransformError.bind(this)),this.socket.on("close",this.onClose.bind(this)),this.socket.on("timeout",this.onTimeout.bind(this)),this.messageStream.pause()}get hello(){return this.description.hello}set hello(A){this.description.receiveResponse(A),Object.freeze(this.description)}get serviceId(){return this.hello?.serviceId}get loadBalanced(){return this.description.loadBalanced}get idleTime(){return k6.calculateDurationInMs(this.lastUseTime)}get hasSessionSupport(){return this.description.logicalSessionTimeoutMinutes!=null}get supportsOpMsg(){return this.description!=null&&k6.maxWireVersion(this)>=6&&!this.description.__nodejs_mock_server__}get shouldEmitAndLogCommand(){return(this.monitorCommands||this.established&&!this.authContext?.reauthenticating&&this.mongoLogger?.willLog(HT.MongoLoggableComponent.COMMAND,HT.SeverityLevel.DEBUG))??!1}markAvailable(){this.lastUseTime=k6.now()}onSocketError(A){this.onError(new Z0.MongoNetworkError(A.message,{cause:A}))}onTransformError(A){this.onError(A)}onError(A){this.cleanup(A)}onClose(){let A=`connection ${this.id} to ${this.address} closed`;this.cleanup(new Z0.MongoNetworkError(A))}onTimeout(){this.delayedTimeoutId=CT.setTimeout(()=>{let A=`connection ${this.id} to ${this.address} timed out`,F=this.hello==null;this.cleanup(new Z0.MongoNetworkTimeoutError(A,{beforeHandshake:F}))},1).unref()}destroy(){if(this.closed)return;this.removeAllListeners(Y2.PINNED),this.removeAllListeners(Y2.UNPINNED);let A=`connection ${this.id} to ${this.address} closed`;this.cleanup(new Z0.MongoNetworkError(A))}cleanup(A){if(this.closed)return;this.socket.destroy(),this.error=A,this.dataEvents?.throw(A).then(void 0,k6.squashError),this.closed=!0,this.emit(Y2.CLOSE)}prepareCommand(A,F,B){let D={...F},$=cH.getReadPreference(B),J=B?.session,X=this.clusterTime;if(this.serverApi){let{version:G,strict:H,deprecationErrors:W}=this.serverApi;if(D.apiVersion=G,H!=null)D.apiStrict=H;if(W!=null)D.apiDeprecationErrors=W}if(this.hasSessionSupport&&J){if(J.clusterTime&&X&&J.clusterTime.clusterTime.greaterThan(X.clusterTime))X=J.clusterTime;let G=WT.applySession(J,D,B);if(G)throw G}else if(J?.explicit)throw new Z0.MongoCompatibilityError("Current topology does not support sessions");if(X)D.$clusterTime=X;if(this.description.type!==S51.ServerType.Standalone){if(!cH.isSharded(this)&&!this.description.loadBalanced&&this.supportsOpMsg&&B.directConnection===!0&&$?.mode==="primary")D.$readPreference=u51.ReadPreference.primaryPreferred.toJSON();else if(cH.isSharded(this)&&!this.supportsOpMsg&&$?.mode!=="primary")D={$query:D,$readPreference:$.toJSON()};else if($?.mode!=="primary")D.$readPreference=$.toJSON()}let E={numberToSkip:0,numberToReturn:-1,checkKeys:!1,secondaryOk:$.secondaryOk(),...B};return B.timeoutContext?.addMaxTimeMSToCommand(D,B),this.supportsOpMsg?new $$.OpMsgRequest(A,D,E):new $$.OpQueryRequest(A,D,E)}async*sendWire(A,F,B){this.throwIfAborted();let D=F.socketTimeoutMS??F?.timeoutContext?.getSocketTimeoutMS()??this.socketTimeoutMS;this.socket.setTimeout(D);try{if(await this.writeCommand(A,{agreedCompressor:this.description.compressor??"none",zlibCompressionLevel:this.description.zlibCompressionLevel,timeoutContext:F.timeoutContext,signal:F.signal}),F.noResponse||A.moreToCome){yield nA.MongoDBResponse.empty;return}if(this.throwIfAborted(),F.timeoutContext?.csotEnabled()&&F.timeoutContext.minRoundTripTime!=null&&F.timeoutContext.remainingTimeMS<F.timeoutContext.minRoundTripTime)throw new Z0.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining");for await(let $ of this.readMany(F)){this.socket.setTimeout(0);let J=$.parse();yield(B??nA.MongoDBResponse).make(J),this.throwIfAborted(),this.socket.setTimeout(D)}}finally{this.socket.setTimeout(0)}}async*sendCommand(A,F,B,D){B?.signal?.throwIfAborted();let $=this.prepareCommand(A.db,F,B),J=0;if(this.shouldEmitAndLogCommand)J=k6.now(),this.emitAndLogCommand(this.monitorCommands,Y2.COMMAND_STARTED,$.databaseName,this.established,new lH.CommandStartedEvent(this,$,this.description.serverConnectionId));let X=B.documentsReturnedIn==null||!B.raw?B:{...B,raw:!1,fieldsAsRaw:{[B.documentsReturnedIn]:!0}},E=void 0,Y=void 0;try{this.throwIfAborted();for await(E of this.sendWire($,B,D)){if(Y=void 0,B.session!=null)WT.updateSessionFromResponse(B.session,E);if(E.$clusterTime)this.clusterTime=E.$clusterTime,this.emit(Y2.CLUSTER_TIME_RECEIVED,E.$clusterTime);if(E.ok===0){if(B.timeoutContext?.csotEnabled()&&E.isMaxTimeExpiredError)throw new Z0.MongoOperationTimeoutError("Server reported a timeout error",{cause:new Z0.MongoServerError(Y??=E.toObject(X))});throw new Z0.MongoServerError(Y??=E.toObject(X))}if(this.shouldEmitAndLogCommand)this.emitAndLogCommand(this.monitorCommands,Y2.COMMAND_SUCCEEDED,$.databaseName,this.established,new lH.CommandSucceededEvent(this,$,B.noResponse?void 0:$.moreToCome?{ok:1}:Y??=E.toObject(X),J,this.description.serverConnectionId));if(D==null)yield Y??=E.toObject(X);else yield E;this.throwIfAborted()}}catch(G){if(this.shouldEmitAndLogCommand)this.emitAndLogCommand(this.monitorCommands,Y2.COMMAND_FAILED,$.databaseName,this.established,new lH.CommandFailedEvent(this,$,G,J,this.description.serverConnectionId));throw G}}async command(A,F,B={},D){this.throwIfAborted(),B.signal?.throwIfAborted();for await(let $ of this.sendCommand(A,F,B,D)){if(B.timeoutContext?.csotEnabled()){if(nA.MongoDBResponse.is($)){if($.isMaxTimeExpiredError)throw new Z0.MongoOperationTimeoutError("Server reported a timeout error",{cause:new Z0.MongoServerError($.toObject())})}else if(Array.isArray($?.writeErrors)&&$.writeErrors.some((J)=>J?.code===Z0.MONGODB_ERROR_CODES.MaxTimeMSExpired)||$?.writeConcernError?.code===Z0.MONGODB_ERROR_CODES.MaxTimeMSExpired)throw new Z0.MongoOperationTimeoutError("Server reported a timeout error",{cause:new Z0.MongoServerError($)})}return $}throw new Z0.MongoUnexpectedServerResponseError("Unable to get response from server")}exhaustCommand(A,F,B,D){(async()=>{this.throwIfAborted();for await(let J of this.sendCommand(A,F,B))D(void 0,J),this.throwIfAborted();throw new Z0.MongoUnexpectedServerResponseError("Server ended moreToCome unexpectedly")})().then(void 0,D)}throwIfAborted(){if(this.error)throw this.error}async writeCommand(A,F){let B=F.agreedCompressor==="none"||!$$.OpCompressedRequest.canCompress(A)?A:new $$.OpCompressedRequest(A,{agreedCompressor:F.agreedCompressor??"none",zlibCompressionLevel:F.zlibCompressionLevel??0}),D=Buffer.concat(await B.toBin());if(F.timeoutContext?.csotEnabled()){if(F.timeoutContext.minRoundTripTime!=null&&F.timeoutContext.remainingTimeMS<F.timeoutContext.minRoundTripTime)throw new Z0.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining")}if(this.socket.write(D))return;let $=k6.once(this.socket,"drain",F),J=F?.timeoutContext?.timeoutForSocketWrite,X=J?Promise.race([$,J]):$;try{return await X}catch(E){if(qT.TimeoutError.is(E)){let Y=new Z0.MongoOperationTimeoutError("Timed out at socket write");throw this.onError(Y),Y}else if(E===F.signal?.reason)this.onError(E);throw E}finally{J?.clear()}}async*readMany(A){try{this.dataEvents=x51.onData(this.messageStream,A),this.messageStream.resume();for await(let F of this.dataEvents){let B=await _51.decompressResponse(F);if(yield B,!B.moreToCome)return}}catch(F){if(qT.TimeoutError.is(F)){let B=new Z0.MongoOperationTimeoutError(`Timed out during socket read (${F.duration}ms)`);throw this.dataEvents=null,this.onError(B),B}else if(F===A.signal?.reason)this.onError(F);throw F}finally{this.dataEvents=null,this.messageStream.pause()}}}KT.Connection=Y2;Y2.COMMAND_STARTED=W9.COMMAND_STARTED;Y2.COMMAND_SUCCEEDED=W9.COMMAND_SUCCEEDED;Y2.COMMAND_FAILED=W9.COMMAND_FAILED;Y2.CLUSTER_TIME_RECEIVED=W9.CLUSTER_TIME_RECEIVED;Y2.CLOSE=W9.CLOSE;Y2.PINNED=W9.PINNED;Y2.UNPINNED=W9.UNPINNED;class pH extends T51.Transform{constructor({connection:A}){super({writableObjectMode:!1,readableObjectMode:!0});this.bufferPool=new k6.BufferPool,this.connection=A}_transform(A,F,B){if(this.connection.delayedTimeoutId!=null)CT.clearTimeout(this.connection.delayedTimeoutId),this.connection.delayedTimeoutId=null;this.bufferPool.append(A);while(this.bufferPool.length){let D=this.bufferPool.getInt32();if(D==null)break;if(D<0)return B(new Z0.MongoParseError(`Message size cannot be negative: ${D}`));if(D>this.bufferPool.length)break;let $=this.bufferPool.read(D);if(!this.push($))return B(new Z0.MongoRuntimeError("SizedMessageTransform does not support backpressure"))}B()}}KT.SizedMessageTransform=pH;class QT extends Y2{constructor(A,F){super(A,F);this.autoEncrypter=F.autoEncrypter}async command(A,F,B,D){let{autoEncrypter:$}=this;if(!$)throw new Z0.MongoMissingDependencyError("No AutoEncrypter available for encryption",{dependencyName:"n/a"});let J=k6.maxWireVersion(this);if(J===0)return await super.command(A,F,B,D);if(J<8)throw new Z0.MongoCompatibilityError("Auto-encryption requires a minimum MongoDB version of 4.2");let X=F.find||F.findAndModify?F.sort:null,E=F.createIndexes?F.indexes.map((q)=>q.key):null,Y=await $.encrypt(A.toString(),F,B);if(X!=null&&(F.find||F.findAndModify))Y.sort=X;if(E!=null&&F.createIndexes)for(let[q,C]of E.entries())Y.indexes[q].key=C;let G=await super.command(A,Y,B,D??nA.MongoDBResponse),H=await $.decrypt(G.toBytes(),B),W=D?.make(H)??k51.deserialize(H,B);if($[W9.kDecorateResult]){if(D==null)k6.decorateDecryptionResult(W,G.toObject(),!0);else if(W instanceof nA.CursorResponse)W.encryptedResponse=G}return W}}KT.CryptoConnection=QT});var aH=z((NT)=>{Object.defineProperty(NT,"__esModule",{value:!0});NT.LEGAL_TCP_SOCKET_OPTIONS=NT.LEGAL_TLS_SOCKET_OPTIONS=void 0;NT.connect=c51;NT.makeConnection=wT;NT.performInitialHandshake=LT;NT.prepareHandshakeDocument=RT;NT.makeSocket=E$;var ZT=i("net"),m51=i("tls"),VT=v0(),d51=U3(),P0=s(),iH=F1(),l51=F9(),X$=m3(),UT=J$(),f8=n9();async function c51(A){let F=null;try{let B=await E$(A);return F=wT(A,B),await LT(F,A),F}catch(B){throw F?.destroy(),B}}function wT(A,F){let B=A.connectionType??UT.Connection;if(A.autoEncrypter)B=UT.CryptoConnection;return new B(F,A)}function p51(A,F){let B=Number(A.maxWireVersion),D=Number(A.minWireVersion),$=!Number.isNaN(B)&&B>=f8.MIN_SUPPORTED_WIRE_VERSION,J=!Number.isNaN(D)&&D<=f8.MAX_SUPPORTED_WIRE_VERSION;if($){if(J)return null;let E=`Server at ${F.hostAddress} reports minimum wire version ${JSON.stringify(A.minWireVersion)}, but this version of the Node.js Driver requires at most ${f8.MAX_SUPPORTED_WIRE_VERSION} (MongoDB ${f8.MAX_SUPPORTED_SERVER_VERSION})`;return new P0.MongoCompatibilityError(E)}let X=`Server at ${F.hostAddress} reports maximum wire version ${JSON.stringify(A.maxWireVersion)??0}, but this version of the Node.js Driver requires at least ${f8.MIN_SUPPORTED_WIRE_VERSION} (MongoDB ${f8.MIN_SUPPORTED_SERVER_VERSION})`;return new P0.MongoCompatibilityError(X)}async function LT(A,F){let B=F.credentials;if(B){if(B.mechanism!==X$.AuthMechanism.MONGODB_DEFAULT&&!F.authProviders.getOrCreateProvider(B.mechanism,B.mechanismProperties))throw new P0.MongoInvalidArgumentError(`AuthMechanism '${B.mechanism}' not supported`)}let D=new l51.AuthContext(A,B,F);A.authContext=D;let $=await RT(D),J={...F,raw:!1};if(typeof F.connectTimeoutMS==="number")J.socketTimeoutMS=F.connectTimeoutMS;let X=new Date().getTime(),E=await G($,J);if(!("isWritablePrimary"in E))E.isWritablePrimary=E[VT.LEGACY_HELLO_COMMAND];if(E.helloOk)A.helloOk=!0;let Y=p51(E,F);if(Y)throw Y;if(F.loadBalanced){if(!E.serviceId)throw new P0.MongoCompatibilityError("Driver attempted to initialize in load balancing mode, but the server does not support this mode.")}if(A.hello=E,A.lastHelloMS=new Date().getTime()-X,!E.arbiterOnly&&B){D.response=E;let H=B.resolveAuthMechanism(E),W=F.authProviders.getOrCreateProvider(H.mechanism,H.mechanismProperties);if(!W)throw new P0.MongoInvalidArgumentError(`No AuthProvider for ${H.mechanism} defined.`);try{await W.auth(D)}catch(q){if(q instanceof P0.MongoError){if(q.addErrorLabel(P0.MongoErrorLabel.HandshakeError),P0.needsRetryableWriteLabel(q,E.maxWireVersion,A.description.type))q.addErrorLabel(P0.MongoErrorLabel.RetryableWriteError)}throw q}}A.established=!0;async function G(H,W){try{return await A.command(iH.ns("admin.$cmd"),H,W)}catch(q){if(q instanceof P0.MongoError)q.addErrorLabel(P0.MongoErrorLabel.HandshakeError);throw q}}}async function RT(A){let F=A.options,B=F.compressors?F.compressors:[],{serverApi:D}=A.connection,$=await F.extendedMetadata,J={[D?.version||F.loadBalanced===!0?"hello":VT.LEGACY_HELLO_COMMAND]:1,helloOk:!0,client:$,compression:B};if(F.loadBalanced===!0)J.loadBalanced=!0;let X=A.credentials;if(X){if(X.mechanism===X$.AuthMechanism.MONGODB_DEFAULT&&X.username){J.saslSupportedMechs=`${X.source}.${X.username}`;let Y=A.options.authProviders.getOrCreateProvider(X$.AuthMechanism.MONGODB_SCRAM_SHA256,X.mechanismProperties);if(!Y)throw new P0.MongoInvalidArgumentError(`No AuthProvider for ${X$.AuthMechanism.MONGODB_SCRAM_SHA256} defined.`);return await Y.prepare(J,A)}let E=A.options.authProviders.getOrCreateProvider(X.mechanism,X.mechanismProperties);if(!E)throw new P0.MongoInvalidArgumentError(`No AuthProvider for ${X.mechanism} defined.`);return await E.prepare(J,A)}return J}NT.LEGAL_TLS_SOCKET_OPTIONS=["allowPartialTrustChain","ALPNProtocols","ca","cert","checkServerIdentity","ciphers","crl","ecdhCurve","key","minDHSize","passphrase","pfx","rejectUnauthorized","secureContext","secureProtocol","servername","session"];NT.LEGAL_TCP_SOCKET_OPTIONS=["autoSelectFamily","autoSelectFamilyAttemptTimeout","keepAliveInitialDelay","family","hints","localAddress","localPort","lookup"];function nH(A){let F=A.hostAddress;if(!F)throw new P0.MongoInvalidArgumentError('Option "hostAddress" is required');let B={};for(let D of NT.LEGAL_TCP_SOCKET_OPTIONS)if(A[D]!=null)B[D]=A[D];if(B.keepAliveInitialDelay??=120000,B.keepAlive=!0,B.noDelay=A.noDelay??!0,typeof F.socketPath==="string")return B.path=F.socketPath,B;else if(typeof F.host==="string")return B.host=F.host,B.port=F.port,B;else throw new P0.MongoRuntimeError(`Unexpected HostAddress ${JSON.stringify(F)}`)}function i51(A){let F=nH(A);for(let B of NT.LEGAL_TLS_SOCKET_OPTIONS)if(A[B]!=null)F[B]=A[B];if(A.existingSocket)F.socket=A.existingSocket;if(F.servername==null&&F.host&&!ZT.isIP(F.host))F.servername=F.host;return F}async function E$(A){let F=A.tls??!1,B=A.connectTimeoutMS??30000,D=A.existingSocket,$;if(A.proxyHost!=null)return await s51({...A,connectTimeoutMS:B});if(F){let G=m51.connect(i51(A));if(typeof G.disableRenegotiation==="function")G.disableRenegotiation();$=G}else if(D)$=D;else $=ZT.createConnection(nH(A));$.setTimeout(B);let J=null,{promise:X,resolve:E,reject:Y}=iH.promiseWithResolvers();if(D)E($);else{let G=performance.now(),H=F?"secureConnect":"connect";if($.once(H,()=>E($)).once("error",(W)=>Y(new P0.MongoNetworkError(P0.MongoError.buildErrorMessage(W),{cause:W}))).once("timeout",()=>{Y(new P0.MongoNetworkTimeoutError(`Socket '${H}' timed out after ${performance.now()-G|0}ms (connectTimeoutMS: ${B})`))}).once("close",()=>Y(new P0.MongoNetworkError(`Socket closed after ${performance.now()-G|0} during connection establishment`))),A.cancellationToken!=null)J=()=>Y(new P0.MongoNetworkError(`Socket connection establishment was cancelled after ${performance.now()-G|0}`)),A.cancellationToken.once("cancel",J)}try{return $=await X,$}catch(G){throw $.destroy(),G}finally{if($.setTimeout(0),J!=null)A.cancellationToken?.removeListener("cancel",J)}}var sA=null;function n51(){if(sA==null){let A=d51.getSocks();if("kModuleError"in A)throw A.kModuleError;sA=A}return sA}async function s51(A){let F=iH.HostAddress.fromHostPort(A.proxyHost??"",A.proxyPort??1080),B=await E$({...A,hostAddress:F,tls:!1,proxyHost:void 0}),D=nH(A);if(typeof D.host!=="string"||typeof D.port!=="number")throw new P0.MongoInvalidArgumentError("Can only make Socks5 connections to TCP hosts");sA??=n51();let $;try{$=(await sA.SocksClient.createConnection({existing_socket:B,timeout:A.connectTimeoutMS,command:"connect",destination:{host:D.host,port:D.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:A.proxyUsername||void 0,password:A.proxyPassword||void 0}})).socket}catch(J){throw new P0.MongoNetworkError(P0.MongoError.buildErrorMessage(J),{cause:J})}return await E$({...A,existingSocket:$,proxyHost:void 0})}});var Y$=z((_T)=>{Object.defineProperty(_T,"__esModule",{value:!0});_T.ServerHeartbeatFailedEvent=_T.ServerHeartbeatSucceededEvent=_T.ServerHeartbeatStartedEvent=_T.TopologyClosedEvent=_T.TopologyOpeningEvent=_T.TopologyDescriptionChangedEvent=_T.ServerClosedEvent=_T.ServerOpeningEvent=_T.ServerDescriptionChangedEvent=void 0;var K4=v0();class IT{constructor(A,F,B,D){this.name=K4.SERVER_DESCRIPTION_CHANGED,this.topologyId=A,this.address=F,this.previousDescription=B,this.newDescription=D}}_T.ServerDescriptionChangedEvent=IT;class MT{constructor(A,F){this.name=K4.SERVER_OPENING,this.topologyId=A,this.address=F}}_T.ServerOpeningEvent=MT;class jT{constructor(A,F){this.name=K4.SERVER_CLOSED,this.topologyId=A,this.address=F}}_T.ServerClosedEvent=jT;class TT{constructor(A,F,B){this.name=K4.TOPOLOGY_DESCRIPTION_CHANGED,this.topologyId=A,this.previousDescription=F,this.newDescription=B}}_T.TopologyDescriptionChangedEvent=TT;class kT{constructor(A){this.name=K4.TOPOLOGY_OPENING,this.topologyId=A}}_T.TopologyOpeningEvent=kT;class OT{constructor(A){this.name=K4.TOPOLOGY_CLOSED,this.topologyId=A}}_T.TopologyClosedEvent=OT;class uT{constructor(A,F){this.name=K4.SERVER_HEARTBEAT_STARTED,this.connectionId=A,this.awaited=F}}_T.ServerHeartbeatStartedEvent=uT;class ST{constructor(A,F,B,D){this.name=K4.SERVER_HEARTBEAT_SUCCEEDED,this.connectionId=A,this.duration=F,this.reply=B??{},this.awaited=D}}_T.ServerHeartbeatSucceededEvent=ST;class fT{constructor(A,F,B,D){this.name=K4.SERVER_HEARTBEAT_FAILED,this.connectionId=A,this.duration=F,this.failure=B,this.awaited=D}}_T.ServerHeartbeatFailedEvent=fT});var tH=z((nT)=>{Object.defineProperty(nT,"__esModule",{value:!0});nT.ConnectionPoolClearedEvent=nT.ConnectionCheckedInEvent=nT.ConnectionCheckedOutEvent=nT.ConnectionCheckOutFailedEvent=nT.ConnectionCheckOutStartedEvent=nT.ConnectionClosedEvent=nT.ConnectionReadyEvent=nT.ConnectionCreatedEvent=nT.ConnectionPoolClosedEvent=nT.ConnectionPoolReadyEvent=nT.ConnectionPoolCreatedEvent=nT.ConnectionPoolMonitoringEvent=void 0;var w3=v0(),rH=F1();class O6{constructor(A){this.time=new Date,this.address=A.address}}nT.ConnectionPoolMonitoringEvent=O6;class gT extends O6{constructor(A){super(A);this.name=w3.CONNECTION_POOL_CREATED;let{maxConnecting:F,maxPoolSize:B,minPoolSize:D,maxIdleTimeMS:$,waitQueueTimeoutMS:J}=A.options;this.options={maxConnecting:F,maxPoolSize:B,minPoolSize:D,maxIdleTimeMS:$,waitQueueTimeoutMS:J}}}nT.ConnectionPoolCreatedEvent=gT;class bT extends O6{constructor(A){super(A);this.name=w3.CONNECTION_POOL_READY}}nT.ConnectionPoolReadyEvent=bT;class yT extends O6{constructor(A){super(A);this.name=w3.CONNECTION_POOL_CLOSED}}nT.ConnectionPoolClosedEvent=yT;class hT extends O6{constructor(A,F){super(A);this.name=w3.CONNECTION_CREATED,this.connectionId=F.id}}nT.ConnectionCreatedEvent=hT;class vT extends O6{constructor(A,F,B){super(A);this.name=w3.CONNECTION_READY,this.durationMS=rH.now()-B,this.connectionId=F.id}}nT.ConnectionReadyEvent=vT;class mT extends O6{constructor(A,F,B,D){super(A);this.name=w3.CONNECTION_CLOSED,this.connectionId=F.id,this.reason=B,this.serviceId=F.serviceId,this.error=D??null}}nT.ConnectionClosedEvent=mT;class dT extends O6{constructor(A){super(A);this.name=w3.CONNECTION_CHECK_OUT_STARTED}}nT.ConnectionCheckOutStartedEvent=dT;class lT extends O6{constructor(A,F,B,D){super(A);this.name=w3.CONNECTION_CHECK_OUT_FAILED,this.durationMS=rH.now()-B,this.reason=F,this.error=D}}nT.ConnectionCheckOutFailedEvent=lT;class cT extends O6{constructor(A,F,B){super(A);this.name=w3.CONNECTION_CHECKED_OUT,this.durationMS=rH.now()-B,this.connectionId=F.id}}nT.ConnectionCheckedOutEvent=cT;class pT extends O6{constructor(A,F){super(A);this.name=w3.CONNECTION_CHECKED_IN,this.connectionId=F.id}}nT.ConnectionCheckedInEvent=pT;class iT extends O6{constructor(A,F={}){super(A);this.name=w3.CONNECTION_POOL_CLEARED,this.serviceId=F.serviceId,this.interruptInUseConnections=F.interruptInUseConnections}}nT.ConnectionPoolClearedEvent=iT});var eH=z((oT)=>{Object.defineProperty(oT,"__esModule",{value:!0});oT.WaitQueueTimeoutError=oT.PoolClearedOnNetworkError=oT.PoolClearedError=oT.PoolClosedError=void 0;var G$=s();class aT extends G$.MongoDriverError{constructor(A){super("Attempted to check out a connection from closed connection pool");this.address=A.address}get name(){return"MongoPoolClosedError"}}oT.PoolClosedError=aT;class oH extends G$.MongoNetworkError{constructor(A,F){let B=F?F:`Connection pool for ${A.address} was cleared because another operation failed with: "${A.serverError?.message}"`;super(B,A.serverError?{cause:A.serverError}:void 0);this.address=A.address,this.addErrorLabel(G$.MongoErrorLabel.PoolRequstedRetry)}get name(){return"MongoPoolClearedError"}}oT.PoolClearedError=oH;class rT extends oH{constructor(A){super(A,`Connection to ${A.address} interrupted due to server monitor timeout`)}get name(){return"PoolClearedOnNetworkError"}}oT.PoolClearedOnNetworkError=rT;class tT extends G$.MongoDriverError{constructor(A,F){super(A);this.address=F}get name(){return"MongoWaitQueueTimeoutError"}}oT.WaitQueueTimeoutError=tT});var Dk=z((Fk)=>{Object.defineProperty(Fk,"__esModule",{value:!0});Fk.ConnectionPool=Fk.PoolState=void 0;var _8=i("timers"),t6=v0(),L3=s(),Ak=M6(),RA1=M2(),z4=F1(),NA1=aH(),H$=J$(),G2=tH(),x8=eH(),PA1=MH();Fk.PoolState=Object.freeze({paused:"paused",ready:"ready",closed:"closed"});class n1 extends Ak.TypedEventEmitter{constructor(A,F){super();if(this.on("error",z4.noop),this.options=Object.freeze({connectionType:H$.Connection,...F,maxPoolSize:F.maxPoolSize??100,minPoolSize:F.minPoolSize??0,maxConnecting:F.maxConnecting??2,maxIdleTimeMS:F.maxIdleTimeMS??0,waitQueueTimeoutMS:F.waitQueueTimeoutMS??0,minPoolSizeCheckFrequencyMS:F.minPoolSizeCheckFrequencyMS??100,autoEncrypter:F.autoEncrypter}),this.options.minPoolSize>this.options.maxPoolSize)throw new L3.MongoInvalidArgumentError("Connection pool minimum size must not be greater than maximum pool size");this.poolState=Fk.PoolState.paused,this.server=A,this.connections=new z4.List,this.pending=0,this.checkedOut=new Set,this.minPoolSizeTimer=void 0,this.generation=0,this.serviceGenerations=new Map,this.connectionCounter=z4.makeCounter(1),this.cancellationToken=new Ak.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.waitQueue=new z4.List,this.metrics=new PA1.ConnectionPoolMetrics,this.processingWaitQueue=!1,this.mongoLogger=this.server.topology.client?.mongoLogger,this.component="connection",process.nextTick(()=>{this.emitAndLog(n1.CONNECTION_POOL_CREATED,new G2.ConnectionPoolCreatedEvent(this))})}get address(){return this.options.hostAddress.toString()}get closed(){return this.poolState===Fk.PoolState.closed}get totalConnectionCount(){return this.availableConnectionCount+this.pendingConnectionCount+this.currentCheckedOutCount}get availableConnectionCount(){return this.connections.length}get pendingConnectionCount(){return this.pending}get currentCheckedOutCount(){return this.checkedOut.size}get waitQueueSize(){return this.waitQueue.length}get loadBalanced(){return this.options.loadBalanced}get serverError(){return this.server.description.error}get checkedOutConnections(){return this.checkedOut}waitQueueErrorMetrics(){return this.metrics.info(this.options.maxPoolSize)}ready(){if(this.poolState!==Fk.PoolState.paused)return;this.poolState=Fk.PoolState.ready,this.emitAndLog(n1.CONNECTION_POOL_READY,new G2.ConnectionPoolReadyEvent(this)),_8.clearTimeout(this.minPoolSizeTimer),this.ensureMinPoolSize()}async checkOut(A){let F=z4.now();this.emitAndLog(n1.CONNECTION_CHECK_OUT_STARTED,new G2.ConnectionCheckOutStartedEvent(this));let{promise:B,resolve:D,reject:$}=z4.promiseWithResolvers(),J=A.timeoutContext.connectionCheckoutTimeout,X={resolve:D,reject:$,cancelled:!1,checkoutTime:F},E=z4.addAbortListener(A.signal,function(){X.cancelled=!0,$(this.reason)});this.waitQueue.push(X),process.nextTick(()=>this.processWaitQueue());try{return J?.throwIfExpired(),await(J?Promise.race([B,J]):B)}catch(Y){if(RA1.TimeoutError.is(Y)){J?.clear(),X.cancelled=!0,this.emitAndLog(n1.CONNECTION_CHECK_OUT_FAILED,new G2.ConnectionCheckOutFailedEvent(this,"timeout",X.checkoutTime));let G=new x8.WaitQueueTimeoutError(this.loadBalanced?this.waitQueueErrorMetrics():"Timed out while checking out a connection from connection pool",this.address);if(A.timeoutContext.csotEnabled())throw new L3.MongoOperationTimeoutError("Timed out during connection checkout",{cause:G});throw G}throw Y}finally{E?.[z4.kDispose](),J?.clear()}}checkIn(A){if(!this.checkedOut.has(A))return;let F=this.closed,B=this.connectionIsStale(A),D=!!(F||B||A.closed);if(!D)A.markAvailable(),this.connections.unshift(A);if(this.checkedOut.delete(A),this.emitAndLog(n1.CONNECTION_CHECKED_IN,new G2.ConnectionCheckedInEvent(this,A)),D){let $=A.closed?"error":F?"poolClosed":"stale";this.destroyConnection(A,$)}process.nextTick(()=>this.processWaitQueue())}clear(A={}){if(this.closed)return;if(this.loadBalanced){let{serviceId:$}=A;if(!$)throw new L3.MongoRuntimeError("ConnectionPool.clear() called in load balanced mode with no serviceId.");let J=$.toHexString(),X=this.serviceGenerations.get(J);if(X==null)throw new L3.MongoRuntimeError("Service generations are required in load balancer mode.");else this.serviceGenerations.set(J,X+1);this.emitAndLog(n1.CONNECTION_POOL_CLEARED,new G2.ConnectionPoolClearedEvent(this,{serviceId:$}));return}let F=A.interruptInUseConnections??!1,B=this.generation;this.generation+=1;let D=this.poolState===Fk.PoolState.paused;if(this.poolState=Fk.PoolState.paused,this.clearMinPoolSizeTimer(),!D)this.emitAndLog(n1.CONNECTION_POOL_CLEARED,new G2.ConnectionPoolClearedEvent(this,{interruptInUseConnections:F}));if(F)process.nextTick(()=>this.interruptInUseConnections(B));this.processWaitQueue()}interruptInUseConnections(A){for(let F of this.checkedOut)if(F.generation<=A)F.onError(new x8.PoolClearedOnNetworkError(this))}closeCheckedOutConnections(){for(let A of this.checkedOut)A.onError(new L3.MongoClientClosedError)}close(){if(this.closed)return;if(this.cancellationToken.emit("cancel"),typeof this.connectionCounter.return==="function")this.connectionCounter.return(void 0);this.poolState=Fk.PoolState.closed,this.clearMinPoolSizeTimer(),this.processWaitQueue();for(let A of this.connections)this.emitAndLog(n1.CONNECTION_CLOSED,new G2.ConnectionClosedEvent(this,A,"poolClosed")),A.destroy();this.connections.clear(),this.emitAndLog(n1.CONNECTION_POOL_CLOSED,new G2.ConnectionPoolClosedEvent(this))}async reauthenticate(A){let F=A.authContext;if(!F)throw new L3.MongoRuntimeError("No auth context found on connection.");let B=F.credentials;if(!B)throw new L3.MongoMissingCredentialsError("Connection is missing credentials when asked to reauthenticate");let D=B.resolveAuthMechanism(A.hello),$=this.server.topology.client.s.authProviders.getOrCreateProvider(D.mechanism,D.mechanismProperties);if(!$)throw new L3.MongoMissingCredentialsError(`Reauthenticate failed due to no auth provider for ${B.mechanism}`);await $.reauth(F);return}clearMinPoolSizeTimer(){let A=this.minPoolSizeTimer;if(A)_8.clearTimeout(A)}destroyConnection(A,F){this.emitAndLog(n1.CONNECTION_CLOSED,new G2.ConnectionClosedEvent(this,A,F)),A.destroy()}connectionIsStale(A){let F=A.serviceId;if(this.loadBalanced&&F){let B=F.toHexString(),D=this.serviceGenerations.get(B);return A.generation!==D}return A.generation!==this.generation}connectionIsIdle(A){return!!(this.options.maxIdleTimeMS&&A.idleTime>this.options.maxIdleTimeMS)}destroyConnectionIfPerished(A){let F=this.connectionIsStale(A),B=this.connectionIsIdle(A);if(!F&&!B&&!A.closed)return!1;let D=A.closed?"error":F?"stale":"idle";return this.destroyConnection(A,D),!0}createConnection(A){let F={...this.options,id:this.connectionCounter.next().value,generation:this.generation,cancellationToken:this.cancellationToken,mongoLogger:this.mongoLogger,authProviders:this.server.topology.client.s.authProviders};this.pending++;let B=z4.now();this.emitAndLog(n1.CONNECTION_CREATED,new G2.ConnectionCreatedEvent(this,{id:F.id})),NA1.connect(F).then((D)=>{if(this.poolState!==Fk.PoolState.ready){this.pending--,D.destroy(),A(this.closed?new x8.PoolClosedError(this):new x8.PoolClearedError(this));return}for(let $ of[...t6.APM_EVENTS,H$.Connection.CLUSTER_TIME_RECEIVED])D.on($,(J)=>this.emit($,J));if(this.loadBalanced){D.on(H$.Connection.PINNED,(J)=>this.metrics.markPinned(J)),D.on(H$.Connection.UNPINNED,(J)=>this.metrics.markUnpinned(J));let $=D.serviceId;if($){let J,X=$.toHexString();if(J=this.serviceGenerations.get(X))D.generation=J;else this.serviceGenerations.set(X,0),D.generation=0}}D.markAvailable(),this.emitAndLog(n1.CONNECTION_READY,new G2.ConnectionReadyEvent(this,D,B)),this.pending--,A(void 0,D)},(D)=>{if(this.pending--,this.server.handleError(D),this.emitAndLog(n1.CONNECTION_CLOSED,new G2.ConnectionClosedEvent(this,{id:F.id,serviceId:void 0},"error",D)),D instanceof L3.MongoNetworkError||D instanceof L3.MongoServerError)D.connectionGeneration=F.generation;A(D??new L3.MongoRuntimeError("Connection creation failed without error"))})}ensureMinPoolSize(){let A=this.options.minPoolSize;if(this.poolState!==Fk.PoolState.ready||A===0)return;if(this.connections.prune((F)=>this.destroyConnectionIfPerished(F)),this.totalConnectionCount<A&&this.pendingConnectionCount<this.options.maxConnecting)this.createConnection((F,B)=>{if(!F&&B)this.connections.push(B),process.nextTick(()=>this.processWaitQueue());if(this.poolState===Fk.PoolState.ready)_8.clearTimeout(this.minPoolSizeTimer),this.minPoolSizeTimer=_8.setTimeout(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)});else _8.clearTimeout(this.minPoolSizeTimer),this.minPoolSizeTimer=_8.setTimeout(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)}processWaitQueue(){if(this.processingWaitQueue)return;this.processingWaitQueue=!0;while(this.waitQueueSize){let B=this.waitQueue.first();if(!B){this.waitQueue.shift();continue}if(B.cancelled){this.waitQueue.shift();continue}if(this.poolState!==Fk.PoolState.ready){let $=this.closed?"poolClosed":"connectionError",J=this.closed?new x8.PoolClosedError(this):new x8.PoolClearedError(this);this.emitAndLog(n1.CONNECTION_CHECK_OUT_FAILED,new G2.ConnectionCheckOutFailedEvent(this,$,B.checkoutTime,J)),this.waitQueue.shift(),B.reject(J);continue}if(!this.availableConnectionCount)break;let D=this.connections.shift();if(!D)break;if(!this.destroyConnectionIfPerished(D))this.checkedOut.add(D),this.emitAndLog(n1.CONNECTION_CHECKED_OUT,new G2.ConnectionCheckedOutEvent(this,D,B.checkoutTime)),this.waitQueue.shift(),B.resolve(D)}let{maxPoolSize:A,maxConnecting:F}=this.options;while(this.waitQueueSize>0&&this.pendingConnectionCount<F&&(A===0||this.totalConnectionCount<A)){let B=this.waitQueue.shift();if(!B||B.cancelled)continue;this.createConnection((D,$)=>{if(B.cancelled){if(!D&&$)this.connections.push($)}else if(D)this.emitAndLog(n1.CONNECTION_CHECK_OUT_FAILED,new G2.ConnectionCheckOutFailedEvent(this,"connectionError",B.checkoutTime,D)),B.reject(D);else if($)this.checkedOut.add($),this.emitAndLog(n1.CONNECTION_CHECKED_OUT,new G2.ConnectionCheckedOutEvent(this,$,B.checkoutTime)),B.resolve($);process.nextTick(()=>this.processWaitQueue())})}this.processingWaitQueue=!1}}Fk.ConnectionPool=n1;n1.CONNECTION_POOL_CREATED=t6.CONNECTION_POOL_CREATED;n1.CONNECTION_POOL_CLOSED=t6.CONNECTION_POOL_CLOSED;n1.CONNECTION_POOL_CLEARED=t6.CONNECTION_POOL_CLEARED;n1.CONNECTION_POOL_READY=t6.CONNECTION_POOL_READY;n1.CONNECTION_CREATED=t6.CONNECTION_CREATED;n1.CONNECTION_READY=t6.CONNECTION_READY;n1.CONNECTION_CLOSED=t6.CONNECTION_CLOSED;n1.CONNECTION_CHECK_OUT_STARTED=t6.CONNECTION_CHECK_OUT_STARTED;n1.CONNECTION_CHECK_OUT_FAILED=t6.CONNECTION_CHECK_OUT_FAILED;n1.CONNECTION_CHECKED_OUT=t6.CONNECTION_CHECKED_OUT;n1.CONNECTION_CHECKED_IN=t6.CONNECTION_CHECKED_IN});var $W=z((Xk)=>{Object.defineProperty(Xk,"__esModule",{value:!0});Xk.Server=void 0;var IA1=J$(),MA1=Dk(),jA1=eH(),p3=v0(),z0=s(),TA1=M6(),BW=uH(),G7=F1(),$k=P2(),$0=P6(),kA1=JW(),DW=lA(),aA=G7.makeStateMachine({[$0.STATE_CLOSED]:[$0.STATE_CLOSED,$0.STATE_CONNECTING],[$0.STATE_CONNECTING]:[$0.STATE_CONNECTING,$0.STATE_CLOSING,$0.STATE_CONNECTED,$0.STATE_CLOSED],[$0.STATE_CONNECTED]:[$0.STATE_CONNECTED,$0.STATE_CLOSING,$0.STATE_CLOSED],[$0.STATE_CLOSING]:[$0.STATE_CLOSING,$0.STATE_CLOSED]});class E6 extends TA1.TypedEventEmitter{constructor(A,F,B){super();this.on("error",G7.noop),this.serverApi=B.serverApi;let D={hostAddress:F.hostAddress,...B};this.topology=A,this.pool=new MA1.ConnectionPool(this,D),this.s={description:F,options:B,state:$0.STATE_CLOSED,operationCount:0};for(let $ of[...p3.CMAP_EVENTS,...p3.APM_EVENTS])this.pool.on($,(J)=>this.emit($,J));if(this.pool.on(IA1.Connection.CLUSTER_TIME_RECEIVED,($)=>{this.clusterTime=$}),this.loadBalanced){this.monitor=null;return}this.monitor=new kA1.Monitor(this,this.s.options);for(let $ of p3.HEARTBEAT_EVENTS)this.monitor.on($,(J)=>this.emit($,J));this.monitor.on("resetServer",($)=>AW(this,$)),this.monitor.on(E6.SERVER_HEARTBEAT_SUCCEEDED,($)=>{if(this.emit(E6.DESCRIPTION_RECEIVED,new DW.ServerDescription(this.description.hostAddress,$.reply,{roundTripTime:this.monitor?.roundTripTime,minRoundTripTime:this.monitor?.minRoundTripTime})),this.s.state===$0.STATE_CONNECTING)aA(this,$0.STATE_CONNECTED),this.emit(E6.CONNECT,this)})}get clusterTime(){return this.topology.clusterTime}set clusterTime(A){this.topology.clusterTime=A}get description(){return this.s.description}get name(){return this.s.description.address}get autoEncrypter(){if(this.s.options&&this.s.options.autoEncrypter)return this.s.options.autoEncrypter;return}get loadBalanced(){return this.topology.description.type===$0.TopologyType.LoadBalanced}connect(){if(this.s.state!==$0.STATE_CLOSED)return;if(aA(this,$0.STATE_CONNECTING),!this.loadBalanced)this.monitor?.connect();else aA(this,$0.STATE_CONNECTED),this.emit(E6.CONNECT,this)}closeCheckedOutConnections(){return this.pool.closeCheckedOutConnections()}close(){if(this.s.state===$0.STATE_CLOSED)return;if(aA(this,$0.STATE_CLOSING),!this.loadBalanced)this.monitor?.close();this.pool.close(),aA(this,$0.STATE_CLOSED),this.emit("closed")}requestCheck(){if(!this.loadBalanced)this.monitor?.requestCheck()}async command(A,F,{...B},D){if(A.db==null||typeof A==="string")throw new z0.MongoInvalidArgumentError("Namespace must not be a string");if(this.s.state===$0.STATE_CLOSING||this.s.state===$0.STATE_CLOSED)throw new z0.MongoServerClosedError;if(B.directConnection=this.topology.s.options.directConnection,B.omitReadPreference)delete B.readPreference;if(this.description.iscryptd)B.omitMaxTimeMS=!0;let $=B.session,J=$?.pinnedConnection;if(this.incrementOperationCount(),J==null)try{if(J=await this.pool.checkOut(B),this.loadBalanced&&OA1(F,$))$?.pin(J)}catch(E){if(this.decrementOperationCount(),!(E instanceof jA1.PoolClearedError))this.handleError(E);throw E}let X=null;try{try{let E=await J.command(A,F,B,D);return $k.throwIfWriteConcernError(E),E}catch(E){throw this.decorateCommandError(J,F,B,E)}}catch(E){if(E instanceof z0.MongoError&&E.code===z0.MONGODB_ERROR_CODES.Reauthenticate){X=this.pool.reauthenticate(J),X.then(void 0,(Y)=>{X=null,G7.squashError(Y)}),await G7.abortable(X,B),X=null;try{let Y=await J.command(A,F,B,D);return $k.throwIfWriteConcernError(Y),Y}catch(Y){throw this.decorateCommandError(J,F,B,Y)}}else throw E}finally{if(this.decrementOperationCount(),$?.pinnedConnection!==J)if(X!=null){let E=()=>{this.pool.checkIn(J)};X.then(E,E)}else this.pool.checkIn(J)}}handleError(A,F){if(!(A instanceof z0.MongoError))return;if(A.connectionGeneration&&A.connectionGeneration<this.pool.generation)return;let D=A instanceof z0.MongoNetworkError&&!(A instanceof z0.MongoNetworkTimeoutError),$=A instanceof z0.MongoNetworkError&&A.beforeHandshake,J=A.hasErrorLabel(z0.MongoErrorLabel.HandshakeError);if(D||$||J){if(!this.loadBalanced)A.addErrorLabel(z0.MongoErrorLabel.ResetPool),AW(this,A);else if(F)this.pool.clear({serviceId:F.serviceId})}else if(z0.isSDAMUnrecoverableError(A)){if(SA1(this,A)){let X=G7.maxWireVersion(this)<=7||z0.isNodeShuttingDownError(A);if(this.loadBalanced&&F&&X)this.pool.clear({serviceId:F.serviceId});if(!this.loadBalanced){if(X)A.addErrorLabel(z0.MongoErrorLabel.ResetPool);AW(this,A),process.nextTick(()=>this.requestCheck())}}}}decorateCommandError(A,F,B,D){if(typeof D!=="object"||D==null||!("name"in D))throw new z0.MongoRuntimeError("An unexpected error type: "+typeof D);if(D.name==="AbortError"&&"cause"in D&&D.cause instanceof z0.MongoError)D=D.cause;if(!(D instanceof z0.MongoError))return D;if(uA1(this.pool,A))return D;let $=B?.session;if(D instanceof z0.MongoNetworkError){if($&&!$.hasEnded&&$.serverSession)$.serverSession.isDirty=!0;if(FW($,F)&&!D.hasErrorLabel(z0.MongoErrorLabel.TransientTransactionError))D.addErrorLabel(z0.MongoErrorLabel.TransientTransactionError);if((Jk(this.topology)||BW.isTransactionCommand(F))&&G7.supportsRetryableWrites(this)&&!FW($,F))D.addErrorLabel(z0.MongoErrorLabel.RetryableWriteError)}else if((Jk(this.topology)||BW.isTransactionCommand(F))&&z0.needsRetryableWriteLabel(D,G7.maxWireVersion(this),this.description.type)&&!FW($,F))D.addErrorLabel(z0.MongoErrorLabel.RetryableWriteError);if($&&$.isPinned&&D.hasErrorLabel(z0.MongoErrorLabel.TransientTransactionError))$.unpin({force:!0});return this.handleError(D,A),D}decrementOperationCount(){return this.s.operationCount-=1}incrementOperationCount(){return this.s.operationCount+=1}}Xk.Server=E6;E6.SERVER_HEARTBEAT_STARTED=p3.SERVER_HEARTBEAT_STARTED;E6.SERVER_HEARTBEAT_SUCCEEDED=p3.SERVER_HEARTBEAT_SUCCEEDED;E6.SERVER_HEARTBEAT_FAILED=p3.SERVER_HEARTBEAT_FAILED;E6.CONNECT=p3.CONNECT;E6.DESCRIPTION_RECEIVED=p3.DESCRIPTION_RECEIVED;E6.CLOSED=p3.CLOSED;E6.ENDED=p3.ENDED;function AW(A,F){if(A.loadBalanced)return;if(F instanceof z0.MongoNetworkError&&!(F instanceof z0.MongoNetworkTimeoutError))A.monitor?.reset();A.emit(E6.DESCRIPTION_RECEIVED,new DW.ServerDescription(A.description.hostAddress,void 0,{error:F}))}function OA1(A,F){if(F)return F.inTransaction()||F.transaction.isCommitted&&"commitTransaction"in A||"aggregate"in A||"find"in A||"getMore"in A||"listCollections"in A||"listIndexes"in A||"bulkWrite"in A;return!1}function uA1(A,F){if(F.serviceId)return F.generation!==A.serviceGenerations.get(F.serviceId.toHexString());return F.generation!==A.generation}function SA1(A,F){let B=F.topologyVersion,D=A.description.topologyVersion;return DW.compareTopologyVersion(D,B)<0}function FW(A,F){return A&&A.inTransaction()&&!BW.isTransactionCommand(F)}function Jk(A){return A.s.options.retryWrites!==!1}});var JW=z((Ck)=>{Object.defineProperty(Ck,"__esModule",{value:!0});Ck.RTTSampler=Ck.MonitorInterval=Ck.RTTPinger=Ck.Monitor=Ck.ServerMonitoringMode=void 0;var q9=i("timers"),Yk=y1(),W$=aH(),fA1=EH(),XW=v0(),g8=s(),_A1=a4(),Gk=M6(),H2=F1(),W2=P6(),rA=Y$(),tA=$W(),b8="idle",H7="monitoring",y8=H2.makeStateMachine({[W2.STATE_CLOSING]:[W2.STATE_CLOSING,b8,W2.STATE_CLOSED],[W2.STATE_CLOSED]:[W2.STATE_CLOSED,H7],[b8]:[b8,H7,W2.STATE_CLOSING],[H7]:[H7,b8,W2.STATE_CLOSING]}),xA1=new Set([W2.STATE_CLOSING,W2.STATE_CLOSED,H7]);function oA(A){return A.s.state===W2.STATE_CLOSED||A.s.state===W2.STATE_CLOSING}Ck.ServerMonitoringMode=Object.freeze({auto:"auto",poll:"poll",stream:"stream"});class qk extends Gk.TypedEventEmitter{constructor(A,F){super();this.component=_A1.MongoLoggableComponent.TOPOLOGY,this.on("error",H2.noop),this.server=A,this.connection=null,this.cancellationToken=new Gk.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.monitorId=void 0,this.s={state:W2.STATE_CLOSED},this.address=A.description.address,this.options=Object.freeze({connectTimeoutMS:F.connectTimeoutMS??1e4,heartbeatFrequencyMS:F.heartbeatFrequencyMS??1e4,minHeartbeatFrequencyMS:F.minHeartbeatFrequencyMS??500,serverMonitoringMode:F.serverMonitoringMode}),this.isRunningInFaasEnv=fA1.getFAASEnv()!=null,this.mongoLogger=this.server.topology.client?.mongoLogger,this.rttSampler=new HW(10);let B=this.cancellationToken,D={id:"<monitor>",generation:A.pool.generation,cancellationToken:B,hostAddress:A.description.hostAddress,...F,raw:!1,useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!0};if(delete D.credentials,D.autoEncrypter)delete D.autoEncrypter;this.connectOptions=Object.freeze(D)}connect(){if(this.s.state!==W2.STATE_CLOSED)return;let A=this.options.heartbeatFrequencyMS,F=this.options.minHeartbeatFrequencyMS;this.monitorId=new q$(Wk(this),{heartbeatFrequencyMS:A,minHeartbeatFrequencyMS:F,immediate:!0})}requestCheck(){if(xA1.has(this.s.state))return;this.monitorId?.wake()}reset(){let A=this.server.description.topologyVersion;if(oA(this)||A==null)return;y8(this,W2.STATE_CLOSING),Hk(this),y8(this,b8);let F=this.options.heartbeatFrequencyMS,B=this.options.minHeartbeatFrequencyMS;this.monitorId=new q$(Wk(this),{heartbeatFrequencyMS:F,minHeartbeatFrequencyMS:B})}close(){if(oA(this))return;y8(this,W2.STATE_CLOSING),Hk(this),this.emit("close"),y8(this,W2.STATE_CLOSED)}get roundTripTime(){return this.rttSampler.average()}get minRoundTripTime(){return this.rttSampler.min()}get latestRtt(){return this.rttSampler.last}addRttSample(A){this.rttSampler.addSample(A)}clearRttSamples(){this.rttSampler.clear()}}Ck.Monitor=qk;function Hk(A){A.monitorId?.stop(),A.monitorId=void 0,A.rttPinger?.close(),A.rttPinger=void 0,A.cancellationToken.emit("cancel"),A.connection?.destroy(),A.connection=null,A.clearRttSamples()}function EW(A,F){if(F==null)return!1;let B=A.options.serverMonitoringMode;if(B===Ck.ServerMonitoringMode.poll)return!1;if(B===Ck.ServerMonitoringMode.stream)return!0;if(A.isRunningInFaasEnv)return!1;return!0}function gA1(A,F){let B,D,$=A.server.description.topologyVersion,J=EW(A,$);A.emitAndLogHeartbeat(tA.Server.SERVER_HEARTBEAT_STARTED,A.server.topology.s.id,void 0,new rA.ServerHeartbeatStartedEvent(A.address,J));function X(G){A.connection?.destroy(),A.connection=null,A.emitAndLogHeartbeat(tA.Server.SERVER_HEARTBEAT_FAILED,A.server.topology.s.id,void 0,new rA.ServerHeartbeatFailedEvent(A.address,H2.calculateDurationInMs(B),G,D));let H=!(G instanceof g8.MongoError)?new g8.MongoError(g8.MongoError.buildErrorMessage(G),{cause:G}):G;if(H.addErrorLabel(g8.MongoErrorLabel.ResetPool),H instanceof g8.MongoNetworkTimeoutError)H.addErrorLabel(g8.MongoErrorLabel.InterruptInUseConnections);A.emit("resetServer",H),F(G)}function E(G){if(!("isWritablePrimary"in G))G.isWritablePrimary=G[XW.LEGACY_HELLO_COMMAND];let H=J&&A.rttPinger?A.rttPinger.latestRtt??H2.calculateDurationInMs(B):H2.calculateDurationInMs(B);if(A.addRttSample(H),A.emitAndLogHeartbeat(tA.Server.SERVER_HEARTBEAT_SUCCEEDED,A.server.topology.s.id,G.connectionId,new rA.ServerHeartbeatSucceededEvent(A.address,H,G,J)),J)A.emitAndLogHeartbeat(tA.Server.SERVER_HEARTBEAT_STARTED,A.server.topology.s.id,void 0,new rA.ServerHeartbeatStartedEvent(A.address,!0)),B=H2.now();else A.rttPinger?.close(),A.rttPinger=void 0,F(void 0,G)}let{connection:Y}=A;if(Y&&!Y.closed){let{serverApi:G,helloOk:H}=Y,W=A.options.connectTimeoutMS,q=A.options.heartbeatFrequencyMS,C={[G?.version||H?"hello":XW.LEGACY_HELLO_COMMAND]:1,...J&&$?{maxAwaitTimeMS:q,topologyVersion:bA1($)}:{}},Q=J?{socketTimeoutMS:W?W+q:0,exhaustAllowed:!0}:{socketTimeoutMS:W};if(J&&A.rttPinger==null)A.rttPinger=new GW(A);if(B=H2.now(),J)return D=!0,Y.exhaustCommand(H2.ns("admin.$cmd"),C,Q,(K,U)=>{if(K)return X(K);return E(U)});D=!1,Y.command(H2.ns("admin.$cmd"),C,Q).then(E,X);return}(async()=>{let G=await W$.makeSocket(A.connectOptions),H=W$.makeConnection(A.connectOptions,G);B=H2.now();try{return await W$.performInitialHandshake(H,A.connectOptions),H}catch(W){throw H.destroy(),W}})().then((G)=>{if(oA(A)){G.destroy();return}let H=H2.calculateDurationInMs(B);A.addRttSample(H),A.connection=G,A.emitAndLogHeartbeat(tA.Server.SERVER_HEARTBEAT_SUCCEEDED,A.server.topology.s.id,G.hello?.connectionId,new rA.ServerHeartbeatSucceededEvent(A.address,H,G.hello,EW(A,G.hello?.topologyVersion))),F(void 0,G.hello)},(G)=>{A.connection=null,D=!1,X(G)})}function Wk(A){return(F)=>{if(A.s.state===H7){process.nextTick(F);return}y8(A,H7);function B(){if(!oA(A))y8(A,b8);F()}gA1(A,(D,$)=>{if(D){if(A.server.description.type===W2.ServerType.Unknown)return B()}if(EW(A,$?.topologyVersion))q9.setTimeout(()=>{if(!oA(A))A.monitorId?.wake()},0);B()})}}function bA1(A){return{processId:A.processId,counter:Yk.Long.isLong(A.counter)?A.counter:Yk.Long.fromNumber(A.counter)}}class GW{constructor(A){this.connection=void 0,this.cancellationToken=A.cancellationToken,this.closed=!1,this.monitor=A,this.latestRtt=A.latestRtt??void 0;let F=A.options.heartbeatFrequencyMS;this.monitorId=q9.setTimeout(()=>this.measureRoundTripTime(),F)}get roundTripTime(){return this.monitor.roundTripTime}get minRoundTripTime(){return this.monitor.minRoundTripTime}close(){this.closed=!0,q9.clearTimeout(this.monitorId),this.connection?.destroy(),this.connection=void 0}measureAndReschedule(A,F){if(this.closed){F?.destroy();return}if(this.connection==null)this.connection=F;this.latestRtt=H2.calculateDurationInMs(A),this.monitorId=q9.setTimeout(()=>this.measureRoundTripTime(),this.monitor.options.heartbeatFrequencyMS)}measureRoundTripTime(){let A=H2.now();if(this.closed)return;let F=this.connection;if(F==null){W$.connect(this.monitor.connectOptions).then((D)=>{this.measureAndReschedule(A,D)},()=>{this.connection=void 0});return}let B=F.serverApi?.version||F.helloOk?"hello":XW.LEGACY_HELLO_COMMAND;F.command(H2.ns("admin.$cmd"),{[B]:1},void 0).then(()=>this.measureAndReschedule(A),()=>{this.connection?.destroy(),this.connection=void 0;return})}}Ck.RTTPinger=GW;class q${constructor(A,F={}){if(this.isExpeditedCallToFnScheduled=!1,this.stopped=!1,this.isExecutionInProgress=!1,this.hasExecutedOnce=!1,this._executeAndReschedule=()=>{if(this.stopped)return;if(this.timerId)q9.clearTimeout(this.timerId);this.isExpeditedCallToFnScheduled=!1,this.isExecutionInProgress=!0,this.fn(()=>{this.lastExecutionEnded=H2.now(),this.isExecutionInProgress=!1,this._reschedule(this.heartbeatFrequencyMS)})},this.fn=A,this.lastExecutionEnded=-1/0,this.heartbeatFrequencyMS=F.heartbeatFrequencyMS??1000,this.minHeartbeatFrequencyMS=F.minHeartbeatFrequencyMS??500,F.immediate)this._executeAndReschedule();else this._reschedule(void 0)}wake(){let F=H2.now()-this.lastExecutionEnded;if(F<0)return this._executeAndReschedule();if(this.isExecutionInProgress)return;if(this.isExpeditedCallToFnScheduled)return;if(F<this.minHeartbeatFrequencyMS){this.isExpeditedCallToFnScheduled=!0,this._reschedule(this.minHeartbeatFrequencyMS-F);return}this._executeAndReschedule()}stop(){if(this.stopped=!0,this.timerId)q9.clearTimeout(this.timerId),this.timerId=void 0;this.lastExecutionEnded=-1/0,this.isExpeditedCallToFnScheduled=!1}toString(){return JSON.stringify(this)}toJSON(){let A=H2.now(),F=A-this.lastExecutionEnded;return{timerId:this.timerId!=null?"set":"cleared",lastCallTime:this.lastExecutionEnded,isExpeditedCheckScheduled:this.isExpeditedCallToFnScheduled,stopped:this.stopped,heartbeatFrequencyMS:this.heartbeatFrequencyMS,minHeartbeatFrequencyMS:this.minHeartbeatFrequencyMS,currentTime:A,timeSinceLastCall:F}}_reschedule(A){if(this.stopped)return;if(this.timerId)q9.clearTimeout(this.timerId);this.timerId=q9.setTimeout(this._executeAndReschedule,A||this.heartbeatFrequencyMS)}}Ck.MonitorInterval=q$;class HW{constructor(A=10){this.rttSamples=new Float64Array(A),this.length=0,this.writeIndex=0}addSample(A){if(this.rttSamples[this.writeIndex++]=A,this.length<this.rttSamples.length)this.length++;this.writeIndex%=this.rttSamples.length}min(){if(this.length<2)return 0;let A=this.rttSamples[0];for(let F=1;F<this.length;F++)if(this.rttSamples[F]<A)A=this.rttSamples[F];return A}average(){if(this.length===0)return 0;let A=0;for(let F=0;F<this.length;F++)A+=this.rttSamples[F];return A/this.length}get last(){if(this.length===0)return null;return this.rttSamples[this.writeIndex===0?this.length-1:this.writeIndex-1]}clear(){this.length=0,this.writeIndex=0}}Ck.RTTSampler=HW});var UW=z((Lk)=>{Object.defineProperty(Lk,"__esModule",{value:!0});Lk.DEFAULT_OPTIONS=Lk.OPTIONS=void 0;Lk.resolveSRVRecord=aA1;Lk.parseOptions=tA1;var WW=i("dns"),mA1=$H(),dA1=i("url"),h8=ID(),i3=m3(),Kk=EH(),zk=xA(),Uk=Pj(),D1=s(),C$=e4(),QW=a4(),qW=c6(),C9=t0(),lA1=JW(),q2=F1(),U4=P2(),CW=["authSource","replicaSet","loadBalanced"],cA1="loadBalanced option only supported with a single host in the URI",pA1="loadBalanced option not supported with a replicaSet option",iA1="loadBalanced option not supported when directConnection is provided";function wk(A){return async function F(B){try{return await WW.promises[A](B)}catch(D){if(D.code===WW.TIMEOUT)return await WW.promises[A](B);else throw D}}}var nA1=wk("resolveSrv"),sA1=wk("resolveTxt");async function aA1(A){if(typeof A.srvHost!=="string")throw new D1.MongoAPIError('Option "srvHost" must not be empty');let F=A.srvHost,B=sA1(F);B.then(void 0,q2.squashError);let D=`_${A.srvServiceName}._tcp.${F}`,$=await nA1(D);if($.length===0)throw new D1.MongoAPIError("No addresses found at host");for(let{name:q}of $)q2.checkParentDomainMatch(q,F);let J=$.map((q)=>q2.HostAddress.fromString(`${q.name}:${q.port??27017}`));KW(J,A,!0);let X;try{X=await B}catch(q){if(q.code!=="ENODATA"&&q.code!=="ENOTFOUND")throw q;return J}if(X.length>1)throw new D1.MongoParseError("Multiple text records not allowed");let E=new dA1.URLSearchParams(X[0].join(""));if([...E.keys()].some((q)=>!CW.includes(q)))throw new D1.MongoParseError(`Text record may only set any of: ${CW.join(", ")}`);if(CW.some((q)=>E.get(q)===""))throw new D1.MongoParseError("Cannot have empty URI params in DNS TXT Record");let G=E.get("authSource")??void 0,H=E.get("replicaSet")??void 0,W=E.get("loadBalanced")??void 0;if(!A.userSpecifiedAuthSource&&G&&A.credentials&&!i3.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(A.credentials.mechanism))A.credentials=h8.MongoCredentials.merge(A.credentials,{source:G});if(!A.userSpecifiedReplicaSet&&H)A.replicaSet=H;if(W==="true")A.loadBalanced=!0;if(A.replicaSet&&A.srvMaxHosts>0)throw new D1.MongoParseError("Cannot combine replicaSet option with srvMaxHosts");return KW(J,A,!0),J}function rA1(A){if(!A)return;let F=(B,D)=>{if(A.has(B)&&A.has(D))throw new D1.MongoAPIError(`The '${B}' option cannot be used with the '${D}' option`)};F("tlsInsecure","tlsAllowInvalidCertificates"),F("tlsInsecure","tlsAllowInvalidHostnames"),F("tlsInsecure","tlsDisableCertificateRevocationCheck"),F("tlsInsecure","tlsDisableOCSPEndpointCheck"),F("tlsAllowInvalidCertificates","tlsDisableCertificateRevocationCheck"),F("tlsAllowInvalidCertificates","tlsDisableOCSPEndpointCheck"),F("tlsDisableCertificateRevocationCheck","tlsDisableOCSPEndpointCheck")}function Z4(A,F){if(typeof F==="boolean")return F;switch(F){case"true":return!0;case"false":return!1;default:throw new D1.MongoParseError(`${A} must be either "true" or "false"`)}}function zW(A,F){let B=q2.parseInteger(F);if(B!=null)return B;throw new D1.MongoParseError(`Expected ${A} to be stringified int value, got: ${F}`)}function eA(A,F){let B=zW(A,F);if(B<0)throw new D1.MongoParseError(`${A} can only be a positive int value, got: ${F}`);return B}function*Zk(A){if(A==="")return;let F=A.split(",");for(let B of F){let[D,$]=B.split(/:(.*)/);if($==null)throw new D1.MongoParseError("Cannot have undefined values in key value pairs");yield[D,$]}}class AF extends Map{constructor(A=[]){super(A.map(([F,B])=>[F.toLowerCase(),B]))}has(A){return super.has(A.toLowerCase())}get(A){return super.get(A.toLowerCase())}set(A,F){return super.set(A.toLowerCase(),F)}delete(A){return super.delete(A.toLowerCase())}}function tA1(A,F=void 0,B={}){if(F!=null&&!(F instanceof C$.MongoClient))B=F,F=void 0;if(B.useBigInt64&&typeof B.promoteLongs==="boolean"&&!B.promoteLongs)throw new D1.MongoAPIError("Must request either bigint or Long for int64 deserialization");if(B.useBigInt64&&typeof B.promoteValues==="boolean"&&!B.promoteValues)throw new D1.MongoAPIError("Must request either bigint or Long for int64 deserialization");let D=new mA1.default(A),{hosts:$,isSRV:J}=D,X=Object.create(null);X.hosts=J?[]:$.map(q2.HostAddress.fromString);let E=new AF;if(D.pathname!=="/"&&D.pathname!==""){let Q=decodeURIComponent(D.pathname[0]==="/"?D.pathname.slice(1):D.pathname);if(Q)E.set("dbName",[Q])}if(D.username!==""){let Q={username:decodeURIComponent(D.username)};if(typeof D.password==="string")Q.password=decodeURIComponent(D.password);E.set("auth",[Q])}for(let Q of D.searchParams.keys()){let K=D.searchParams.getAll(Q),U=/readPreferenceTags/i.test(Q);if(!U&&K.length>1)throw new D1.MongoInvalidArgumentError(`URI option "${Q}" cannot appear more than once in the connection string`);if(!U&&K.includes(""))throw new D1.MongoAPIError(`URI option "${Q}" cannot be specified with no value`);if(!E.has(Q))E.set(Q,K)}let Y=new AF(Object.entries(B).filter(([,Q])=>Q!=null));if(E.has("serverApi"))throw new D1.MongoParseError("URI cannot contain `serverApi`, it can only be passed to the client");let G=E.get("authMechanismProperties");if(G){for(let Q of G)if(/(^|,)ALLOWED_HOSTS:/.test(Q))throw new D1.MongoParseError("Auth mechanism property ALLOWED_HOSTS is not allowed in the connection string.")}if(Y.has("loadBalanced"))throw new D1.MongoParseError("loadBalanced is only a valid option in the URI");let H=new AF,W=new Set([...E.keys(),...Y.keys()]);for(let Q of W){let K=[],U=Y.get(Q);if(U!=null)K.push(U);let Z=E.get(Q)??[];K.push(...Z),H.set(Q,K)}if(H.has("tls")||H.has("ssl")){let Q=(H.get("tls")||[]).concat(H.get("ssl")||[]).map(Z4.bind(null,"tls/ssl"));if(new Set(Q).size!==1)throw new D1.MongoParseError("All values of tls/ssl must be the same.")}rA1(H);let q=q2.setDifference(W,Array.from(Object.keys(Lk.OPTIONS)).map((Q)=>Q.toLowerCase()));if(q.size!==0){let Q=q.size>1?"options":"option",K=q.size>1?"are":"is";throw new D1.MongoParseError(`${Q} ${Array.from(q).join(", ")} ${K} not supported`)}for(let[Q,K]of Object.entries(Lk.OPTIONS)){let U=H.get(Q);if(!U||U.length===0){if(Lk.DEFAULT_OPTIONS.has(Q))Vk(X,Q,K,[Lk.DEFAULT_OPTIONS.get(Q)])}else{let{deprecated:Z}=K;if(Z){let V=typeof Z==="string"?`: ${Z}`:"";q2.emitWarning(`${Q} is a deprecated option${V}`)}Vk(X,Q,K,U)}}if(X.credentials){let Q=X.credentials.mechanism===i3.AuthMechanism.MONGODB_GSSAPI,K=X.credentials.mechanism===i3.AuthMechanism.MONGODB_X509,U=X.credentials.mechanism===i3.AuthMechanism.MONGODB_AWS,Z=X.credentials.mechanism===i3.AuthMechanism.MONGODB_OIDC;if((Q||K)&&H.has("authSource")&&X.credentials.source!=="$external")throw new D1.MongoParseError(`authMechanism ${X.credentials.mechanism} requires an authSource of '$external'`);if(!(Q||K||U||Z)&&X.dbName&&!H.has("authSource"))X.credentials=h8.MongoCredentials.merge(X.credentials,{source:X.dbName});if(U&&X.credentials.username&&!X.credentials.password)throw new D1.MongoMissingCredentialsError(`When using ${X.credentials.mechanism} password must be set when a username is specified`);if(X.credentials.validate(),X.credentials.password===""&&X.credentials.username===""&&X.credentials.mechanism===i3.AuthMechanism.MONGODB_DEFAULT&&Object.keys(X.credentials.mechanismProperties).length===0)delete X.credentials}if(!X.dbName)X.dbName="test";if(KW($,X,J),F&&X.autoEncryption)Uk.Encrypter.checkForMongoCrypt(),X.encrypter=new Uk.Encrypter(F,A,B),X.autoEncrypter=X.encrypter.autoEncrypter;if(X.userSpecifiedAuthSource=Y.has("authSource")||E.has("authSource"),X.userSpecifiedReplicaSet=Y.has("replicaSet")||E.has("replicaSet"),J){if(X.srvHost=$[0],X.directConnection)throw new D1.MongoAPIError("SRV URI does not support directConnection");if(X.srvMaxHosts>0&&typeof X.replicaSet==="string")throw new D1.MongoParseError("Cannot use srvMaxHosts option with replicaSet");let Q=!Y.has("tls")&&!E.has("tls"),K=!Y.has("ssl")&&!E.has("ssl");if(Q&&K)X.tls=!0}else if(E.has("srvMaxHosts")||Y.has("srvMaxHosts")||E.has("srvServiceName")||Y.has("srvServiceName"))throw new D1.MongoParseError("Cannot use srvMaxHosts or srvServiceName with a non-srv connection string");if(X.directConnection&&X.hosts.length!==1)throw new D1.MongoParseError("directConnection option requires exactly one host");if(!X.proxyHost&&(X.proxyPort||X.proxyUsername||X.proxyPassword))throw new D1.MongoParseError("Must specify proxyHost if other proxy options are passed");if(X.proxyUsername&&!X.proxyPassword||!X.proxyUsername&&X.proxyPassword)throw new D1.MongoParseError("Can only specify both of proxy username/password or neither");if(["proxyHost","proxyPort","proxyUsername","proxyPassword"].map((Q)=>E.get(Q)??[]).some((Q)=>Q.length>1))throw new D1.MongoParseError("Proxy options cannot be specified multiple times in the connection string");return X.mongoLoggerOptions=QW.MongoLogger.resolveOptions({MONGODB_LOG_COMMAND:process.env.MONGODB_LOG_COMMAND,MONGODB_LOG_TOPOLOGY:process.env.MONGODB_LOG_TOPOLOGY,MONGODB_LOG_SERVER_SELECTION:process.env.MONGODB_LOG_SERVER_SELECTION,MONGODB_LOG_CONNECTION:process.env.MONGODB_LOG_CONNECTION,MONGODB_LOG_CLIENT:process.env.MONGODB_LOG_CLIENT,MONGODB_LOG_ALL:process.env.MONGODB_LOG_ALL,MONGODB_LOG_MAX_DOCUMENT_LENGTH:process.env.MONGODB_LOG_MAX_DOCUMENT_LENGTH,MONGODB_LOG_PATH:process.env.MONGODB_LOG_PATH},{mongodbLogPath:X.mongodbLogPath,mongodbLogComponentSeverities:X.mongodbLogComponentSeverities,mongodbLogMaxDocumentLength:X.mongodbLogMaxDocumentLength}),X.metadata=Kk.makeClientMetadata(X),X.extendedMetadata=Kk.addContainerMetadata(X.metadata).then(void 0,q2.squashError),X}function KW(A,F,B){if(F.loadBalanced){if(A.length>1)throw new D1.MongoParseError(cA1);if(F.replicaSet)throw new D1.MongoParseError(pA1);if(F.directConnection)throw new D1.MongoParseError(iA1);if(B&&F.srvMaxHosts>0)throw new D1.MongoParseError("Cannot limit srv hosts with loadBalanced enabled")}return}function Vk(A,F,B,D){let{target:$,type:J,transform:X}=B,E=$??F;switch(J){case"boolean":A[E]=Z4(E,D[0]);break;case"int":A[E]=zW(E,D[0]);break;case"uint":A[E]=eA(E,D[0]);break;case"string":if(D[0]==null)break;A[E]=String(D[0]);break;case"record":if(!q2.isRecord(D[0]))throw new D1.MongoParseError(`${E} must be an object`);A[E]=D[0];break;case"any":A[E]=D[0];break;default:{if(!X)throw new D1.MongoParseError("Descriptors missing a type must define a transform");let Y=X({name:E,options:A,values:D});A[E]=Y;break}}}Lk.OPTIONS={appName:{type:"string"},auth:{target:"credentials",transform({name:A,options:F,values:[B]}){if(!q2.isRecord(B,["username","password"]))throw new D1.MongoParseError(`${A} must be an object with 'username' and 'password' properties`);return h8.MongoCredentials.merge(F.credentials,{username:B.username,password:B.password})}},authMechanism:{target:"credentials",transform({options:A,values:[F]}){let B=Object.values(i3.AuthMechanism),[D]=B.filter((X)=>X.match(RegExp(String.raw`\b${F}\b`,"i")));if(!D)throw new D1.MongoParseError(`authMechanism one of ${B}, got ${F}`);let $=A.credentials?.source;if(D===i3.AuthMechanism.MONGODB_PLAIN||i3.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(D))$="$external";let J=A.credentials?.password;if(D===i3.AuthMechanism.MONGODB_X509&&J==="")J=void 0;return h8.MongoCredentials.merge(A.credentials,{mechanism:D,source:$,password:J})}},authMechanismProperties:{target:"credentials",transform({options:A,values:F}){let B=Object.create(null);for(let D of F)if(typeof D==="string")for(let[$,J]of Zk(D))try{B[$]=Z4($,J)}catch{B[$]=J}else{if(!q2.isRecord(D))throw new D1.MongoParseError("AuthMechanismProperties must be an object");B={...D}}return h8.MongoCredentials.merge(A.credentials,{mechanismProperties:B})}},authSource:{target:"credentials",transform({options:A,values:[F]}){let B=String(F);return h8.MongoCredentials.merge(A.credentials,{source:B})}},autoEncryption:{type:"record"},autoSelectFamily:{type:"boolean",default:!0},autoSelectFamilyAttemptTimeout:{type:"uint"},bsonRegExp:{type:"boolean"},serverApi:{target:"serverApi",transform({values:[A]}){let F=typeof A==="string"?{version:A}:A,B=F&&F.version;if(!B)throw new D1.MongoParseError(`Invalid \`serverApi\` property; must specify a version from the following enum: ["${Object.values(C$.ServerApiVersion).join('", "')}"]`);if(!Object.values(C$.ServerApiVersion).some((D)=>D===B))throw new D1.MongoParseError(`Invalid server API version=${B}; must be in the following enum: ["${Object.values(C$.ServerApiVersion).join('", "')}"]`);return F}},checkKeys:{type:"boolean"},compressors:{default:"none",target:"compressors",transform({values:A}){let F=new Set;for(let B of A){let D=typeof B==="string"?B.split(","):B;if(!Array.isArray(D))throw new D1.MongoInvalidArgumentError("compressors must be an array or a comma-delimited list of strings");for(let $ of D)if(Object.keys(zk.Compressor).includes(String($)))F.add(String($));else throw new D1.MongoInvalidArgumentError(`${$} is not a valid compression mechanism. Must be one of: ${Object.keys(zk.Compressor)}.`)}return[...F]}},connectTimeoutMS:{default:30000,type:"uint"},dbName:{type:"string"},directConnection:{default:!1,type:"boolean"},driverInfo:{default:{},type:"record"},enableUtf8Validation:{type:"boolean",default:!0},family:{transform({name:A,values:[F]}){let B=zW(A,F);if(B===4||B===6)return B;throw new D1.MongoParseError(`Option 'family' must be 4 or 6 got ${B}.`)}},fieldsAsRaw:{type:"record"},forceServerObjectId:{default:!1,type:"boolean"},fsync:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:A,options:F,values:[B]}){let D=U4.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,fsync:Z4(A,B)}});if(!D)throw new D1.MongoParseError(`Unable to make a writeConcern from fsync=${B}`);return D}},heartbeatFrequencyMS:{default:1e4,type:"uint"},ignoreUndefined:{type:"boolean"},j:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:A,options:F,values:[B]}){let D=U4.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,journal:Z4(A,B)}});if(!D)throw new D1.MongoParseError(`Unable to make a writeConcern from journal=${B}`);return D}},journal:{target:"writeConcern",transform({name:A,options:F,values:[B]}){let D=U4.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,journal:Z4(A,B)}});if(!D)throw new D1.MongoParseError(`Unable to make a writeConcern from journal=${B}`);return D}},loadBalanced:{default:!1,type:"boolean"},localThresholdMS:{default:15,type:"uint"},maxConnecting:{default:2,transform({name:A,values:[F]}){let B=eA(A,F);if(B===0)throw new D1.MongoInvalidArgumentError("maxConnecting must be > 0 if specified");return B}},maxIdleTimeMS:{default:0,type:"uint"},maxPoolSize:{default:100,type:"uint"},maxStalenessSeconds:{target:"readPreference",transform({name:A,options:F,values:[B]}){let D=eA(A,B);if(F.readPreference)return C9.ReadPreference.fromOptions({readPreference:{...F.readPreference,maxStalenessSeconds:D}});else return new C9.ReadPreference("secondary",void 0,{maxStalenessSeconds:D})}},minInternalBufferSize:{type:"uint"},minPoolSize:{default:0,type:"uint"},minHeartbeatFrequencyMS:{default:500,type:"uint"},monitorCommands:{default:!1,type:"boolean"},name:{target:"driverInfo",transform({values:[A],options:F}){return{...F.driverInfo,name:String(A)}}},noDelay:{default:!0,type:"boolean"},pkFactory:{default:q2.DEFAULT_PK_FACTORY,transform({values:[A]}){if(q2.isRecord(A,["createPk"])&&typeof A.createPk==="function")return A;throw new D1.MongoParseError(`Option pkFactory must be an object with a createPk function, got ${A}`)}},promoteBuffers:{type:"boolean"},promoteLongs:{type:"boolean"},promoteValues:{type:"boolean"},useBigInt64:{type:"boolean"},proxyHost:{type:"string"},proxyPassword:{type:"string"},proxyPort:{type:"uint"},proxyUsername:{type:"string"},raw:{default:!1,type:"boolean"},readConcern:{transform({values:[A],options:F}){if(A instanceof qW.ReadConcern||q2.isRecord(A,["level"]))return qW.ReadConcern.fromOptions({...F.readConcern,...A});throw new D1.MongoParseError(`ReadConcern must be an object, got ${JSON.stringify(A)}`)}},readConcernLevel:{target:"readConcern",transform({values:[A],options:F}){return qW.ReadConcern.fromOptions({...F.readConcern,level:A})}},readPreference:{default:C9.ReadPreference.primary,transform({values:[A],options:F}){if(A instanceof C9.ReadPreference)return C9.ReadPreference.fromOptions({readPreference:{...F.readPreference,...A},...A});if(q2.isRecord(A,["mode"])){let B=C9.ReadPreference.fromOptions({readPreference:{...F.readPreference,...A},...A});if(B)return B;else throw new D1.MongoParseError(`Cannot make read preference from ${JSON.stringify(A)}`)}if(typeof A==="string"){let B={hedge:F.readPreference?.hedge,maxStalenessSeconds:F.readPreference?.maxStalenessSeconds};return new C9.ReadPreference(A,F.readPreference?.tags,B)}throw new D1.MongoParseError(`Unknown ReadPreference value: ${A}`)}},readPreferenceTags:{target:"readPreference",transform({values:A,options:F}){let B=Array.isArray(A[0])?A[0]:A,D=[];for(let $ of B){let J=Object.create(null);if(typeof $==="string")for(let[X,E]of Zk($))J[X]=E;if(q2.isRecord($))for(let[X,E]of Object.entries($))J[X]=E;D.push(J)}return C9.ReadPreference.fromOptions({readPreference:F.readPreference,readPreferenceTags:D})}},replicaSet:{type:"string"},retryReads:{default:!0,type:"boolean"},retryWrites:{default:!0,type:"boolean"},serializeFunctions:{type:"boolean"},serverMonitoringMode:{default:"auto",transform({values:[A]}){if(!Object.values(lA1.ServerMonitoringMode).includes(A))throw new D1.MongoParseError("serverMonitoringMode must be one of `auto`, `poll`, or `stream`");return A}},serverSelectionTimeoutMS:{default:30000,type:"uint"},servername:{type:"string"},socketTimeoutMS:{default:0,type:"uint"},srvMaxHosts:{type:"uint",default:0},srvServiceName:{type:"string",default:"mongodb"},ssl:{target:"tls",type:"boolean"},timeoutMS:{type:"uint"},tls:{type:"boolean"},tlsAllowInvalidCertificates:{target:"rejectUnauthorized",transform({name:A,values:[F]}){return!Z4(A,F)}},tlsAllowInvalidHostnames:{target:"checkServerIdentity",transform({name:A,values:[F]}){return Z4(A,F)?()=>{return}:void 0}},tlsCAFile:{type:"string"},tlsCRLFile:{type:"string"},tlsCertificateKeyFile:{type:"string"},tlsCertificateKeyFilePassword:{target:"passphrase",type:"any"},tlsInsecure:{transform({name:A,options:F,values:[B]}){let D=Z4(A,B);if(D)F.checkServerIdentity=()=>{return},F.rejectUnauthorized=!1;else F.checkServerIdentity=F.tlsAllowInvalidHostnames?()=>{return}:void 0,F.rejectUnauthorized=F.tlsAllowInvalidCertificates?!1:!0;return D}},w:{target:"writeConcern",transform({values:[A],options:F}){return U4.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,w:A}})}},waitQueueTimeoutMS:{default:0,type:"uint"},writeConcern:{target:"writeConcern",transform({values:[A],options:F}){if(q2.isRecord(A)||A instanceof U4.WriteConcern)return U4.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,...A}});else if(A==="majority"||typeof A==="number")return U4.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,w:A}});throw new D1.MongoParseError(`Invalid WriteConcern cannot parse: ${JSON.stringify(A)}`)}},wtimeout:{deprecated:"Please use wtimeoutMS instead",target:"writeConcern",transform({values:[A],options:F}){let B=U4.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,wtimeout:eA("wtimeout",A)}});if(B)return B;throw new D1.MongoParseError("Cannot make WriteConcern from wtimeout")}},wtimeoutMS:{target:"writeConcern",transform({values:[A],options:F}){let B=U4.WriteConcern.fromOptions({writeConcern:{...F.writeConcern,wtimeoutMS:eA("wtimeoutMS",A)}});if(B)return B;throw new D1.MongoParseError("Cannot make WriteConcern from wtimeout")}},zlibCompressionLevel:{default:0,type:"int"},mongodbLogPath:{transform({values:[A]}){if(!(typeof A==="string"&&["stderr","stdout"].includes(A)||A&&typeof A==="object"&&("write"in A)&&typeof A.write==="function"))throw new D1.MongoAPIError("Option 'mongodbLogPath' must be of type 'stderr' | 'stdout' | MongoDBLogWritable");return A}},mongodbLogComponentSeverities:{transform({values:[A]}){if(typeof A!=="object"||!A)throw new D1.MongoAPIError("Option 'mongodbLogComponentSeverities' must be a non-null object");for(let[F,B]of Object.entries(A)){if(typeof B!=="string"||typeof F!=="string")throw new D1.MongoAPIError("User input for option 'mongodbLogComponentSeverities' object cannot include a non-string key or value");if(!Object.values(QW.MongoLoggableComponent).some((D)=>D===F)&&F!=="default")throw new D1.MongoAPIError(`User input for option 'mongodbLogComponentSeverities' contains invalid key: ${F}`);if(!Object.values(QW.SeverityLevel).some((D)=>D===B))throw new D1.MongoAPIError(`Option 'mongodbLogComponentSeverities' does not support ${B} as a value for ${F}`)}return A}},mongodbLogMaxDocumentLength:{type:"uint"},connectionType:{type:"any"},srvPoller:{type:"any"},allowPartialTrustChain:{type:"any"},minDHSize:{type:"any"},pskCallback:{type:"any"},secureContext:{type:"any"},enableTrace:{type:"any"},requestCert:{type:"any"},rejectUnauthorized:{type:"any"},checkServerIdentity:{type:"any"},keepAliveInitialDelay:{type:"any"},ALPNProtocols:{type:"any"},SNICallback:{type:"any"},session:{type:"any"},requestOCSP:{type:"any"},localAddress:{type:"any"},localPort:{type:"any"},hints:{type:"any"},lookup:{type:"any"},ca:{type:"any"},cert:{type:"any"},ciphers:{type:"any"},crl:{type:"any"},ecdhCurve:{type:"any"},key:{type:"any"},passphrase:{type:"any"},pfx:{type:"any"},secureProtocol:{type:"any"},index:{type:"any"},useNewUrlParser:{type:"boolean",deprecated:"useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},useUnifiedTopology:{type:"boolean",deprecated:"useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},__skipPingOnConnect:{type:"boolean"}};Lk.DEFAULT_OPTIONS=new AF(Object.entries(Lk.OPTIONS).filter(([,A])=>A.default!=null).map(([A,F])=>[A,F.default]))});var Ik=z((Nk)=>{Object.defineProperty(Nk,"__esModule",{value:!0});Nk.MongoDBAWS=void 0;var ZW=y1(),VW=U3(),m8=s(),v8=F1(),AF1=F9(),wW=UH(),FF1=ID(),BF1=m3(),DF1=110,LW={useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1};class Rk extends AF1.AuthProvider{constructor(A){super();this.credentialProvider=A,this.credentialFetcher=wW.AWSTemporaryCredentialProvider.isAWSSDKInstalled?new wW.AWSSDKCredentialProvider(A):new wW.LegacyAWSTemporaryCredentialProvider}async auth(A){let{connection:F}=A;if(!A.credentials)throw new m8.MongoMissingCredentialsError("AuthContext must provide credentials.");if("kModuleError"in VW.aws4)throw VW.aws4.kModuleError;let{sign:B}=VW.aws4;if(v8.maxWireVersion(F)<9)throw new m8.MongoCompatibilityError("MONGODB-AWS authentication requires MongoDB version 4.4 or later");if(!A.credentials.username)A.credentials=await $F1(A.credentials,this.credentialFetcher);let{credentials:D}=A,$=D.username,J=D.password,X=D.mechanismProperties.AWS_SESSION_TOKEN,E=$&&J&&X?{accessKeyId:$,secretAccessKey:J,sessionToken:X}:$&&J?{accessKeyId:$,secretAccessKey:J}:void 0,Y=D.source,G=await v8.randomBytes(32),H={saslStart:1,mechanism:"MONGODB-AWS",payload:ZW.serialize({r:G,p:DF1},LW)},W=await F.command(v8.ns(`${Y}.$cmd`),H,void 0),q=ZW.deserialize(W.payload.buffer,LW),C=q.h,Q=q.s.buffer;if(Q.length!==64)throw new m8.MongoRuntimeError(`Invalid server nonce length ${Q.length}, expected 64`);if(!v8.ByteUtils.equals(Q.subarray(0,G.byteLength),G))throw new m8.MongoRuntimeError("Server nonce does not begin with client nonce");if(C.length<1||C.length>255||C.indexOf("..")!==-1)throw new m8.MongoRuntimeError(`Server returned an invalid host: "${C}"`);let K="Action=GetCallerIdentity&Version=2011-06-15",U=B({method:"POST",host:C,region:JF1(q.h),service:"sts",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":K.length,"X-MongoDB-Server-Nonce":v8.ByteUtils.toBase64(Q),"X-MongoDB-GS2-CB-Flag":"n"},path:"/",body:K},E),Z={a:U.headers.Authorization,d:U.headers["X-Amz-Date"]};if(X)Z.t=X;let V={saslContinue:1,conversationId:W.conversationId,payload:ZW.serialize(Z,LW)};await F.command(v8.ns(`${Y}.$cmd`),V,void 0)}}Nk.MongoDBAWS=Rk;async function $F1(A,F){function B($){if(!$.AccessKeyId||!$.SecretAccessKey)throw new m8.MongoMissingCredentialsError("Could not obtain temporary MONGODB-AWS credentials");return new FF1.MongoCredentials({username:$.AccessKeyId,password:$.SecretAccessKey,source:A.source,mechanism:BF1.AuthMechanism.MONGODB_AWS,mechanismProperties:{AWS_SESSION_TOKEN:$.Token}})}let D=await F.getCredentials();return B(D)}function JF1(A){let F=A.split(".");if(F.length===1||F[1]==="amazonaws")return"us-east-1";return F[1]}});var Tk=z((jk)=>{Object.defineProperty(jk,"__esModule",{value:!0});jk.finishCommandDocument=XF1;jk.startCommandDocument=EF1;var d8=y1(),Mk=m3();function XF1(A,F){if(F!=null)return{saslContinue:1,conversationId:F,payload:new d8.Binary(d8.BSON.serialize({jwt:A}))};return{saslStart:1,mechanism:Mk.AuthMechanism.MONGODB_OIDC,payload:new d8.Binary(d8.BSON.serialize({jwt:A}))}}function EF1(A){let F={};if(A.username)F.n=A.username;return{saslStart:1,autoAuthorize:1,mechanism:Mk.AuthMechanism.MONGODB_OIDC,payload:new d8.Binary(d8.BSON.serialize(F))}}});var PW=z((uk)=>{Object.defineProperty(uk,"__esModule",{value:!0});uk.CallbackWorkflow=uk.AUTOMATED_TIMEOUT_MS=uk.HUMAN_TIMEOUT_MS=void 0;var HF1=i("timers/promises"),WF1=s(),kk=F1(),RW=Tk();uk.HUMAN_TIMEOUT_MS=300000;uk.AUTOMATED_TIMEOUT_MS=60000;var qF1=["accessToken","expiresInSeconds","refreshToken"],CF1="User provided OIDC callbacks must return a valid object with an accessToken.",NW=100;class Ok{constructor(A,F){this.cache=A,this.callback=this.withLock(F),this.lastExecutionTime=Date.now()-NW}async speculativeAuth(A,F){if(this.cache.hasAccessToken){let B=this.cache.getAccessToken();A.accessToken=B;let D=RW.finishCommandDocument(B);return D.db=F.source,{speculativeAuthenticate:D}}return{}}async reauthenticate(A,F){if(this.cache.hasAccessToken)if(A.accessToken===this.cache.getAccessToken())this.cache.removeAccessToken(),delete A.accessToken;else A.accessToken=this.cache.getAccessToken();await this.execute(A,F)}async startAuthentication(A,F,B){let D;if(B?.speculativeAuthenticate)D=B.speculativeAuthenticate;else D=await A.command(kk.ns(F.source),RW.startCommandDocument(F),void 0);return D}async finishAuthentication(A,F,B,D){await A.command(kk.ns(F.source),RW.finishCommandDocument(B,D),void 0)}async executeAndValidateCallback(A){let F=await this.callback(A);if(QF1(F))throw new WF1.MongoMissingCredentialsError(CF1);return F}withLock(A){let F=Promise.resolve();return async(B)=>{return await F,F=F.catch(()=>null).then(async()=>{let D=Date.now()-this.lastExecutionTime;if(D<=NW)await HF1.setTimeout(NW-D,{signal:B.timeoutContext});return this.lastExecutionTime=Date.now(),await A(B)}),await F}}}uk.CallbackWorkflow=Ok;function QF1(A){if(A==null||typeof A!=="object")return!0;if(!("accessToken"in A))return!0;return!Object.getOwnPropertyNames(A).every((F)=>qF1.includes(F))}});var jW=z((xk)=>{Object.defineProperty(xk,"__esModule",{value:!0});xk.AutomatedCallbackWorkflow=void 0;var IW=s(),fk=M2(),UF1=z$(),MW=PW();class _k extends MW.CallbackWorkflow{constructor(A,F){super(A,F)}async execute(A,F){if(this.cache.hasAccessToken){let D=this.cache.getAccessToken();if(!A.accessToken)A.accessToken=D;try{return await this.finishAuthentication(A,F,D)}catch($){if($ instanceof IW.MongoError&&$.code===IW.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),await this.execute(A,F);else throw $}}let B=await this.fetchAccessToken(F);this.cache.put(B),A.accessToken=B.accessToken,await this.finishAuthentication(A,F,B.accessToken)}async fetchAccessToken(A){let F=new AbortController,B={timeoutContext:F.signal,version:UF1.OIDC_VERSION};if(A.username)B.username=A.username;if(A.mechanismProperties.TOKEN_RESOURCE)B.tokenAudience=A.mechanismProperties.TOKEN_RESOURCE;let D=fk.Timeout.expires(MW.AUTOMATED_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(B),D])}catch($){if(fk.TimeoutError.is($))throw F.abort(),new IW.MongoOIDCError(`OIDC callback timed out after ${MW.AUTOMATED_TIMEOUT_MS}ms.`);throw $}finally{D.clear()}}}xk.AutomatedCallbackWorkflow=_k});var vk=z((yk)=>{Object.defineProperty(yk,"__esModule",{value:!0});yk.callback=void 0;var bk=wH(),TW=s(),ZF1=F1(),VF1=Object.freeze({Metadata:"true",Accept:"application/json"}),wF1="Azure endpoint did not return a value with only access_token and expires_in properties",LF1="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure.",RF1=async(A)=>{let{tokenAudience:F,username:B}=A;if(!F)throw new TW.MongoAzureError(LF1);let D=await NF1(F,B);if(!PF1(D))throw new TW.MongoAzureError(wF1);return D};yk.callback=RF1;async function NF1(A,F){let B=new URL(bk.AZURE_BASE_URL);bk.addAzureParams(B,A,F);let D=await ZF1.get(B,{headers:VF1});if(D.status!==200)throw new TW.MongoAzureError(`Status code ${D.status} returned from the Azure endpoint. Response body: ${D.body}`);let $=JSON.parse(D.body);return{accessToken:$.access_token,expiresInSeconds:Number($.expires_in)}}function PF1(A){if(A==null||typeof A!=="object")return!1;return"accessToken"in A&&typeof A.accessToken==="string"&&"expiresInSeconds"in A&&typeof A.expiresInSeconds==="number"}});var ck=z((dk)=>{Object.defineProperty(dk,"__esModule",{value:!0});dk.callback=void 0;var mk=s(),IF1=F1(),MF1="http://metadata/computeMetadata/v1/instance/service-accounts/default/identity",jF1=Object.freeze({"Metadata-Flavor":"Google"}),TF1="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is gcp.",kF1=async(A)=>{let F=A.tokenAudience;if(!F)throw new mk.MongoGCPError(TF1);return await OF1(F)};dk.callback=kF1;async function OF1(A){let F=new URL(MF1);F.searchParams.append("audience",A);let B=await IF1.get(F,{headers:jF1});if(B.status!==200)throw new mk.MongoGCPError(`Status code ${B.status} returned from the GCP endpoint. Response body: ${B.body}`);return{accessToken:B.body}}});var ak=z((nk)=>{Object.defineProperty(nk,"__esModule",{value:!0});nk.callback=void 0;var uF1=i("fs/promises"),SF1="/var/run/secrets/kubernetes.io/serviceaccount/token",pk="AZURE_FEDERATED_TOKEN_FILE",ik="AWS_WEB_IDENTITY_TOKEN_FILE",fF1=async()=>{let A;if(process.env[pk])A=process.env[pk];else if(process.env[ik])A=process.env[ik];else A=SF1;return{accessToken:await uF1.readFile(A,"utf8")}};nk.callback=fF1});var kW=z((tk)=>{Object.defineProperty(tk,"__esModule",{value:!0});tk.TokenCache=void 0;var _F1=s();class U$ extends _F1.MongoDriverError{}class rk{get hasAccessToken(){return!!this.accessToken}get hasRefreshToken(){return!!this.refreshToken}get hasIdpInfo(){return!!this.idpInfo}getAccessToken(){if(!this.accessToken)throw new U$("Attempted to get an access token when none exists.");return this.accessToken}getRefreshToken(){if(!this.refreshToken)throw new U$("Attempted to get a refresh token when none exists.");return this.refreshToken}getIdpInfo(){if(!this.idpInfo)throw new U$("Attempted to get IDP information when none exists.");return this.idpInfo}put(A,F){if(this.accessToken=A.accessToken,this.refreshToken=A.refreshToken,this.expiresInSeconds=A.expiresInSeconds,F)this.idpInfo=F}removeAccessToken(){this.accessToken=void 0}removeRefreshToken(){this.refreshToken=void 0}}tk.TokenCache=rk});var FO=z((ek)=>{Object.defineProperty(ek,"__esModule",{value:!0});ek.callback=void 0;var xF1=i("fs"),gF1=s(),bF1="OIDC_TOKEN_FILE must be set in the environment.",yF1=async()=>{let A=process.env.OIDC_TOKEN_FILE;if(!A)throw new gF1.MongoAWSError(bF1);return{accessToken:await xF1.promises.readFile(A,"utf8")}};ek.callback=yF1});var z$=z((JO)=>{Object.defineProperty(JO,"__esModule",{value:!0});JO.MongoDBOIDC=JO.OIDC_WORKFLOWS=JO.OIDC_VERSION=void 0;var DO=s(),hF1=F9(),Z$=jW(),vF1=vk(),mF1=ck(),dF1=ak(),V$=kW(),lF1=FO(),cF1="AuthContext must provide credentials.";JO.OIDC_VERSION=1;JO.OIDC_WORKFLOWS=new Map;JO.OIDC_WORKFLOWS.set("test",()=>new Z$.AutomatedCallbackWorkflow(new V$.TokenCache,lF1.callback));JO.OIDC_WORKFLOWS.set("azure",()=>new Z$.AutomatedCallbackWorkflow(new V$.TokenCache,vF1.callback));JO.OIDC_WORKFLOWS.set("gcp",()=>new Z$.AutomatedCallbackWorkflow(new V$.TokenCache,mF1.callback));JO.OIDC_WORKFLOWS.set("k8s",()=>new Z$.AutomatedCallbackWorkflow(new V$.TokenCache,dF1.callback));class $O extends hF1.AuthProvider{constructor(A){super();if(!A)throw new DO.MongoInvalidArgumentError("No workflow provided to the OIDC auth provider.");this.workflow=A}async auth(A){let{connection:F,reauthenticating:B,response:D}=A;if(D?.speculativeAuthenticate?.done&&!B)return;let $=BO(A);if(B)await this.workflow.reauthenticate(F,$);else await this.workflow.execute(F,$,D)}async prepare(A,F){let{connection:B}=F,D=BO(F),$=await this.workflow.speculativeAuth(B,D);return{...A,...$}}}JO.MongoDBOIDC=$O;function BO(A){let{credentials:F}=A;if(!F)throw new DO.MongoMissingCredentialsError(cF1);return F}});var WO=z((GO)=>{Object.defineProperty(GO,"__esModule",{value:!0});GO.HumanCallbackWorkflow=void 0;var iF1=y1(),BF=s(),EO=M2(),nF1=z$(),OW=PW();class YO extends OW.CallbackWorkflow{constructor(A,F){super(A,F)}async execute(A,F){if(this.cache.hasAccessToken){let X=this.cache.getAccessToken();A.accessToken=X;try{return await this.finishAuthentication(A,F,X)}catch(E){if(E instanceof BF.MongoError&&E.code===BF.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),delete A.accessToken,await this.execute(A,F);else throw E}}if(this.cache.hasRefreshToken){let X=this.cache.getRefreshToken(),E=await this.fetchAccessToken(this.cache.getIdpInfo(),F,X);this.cache.put(E),A.accessToken=E.accessToken;try{return await this.finishAuthentication(A,F,E.accessToken)}catch(Y){if(Y instanceof BF.MongoError&&Y.code===BF.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeRefreshToken(),delete A.accessToken,await this.execute(A,F);else throw Y}}let B=await this.startAuthentication(A,F),D=B.conversationId,$=iF1.BSON.deserialize(B.payload.buffer),J=await this.fetchAccessToken($,F);return this.cache.put(J,$),A.accessToken=J.accessToken,await this.finishAuthentication(A,F,J.accessToken,D)}async fetchAccessToken(A,F,B){let D=new AbortController,$={timeoutContext:D.signal,version:nF1.OIDC_VERSION,idpInfo:A};if(F.username)$.username=F.username;if(B)$.refreshToken=B;let J=EO.Timeout.expires(OW.HUMAN_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback($),J])}catch(X){if(EO.TimeoutError.is(X))throw D.abort(),new BF.MongoOIDCError(`OIDC callback timed out after ${OW.HUMAN_TIMEOUT_MS}ms.`);throw X}finally{J.clear()}}}GO.HumanCallbackWorkflow=YO});var KO=z((CO)=>{Object.defineProperty(CO,"__esModule",{value:!0});CO.Plain=void 0;var sF1=y1(),aF1=s(),rF1=F1(),tF1=F9();class qO extends tF1.AuthProvider{async auth(A){let{connection:F,credentials:B}=A;if(!B)throw new aF1.MongoMissingCredentialsError("AuthContext must provide credentials.");let{username:D,password:$}=B,X={saslStart:1,mechanism:"PLAIN",payload:new sF1.Binary(Buffer.from(`\x00${D}\x00${$}`)),autoAuthorize:1};await F.command(rF1.ns("$external.$cmd"),X,void 0)}}CO.Plain=qO});var VO=z((nI1,ZO)=>{var zO=(A)=>A.codePointAt(0),oF1=(A)=>A[0],eF1=(A)=>A[A.length-1];function UO(A){let F=[],B=A.length;for(let D=0;D<B;D+=1){let $=A.charCodeAt(D);if($>=55296&&$<=56319&&B>D+1){let J=A.charCodeAt(D+1);if(J>=56320&&J<=57343){F.push(($-55296)*1024+J-56320+65536),D+=1;continue}}F.push($)}return F}function DF({unassigned_code_points:A,commonly_mapped_to_nothing:F,non_ASCII_space_characters:B,prohibited_characters:D,bidirectional_r_al:$,bidirectional_l:J},X,E={}){let Y=B,G=F;if(typeof X!=="string")throw new TypeError("Expected string.");if(X.length===0)return"";let H=UO(X).map((V)=>Y.get(V)?32:V).filter((V)=>!G.get(V)),W=String.fromCodePoint.apply(null,H).normalize("NFKC"),q=UO(W);if(q.some((V)=>D.get(V)))throw new Error("Prohibited character, see https://tools.ietf.org/html/rfc4013#section-2.3");if(E.allowUnassigned!==!0){if(q.some((w)=>A.get(w)))throw new Error("Unassigned code point, see https://tools.ietf.org/html/rfc4013#section-2.5")}let Q=q.some((V)=>$.get(V)),K=q.some((V)=>J.get(V));if(Q&&K)throw new Error("String must not contain RandALCat and LCat at the same time, see https://tools.ietf.org/html/rfc3454#section-6");let U=$.get(zO(oF1(W))),Z=$.get(zO(eF1(W)));if(Q&&!(U&&Z))throw new Error("Bidirectional RandALCat character must be the first and the last character of the string, see https://tools.ietf.org/html/rfc3454#section-6");return W}DF.saslprep=DF;DF.default=DF;ZO.exports=DF});var RO=z((sI1,LO)=>{LO.exports=V4;function V4(A,F){if(!(this instanceof V4))return new V4(A,F);this.length=0,this.updates=[],this.path=new Uint16Array(4),this.pages=new Array(32768),this.maxPages=this.pages.length,this.level=0,this.pageSize=A||1024,this.deduplicate=F?F.deduplicate:null,this.zeros=this.deduplicate?w$(this.deduplicate.length):null}V4.prototype.updated=function(A){while(this.deduplicate&&A.buffer[A.deduplicate]===this.deduplicate[A.deduplicate])if(A.deduplicate++,A.deduplicate===this.deduplicate.length){if(A.deduplicate=0,A.buffer.equals&&A.buffer.equals(this.deduplicate))A.buffer=this.deduplicate;break}if(A.updated||!this.updates)return;A.updated=!0,this.updates.push(A)};V4.prototype.lastUpdate=function(){if(!this.updates||!this.updates.length)return null;var A=this.updates.pop();return A.updated=!1,A};V4.prototype._array=function(A,F){if(A>=this.maxPages){if(F)return;AB1(this,A)}DB1(A,this.path);var B=this.pages;for(var D=this.level;D>0;D--){var $=this.path[D],J=B[$];if(!J){if(F)return;J=B[$]=new Array(32768)}B=J}return B};V4.prototype.get=function(A,F){var B=this._array(A,F),D=this.path[0],$=B&&B[D];if(!$&&!F){if($=B[D]=new wO(A,w$(this.pageSize)),A>=this.length)this.length=A+1}if($&&$.buffer===this.deduplicate&&this.deduplicate&&!F)$.buffer=BB1($.buffer),$.deduplicate=0;return $};V4.prototype.set=function(A,F){var B=this._array(A,!1),D=this.path[0];if(A>=this.length)this.length=A+1;if(!F||this.zeros&&F.equals&&F.equals(this.zeros)){B[D]=void 0;return}if(this.deduplicate&&F.equals&&F.equals(this.deduplicate))F=this.deduplicate;var $=B[D],J=FB1(F,this.pageSize);if($)$.buffer=J;else B[D]=new wO(A,J)};V4.prototype.toBuffer=function(){var A=new Array(this.length),F=w$(this.pageSize),B=0;while(B<A.length){var D=this._array(B,!0);for(var $=0;$<32768&&B<A.length;$++)A[B++]=D&&D[$]?D[$].buffer:F}return Buffer.concat(A)};function AB1(A,F){while(A.maxPages<F){var B=A.pages;A.pages=new Array(32768),A.pages[0]=B,A.level++,A.maxPages*=32768}}function FB1(A,F){if(A.length===F)return A;if(A.length>F)return A.slice(0,F);var B=w$(F);return A.copy(B),B}function w$(A){if(Buffer.alloc)return Buffer.alloc(A);var F=new Buffer(A);return F.fill(0),F}function BB1(A){var F=Buffer.allocUnsafe?Buffer.allocUnsafe(A.length):new Buffer(A.length);return A.copy(F),F}function wO(A,F){this.offset=A*F.length,this.buffer=F,this.updated=!1,this.deduplicate=0}function DB1(A,F){A=(A-(F[0]=A&32767))/32768,A=(A-(F[1]=A&32767))/32768,F[3]=(A-(F[2]=A&32767))/32768&32767}});var PO=z((aI1,NO)=>{var $B1=RO();NO.exports=Q9;function Q9(A){if(!(this instanceof Q9))return new Q9(A);if(!A)A={};if(Buffer.isBuffer(A))A={buffer:A};if(this.pageOffset=A.pageOffset||0,this.pageSize=A.pageSize||1024,this.pages=A.pages||$B1(this.pageSize),this.byteLength=this.pages.length*this.pageSize,this.length=8*this.byteLength,!XB1(this.pageSize))throw new Error("The page size should be a power of two");if(this._trackUpdates=!!A.trackUpdates,this._pageMask=this.pageSize-1,A.buffer){for(var F=0;F<A.buffer.length;F+=this.pageSize)this.pages.set(F/this.pageSize,A.buffer.slice(F,F+this.pageSize));this.byteLength=A.buffer.length,this.length=8*this.byteLength}}Q9.prototype.get=function(A){var F=A&7,B=(A-F)/8;return!!(this.getByte(B)&128>>F)};Q9.prototype.getByte=function(A){var F=A&this._pageMask,B=(A-F)/this.pageSize,D=this.pages.get(B,!0);return D?D.buffer[F+this.pageOffset]:0};Q9.prototype.set=function(A,F){var B=A&7,D=(A-B)/8,$=this.getByte(D);return this.setByte(D,F?$|128>>B:$&(255^128>>B))};Q9.prototype.toBuffer=function(){var A=JB1(this.pages.length*this.pageSize);for(var F=0;F<this.pages.length;F++){var B=this.pages.get(F,!0),D=F*this.pageSize;if(B)B.buffer.copy(A,D,this.pageOffset,this.pageOffset+this.pageSize)}return A};Q9.prototype.setByte=function(A,F){var B=A&this._pageMask,D=(A-B)/this.pageSize,$=this.pages.get(D,!1);if(B+=this.pageOffset,$.buffer[B]===F)return!1;if($.buffer[B]=F,A>=this.byteLength)this.byteLength=A+1,this.length=this.byteLength*8;if(this._trackUpdates)this.pages.updated($);return!0};function JB1(A){if(Buffer.alloc)return Buffer.alloc(A);var F=new Buffer(A);return F.fill(0),F}function XB1(A){return!(A&A-1)}});var IO=z(($F)=>{var EB1=$F&&$F.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty($F,"__esModule",{value:!0});$F.createMemoryCodePoints=GB1;var YB1=EB1(PO());function GB1(A){let F=0;function B(){let G=A.readUInt32BE(F);F+=4;let H=A.slice(F,F+G);return F+=G,YB1.default({buffer:H})}let D=B(),$=B(),J=B(),X=B(),E=B(),Y=B();return{unassigned_code_points:D,commonly_mapped_to_nothing:$,non_ASCII_space_characters:J,prohibited_characters:X,bidirectional_r_al:E,bidirectional_l:Y}}});var jO=z((MO)=>{Object.defineProperty(MO,"__esModule",{value:!0});var HB1=i("zlib");MO.default=HB1.gunzipSync(Buffer.from("H4sIAAAAAAACA+3dTYgcaRkA4LemO9Mhxm0FITnE9Cwr4jHgwgZ22B6YywqCJ0HQg5CL4sGTuOjCtGSF4CkHEW856MlTQHD3EJnWkU0Owh5VxE3LHlYQdNxd2U6mU59UV/d09fw4M2EySSXPAzNdP1/9fX/99bzVNZEN4jisRDulVFnQmLxm1aXF9Id/2/xMxNJ4XZlg576yuYlGt9gupV6xoFf8jhu9YvulVrFlp5XSx+lfvYhORGPXvqIRWSxERKtIm8bKFd10WNfKDS5Fo9jJWrq2+M2IlW+8uHgl/+BsROfPF4v5L7148Ur68Sha6dqZpYiVVy8tvLCWXo80Sf/lS89dGX2wHGvpzoXVn75/YWH5wmqe8uika82ViJXTy83Ve2k5Urozm38wm4/ls6t5uT6yfsTSJ7J3T0VKt8c5ExEXI8aFkH729c3eT+7EC6ca8cVULZUiYacX0R5PNWNxlh9L1y90q5kyzrpyy+9WcvOV6URntqw7La9sNVstXyczWVaWYbaaTYqzOHpr7pyiNT3/YzKuT63Z/FqKZlFTiuXtFM2vVOtIq7jiyKJbWZaOWD0euz0yoV2Z7kY0xq2x0YhfzVpmM5px9nTEH7JZ0ot5u39p0ma75Z472/s/H+2yr2inYyuq7fMvJivH2rM72N/Z3lyL31F2b1ya1P0zn816k2KP6JU9UzseucdQH5YqVeH/lFajSN2udg+TLJ9rksNxlvV2lki19rXKI43TPLejFu4ov7k3nMbhyhfY3Xb37f8BAGCf0eMTOH5szf154KmnNgKcnLb+Fzi2AfXktbN7fJelwTAiO/W5uQ2KINXRYu+znqo/WTAdLadURHmy3qciazd3bra4T3w16/f7t7Ms9U5gfJu10955sx1r3vmhBAAAAAAAgId20J1iZbDowNvIjuH427Gr5l/eiC+8OplZON8sVjx/qr9y+Pj+YRItT+NqAM+kkZs3AAAAAID6yfx1FwCAI97/dCh1/ub6SA0AAAAAAAAAgNoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hutp5SiQpYAAAAAAAAAQO2MIpZiT804flnAE2fhwjOeAZXr76kOAAAAAAAA8FjNf4N/l0NE3U/vuVQskLpSd4/Yh2xu9xTu0tFeeNYsLI2f/VMdNxTzj6Je9E/+6pp6Nn3awW3A54goe4Bss6v+PGsjQGMAAAAAAOBp5XEgwH6e7J7rwEQHRb/XvAMAAAAAAAA8yzoDeQDwVGjIAgAAAAAAAACoPfF/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqL/GSkSkClkCAAAAAAAAALXTSAAAAAAAAABA3Y1kAQAAAAAAAADUX8RSXZ9dsHC9+M8Fg2Ex/em1lAZpEBGttcrVjZqLEa+k0XpKw9mG4zWx4ukPUMhkAQAAAAAAABzBqbSe3//rXOS9HxGdo4TqR2XkutCdBu+LaPZw/lBbO7cbHnh2C7N7AIo4evEznllqLqWUp/LnYOtpM2bnOH66wI1+9GO4sOuISwv/TOlumu56FDv3NZhc4mR9v7zYIrafr40j/Cccvj9Xns3t3mu99E7qxUv3bqS0/ouNH/08++RGemfQ+nsx/5uNXsQPGulynPvv3ZTW37zd+1ovrqaYpP/122X6Xpx779Z3zr/3YOPKW1lkaRDf31pPaf3j/msRsVGkL+d/f+/m4sJsPm1cfSsr16e8m9Ldj/KsnyIuR3nXw83Is3EhxLd/2V773ks3m/cj/THKUummdP9qKhIOImuOU0Xjwb3y+oqt735rpTetVbF9n8R4x9crRfO77TKqVOZpDclv5bfK18lMnk+q0K18UpxF/RrGXE0Zxtqx3tWSj+vxbL4XaasfKb0dRbtLW73JsfPGg177H+OmGKlfvS1msllt7JEJm9XOJqXR+Fkfo1H66uy5H1v3Xx5+uJmGLw9jro2u7Loj4PnuR6+f+e3d261+eazNhzrL7X83MohoHpS4PddV8ki1it61//pw1g7z6p1U/26Nm2llST57B5rUvuG0XqSU/rPd7jYrqWcbd+beJQ77BgPMDwn37/8BAGCf0eMTOH4cPlufv9VGgJOzqf8Fjm1APXkd7B7f5dF57GPMaWy/MTvjvNvtXj6h8W2+GXvnzXaseeeHEgAAAAAAAB7aQXeKlcGiadBoEOeLb2dtpGOL2MyOtf391a3P/zD96c3JzIP3t4oV797vrh8+vn+YRL5bBuj/AQAAAABqJvfHXQAAHkX82zfXAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACeAgkAAAAAAAAAqLuRLAAAAAAAAACA2hv9D1iu/VAYaAYA","base64"))});var OO=z((uW,kO)=>{var TO=uW&&uW.__importDefault||function(A){return A&&A.__esModule?A:{default:A}},qB1=TO(VO()),CB1=IO(),QB1=TO(jO()),KB1=CB1.createMemoryCodePoints(QB1.default);function JF(A,F){return qB1.default(KB1,A,F)}JF.saslprep=JF;JF.default=JF;kO.exports=JF});var mO=z((hO)=>{Object.defineProperty(hO,"__esModule",{value:!0});hO.ScramSHA256=hO.ScramSHA1=void 0;var zB1=OO(),W7=i("crypto"),SW=y1(),R3=s(),N$=F1(),UB1=F9(),uO=m3();class _W extends UB1.AuthProvider{constructor(A){super();this.cryptoMethod=A||"sha1"}async prepare(A,F){let B=this.cryptoMethod,D=F.credentials;if(!D)throw new R3.MongoMissingCredentialsError("AuthContext must provide credentials.");let $=await N$.randomBytes(24);return F.nonce=$,{...A,speculativeAuthenticate:{...xO(B,D,$),db:D.source}}}async auth(A){let{reauthenticating:F,response:B}=A;if(B?.speculativeAuthenticate&&!F)return await gO(this.cryptoMethod,B.speculativeAuthenticate,A);return await ZB1(this.cryptoMethod,A)}}function fO(A){return A.replace("=","=3D").replace(",","=2C")}function _O(A,F){return Buffer.concat([Buffer.from("n=","utf8"),Buffer.from(A,"utf8"),Buffer.from(",r=","utf8"),Buffer.from(F.toString("base64"),"utf8")])}function xO(A,F,B){let D=fO(F.username);return{saslStart:1,mechanism:A==="sha1"?uO.AuthMechanism.MONGODB_SCRAM_SHA1:uO.AuthMechanism.MONGODB_SCRAM_SHA256,payload:new SW.Binary(Buffer.concat([Buffer.from("n,,","utf8"),_O(D,B)])),autoAuthorize:1,options:{skipEmptyExchange:!0}}}async function ZB1(A,F){let{connection:B,credentials:D}=F;if(!D)throw new R3.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!F.nonce)throw new R3.MongoInvalidArgumentError("AuthContext must contain a valid nonce property");let $=F.nonce,J=D.source,X=xO(A,D,$),E=await B.command(N$.ns(`${J}.$cmd`),X,void 0);await gO(A,E,F)}async function gO(A,F,B){let{connection:D,credentials:$}=B;if(!$)throw new R3.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!B.nonce)throw new R3.MongoInvalidArgumentError("Unable to continue SCRAM without valid nonce");let J=B.nonce,X=$.source,E=fO($.username),Y=$.password,G=A==="sha256"?zB1.saslprep(Y):VB1(E,Y),H=Buffer.isBuffer(F.payload)?new SW.Binary(F.payload):F.payload,W=SO(H),q=parseInt(W.i,10);if(q&&q<4096)throw new R3.MongoRuntimeError(`Server returned an invalid iteration count ${q}`);let{s:C,r:Q}=W;if(Q.startsWith("nonce"))throw new R3.MongoRuntimeError(`Server returned an invalid nonce: ${Q}`);let K=`c=biws,r=${Q}`,U=PB1(G,Buffer.from(C,"base64"),q,A),Z=L$(A,U,"Client Key"),V=L$(A,U,"Server Key"),w=LB1(A,Z),R=[_O(E,J),H.toString("utf8"),K].join(","),I=L$(A,w,R),j=`p=${wB1(Z,I)}`,k=[K,j].join(","),u=L$(A,V,R),x={saslContinue:1,conversationId:F.conversationId,payload:new SW.Binary(Buffer.from(k))},T=await D.command(N$.ns(`${X}.$cmd`),x,void 0),y=SO(T.payload);if(!IB1(Buffer.from(y.v,"base64"),u))throw new R3.MongoRuntimeError("Server returned an invalid signature");if(T.done!==!1)return;let g={saslContinue:1,conversationId:T.conversationId,payload:Buffer.alloc(0)};await D.command(N$.ns(`${X}.$cmd`),g,void 0)}function SO(A){let F=A.toString("utf8"),B={},D=F.split(",");for(let $=0;$<D.length;$++){let J=(D[$].match(/^([^=]*)=(.*)$/)??[]).slice(1);B[J[0]]=J[1]}return B}function VB1(A,F){if(typeof A!=="string")throw new R3.MongoInvalidArgumentError("Username must be a string");if(typeof F!=="string")throw new R3.MongoInvalidArgumentError("Password must be a string");if(F.length===0)throw new R3.MongoInvalidArgumentError("Password cannot be empty");let B;try{B=W7.createHash("md5")}catch(D){if(W7.getFips())throw new Error("Auth mechanism SCRAM-SHA-1 is not supported in FIPS mode");throw D}return B.update(`${A}:mongo:${F}`,"utf8"),B.digest("hex")}function wB1(A,F){if(!Buffer.isBuffer(A))A=Buffer.from(A);if(!Buffer.isBuffer(F))F=Buffer.from(F);let B=Math.max(A.length,F.length),D=[];for(let $=0;$<B;$+=1)D.push(A[$]^F[$]);return Buffer.from(D).toString("base64")}function LB1(A,F){return W7.createHash(A).update(F).digest()}function L$(A,F,B){return W7.createHmac(A,F).update(B).digest()}var R$={},fW=0;function RB1(){R$={},fW=0}var NB1={sha256:32,sha1:20};function PB1(A,F,B,D){let $=[A,F.toString("base64"),B].join("_");if(R$[$]!=null)return R$[$];let J=W7.pbkdf2Sync(A,F,B,NB1[D],D);if(fW>=200)RB1();return R$[$]=J,fW+=1,J}function IB1(A,F){if(A.length!==F.length)return!1;if(typeof W7.timingSafeEqual==="function")return W7.timingSafeEqual(A,F);let B=0;for(let D=0;D<A.length;D++)B|=A[D]^F[D];return B===0}class bO extends _W{constructor(){super("sha1")}}hO.ScramSHA1=bO;class yO extends _W{constructor(){super("sha256")}}hO.ScramSHA256=yO});var nO=z((pO)=>{Object.defineProperty(pO,"__esModule",{value:!0});pO.X509=void 0;var dO=s(),jB1=F1(),TB1=F9();class cO extends TB1.AuthProvider{async prepare(A,F){let{credentials:B}=F;if(!B)throw new dO.MongoMissingCredentialsError("AuthContext must provide credentials.");return{...A,speculativeAuthenticate:lO(B)}}async auth(A){let{connection:F,credentials:B}=A;if(!B)throw new dO.MongoMissingCredentialsError("AuthContext must provide credentials.");if(A.response?.speculativeAuthenticate)return;await F.command(jB1.ns("$external.$cmd"),lO(B),void 0)}}pO.X509=cO;function lO(A){let F={authenticate:1,mechanism:"MONGODB-X509"};if(A.username)F.user=A.username;return F}});var gW=z((oO)=>{Object.defineProperty(oO,"__esModule",{value:!0});oO.MongoClientAuthProviders=void 0;var kB1=ND(),OB1=Ik(),rO=z$(),uB1=jW(),SB1=WO(),sO=kW(),fB1=KO(),K9=m3(),aO=mO(),_B1=nO(),xW=s(),xB1=new Map([[K9.AuthMechanism.MONGODB_AWS,({AWS_CREDENTIAL_PROVIDER:A})=>new OB1.MongoDBAWS(A)],[K9.AuthMechanism.MONGODB_CR,()=>{throw new xW.MongoInvalidArgumentError("MONGODB-CR is no longer a supported auth mechanism in MongoDB 4.0+")}],[K9.AuthMechanism.MONGODB_GSSAPI,()=>new kB1.GSSAPI],[K9.AuthMechanism.MONGODB_OIDC,(A)=>new rO.MongoDBOIDC(gB1(A))],[K9.AuthMechanism.MONGODB_PLAIN,()=>new fB1.Plain],[K9.AuthMechanism.MONGODB_SCRAM_SHA1,()=>new aO.ScramSHA1],[K9.AuthMechanism.MONGODB_SCRAM_SHA256,()=>new aO.ScramSHA256],[K9.AuthMechanism.MONGODB_X509,()=>new _B1.X509]]);class tO{constructor(){this.existingProviders=new Map}getOrCreateProvider(A,F){let B=this.existingProviders.get(A);if(B)return B;let D=xB1.get(A);if(!D)throw new xW.MongoInvalidArgumentError(`authMechanism ${A} not supported`);let $=D(F);return this.existingProviders.set(A,$),$}}oO.MongoClientAuthProviders=tO;function gB1(A){if(A.OIDC_HUMAN_CALLBACK)return new SB1.HumanCallbackWorkflow(new sO.TokenCache,A.OIDC_HUMAN_CALLBACK);else if(A.OIDC_CALLBACK)return new uB1.AutomatedCallbackWorkflow(new sO.TokenCache,A.OIDC_CALLBACK);else{let F=A.ENVIRONMENT,B=rO.OIDC_WORKFLOWS.get(F)?.();if(!B)throw new xW.MongoInvalidArgumentError(`Could not load workflow for environment ${A.ENVIRONMENT}`);return B}}});var bW=z((Fu)=>{Object.defineProperty(Fu,"__esModule",{value:!0});Fu.GridFSBucketReadStream=void 0;var bB1=i("stream"),yB1=k2(),u6=s(),hB1=M2();class P$ extends bB1.Readable{constructor(A,F,B,D,$){super({emitClose:!0});this.s={bytesToTrim:0,bytesToSkip:0,bytesRead:0,chunks:A,expected:0,files:F,filter:D,init:!1,expectedEnd:0,options:{start:0,end:0,...$},readPreference:B,timeoutContext:$?.timeoutMS!=null?new hB1.CSOTTimeoutContext({timeoutMS:$.timeoutMS,serverSelectionTimeoutMS:0}):void 0}}_read(){if(this.destroyed)return;dB1(this,()=>vB1(this))}start(A=0){return Au(this),this.s.options.start=A,this}end(A=0){return Au(this),this.s.options.end=A,this}async abort(){this.push(null),this.destroy();let A=this.s.timeoutContext?.getRemainingTimeMSOrThrow();await this.s.cursor?.close({timeoutMS:A})}}Fu.GridFSBucketReadStream=P$;P$.FILE="file";function Au(A){if(A.s.init)throw new u6.MongoGridFSStreamError("Options cannot be changed after the stream is initialized")}function vB1(A){if(A.destroyed)return;if(!A.s.cursor)return;if(!A.s.file)return;let F=(B)=>{if(A.destroyed)return;if(!B){A.push(null),A.s.cursor?.close().then(void 0,(W)=>A.destroy(W));return}if(!A.s.file)return;let D=A.s.file.length-A.s.bytesRead,$=A.s.expected++,J=Math.min(A.s.file.chunkSize,D);if(B.n>$)return A.destroy(new u6.MongoGridFSChunkError(`ChunkIsMissing: Got unexpected n: ${B.n}, expected: ${$}`));if(B.n<$)return A.destroy(new u6.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${B.n}, expected: ${$}`));let X=Buffer.isBuffer(B.data)?B.data:B.data.buffer;if(X.byteLength!==J){if(D<=0)return A.destroy(new u6.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${B.n}, expected file length ${A.s.file.length} bytes but already read ${A.s.bytesRead} bytes`));return A.destroy(new u6.MongoGridFSChunkError(`ChunkIsWrongSize: Got unexpected length: ${X.byteLength}, expected: ${J}`))}if(A.s.bytesRead+=X.byteLength,X.byteLength===0)return A.push(null);let E=null,Y=null;if(A.s.bytesToSkip!=null)E=A.s.bytesToSkip,A.s.bytesToSkip=0;let G=$===A.s.expectedEnd-1,H=A.s.options.end-A.s.bytesToSkip;if(G&&A.s.bytesToTrim!=null)Y=A.s.file.chunkSize-A.s.bytesToTrim;else if(A.s.options.end&&H<B.data.byteLength)Y=H;if(E!=null||Y!=null)X=X.slice(E||0,Y||X.byteLength);A.push(X);return};A.s.cursor.next().then(F,(B)=>{if(A.destroyed)return;A.destroy(B)})}function mB1(A){let F={};if(A.s.readPreference)F.readPreference=A.s.readPreference;if(A.s.options&&A.s.options.sort)F.sort=A.s.options.sort;if(A.s.options&&A.s.options.skip)F.skip=A.s.options.skip;let B=($)=>{if(A.destroyed)return;if(!$){let Y=`FileNotFound: file ${A.s.filter._id?A.s.filter._id.toString():A.s.filter.filename} was not found`,G=new u6.MongoRuntimeError(Y);return G.code="ENOENT",A.destroy(G)}if($.length<=0){A.push(null);return}if(A.destroyed){A.destroy();return}try{A.s.bytesToSkip=lB1(A,$,A.s.options)}catch(E){return A.destroy(E)}let J={files_id:$._id};if(A.s.options&&A.s.options.start!=null){let E=Math.floor(A.s.options.start/$.chunkSize);if(E>0)J.n={$gte:E}}let X;try{X=A.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${A.s.timeoutContext?.timeoutMS}ms`)}catch(E){return A.destroy(E)}if(A.s.cursor=A.s.chunks.find(J,{timeoutMode:A.s.options.timeoutMS!=null?yB1.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:X}).sort({n:1}),A.s.readPreference)A.s.cursor.withReadPreference(A.s.readPreference);A.s.expectedEnd=Math.ceil($.length/$.chunkSize),A.s.file=$;try{A.s.bytesToTrim=cB1(A,$,A.s.cursor,A.s.options)}catch(E){return A.destroy(E)}A.emit(P$.FILE,$);return},D;try{D=A.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${A.s.timeoutContext?.timeoutMS}ms`)}catch($){if(!A.destroyed)A.destroy($);return}F.timeoutMS=D,A.s.files.findOne(A.s.filter,F).then(B,($)=>{if(A.destroyed)return;A.destroy($)})}function dB1(A,F){if(A.s.file)return F();if(!A.s.init)mB1(A),A.s.init=!0;A.once("file",()=>{F()})}function lB1(A,F,B){if(B&&B.start!=null){if(B.start>F.length)throw new u6.MongoInvalidArgumentError(`Stream start (${B.start}) must not be more than the length of the file (${F.length})`);if(B.start<0)throw new u6.MongoInvalidArgumentError(`Stream start (${B.start}) must not be negative`);if(B.end!=null&&B.end<B.start)throw new u6.MongoInvalidArgumentError(`Stream start (${B.start}) must not be greater than stream end (${B.end})`);return A.s.bytesRead=Math.floor(B.start/F.chunkSize)*F.chunkSize,A.s.expected=Math.floor(B.start/F.chunkSize),B.start-A.s.bytesRead}throw new u6.MongoInvalidArgumentError("Start option must be defined")}function cB1(A,F,B,D){if(D&&D.end!=null){if(D.end>F.length)throw new u6.MongoInvalidArgumentError(`Stream end (${D.end}) must not be more than the length of the file (${F.length})`);if(D.start==null||D.start<0)throw new u6.MongoInvalidArgumentError(`Stream end (${D.end}) must not be negative`);let $=D.start!=null?Math.floor(D.start/F.chunkSize):0;return B.limit(Math.ceil(D.end/F.chunkSize)-$),A.s.expectedEnd=Math.ceil(D.end/F.chunkSize),Math.ceil(D.end/F.chunkSize)*F.chunkSize-D.end}throw new u6.MongoInvalidArgumentError("End option must be defined")}});var hW=z((Yu)=>{Object.defineProperty(Yu,"__esModule",{value:!0});Yu.GridFSBucketWriteStream=void 0;var pB1=i("stream"),$u=y1(),Ju=k2(),N3=s(),iB1=M2(),Du=F1(),nB1=P2();class Xu extends pB1.Writable{constructor(A,F,B){super();if(this.gridFSFile=null,B=B??{},this.bucket=A,this.chunks=A.s._chunksCollection,this.filename=F,this.files=A.s._filesCollection,this.options=B,this.writeConcern=nB1.WriteConcern.fromOptions(B)||A.s.options.writeConcern,this.done=!1,this.id=B.id?B.id:new $u.ObjectId,this.chunkSizeBytes=B.chunkSizeBytes||this.bucket.s.options.chunkSizeBytes,this.bufToStore=Buffer.alloc(this.chunkSizeBytes),this.length=0,this.n=0,this.pos=0,this.state={streamEnd:!1,outstandingRequests:0,errored:!1,aborted:!1},B.timeoutMS!=null)this.timeoutContext=new iB1.CSOTTimeoutContext({timeoutMS:B.timeoutMS,serverSelectionTimeoutMS:Du.resolveTimeoutOptions(this.bucket.s.db.client,{}).serverSelectionTimeoutMS})}_construct(A){if(!this.bucket.s.calledOpenUploadStream)this.bucket.s.calledOpenUploadStream=!0,aB1(this).then(()=>{this.bucket.s.checkedIndexes=!0,this.bucket.emit("index"),A()},(F)=>{if(F instanceof N3.MongoOperationTimeoutError)return q7(this,F,A);Du.squashError(F),A()});else return process.nextTick(A)}_write(A,F,B){tB1(this,A,F,B)}_final(A){if(this.state.streamEnd)return process.nextTick(A);this.state.streamEnd=!0,oB1(this,A)}async abort(){if(this.state.streamEnd)throw new N3.MongoAPIError("Cannot abort a stream that has already completed");if(this.state.aborted)throw new N3.MongoAPIError("Cannot call abort() on a stream twice");this.state.aborted=!0;let A=this.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${this.timeoutContext?.timeoutMS}ms`);await this.chunks.deleteMany({files_id:this.id},{timeoutMS:A})}}Yu.GridFSBucketWriteStream=Xu;function q7(A,F,B){if(A.state.errored){process.nextTick(B);return}A.state.errored=!0,process.nextTick(B,F)}function Eu(A,F,B){return{_id:new $u.ObjectId,files_id:A,n:F,data:B}}async function sB1(A){let F={files_id:1,n:1},B;B=A.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${A.timeoutContext?.timeoutMS}ms`);let D;try{D=await A.chunks.listIndexes({timeoutMode:B!=null?Ju.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:B}).toArray()}catch(J){if(J instanceof N3.MongoError&&J.code===N3.MONGODB_ERROR_CODES.NamespaceNotFound)D=[];else throw J}if(!D.find((J)=>{if(Object.keys(J.key).length===2&&J.key.files_id===1&&J.key.n===1)return!0;return!1}))B=A.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${A.timeoutContext?.timeoutMS}ms`),await A.chunks.createIndex(F,{...A.writeConcern,background:!0,unique:!0,timeoutMS:B})}function yW(A,F){if(A.done)return process.nextTick(F);if(A.state.streamEnd&&A.state.outstandingRequests===0&&!A.state.errored){A.done=!0;let B=rB1(A.id,A.length,A.chunkSizeBytes,A.filename,A.options.contentType,A.options.aliases,A.options.metadata);if(I$(A,F))return;let D=A.timeoutContext?.remainingTimeMS;if(D!=null&&D<=0)return q7(A,new N3.MongoOperationTimeoutError(`Upload timed out after ${A.timeoutContext?.timeoutMS}ms`),F);A.files.insertOne(B,{writeConcern:A.writeConcern,timeoutMS:D}).then(()=>{A.gridFSFile=B,F()},($)=>{return q7(A,$,F)});return}process.nextTick(F)}async function aB1(A){let F=A.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${A.timeoutContext?.timeoutMS}ms`);if(await A.files.findOne({},{projection:{_id:1},timeoutMS:F})!=null)return;let D={filename:1,uploadDate:1},$;F=A.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${A.timeoutContext?.timeoutMS}ms`);let J={timeoutMode:F!=null?Ju.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:F};try{$=await A.files.listIndexes(J).toArray()}catch(E){if(E instanceof N3.MongoError&&E.code===N3.MONGODB_ERROR_CODES.NamespaceNotFound)$=[];else throw E}if(!$.find((E)=>{if(Object.keys(E.key).length===2&&E.key.filename===1&&E.key.uploadDate===1)return!0;return!1}))F=A.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${A.timeoutContext?.timeoutMS}ms`),await A.files.createIndex(D,{background:!1,timeoutMS:F});await sB1(A)}function rB1(A,F,B,D,$,J,X){let E={_id:A,length:F,chunkSize:B,uploadDate:new Date,filename:D};if($)E.contentType=$;if(J)E.aliases=J;if(X)E.metadata=X;return E}function tB1(A,F,B,D){if(I$(A,D))return;let $=Buffer.isBuffer(F)?F:Buffer.from(F,B);if(A.length+=$.length,A.pos+$.length<A.chunkSizeBytes){$.copy(A.bufToStore,A.pos),A.pos+=$.length,process.nextTick(D);return}let J=$.length,X=A.chunkSizeBytes-A.pos,E=Math.min(X,$.length),Y=0;while(J>0){let G=$.length-J;$.copy(A.bufToStore,A.pos,G,G+E),A.pos+=E,X-=E;let H;if(X===0){H=Eu(A.id,A.n,Buffer.from(A.bufToStore));let W=A.timeoutContext?.remainingTimeMS;if(W!=null&&W<=0)return q7(A,new N3.MongoOperationTimeoutError(`Upload timed out after ${A.timeoutContext?.timeoutMS}ms`),D);if(++A.state.outstandingRequests,++Y,I$(A,D))return;A.chunks.insertOne(H,{writeConcern:A.writeConcern,timeoutMS:W}).then(()=>{if(--A.state.outstandingRequests,--Y,!Y)yW(A,D)},(q)=>{return q7(A,q,D)}),X=A.chunkSizeBytes,A.pos=0,++A.n}J-=E,E=Math.min(X,J)}}function oB1(A,F){if(A.pos===0)return yW(A,F);let B=Buffer.alloc(A.pos);A.bufToStore.copy(B,0,0,A.pos);let D=Eu(A.id,A.n,B);if(I$(A,F))return;let $=A.timeoutContext?.remainingTimeMS;if($!=null&&$<=0)return q7(A,new N3.MongoOperationTimeoutError(`Upload timed out after ${A.timeoutContext?.timeoutMS}ms`),F);++A.state.outstandingRequests,A.chunks.insertOne(D,{writeConcern:A.writeConcern,timeoutMS:$}).then(()=>{--A.state.outstandingRequests,yW(A,F)},(J)=>{return q7(A,J,F)})}function I$(A,F){if(A.state.aborted)return process.nextTick(F,new N3.MongoAPIError("Stream has been aborted")),!0;return!1}});var Ku=z((Cu)=>{Object.defineProperty(Cu,"__esModule",{value:!0});Cu.GridFSBucket=void 0;var vW=s(),eB1=M6(),Hu=M2(),M$=F1(),AD1=P2(),Wu=bW(),qu=hW(),FD1={bucketName:"fs",chunkSizeBytes:261120};class mW extends eB1.TypedEventEmitter{constructor(A,F){super();this.on("error",M$.noop),this.setMaxListeners(0);let B=M$.resolveOptions(A,{...FD1,...F,writeConcern:AD1.WriteConcern.fromOptions(F)});this.s={db:A,options:B,_chunksCollection:A.collection(B.bucketName+".chunks"),_filesCollection:A.collection(B.bucketName+".files"),checkedIndexes:!1,calledOpenUploadStream:!1}}openUploadStream(A,F){return new qu.GridFSBucketWriteStream(this,A,{timeoutMS:this.s.options.timeoutMS,...F})}openUploadStreamWithId(A,F,B){return new qu.GridFSBucketWriteStream(this,F,{timeoutMS:this.s.options.timeoutMS,...B,id:A})}openDownloadStream(A,F){return new Wu.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{_id:A},{timeoutMS:this.s.options.timeoutMS,...F})}async delete(A,F){let{timeoutMS:B}=M$.resolveOptions(this.s.db,F),D=void 0;if(B)D=new Hu.CSOTTimeoutContext({timeoutMS:B,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS});let{deletedCount:$}=await this.s._filesCollection.deleteOne({_id:A},{timeoutMS:D?.remainingTimeMS}),J=D?.remainingTimeMS;if(J!=null&&J<=0)throw new vW.MongoOperationTimeoutError(`Timed out after ${B}ms`);if(await this.s._chunksCollection.deleteMany({files_id:A},{timeoutMS:J}),$===0)throw new vW.MongoRuntimeError(`File not found for id ${A}`)}find(A={},F={}){return this.s._filesCollection.find(A,F)}openDownloadStreamByName(A,F){let B={uploadDate:-1},D=void 0;if(F&&F.revision!=null)if(F.revision>=0)B={uploadDate:1},D=F.revision;else D=-F.revision-1;return new Wu.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{filename:A},{timeoutMS:this.s.options.timeoutMS,...F,sort:B,skip:D})}async rename(A,F,B){let D={_id:A},$={$set:{filename:F}},{matchedCount:J}=await this.s._filesCollection.updateOne(D,$,B);if(J===0)throw new vW.MongoRuntimeError(`File with id ${A} not found`)}async drop(A){let{timeoutMS:F}=M$.resolveOptions(this.s.db,A),B=void 0;if(F)B=new Hu.CSOTTimeoutContext({timeoutMS:F,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS});if(B){await this.s._filesCollection.drop({timeoutMS:B.remainingTimeMS});let D=B.getRemainingTimeMSOrThrow(`Timed out after ${F}ms`);await this.s._chunksCollection.drop({timeoutMS:D})}else await this.s._filesCollection.drop(),await this.s._chunksCollection.drop()}}Cu.GridFSBucket=mW;mW.INDEX="index"});var dW=z((wu)=>{Object.defineProperty(wu,"__esModule",{value:!0});wu.WaitingForSuitableServerEvent=wu.ServerSelectionSucceededEvent=wu.ServerSelectionFailedEvent=wu.ServerSelectionStartedEvent=wu.ServerSelectionEvent=void 0;var BD1=F1(),j$=v0();class l8{constructor(A,F,B){this.selector=A,this.operation=B,this.topologyDescription=F}}wu.ServerSelectionEvent=l8;class zu extends l8{constructor(A,F,B){super(A,F,B);this.name=j$.SERVER_SELECTION_STARTED,this.message="Server selection started"}}wu.ServerSelectionStartedEvent=zu;class Uu extends l8{constructor(A,F,B,D){super(A,F,D);this.name=j$.SERVER_SELECTION_FAILED,this.message="Server selection failed",this.failure=B}}wu.ServerSelectionFailedEvent=Uu;class Zu extends l8{constructor(A,F,B,D){super(A,F,D);this.name=j$.SERVER_SELECTION_SUCCEEDED,this.message="Server selection succeeded";let{host:$,port:J}=BD1.HostAddress.fromString(B).toHostPort();this.serverHost=$,this.serverPort=J}}wu.ServerSelectionSucceededEvent=Zu;class Vu extends l8{constructor(A,F,B,D){super(A,F,D);this.name=j$.WAITING_FOR_SUITABLE_SERVER,this.message="Waiting for suitable server to become available",this.remainingTimeMS=B}}wu.WaitingForSuitableServerEvent=Vu});var pW=z((Ru)=>{Object.defineProperty(Ru,"__esModule",{value:!0});Ru.SrvPoller=Ru.SrvPollingEvent=void 0;var ED1=i("dns"),lW=i("timers"),YD1=s(),GD1=M6(),XF=F1();class cW{constructor(A){this.srvRecords=A}hostnames(){return new Set(this.srvRecords.map((A)=>XF.HostAddress.fromSrvRecord(A).toString()))}}Ru.SrvPollingEvent=cW;class T$ extends GD1.TypedEventEmitter{constructor(A){super();if(this.on("error",XF.noop),!A||!A.srvHost)throw new YD1.MongoRuntimeError("Options for SrvPoller must exist and include srvHost");this.srvHost=A.srvHost,this.srvMaxHosts=A.srvMaxHosts??0,this.srvServiceName=A.srvServiceName??"mongodb",this.rescanSrvIntervalMS=60000,this.heartbeatFrequencyMS=A.heartbeatFrequencyMS??1e4,this.haMode=!1,this.generation=0,this._timeout=void 0}get srvAddress(){return`_${this.srvServiceName}._tcp.${this.srvHost}`}get intervalMS(){return this.haMode?this.heartbeatFrequencyMS:this.rescanSrvIntervalMS}start(){if(!this._timeout)this.schedule()}stop(){if(this._timeout)lW.clearTimeout(this._timeout),this.generation+=1,this._timeout=void 0}schedule(){if(this._timeout)lW.clearTimeout(this._timeout);this._timeout=lW.setTimeout(()=>{this._poll().then(void 0,XF.squashError)},this.intervalMS)}success(A){this.haMode=!1,this.schedule(),this.emit(T$.SRV_RECORD_DISCOVERY,new cW(A))}failure(){this.haMode=!0,this.schedule()}async _poll(){let A=this.generation,F;try{F=await ED1.promises.resolveSrv(this.srvAddress)}catch{this.failure();return}if(A!==this.generation)return;let B=[];for(let D of F)try{XF.checkParentDomainMatch(D.name,this.srvHost),B.push(D)}catch($){XF.squashError($)}if(!B.length){this.failure();return}this.success(B)}}Ru.SrvPoller=T$;T$.SRV_RECORD_DISCOVERY="srvRecordDiscovery"});var C7=z((O)=>{Object.defineProperty(O,"__esModule",{value:!0});O.MongoServerClosedError=O.MongoRuntimeError=O.MongoParseError=O.MongoOperationTimeoutError=O.MongoOIDCError=O.MongoNotConnectedError=O.MongoNetworkTimeoutError=O.MongoNetworkError=O.MongoMissingDependencyError=O.MongoMissingCredentialsError=O.MongoKerberosError=O.MongoInvalidArgumentError=O.MongoGridFSStreamError=O.MongoGridFSChunkError=O.MongoGCPError=O.MongoExpiredSessionError=O.MongoError=O.MongoDriverError=O.MongoDecompressionError=O.MongoCursorInUseError=O.MongoCursorExhaustedError=O.MongoCompatibilityError=O.MongoClientClosedError=O.MongoClientBulkWriteExecutionError=O.MongoClientBulkWriteError=O.MongoClientBulkWriteCursorError=O.MongoChangeStreamError=O.MongoBatchReExecutionError=O.MongoAzureError=O.MongoAWSError=O.MongoAPIError=O.ChangeStreamCursor=O.ClientEncryption=O.MongoBulkWriteError=O.UUID=O.Timestamp=O.ObjectId=O.MinKey=O.MaxKey=O.Long=O.Int32=O.Double=O.Decimal128=O.DBRef=O.Code=O.BSONType=O.BSONSymbol=O.BSONRegExp=O.Binary=O.BSON=void 0;O.CommandFailedEvent=O.WriteConcern=O.ReadPreference=O.ReadConcern=O.TopologyType=O.ServerType=O.ReadPreferenceMode=O.ReadConcernLevel=O.ProfilingLevel=O.ReturnDocument=O.SeverityLevel=O.MongoLoggableComponent=O.ServerApiVersion=O.ExplainVerbosity=O.MongoErrorLabel=O.CursorTimeoutMode=O.CURSOR_FLAGS=O.Compressor=O.AuthMechanism=O.GSSAPICanonicalizationValue=O.AutoEncryptionLoggerLevel=O.BatchType=O.UnorderedBulkOperation=O.OrderedBulkOperation=O.MongoClient=O.ListIndexesCursor=O.ListCollectionsCursor=O.GridFSBucketWriteStream=O.GridFSBucketReadStream=O.GridFSBucket=O.FindCursor=O.ExplainableCursor=O.Db=O.Collection=O.ClientSession=O.ChangeStream=O.CancellationToken=O.AggregationCursor=O.Admin=O.AbstractCursor=O.configureExplicitResourceManagement=O.MongoWriteConcernError=O.MongoUnexpectedServerResponseError=O.MongoTransactionError=O.MongoTopologyClosedError=O.MongoTailableCursorError=O.MongoSystemError=O.MongoStalePrimaryError=O.MongoServerSelectionError=O.MongoServerError=void 0;O.MongoClientAuthProviders=O.MongoCryptKMSRequestNetworkTimeoutError=O.MongoCryptInvalidArgumentError=O.MongoCryptError=O.MongoCryptCreateEncryptedCollectionError=O.MongoCryptCreateDataKeyError=O.MongoCryptAzureKMSRequestError=O.SrvPollingEvent=O.WaitingForSuitableServerEvent=O.ServerSelectionSucceededEvent=O.ServerSelectionStartedEvent=O.ServerSelectionFailedEvent=O.ServerSelectionEvent=O.TopologyOpeningEvent=O.TopologyDescriptionChangedEvent=O.TopologyClosedEvent=O.ServerOpeningEvent=O.ServerHeartbeatSucceededEvent=O.ServerHeartbeatStartedEvent=O.ServerHeartbeatFailedEvent=O.ServerDescriptionChangedEvent=O.ServerClosedEvent=O.ConnectionReadyEvent=O.ConnectionPoolReadyEvent=O.ConnectionPoolMonitoringEvent=O.ConnectionPoolCreatedEvent=O.ConnectionPoolClosedEvent=O.ConnectionPoolClearedEvent=O.ConnectionCreatedEvent=O.ConnectionClosedEvent=O.ConnectionCheckOutStartedEvent=O.ConnectionCheckOutFailedEvent=O.ConnectionCheckedOutEvent=O.ConnectionCheckedInEvent=O.CommandSucceededEvent=O.CommandStartedEvent=void 0;var WD1=kG();Object.defineProperty(O,"Admin",{enumerable:!0,get:function(){return WD1.Admin}});var qD1=TY();Object.defineProperty(O,"OrderedBulkOperation",{enumerable:!0,get:function(){return qD1.OrderedBulkOperation}});var CD1=kY();Object.defineProperty(O,"UnorderedBulkOperation",{enumerable:!0,get:function(){return CD1.UnorderedBulkOperation}});var QD1=D7();Object.defineProperty(O,"ChangeStream",{enumerable:!0,get:function(){return QD1.ChangeStream}});var KD1=B7();Object.defineProperty(O,"Collection",{enumerable:!0,get:function(){return KD1.Collection}});var zD1=k2();Object.defineProperty(O,"AbstractCursor",{enumerable:!0,get:function(){return zD1.AbstractCursor}});var UD1=ZA();Object.defineProperty(O,"AggregationCursor",{enumerable:!0,get:function(){return UD1.AggregationCursor}});var ZD1=cY();Object.defineProperty(O,"FindCursor",{enumerable:!0,get:function(){return ZD1.FindCursor}});var VD1=SG();Object.defineProperty(O,"ListCollectionsCursor",{enumerable:!0,get:function(){return VD1.ListCollectionsCursor}});var wD1=rY();Object.defineProperty(O,"ListIndexesCursor",{enumerable:!0,get:function(){return wD1.ListIndexesCursor}});var LD1=wD();Object.defineProperty(O,"Db",{enumerable:!0,get:function(){return LD1.Db}});var RD1=F7();Object.defineProperty(O,"ExplainableCursor",{enumerable:!0,get:function(){return RD1.ExplainableCursor}});var ND1=Ku();Object.defineProperty(O,"GridFSBucket",{enumerable:!0,get:function(){return ND1.GridFSBucket}});var PD1=bW();Object.defineProperty(O,"GridFSBucketReadStream",{enumerable:!0,get:function(){return PD1.GridFSBucketReadStream}});var ID1=hW();Object.defineProperty(O,"GridFSBucketWriteStream",{enumerable:!0,get:function(){return ID1.GridFSBucketWriteStream}});var MD1=e4();Object.defineProperty(O,"MongoClient",{enumerable:!0,get:function(){return MD1.MongoClient}});var jD1=M6();Object.defineProperty(O,"CancellationToken",{enumerable:!0,get:function(){return jD1.CancellationToken}});var TD1=S8();Object.defineProperty(O,"ClientSession",{enumerable:!0,get:function(){return TD1.ClientSession}});var kD1=y1();Object.defineProperty(O,"BSON",{enumerable:!0,get:function(){return kD1.BSON}});var a2=y1();Object.defineProperty(O,"Binary",{enumerable:!0,get:function(){return a2.Binary}});Object.defineProperty(O,"BSONRegExp",{enumerable:!0,get:function(){return a2.BSONRegExp}});Object.defineProperty(O,"BSONSymbol",{enumerable:!0,get:function(){return a2.BSONSymbol}});Object.defineProperty(O,"BSONType",{enumerable:!0,get:function(){return a2.BSONType}});Object.defineProperty(O,"Code",{enumerable:!0,get:function(){return a2.Code}});Object.defineProperty(O,"DBRef",{enumerable:!0,get:function(){return a2.DBRef}});Object.defineProperty(O,"Decimal128",{enumerable:!0,get:function(){return a2.Decimal128}});Object.defineProperty(O,"Double",{enumerable:!0,get:function(){return a2.Double}});Object.defineProperty(O,"Int32",{enumerable:!0,get:function(){return a2.Int32}});Object.defineProperty(O,"Long",{enumerable:!0,get:function(){return a2.Long}});Object.defineProperty(O,"MaxKey",{enumerable:!0,get:function(){return a2.MaxKey}});Object.defineProperty(O,"MinKey",{enumerable:!0,get:function(){return a2.MinKey}});Object.defineProperty(O,"ObjectId",{enumerable:!0,get:function(){return a2.ObjectId}});Object.defineProperty(O,"Timestamp",{enumerable:!0,get:function(){return a2.Timestamp}});Object.defineProperty(O,"UUID",{enumerable:!0,get:function(){return a2.UUID}});var OD1=G8();Object.defineProperty(O,"MongoBulkWriteError",{enumerable:!0,get:function(){return OD1.MongoBulkWriteError}});var uD1=lD();Object.defineProperty(O,"ClientEncryption",{enumerable:!0,get:function(){return uD1.ClientEncryption}});var SD1=NG();Object.defineProperty(O,"ChangeStreamCursor",{enumerable:!0,get:function(){return SD1.ChangeStreamCursor}});var I1=s();Object.defineProperty(O,"MongoAPIError",{enumerable:!0,get:function(){return I1.MongoAPIError}});Object.defineProperty(O,"MongoAWSError",{enumerable:!0,get:function(){return I1.MongoAWSError}});Object.defineProperty(O,"MongoAzureError",{enumerable:!0,get:function(){return I1.MongoAzureError}});Object.defineProperty(O,"MongoBatchReExecutionError",{enumerable:!0,get:function(){return I1.MongoBatchReExecutionError}});Object.defineProperty(O,"MongoChangeStreamError",{enumerable:!0,get:function(){return I1.MongoChangeStreamError}});Object.defineProperty(O,"MongoClientBulkWriteCursorError",{enumerable:!0,get:function(){return I1.MongoClientBulkWriteCursorError}});Object.defineProperty(O,"MongoClientBulkWriteError",{enumerable:!0,get:function(){return I1.MongoClientBulkWriteError}});Object.defineProperty(O,"MongoClientBulkWriteExecutionError",{enumerable:!0,get:function(){return I1.MongoClientBulkWriteExecutionError}});Object.defineProperty(O,"MongoClientClosedError",{enumerable:!0,get:function(){return I1.MongoClientClosedError}});Object.defineProperty(O,"MongoCompatibilityError",{enumerable:!0,get:function(){return I1.MongoCompatibilityError}});Object.defineProperty(O,"MongoCursorExhaustedError",{enumerable:!0,get:function(){return I1.MongoCursorExhaustedError}});Object.defineProperty(O,"MongoCursorInUseError",{enumerable:!0,get:function(){return I1.MongoCursorInUseError}});Object.defineProperty(O,"MongoDecompressionError",{enumerable:!0,get:function(){return I1.MongoDecompressionError}});Object.defineProperty(O,"MongoDriverError",{enumerable:!0,get:function(){return I1.MongoDriverError}});Object.defineProperty(O,"MongoError",{enumerable:!0,get:function(){return I1.MongoError}});Object.defineProperty(O,"MongoExpiredSessionError",{enumerable:!0,get:function(){return I1.MongoExpiredSessionError}});Object.defineProperty(O,"MongoGCPError",{enumerable:!0,get:function(){return I1.MongoGCPError}});Object.defineProperty(O,"MongoGridFSChunkError",{enumerable:!0,get:function(){return I1.MongoGridFSChunkError}});Object.defineProperty(O,"MongoGridFSStreamError",{enumerable:!0,get:function(){return I1.MongoGridFSStreamError}});Object.defineProperty(O,"MongoInvalidArgumentError",{enumerable:!0,get:function(){return I1.MongoInvalidArgumentError}});Object.defineProperty(O,"MongoKerberosError",{enumerable:!0,get:function(){return I1.MongoKerberosError}});Object.defineProperty(O,"MongoMissingCredentialsError",{enumerable:!0,get:function(){return I1.MongoMissingCredentialsError}});Object.defineProperty(O,"MongoMissingDependencyError",{enumerable:!0,get:function(){return I1.MongoMissingDependencyError}});Object.defineProperty(O,"MongoNetworkError",{enumerable:!0,get:function(){return I1.MongoNetworkError}});Object.defineProperty(O,"MongoNetworkTimeoutError",{enumerable:!0,get:function(){return I1.MongoNetworkTimeoutError}});Object.defineProperty(O,"MongoNotConnectedError",{enumerable:!0,get:function(){return I1.MongoNotConnectedError}});Object.defineProperty(O,"MongoOIDCError",{enumerable:!0,get:function(){return I1.MongoOIDCError}});Object.defineProperty(O,"MongoOperationTimeoutError",{enumerable:!0,get:function(){return I1.MongoOperationTimeoutError}});Object.defineProperty(O,"MongoParseError",{enumerable:!0,get:function(){return I1.MongoParseError}});Object.defineProperty(O,"MongoRuntimeError",{enumerable:!0,get:function(){return I1.MongoRuntimeError}});Object.defineProperty(O,"MongoServerClosedError",{enumerable:!0,get:function(){return I1.MongoServerClosedError}});Object.defineProperty(O,"MongoServerError",{enumerable:!0,get:function(){return I1.MongoServerError}});Object.defineProperty(O,"MongoServerSelectionError",{enumerable:!0,get:function(){return I1.MongoServerSelectionError}});Object.defineProperty(O,"MongoStalePrimaryError",{enumerable:!0,get:function(){return I1.MongoStalePrimaryError}});Object.defineProperty(O,"MongoSystemError",{enumerable:!0,get:function(){return I1.MongoSystemError}});Object.defineProperty(O,"MongoTailableCursorError",{enumerable:!0,get:function(){return I1.MongoTailableCursorError}});Object.defineProperty(O,"MongoTopologyClosedError",{enumerable:!0,get:function(){return I1.MongoTopologyClosedError}});Object.defineProperty(O,"MongoTransactionError",{enumerable:!0,get:function(){return I1.MongoTransactionError}});Object.defineProperty(O,"MongoUnexpectedServerResponseError",{enumerable:!0,get:function(){return I1.MongoUnexpectedServerResponseError}});Object.defineProperty(O,"MongoWriteConcernError",{enumerable:!0,get:function(){return I1.MongoWriteConcernError}});var fD1=z8();Object.defineProperty(O,"configureExplicitResourceManagement",{enumerable:!0,get:function(){return fD1.configureExplicitResourceManagement}});var _D1=G8();Object.defineProperty(O,"BatchType",{enumerable:!0,get:function(){return _D1.BatchType}});var xD1=IH();Object.defineProperty(O,"AutoEncryptionLoggerLevel",{enumerable:!0,get:function(){return xD1.AutoEncryptionLoggerLevel}});var gD1=ND();Object.defineProperty(O,"GSSAPICanonicalizationValue",{enumerable:!0,get:function(){return gD1.GSSAPICanonicalizationValue}});var bD1=m3();Object.defineProperty(O,"AuthMechanism",{enumerable:!0,get:function(){return bD1.AuthMechanism}});var yD1=xA();Object.defineProperty(O,"Compressor",{enumerable:!0,get:function(){return yD1.Compressor}});var Pu=k2();Object.defineProperty(O,"CURSOR_FLAGS",{enumerable:!0,get:function(){return Pu.CURSOR_FLAGS}});Object.defineProperty(O,"CursorTimeoutMode",{enumerable:!0,get:function(){return Pu.CursorTimeoutMode}});var hD1=s();Object.defineProperty(O,"MongoErrorLabel",{enumerable:!0,get:function(){return hD1.MongoErrorLabel}});var vD1=F7();Object.defineProperty(O,"ExplainVerbosity",{enumerable:!0,get:function(){return vD1.ExplainVerbosity}});var mD1=e4();Object.defineProperty(O,"ServerApiVersion",{enumerable:!0,get:function(){return mD1.ServerApiVersion}});var Iu=a4();Object.defineProperty(O,"MongoLoggableComponent",{enumerable:!0,get:function(){return Iu.MongoLoggableComponent}});Object.defineProperty(O,"SeverityLevel",{enumerable:!0,get:function(){return Iu.SeverityLevel}});var dD1=$G();Object.defineProperty(O,"ReturnDocument",{enumerable:!0,get:function(){return dD1.ReturnDocument}});var lD1=fG();Object.defineProperty(O,"ProfilingLevel",{enumerable:!0,get:function(){return lD1.ProfilingLevel}});var cD1=c6();Object.defineProperty(O,"ReadConcernLevel",{enumerable:!0,get:function(){return cD1.ReadConcernLevel}});var pD1=t0();Object.defineProperty(O,"ReadPreferenceMode",{enumerable:!0,get:function(){return pD1.ReadPreferenceMode}});var Mu=P6();Object.defineProperty(O,"ServerType",{enumerable:!0,get:function(){return Mu.ServerType}});Object.defineProperty(O,"TopologyType",{enumerable:!0,get:function(){return Mu.TopologyType}});var iD1=c6();Object.defineProperty(O,"ReadConcern",{enumerable:!0,get:function(){return iD1.ReadConcern}});var nD1=t0();Object.defineProperty(O,"ReadPreference",{enumerable:!0,get:function(){return nD1.ReadPreference}});var sD1=P2();Object.defineProperty(O,"WriteConcern",{enumerable:!0,get:function(){return sD1.WriteConcern}});var iW=dH();Object.defineProperty(O,"CommandFailedEvent",{enumerable:!0,get:function(){return iW.CommandFailedEvent}});Object.defineProperty(O,"CommandStartedEvent",{enumerable:!0,get:function(){return iW.CommandStartedEvent}});Object.defineProperty(O,"CommandSucceededEvent",{enumerable:!0,get:function(){return iW.CommandSucceededEvent}});var o6=tH();Object.defineProperty(O,"ConnectionCheckedInEvent",{enumerable:!0,get:function(){return o6.ConnectionCheckedInEvent}});Object.defineProperty(O,"ConnectionCheckedOutEvent",{enumerable:!0,get:function(){return o6.ConnectionCheckedOutEvent}});Object.defineProperty(O,"ConnectionCheckOutFailedEvent",{enumerable:!0,get:function(){return o6.ConnectionCheckOutFailedEvent}});Object.defineProperty(O,"ConnectionCheckOutStartedEvent",{enumerable:!0,get:function(){return o6.ConnectionCheckOutStartedEvent}});Object.defineProperty(O,"ConnectionClosedEvent",{enumerable:!0,get:function(){return o6.ConnectionClosedEvent}});Object.defineProperty(O,"ConnectionCreatedEvent",{enumerable:!0,get:function(){return o6.ConnectionCreatedEvent}});Object.defineProperty(O,"ConnectionPoolClearedEvent",{enumerable:!0,get:function(){return o6.ConnectionPoolClearedEvent}});Object.defineProperty(O,"ConnectionPoolClosedEvent",{enumerable:!0,get:function(){return o6.ConnectionPoolClosedEvent}});Object.defineProperty(O,"ConnectionPoolCreatedEvent",{enumerable:!0,get:function(){return o6.ConnectionPoolCreatedEvent}});Object.defineProperty(O,"ConnectionPoolMonitoringEvent",{enumerable:!0,get:function(){return o6.ConnectionPoolMonitoringEvent}});Object.defineProperty(O,"ConnectionPoolReadyEvent",{enumerable:!0,get:function(){return o6.ConnectionPoolReadyEvent}});Object.defineProperty(O,"ConnectionReadyEvent",{enumerable:!0,get:function(){return o6.ConnectionReadyEvent}});var w4=Y$();Object.defineProperty(O,"ServerClosedEvent",{enumerable:!0,get:function(){return w4.ServerClosedEvent}});Object.defineProperty(O,"ServerDescriptionChangedEvent",{enumerable:!0,get:function(){return w4.ServerDescriptionChangedEvent}});Object.defineProperty(O,"ServerHeartbeatFailedEvent",{enumerable:!0,get:function(){return w4.ServerHeartbeatFailedEvent}});Object.defineProperty(O,"ServerHeartbeatStartedEvent",{enumerable:!0,get:function(){return w4.ServerHeartbeatStartedEvent}});Object.defineProperty(O,"ServerHeartbeatSucceededEvent",{enumerable:!0,get:function(){return w4.ServerHeartbeatSucceededEvent}});Object.defineProperty(O,"ServerOpeningEvent",{enumerable:!0,get:function(){return w4.ServerOpeningEvent}});Object.defineProperty(O,"TopologyClosedEvent",{enumerable:!0,get:function(){return w4.TopologyClosedEvent}});Object.defineProperty(O,"TopologyDescriptionChangedEvent",{enumerable:!0,get:function(){return w4.TopologyDescriptionChangedEvent}});Object.defineProperty(O,"TopologyOpeningEvent",{enumerable:!0,get:function(){return w4.TopologyOpeningEvent}});var EF=dW();Object.defineProperty(O,"ServerSelectionEvent",{enumerable:!0,get:function(){return EF.ServerSelectionEvent}});Object.defineProperty(O,"ServerSelectionFailedEvent",{enumerable:!0,get:function(){return EF.ServerSelectionFailedEvent}});Object.defineProperty(O,"ServerSelectionStartedEvent",{enumerable:!0,get:function(){return EF.ServerSelectionStartedEvent}});Object.defineProperty(O,"ServerSelectionSucceededEvent",{enumerable:!0,get:function(){return EF.ServerSelectionSucceededEvent}});Object.defineProperty(O,"WaitingForSuitableServerEvent",{enumerable:!0,get:function(){return EF.WaitingForSuitableServerEvent}});var aD1=pW();Object.defineProperty(O,"SrvPollingEvent",{enumerable:!0,get:function(){return aD1.SrvPollingEvent}});var c8=j8();Object.defineProperty(O,"MongoCryptAzureKMSRequestError",{enumerable:!0,get:function(){return c8.MongoCryptAzureKMSRequestError}});Object.defineProperty(O,"MongoCryptCreateDataKeyError",{enumerable:!0,get:function(){return c8.MongoCryptCreateDataKeyError}});Object.defineProperty(O,"MongoCryptCreateEncryptedCollectionError",{enumerable:!0,get:function(){return c8.MongoCryptCreateEncryptedCollectionError}});Object.defineProperty(O,"MongoCryptError",{enumerable:!0,get:function(){return c8.MongoCryptError}});Object.defineProperty(O,"MongoCryptInvalidArgumentError",{enumerable:!0,get:function(){return c8.MongoCryptInvalidArgumentError}});Object.defineProperty(O,"MongoCryptKMSRequestNetworkTimeoutError",{enumerable:!0,get:function(){return c8.MongoCryptKMSRequestNetworkTimeoutError}});var rD1=gW();Object.defineProperty(O,"MongoClientAuthProviders",{enumerable:!0,get:function(){return rD1.MongoClientAuthProviders}})});var ju=z((k$)=>{Object.defineProperty(k$,"__esModule",{value:!0});A$1(C7(),k$);function A$1(A){for(let F of Object.keys(A))Object.defineProperty(k$,F,{enumerable:!0,get:function(){return A[F]}})}});var aW=z((Tu)=>{Object.defineProperty(Tu,"__esModule",{value:!0});Tu.ClientBulkWriteOperation=void 0;var nW=ju(),F$1=Q3(),B$1=F1(),D$1=O0(),p8=c1();class sW extends D$1.CommandOperation{get commandName(){return"bulkWrite"}constructor(A,F){super(void 0,F);this.commandBuilder=A,this.options=F,this.ns=new B$1.MongoDBNamespace("admin","$cmd")}resetBatch(){return this.commandBuilder.resetBatch()}get canRetryWrite(){return this.commandBuilder.isBatchRetryable}async execute(A,F,B){let D;if(A.description.type===nW.ServerType.LoadBalancer)if(F){let $;if(!F.pinnedConnection)$=await A.pool.checkOut({timeoutContext:B}),F.pin($);else $=F.pinnedConnection;D=this.commandBuilder.buildBatch($.hello?.maxMessageSizeBytes,$.hello?.maxWriteBatchSize,$.hello?.maxBsonObjectSize)}else throw new nW.MongoClientBulkWriteExecutionError("Session provided to the client bulk write operation must be present.");else{if(!A.description.maxWriteBatchSize||!A.description.maxMessageSizeBytes||!A.description.maxBsonObjectSize)throw new nW.MongoClientBulkWriteExecutionError("In order to execute a client bulk write, both maxWriteBatchSize, maxMessageSizeBytes and maxBsonObjectSize must be provided by the servers hello response.");D=this.commandBuilder.buildBatch(A.description.maxMessageSizeBytes,A.description.maxWriteBatchSize,A.description.maxBsonObjectSize)}if(!this.canRetryWrite)this.options.willRetryWrite=!1;return await super.executeCommand(A,F,D,B,F$1.ClientBulkWriteCursorResponse)}}Tu.ClientBulkWriteOperation=sW;p8.defineAspects(sW,[p8.Aspect.WRITE_OPERATION,p8.Aspect.SKIP_COLLATION,p8.Aspect.CURSOR_CREATING,p8.Aspect.RETRYABLE,p8.Aspect.COMMAND_BATCHING])});var fu=z((uu)=>{Object.defineProperty(uu,"__esModule",{value:!0});uu.ClientBulkWriteCursor=void 0;var $$1=aW(),J$1=T2(),Ou=F1(),X$1=k2();class rW extends X$1.AbstractCursor{constructor(A,F,B={}){super(A,new Ou.MongoDBNamespace("admin","$cmd"),B);this.commandBuilder=F,this.clientBulkWriteOptions=B}get response(){if(this.cursorResponse)return this.cursorResponse;return null}get operations(){return this.commandBuilder.lastOperations}clone(){let A=Ou.mergeOptions({},this.clientBulkWriteOptions);return delete A.session,new rW(this.client,this.commandBuilder,{...A})}async _initialize(A){let F=new $$1.ClientBulkWriteOperation(this.commandBuilder,{...this.clientBulkWriteOptions,...this.cursorOptions,session:A}),B=await J$1.executeOperation(this.client,F,this.timeoutContext);return this.cursorResponse=B,{server:F.server,session:A,response:B}}}uu.ClientBulkWriteCursor=rW});var iu=z((vu)=>{Object.defineProperty(vu,"__esModule",{value:!0});vu.buildReplaceOneOperation=vu.buildUpdateManyOperation=vu.buildUpdateOneOperation=vu.buildDeleteManyOperation=vu.buildDeleteOneOperation=vu.buildInsertOneOperation=vu.ClientBulkWriteCommandBuilder=void 0;vu.buildOperation=eW;var tW=y1(),_u=_A(),YF=s(),gu=W8(),Aq=F1(),xu=1000;class bu{constructor(A,F,B){this.models=A,this.options=F,this.pkFactory=B??Aq.DEFAULT_PK_FACTORY,this.currentModelIndex=0,this.previousModelIndex=0,this.lastOperations=[],this.isBatchRetryable=!0}get errorsOnly(){if("verboseResults"in this.options)return!this.options.verboseResults;return!0}hasNextBatch(){return this.currentModelIndex<this.models.length}resetBatch(){return this.currentModelIndex=this.previousModelIndex,!0}buildBatch(A,F,B){this.isBatchRetryable=!0;let D=0,$=0,J=this.baseCommand(),X=new Map;this.previousModelIndex=this.currentModelIndex;while(this.currentModelIndex<this.models.length){let E=this.models[this.currentModelIndex],Y=E.namespace,G=X.get(Y);if(E.name==="deleteMany"||E.name==="updateMany")this.isBatchRetryable=!1;if(G!=null){let H=eW(E,G,this.pkFactory,this.options),W;try{W=tW.BSON.serialize(H)}catch(q){throw new YF.MongoInvalidArgumentError("Could not serialize operation to BSON",{cause:q})}if(oW("ops",W,B),D+W.length<A&&J.ops.documents.length<F)D=xu+J.ops.push(H,W),this.currentModelIndex++;else break}else{X.set(Y,$);let H={ns:Y},W=eW(E,$,this.pkFactory,this.options),q,C;try{q=tW.BSON.serialize(H),C=tW.BSON.serialize(W)}catch(Q){throw new YF.MongoInvalidArgumentError("Could not serialize ns info to BSON",{cause:Q})}if(oW("nsInfo",q,B),oW("ops",C,B),D+q.length+C.length<A&&J.ops.documents.length<F)D=xu+J.nsInfo.push(H,q)+J.ops.push(W,C),$++,this.currentModelIndex++;else break}}return this.lastOperations=J.ops.documents,J}baseCommand(){let A={bulkWrite:1,errorsOnly:this.errorsOnly,ordered:this.options.ordered??!0,ops:new _u.DocumentSequence("ops"),nsInfo:new _u.DocumentSequence("nsInfo")};if(this.options.bypassDocumentValidation!=null)A.bypassDocumentValidation=this.options.bypassDocumentValidation;if(this.options.let)A.let=this.options.let;if(this.options.comment!==void 0)A.comment=this.options.comment;return A}}vu.ClientBulkWriteCommandBuilder=bu;function oW(A,F,B){if(F.length>B)throw new YF.MongoInvalidArgumentError(`Client bulk write operation ${A} of length ${F.length} exceeds the max bson object size of ${B}`)}var E$1=(A,F,B)=>{let D={insert:F,document:A.document};return D.document._id=A.document._id??B.createPk(),D};vu.buildInsertOneOperation=E$1;var Y$1=(A,F)=>{return yu(A,F,!1)};vu.buildDeleteOneOperation=Y$1;var G$1=(A,F)=>{return yu(A,F,!0)};vu.buildDeleteManyOperation=G$1;function yu(A,F,B){let D={delete:F,multi:B,filter:A.filter};if(A.hint)D.hint=A.hint;if(A.collation)D.collation=A.collation;return D}var H$1=(A,F,B)=>{return hu(A,F,!1,B)};vu.buildUpdateOneOperation=H$1;var W$1=(A,F,B)=>{return hu(A,F,!0,B)};vu.buildUpdateManyOperation=W$1;function q$1(A,F){if(!Aq.hasAtomicOperators(A,F))throw new YF.MongoAPIError("Client bulk write update models must only contain atomic modifiers (start with $) and must not be empty.")}function hu(A,F,B,D){q$1(A.update,D);let $={update:F,multi:B,filter:A.filter,updateMods:A.update};if(A.hint)$.hint=A.hint;if(A.upsert)$.upsert=A.upsert;if(A.arrayFilters)$.arrayFilters=A.arrayFilters;if(A.collation)$.collation=A.collation;if(!B&&"sort"in A&&A.sort!=null)$.sort=gu.formatSort(A.sort);return $}var C$1=(A,F)=>{if(Aq.hasAtomicOperators(A.replacement))throw new YF.MongoAPIError("Client bulk write replace models must not contain atomic modifiers (start with $) and must not be empty.");let B={update:F,multi:!1,filter:A.filter,updateMods:A.replacement};if(A.hint)B.hint=A.hint;if(A.upsert)B.upsert=A.upsert;if(A.collation)B.collation=A.collation;if(A.sort!=null)B.sort=gu.formatSort(A.sort);return B};vu.buildReplaceOneOperation=C$1;function eW(A,F,B,D){switch(A.name){case"insertOne":return vu.buildInsertOneOperation(A,F,B);case"deleteOne":return vu.buildDeleteOneOperation(A,F);case"deleteMany":return vu.buildDeleteManyOperation(A,F);case"updateOne":return vu.buildUpdateOneOperation(A,F,D);case"updateMany":return vu.buildUpdateManyOperation(A,F,D);case"replaceOne":return vu.buildReplaceOneOperation(A,F)}}});var ru=z((su)=>{Object.defineProperty(su,"__esModule",{value:!0});su.ClientBulkWriteResultsMerger=void 0;var z$1=C7(),U$1=s(),Z$1={acknowledged:!1,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0};class nu{static unacknowledged(){return Z$1}constructor(A){if(this.options=A,this.currentBatchOffset=0,this.writeConcernErrors=[],this.writeErrors=new Map,this.result={acknowledged:!0,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0},A.verboseResults)this.result.insertResults=new Map,this.result.updateResults=new Map,this.result.deleteResults=new Map}get bulkWriteResult(){return{acknowledged:this.result.acknowledged,insertedCount:this.result.insertedCount,upsertedCount:this.result.upsertedCount,matchedCount:this.result.matchedCount,modifiedCount:this.result.modifiedCount,deletedCount:this.result.deletedCount,insertResults:this.result.insertResults,updateResults:this.result.updateResults,deleteResults:this.result.deleteResults}}async merge(A){let F;try{for await(let B of A)if(B.ok===1){if(this.options.verboseResults)this.processDocument(A,B)}else if(this.options.ordered){let D=new U$1.MongoClientBulkWriteError({message:"Mongo client ordered bulk write encountered a write error."});throw D.writeErrors.set(B.idx+this.currentBatchOffset,{code:B.code,message:B.errmsg}),D.partialResult=this.result,D}else this.writeErrors.set(B.idx+this.currentBatchOffset,{code:B.code,message:B.errmsg})}catch(B){if(B instanceof z$1.MongoWriteConcernError){let D=B.result;if(F={insertedCount:D.nInserted,upsertedCount:D.nUpserted,matchedCount:D.nMatched,modifiedCount:D.nModified,deletedCount:D.nDeleted,writeConcernError:D.writeConcernError},this.options.verboseResults&&D.cursor.firstBatch){for(let $ of D.cursor.firstBatch)if($.ok===1)this.processDocument(A,$)}}else throw B}finally{if(A.response){let B=A.response;this.incrementCounts(B)}this.currentBatchOffset+=A.operations.length}if(F){let B=F.writeConcernError;this.incrementCounts(F),this.writeConcernErrors.push({code:B.code,message:B.errmsg})}return this.result}processDocument(A,F){let B=A.operations[F.idx];if("insert"in B)this.result.insertResults?.set(F.idx+this.currentBatchOffset,{insertedId:B.document._id});if("update"in B){let D={matchedCount:F.n,modifiedCount:F.nModified??0,didUpsert:F.upserted!=null};if(F.upserted)D.upsertedId=F.upserted._id;this.result.updateResults?.set(F.idx+this.currentBatchOffset,D)}if("delete"in B)this.result.deleteResults?.set(F.idx+this.currentBatchOffset,{deletedCount:F.n})}incrementCounts(A){this.result.insertedCount+=A.insertedCount,this.result.upsertedCount+=A.upsertedCount,this.result.matchedCount+=A.matchedCount,this.result.modifiedCount+=A.modifiedCount,this.result.deletedCount+=A.deletedCount}}su.ClientBulkWriteResultsMerger=nu});var BS=z((AS)=>{Object.defineProperty(AS,"__esModule",{value:!0});AS.ClientBulkWriteExecutor=void 0;var tu=k2(),V$1=fu(),Q7=s(),w$1=M2(),L$1=F1(),R$1=P2(),N$1=T2(),P$1=aW(),I$1=iu(),ou=ru();class eu{constructor(A,F,B){if(F.length===0)throw new Q7.MongoClientBulkWriteExecutionError("No client bulk write models were provided.");if(this.client=A,this.operations=F,this.options={ordered:!0,bypassDocumentValidation:!1,verboseResults:!1,...B},!this.options.writeConcern)this.options.writeConcern=R$1.WriteConcern.fromOptions(this.client.s.options);if(this.options.writeConcern?.w===0){if(this.options.verboseResults)throw new Q7.MongoInvalidArgumentError("Cannot request unacknowledged write concern and verbose results");if(this.options.ordered)throw new Q7.MongoInvalidArgumentError("Cannot request unacknowledged write concern and ordered writes")}}async execute(){let A=this.client.s.options.pkFactory,F=new I$1.ClientBulkWriteCommandBuilder(this.operations,this.options,A),B=L$1.resolveTimeoutOptions(this.client,this.options),D=w$1.TimeoutContext.create(B);if(this.options.writeConcern?.w===0){while(F.hasNextBatch()){let $=new P$1.ClientBulkWriteOperation(F,this.options);await N$1.executeOperation(this.client,$,D)}return ou.ClientBulkWriteResultsMerger.unacknowledged()}else{let $=new ou.ClientBulkWriteResultsMerger(this.options);while(F.hasNextBatch()){let J=new tu.CursorTimeoutContext(D,Symbol()),X={...this.options,timeoutContext:J,...B.timeoutMS!=null&&{timeoutMode:tu.CursorTimeoutMode.LIFETIME}},E=new V$1.ClientBulkWriteCursor(this.client,F,X);try{await $.merge(E)}catch(Y){if(Y instanceof Q7.MongoServerError&&!(Y instanceof Q7.MongoClientBulkWriteError)){let G=new Q7.MongoClientBulkWriteError({message:"Mongo client bulk write encountered an error during execution"});throw G.cause=Y,G.partialResult=$.bulkWriteResult,G}else throw Y}}if($.writeConcernErrors.length>0||$.writeErrors.size>0){let J=new Q7.MongoClientBulkWriteError({message:"Mongo client bulk write encountered errors during execution."});throw J.writeConcernErrors=$.writeConcernErrors,J.writeErrors=$.writeErrors,J.partialResult=$.bulkWriteResult,J}return $.bulkWriteResult}}}AS.ClientBulkWriteExecutor=eu});var qS=z((HS)=>{Object.defineProperty(HS,"__esModule",{value:!0});HS.ServerCapabilities=HS.Topology=void 0;var M$1=UW(),Y6=v0(),n3=s(),V0=a4(),j$1=M6(),GF=t0(),Bq=M2(),r2=F1(),M1=P6(),z9=Y$(),DS=$W(),$q=lA(),Dq=KA(),U9=dW(),O$=pW(),$S=TH(),T$1=0,HF=r2.makeStateMachine({[M1.STATE_CLOSED]:[M1.STATE_CLOSED,M1.STATE_CONNECTING],[M1.STATE_CONNECTING]:[M1.STATE_CONNECTING,M1.STATE_CLOSING,M1.STATE_CONNECTED,M1.STATE_CLOSED],[M1.STATE_CONNECTED]:[M1.STATE_CONNECTED,M1.STATE_CLOSING,M1.STATE_CLOSED],[M1.STATE_CLOSING]:[M1.STATE_CLOSING,M1.STATE_CLOSED]});class e1 extends j$1.TypedEventEmitter{constructor(A,F,B){super();if(this.on("error",r2.noop),this.client=A,B=B??{hosts:[r2.HostAddress.fromString("localhost:27017")],...Object.fromEntries(M$1.DEFAULT_OPTIONS.entries())},typeof F==="string")F=[r2.HostAddress.fromString(F)];else if(!Array.isArray(F))F=[F];let D=[];for(let Y of F)if(typeof Y==="string")D.push(r2.HostAddress.fromString(Y));else if(Y instanceof r2.HostAddress)D.push(Y);else throw new n3.MongoRuntimeError(`Topology cannot be constructed from ${JSON.stringify(Y)}`);let $=k$1(B),J=T$1++,X=B.srvMaxHosts==null||B.srvMaxHosts===0||B.srvMaxHosts>=D.length?D:r2.shuffle(D,B.srvMaxHosts),E=new Map;for(let Y of X)E.set(Y.toString(),new $q.ServerDescription(Y));if(this.waitQueue=new r2.List,this.s={id:J,options:B,seedlist:D,state:M1.STATE_CLOSED,description:new $S.TopologyDescription($,E,B.replicaSet,void 0,void 0,void 0,B),serverSelectionTimeoutMS:B.serverSelectionTimeoutMS,heartbeatFrequencyMS:B.heartbeatFrequencyMS,minHeartbeatFrequencyMS:B.minHeartbeatFrequencyMS,servers:new Map,credentials:B?.credentials,clusterTime:void 0,detectShardedTopology:(Y)=>this.detectShardedTopology(Y),detectSrvRecords:(Y)=>this.detectSrvRecords(Y)},this.mongoLogger=A.mongoLogger,this.component="topology",B.srvHost&&!B.loadBalanced)this.s.srvPoller=B.srvPoller??new O$.SrvPoller({heartbeatFrequencyMS:this.s.heartbeatFrequencyMS,srvHost:B.srvHost,srvMaxHosts:B.srvMaxHosts,srvServiceName:B.srvServiceName}),this.on(e1.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology);this.connectionLock=void 0}detectShardedTopology(A){let F=A.previousDescription.type,B=A.newDescription.type,D=F!==M1.TopologyType.Sharded&&B===M1.TopologyType.Sharded,J=!!this.s.srvPoller?.listeners(O$.SrvPoller.SRV_RECORD_DISCOVERY)?.includes(this.s.detectSrvRecords);if(D&&!J)this.s.srvPoller?.on(O$.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords),this.s.srvPoller?.start()}detectSrvRecords(A){let F=this.s.description;if(this.s.description=this.s.description.updateFromSrvPollingEvent(A,this.s.options.srvMaxHosts),this.s.description===F)return;JS(this),this.emitAndLog(e1.TOPOLOGY_DESCRIPTION_CHANGED,new z9.TopologyDescriptionChangedEvent(this.s.id,F,this.s.description))}get description(){return this.s.description}get loadBalanced(){return this.s.options.loadBalanced}get serverApi(){return this.s.options.serverApi}get capabilities(){return new Jq(this.lastHello())}async connect(A){this.connectionLock??=this._connect(A);try{return await this.connectionLock,this}finally{this.connectionLock=void 0}}async _connect(A){if(A=A??{},this.s.state===M1.STATE_CONNECTED)return this;HF(this,M1.STATE_CONNECTING),this.emitAndLog(e1.TOPOLOGY_OPENING,new z9.TopologyOpeningEvent(this.s.id)),this.emitAndLog(e1.TOPOLOGY_DESCRIPTION_CHANGED,new z9.TopologyDescriptionChangedEvent(this.s.id,new $S.TopologyDescription(M1.TopologyType.Unknown),this.s.description));let F=Array.from(this.s.description.servers.values());if(this.s.servers=new Map(F.map((X)=>[X.address,YS(this,X)])),this.s.options.loadBalanced)for(let X of F){let E=new $q.ServerDescription(X.hostAddress,void 0,{loadBalanced:this.s.options.loadBalanced});this.serverUpdateHandler(E)}let B=this.client.s.options.serverSelectionTimeoutMS,D=A.readPreference??GF.ReadPreference.primary,$=Bq.TimeoutContext.create({timeoutMS:void 0,serverSelectionTimeoutMS:B,waitQueueTimeoutMS:this.client.s.options.waitQueueTimeoutMS}),J={operationName:"ping",...A,timeoutContext:$};try{let X=await this.selectServer(Dq.readPreferenceServerSelector(D),J);if(this.s.options.__skipPingOnConnect!==!0&&this.s.credentials)return await X.command(r2.ns("admin.$cmd"),{ping:1},{timeoutContext:$}),HF(this,M1.STATE_CONNECTED),this.emit(e1.OPEN,this),this.emit(e1.CONNECT,this),this;return HF(this,M1.STATE_CONNECTED),this.emit(e1.OPEN,this),this.emit(e1.CONNECT,this),this}catch(X){throw this.close(),X}}closeCheckedOutConnections(){for(let A of this.s.servers.values())return A.closeCheckedOutConnections()}close(){if(this.s.state===M1.STATE_CLOSED||this.s.state===M1.STATE_CLOSING)return;for(let A of this.s.servers.values())ES(A,this);if(this.s.servers.clear(),HF(this,M1.STATE_CLOSING),GS(this.waitQueue,new n3.MongoTopologyClosedError),this.s.srvPoller)this.s.srvPoller.stop(),this.s.srvPoller.removeListener(O$.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords);this.removeListener(e1.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology),HF(this,M1.STATE_CLOSED),this.emitAndLog(e1.TOPOLOGY_CLOSED,new z9.TopologyClosedEvent(this.s.id))}async selectServer(A,F){let B;if(typeof A!=="function")if(typeof A==="string")B=Dq.readPreferenceServerSelector(GF.ReadPreference.fromString(A));else{let q;if(A instanceof GF.ReadPreference)q=A;else GF.ReadPreference.translate(F),q=F.readPreference||GF.ReadPreference.primary;B=Dq.readPreferenceServerSelector(q)}else B=A;if(F={serverSelectionTimeoutMS:this.s.serverSelectionTimeoutMS,...F},this.client.mongoLogger?.willLog(V0.MongoLoggableComponent.SERVER_SELECTION,V0.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(V0.MongoLoggableComponent.SERVER_SELECTION,new U9.ServerSelectionStartedEvent(A,this.description,F.operationName));let D;if(F.timeoutContext)D=F.timeoutContext.serverSelectionTimeout;else D=Bq.Timeout.expires(F.serverSelectionTimeoutMS??0);let $=this.description.type===M1.TopologyType.Sharded,J=F.session,X=J&&J.transaction;if($&&X&&X.server){if(this.client.mongoLogger?.willLog(V0.MongoLoggableComponent.SERVER_SELECTION,V0.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(V0.MongoLoggableComponent.SERVER_SELECTION,new U9.ServerSelectionSucceededEvent(A,this.description,X.server.pool.address,F.operationName));if(F.timeoutContext?.clearServerSelectionTimeout)D?.clear();return X.server}let{promise:E,resolve:Y,reject:G}=r2.promiseWithResolvers(),H={serverSelector:B,topologyDescription:this.description,mongoLogger:this.client.mongoLogger,transaction:X,resolve:Y,reject:G,cancelled:!1,startTime:r2.now(),operationName:F.operationName,waitingLogged:!1,previousServer:F.previousServer},W=r2.addAbortListener(F.signal,function(){H.cancelled=!0,G(this.reason)});this.waitQueue.push(H),XS(this);try{D?.throwIfExpired();let q=await(D?Promise.race([E,D]):E);if(F.timeoutContext?.csotEnabled()&&q.description.minRoundTripTime!==0)F.timeoutContext.minRoundTripTime=q.description.minRoundTripTime;return q}catch(q){if(Bq.TimeoutError.is(q)){H.cancelled=!0;let C=new n3.MongoServerSelectionError(`Server selection timed out after ${D?.duration} ms`,this.description);if(this.client.mongoLogger?.willLog(V0.MongoLoggableComponent.SERVER_SELECTION,V0.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(V0.MongoLoggableComponent.SERVER_SELECTION,new U9.ServerSelectionFailedEvent(A,this.description,C,F.operationName));if(F.timeoutContext?.csotEnabled())throw new n3.MongoOperationTimeoutError("Timed out during server selection",{cause:C});throw C}throw q}finally{if(W?.[r2.kDispose](),F.timeoutContext?.clearServerSelectionTimeout)D?.clear()}}serverUpdateHandler(A){if(!this.s.description.hasServer(A.address))return;if(O$1(this.s.description,A))return;let F=this.s.description,B=this.s.description.servers.get(A.address);if(!B)return;let D=A.$clusterTime;if(D)M1._advanceClusterTime(this,D);let $=B&&B.equals(A);if(this.s.description=this.s.description.update(A),this.s.description.compatibilityError){this.emit(e1.ERROR,new n3.MongoCompatibilityError(this.s.description.compatibilityError));return}if(!$){let J=this.s.description.servers.get(A.address);if(J)this.emit(e1.SERVER_DESCRIPTION_CHANGED,new z9.ServerDescriptionChangedEvent(this.s.id,A.address,B,J))}if(JS(this,A),this.waitQueue.length>0)XS(this);if(!$)this.emitAndLog(e1.TOPOLOGY_DESCRIPTION_CHANGED,new z9.TopologyDescriptionChangedEvent(this.s.id,F,this.s.description))}auth(A,F){if(typeof A==="function")F=A,A=void 0;if(typeof F==="function")F(void 0,!0)}get clientMetadata(){return this.s.options.metadata}isConnected(){return this.s.state===M1.STATE_CONNECTED}isDestroyed(){return this.s.state===M1.STATE_CLOSED}lastHello(){let A=Array.from(this.description.servers.values());if(A.length===0)return{};return A.filter((D)=>D.type!==M1.ServerType.Unknown)[0]||{maxWireVersion:this.description.commonWireVersion}}get commonWireVersion(){return this.description.commonWireVersion}get logicalSessionTimeoutMinutes(){return this.description.logicalSessionTimeoutMinutes}get clusterTime(){return this.s.clusterTime}set clusterTime(A){this.s.clusterTime=A}}HS.Topology=e1;e1.SERVER_OPENING=Y6.SERVER_OPENING;e1.SERVER_CLOSED=Y6.SERVER_CLOSED;e1.SERVER_DESCRIPTION_CHANGED=Y6.SERVER_DESCRIPTION_CHANGED;e1.TOPOLOGY_OPENING=Y6.TOPOLOGY_OPENING;e1.TOPOLOGY_CLOSED=Y6.TOPOLOGY_CLOSED;e1.TOPOLOGY_DESCRIPTION_CHANGED=Y6.TOPOLOGY_DESCRIPTION_CHANGED;e1.ERROR=Y6.ERROR;e1.OPEN=Y6.OPEN;e1.CONNECT=Y6.CONNECT;e1.CLOSE=Y6.CLOSE;e1.TIMEOUT=Y6.TIMEOUT;function ES(A,F){for(let B of Y6.LOCAL_SERVER_EVENTS)A.removeAllListeners(B);A.close(),F.emitAndLog(e1.SERVER_CLOSED,new z9.ServerClosedEvent(F.s.id,A.description.address));for(let B of Y6.SERVER_RELAY_EVENTS)A.removeAllListeners(B)}function k$1(A){if(A?.directConnection)return M1.TopologyType.Single;if(A?.replicaSet)return M1.TopologyType.ReplicaSetNoPrimary;if(A?.loadBalanced)return M1.TopologyType.LoadBalanced;return M1.TopologyType.Unknown}function YS(A,F){A.emitAndLog(e1.SERVER_OPENING,new z9.ServerOpeningEvent(A.s.id,F.address));let B=new DS.Server(A,F,A.s.options);for(let D of Y6.SERVER_RELAY_EVENTS)B.on(D,($)=>A.emit(D,$));return B.on(DS.Server.DESCRIPTION_RECEIVED,(D)=>A.serverUpdateHandler(D)),B.connect(),B}function JS(A,F){if(F&&A.s.servers.has(F.address)){let B=A.s.servers.get(F.address);if(B){if(B.s.description=F,F.error instanceof n3.MongoError&&F.error.hasErrorLabel(n3.MongoErrorLabel.ResetPool)){let D=F.error.hasErrorLabel(n3.MongoErrorLabel.InterruptInUseConnections);B.pool.clear({interruptInUseConnections:D})}else if(F.error==null){let D=A.s.description.type;if(F.isDataBearing||F.type!==M1.ServerType.Unknown&&D===M1.TopologyType.Single)B.pool.ready()}}}for(let B of A.description.servers.values())if(!A.s.servers.has(B.address)){let D=YS(A,B);A.s.servers.set(B.address,D)}for(let B of A.s.servers){let D=B[0];if(A.description.hasServer(D))continue;if(!A.s.servers.has(D))continue;let $=A.s.servers.get(D);if(A.s.servers.delete(D),$)ES($,A)}}function GS(A,F){while(A.length){let B=A.shift();if(!B)continue;if(!B.cancelled){if(B.mongoLogger?.willLog(V0.MongoLoggableComponent.SERVER_SELECTION,V0.SeverityLevel.DEBUG))B.mongoLogger?.debug(V0.MongoLoggableComponent.SERVER_SELECTION,new U9.ServerSelectionFailedEvent(B.serverSelector,B.topologyDescription,F,B.operationName));B.reject(F)}}}function XS(A){if(A.s.state===M1.STATE_CLOSED){GS(A.waitQueue,new n3.MongoTopologyClosedError);return}let F=A.description.type===M1.TopologyType.Sharded,B=Array.from(A.description.servers.values()),D=A.waitQueue.length;for(let $=0;$<D;++$){let J=A.waitQueue.shift();if(!J)continue;if(J.cancelled)continue;let X;try{let{serverSelector:G,previousServer:H}=J;X=G?G(A.description,B,H?[H]:[]):B}catch(G){if(A.client.mongoLogger?.willLog(V0.MongoLoggableComponent.SERVER_SELECTION,V0.SeverityLevel.DEBUG))A.client.mongoLogger?.debug(V0.MongoLoggableComponent.SERVER_SELECTION,new U9.ServerSelectionFailedEvent(J.serverSelector,A.description,G,J.operationName));J.reject(G);continue}let E;if(X.length===0){if(!J.waitingLogged){if(A.client.mongoLogger?.willLog(V0.MongoLoggableComponent.SERVER_SELECTION,V0.SeverityLevel.INFORMATIONAL))A.client.mongoLogger?.info(V0.MongoLoggableComponent.SERVER_SELECTION,new U9.WaitingForSuitableServerEvent(J.serverSelector,A.description,A.s.serverSelectionTimeoutMS!==0?A.s.serverSelectionTimeoutMS-(r2.now()-J.startTime):-1,J.operationName));J.waitingLogged=!0}A.waitQueue.push(J);continue}else if(X.length===1)E=A.s.servers.get(X[0].address);else{let G=r2.shuffle(X,2),H=A.s.servers.get(G[0].address),W=A.s.servers.get(G[1].address);E=H&&W&&H.s.operationCount<W.s.operationCount?H:W}if(!E){let G=new n3.MongoServerSelectionError("server selection returned a server description but the server was not found in the topology",A.description);if(A.client.mongoLogger?.willLog(V0.MongoLoggableComponent.SERVER_SELECTION,V0.SeverityLevel.DEBUG))A.client.mongoLogger?.debug(V0.MongoLoggableComponent.SERVER_SELECTION,new U9.ServerSelectionFailedEvent(J.serverSelector,A.description,G,J.operationName));J.reject(G);return}let Y=J.transaction;if(F&&Y&&Y.isActive&&E)Y.pinServer(E);if(A.client.mongoLogger?.willLog(V0.MongoLoggableComponent.SERVER_SELECTION,V0.SeverityLevel.DEBUG))A.client.mongoLogger?.debug(V0.MongoLoggableComponent.SERVER_SELECTION,new U9.ServerSelectionSucceededEvent(J.serverSelector,J.topologyDescription,E.pool.address,J.operationName));J.resolve(E)}if(A.waitQueue.length>0)for(let[,$]of A.s.servers)process.nextTick(function J(){return $.requestCheck()})}function O$1(A,F){let D=A.servers.get(F.address)?.topologyVersion;return $q.compareTopologyVersion(D,F.topologyVersion)>0}class Jq{constructor(A){this.minWireVersion=A.minWireVersion||0,this.maxWireVersion=A.maxWireVersion||0}get hasAggregationCursor(){return this.maxWireVersion>=1}get hasWriteCommands(){return this.maxWireVersion>=2}get hasTextSearch(){return this.minWireVersion>=0}get hasAuthCommands(){return this.maxWireVersion>=1}get hasListCollectionsCommand(){return this.maxWireVersion>=3}get hasListIndexesCommand(){return this.maxWireVersion>=3}get supportsSnapshotReads(){return this.maxWireVersion>=13}get commandsTakeWriteConcern(){return this.maxWireVersion>=5}get commandsTakeCollation(){return this.maxWireVersion>=5}}HS.ServerCapabilities=Jq});var e4=z((ZS)=>{Object.defineProperty(ZS,"__esModule",{value:!0});ZS.MongoClient=ZS.ServerApiVersion=void 0;var Xq=i("fs"),S$1=y1(),f$1=D7(),_$1=ID(),x$1=m3(),CS=UW(),g$1=v0(),b$1=wD(),Eq=s(),y$1=gW(),QS=a4(),h$1=M6(),v$1=BS(),m$1=T2(),d$1=Q8(),KS=t0(),l$1=z8(),c$1=KA(),zS=qS(),US=S8(),C2=F1();ZS.ServerApiVersion=Object.freeze({v1:"1"});class Yq extends h$1.TypedEventEmitter{constructor(A,F){super();this.on("error",C2.noop),this.options=CS.parseOptions(A,this,F);let B=Object.values(this.options.mongoLoggerOptions.componentSeverities).some(($)=>$!==QS.SeverityLevel.OFF);this.mongoLogger=B?new QS.MongoLogger(this.options.mongoLoggerOptions):void 0;let D=this;this.s={url:A,bsonOptions:S$1.resolveBSONOptions(this.options),namespace:C2.ns("admin"),hasBeenClosed:!1,sessionPool:new US.ServerSessionPool(this),activeSessions:new Set,activeCursors:new Set,authProviders:new y$1.MongoClientAuthProviders,get options(){return D.options},get readConcern(){return D.options.readConcern},get writeConcern(){return D.options.writeConcern},get readPreference(){return D.options.readPreference},get isMongoClient(){return!0}},this.checkForNonGenuineHosts()}async asyncDispose(){await this.close()}checkForNonGenuineHosts(){let A=this.options.hosts.filter(($)=>C2.isHostMatch(C2.DOCUMENT_DB_CHECK,$.host)),F=C2.isHostMatch(C2.DOCUMENT_DB_CHECK,this.options.srvHost),B=this.options.hosts.filter(($)=>C2.isHostMatch(C2.COSMOS_DB_CHECK,$.host)),D=C2.isHostMatch(C2.COSMOS_DB_CHECK,this.options.srvHost);if(A.length!==0||F)this.mongoLogger?.info("client",C2.DOCUMENT_DB_MSG);else if(B.length!==0||D)this.mongoLogger?.info("client",C2.COSMOS_DB_MSG)}get serverApi(){return this.options.serverApi&&Object.freeze({...this.options.serverApi})}get monitorCommands(){return this.options.monitorCommands}set monitorCommands(A){this.options.monitorCommands=A}get autoEncrypter(){return this.options.autoEncrypter}get readConcern(){return this.s.readConcern}get writeConcern(){return this.s.writeConcern}get readPreference(){return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get timeoutMS(){return this.s.options.timeoutMS}async bulkWrite(A,F){if(this.autoEncrypter)throw new Eq.MongoInvalidArgumentError("MongoClient bulkWrite does not currently support automatic encryption.");return await new v$1.ClientBulkWriteExecutor(this,A,C2.resolveOptions(this,F)).execute()}async connect(){if(this.connectionLock)return await this.connectionLock;try{this.connectionLock=this._connect(),await this.connectionLock}finally{this.connectionLock=void 0}return this}async _connect(){if(this.topology&&this.topology.isConnected())return this;let A=this.options;if(A.tls){if(typeof A.tlsCAFile==="string")A.ca??=await Xq.promises.readFile(A.tlsCAFile);if(typeof A.tlsCRLFile==="string")A.crl??=await Xq.promises.readFile(A.tlsCRLFile);if(typeof A.tlsCertificateKeyFile==="string"){if(!A.key||!A.cert){let B=await Xq.promises.readFile(A.tlsCertificateKeyFile);A.key??=B,A.cert??=B}}}if(typeof A.srvHost==="string"){let B=await CS.resolveSRVRecord(A);for(let[D,$]of B.entries())A.hosts[D]=$}if(A.credentials?.mechanism===x$1.AuthMechanism.MONGODB_OIDC){let B=A.credentials?.mechanismProperties?.ALLOWED_HOSTS||_$1.DEFAULT_ALLOWED_HOSTS;if(!A.credentials?.mechanismProperties?.ENVIRONMENT){for(let $ of A.hosts)if(!C2.hostMatchesWildcards($.toHostPort().host,B))throw new Eq.MongoInvalidArgumentError(`Host '${$}' is not valid for OIDC authentication with ALLOWED_HOSTS of '${B.join(",")}'`)}}this.topology=new zS.Topology(this,A.hosts,A),this.topology.once(zS.Topology.OPEN,()=>this.emit("open",this));for(let B of g$1.MONGO_CLIENT_EVENTS)this.topology.on(B,(...D)=>this.emit(B,...D));let F=async()=>{try{await this.topology?.connect(A)}catch(B){throw this.topology?.close(),B}};if(this.autoEncrypter)await this.autoEncrypter?.init(),await F(),await A.encrypter.connectInternalClient();else await F();return this}async close(A=!1){if(this.closeLock)return await this.closeLock;try{this.closeLock=this._close(),await this.closeLock}finally{this.closeLock=void 0}}async _close(){Object.defineProperty(this.s,"hasBeenClosed",{value:!0,enumerable:!0,configurable:!1,writable:!1}),this.topology?.closeCheckedOutConnections();let A=Array.from(this.s.activeCursors,(Y)=>Y.close());this.s.activeCursors.clear(),await Promise.all(A);let F=Array.from(this.s.activeSessions,(Y)=>Y.endSession());if(this.s.activeSessions.clear(),await Promise.all(F),this.topology==null)return;let B=c$1.readPreferenceServerSelector(KS.ReadPreference.primaryPreferred),D=this.topology.description,$=Array.from(D.servers.values());if(B(D,$).length!==0){let Y=Array.from(this.s.sessionPool.sessions,({id:G})=>G);if(Y.length!==0)try{await m$1.executeOperation(this,new d$1.RunAdminCommandOperation({endSessions:Y},{readPreference:KS.ReadPreference.primaryPreferred,noResponse:!0}))}catch(G){C2.squashError(G)}}let X=this.topology;this.topology=void 0,X.close();let{encrypter:E}=this.options;if(E)await E.close(this)}db(A,F){if(F=F??{},!A)A=this.s.options.dbName;let B=Object.assign({},this.options,F);return new b$1.Db(this,A,B)}static async connect(A,F){return await new this(A,F).connect()}startSession(A){let F=new US.ClientSession(this,this.s.sessionPool,{explicit:!0,...A},this.options);return this.s.activeSessions.add(F),F.once("ended",()=>{this.s.activeSessions.delete(F)}),F}async withSession(A,F){let B={owner:Symbol(),...typeof A==="object"?A:{}},D=typeof A==="function"?A:F;if(D==null)throw new Eq.MongoInvalidArgumentError("Missing required callback parameter");let $=this.startSession(B);try{return await D($)}finally{try{await $.endSession()}catch(J){C2.squashError(J)}}}watch(A=[],F={}){if(!Array.isArray(A))F=A,A=[];return new f$1.ChangeStream(this,A,C2.resolveOptions(this,F))}}ZS.MongoClient=Yq;l$1.configureResourceManagement(Yq.prototype)});var z8=z((wS)=>{Object.defineProperty(wS,"__esModule",{value:!0});wS.configureResourceManagement=WF;wS.configureExplicitResourceManagement=i$1;function WF(A){Symbol.asyncDispose&&Object.defineProperty(A,Symbol.asyncDispose,{value:async function F(){await this.asyncDispose()},enumerable:!1,configurable:!0,writable:!0})}function i$1(){let{MongoClient:A}=e4(),{ClientSession:F}=S8(),{AbstractCursor:B}=k2(),{ChangeStream:D}=D7();WF(A.prototype),WF(F.prototype),WF(B.prototype),WF(D.prototype)}});var k2=z((jS)=>{Object.defineProperty(jS,"__esModule",{value:!0});jS.CursorTimeoutContext=jS.AbstractCursor=jS.CursorTimeoutMode=jS.CURSOR_FLAGS=void 0;var IS=i("stream"),i8=y1(),A2=s(),a$1=M6(),LS=T2(),r$1=IY(),t$1=CL(),RS=c6(),u$=t0(),o$1=z8(),NS=S8(),Gq=M2(),S6=F1();jS.CURSOR_FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];function PS(){this.client.s.activeCursors.delete(this)}jS.CursorTimeoutMode=Object.freeze({ITERATION:"iteration",LIFETIME:"cursorLifetime"});class S$ extends a$1.TypedEventEmitter{constructor(A,F,B={}){super();if(this.documents=null,this.hasEmittedClose=!1,this.on("error",S6.noop),!A.s.isMongoClient)throw new A2.MongoRuntimeError("Cursor must be constructed with MongoClient");if(this.cursorClient=A,this.cursorNamespace=F,this.cursorId=null,this.initialized=!1,this.isClosed=!1,this.isKilled=!1,this.cursorOptions={readPreference:B.readPreference&&B.readPreference instanceof u$.ReadPreference?B.readPreference:u$.ReadPreference.primary,...i8.pluckBSONSerializeOptions(B),timeoutMS:B?.timeoutContext?.csotEnabled()?B.timeoutContext.timeoutMS:B.timeoutMS,tailable:B.tailable,awaitData:B.awaitData},this.cursorOptions.timeoutMS!=null)if(B.timeoutMode==null)if(B.tailable){if(B.awaitData){if(B.maxAwaitTimeMS!=null&&B.maxAwaitTimeMS>=this.cursorOptions.timeoutMS)throw new A2.MongoInvalidArgumentError("Cannot specify maxAwaitTimeMS >= timeoutMS for a tailable awaitData cursor")}this.cursorOptions.timeoutMode=jS.CursorTimeoutMode.ITERATION}else this.cursorOptions.timeoutMode=jS.CursorTimeoutMode.LIFETIME;else{if(B.tailable&&B.timeoutMode===jS.CursorTimeoutMode.LIFETIME)throw new A2.MongoInvalidArgumentError("Cannot set tailable cursor's timeoutMode to LIFETIME");this.cursorOptions.timeoutMode=B.timeoutMode}else if(B.timeoutMode!=null)throw new A2.MongoInvalidArgumentError("Cannot set timeoutMode without setting timeoutMS");this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null&&(this.cursorOptions.timeoutMode===jS.CursorTimeoutMode.ITERATION&&!this.cursorOptions.tailable||this.cursorOptions.tailable&&!this.cursorOptions.awaitData);let D=RS.ReadConcern.fromOptions(B);if(D)this.cursorOptions.readConcern=D;if(typeof B.batchSize==="number")this.cursorOptions.batchSize=B.batchSize;if(B.comment!==void 0)this.cursorOptions.comment=B.comment;if(typeof B.maxTimeMS==="number")this.cursorOptions.maxTimeMS=B.maxTimeMS;if(typeof B.maxAwaitTimeMS==="number")this.cursorOptions.maxAwaitTimeMS=B.maxAwaitTimeMS;if(B.session instanceof NS.ClientSession)this.cursorSession=B.session;else this.cursorSession=this.cursorClient.startSession({owner:this,explicit:!1});this.deserializationOptions={...this.cursorOptions,validation:{utf8:B?.enableUtf8Validation===!1?!1:!0}},this.timeoutContext=B.timeoutContext,this.signal=B.signal,this.abortListener=S6.addAbortListener(this.signal,()=>void this.close().then(void 0,S6.squashError)),this.trackCursor()}get id(){return this.cursorId??void 0}get isDead(){return(this.cursorId?.isZero()??!1)||this.isClosed||this.isKilled}get client(){return this.cursorClient}get server(){return this.selectedServer}get namespace(){return this.cursorNamespace}get readPreference(){return this.cursorOptions.readPreference}get readConcern(){return this.cursorOptions.readConcern}get session(){return this.cursorSession}set session(A){this.cursorSession=A}get closed(){return this.isClosed&&(this.documents?.length??0)===0}get killed(){return this.isKilled}get loadBalanced(){return!!this.cursorClient.topology?.loadBalanced}async asyncDispose(){await this.close()}trackCursor(){if(this.cursorClient.s.activeCursors.add(this),!this.listeners("close").includes(PS))this.once("close",PS)}bufferedCount(){return this.documents?.length??0}readBufferedDocuments(A){let F=[],B=Math.min(A??this.documents?.length??0,this.documents?.length??0);for(let D=0;D<B;D++){let $=this.documents?.shift(this.deserializationOptions);if($!=null)F.push($)}return F}async*[Symbol.asyncIterator](){if(this.signal?.throwIfAborted(),this.closed)return;try{while(!0){if(this.isKilled)return;if(this.closed)return;if(this.cursorId!=null&&this.isDead&&(this.documents?.length??0)===0)return;let A=await this.next();if(A===null)return;yield A,this.signal?.throwIfAborted()}}finally{if(!this.isClosed)try{await this.close()}catch(A){S6.squashError(A)}}}stream(A){let F=new MS(this),B=S6.addAbortListener(this.signal,function(){F.destroy(this.reason)});if(F.once("end",()=>{B?.[S6.kDispose]()}),A?.transform){let D=A.transform,$=F.pipe(new IS.Transform({objectMode:!0,highWaterMark:1,transform(J,X,E){try{let Y=D(J);E(void 0,Y)}catch(Y){E(Y)}}}));return F.on("error",(J)=>$.emit("error",J)),$}return F}async hasNext(){if(this.signal?.throwIfAborted(),this.cursorId===i8.Long.ZERO)return!1;if(this.cursorOptions.timeoutMode===jS.CursorTimeoutMode.ITERATION&&this.cursorId!=null)this.timeoutContext?.refresh();try{do{if((this.documents?.length??0)!==0)return!0;await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{if(this.cursorOptions.timeoutMode===jS.CursorTimeoutMode.ITERATION)this.timeoutContext?.clear()}return!1}async next(){if(this.signal?.throwIfAborted(),this.cursorId===i8.Long.ZERO)throw new A2.MongoCursorExhaustedError;if(this.cursorOptions.timeoutMode===jS.CursorTimeoutMode.ITERATION&&this.cursorId!=null)this.timeoutContext?.refresh();try{do{let A=this.documents?.shift(this.deserializationOptions);if(A!=null){if(this.transform!=null)return await this.transformDocument(A);return A}await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{if(this.cursorOptions.timeoutMode===jS.CursorTimeoutMode.ITERATION)this.timeoutContext?.clear()}return null}async tryNext(){if(this.signal?.throwIfAborted(),this.cursorId===i8.Long.ZERO)throw new A2.MongoCursorExhaustedError;if(this.cursorOptions.timeoutMode===jS.CursorTimeoutMode.ITERATION&&this.cursorId!=null)this.timeoutContext?.refresh();try{let A=this.documents?.shift(this.deserializationOptions);if(A!=null){if(this.transform!=null)return await this.transformDocument(A);return A}if(await this.fetchBatch(),A=this.documents?.shift(this.deserializationOptions),A!=null){if(this.transform!=null)return await this.transformDocument(A);return A}}finally{if(this.cursorOptions.timeoutMode===jS.CursorTimeoutMode.ITERATION)this.timeoutContext?.clear()}return null}async forEach(A){if(this.signal?.throwIfAborted(),typeof A!=="function")throw new A2.MongoInvalidArgumentError('Argument "iterator" must be a function');for await(let F of this)if(A(F)===!1)break}async close(A){await this.cleanup(A?.timeoutMS)}async toArray(){this.signal?.throwIfAborted();let A=[];for await(let F of this){A.push(F);let B=this.readBufferedDocuments();if(this.transform!=null)for(let D of B)A.push(await this.transformDocument(D));else A.push(...B)}return A}addCursorFlag(A,F){if(this.throwIfInitialized(),!jS.CURSOR_FLAGS.includes(A))throw new A2.MongoInvalidArgumentError(`Flag ${A} is not one of ${jS.CURSOR_FLAGS}`);if(typeof F!=="boolean")throw new A2.MongoInvalidArgumentError(`Flag ${A} must be a boolean value`);return this.cursorOptions[A]=F,this}map(A){this.throwIfInitialized();let F=this.transform;if(F)this.transform=(B)=>{return A(F(B))};else this.transform=A;return this}withReadPreference(A){if(this.throwIfInitialized(),A instanceof u$.ReadPreference)this.cursorOptions.readPreference=A;else if(typeof A==="string")this.cursorOptions.readPreference=u$.ReadPreference.fromString(A);else throw new A2.MongoInvalidArgumentError(`Invalid read preference: ${A}`);return this}withReadConcern(A){this.throwIfInitialized();let F=RS.ReadConcern.fromOptions({readConcern:A});if(F)this.cursorOptions.readConcern=F;return this}maxTimeMS(A){if(this.throwIfInitialized(),typeof A!=="number")throw new A2.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.cursorOptions.maxTimeMS=A,this}batchSize(A){if(this.throwIfInitialized(),this.cursorOptions.tailable)throw new A2.MongoTailableCursorError("Tailable cursor does not support batchSize");if(typeof A!=="number")throw new A2.MongoInvalidArgumentError('Operation "batchSize" requires an integer');return this.cursorOptions.batchSize=A,this}rewind(){if(this.timeoutContext&&this.timeoutContext.owner!==this)throw new A2.MongoAPIError("Cannot rewind cursor that does not own its timeout context.");if(!this.initialized)return;if(this.cursorId=null,this.documents?.clear(),this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!1,this.isKilled=!1,this.initialized=!1,this.hasEmittedClose=!1,this.trackCursor(),this.cursorSession.explicit===!1){if(!this.cursorSession.hasEnded)this.cursorSession.endSession().then(void 0,S6.squashError);this.cursorSession=this.cursorClient.startSession({owner:this,explicit:!1})}}async getMore(A){if(this.cursorId==null)throw new A2.MongoRuntimeError("Unexpected null cursor id. A cursor creating command should have set this");if(this.selectedServer==null)throw new A2.MongoRuntimeError("Unexpected null selectedServer. A cursor creating command should have set this");let F={...this.cursorOptions,session:this.cursorSession,batchSize:A},B=new r$1.GetMoreOperation(this.cursorNamespace,this.cursorId,this.selectedServer,F);return await LS.executeOperation(this.cursorClient,B,this.timeoutContext)}async cursorInit(){if(this.cursorOptions.timeoutMS!=null)this.timeoutContext??=new qF(Gq.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:this.cursorOptions.timeoutMS}),this);try{let A=await this._initialize(this.cursorSession);this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null;let F=A.response;this.selectedServer=A.server,this.cursorId=F.id,this.cursorNamespace=F.ns??this.namespace,this.documents=F,this.initialized=!0}catch(A){throw this.initialized=!0,await this.cleanup(void 0,A),A}if(this.isDead)await this.cleanup();return}async fetchBatch(){if(this.isClosed)return;if(this.isDead){await this.cleanup();return}if(this.cursorId==null){if(await this.cursorInit(),(this.documents?.length??0)!==0||this.isDead)return}let A=this.cursorOptions.batchSize||1000;try{let F=await this.getMore(A);this.cursorId=F.id,this.documents=F}catch(F){try{await this.cleanup(void 0,F)}catch(B){S6.squashError(B)}throw F}if(this.isDead)await this.cleanup()}async cleanup(A,F){this.abortListener?.[S6.kDispose](),this.isClosed=!0;let B=()=>{if(A!=null)return this.timeoutContext?.clear(),new qF(Gq.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:A}),this);else return this.timeoutContext?.refreshed()};try{if(!this.isKilled&&this.cursorId&&!this.cursorId.isZero()&&this.cursorNamespace&&this.selectedServer&&!this.cursorSession.hasEnded){this.isKilled=!0;let D=this.cursorId;this.cursorId=i8.Long.ZERO,await LS.executeOperation(this.cursorClient,new t$1.KillCursorsOperation(D,this.cursorNamespace,this.selectedServer,{session:this.cursorSession}),B())}}catch(D){S6.squashError(D)}finally{try{if(this.cursorSession?.owner===this)await this.cursorSession.endSession({error:F});if(!this.cursorSession?.inTransaction())NS.maybeClearPinnedConnection(this.cursorSession,{error:F})}finally{this.emitClose()}}}emitClose(){try{if(!this.hasEmittedClose&&((this.documents?.length??0)===0||this.isClosed))this.emit("close")}finally{this.hasEmittedClose=!0}}async transformDocument(A){if(this.transform==null)return A;try{let F=this.transform(A);if(F===null)throw new A2.MongoAPIError("Cursor returned a `null` document, but the cursor is not exhausted.  Mapping documents to `null` is not supported in the cursor transform.");return F}catch(F){try{await this.close()}catch(B){S6.squashError(B)}throw F}}throwIfInitialized(){if(this.initialized)throw new A2.MongoCursorInUseError}}jS.AbstractCursor=S$;S$.CLOSE="close";class MS extends IS.Readable{constructor(A){super({objectMode:!0,autoDestroy:!1,highWaterMark:1});this._readInProgress=!1,this._cursor=A}_read(A){if(!this._readInProgress)this._readInProgress=!0,this._readNext()}_destroy(A,F){this._cursor.close().then(()=>F(A),(B)=>F(B))}_readNext(){if(this._cursor.id===i8.Long.ZERO){this.push(null);return}this._cursor.next().then((A)=>{if(A==null)this.push(null);else if(this.destroyed)this._cursor.close().then(void 0,S6.squashError);else{if(this.push(A))return this._readNext();this._readInProgress=!1}},(A)=>{if(A.message.match(/server is closed/))return this._cursor.close().then(void 0,S6.squashError),this.push(null);if(A.message.match(/operation was interrupted/))return this.push(null);return this.destroy(A)}).catch((A)=>{this._readInProgress=!1,this.destroy(A)})}}o$1.configureResourceManagement(S$.prototype);class qF extends Gq.TimeoutContext{constructor(A,F){super();this.timeoutContext=A,this.owner=F}get serverSelectionTimeout(){return this.timeoutContext.serverSelectionTimeout}get connectionCheckoutTimeout(){return this.timeoutContext.connectionCheckoutTimeout}get clearServerSelectionTimeout(){return this.timeoutContext.clearServerSelectionTimeout}get timeoutForSocketWrite(){return this.timeoutContext.timeoutForSocketWrite}get timeoutForSocketRead(){return this.timeoutContext.timeoutForSocketRead}csotEnabled(){return this.timeoutContext.csotEnabled()}refresh(){if(typeof this.owner!=="symbol")return this.timeoutContext.refresh()}clear(){if(typeof this.owner!=="symbol")return this.timeoutContext.clear()}get maxTimeMS(){return this.timeoutContext.maxTimeMS}get timeoutMS(){return this.timeoutContext.csotEnabled()?this.timeoutContext.timeoutMS:null}refreshed(){return new qF(this.timeoutContext.refreshed(),this.owner)}addMaxTimeMSToCommand(A,F){this.timeoutContext.addMaxTimeMSToCommand(A,F)}getSocketTimeoutMS(){return this.timeoutContext.getSocketTimeoutMS()}}jS.CursorTimeoutContext=qF});var F7=z((OS)=>{Object.defineProperty(OS,"__esModule",{value:!0});OS.ExplainableCursor=OS.Explain=OS.ExplainVerbosity=void 0;OS.validateExplainTimeoutOptions=BJ1;OS.decorateWithExplain=DJ1;var AJ1=k2(),FJ1=s();OS.ExplainVerbosity=Object.freeze({queryPlanner:"queryPlanner",queryPlannerExtended:"queryPlannerExtended",executionStats:"executionStats",allPlansExecution:"allPlansExecution"});class f${constructor(A,F){if(typeof A==="boolean")this.verbosity=A?OS.ExplainVerbosity.allPlansExecution:OS.ExplainVerbosity.queryPlanner;else this.verbosity=A;this.maxTimeMS=F}static fromOptions({explain:A}={}){if(A==null)return;if(typeof A==="boolean"||typeof A==="string")return new f$(A);let{verbosity:F,maxTimeMS:B}=A;return new f$(F,B)}}OS.Explain=f$;function BJ1(A,F){let{maxTimeMS:B,timeoutMS:D}=A;if(D!=null&&(B!=null||F?.maxTimeMS!=null))throw new FJ1.MongoAPIError("Cannot use maxTimeMS with timeoutMS for explain commands.")}function DJ1(A,F){let{verbosity:B,maxTimeMS:D}=F,$={explain:A,verbosity:B};if(typeof D==="number")$.maxTimeMS=D;return $}class kS extends AJ1.AbstractCursor{resolveExplainTimeoutOptions(A,F){let B,D;if(A==null&&F==null)B=void 0,D=void 0;else if(A!=null&&F==null)B=typeof A!=="object"?A:("verbosity"in A)?A:void 0,D=typeof A==="object"&&"timeoutMS"in A?A:void 0;else B=A,D=F;return{timeout:D,explain:B}}}OS.ExplainableCursor=kS});var O0=z((_S)=>{Object.defineProperty(_S,"__esModule",{value:!0});_S.CommandOperation=void 0;var EJ1=s(),qq=F7(),YJ1=c6(),GJ1=KA(),_$=F1(),SS=P2(),n8=c1();class fS extends n8.AbstractOperation{constructor(A,F){super(F);this.options=F??{};let B=F?.dbName||F?.authdb;if(B)this.ns=new _$.MongoDBNamespace(B,"$cmd");else this.ns=A?A.s.namespace.withCollection("$cmd"):new _$.MongoDBNamespace("admin","$cmd");if(this.readConcern=YJ1.ReadConcern.fromOptions(F),this.writeConcern=SS.WriteConcern.fromOptions(F),this.hasAspect(n8.Aspect.EXPLAINABLE)){if(this.explain=qq.Explain.fromOptions(F),this.explain)qq.validateExplainTimeoutOptions(this.options,this.explain)}else if(F?.explain!=null)throw new EJ1.MongoInvalidArgumentError('Option "explain" is not supported on this command')}get canRetryWrite(){if(this.hasAspect(n8.Aspect.EXPLAINABLE))return this.explain==null;return super.canRetryWrite}async executeCommand(A,F,B,D,$){this.server=A;let J={...this.options,...this.bsonOptions,timeoutContext:D,readPreference:this.readPreference,session:F},X=_$.maxWireVersion(A),E=this.session&&this.session.inTransaction();if(this.readConcern&&_$.commandSupportsReadConcern(B)&&!E)Object.assign(B,{readConcern:this.readConcern});if(this.trySecondaryWrite&&X<GJ1.MIN_SECONDARY_WRITE_WIRE_VERSION)J.omitReadPreference=!0;if(this.writeConcern&&this.hasAspect(n8.Aspect.WRITE_OPERATION)&&!E)SS.WriteConcern.apply(B,this.writeConcern);if(J.collation&&typeof J.collation==="object"&&!this.hasAspect(n8.Aspect.SKIP_COLLATION))Object.assign(B,{collation:J.collation});if(typeof J.maxTimeMS==="number")B.maxTimeMS=J.maxTimeMS;if(this.hasAspect(n8.Aspect.EXPLAINABLE)&&this.explain)B=qq.decorateWithExplain(B,this.explain);return await A.command(this.ns,B,J,$)}}_S.CommandOperation=fS});var VG=z((gS)=>{Object.defineProperty(gS,"__esModule",{value:!0});gS.DeleteManyOperation=gS.DeleteOneOperation=gS.DeleteOperation=void 0;gS.makeDeleteStatement=Kq;var CF=s(),HJ1=O0(),e6=c1();class QF extends HJ1.CommandOperation{constructor(A,F,B){super(void 0,B);this.options=B,this.ns=A,this.statements=F}get commandName(){return"delete"}get canRetryWrite(){if(super.canRetryWrite===!1)return!1;return this.statements.every((A)=>A.limit!=null?A.limit>0:!0)}async execute(A,F,B){let D=this.options??{},$=typeof D.ordered==="boolean"?D.ordered:!0,J={delete:this.ns.collection,deletes:this.statements,ordered:$};if(D.let)J.let=D.let;if(D.comment!==void 0)J.comment=D.comment;if(this.writeConcern&&this.writeConcern.w===0){if(this.statements.find((Y)=>Y.hint))throw new CF.MongoCompatibilityError("hint is not supported with unacknowledged writes")}return await super.executeCommand(A,F,J,B)}}gS.DeleteOperation=QF;class Cq extends QF{constructor(A,F,B){super(A.s.namespace,[Kq(F,{...B,limit:1})],B)}async execute(A,F,B){let D=await super.execute(A,F,B);if(this.explain)return D;if(D.code)throw new CF.MongoServerError(D);if(D.writeErrors)throw new CF.MongoServerError(D.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:D.n}}}gS.DeleteOneOperation=Cq;class Qq extends QF{constructor(A,F,B){super(A.s.namespace,[Kq(F,B)],B)}async execute(A,F,B){let D=await super.execute(A,F,B);if(this.explain)return D;if(D.code)throw new CF.MongoServerError(D);if(D.writeErrors)throw new CF.MongoServerError(D.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:D.n}}}gS.DeleteManyOperation=Qq;function Kq(A,F){let B={q:A,limit:typeof F.limit==="number"?F.limit:0};if(F.collation)B.collation=F.collation;if(F.hint)B.hint=F.hint;return B}e6.defineAspects(QF,[e6.Aspect.RETRYABLE,e6.Aspect.WRITE_OPERATION]);e6.defineAspects(Cq,[e6.Aspect.RETRYABLE,e6.Aspect.WRITE_OPERATION,e6.Aspect.EXPLAINABLE,e6.Aspect.SKIP_COLLATION]);e6.defineAspects(Qq,[e6.Aspect.WRITE_OPERATION,e6.Aspect.EXPLAINABLE,e6.Aspect.SKIP_COLLATION])});var G8=z((cS)=>{Object.defineProperty(cS,"__esModule",{value:!0});cS.BulkOperationBase=cS.BulkWriteShimOperation=cS.FindOperators=cS.MongoBulkWriteError=cS.WriteError=cS.WriteConcernError=cS.BulkWriteResult=cS.Batch=cS.BatchType=void 0;cS.mergeBatchResults=zq;var hS=y1(),a0=s(),zF=VG(),vS=T2(),QJ1=EG(),KJ1=c1(),K7=QG(),s3=F1(),yS=P2();cS.BatchType=Object.freeze({INSERT:1,UPDATE:2,DELETE:3});class mS{constructor(A,F){this.originalZeroIndex=F,this.currentIndex=0,this.originalIndexes=[],this.batchType=A,this.operations=[],this.size=0,this.sizeBytes=0}}cS.Batch=mS;class L4{static generateIdMap(A){let F={};for(let B of A)F[B.index]=B._id;return F}constructor(A,F){this.result=A,this.insertedCount=this.result.nInserted??0,this.matchedCount=this.result.nMatched??0,this.modifiedCount=this.result.nModified??0,this.deletedCount=this.result.nRemoved??0,this.upsertedCount=this.result.upserted.length??0,this.upsertedIds=L4.generateIdMap(this.result.upserted),this.insertedIds=L4.generateIdMap(this.getSuccessfullyInsertedIds(A,F)),Object.defineProperty(this,"result",{value:this.result,enumerable:!1})}get ok(){return this.result.ok}getSuccessfullyInsertedIds(A,F){if(A.writeErrors.length===0)return A.insertedIds;if(F)return A.insertedIds.slice(0,A.writeErrors[0].index);return A.insertedIds.filter(({index:B})=>!A.writeErrors.some((D)=>B===D.index))}getUpsertedIdAt(A){return this.result.upserted[A]}getRawResponse(){return this.result}hasWriteErrors(){return this.result.writeErrors.length>0}getWriteErrorCount(){return this.result.writeErrors.length}getWriteErrorAt(A){return A<this.result.writeErrors.length?this.result.writeErrors[A]:void 0}getWriteErrors(){return this.result.writeErrors}getWriteConcernError(){if(this.result.writeConcernErrors.length===0)return;else if(this.result.writeConcernErrors.length===1)return this.result.writeConcernErrors[0];else{let A="";for(let F=0;F<this.result.writeConcernErrors.length;F++){let B=this.result.writeConcernErrors[F];if(A=A+B.errmsg,F===0)A=A+" and "}return new UF({errmsg:A,code:a0.MONGODB_ERROR_CODES.WriteConcernTimeout})}}toString(){return`BulkWriteResult(${hS.EJSON.stringify(this.result)})`}isOk(){return this.result.ok===1}}cS.BulkWriteResult=L4;class UF{constructor(A){this.serverError=A}get code(){return this.serverError.code}get errmsg(){return this.serverError.errmsg}get errInfo(){return this.serverError.errInfo}toJSON(){return this.serverError}toString(){return`WriteConcernError(${this.errmsg})`}}cS.WriteConcernError=UF;class x${constructor(A){this.err=A}get code(){return this.err.code}get index(){return this.err.index}get errmsg(){return this.err.errmsg}get errInfo(){return this.err.errInfo}getOperation(){return this.err.op}toJSON(){return{code:this.err.code,index:this.err.index,errmsg:this.err.errmsg,op:this.err.op}}toString(){return`WriteError(${JSON.stringify(this.toJSON())})`}}cS.WriteError=x$;function zq(A,F,B,D){if(B)D=B;else if(D&&D.result)D=D.result;if(D==null)return;if(D.ok===0&&F.ok===1){F.ok=0;let J={index:0,code:D.code||0,errmsg:D.message,errInfo:D.errInfo,op:A.operations[0]};F.writeErrors.push(new x$(J));return}else if(D.ok===0&&F.ok===0)return;if(lS(A)&&D.n)F.nInserted=F.nInserted+D.n;if(Zq(A)&&D.n)F.nRemoved=F.nRemoved+D.n;let $=0;if(Array.isArray(D.upserted)){$=D.upserted.length;for(let J=0;J<D.upserted.length;J++)F.upserted.push({index:D.upserted[J].index+A.originalZeroIndex,_id:D.upserted[J]._id})}else if(D.upserted)$=1,F.upserted.push({index:A.originalZeroIndex,_id:D.upserted});if(Uq(A)&&D.n){let J=D.nModified;if(F.nUpserted=F.nUpserted+$,F.nMatched=F.nMatched+(D.n-$),typeof J==="number")F.nModified=F.nModified+J;else F.nModified=0}if(Array.isArray(D.writeErrors))for(let J=0;J<D.writeErrors.length;J++){let X={index:A.originalIndexes[D.writeErrors[J].index],code:D.writeErrors[J].code,errmsg:D.writeErrors[J].errmsg,errInfo:D.writeErrors[J].errInfo,op:A.operations[D.writeErrors[J].index]};F.writeErrors.push(new x$(X))}if(D.writeConcernError)F.writeConcernErrors.push(new UF(D.writeConcernError))}async function zJ1(A,F){if(A.s.batches.length===0)return new L4(A.s.bulkResult,A.isOrdered);for(let D of A.s.batches){let $=s3.resolveOptions(A,{...F,ordered:A.isOrdered});if($.bypassDocumentValidation!==!0)delete $.bypassDocumentValidation;if(A.s.bypassDocumentValidation===!0)$.bypassDocumentValidation=!0;if(A.s.checkKeys===!1)$.checkKeys=!1;if($.retryWrites){if(Uq(D))$.retryWrites=$.retryWrites&&!D.operations.some((G)=>G.multi);if(Zq(D))$.retryWrites=$.retryWrites&&!D.operations.some((G)=>G.limit===0)}let J=lS(D)?new QJ1.InsertOperation(A.s.namespace,D.operations,$):Uq(D)?new K7.UpdateOperation(A.s.namespace,D.operations,$):Zq(D)?new zF.DeleteOperation(A.s.namespace,D.operations,$):null;if(J==null)throw new a0.MongoRuntimeError(`Unknown batchType: ${D.batchType}`);let X=null,E;try{E=await vS.executeOperation(A.s.collection.client,J,$.timeoutContext)}catch(G){X=G}if(X!=null)if(X instanceof a0.MongoWriteConcernError){zq(D,A.s.bulkResult,X,E);let G=new L4(A.s.bulkResult,A.isOrdered);throw new s8({message:X.result.writeConcernError.errmsg,code:X.result.writeConcernError.code},G)}else throw new s8(X,new L4(A.s.bulkResult,A.isOrdered));zq(D,A.s.bulkResult,X,E);let Y=new L4(A.s.bulkResult,A.isOrdered);A.handleWriteError(Y)}A.s.batches.length=0;let B=new L4(A.s.bulkResult,A.isOrdered);return A.handleWriteError(B),B}class s8 extends a0.MongoServerError{constructor(A,F){super(A);if(this.writeErrors=[],A instanceof UF)this.err=A;else if(!(A instanceof Error))this.message=A.message,this.code=A.code,this.writeErrors=A.writeErrors??[];this.result=F,Object.assign(this,A)}get name(){return"MongoBulkWriteError"}get insertedCount(){return this.result.insertedCount}get matchedCount(){return this.result.matchedCount}get modifiedCount(){return this.result.modifiedCount}get deletedCount(){return this.result.deletedCount}get upsertedCount(){return this.result.upsertedCount}get insertedIds(){return this.result.insertedIds}get upsertedIds(){return this.result.upsertedIds}}cS.MongoBulkWriteError=s8;class Vq{constructor(A){this.bulkOperation=A}update(A){let F=KF(this.bulkOperation);return this.bulkOperation.addToOperationsList(cS.BatchType.UPDATE,K7.makeUpdateStatement(F.selector,A,{...F,multi:!0}))}updateOne(A){if(!s3.hasAtomicOperators(A,this.bulkOperation.bsonOptions))throw new a0.MongoInvalidArgumentError("Update document requires atomic operators");let F=KF(this.bulkOperation);return this.bulkOperation.addToOperationsList(cS.BatchType.UPDATE,K7.makeUpdateStatement(F.selector,A,{...F,multi:!1}))}replaceOne(A){if(s3.hasAtomicOperators(A))throw new a0.MongoInvalidArgumentError("Replacement document must not use atomic operators");let F=KF(this.bulkOperation);return this.bulkOperation.addToOperationsList(cS.BatchType.UPDATE,K7.makeUpdateStatement(F.selector,A,{...F,multi:!1}))}deleteOne(){let A=KF(this.bulkOperation);return this.bulkOperation.addToOperationsList(cS.BatchType.DELETE,zF.makeDeleteStatement(A.selector,{...A,limit:1}))}delete(){let A=KF(this.bulkOperation);return this.bulkOperation.addToOperationsList(cS.BatchType.DELETE,zF.makeDeleteStatement(A.selector,{...A,limit:0}))}upsert(){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.upsert=!0,this}collation(A){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.collation=A,this}arrayFilters(A){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.arrayFilters=A,this}hint(A){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.hint=A,this}}cS.FindOperators=Vq;class wq extends KJ1.AbstractOperation{constructor(A,F){super(F);this.bulkOperation=A}get commandName(){return"bulkWrite"}async execute(A,F,B){if(this.options.session==null)this.options.session=F;return await zJ1(this.bulkOperation,{...this.options,timeoutContext:B})}}cS.BulkWriteShimOperation=wq;class dS{constructor(A,F,B){this.collection=A,this.isOrdered=B;let D=s3.getTopology(A);F=F==null?{}:F;let $=A.s.namespace,J=!1,X=void 0,E=D.lastHello(),Y=!!(D.s.options&&D.s.options.autoEncrypter),G=E&&E.maxBsonObjectSize?E.maxBsonObjectSize:16777216,H=Y?2097152:G,W=E&&E.maxWriteBatchSize?E.maxWriteBatchSize:1000,q=(W-1).toString(10).length+2,C=Object.assign({},F);C=s3.applyRetryableWrites(C,A.s.db);let Q={ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]};if(this.s={bulkResult:Q,currentBatch:void 0,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,currentInsertBatch:void 0,currentUpdateBatch:void 0,currentRemoveBatch:void 0,batches:[],writeConcern:yS.WriteConcern.fromOptions(F),maxBsonObjectSize:G,maxBatchSizeBytes:H,maxWriteBatchSize:W,maxKeySize:q,namespace:$,topology:D,options:C,bsonOptions:hS.resolveBSONOptions(F),currentOp:X,executed:J,collection:A,err:void 0,checkKeys:typeof F.checkKeys==="boolean"?F.checkKeys:!1},F.bypassDocumentValidation===!0)this.s.bypassDocumentValidation=!0}insert(A){return s3.maybeAddIdToDocuments(this.collection,A,{forceServerObjectId:this.shouldForceServerObjectId()}),this.addToOperationsList(cS.BatchType.INSERT,A)}find(A){if(!A)throw new a0.MongoInvalidArgumentError("Bulk find operation must specify a selector");return this.s.currentOp={selector:A},new Vq(this)}raw(A){if(A==null||typeof A!=="object")throw new a0.MongoInvalidArgumentError("Operation must be an object with an operation key");if("insertOne"in A){let F=this.shouldForceServerObjectId(),B=A.insertOne&&A.insertOne.document==null?A.insertOne:A.insertOne.document;return s3.maybeAddIdToDocuments(this.collection,B,{forceServerObjectId:F}),this.addToOperationsList(cS.BatchType.INSERT,B)}if("replaceOne"in A||"updateOne"in A||"updateMany"in A){if("replaceOne"in A){if("q"in A.replaceOne)throw new a0.MongoInvalidArgumentError("Raw operations are not allowed");let F=K7.makeUpdateStatement(A.replaceOne.filter,A.replaceOne.replacement,{...A.replaceOne,multi:!1});if(s3.hasAtomicOperators(F.u))throw new a0.MongoInvalidArgumentError("Replacement document must not use atomic operators");return this.addToOperationsList(cS.BatchType.UPDATE,F)}if("updateOne"in A){if("q"in A.updateOne)throw new a0.MongoInvalidArgumentError("Raw operations are not allowed");let F=K7.makeUpdateStatement(A.updateOne.filter,A.updateOne.update,{...A.updateOne,multi:!1});if(!s3.hasAtomicOperators(F.u,this.bsonOptions))throw new a0.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(cS.BatchType.UPDATE,F)}if("updateMany"in A){if("q"in A.updateMany)throw new a0.MongoInvalidArgumentError("Raw operations are not allowed");let F=K7.makeUpdateStatement(A.updateMany.filter,A.updateMany.update,{...A.updateMany,multi:!0});if(!s3.hasAtomicOperators(F.u,this.bsonOptions))throw new a0.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(cS.BatchType.UPDATE,F)}}if("deleteOne"in A){if("q"in A.deleteOne)throw new a0.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(cS.BatchType.DELETE,zF.makeDeleteStatement(A.deleteOne.filter,{...A.deleteOne,limit:1}))}if("deleteMany"in A){if("q"in A.deleteMany)throw new a0.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(cS.BatchType.DELETE,zF.makeDeleteStatement(A.deleteMany.filter,{...A.deleteMany,limit:0}))}throw new a0.MongoInvalidArgumentError("bulkWrite only supports insertOne, updateOne, updateMany, deleteOne, deleteMany")}get length(){return this.s.currentIndex}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get batches(){let A=[...this.s.batches];if(this.isOrdered){if(this.s.currentBatch)A.push(this.s.currentBatch)}else{if(this.s.currentInsertBatch)A.push(this.s.currentInsertBatch);if(this.s.currentUpdateBatch)A.push(this.s.currentUpdateBatch);if(this.s.currentRemoveBatch)A.push(this.s.currentRemoveBatch)}return A}async execute(A={}){if(this.s.executed)throw new a0.MongoBatchReExecutionError;let F=yS.WriteConcern.fromOptions(A);if(F)this.s.writeConcern=F;if(this.isOrdered){if(this.s.currentBatch)this.s.batches.push(this.s.currentBatch)}else{if(this.s.currentInsertBatch)this.s.batches.push(this.s.currentInsertBatch);if(this.s.currentUpdateBatch)this.s.batches.push(this.s.currentUpdateBatch);if(this.s.currentRemoveBatch)this.s.batches.push(this.s.currentRemoveBatch)}if(this.s.batches.length===0)throw new a0.MongoInvalidArgumentError("Invalid BulkOperation, Batch cannot be empty");this.s.executed=!0;let B={...this.s.options,...A},D=new wq(this,B);return await vS.executeOperation(this.s.collection.client,D,B.timeoutContext)}handleWriteError(A){if(this.s.bulkResult.writeErrors.length>0){let B=this.s.bulkResult.writeErrors[0].errmsg?this.s.bulkResult.writeErrors[0].errmsg:"write operation failed";throw new s8({message:B,code:this.s.bulkResult.writeErrors[0].code,writeErrors:this.s.bulkResult.writeErrors},A)}let F=A.getWriteConcernError();if(F)throw new s8(F,A)}shouldForceServerObjectId(){return this.s.options.forceServerObjectId===!0||this.s.collection.s.db.options?.forceServerObjectId===!0}}cS.BulkOperationBase=dS;function lS(A){return A.batchType===cS.BatchType.INSERT}function Uq(A){return A.batchType===cS.BatchType.UPDATE}function Zq(A){return A.batchType===cS.BatchType.DELETE}function KF(A){let{currentOp:F}=A.s;if(A.s.currentOp=void 0,!F)F={};return F}});var nS=z((iT1,iS)=>{var IJ1=G8().BulkWriteResult;iS.exports=IJ1});var ZF=z((sS,aS)=>{/*!
 * Connection states
 */var t2=aS.exports=sS=Object.create(null);t2[0]="disconnected";t2[1]="connected";t2[2]="connecting";t2[3]="disconnecting";t2[99]="uninitialized";t2.disconnected=0;t2.connected=1;t2.connecting=2;t2.disconnecting=3;t2.uninitialized=99});var A3=z((nT1,rS)=>{/*!
 * Centralize this so we can more easily work around issues with people
 * stubbing out `process.nextTick()` in tests using sinon:
 * https://github.com/sinonjs/lolex#automatically-incrementing-mocked-time
 * See gh-6074
 */var MJ1=typeof process!=="undefined"&&typeof process.nextTick==="function"?process.nextTick.bind(process):(A)=>setTimeout(A,0);rS.exports=function A(F){return MJ1(F)}});var eS=z((sT1,oS)=>{/*!
 * Module dependencies.
 */var jJ1=i("events").EventEmitter,TJ1=ZF(),tS=A3();function a1(A,F,B){if(B===void 0)B={};if(this.opts=B,this.name=A,this.collectionName=A,this.conn=F,this.queue=[],this.buffer=!F?._hasOpened,this.emitter=new jJ1,TJ1.connected===this.conn.readyState)this.onOpen()}a1.prototype.name;a1.prototype.collectionName;a1.prototype.conn;a1.prototype.onOpen=function(){this.buffer=!1,tS(()=>this.doQueue())};a1.prototype.onClose=function(){};a1.prototype.addQueue=function(A,F){return this.queue.push([A,F]),this};a1.prototype.removeQueue=function(A,F){let B=this.queue.findIndex((D)=>D[0]===A&&D[1]===F);if(B===-1)return!1;return this.queue.splice(B,1),!0};a1.prototype.doQueue=function(){for(let F of this.queue)if(typeof F[0]==="function")F[0].apply(this,F[1]);else this[F[0]].apply(this,F[1]);this.queue=[];let A=this;return tS(function(){A.emitter.emit("queue")}),this};a1.prototype.ensureIndex=function(){throw new Error("Collection#ensureIndex unimplemented by driver")};a1.prototype.createIndex=function(){throw new Error("Collection#createIndex unimplemented by driver")};a1.prototype.findAndModify=function(){throw new Error("Collection#findAndModify unimplemented by driver")};a1.prototype.findOneAndUpdate=function(){throw new Error("Collection#findOneAndUpdate unimplemented by driver")};a1.prototype.findOneAndDelete=function(){throw new Error("Collection#findOneAndDelete unimplemented by driver")};a1.prototype.findOneAndReplace=function(){throw new Error("Collection#findOneAndReplace unimplemented by driver")};a1.prototype.findOne=function(){throw new Error("Collection#findOne unimplemented by driver")};a1.prototype.find=function(){throw new Error("Collection#find unimplemented by driver")};a1.prototype.insert=function(){throw new Error("Collection#insert unimplemented by driver")};a1.prototype.insertOne=function(){throw new Error("Collection#insertOne unimplemented by driver")};a1.prototype.insertMany=function(){throw new Error("Collection#insertMany unimplemented by driver")};a1.prototype.save=function(){throw new Error("Collection#save unimplemented by driver")};a1.prototype.updateOne=function(){throw new Error("Collection#updateOne unimplemented by driver")};a1.prototype.updateMany=function(){throw new Error("Collection#updateMany unimplemented by driver")};a1.prototype.deleteOne=function(){throw new Error("Collection#deleteOne unimplemented by driver")};a1.prototype.deleteMany=function(){throw new Error("Collection#deleteMany unimplemented by driver")};a1.prototype.getIndexes=function(){throw new Error("Collection#getIndexes unimplemented by driver")};a1.prototype.watch=function(){throw new Error("Collection#watch unimplemented by driver")};/*!
 * ignore
 */a1.prototype._shouldBufferCommands=function A(){let F=this.opts;if(F.bufferCommands!=null)return F.bufferCommands;if(F&&F.schemaUserProvidedOptions!=null&&F.schemaUserProvidedOptions.bufferCommands!=null)return F.schemaUserProvidedOptions.bufferCommands;return this.conn._shouldBufferCommands()};/*!
 * ignore
 */a1.prototype._getBufferTimeoutMS=function A(){let F=this.conn,B=this.opts;if(B.bufferTimeoutMS!=null)return B.bufferTimeoutMS;if(B&&B.schemaUserProvidedOptions!=null&&B.schemaUserProvidedOptions.bufferTimeoutMS!=null)return B.schemaUserProvidedOptions.bufferTimeoutMS;return F._getBufferTimeoutMS()};/*!
 * Module exports.
 */oS.exports=a1});var T1=z((aT1,Af)=>{/*!
 * ignore
 */class Lq extends Error{}Object.defineProperty(Lq.prototype,"name",{value:"MongooseError"});Af.exports=Lq});var $1=z((kJ1)=>{kJ1.arrayAtomicsBackupSymbol=Symbol("mongoose#Array#atomicsBackup");kJ1.arrayAtomicsSymbol=Symbol("mongoose#Array#_atomics");kJ1.arrayParentSymbol=Symbol("mongoose#Array#_parent");kJ1.arrayPathSymbol=Symbol("mongoose#Array#_path");kJ1.arraySchemaSymbol=Symbol("mongoose#Array#_schema");kJ1.documentArrayParent=Symbol("mongoose#documentArrayParent");kJ1.documentIsSelected=Symbol("mongoose#Document#isSelected");kJ1.documentIsModified=Symbol("mongoose#Document#isModified");kJ1.documentModifiedPaths=Symbol("mongoose#Document#modifiedPaths");kJ1.documentSchemaSymbol=Symbol("mongoose#Document#schema");kJ1.getSymbol=Symbol("mongoose#Document#get");kJ1.modelSymbol=Symbol("mongoose#Model");kJ1.objectIdSymbol=Symbol("mongoose#ObjectId");kJ1.populateModelSymbol=Symbol("mongoose#PopulateOptions#Model");kJ1.schemaTypeSymbol=Symbol("mongoose#schemaType");kJ1.sessionNewDocuments=Symbol("mongoose#ClientSession#newDocuments");kJ1.scopeSymbol=Symbol("mongoose#Document#scope");kJ1.validatorErrorSymbol=Symbol("mongoose#validatorError")});var R4=z((tT1,Ff)=>{var VF=B6().ObjectId,sJ1=$1().objectIdSymbol;Object.defineProperty(VF.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}});/*!
 * Convenience `valueOf()` to allow comparing ObjectIds using double equals re: gh-7299
 */if(!VF.prototype.hasOwnProperty("valueOf"))VF.prototype.valueOf=function A(){return this.toString()};VF.prototype[sJ1]=!0;Ff.exports=VF});var o2=z((oT1,Bf)=>{Bf.exports=function A(F){if(F==null)return;if(typeof F.constructor!=="function")return;return F.constructor.name}});var I3=z((aJ1)=>{/*!
 * ignore
 */aJ1.internalToObjectOptions={transform:!1,virtuals:!1,getters:!1,_skipDepopulateTopLevel:!0,depopulate:!0,flattenDecimals:!1,useProjection:!1,versionKey:!0,flattenObjectIds:!1}});var g$=z((Ak1,Df)=>{Df.exports=B6().Decimal128});var z7=z((Fk1,$f)=>{$f.exports=new Set(["__proto__","constructor","prototype"])});var b$=z((tJ1)=>{tJ1.isMongooseArray=function(A){return Array.isArray(A)&&A.isMongooseArray}});var wF=z((Dk1,Jf)=>{var eJ1=b$().isMongooseArray;Jf.exports=function(A){return A!=null&&(eJ1(A)||A.$__!=null||A.isMongooseBuffer||A.$isMongooseMap)}});var Rq=z(($k1,Xf)=>{var AX1=/^function\s*([^\s(]+)/;Xf.exports=function(A){return A.name||(A.toString().trim().match(AX1)||[])[1]}});var Q2=z((Jk1,Ef)=>{function FX1(A,F){return A!=null&&A._bsontype===F}Ef.exports=FX1});var Z9=z((Xk1,Yf)=>{Yf.exports=function(A){return Buffer.isBuffer(A)||Object.prototype.toString.call(A)==="[object Object]"}});var a8=z((Ek1,Gf)=>{Gf.exports=function A(F){if(F==null||typeof F!=="object")return!1;let B=Object.getPrototypeOf(F);return!B||B.constructor.name==="Object"}});var r8=z((BX1)=>{var Hf=Symbol("mongoose#trustedSymbol");BX1.trustedSymbol=Hf;BX1.trusted=function A(F){if(F==null||typeof F!=="object")return F;return F[Hf]=!0,F}});var I0=z((Gk1,Wf)=>{var JX1=g$(),XX1=R4(),EX1=z7(),YX1=wF(),GX1=Rq(),Nq=Q2(),HX1=b$().isMongooseArray,WX1=Z9(),qX1=a8(),CX1=$1(),Pq=r8().trustedSymbol,QX1=B6();function Mq(A,F,B){if(A==null)return A;if(Nq(A,"Double"))return new QX1.Double(A.value);if(typeof A==="number"||typeof A==="string"||typeof A==="boolean"||typeof A==="bigint")return A;if(Array.isArray(A))return KX1(HX1(A)?A.__array:A,F);if(YX1(A)){if(F){if(F.retainDocuments&&A.$__!=null){let J=A.$clone();if(A.__index!=null)J.__index=A.__index;if(A.__parentArray!=null)J.__parentArray=A.__parentArray;return J.$__parent=A.$__parent,J}}if(qX1(A)&&A.$__!=null&&A._doc!=null)return A._doc;let $;if(F&&F.json&&typeof A.toJSON==="function")$=A.toJSON(F);else $=A.toObject(F);return $}let D=A.constructor;if(D)switch(GX1(D)){case"Object":return Iq(A,F,B);case"Date":return new D(+A);case"RegExp":return zX1(A);default:break}if(Nq(A,"ObjectId")){if(F&&F.flattenObjectIds)return A.toJSON();return new XX1(A.id)}if(Nq(A,"Decimal128")){if(F&&F.flattenDecimals)return A.toJSON();return JX1.fromString(A.toString())}if(!D&&WX1(A))return Iq(A,F,B);if(typeof A==="object"&&A[CX1.schemaTypeSymbol])return A.clone();if(F&&F.bson&&typeof A.toBSON==="function")return A;if(typeof A.valueOf==="function")return A.valueOf();return Iq(A,F,B)}Wf.exports=Mq;/*!
 * ignore
 */function Iq(A,F,B){let D=F&&F.minimize,$=F&&F.omitUndefined,J=F&&F._seen,X={},E;if(J&&J.has(A))return J.get(A);else if(J)J.set(A,X);if(Pq in A&&F?.copyTrustedSymbol!==!1)X[Pq]=A[Pq];let Y=Object.keys(A),G=Y.length;for(let H=0;H<G;++H){let W=Y[H];if(EX1.has(W))continue;let q=Mq(A[W],F,!1);if((D===!1||$)&&typeof q==="undefined")delete X[W];else if(D!==!0||typeof q!=="undefined")E||(E=!0),X[W]=q}return D&&!B?E&&X:X}function KX1(A,F){let B=0,D=A.length,$=new Array(D);for(B=0;B<D;++B)$[B]=Mq(A[B],F,!0);return $}function zX1(A){let F=new RegExp(A.source,A.flags);if(F.lastIndex!==A.lastIndex)F.lastIndex=A.lastIndex;return F}});var Qf=z((Hk1,Cf)=>{/*!
 * Module dependencies.
 */var y$=eS(),jq=T1(),Tq=C7().Collection,UX1=R4(),qf=o2(),ZX1=I3().internalToObjectOptions,VX1=i("stream"),kq=i("util"),wX1=Object.freeze({...ZX1,copyTrustedSymbol:!1});function M3(A,F,B){this.collection=null,this.Promise=B.Promise||Promise,this.modelName=B.modelName,delete B.modelName,this._closed=!1,y$.apply(this,arguments)}/*!
 * Inherit from abstract Collection.
 */Object.setPrototypeOf(M3.prototype,y$.prototype);M3.prototype.onOpen=function(){return this.collection=this.conn.db.collection(this.name),y$.prototype.onOpen.call(this),this.collection};M3.prototype.onClose=function(A){y$.prototype.onClose.call(this,A)};M3.prototype._getCollection=function A(){if(this.collection)return this.collection;if(this.conn.db!=null)return this.collection=this.conn.db.collection(this.name),this.collection;return null};/*!
 * ignore
 */var LF={watch:!0,find:!0,aggregate:!0};function LX1(A){M3.prototype[A]=function(){let F=this._getCollection(),B=Array.from(arguments),D=this,$=D&&D.conn&&D.conn.base&&D.conn.base.options&&D.conn.base.options.debug,J=D&&D.conn&&D.conn.options&&D.conn.options.debug,X=J==null?$:J,E=arguments[arguments.length-1],Y=new UX1;if(this.conn.$wasForceClosed){let W=new jq("Connection was force closed");if(B.length>0&&typeof B[B.length-1]==="function"){B[B.length-1](W);return}else throw W}let G=B,H=null;if(this._shouldBufferCommands()&&this.buffer){this.conn.emit("buffer",{_id:Y,modelName:D.modelName,collectionName:D.name,method:A,args:B});let W,q=B,C=null,Q=null;if(LF[A]&&typeof E==="function")this.addQueue(A,q),W=E;else if(LF[A])C=new this.Promise((U,Z)=>{W=function V(w,R){if(Q!=null)clearTimeout(Q);if(w!=null)return Z(w);U(R)},q=B.concat([W]),this.addQueue(A,q)});else if(typeof E==="function")W=function U(){if(Q!=null)clearTimeout(Q);return E.apply(this,arguments)},q=B.slice(0,B.length-1).concat([W]);else C=new Promise((U,Z)=>{W=function V(w,R){if(Q!=null)clearTimeout(Q);if(w!=null)return Z(w);U(R)},q=B.concat([W]),this.addQueue(A,q)});let K=this._getBufferTimeoutMS();if(Q=setTimeout(()=>{if(this.removeQueue(A,q)){let Z="Operation `"+this.name+"."+A+"()` buffering timed out after "+K+"ms",V=new jq(Z);this.conn.emit("buffer-end",{_id:Y,modelName:D.modelName,collectionName:D.name,method:A,error:V}),W(V)}},K),!LF[A]&&typeof E==="function"){this.addQueue(A,q);return}return C}else if(!LF[A]&&typeof E==="function")H=function W(q,C){if(q!=null)D.conn.emit("operation-end",{_id:Y,modelName:D.modelName,collectionName:D.name,method:A,error:q});else D.conn.emit("operation-end",{_id:Y,modelName:D.modelName,collectionName:D.name,method:A,result:C});return E.apply(this,arguments)},G=B.slice(0,B.length-1).concat([H]);if(X)if(typeof X==="function"){let W=null;if(typeof B[B.length-1]=="function")W=B.slice(0,B.length-1);else W=B;X.apply(D,[D.name,A].concat(W))}else if(X instanceof VX1.Writable)this.$printToStream(D.name,A,B,X);else{let W=X.color==null?!0:X.color,q=X.shell==null?!1:X.shell;this.$print(D.name,A,B,W,q)}this.conn.emit("operation-start",{_id:Y,modelName:D.modelName,collectionName:this.name,method:A,params:G});try{if(F==null){let q="Cannot call `"+this.name+"."+A+"()` before initial connection is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if you have `bufferCommands = false`.";throw new jq(q)}if(LF[A]&&typeof E==="function"){let q=F[A].apply(F,G.slice(0,G.length-1));return this.conn.emit("operation-end",{_id:Y,modelName:D.modelName,collectionName:this.name,method:A,result:q}),E.call(this,null,q)}let W=F[A].apply(F,G);if(W!=null&&typeof W.then==="function")return W.then((q)=>{if(typeof E==="function")E(null,q);else this.conn.emit("operation-end",{_id:Y,modelName:D.modelName,collectionName:this.name,method:A,result:q});return q},(q)=>{if(typeof E==="function"){E(q);return}else this.conn.emit("operation-end",{_id:Y,modelName:D.modelName,collectionName:this.name,method:A,error:q});throw q});return W}catch(W){if(typeof E==="function")return E(W);else throw this.conn.emit("operation-end",{_id:Y,modelName:D.modelName,collectionName:this.name,method:A,error:W}),W}}}for(let A of Object.getOwnPropertyNames(Tq.prototype)){if(Object.getOwnPropertyDescriptor(Tq.prototype,A).get!==void 0)continue;if(typeof Tq.prototype[A]!=="function")continue;LX1(A)}M3.prototype.$print=function(A,F,B,D,$){let J=D?"\x1B[0;36mMongoose:\x1B[0m ":"Mongoose: ",X=[A,F].join("."),E=[];for(let G=B.length-1;G>=0;--G)if(this.$format(B[G])||E.length)E.unshift(this.$format(B[G],D,$));let Y="("+E.join(", ")+")";console.info(J+X+Y)};M3.prototype.$printToStream=function(A,F,B,D){let $=[A,F].join("."),J=[];for(let E=B.length-1;E>=0;--E)if(this.$format(B[E])||J.length)J.unshift(this.$format(B[E]));let X="("+J.join(", ")+")";D.write($+X,"utf8")};M3.prototype.$format=function(A,F,B){let D=typeof A;if(D==="function"||D==="undefined")return"";return Oq(A,!1,F,B)};function t8(A){let F={inspect:function(){return A}};if(kq.inspect.custom)F[kq.inspect.custom]=F.inspect;return F}function RX1(A){return Oq(A,!0)}function NX1(A,F){A[F]=t8('ObjectId("'+A[F].toHexString()+'")')}function PX1(A,F,B){if(B)A[F]=t8('ISODate("'+A[F].toUTCString()+'")');else A[F]=t8('new Date("'+A[F].toUTCString()+'")')}function Oq(A,F,B,D){if(A&&typeof A.toBSON==="function")A=A.toBSON();if(A==null)return A;let $=I0(),J=F?A:$(A,wX1),X=qf(J);if(X==="Binary")J="BinData("+J.sub_type+', "'+J.toString("base64")+'")';else if(X==="ObjectId")J=t8('ObjectId("'+J.toHexString()+'")');else if(X==="Date")J=t8('new Date("'+J.toUTCString()+'")');else if(X==="Object"){let E=Object.keys(J),Y=E.length,G;for(let H=0;H<Y;++H)if(G=E[H],J[G]){let W;if(typeof J[G].toBSON==="function")try{J[G]=J[G].toBSON()}catch(C){W=C}let q=qf(J[G]);if(q==="Binary")J[G]="BinData("+J[G].sub_type+', "'+J[G].buffer.toString("base64")+'")';else if(q==="Object")J[G]=Oq(J[G],!0);else if(q==="ObjectId")NX1(J,G);else if(q==="Date")PX1(J,G,D);else if(q==="ClientSession")J[G]=t8('ClientSession("'+(J[G]&&J[G].id&&J[G].id.id&&J[G].id.id.buffer||"").toString("hex")+'")');else if(Array.isArray(J[G]))J[G]=J[G].map(RX1);else if(W!=null)throw W}}if(F)return J;return kq.inspect(J,!1,10,B).replace(/\n/g,"").replace(/\s{2,}/g," ")}M3.prototype.getIndexes=M3.prototype.indexInformation;/*!
 * Module exports.
 */Cf.exports=M3});var uq=z((Wk1,Uf)=>{/*!
 * Module dependencies.
 */var IX1=i("events").EventEmitter,RF=T1();/*!
 * ignore
 */var Kf=["close","change","end","error","resumeTokenChanged"];/*!
 * ignore
 */class zf extends IX1{constructor(A,F,B){super();if(this.driverChangeStream=null,this.closed=!1,this.bindedEvents=!1,this.pipeline=F,this.options=B,this.errored=!1,B&&B.hydrate&&!B.model)throw new Error("Cannot create change stream with `hydrate: true` unless calling `Model.watch()`");let D=null;if(this.$driverChangeStreamPromise=new Promise(($,J)=>{try{A((X,E)=>{if(X!=null)return this.errored=!0,this.emit("error",X),J(X);this.driverChangeStream=E,this.emit("ready"),$()})}catch(X){D=X,this.errored=!0,this.emit("error",X),J(X)}}),D!=null)throw D}_bindEvents(){if(this.bindedEvents)return;if(this.bindedEvents=!0,this.driverChangeStream==null){this.$driverChangeStreamPromise.then(()=>{this.driverChangeStream.on("close",()=>{this.closed=!0}),Kf.forEach((A)=>{this.driverChangeStream.on(A,(F)=>{if(F!=null&&F.fullDocument!=null&&this.options&&this.options.hydrate)F.fullDocument=this.options.model.hydrate(F.fullDocument);this.emit(A,F)})})},()=>{});return}this.driverChangeStream.on("close",()=>{this.closed=!0}),Kf.forEach((A)=>{this.driverChangeStream.on(A,(F)=>{if(F!=null&&F.fullDocument!=null&&this.options&&this.options.hydrate)F.fullDocument=this.options.model.hydrate(F.fullDocument);this.emit(A,F)})})}hasNext(A){if(this.errored)throw new RF("Cannot call hasNext() on errored ChangeStream");return this.driverChangeStream.hasNext(A)}next(A){if(this.errored)throw new RF("Cannot call next() on errored ChangeStream");if(this.options&&this.options.hydrate){if(A!=null){let B=A;A=(D,$)=>{if(D!=null)return B(D);if($.fullDocument!=null)$.fullDocument=this.options.model.hydrate($.fullDocument);return B(null,$)}}let F=this.driverChangeStream.next(A);if(F&&typeof F.then==="function")F=F.then((B)=>{if(B.fullDocument!=null)B.fullDocument=this.options.model.hydrate(B.fullDocument);return B});return F}return this.driverChangeStream.next(A)}addListener(A,F){if(this.errored)throw new RF("Cannot call addListener() on errored ChangeStream");return this._bindEvents(),super.addListener(A,F)}on(A,F){if(this.errored)throw new RF("Cannot call on() on errored ChangeStream");return this._bindEvents(),super.on(A,F)}once(A,F){if(this.errored)throw new RF("Cannot call once() on errored ChangeStream");return this._bindEvents(),super.once(A,F)}_queue(A){this.once("ready",()=>A())}close(){if(this.closed=!0,this.driverChangeStream)return this.driverChangeStream.close();else return this.$driverChangeStreamPromise.then(()=>this.driverChangeStream.close(),()=>{})}}/*!
 * ignore
 */Uf.exports=zf});var U7=z((qk1,wf)=>{function s1(){this._pres=new Map,this._posts=new Map}s1.skipWrappedFunction=function A(){if(!(this instanceof s1.skipWrappedFunction))return new s1.skipWrappedFunction(...arguments);this.args=[...arguments]};s1.overwriteResult=function A(){if(!(this instanceof s1.overwriteResult))return new s1.overwriteResult(...arguments);this.args=[...arguments]};s1.prototype.execPre=function(A,F,B,D){if(arguments.length===3)D=B,B=[];let $=this._pres.get(A)||[],J=$.length,X=$.numAsync||0,E=0,Y=X,G=!1,H=B,W=null;if(!J)return PF(function(){D(null)});function q(){if(E>=J)return;let Q=$[E];if(Q.isAsync){let K=[NF(C),NF(function(U){if(U){if(G)return;if(U instanceof s1.skipWrappedFunction)W=U;else return G=!0,D(U)}if(--Y===0&&E>=J)return D(W)})];h$(Q.fn,F,K,K[0])}else if(Q.fn.length>0){let K=[NF(C)],U=arguments.length>=2?arguments:[null].concat(H);for(let Z=1;Z<U.length;++Z){if(Z===U.length-1&&typeof U[Z]==="function")continue;K.push(U[Z])}h$(Q.fn,F,K,K[0])}else{let K=null;try{K=Q.fn.call(F)}catch(U){if(U!=null)return D(U)}if(v$(K))K.then(()=>C(),(U)=>C(U));else{if(++E>=J)if(Y>0)return;else return PF(function(){D(W)});q()}}}q.apply(null,[null].concat(B));function C(Q){if(Q){if(G)return;if(Q instanceof s1.skipWrappedFunction)W=Q;else return G=!0,D(Q)}if(++E>=J)if(Y>0)return;else return D(W);q.apply(F,arguments)}};s1.prototype.execPreSync=function(A,F,B){let D=this._pres.get(A)||[],$=D.length;for(let J=0;J<$;++J)D[J].fn.apply(F,B||[])};s1.prototype.execPost=function(A,F,B,D,$){if(arguments.length<5)$=D,D=null;let J=this._posts.get(A)||[],X=J.length,E=0,Y=null;if(D&&D.error)Y=D.error;if(!X)return PF(function(){$.apply(null,[Y].concat(B))});function G(){let H=J[E].fn,W=0,q=B.length,C=[];for(let Q=0;Q<q;++Q)if(W+=B[Q]&&B[Q]._kareemIgnore?0:1,!B[Q]||!B[Q]._kareemIgnore)C.push(B[Q]);if(Y)if(Vf(J[E],W)){let Q=NF(function(K){if(K){if(K instanceof s1.overwriteResult){if(B=K.args,++E>=X)return $.call(null,Y);return G()}Y=K}if(++E>=X)return $.call(null,Y);G()});h$(H,F,[Y].concat(C).concat([Q]),Q)}else{if(++E>=X)return $.call(null,Y);G()}else{let Q=NF(function(K){if(K){if(K instanceof s1.overwriteResult){if(B=K.args,++E>=X)return $.apply(null,[null].concat(B));return G()}return Y=K,G()}if(++E>=X)return $.apply(null,[null].concat(B));G()});if(Vf(J[E],W)){if(++E>=X)return $.apply(null,[null].concat(B));return G()}if(H.length===W+1)h$(H,F,C.concat([Q]),Q);else{let K,U;try{U=H.apply(F,C)}catch(Z){K=Z,Y=Z}if(v$(U))return U.then((Z)=>{Q(Z instanceof s1.overwriteResult?Z:null)},(Z)=>Q(Z));if(U instanceof s1.overwriteResult)B=U.args;if(++E>=X)return $.apply(null,[K].concat(B));G()}}}G()};s1.prototype.execPostSync=function(A,F,B){let D=this._posts.get(A)||[],$=D.length;for(let J=0;J<$;++J){let X=D[J].fn.apply(F,B||[]);if(X instanceof s1.overwriteResult)B=X.args}return B};s1.prototype.createWrapperSync=function(A,F){let B=this;return function D(){B.execPreSync(A,this,arguments);let $=F.apply(this,arguments);return B.execPostSync(A,this,[$])[0]}};function Zf(A,F,B,D,$,J,X){if(J.useErrorHandlers)return A.execPost(B,D,$,{error:F},function(E){return typeof X==="function"&&X(E)});else return typeof X==="function"&&X(F)}s1.prototype.wrap=function(A,F,B,D,$){let J=D.length>0?D[D.length-1]:null,X=Array.from(D);typeof J==="function"&&X.pop();let E=this;$=$||{};let Y=$.checkForPromise;this.execPre(A,B,D,function(G){if(G&&!(G instanceof s1.skipWrappedFunction)){let C=$.numCallbackParams||0,Q=$.contextParameter?[B]:[];for(let K=Q.length;K<C;++K)Q.push(null);return Zf(E,G,A,B,Q,$,J)}let H=F.length,W;if(G instanceof s1.skipWrappedFunction)return W=G.args[0],q(null,...G.args);else try{W=F.apply(B,X.concat(q))}catch(C){return q(C)}if(Y){if(v$(W))return W.then((C)=>q(null,C),(C)=>q(C));if(H<X.length+1)return q(null,W)}function q(){let C=Array.from(arguments);if(C.shift(),$.nullResultByDefault&&C.length===0)C.push(null);if(arguments[0])return Zf(E,arguments[0],A,B,C,$,J);else E.execPost(A,B,C,function(){if(J===null)return;arguments[0]?J(arguments[0]):J.apply(B,arguments)})}})};s1.prototype.filter=function(A){let F=this.clone(),B=Array.from(F._pres.keys());for(let $ of B){let J=this._pres.get($).map((X)=>Object.assign({},X,{name:$})).filter(A);if(J.length===0){F._pres.delete($);continue}J.numAsync=J.filter((X)=>X.isAsync).length,F._pres.set($,J)}let D=Array.from(F._posts.keys());for(let $ of D){let J=this._posts.get($).map((X)=>Object.assign({},X,{name:$})).filter(A);if(J.length===0){F._posts.delete($);continue}F._posts.set($,J)}return F};s1.prototype.hasHooks=function(A){return this._pres.has(A)||this._posts.has(A)};s1.prototype.createWrapper=function(A,F,B,D){let $=this;if(!this.hasHooks(A))return function(){PF(()=>F.apply(this,arguments))};return function(){let J=B||this;$.wrap(A,F,J,Array.from(arguments),D)}};s1.prototype.pre=function(A,F,B,D,$){let J={};if(typeof F==="object"&&F!==null)J=F,F=J.isAsync;else if(typeof arguments[1]!=="boolean")B=F,F=!1;let X=this._pres.get(A)||[];if(this._pres.set(A,X),F)X.numAsync=X.numAsync||0,++X.numAsync;if(typeof B!=="function")throw new Error('pre() requires a function, got "'+typeof B+'"');if($)X.unshift(Object.assign({},J,{fn:B,isAsync:F}));else X.push(Object.assign({},J,{fn:B,isAsync:F}));return this};s1.prototype.post=function(A,F,B,D){let $=this._posts.get(A)||[];if(typeof F==="function")D=!!B,B=F,F={};if(typeof B!=="function")throw new Error('post() requires a function, got "'+typeof B+'"');if(D)$.unshift(Object.assign({},F,{fn:B}));else $.push(Object.assign({},F,{fn:B}));return this._posts.set(A,$),this};s1.prototype.clone=function(){let A=new s1;for(let F of this._pres.keys()){let B=this._pres.get(F).slice();B.numAsync=this._pres.get(F).numAsync,A._pres.set(F,B)}for(let F of this._posts.keys())A._posts.set(F,this._posts.get(F).slice());return A};s1.prototype.merge=function(A,F){F=arguments.length===1?!0:F;let B=F?this.clone():this;for(let D of A._pres.keys()){let $=B._pres.get(D)||[],J=A._pres.get(D).filter((E)=>$.map((Y)=>Y.fn).indexOf(E.fn)===-1),X=$.concat(J);X.numAsync=$.numAsync||0,X.numAsync+=J.filter((E)=>E.isAsync).length,B._pres.set(D,X)}for(let D of A._posts.keys()){let $=B._posts.get(D)||[],J=A._posts.get(D).filter((X)=>$.indexOf(X)===-1);B._posts.set(D,$.concat(J))}return B};function h$(A,F,B,D){let $;try{$=A.apply(F,B)}catch(J){return D(J)}if(v$($))$.then(()=>D(),(J)=>D(J))}function v$(A){return typeof A==="object"&&A!==null&&typeof A.then==="function"}function NF(A){let F=!1,B=this;return function(){if(F)return;return F=!0,PF(()=>A.apply(B,arguments))}}var PF=typeof process==="object"&&process!==null&&process.nextTick||function A(F){setTimeout(F,0)};function Vf(A,F){if(A.errorHandler)return!0;return A.fn.length===F+2}wf.exports=s1});var Nf=z((Lf,Rf)=>{var f2=Rf.exports=Lf={};f2.DocumentNotFoundError=null;f2.general={};f2.general.default="Validator failed for path `{PATH}` with value `{VALUE}`";f2.general.required="Path `{PATH}` is required.";f2.Number={};f2.Number.min="Path `{PATH}` ({VALUE}) is less than minimum allowed value ({MIN}).";f2.Number.max="Path `{PATH}` ({VALUE}) is more than maximum allowed value ({MAX}).";f2.Number.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";f2.Date={};f2.Date.min="Path `{PATH}` ({VALUE}) is before minimum allowed value ({MIN}).";f2.Date.max="Path `{PATH}` ({VALUE}) is after maximum allowed value ({MAX}).";f2.String={};f2.String.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";f2.String.match="Path `{PATH}` is invalid ({VALUE}).";f2.String.minlength="Path `{PATH}` (`{VALUE}`) is shorter than the minimum allowed length ({MINLENGTH}).";f2.String.maxlength="Path `{PATH}` (`{VALUE}`) is longer than the maximum allowed length ({MAXLENGTH})."});var _2=z((Ck1,Mf)=>{/*!
 * Module dependencies.
 */var MX1=T1(),jX1=i("util");class _q extends MX1{constructor(A,F,B,D,$){if(arguments.length>0){let J=Pf(F),X=If($),E=Sq(null,A,F,B,X,J,D);super(E);this.init(A,F,B,D,$)}else super(Sq())}toJSON(){return{stringValue:this.stringValue,valueType:this.valueType,kind:this.kind,value:this.value,path:this.path,reason:this.reason,name:this.name,message:this.message}}init(A,F,B,D,$){/*!
   * ignore
   */this.stringValue=fq(F),this.messageFormat=If($),this.kind=A,this.value=F,this.path=B,this.reason=D,this.valueType=Pf(F)}copy(A){this.messageFormat=A.messageFormat,this.stringValue=A.stringValue,this.kind=A.kind,this.value=A.value,this.path=A.path,this.reason=A.reason,this.message=A.message,this.valueType=A.valueType}setModel(A){/*!
   * ignore
   */this.message=Sq(A,this.kind,this.value,this.path,this.messageFormat,this.valueType)}}Object.defineProperty(_q.prototype,"name",{value:"CastError"});function fq(A){let F=jX1.inspect(A);if(F=F.replace(/^'|'$/g,'"'),!F.startsWith('"'))F='"'+F+'"';return F}function Pf(A){if(A==null)return""+A;let F=typeof A;if(F!=="object")return F;if(typeof A.constructor!=="function")return F;return A.constructor.name}function If(A){let F=A&&A._castErrorMessage||null;if(typeof F==="string"||typeof F==="function")return F}/*!
 * ignore
 */function Sq(A,F,B,D,$,J,X){if(typeof $==="string"){let E=fq(B),Y=$.replace("{KIND}",F).replace("{VALUE}",E).replace("{PATH}",D);if(A!=null)Y=Y.replace("{MODEL}",A.modelName);return Y}else if(typeof $==="function")return $(B,D,A,F);else{let E=fq(B),Y=J?" (type "+J+")":"",G="Cast to "+F+" failed for value "+E+Y+' at path "'+D+'"';if(A!=null)G+=' for model "'+A.modelName+'"';if(X!=null&&typeof X.constructor==="function"&&X.constructor.name!=="AssertionError"&&X.constructor.name!=="Error")G+=' because of "'+X.constructor.name+'"';return G}}/*!
 * exports
 */Mf.exports=_q});var m$=z((Qk1,Tf)=>{/*!
 * Module dependencies.
 */var jf=T1(),TX1=i("util");class xq extends jf{constructor(A,F,B,D){let $,J=jf.messages;if(J.DocumentNotFoundError!=null)$=typeof J.DocumentNotFoundError==="function"?J.DocumentNotFoundError(A,F):J.DocumentNotFoundError;else $='No document found for query "'+TX1.inspect(A)+'" on model "'+F+'"';super($);this.result=D,this.numAffected=B,this.filter=A,this.query=A}}Object.defineProperty(xq.prototype,"name",{value:"DocumentNotFoundError"});/*!
 * exports
 */Tf.exports=xq});var gq=z((Kk1,kf)=>{/*!
 * ignore
 */kf.exports=function A(F){let B=Object.keys(F.errors||{}),D=B.length,$=[],J;for(let X=0;X<D;++X){if(J=B[X],F===F.errors[J])continue;$.push(J+": "+F.errors[J].message)}return $.join(", ")}});var V7=z((zk1,Sf)=>{/*!
 * Module requirements
 */var kX1=T1(),OX1=o2(),Of=i("util"),uf=gq();class Z7 extends kX1{constructor(A){let F;if(OX1(A)==="model")F=A.constructor.modelName+" validation failed";else F="Validation failed";super(F);if(this.errors={},this._message=F,A)A.$errors=this.errors}toString(){return this.name+": "+uf(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(A,F){if(F instanceof Z7){let{errors:B}=F;for(let D of Object.keys(B))this.addError(`${A}.${D}`,B[D]);return}this.errors[A]=F,this.message=this._message+": "+uf(this)}}if(Of.inspect.custom)Z7.prototype[Of.inspect.custom]=Z7.prototype.inspect;Object.defineProperty(Z7.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(Z7.prototype,"name",{value:"ValidationError"});/*!
 * Module exports
 */Sf.exports=Z7});var bq=z((Uk1,xf)=>{/*!
 * Module dependencies.
 */var ff=T1();class IF extends ff{constructor(A,F){let B=A.message;if(!B)B=ff.messages.general.default;let D=_f(B,A,F);super(D);A=Object.assign({},A,{message:D}),this.properties=A,this.kind=A.type,this.path=A.path,this.value=A.value,this.reason=A.reason}toString(){return this.message}toJSON(){return Object.assign({name:this.name,message:this.message},this)}}Object.defineProperty(IF.prototype,"name",{value:"ValidatorError"});Object.defineProperty(IF.prototype,"properties",{enumerable:!1,writable:!0,value:null});IF.prototype.formatMessage=_f;function _f(A,F,B){if(typeof A==="function")return A(F,B);let D=Object.keys(F);for(let $ of D){if($==="message")continue;A=A.replace("{"+$.toUpperCase()+"}",F[$])}return A}/*!
 * exports
 */xf.exports=IF});var hq=z((Zk1,gf)=>{/*!
 * Module dependencies.
 */var uX1=T1();class yq extends uX1{constructor(A,F,B){let D=B.join(", ");super('No matching document found for id "'+A._doc._id+'" version '+F+' modifiedPaths "'+D+'"');this.version=F,this.modifiedPaths=B}}Object.defineProperty(yq.prototype,"name",{value:"VersionError"});/*!
 * exports
 */gf.exports=yq});var mq=z((Vk1,bf)=>{/*!
 * Module dependencies.
 */var SX1=T1();class vq extends SX1{constructor(A){super("Can't save() the same doc multiple times in parallel. Document: "+A._doc._id)}}Object.defineProperty(vq.prototype,"name",{value:"ParallelSaveError"});/*!
 * exports
 */bf.exports=vq});var lq=z((wk1,yf)=>{/*!
 * Module dependencies.
 */var fX1=T1();class dq extends fX1{constructor(A){super("Cannot overwrite `"+A+"` model once compiled.")}}Object.defineProperty(dq.prototype,"name",{value:"OverwriteModelError"});/*!
 * exports
 */yf.exports=dq});var vf=z((Lk1,hf)=>{/*!
 * Module dependencies.
 */var _X1=T1();class cq extends _X1{constructor(A){let F=`Schema hasn't been registered for model "`+A+`".
Use mongoose.model(name, schema)`;super(F)}}Object.defineProperty(cq.prototype,"name",{value:"MissingSchemaError"});/*!
 * exports
 */hf.exports=cq});var iq=z((Rk1,mf)=>{/*!
 * Module dependencies.
 */var xX1=T1();class pq extends xX1{constructor(A,F,B){let D=B?.matchedCount??0,$=B?.insertedCount??0,J=F.map((E)=>E._id).join(", ");if(J.length>100)J=J.slice(0,100)+"...";let X=F.length-D-$;super(`${A}.bulkSave() was not able to update ${X} of the given documents due to incorrect version or optimistic concurrency, document ids: ${J}`);this.modelName=A,this.documents=F,this.bulkWriteResult=B,this.numDocumentsNotUpdated=X}}Object.defineProperty(pq.prototype,"name",{value:"MongooseBulkSaveIncompleteError"});/*!
 * exports
 */mf.exports=pq});var lf=z((Nk1,df)=>{var gX1=o2();df.exports=function A(F){if(gX1(F)!=="TopologyDescription")return!1;let B=Array.from(F.servers.values());return B.length>0&&B.every((D)=>D.type==="Unknown")}});var pf=z((Pk1,cf)=>{var bX1=o2();cf.exports=function A(F){if(bX1(F)!=="TopologyDescription")return!1;if(F.servers.size===0)return!1;for(let B of F.servers.values())if(B.host.endsWith(".mongodb.net")===!1||B.port!==27017)return!1;return!0}});var sf=z((Ik1,nf)=>{var yX1=o2(),hX1="Client network socket disconnected before secure TLS connection was established";nf.exports=function A(F){if(yX1(F)!=="TopologyDescription")return!1;let B=Array.from(F.servers.values());return B.length>0&&B.every((D)=>D.error&&D.error.message.indexOf(hX1)!==-1)}});var sq=z((Mk1,af)=>{/*!
 * Module dependencies.
 */var vX1=T1(),mX1=lf(),dX1=pf(),lX1=sf();/*!
 * ignore
 */var cX1="Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/",pX1="Mongoose is connecting with SSL enabled, but the server is not accepting SSL connections. Please ensure that the MongoDB server you are connecting to is configured to accept SSL connections. Learn more: https://mongoosejs.com/docs/tutorials/ssl.html";class nq extends vX1{assimilateError(A){let F=A.reason;if(dX1(F)&&mX1(F)&&A.message.indexOf("bad auth")===-1&&A.message.indexOf("Authentication failed")===-1)this.message=cX1;else if(lX1(F))this.message=pX1;else this.message=A.message;for(let D in A)if(D!=="name")this[D]=A[D];return this.cause=F,this}}Object.defineProperty(nq.prototype,"name",{value:"MongooseServerSelectionError"});af.exports=nq});var rq=z((jk1,rf)=>{/*!
 * Module dependencies.
 */var iX1=T1();class aq extends iX1{constructor(A){let F="For your own good, using `document.save()` to update an array which was selected using an $elemMatch projection OR populated using skip, limit, query conditions, or exclusion of the _id field when the operation results in a $pop or $set of the entire array is not supported. The following path(s) would have been modified unsafely:\n  "+A.join(`
  `)+`
Use Model.updateOne() to update these arrays instead.`;super(F)}}Object.defineProperty(aq.prototype,"name",{value:"DivergentArrayError"});/*!
 * exports
 */rf.exports=aq});var V9=z((Tk1,tf)=>{/*!
 * Module dependencies.
 */var nX1=T1();class tq extends nX1{constructor(A,F,B){F=F||"Field `"+A+"` is not in schema and strict mode is set to throw.";super(F);this.isImmutableError=!!B,this.path=A}}Object.defineProperty(tq.prototype,"name",{value:"StrictModeError"});tf.exports=tq});var eq=z((kk1,of)=>{/*!
 * Module dependencies.
 */var sX1=T1();class oq extends sX1{constructor(A,F){F=F||"Cannot populate path `"+A+"` because it is not in your schema. Set the `strictPopulate` option to false to override.";super(F);this.path=A}}Object.defineProperty(oq.prototype,"name",{value:"StrictPopulateError"});of.exports=oq});var G6=z((ef,A_)=>{var K2=T1();/*!
 * Module exports.
 */A_.exports=ef=K2;K2.messages=Nf();K2.Messages=K2.messages;K2.CastError=_2();K2.DocumentNotFoundError=m$();K2.ValidationError=V7();K2.ValidatorError=bq();K2.VersionError=hq();K2.ParallelSaveError=mq();K2.OverwriteModelError=lq();K2.MissingSchemaError=vf();K2.MongooseBulkSaveIncompleteError=iq();K2.MongooseServerSelectionError=sq();K2.DivergentArrayError=rq();K2.StrictModeError=V9();K2.StrictPopulateError=eq()});var F3=z((Ok1,F_)=>{F_.exports=Object.freeze({enumerable:!0,configurable:!0,writable:!0,value:void 0})});var f6=z((uk1,B_)=>{var aX1=I0();class x2{constructor(A){if(A==null)return this;Object.assign(this,aX1(A))}}var H6=F3();Object.defineProperty(x2.prototype,"type",H6);Object.defineProperty(x2.prototype,"validate",H6);Object.defineProperty(x2.prototype,"cast",H6);Object.defineProperty(x2.prototype,"required",H6);Object.defineProperty(x2.prototype,"default",H6);Object.defineProperty(x2.prototype,"ref",H6);Object.defineProperty(x2.prototype,"refPath",H6);Object.defineProperty(x2.prototype,"select",H6);Object.defineProperty(x2.prototype,"index",H6);Object.defineProperty(x2.prototype,"unique",H6);Object.defineProperty(x2.prototype,"immutable",H6);Object.defineProperty(x2.prototype,"sparse",H6);Object.defineProperty(x2.prototype,"text",H6);Object.defineProperty(x2.prototype,"transform",H6);B_.exports=x2});var d$=z((Sk1,o8)=>{var rX1=_2();o8.exports=function A(F,B){if(o8.exports.convertToTrue.has(F))return!0;if(o8.exports.convertToFalse.has(F))return!1;if(F==null)return F;throw new rX1("boolean",F,B)};o8.exports.convertToTrue=new Set([!0,"true",1,"1","yes"]);o8.exports.convertToFalse=new Set([!1,"false",0,"0","no"])});var l$=z((fk1,D_)=>{var tX1=d$();/*!
 * ignore
 */D_.exports=function(A){let F=this!=null?this.path:null;return tX1(A,F)}});var AC=z((_k1,$_)=>{/*!
 * ignore
 */$_.exports=function(A){if(Array.isArray(A)){if(!A.every((F)=>typeof F==="number"||typeof F==="string"))throw new Error("$type array values must be strings or numbers");return A}if(typeof A!=="number"&&typeof A!=="string")throw new Error("$type parameter must be number, string, or array of numbers and strings");return A}});var X_=z((xk1,J_)=>{var oX1=V9();/*!
 * ignore
 */J_.exports=function(A){if(A.$immutable)A.$immutableSetter=eX1(A.path,A.options.immutable),A.set(A.$immutableSetter);else if(A.$immutableSetter)A.setters=A.setters.filter((F)=>F!==A.$immutableSetter),delete A.$immutableSetter};function eX1(A,F){return function B(D,$,J,X){if(this==null||this.$__==null)return D;if(this.isNew)return D;if(X&&X.overwriteImmutable)return D;if(!(typeof F==="function"?F.call(this,this):F))return D;let Y=this.$__.priorDoc!=null?this.$__.priorDoc.$__getValue(A):this.$__getValue(A);if(this.$__.strictMode==="throw"&&D!==Y)throw new oX1(A,"Path `"+A+"` is immutable and strict mode is set to throw.",!0);return Y}}});var Y_=z((gk1,E_)=>{E_.exports=function A(F){return typeof F==="function"&&F.constructor&&F.constructor.name==="AsyncFunction"}});var H_=z((bk1,G_)=>{G_.exports=function A(F){let B=Object.keys(F),D=!0;for(let $=0,J=B.length;$<J;++$)if(typeof F[B[$]]==="object"&&F[B[$]]!==null){D=!1;break}return D}});var FC=z((yk1,W_)=>{var e8=1000,A5=e8*60,F5=A5*60,w7=F5*24,AE1=w7*7,FE1=w7*365.25;W_.exports=function(A,F){F=F||{};var B=typeof A;if(B==="string"&&A.length>0)return BE1(A);else if(B==="number"&&isFinite(A))return F.long?$E1(A):DE1(A);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(A))};function BE1(A){if(A=String(A),A.length>100)return;var F=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(A);if(!F)return;var B=parseFloat(F[1]),D=(F[2]||"ms").toLowerCase();switch(D){case"years":case"year":case"yrs":case"yr":case"y":return B*FE1;case"weeks":case"week":case"w":return B*AE1;case"days":case"day":case"d":return B*w7;case"hours":case"hour":case"hrs":case"hr":case"h":return B*F5;case"minutes":case"minute":case"mins":case"min":case"m":return B*A5;case"seconds":case"second":case"secs":case"sec":case"s":return B*e8;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return B;default:return}}function DE1(A){var F=Math.abs(A);if(F>=w7)return Math.round(A/w7)+"d";if(F>=F5)return Math.round(A/F5)+"h";if(F>=A5)return Math.round(A/A5)+"m";if(F>=e8)return Math.round(A/e8)+"s";return A+"ms"}function $E1(A){var F=Math.abs(A);if(F>=w7)return c$(A,F,w7,"day");if(F>=F5)return c$(A,F,F5,"hour");if(F>=A5)return c$(A,F,A5,"minute");if(F>=e8)return c$(A,F,e8,"second");return A+" ms"}function c$(A,F,B,D){var $=F>=B*1.5;return Math.round(A/B)+" "+D+($?"s":"")}});var C_=z((hk1,q_)=>{q_.exports=function A(F){let B=[],D="",$="DEFAULT";for(let J=0;J<F.length;++J){if($==="IN_SQUARE_BRACKETS"&&!/\d/.test(F[J])&&F[J]!=="]")$="DEFAULT",D=B[B.length-1]+"["+D,B.splice(B.length-1,1);if(F[J]==="["){if($!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")B.push(D),D="";$="IN_SQUARE_BRACKETS"}else if(F[J]==="]")if($==="IN_SQUARE_BRACKETS")$="IMMEDIATELY_AFTER_SQUARE_BRACKETS",B.push(D),D="";else $="DEFAULT",D+=F[J];else if(F[J]==="."){if($!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")B.push(D),D="";$="DEFAULT"}else D+=F[J]}if($!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")B.push(D);return B}});var Z_=z((JE1)=>{var MF=C_(),K_=["__proto__","constructor","prototype"];JE1.get=function(A,F,B,D){var $;if(typeof B=="function")if(B.length<2)D=B,B=void 0;else $=B,B=void 0;D||(D=U_);var J=typeof A=="string"?MF(A):A;if(!Array.isArray(J))throw new TypeError("Invalid `path`. Must be either string or array");var X=F,E;for(var Y=0;Y<J.length;++Y){if(E=J[Y],typeof J[Y]!=="string"&&typeof J[Y]!=="number")throw new TypeError("Each segment of path to `get()` must be a string or number, got "+typeof J[Y]);if(Array.isArray(X)&&!/^\d+$/.test(E)){var G=J.slice(Y);return[].concat(X).map(function(W){return W?JE1.get(G,W,B||$,D):D(void 0)})}if($)X=$(X,E);else{var H=B&&X[B]?X[B]:X;X=H instanceof Map?H.get(E):H[E]}if(!X)return D(X)}return D(X)};JE1.has=function(A,F){var B=typeof A==="string"?MF(A):A;if(!Array.isArray(B))throw new TypeError("Invalid `path`. Must be either string or array");var D=B.length,$=F;for(var J=0;J<D;++J){if(typeof B[J]!=="string"&&typeof B[J]!=="number")throw new TypeError("Each segment of path to `has()` must be a string or number, got "+typeof B[J]);if($==null||typeof $!=="object"||!(B[J]in $))return!1;$=$[B[J]]}return!0};JE1.unset=function(A,F){var B=typeof A==="string"?MF(A):A;if(!Array.isArray(B))throw new TypeError("Invalid `path`. Must be either string or array");var D=B.length,$=F;for(var J=0;J<D;++J){if($==null||typeof $!=="object"||!(B[J]in $))return!1;if(typeof B[J]!=="string"&&typeof B[J]!=="number")throw new TypeError("Each segment of path to `unset()` must be a string or number, got "+typeof B[J]);if(K_.indexOf(B[J])!==-1)return!1;if(J===D-1)return delete $[B[J]],!0;$=$ instanceof Map?$.get(B[J]):$[B[J]]}return!0};JE1.set=function(A,F,B,D,$,J){var X;if(typeof D=="function")if(D.length<2)$=D,D=void 0;else X=D,D=void 0;$||($=U_);var E=typeof A=="string"?MF(A):A;if(!Array.isArray(E))throw new TypeError("Invalid `path`. Must be either string or array");if(B==null)return;for(var Y=0;Y<E.length;++Y){if(typeof E[Y]!=="string"&&typeof E[Y]!=="number")throw new TypeError("Each segment of path to `set()` must be a string or number, got "+typeof E[Y]);if(K_.indexOf(E[Y])!==-1)return}var G=J||/\$/.test(A)&&J!==!1,H=B,W;for(var Y=0,q=E.length-1;Y<q;++Y){if(W=E[Y],W=="$")if(Y==q-1)break;else continue;if(Array.isArray(H)&&!/^\d+$/.test(W)){var C=E.slice(Y);if(!G&&Array.isArray(F))for(var Q=0;Q<H.length&&Q<F.length;++Q)JE1.set(C,F[Q],H[Q],D||X,$,G);else for(var Q=0;Q<H.length;++Q)JE1.set(C,F,H[Q],D||X,$,G);return}if(X)H=X(H,W);else{var K=D&&H[D]?H[D]:H;H=K instanceof Map?K.get(W):K[W]}if(!H)return}if(W=E[q],D&&H[D])H=H[D];if(Array.isArray(H)&&!/^\d+$/.test(W))if(!G&&Array.isArray(F))z_(H,F,W,X,D,$);else for(var Q=0;Q<H.length;++Q){var U=H[Q];if(U)if(X)X(U,W,$(F));else{if(U[D])U=U[D];U[W]=$(F)}}else if(X)X(H,W,$(F));else if(H instanceof Map)H.set(W,$(F));else H[W]=$(F)};/*!
 * Split a string path into components delimited by '.' or
 * '[\d+]'
 *
 * #### Example:
 *     stringToParts('foo[0].bar.1'); // ['foo', '0', 'bar', '1']
 */JE1.stringToParts=MF;/*!
 * Recursively set nested arrays
 */function z_(A,F,B,D,$,J){for(var X,E=0;E<A.length&&E<F.length;++E)if(X=A[E],Array.isArray(X)&&Array.isArray(F[E]))z_(X,F[E],B,D,$,J);else if(X)if(D)D(X,B,J(F[E]));else{if(X[$])X=X[$];X[B]=J(F[E])}}/*!
 * Returns the value passed to it.
 */function U_(A){return A}});var _6=z((V_,w_)=>{w_.exports=V_=Z_()});var DC=z((mk1,R_)=>{var GE1=I0();class L_{constructor(A){if(this._docs={},this._childDocs=[],A==null)return;if(A=GE1(A),Object.assign(this,A),typeof A.subPopulate==="object")this.populate=A.subPopulate;if(A.perDocumentLimit!=null&&A.limit!=null)throw new Error("Can not use `limit` and `perDocumentLimit` at the same time. Path: `"+A.path+"`.")}}R_.exports=L_});var N_=z((HE1)=>{HE1.isMongooseDocumentArray=function(A){return Array.isArray(A)&&A.isMongooseDocumentArray}});var p$=z((lk1,P_)=>{var qE1=A3(),B5=Symbol("mongoose#emitted");P_.exports=function A(F,B,D,$){if(typeof F==="function")try{return B(function(J){if(J!=null){if(D!=null&&D.listeners!=null&&D.listeners("error").length>0&&!J[B5])J[B5]=!0,D.emit("error",J);try{F(J)}catch(X){return qE1(()=>{throw X})}return}F.apply(this,arguments)})}catch(J){if(D!=null&&D.listeners!=null&&D.listeners("error").length>0&&!J[B5])J[B5]=!0,D.emit("error",J);return F(J)}return $=$||global.Promise,new $((J,X)=>{B(function(E,Y){if(E!=null){if(D!=null&&D.listeners!=null&&D.listeners("error").length>0&&!E[B5])E[B5]=!0,D.emit("error",E);return X(E)}if(arguments.length>2)return J(Array.prototype.slice.call(arguments,1));J(Y)})})}});var i$=z((ck1,I_)=>{I_.exports=function A(F,B,D){let $=Object.keys(B.tree),J={};for(let X of $){if(D&&(F.paths[X]||F.nested[X]||F.singleNestedPaths[X]))continue;J[X]=B.tree[X]}F.options._isMerging=!0,F.add(J,null),delete F.options._isMerging,F.callQueue=F.callQueue.concat(B.callQueue),F.method(B.methods),F.static(B.statics);for(let[X,E]of Object.entries(B._userProvidedOptions))if(!(X in F._userProvidedOptions))F.set(X,E);for(let X in B.query)F.query[X]=B.query[X];for(let X in B.virtuals)F.virtuals[X]=B.virtuals[X].clone();F._indexes=F._indexes.concat(B._indexes||[]),F.s.hooks.merge(B.s.hooks,!1)}});var T_=z((M_,j_)=>{/*!
 * Module dependencies.
 */var pk1=Q1(),B3=j_.exports=M_=function A(){};B3.ctor=function(){let A=[...arguments],F=function(){B3.apply(this,arguments),this.paths={},this.states={}};return F.prototype=new B3,F.prototype.constructor=F,F.prototype.stateNames=A,A.forEach(function(B){F.prototype[B]=function(D){this._changeState(D,B)}}),F};B3.prototype._changeState=function A(F,B){let D=this.paths[F];if(D===B)return;let $=this.states[D];if($)delete $[F];this.paths[F]=B,this.states[B]=this.states[B]||{},this.states[B][F]=!0};/*!
 * ignore
 */B3.prototype.clear=function A(F){if(this.states[F]==null)return;let B=Object.keys(this.states[F]),D=B.length,$;while(D--)$=B[D],delete this.states[F][$],delete this.paths[$]};/*!
 * ignore
 */B3.prototype.clearPath=function A(F){let B=this.paths[F];if(!B)return;delete this.paths[F],delete this.states[B][F]};B3.prototype.getStatePaths=function A(F){if(this.states[F]!=null)return this.states[F];return{}};B3.prototype.some=function A(){let F=this,B=arguments.length?arguments:this.stateNames;return Array.prototype.some.call(B,function(D){if(F.states[D]==null)return!1;return Object.keys(F.states[D]).length})};B3.prototype._iter=function A(F){return function(){let B=[...arguments],D=B.pop();if(!B.length)B=this.stateNames;let $=this;return B.reduce(function(X,E){if($.states[E]==null)return X;return X.concat(Object.keys($.states[E]))},[])[F](function(X,E,Y){return D(X,E,Y)})}};B3.prototype.forEach=function A(){return this.forEach=this._iter("forEach"),this.forEach.apply(this,arguments)};B3.prototype.map=function A(){return this.map=this._iter("map"),this.map.apply(this,arguments)};B3.prototype.clone=function A(){let F=new this.constructor;F.paths={...this.paths};for(let B of this.stateNames){if(!(B in this.states))continue;F.states[B]=this.states[B]==null?this.states[B]:{...this.states[B]}}return F}});var u_=z((k_,O_)=>{/*!
 * Dependencies
 */var CE1=T_(),QE1=CE1.ctor("require","modify","init","default","ignore");O_.exports=k_=S0;function S0(){this.activePaths=new QE1}S0.prototype.strictMode=!0;S0.prototype.fullPath=void 0;S0.prototype.selected=void 0;S0.prototype.shardval=void 0;S0.prototype.saveError=void 0;S0.prototype.validationError=void 0;S0.prototype.adhocPaths=void 0;S0.prototype.removing=void 0;S0.prototype.inserting=void 0;S0.prototype.saving=void 0;S0.prototype.version=void 0;S0.prototype._id=void 0;S0.prototype.ownerDocument=void 0;S0.prototype.populate=void 0;S0.prototype.populated=void 0;S0.prototype.primitiveAtomics=void 0;S0.prototype.wasPopulated=!1;S0.prototype.scope=void 0;S0.prototype.session=null;S0.prototype.pathsToScopes=null;S0.prototype.cachedRequired=null});var D5=z((ik1,__)=>{/*!
 * Module dependencies.
 */var $C=B6().Binary,KE1=B6().UUID,S_=Q1();function e2(A,F,B){let D=A;if(A==null)D=0;let $,J,X;if(Array.isArray(F))J=F[0],X=F[1];else $=F;let E;if(typeof D==="number"||D instanceof Number)E=Buffer.alloc(D);else E=Buffer.from(D,$,B);return S_.decorate(E,e2.mixin),E.isMongooseBuffer=!0,E[e2.pathSymbol]=J,E[f_]=X,E._subtype=0,E}var zE1=Symbol.for("mongoose#Buffer#_path"),f_=Symbol.for("mongoose#Buffer#_parent");e2.pathSymbol=zE1;/*!
 * Inherit from Buffer.
 */e2.mixin={_subtype:void 0,_markModified:function(){let A=this[f_];if(A)A.markModified(this[e2.pathSymbol]);return this},write:function(){let A=Buffer.prototype.write.apply(this,arguments);if(A>0)this._markModified();return A},copy:function(A){let F=Buffer.prototype.copy.apply(this,arguments);if(A&&A.isMongooseBuffer)A._markModified();return F}};/*!
 * Compile other Buffer methods marking this buffer as modified.
 */S_.each(["writeUInt8","writeUInt16","writeUInt32","writeInt8","writeInt16","writeInt32","writeFloat","writeDouble","fill","utf8Write","binaryWrite","asciiWrite","set","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE"],function(A){if(!Buffer.prototype[A])return;e2.mixin[A]=function(){let F=Buffer.prototype[A].apply(this,arguments);return this._markModified(),F}});e2.mixin.toObject=function(A){let F=typeof A==="number"?A:this._subtype||0;return new $C(Buffer.from(this),F)};e2.mixin.$toObject=e2.mixin.toObject;e2.mixin.toBSON=function(){return new $C(this,this._subtype||0)};e2.mixin.toUUID=function(){if(this._subtype!==4)throw new Error("Cannot convert a Buffer with subtype "+this._subtype+" to a UUID");return new KE1(this)};e2.mixin.equals=function(A){if(!Buffer.isBuffer(A))return!1;if(this.length!==A.length)return!1;for(let F=0;F<this.length;++F)if(this[F]!==A[F])return!1;return!0};e2.mixin.subtype=function(A){if(typeof A!=="number")throw new TypeError("Invalid subtype. Expected a number");if(this._subtype!==A)this._markModified();this._subtype=A};/*!
 * Module exports.
 */e2.Binary=$C;__.exports=e2});var L7=z((UE1)=>{UE1.schemaMixedSymbol=Symbol.for("mongoose:schema_mixed");UE1.builtInMiddleware=Symbol.for("mongoose:built-in-middleware")});var R7=z((sk1,x_)=>{/*!
 * Module dependencies.
 */var n$=n0(),wE1=L7(),LE1=Z9(),RE1=Q1();function j3(A,F){if(F&&F.default){let B=F.default;if(Array.isArray(B)&&B.length===0)F.default=Array;else if(!F.shared&&LE1(B)&&Object.keys(B).length===0)F.default=function(){return{}}}n$.call(this,A,F,"Mixed"),this[wE1.schemaMixedSymbol]=!0}j3.schemaName="Mixed";j3.defaultOptions={};/*!
 * Inherits from SchemaType.
 */j3.prototype=Object.create(n$.prototype);j3.prototype.constructor=j3;j3.get=n$.get;j3.set=n$.set;j3.setters=[];j3.prototype.cast=function(A){if(A instanceof Error)return RE1.errorToPOJO(A);return A};j3.prototype.castForQuery=function(A,F){return F};/*!
 * Module exports.
 */x_.exports=j3});var b_=z((ak1,g_)=>{g_.exports=class A{constructor(F,B,D){this.subdocSnapshot=F,this.activePaths=B,this.version=D}}});var s$=z((rk1,y_)=>{/*!
 * Module dependencies.
 */var NE1=T1();class JC extends NE1{constructor(A,F){let B=Array.isArray(F)?"array":"primitive value";super("Tried to set nested object field `"+A+`\` to ${B} \``+F+"`");this.path=A}}Object.defineProperty(JC.prototype,"name",{value:"ObjectExpectedError"});y_.exports=JC});var a$=z((tk1,h_)=>{/*!
 * Module dependencies.
 */var PE1=T1();class XC extends PE1{constructor(A,F,B){super('Parameter "'+F+'" to '+B+'() must be an object, got "'+A.toString()+'" (type '+typeof A+")")}}Object.defineProperty(XC.prototype,"name",{value:"ObjectParameterError"});h_.exports=XC});var m_=z((ok1,v_)=>{/*!
 * Module dependencies.
 */var IE1=T1();class EC extends IE1{constructor(A){super("Can't validate() the same doc multiple times in parallel. Document: "+A._doc._id)}}Object.defineProperty(EC.prototype,"name",{value:"ParallelValidateError"});/*!
 * exports
 */v_.exports=EC});var YC=z((ek1,d_)=>{d_.exports=function A(F){let B={},D=Object.keys(F);for(let $ of D){if($.indexOf(".")===-1){B[$]=1;continue}let J=$.split("."),X=J[0];for(let E=0;E<J.length;++E)if(B[X]=1,E+1<J.length)X=X+"."+J[E+1]}return B}});var c_=z((AO1,l_)=>{l_.exports=function A(F){if(F==null||typeof F!=="object")return!1;return F.$slice==null&&F.$elemMatch==null&&F.$meta==null&&F.$==null}});var r$=z((FO1,p_)=>{var ME1=c_();p_.exports=function A(F,B,D,$,J,X,E){let Y=Object.keys(F.$__schema.paths),G=Y.length,H=E&&E.skipParentChangeTracking;for(let W=0;W<G;++W){let q,C="",Q=Y[W];if(Q==="_id"&&F.$__.skipId)continue;let K=F.$__schema.paths[Q],U=K.splitPath(),Z=U.length;if(U[Z-1]==="$*")continue;let V=!1,w=F._doc;for(let R=0;R<Z;++R){if(w==null)break;let I=U[R];if(C+=(!C.length?"":".")+I,D===!0){if(C in B)break}else if(D===!1&&B&&!V){let j=K.$isSingleNested||K.$isMongooseDocumentArray;if(C in B&&!ME1(B[C])||R===Z-1&&j&&$!=null&&$[C])V=!0;else if($!=null&&!$[C])break}if(R===Z-1){if(w[I]!==void 0)break;if(J!=null){if(typeof K.defaultValue==="function"){if(!K.defaultValue.$runBeforeSetters&&J)break;if(K.defaultValue.$runBeforeSetters&&!J)break}else if(!J)continue}if(X&&X[C])break;if(B&&D!==null){if(D===!0){if(Q in B)continue;try{q=K.getDefault(F,!1)}catch(j){F.invalidate(Q,j);break}if(typeof q!=="undefined")w[I]=q,GC(F,Q,H)}else if(V){try{q=K.getDefault(F,!1)}catch(j){F.invalidate(Q,j);break}if(typeof q!=="undefined")w[I]=q,GC(F,Q,H)}}else{try{q=K.getDefault(F,!1)}catch(j){F.invalidate(Q,j);break}if(typeof q!=="undefined")w[I]=q,GC(F,Q,H)}}else w=w[I]}}};/*!
 * ignore
 */function GC(A,F,B){if(A.$__.activePaths.default(F),!B&&A.$isSubdocument&&A.$isSingleNested&&A.$parent()!=null)A.$parent().$__.activePaths.default(A.$__pathRelativeToParent(F))}});var t$=z((BO1,n_)=>{/*!
 * ignore
 */n_.exports=function A(F,B,D){D=D||{};let $=D.skipDocArrays,J=0;if(!F)return J;for(let X of Object.keys(F.$__.activePaths.getStatePaths("modify"))){if($){let E=F.$__schema.path(X);if(E&&E.$isMongooseDocumentArray)continue}if(X.startsWith(B+".")){if(F.$__.activePaths.clearPath(X),++J,F.$isSubdocument)i_(F,X)}}return J};function i_(A,F,B=new Set){if(B.has(A))throw new Error("Infinite subdocument loop: subdoc with _id "+A._id+" is a parent of itself");let D=A.$parent(),$=A.$__pathRelativeToParent(void 0,!1)+"."+F;if(D.$__.activePaths.clearPath($),D.$isSubdocument)i_(D,$,B)}});var e$=z((xE1)=>{var jE1=I0(),TE1=$1().documentSchemaSymbol,kE1=I3().internalToObjectOptions,OE1=Q1(),$5,uE1=$1().getSymbol,o$=$1().scopeSymbol,s_=OE1.isPOJO;/*!
 * exports
 */xE1.compile=a_;xE1.defineKey=r_;var SE1=Object.freeze({minimize:!0,virtuals:!1,getters:!1,transform:!1}),fE1=Object.freeze({noDottedPath:!0});function a_(A,F,B,D){$5=$5||D3();let $=D.typeKey;for(let J of Object.keys(A)){let X=A[J],Y=s_(X)&&Object.keys(X).length>0&&(!X[$]||$==="type"&&s_(X.type)&&X.type.type)?X:null;r_({prop:J,subprops:Y,prototype:F,prefix:B,options:D})}}function r_({prop:A,subprops:F,prototype:B,prefix:D,options:$}){$5=$5||D3();let J=(D?D+".":"")+A;D=D||"";let X=D?Object.freeze({}):fE1;if(F)Object.defineProperty(B,A,{enumerable:!0,configurable:!0,get:function(){let E=this;if(!this.$__.getters)this.$__.getters={};if(!this.$__.getters[J]){let Y=Object.create($5.prototype,_E1(this));if(!D)Y.$__[o$]=this;Y.$__.nestedPath=J,Object.defineProperty(Y,"schema",{enumerable:!1,configurable:!0,writable:!1,value:B.schema}),Object.defineProperty(Y,"$__schema",{enumerable:!1,configurable:!0,writable:!1,value:B.schema}),Object.defineProperty(Y,TE1,{enumerable:!1,configurable:!0,writable:!1,value:B.schema}),Object.defineProperty(Y,"toObject",{enumerable:!1,configurable:!0,writable:!1,value:function(){return jE1(E.get(J,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null}))}}),Object.defineProperty(Y,"$__get",{enumerable:!1,configurable:!0,writable:!1,value:function(){return E.get(J,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null})}}),Object.defineProperty(Y,"toJSON",{enumerable:!1,configurable:!0,writable:!1,value:function(){return E.get(J,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toJSON&&this.schema.options.toJSON.virtuals||null})}}),Object.defineProperty(Y,"$__isNested",{enumerable:!1,configurable:!0,writable:!1,value:!0}),Object.defineProperty(Y,"$isEmpty",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Object.keys(this.get(J,null,SE1)||{}).length===0}}),Object.defineProperty(Y,"$__parent",{enumerable:!1,configurable:!0,writable:!1,value:this}),a_(F,Y,J,$),this.$__.getters[J]=Y}return this.$__.getters[J]},set:function(E){if(E!=null&&E.$__isNested)E=E.$__get();else if(E instanceof $5&&!E.$__isNested)E=E.$toObject(kE1);(this.$__[o$]||this).$set(J,E)}});else Object.defineProperty(B,A,{enumerable:!0,configurable:!0,get:function(){return this[uE1].call(this.$__[o$]||this,J,null,X)},set:function(E){this.$set.call(this.$__[o$]||this,J,E)}})}function _E1(A){let F={};return Object.getOwnPropertyNames(A).forEach(function(B){if(["isNew","$__","$errors","errors","_doc","$locals","$op","__parentArray","__index","$isDocumentArrayElement"].indexOf(B)===-1)return;F[B]=Object.getOwnPropertyDescriptor(A,B),F[B].enumerable=!1}),F}});var o_=z(($O1,t_)=>{t_.exports=function A(F){if(F==null)return null;return Object.keys(F)[0]}});var J5=z((mE1)=>{/*!
 * Module dependencies.
 */var yE1=B6().Binary,e_=Q2(),Ax=wF(),hE1=G6(),vE1=i("util");mE1.flatten=Fx;mE1.modifiedPaths=Bx;/*!
 * ignore
 */function Fx(A,F,B,D){let $;if(A&&Ax(A)&&!Buffer.isBuffer(A))$=Object.keys(A.toObject({transform:!1,virtuals:!1})||{});else $=Object.keys(A||{});let J=$.length,X={};F=F?F+".":"";for(let E=0;E<J;++E){let Y=$[E],G=A[Y];X[F+Y]=G;let H=D&&D.path&&D.path(F+Y),W=D&&D.nested&&D.nested[F+Y];if(H&&H.instance==="Mixed")continue;if(Dx(G)){if(B&&B.skipArrays&&Array.isArray(G))continue;let q=Fx(G,F+Y,B,D);for(let C in q)X[C]=q[C];if(Array.isArray(G))X[F+Y]=G}if(W){let q=Object.keys(D.paths);for(let C of q)if(C.startsWith(F+Y+".")&&!X.hasOwnProperty(C))X[C]=void 0}}return X}/*!
 * ignore
 */function Bx(A,F,B,D=null){if(A==null||typeof A!=="object")return;if(D==null)D={raw:{update:A,path:F},trace:new WeakSet};if(D.trace.has(A))throw new hE1(`a circular reference in the update value, updateValue:
${vE1.inspect(D.raw.update,{showHidden:!1,depth:1})}
updatePath: '${D.raw.path}'`);D.trace.add(A);let $=Object.keys(A||{}),J=$.length;B=B||{},F=F?F+".":"";for(let X=0;X<J;++X){let E=$[X],Y=A[E],G=F+E;if(B[G]=!0,!Buffer.isBuffer(Y)&&Ax(Y))Y=Y.toObject({transform:!1,virtuals:!1});if(Dx(Y))Bx(Y,F+E,B,D)}return D.trace.delete(A),B}/*!
 * ignore
 */function Dx(A){return A&&typeof A==="object"&&!(A instanceof Date)&&!e_(A,"ObjectId")&&(!Array.isArray(A)||A.length!==0)&&!(A instanceof Buffer)&&!e_(A,"Decimal128")&&!(A instanceof yE1)}});var f0=z((XO1,$x)=>{$x.exports=function A(F,B,D){let $,J=!1;if(typeof B==="string"){if(B.indexOf(".")===-1){let Y=HC(F,B);if(Y==null)return D;return Y}$=B.split(".")}else if(J=!0,$=B,$.length===1){let Y=HC(F,$[0]);if(Y==null)return D;return Y}let X=B,E=F;for(let Y of $){if(E==null)return D;if(!J&&E[X]!=null)return E[X];if(E=HC(E,Y),!J)X=X.substr(Y.length+1)}return E==null?D:E};function HC(A,F){if(A==null)return A;if(A instanceof Map)return A.get(F);return A[F]}});var WC=z((EO1,Xx)=>{var Jx=Q2();Xx.exports=function A(F,B){if(typeof F==="string"&&typeof B==="string")return F===B;if(typeof F==="number"&&typeof B==="number")return F===B;if(Jx(F,"ObjectId")&&Jx(B,"ObjectId"))return F.toString()===B.toString();return!1}});var AJ=z((YO1,Ex)=>{var cE1=WC();Ex.exports=function A(F,B){if(F==null||F.discriminators==null)return null;for(let D of Object.keys(F.discriminators)){let $=F.discriminators[D];if($.discriminatorMapping==null)continue;if(cE1($.discriminatorMapping.value,B))return $}return null}});var Gx=z((GO1,Yx)=>{var pE1=f0(),iE1=AJ();Yx.exports=function A(F,B,D){D=D||{};let $=D.typeOnly,J=Array.isArray(B)?B:B.indexOf(".")===-1?[B]:B.split("."),X=null,E="adhocOrUndefined",Y=iE1(F.schema,F.get(F.schema.options.discriminatorKey))||F.schema;for(let G=0;G<J.length;++G){let H=J.slice(0,G+1).join(".");if(X=Y.path(H),X==null){E="adhocOrUndefined";continue}if(X.instance==="Mixed")return $?"real":X;if(E=Y.pathType(H),(X.$isSingleNested||X.$isMongooseDocumentArrayElement)&&X.schema.discriminators!=null){let W=X.schema.discriminators,q=F.get(H+"."+pE1(X,"schema.options.discriminatorKey"));if(q==null||W[q]==null)continue;let C=J.slice(G+1).join(".");return A(F.get(H),C,D)}}return $?E:X}});var Wx=z((HO1,Hx)=>{var nE1=f0();Hx.exports=function A(F,B,D){let $=D!=null?Object.keys(nE1(F.tree,D,{})):Object.keys(F.tree),J=new Set(Object.keys(B)),X;if(J.size>1){X=new Set;for(let E of $)if(J.has(E))X.add(E);for(let E of J)if(!X.has(E))X.add(E);X=Array.from(X)}else X=Array.from(J);return X}});var Cx=z((WO1,qx)=>{qx.exports=function A(F,B){if(B.length===1)return;let D=B[0],$=void 0;for(let J=0;J<B.length-1;++J){let X=F.path(D);if(X&&X.schema)$=X.schema.options.strict,F=X.schema,D=X.$isMongooseDocumentArray&&!isNaN(B[J+1])?"":B[J+1];else D+=D.length?"."+B[J+1]:B[J+1]}return $}});var FJ=z((qO1,Qx)=>{var sE1=Q1(),aE1=new Set(["__index","__parentArray","_doc"]);Qx.exports=function A(F,B){if(sE1.isPOJO(F)&&F.$__!=null&&F._doc!=null){if(B){let D={};for(let $ of Object.keys(F)){if(typeof $==="symbol")continue;if($[0]==="$")continue;if(aE1.has($))continue;D[$]=F[$]}return{...F._doc,...D}}return F._doc}return F}});var X5=z((CO1,Kx)=>{/*!
 * ignore
 */Kx.exports=function A(F){if(F==null)return!0;if(typeof F==="object")return!("$meta"in F)&&!("$slice"in F);return!0}});var E5=z((QO1,zx)=>{var rE1=X5(),tE1=a8();/*!
 * ignore
 */zx.exports=function A(F){if(F==null)return null;let B=Object.keys(F),D=null;if(B.length===1&&B[0]==="_id")D=!F._id;else for(let $=0;$<B.length;++$){let J=B[$];if(J!=="_id"&&rE1(F[J])){if(D=tE1(F[J])?A(F[J])??D:!F[J],D!=null)break}}return D}});var qC=z((KO1,Ux)=>{var oE1=X5();Ux.exports=function A(F,B){if(F==null)return!1;if(B==="_id")return F._id===0;let D=Object.keys(F),$=null;for(let J of D)if(oE1(F[J])){$=F[B]===1?"inclusive":"exclusive";break}if($==="inclusive")return F[B]!==1;if($==="exclusive")return F[B]===0;return!1}});var CC=z((zO1,Zx)=>{var eE1=Q1();Zx.exports=function A(F,B){if(F._doc._id==null||B==null||B.length===0)return;let D=String(F._doc._id);for(let $ of B){if($.isVirtual)continue;let X=$.path.split(".");for(let E=0;E<X.length-1;++E){let Y=X.slice(0,E+1).join("."),G=X.slice(E+1).join("."),H=F.get(Y);if(H==null)continue;if(eE1.isMongooseDocumentArray(H)){for(let W=0;W<H.length;++W)if(H[W])H[W].populated(G,$._docs[D]==null?void 0:$._docs[D][W],$);break}}}}});var QC=z((UO1,wx)=>{var{isPOJO:AY1}=Q1();wx.exports=Vx;function Vx(A){let F=Object.keys(A),B=F.length,D,$,J;while(B--){if($=F[B],J=A[$],AY1(J))A[$]=Vx(J);if(A[$]===void 0){delete A[$];continue}D=!0}return D?A:void 0}});var KC=z((ZO1,Lx)=>{var FY1=/\./g;Lx.exports=function A(F){if(F.indexOf(".")===-1)return[F];let B=F.split(FY1),D=B.length,$=new Array(D),J="";for(let X=0;X<D;++X)J+=J.length!==0?"."+B[X]:B[X],$[X]=J;return $}});var Nx=z((VO1,Rx)=>{Rx.exports=function A(F,B,D,$,J){let X=Object.keys(F).reduce((Y,G)=>Y||G.startsWith(B+"."),!1),E=B+"."+D.options.discriminatorKey;if(!X&&J.length===1&&J[0]===E)$.splice($.indexOf(E),1)}});var $3=z((wO1,Px)=>{var BY1=WC();Px.exports=function A(F,B){if(F==null)return null;for(let D of Object.keys(F)){let $=F[D];if($.schema&&$.schema.discriminatorMapping&&BY1($.schema.discriminatorMapping.value,B))return $}return null}});var BJ=z((LO1,Ix)=>{/*!
 * ignore
 */Ix.exports=function A(F,B){let D=B.split("."),$="",J,X,E;for(let Y=0;Y<D.length;++Y)if($+=$.length?".":""+D[Y],F[$]){X=Object.keys(F),E=X.length;for(J=0;J<E;++J)if(X[Y].indexOf($+".")===0&&X[Y].indexOf(B)!==0)continue;return!0}return!1}});var jF=z((GY1)=>{/*!
 * Module dependencies
 */var Mx=DC(),DY1=Nx(),jx=f0(),$Y1=$3(),JY1=X5(),XY1=I0(),EY1=BJ();GY1.preparePopulationOptionsMQ=function A(F,B){let D=F._mongooseOptions.populate,$=Object.keys(D).reduce((E,Y)=>E.concat([D[Y]]),[]);if(B.lean!=null)$.filter((E)=>(E&&E.options&&E.options.lean)==null).forEach(YY1(B.lean));let J=F&&F.options&&F.options.session||null;if(J!=null)$.forEach((E)=>{if(E.options==null){E.options={session:J};return}if(!("session"in E.options))E.options.session=J});let X=F._fieldsForExec();for(let E=0;E<$.length;++E)if($[E]instanceof Mx)$[E]=new Mx({...$[E],_queryProjection:X,_localModel:F.model});else $[E]._queryProjection=X,$[E]._localModel=F.model;return $};GY1.createModel=function A(F,B,D,$,J){F.hooks.execPreSync("createModel",B);let X=F.schema?F.schema.discriminatorMapping:null,E=X&&X.isRoot?X.key:null,Y=B[E];if(E&&Y&&F.discriminators){let H=F.discriminators[Y]||$Y1(F.discriminators,Y);if(H){let W=XY1($);return GY1.applyPaths(W,H.schema),new H(void 0,W,!0)}}let G={skipId:!0,isNew:!1,willInit:!0};if(J!=null&&"defaults"in J)G.defaults=J.defaults;return new F(void 0,D,G)};/*!
 * ignore
 */GY1.createModelAndInit=function A(F,B,D,$,J,X,E){let Y=X?{populated:X}:void 0,G=GY1.createModel(F,B,D,$,J);try{G.$init(B,Y,E)}catch(H){E(H,G)}};/*!
 * ignore
 */GY1.applyPaths=function A(F,B,D){let $,J,X=new Set;if(F){J=Object.keys(F);let q=[];for(let C=0;C<J.length;++C){let Q=J[C];if(J[C][0]!=="-")continue;if(delete F[Q],Q==="-_id")F._id=0;else q.push(Q.slice(1))}J=Object.keys(F);for(let C=0;C<J.length;++C){if(J[C][0]==="+")continue;let Q=F[J[C]];if(!JY1(Q))continue;if(J[C]==="_id"&&J.length>1)continue;if(J[C]===B.options.discriminatorKey&&J.length>1&&Q!=null&&!Q)continue;$=!Q;break}for(let C of q){let Q=B.path(C);if(!Q||!Q.selected||$!==!1)F[C]=0,$=!0;else if(Q&&Q.selected&&$===!1)X.add(C)}}let E=[],Y=[],G=[];switch(H(B),$){case!0:for(let q of Y)F[q]=0;break;case!1:if(B&&B.paths._id&&B.paths._id.options&&B.paths._id.options.select===!1)F._id=0;for(let q of E){if(X.has(q))continue;if(EY1(F,q))continue;F[q]=F[q]||1}break;case void 0:if(F==null)break;for(let q of Object.keys(F||{}))if(q.startsWith("+"))delete F[q];for(let q of Y){if(F[q]!=null)continue;F[q]=0}break}function H(q,C){if(C||(C=""),G.indexOf(q)!==-1)return[];G.push(q);let Q=[];return q.eachPath(function(K,U){if(C)K=C+"."+K;if(U.$isSchemaMap||K.endsWith(".$*")){let V="+"+K,w=F&&V in F;if(U.options&&U.options.select===!1&&!w)Y.push(K);return}let Z=W(K,U);if(Z==null&&!Array.isArray(U)&&U.$isMongooseArray&&!U.$isMongooseDocumentArray)Z=W(K,U.caster);if(Z!=null)Q.push(Z);if(U.schema){let V=H(U.schema,K);if($===!1)DY1(F,K,U.schema,E,V)}}),G.pop(),Q}function W(q,C){if(F==null)return;if(typeof C.selected!=="boolean")return;if(C.selected===!1&&F[q]){if(D)F[q]=0;return}if(!$&&C.selected&&q===B.options.discriminatorKey&&F[q]!=null&&!F[q]){delete F[q];return}if($===!1&&C.selected&&F[q]!=null&&!F[q]){delete F[q];return}let Q="+"+q;if(F&&Q in F){if(delete F[Q],$===!1&&J.length>1&&!~J.indexOf(q)&&!D)F[q]=1;else if($==null&&D&&C.selected===!1)F[q]=0;return}let U=q.split("."),Z="";for(let V=0;V<U.length;++V)if(Z+=Z.length?"."+U[V]:U[V],Y.indexOf(Z)!==-1)return;if(!$&&(C&&C.options&&C.options.$skipDiscriminatorCheck||!1)){let V="";for(let w=0;w<U.length;++w){V+=(V.length===0?"":".")+U[w];let R=jx(F,V,!1)||jx(F,V+".$",!1);if(R&&typeof R!=="object")return}}return(C.selected?E:Y).push(q),q}};function YY1(A){return function(F){if(F.options||(F.options={}),A!=null&&Array.isArray(A.virtuals))A=Object.assign({},A),A.virtuals=A.virtuals.filter((B)=>typeof B==="string"&&B.startsWith(F.path+".")).map((B)=>B.slice(F.path.length+1));F.options.lean=A}}});var zC=z((NO1,kx)=>{function CY1(A){return!!A&&(typeof A==="object"||typeof A==="function")&&typeof A.then==="function"}kx.exports=CY1});var ux=z((PO1,Ox)=>{Ox.exports=function A(F,B,D){let $=B[0],J=D,X=F;for(let E=0;E<B.length-1;++E){let Y=J.path($);if(Y&&Y.schema){let G=X.get($);if(J=Y.schema,$=B[E+1],Array.isArray(G)&&!isNaN($))G=G[$],$="";if(G==null)break;X=G}else $+=$.length?"."+B[E+1]:B[E+1]}return X}});var DJ=z((IO1,fx)=>{var N4=D3(),QY1=A3(),KY1=I3().internalToObjectOptions,Sx=i("util"),zY1=Q1();fx.exports=A0;function A0(A,F,B,D,$){if(typeof D==="object"&&D!=null&&$==null)$=D,D=void 0;if(B!=null){let J={isNew:B.isNew};if("defaults"in B.$__)J.defaults=B.$__.defaults;$=Object.assign(J,$)}if($!=null&&$.path!=null)this.$basePath=$.path;N4.call(this,A,F,D,$),delete this.$__.priorDoc}A0.prototype=Object.create(N4.prototype);Object.defineProperty(A0.prototype,"$isSubdocument",{configurable:!1,writable:!1,value:!0});Object.defineProperty(A0.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!0});/*!
 * ignore
 */A0.prototype.toBSON=function(){return this.toObject(KY1)};A0.prototype.save=async function A(F){if(F=F||{},!F.suppressWarning)zY1.warn("mongoose: calling `save()` on a subdoc does **not** save the document to MongoDB, it only runs save middleware. Use `subdoc.save({ suppressWarning: true })` to hide this warning if you're sure this behavior is right for your app.");return new Promise((B,D)=>{this.$__save(($)=>{if($!=null)return D($);B(this)})})};A0.prototype.$__fullPath=function(A){if(!this.$__.fullPath)this.ownerDocument();return A?this.$__.fullPath+"."+A:this.$__.fullPath};A0.prototype.$__pathRelativeToParent=function(A){if(A==null)return this.$basePath;return[this.$basePath,A].join(".")};A0.prototype.$__save=function(A){return QY1(()=>A(null,this))};/*!
 * ignore
 */A0.prototype.$isValid=function(A){let F=this.$parent(),B=this.$__pathRelativeToParent(A);if(F!=null&&B!=null)return F.$isValid(B);return N4.prototype.$isValid.call(this,A)};/*!
 * ignore
 */A0.prototype.markModified=function(A){N4.prototype.markModified.call(this,A);let F=this.$parent(),B=this.$__pathRelativeToParent(A);if(F==null||B==null)return;let D=this.$__pathRelativeToParent().replace(/\.$/,"");if(F.isDirectModified(D)||this.isNew)return;this.$__parent.markModified(B,this)};/*!
 * ignore
 */A0.prototype.isModified=function(A,F,B){let D=this.$parent();if(D!=null){if(Array.isArray(A)||typeof A==="string")A=Array.isArray(A)?A:A.split(" "),A=A.map(($)=>this.$__pathRelativeToParent($)).filter(($)=>$!=null);else if(!A)A=this.$__pathRelativeToParent();return D.$isModified(A,F,B)}return N4.prototype.isModified.call(this,A,F,B)};A0.prototype.$markValid=function(A){N4.prototype.$markValid.call(this,A);let F=this.$parent(),B=this.$__pathRelativeToParent(A);if(F!=null&&B!=null)F.$markValid(B)};/*!
 * ignore
 */A0.prototype.invalidate=function(A,F,B){N4.prototype.invalidate.call(this,A,F,B);let D=this.$parent(),$=this.$__pathRelativeToParent(A);if(D!=null&&$!=null)D.invalidate($,F,B);else if(F.kind==="cast"||F.name==="CastError"||$==null)throw F;return this.ownerDocument().$__.validationError};/*!
 * ignore
 */A0.prototype.$ignore=function(A){N4.prototype.$ignore.call(this,A);let F=this.$parent(),B=this.$__pathRelativeToParent(A);if(F!=null&&B!=null)F.$ignore(B)};A0.prototype.ownerDocument=function(){if(this.$__.ownerDocument)return this.$__.ownerDocument;let A=this,F=[],B=new Set([A]);while(!0){if(typeof A.$__pathRelativeToParent!=="function")break;F.unshift(A.$__pathRelativeToParent(void 0,!0));let D=A.$parent();if(D==null)break;if(A=D,B.has(A))throw new Error("Infinite subdocument loop: subdoc with _id "+A._id+" is a parent of itself");B.add(A)}return this.$__.fullPath=F.join("."),this.$__.ownerDocument=A,this.$__.ownerDocument};/*!
 * ignore
 */A0.prototype.$__fullPathWithIndexes=function(){let A=this,F=[],B=new Set([A]);while(!0){if(typeof A.$__pathRelativeToParent!=="function")break;F.unshift(A.$__pathRelativeToParent(void 0,!1));let D=A.$parent();if(D==null)break;if(A=D,B.has(A))throw new Error("Infinite subdocument loop: subdoc with _id "+A._id+" is a parent of itself");B.add(A)}return F.join(".")};A0.prototype.parent=function(){return this.$__parent};A0.prototype.$parent=A0.prototype.parent;A0.prototype.$__deleteOne=function(A){if(A==null)return;return A(null,this)};A0.prototype.$__removeFromParent=function(){this.$__parent.set(this.$basePath,null)};A0.prototype.deleteOne=function(A,F){if(typeof A==="function")F=A,A=null;if(UY1(this),!A||!A.noop){this.$__removeFromParent();let B=this.ownerDocument();B.$__.removedSubdocs=B.$__.removedSubdocs||[],B.$__.removedSubdocs.push(this)}return this.$__deleteOne(F)};/*!
 * ignore
 */A0.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.nested.populate("path")`, use `doc.populate("nested.path")`')};A0.prototype.inspect=function(){return this.toObject()};if(Sx.inspect.custom)A0.prototype[Sx.inspect.custom]=A0.prototype.inspect;A0.prototype.$toObject=function A(F,B){let D=N4.prototype.$toObject.call(this,F,B);if(Object.keys(D).length===0&&F?._calledWithOptions!=null){if((F._calledWithOptions?.minimize??this?.$__schemaTypeOptions?.minimize??F.minimize)&&!this.constructor.$__required)return}return D};function UY1(A){let F=A.ownerDocument();function B(){F.$removeListener("save",B),F.$removeListener("deleteOne",B),A.emit("deleteOne",A),A.constructor.emit("deleteOne",A)}F.$on("save",B),F.$on("deleteOne",B)}});var Y5=z((MO1,gx)=>{/*!
 * Module dependencies.
 */var _x=i("events").EventEmitter,xx=DJ(),ZY1=Q1(),TF=$1().documentArrayParent;function W6(A,F,B,D,$){if(ZY1.isMongooseDocumentArray(F))this.__parentArray=F,this[TF]=F.$parent();else this.__parentArray=void 0,this[TF]=void 0;this.$setIndex($),this.$__parent=this[TF];let J;if(typeof B==="object"&&B!=null)J={isNew:!0,...B},B=void 0;else J={isNew:!0};xx.call(this,A,D,this[TF],B,J)}/*!
 * Inherit from Subdocument
 */W6.prototype=Object.create(xx.prototype);W6.prototype.constructor=W6;Object.defineProperty(W6.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!1});Object.defineProperty(W6.prototype,"$isDocumentArrayElement",{configurable:!1,writable:!1,value:!0});for(let A in _x.prototype)W6[A]=_x.prototype[A];/*!
 * ignore
 */W6.prototype.$setIndex=function(A){if(this.__index=A,this.$__!=null&&this.$__.validationError!=null){let F=Object.keys(this.$__.validationError.errors);for(let B of F)this.invalidate(B,this.$__.validationError.errors[B])}};/*!
 * ignore
 */W6.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.arr[0].populate("path")`, use `doc.populate("arr.0.path")`')};/*!
 * ignore
 */W6.prototype.$__removeFromParent=function(){let A=this._doc._id;if(!A)throw new Error("For your own good, Mongoose does not know how to remove an ArraySubdocument that has no _id");this.__parentArray.pull({_id:A})};W6.prototype.$__fullPath=function(A,F){if(this.__index==null)return null;if(!this.$__.fullPath)this.ownerDocument();if(F)return A?this.$__.fullPath+"."+A:this.$__.fullPath;return A?this.$__.fullPath+"."+this.__index+"."+A:this.$__.fullPath+"."+this.__index};W6.prototype.$__pathRelativeToParent=function(A,F){if(this.__index==null||(!this.__parentArray||!this.__parentArray.$path))return null;if(F)return A==null?this.__parentArray.$path():this.__parentArray.$path()+"."+A;if(A==null)return this.__parentArray.$path()+"."+this.__index;return this.__parentArray.$path()+"."+this.__index+"."+A};W6.prototype.$parent=function(){return this[TF]};W6.prototype.parentArray=function(){return this.__parentArray};/*!
 * Module exports.
 */gx.exports=W6});var XJ=z((jO1,cx)=>{var VC=D3(),UC=Y5(),VY1=T1(),bx=t$(),wY1=I0(),yx=I3().internalToObjectOptions,mx=_6(),g2=Q1(),ZC=Q2(),P4=$1().arrayAtomicsSymbol,I4=$1().arrayParentSymbol,M4=$1().arrayPathSymbol,q6=$1().arraySchemaSymbol,dx=$1().populateModelSymbol,LY1=Symbol("mongoose#Array#sliced"),hx=Array.prototype.push;/*!
 * ignore
 */var JJ={$__getAtomics(){let A=[],F=Object.keys(this[P4]||{}),B=F.length,D=Object.assign({},yx,{_isNested:!0});if(B===0)return A[0]=["$set",this.toObject(D)],A;while(B--){let $=F[B],J=this[P4][$];if(g2.isMongooseObject(J))J=J.toObject(D);else if(Array.isArray(J))J=this.toObject.call(J,D);else if(J!=null&&Array.isArray(J.$each))J.$each=this.toObject.call(J.$each,D);else if(J!=null&&typeof J.valueOf==="function")J=J.valueOf();if($==="$addToSet")J={$each:J};A.push([$,J])}return A},$atomics(){/*!
   * ignore
   */return this[P4]},$parent(){/*!
   * ignore
   */return this[I4]},$path(){/*!
   * ignore
   */return this[M4]},$shift(){this._registerAtomic("$pop",-1),this._markModified();let A=this.__array;if(A._shifted)return;return A._shifted=!0,[].shift.call(A)},$pop(){if(this._registerAtomic("$pop",1),this._markModified(),this._popped)return;return this._popped=!0,[].pop.call(this)},$schema(){/*!
   * ignore
   */return this[q6]},_cast(A){let F=!1,B,D=this[I4];if(D)F=D.$populated(this[M4],!0);if(F&&A!==null&&A!==void 0){if(B=F.options[dx],B==null)throw new VY1("No populated model found for path `"+this[M4]+"`. This is likely a bug in Mongoose, please report an issue on github.com/Automattic/mongoose.");if(Buffer.isBuffer(A)||ZC(A,"ObjectId")||!g2.isObject(A))A={_id:A};if(!(A.schema&&A.schema.discriminatorMapping&&A.schema.discriminatorMapping.key!==void 0))A=new B(A);return this[q6].caster.applySetters(A,D,!0)}return this[q6].caster.applySetters(A,D,!1)},_mapCast(A,F){return this._cast(A,this.length+F)},_markModified(A){let F=this[I4],B;if(F){if(B=this[M4],arguments.length)B=B+"."+A;if(B!=null&&B.endsWith(".$"))return this;F.markModified(B,arguments.length!==0?A:F)}return this},_registerAtomic(A,F){if(this[LY1])return;if(A==="$set")return this[P4]={$set:F},bx(this[I4],this[M4]),this._markModified(),this;let B=this[P4];if(A==="$pop"&&!("$pop"in B)){let $=this;this[I4].once("save",function(){$._popped=$._shifted=null})}if(B.$set||Object.keys(B).length&&!(A in B))return this[P4]={$set:this},this;let D;if(A==="$pullAll"||A==="$addToSet")B[A]||(B[A]=[]),B[A]=B[A].concat(F);else if(A==="$pullDocs"){let $=B.$pull||(B.$pull={});if(F[0]instanceof UC)D=$.$or||($.$or=[]),Array.prototype.push.apply(D,F.map((J)=>{return J.toObject({transform:(X,E)=>{if(J==null||J.$__==null)return E;return Object.keys(J.$__.activePaths.getStatePaths("default")).forEach((Y)=>{mx.unset(Y,E),lx(E,Y)}),E},virtuals:!1})}));else D=$._id||($._id={$in:[]}),D.$in=D.$in.concat(F)}else if(A==="$push")if(B.$push=B.$push||{$each:[]},F!=null&&g2.hasUserDefinedProperty(F,"$each"))B.$push=F;else if(F.length===1)B.$push.$each.push(F[0]);else if(F.length<1e4)B.$push.$each.push(...F);else for(let $ of F)B.$push.$each.push($);else B[A]=F;return this},addToSet(){$J(this,arguments),vx(this,arguments);let A=[].map.call(arguments,this._mapCast,this),F=[],B="";if(A[0]instanceof UC)B="doc";else if(A[0]instanceof Date)B="date";else if(ZC(A[0],"ObjectId"))B="ObjectId";let D=g2.isMongooseArray(A)?A.__array:A,$=g2.isMongooseArray(this)?this.__array:this;return D.forEach(function(J){let X,E=+J;switch(B){case"doc":X=this.some(function(Y){return Y.equals(J)});break;case"date":X=this.some(function(Y){return+Y===E});break;case"ObjectId":X=this.find((Y)=>Y.toString()===J.toString());break;default:X=~this.indexOf(J);break}if(!X)this._markModified(),$.push(J),this._registerAtomic("$addToSet",J),[].push.call(F,J)},this),F},hasAtomics(){if(!g2.isPOJO(this[P4]))return 0;return Object.keys(this[P4]).length},includes(A,F){return this.indexOf(A,F)!==-1},indexOf(A,F){if(ZC(A,"ObjectId"))A=A.toString();F=F==null?0:F;let B=this.length;for(let D=F;D<B;++D)if(A==this[D])return D;return-1},inspect(){return JSON.stringify(this)},nonAtomicPush(){let A=[].map.call(arguments,this._mapCast,this);this._markModified();let F=[].push.apply(this,A);return this._registerAtomic("$set",this),F},pop(){this._markModified();let A=[].pop.call(this);return this._registerAtomic("$set",this),A},pull(){let A=[].map.call(arguments,($,J)=>this._cast($,J,{defaults:!1}),this),F=this[I4].get(this[M4]);if(g2.isMongooseArray(F))F=F.__array;let B=F.length,D;this._markModified();while(B--)if(D=F[B],D instanceof VC){if(A.some(function(J){return D.equals(J)}))F.splice(B,1)}else if(~this.indexOf.call(A,D))F.splice(B,1);if(A[0]instanceof UC)this._registerAtomic("$pullDocs",A.map(function($){let J=$.$__getValue("_id");if(J===void 0||$.$isDefault("_id"))return $;return J}));else this._registerAtomic("$pullAll",A);if(bx(this[I4],this[M4])>0)this._registerAtomic("$set",this);return this},push(){let A=arguments,F=A,B=A[0]!=null&&g2.hasUserDefinedProperty(A[0],"$each"),D=g2.isMongooseArray(this)?this.__array:this;if(B)F=A[0],A=A[0].$each;if(this[q6]==null)return hx.apply(this,A);$J(this,A),vx(this,A),A=[].map.call(A,this._mapCast,this);let $,J=this[P4];if(this._markModified(),B)if(F.$each=A,(J.$push&&J.$push.$each&&J.$push.$each.length||0)!==0&&J.$push.$position!=F.$position){if(F.$position!=null)[].splice.apply(D,[F.$position,0].concat(A)),$=D.length;else $=[].push.apply(D,A);this._registerAtomic("$set",this)}else if(F.$position!=null)[].splice.apply(D,[F.$position,0].concat(A)),$=this.length;else $=[].push.apply(D,A);else F=A,$=hx.apply(D,A);return this._registerAtomic("$push",F),$},remove(){return this.pull.apply(this,arguments)},set(A,F,B){let D=this.__array;if(B)return D[A]=F,this;let $=JJ._cast.call(this,F,A);return JJ._markModified.call(this,A),D[A]=$,this},shift(){let A=g2.isMongooseArray(this)?this.__array:this;this._markModified();let F=[].shift.call(A);return this._registerAtomic("$set",this),F},sort(){let A=g2.isMongooseArray(this)?this.__array:this,F=[].sort.apply(A,arguments);return this._registerAtomic("$set",this),F},splice(){let A,F=g2.isMongooseArray(this)?this.__array:this;if(this._markModified(),$J(this,Array.prototype.slice.call(arguments,2)),arguments.length){let B;if(this[q6]==null)B=arguments;else{B=[];for(let D=0;D<arguments.length;++D)B[D]=D<2?arguments[D]:this._cast(arguments[D],arguments[0]+(D-2))}A=[].splice.apply(F,B),this._registerAtomic("$set",this)}return A},toBSON(){/*!
   * ignore
   */return this.toObject(yx)},toObject(A){let F=g2.isMongooseArray(this)?this.__array:this;if(A&&A.depopulate)return A=wY1(A),A._isNested=!0,[].concat(F).map(function(B){return B instanceof VC?B.toObject(A):B});return[].concat(F)},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},unshift(){$J(this,arguments);let A;if(this[q6]==null)A=arguments;else A=[].map.call(arguments,this._cast,this);let F=g2.isMongooseArray(this)?this.__array:this;return this._markModified(),[].unshift.apply(F,A),this._registerAtomic("$set",this),this.length}};/*!
 * ignore
 */function RY1(A,F){if(!F)return!1;for(let B of A){if(B==null)return!1;let D=B.constructor;if(!(B instanceof VC)||D.modelName!==F&&D.baseModelName!==F)return!1}return!0}/*!
 * Minimize _just_ empty objects along the path chain specified
 * by `parts`, ignoring all other paths. Useful in cases where
 * you want to minimize after unsetting a path.
 *
 * #### Example:
 *
 *     const obj = { foo: { bar: { baz: {} } }, a: {} };
 *     _minimizePath(obj, 'foo.bar.baz');
 *     obj; // { a: {} }
 */function lx(A,F,B){if(typeof F==="string"){if(F.indexOf(".")===-1)return;F=mx.stringToParts(F)}if(B=B||0,B>=F.length)return;if(A==null||typeof A!=="object")return;if(lx(A[F[0]],F,B+1),A[F[0]]!=null&&typeof A[F[0]]==="object"&&Object.keys(A[F[0]]).length===0)delete A[F[0]]}/*!
 * ignore
 */function $J(A,F){let B=A==null?null:A[q6]&&A[q6].caster&&A[q6].caster.options&&A[q6].caster.options.ref||null;if(A.length===0&&F.length!==0){if(RY1(F,B))A[I4].$populated(A[M4],[],{[dx]:F[0].constructor})}}/*!
 * If `docs` isn't all instances of the right model, depopulate `arr`
 */function vx(A,F){let B=A==null?null:A[q6]&&A[q6].caster&&A[q6].caster.options&&A[q6].caster.options.ref||null,D=A[I4],$=A[M4];if(!B||!D.populated($))return;for(let J of F){if(J==null)continue;if(typeof J!=="object"||J instanceof String||J instanceof Number||J instanceof Buffer||g2.isMongooseType(J)){D.depopulate($);break}}}var NY1=["filter","flat","flatMap","map","slice"];for(let A of NY1){if(Array.prototype[A]==null)continue;JJ[A]=function(){let F=g2.isMongooseArray(this)?this.__array:this,B=[].concat(F);return B[A].apply(B,arguments)}}cx.exports=JJ});var LC=z((ax,rx)=>{/*!
 * Module dependencies.
 */var wC=XJ(),EJ=$1().arrayAtomicsSymbol,PY1=$1().arrayAtomicsBackupSymbol,px=$1().arrayParentSymbol,IY1=$1().arrayPathSymbol,ix=$1().arraySchemaSymbol,nx=Array.prototype.push,sx=/^\d+$/;function MY1(A,F,B,D){let $;if(Array.isArray(A)){let E=A.length;if(E===0)$=new Array;else if(E===1)$=new Array(1),$[0]=A[0];else if(E<1e4)$=new Array,nx.apply($,A);else{$=new Array;for(let Y=0;Y<E;++Y)nx.call($,A[Y])}}else $=[];let J={[EJ]:{},[PY1]:void 0,[IY1]:F,[ix]:D,[px]:void 0,isMongooseArray:!0,isMongooseArrayProxy:!0,__array:$};if(A&&A[EJ]!=null)J[EJ]=A[EJ];if(B!=null&&B.$__)J[px]=B,J[ix]=D||B.schema.path(F);let X=new Proxy($,{get:function(E,Y){if(J.hasOwnProperty(Y))return J[Y];if(wC.hasOwnProperty(Y))return wC[Y];if(D&&D.virtuals&&D.virtuals.hasOwnProperty(Y))return D.virtuals[Y].applyGetters(void 0,E);if(typeof Y==="string"&&sx.test(Y)&&D?.$embeddedSchemaType!=null)return D.$embeddedSchemaType.applyGetters($[Y],B);return $[Y]},set:function(E,Y,G){if(typeof Y==="string"&&sx.test(Y))wC.set.call(X,Y,G,!1);else if(J.hasOwnProperty(Y))J[Y]=G;else if(D&&D.virtuals&&D.virtuals.hasOwnProperty(Y))D.virtuals[Y].applySetters(G,E);else $[Y]=G;return!0}});return X}/*!
 * Module exports.
 */rx.exports=ax=MY1});var NC=z((TO1,ox)=>{var tx=Q2(),RC=R4();ox.exports=function A(F){if(F==null)return F;if(tx(F,"ObjectId"))return F;if(F._id){if(tx(F._id,"ObjectId"))return F._id;if(F._id.toString instanceof Function)return new RC(F._id.toString())}if(F.toString instanceof Function)return new RC(F.toString());return new RC(F)}});var Bg=z((kO1,Fg)=>{var YJ=XJ(),jY1=D3(),TY1=NC(),ex=$3(),kY1=I3().internalToObjectOptions,GJ=Q1(),PC=Q2(),WJ=$1().arrayParentSymbol,MC=$1().arrayPathSymbol,IC=$1().arraySchemaSymbol,Ag=$1().documentArrayParent,OY1=Array.prototype.toString,jC={toBSON(){/*!
   * ignore
   */return this.toObject(kY1)},toString(){return OY1.call(this.__array.map((A)=>{if(A!=null&&A.$__!=null)return A.toString();return A}))},getArrayParent(){/*!
   * ignore
   */return this[WJ]},_cast(A,F,B){if(this[IC]==null)return A;let D=this[IC].casterConstructor;if((D.$isMongooseDocumentArray?GJ.isMongooseDocumentArray(A):A instanceof D)||A&&A.constructor&&A.constructor.baseCasterConstructor===D){if(!(A[Ag]&&A.__parentArray))A[Ag]=this[WJ],A.__parentArray=this;return A.$setIndex(F),A}if(A===void 0||A===null)return null;if(Buffer.isBuffer(A)||PC(A,"ObjectId")||!GJ.isObject(A))A={_id:A};if(A&&D.discriminators&&D.schema&&D.schema.options&&D.schema.options.discriminatorKey)if(typeof A[D.schema.options.discriminatorKey]==="string"&&D.discriminators[A[D.schema.options.discriminatorKey]])D=D.discriminators[A[D.schema.options.discriminatorKey]];else{let X=ex(D.discriminators,A[D.schema.options.discriminatorKey]);if(X)D=X}if(D.$isMongooseDocumentArray)return D.cast(A,this,void 0,void 0,F);let J=new D(A,this,B,void 0,F);return J.isNew=!0,J},id(A){let F,B,D;try{F=TY1(A).toString()}catch($){F=null}for(let $ of this){if(!$)continue;if(D=$.get("_id"),D===null||typeof D==="undefined")continue;else if(D instanceof jY1){if(B||(B=String(A)),B==D._id)return $}else if(!PC(A,"ObjectId")&&!PC(D,"ObjectId")){if(A==D||GJ.deepEqual(A,D))return $}else if(F==D)return $}return null},toObject(A){return[].concat(this.map(function(F){if(F==null)return null;if(typeof F.toObject!=="function")return F;return F.toObject(A)}))},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},push(){let A=YJ.push.apply(this,arguments);return HJ(this),A},pull(){let A=YJ.pull.apply(this,arguments);return HJ(this),A},shift(){let A=YJ.shift.apply(this,arguments);return HJ(this),A},splice(){let A=YJ.splice.apply(this,arguments);return HJ(this),A},inspect(){return this.toObject()},create(A){let F=this[IC].casterConstructor;if(A&&F.discriminators&&F.schema&&F.schema.options&&F.schema.options.discriminatorKey)if(typeof A[F.schema.options.discriminatorKey]==="string"&&F.discriminators[A[F.schema.options.discriminatorKey]])F=F.discriminators[A[F.schema.options.discriminatorKey]];else{let B=ex(F.discriminators,A[F.schema.options.discriminatorKey]);if(B)F=B}return new F(A,this)},notify(A){/*!
   * ignore
   */let F=this;return function B(D,$){$=$||F;let J=$.length;while(J--){if($[J]==null)continue;switch(A){case"save":D=F[J];break;default:break}if(GJ.isMongooseArray($[J]))B(D,$[J]);else if($[J])$[J].emit(A,D)}}},set(A,F,B){let D=this.__array;if(B)return D[A]=F,this;let $=jC._cast.call(this,F,A);return jC._markModified.call(this,A),D[A]=$,this},_markModified(A,F){let B=this[WJ],D;if(B){if(D=this[MC],arguments.length)if(F!=null){let $=A.__index;D=D+"."+$+"."+F}else D=D+"."+A;if(D!=null&&D.endsWith(".$"))return this;B.markModified(D,arguments.length!==0?A:B)}return this}};Fg.exports=jC;function HJ(A){let F=A[WJ];if(!F||F.$__.populated==null)return;let B=Object.keys(F.$__.populated).filter((D)=>D.startsWith(A[MC]+"."));for(let D of B){let $=D.slice((A[MC]+".").length);if(!Array.isArray(F.$__.populated[D].value))continue;F.$__.populated[D].value=A.map((J)=>J.$populated($))}}});var P7=z((OO1,$g)=>{/*!
 * Module dependencies.
 */var Dg=XJ(),TC=Bg(),kC=$1().arrayAtomicsSymbol,uY1=$1().arrayAtomicsBackupSymbol,OC=$1().arrayParentSymbol,uC=$1().arrayPathSymbol,N7=$1().arraySchemaSymbol,SY1=Array.prototype.push,fY1=/^\d+$/;function _Y1(A,F,B,D){let $=[],J={[kC]:{},[uY1]:void 0,[uC]:F,[N7]:void 0,[OC]:void 0};if(Array.isArray(A)){if(A[uC]===F&&A[OC]===B)J[kC]=Object.assign({},A[kC]);A.forEach((E)=>{SY1.call($,E)})}if(J[uC]=F,J.__array=$,B&&B.$__){J[OC]=B,J[N7]=B.$__schema.path(F);while(J[N7]!=null&&J[N7].$isMongooseArray&&!J[N7].$isMongooseDocumentArray)J[N7]=J[N7].casterConstructor}let X=new Proxy($,{get:function(E,Y){if(Y==="isMongooseArray"||Y==="isMongooseArrayProxy"||Y==="isMongooseDocumentArray"||Y==="isMongooseDocumentArrayProxy")return!0;if(J.hasOwnProperty(Y))return J[Y];if(TC.hasOwnProperty(Y))return TC[Y];if(D&&D.virtuals&&D.virtuals.hasOwnProperty(Y))return D.virtuals[Y].applyGetters(void 0,E);if(Dg.hasOwnProperty(Y))return Dg[Y];return $[Y]},set:function(E,Y,G){if(typeof Y==="string"&&fY1.test(Y))TC.set.call(X,Y,G,!1);else if(J.hasOwnProperty(Y))J[Y]=G;else if(D&&D.virtuals&&D.virtuals.hasOwnProperty(Y))D.virtuals[Y].applySetters(G,E);else $[Y]=G;return!0}});return X}/*!
 * Module exports.
 */$g.exports=_Y1});var D3=z((Rg,Ng)=>{/*!
 * Module dependencies.
 */var xY1=rq(),_C=i("events").EventEmitter,gY1=u_(),bY1=D5(),C6=G6(),Jg=R7(),yY1=b_(),hY1=s$(),vY1=a$(),mY1=m_(),dY1=I7(),xC=V9(),KJ=V7(),Cg=bq(),Qg=YC(),gC=r$(),SC=t$(),T3=I0(),lY1=e$().compile,cY1=e$().defineKey,pY1=o_(),iY1=J5().flatten,fC=Gx(),Xg=Wx(),nY1=Cx(),sY1=FJ(),Eg=A3(),Yg=Q2(),Kg=X5(),aY1=E5(),Gg=qC(),bC=i("util").inspect,zg=I3().internalToObjectOptions,rY1=CC(),tY1=QC(),oY1=_6(),yC=KC(),eY1=jF(),w1=Q1(),AG1=zC(),CJ=w1.deepEqual,FG1=w1.isMongooseObject,OF=$1().arrayAtomicsBackupSymbol,A6=$1().arrayAtomicsSymbol,BG1=$1().documentArrayParent,DG1=$1().documentIsModified,Ug=$1().documentModifiedPaths,$G1=$1().documentSchemaSymbol,JG1=$1().getSymbol,XG1=$1().modelSymbol,Hg=$1().populateModelSymbol,EG1=$1().scopeSymbol,YG1=L7().schemaMixedSymbol,GG1=ux(),qJ=$1().sessionNewDocuments,QJ,Wg,kF,Zg=w1.specialProperties;function b(A,F,B,D){if(typeof B==="object"&&B!=null)D=B,B=D.skipId;if(D=Object.assign({},D),this.$__schema==null){let G=w1.isObject(F)&&!F.instanceOfSchema?new dY1(F):F;this.$__setSchema(G),F=B,B=D,D=arguments[4]||{}}if(this.$__=new gY1,D.isNew!=null&&D.isNew!==!0)this.$isNew=D.isNew;if(D.priorDoc!=null)this.$__.priorDoc=D.priorDoc;if(B)this.$__.skipId=B;if(A!=null&&typeof A!=="object")throw new vY1(A,"obj","Document");let $=!0;if(D.defaults!==void 0)this.$__.defaults=D.defaults,$=D.defaults;let J=this.$__schema;if(typeof F==="boolean"||F==="throw"){if(F!==!0)this.$__.strictMode=F;F=void 0}else if(J.options.strict!==!0)this.$__.strictMode=J.options.strict;let X=J.requiredPaths(!0);for(let G of X)this.$__.activePaths.require(G);let E=null;if(w1.isPOJO(F)&&Object.keys(F).length>0)E=aY1(F),this.$__.selected=F,this.$__.exclude=E;let Y=E===!1&&F?Qg(F):null;if(this._doc==null){if(this.$__buildDoc(A,F,B,E,Y,!1),$)gC(this,F,E,Y,!0,null,{skipParentChangeTracking:!0})}if(A){if(this.$__original_set)this.$__original_set(A,void 0,!0,D);else this.$set(A,void 0,!0,D);if(A instanceof b)this.$isNew=A.$isNew}if(D.willInit&&$){if(D.skipDefaults)this.$__.skipDefaults=D.skipDefaults}else if($)gC(this,F,E,Y,!1,D.skipDefaults);if(!this.$__.strictMode&&A){let G=this;Object.keys(this._doc).forEach(function(W){if(!(W in J.tree)&&!(W in J.methods)&&!(W in J.virtuals)&&!W.startsWith("$"))cY1({prop:W,subprops:null,prototype:G})})}ZG1(this)}b.prototype.$isMongooseDocumentPrototype=!0;Object.defineProperty(b.prototype,"isNew",{get:function(){return this.$isNew},set:function(A){this.$isNew=A}});Object.defineProperty(b.prototype,"errors",{get:function(){return this.$errors},set:function(A){this.$errors=A}});/*!
 * ignore
 */b.prototype.$isNew=!0;/*!
 * Document exposes the NodeJS event emitter API, so you can use
 * `on`, `once`, etc.
 */w1.each(["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"],function(A){b.prototype[A]=function(){if(!this.$__.emitter){if(A==="emit")return;this.$__.emitter=new _C,this.$__.emitter.setMaxListeners(0)}return this.$__.emitter[A].apply(this.$__.emitter,arguments)},b.prototype[`$${A}`]=b.prototype[A]});b.prototype.constructor=b;for(let A in _C.prototype)b[A]=_C.prototype[A];b.prototype.$__schema;b.prototype.schema;Object.defineProperty(b.prototype,"$locals",{configurable:!1,enumerable:!1,get:function(){if(this.$__.locals==null)this.$__.locals={};return this.$__.locals},set:function(A){this.$__.locals=A}});b.prototype.isNew;Object.defineProperty(b.prototype,"$where",{configurable:!1,enumerable:!1,writable:!0});b.prototype.id;b.prototype.$errors;Object.defineProperty(b.prototype,"$op",{get:function(){return this.$__.op||null},set:function(A){this.$__.op=A}});/*!
 * ignore
 */function HG1(A,F,B){if(A==null)return;let D=Object.keys(B.$__schema.paths),$=D.length,J=F.indexOf(".")===-1?[F]:F.split(".");for(let X=0;X<$;++X){let E="",Y=D[X];if(!Y.startsWith(F+"."))continue;let G=B.$__schema.paths[Y],H=G.splitPath().slice(J.length),W=H.length;if(G.defaultValue===void 0)continue;let q=A;for(let C=0;C<W;++C){if(q==null)break;let Q=H[C];if(C===W-1){if(q[Q]!==void 0)break;try{let K=G.getDefault(B,!1);if(K!==void 0)q[Q]=K}catch(K){B.invalidate(F+"."+E,K);break}break}E+=(!E.length?"":".")+Q,q[Q]=q[Q]||{},q=q[Q]}}}b.prototype.$__buildDoc=function(A,F,B,D,$){let J={},X=Object.keys(this.$__schema.paths).filter((G)=>!G.includes("$*")),E=X.length,Y=0;for(;Y<E;++Y){let G=X[Y];if(G==="_id"){if(B)continue;if(A&&"_id"in A)continue}let H=this.$__schema.paths[G].splitPath(),W=H.length,q=W-1,C="",Q=J,K=!1;for(let U=0;U<W;++U){let Z=H[U];if(!C.length)C=Z;else C+="."+Z;if(D===!0){if(C in F)break}else if(D===!1&&F&&!K){if(C in F)K=!0;else if(!$[C])break}if(U<q)Q=Q[Z]||(Q[Z]={})}}this._doc=J};/*!
 * Converts to POJO when you use the document for querying
 */b.prototype.toBSON=function(){return this.toObject(zg)};b.prototype.init=function(A,F,B){if(typeof F==="function")B=F,F=null;if(this.$__init(A,F),B)B(null,this);return this};b.prototype.$init=function(){return this.constructor.prototype.init.apply(this,arguments)};b.prototype.$__init=function(A,F){if(this.$isNew=!1,F=F||{},A._id!=null&&F.populated&&F.populated.length){let D=String(A._id);for(let $ of F.populated){if($.isVirtual)this.$populated($.path,w1.getValue($.path,A),$);else this.$populated($.path,$._docs[D],$);if($._childDocs==null)continue;for(let J of $._childDocs){if(J==null||J.$__==null)continue;J.$__.parent=this}$._childDocs=[]}}Vg(this,A,this._doc,F),rY1(this,F.populated),this.$emit("init",this),this.constructor.emit("init",this);let B=this.$__.exclude===!1&&this.$__.selected?Qg(this.$__.selected):null;return gC(this,this.$__.selected,this.$__.exclude,B,!1,this.$__.skipDefaults),this};function Vg(A,F,B,D,$){if($=$||"",F.$__!=null)F=F._doc;let J=Object.keys(F),X=J.length,E,Y,G,H=A.$__.strictMode,W=A.$__schema;for(let q=0;q<X;++q){if(G=J[q],Zg.has(G))continue;if(Y=$?$+G:G,E=W.path(Y),W.$isRootDiscriminator&&!A.$__isSelected(Y))continue;let C=F[G];if(!E&&w1.isPOJO(C)){if(!B[G]){if(B[G]={},!H&&!(G in W.tree)&&!(G in W.methods)&&!(G in W.virtuals))A[G]=B[G]}Vg(A,C,B[G],D,Y+".")}else if(!E){if(B[G]=C,!H&&!$)A[G]=C}else{if(B.hasOwnProperty(G)&&C!==void 0&&!D.hydratedPopulatedDocs)delete B[G];if(C===null)B[G]=E._castNullish(null);else if(C!==void 0){let Q=C.$__==null?null:C.$__.wasPopulated;if(E&&!Q&&!D.hydratedPopulatedDocs)try{if(D&&D.setters)B[G]=E.applySetters(C,A,!1);else B[G]=E.cast(C,A,!0)}catch(K){A.invalidate(K.path,new Cg({path:K.path,message:K.message,type:"cast",value:K.value,reason:K}))}else if(E&&D.hydratedPopulatedDocs){if(B[G]=E.cast(C,A,!0,void 0,{hydratedPopulatedDocs:!0}),B[G]&&B[G].$__&&B[G].$__.wasPopulated)A.$populated(Y,B[G].$__.wasPopulated.value,B[G].$__.wasPopulated.options);else if(Array.isArray(B[G])&&B[G].length&&B[G][0]?.$__?.wasPopulated)A.$populated(Y,B[G].map((K)=>K?.$__?.wasPopulated?.value).filter((K)=>K!=null),B[G][0].$__.wasPopulated.options)}else B[G]=C}if(!A.$isModified(Y))A.$__.activePaths.init(Y)}}}b.prototype.updateOne=function A(F,B,D){let $=this.constructor.updateOne({_id:this._doc._id},F,B),J=this;if($.pre(function X(E){J.constructor._middleware.execPre("updateOne",J,[J],E)}),$.post(function X(E){J.constructor._middleware.execPost("updateOne",J,[J],{},E)}),this.$session()!=null){if(!("session"in $.options))$.options.session=this.$session()}if(D!=null)return $.exec(D);return $};b.prototype.replaceOne=function A(){let F=[...arguments];return F.unshift({_id:this._doc._id}),this.constructor.replaceOne.apply(this.constructor,F)};b.prototype.$session=function A(F){if(arguments.length===0){if(this.$__.session!=null&&this.$__.session.hasEnded)return this.$__.session=null,null;return this.$__.session}if(F!=null&&F.hasEnded)throw new C6("Cannot set a document's session to a session that has ended. Make sure you haven't called `endSession()` on the session you are passing to `$session()`.");if(F==null&&this.$__.session==null)return;if(this.$__.session=F,!this.$isSubdocument){let B=this.$getAllSubdocs();for(let D of B)D.$session(F)}return F};b.prototype.$timestamps=function A(F){if(arguments.length===0){if(this.$__.timestamps!=null)return this.$__.timestamps;if(this.$__schema)return this.$__schema.options.timestamps;return}let B=this.$timestamps();if(F!==B)this.$__.timestamps=F;return this};b.prototype.overwrite=function A(F){let B=Array.from(new Set(Object.keys(this._doc).concat(Object.keys(F))));for(let D of B){if(D==="_id")continue;if(this.$__schema.options.versionKey&&D===this.$__schema.options.versionKey)continue;if(this.$__schema.options.discriminatorKey&&D===this.$__schema.options.discriminatorKey)continue;this.$set(D,F[D])}return this};b.prototype.$set=function A(F,B,D,$){if(w1.isPOJO(D))$=D,D=void 0;let J=$&&$.merge,X=D&&D!==!0,E=D===!0,Y,G,H=0,W,q,C,Q=$&&"strict"in $,K=Q?$.strict:this.$__.strictMode;if(X)Y=this.$__.adhocPaths||(this.$__.adhocPaths={}),Y[F]=this.$__schema.interpretAsType(F,D,this.$__schema.options);if(F==null)[F,B]=[B,F];else if(typeof F!=="string"){if(F instanceof b)if(F.$__isNested)F=F.toObject();else F=F.$__schema===this.$__schema?hC(F,{...F._doc}):F._doc;if(F==null)[F,B]=[B,F];C=B?B+".":"",G=Xg(this.$__schema,F);let u=G.length,x=$&&$._skipMinimizeTopLevel||!1;if(u===0&&x){if(delete $._skipMinimizeTopLevel,B)this.$set(B,{});return this}$=Object.assign({},$,{_skipMinimizeTopLevel:!1});for(let g=0;g<u;++g){q=G[g];let p=C?C+q:q;W=this.$__schema.pathType(p);let A1=F[q];if(D===!0&&!C&&A1!=null&&W==="nested"&&this._doc[q]!=null)delete this._doc[q];if(w1.isNonBuiltinObject(A1)&&W==="nested"){this.$set(p,A1,E,Object.assign({},$,{_skipMarkModified:!0})),HG1(this.$get(p),p,this);continue}else if(K){if(E&&A1===void 0&&this.$get(p)!==void 0)continue;if(W==="adhocOrUndefined")W=fC(this,p,{typeOnly:!0});if(W==="real"||W==="virtual")this.$set(p,A1,E,$);else if(W==="nested"&&A1 instanceof b)this.$set(p,A1.toObject({transform:!1}),E,$);else if(K==="throw")if(W==="nested")throw new hY1(q,A1);else throw new xC(q);else if(W==="nested"&&A1==null)this.$set(p,A1,E,$)}else this.$set(p,A1,E,$)}let T={},y=Object.keys(this.$__schema.tree);for(let g=0,p=y.length;g<p;++g)(q=y[g])&&this._doc.hasOwnProperty(q)&&(T[q]=void 0);return this._doc=Object.assign(T,this._doc),this}let U=this.$__schema.pathType(F),Z=null;if(U==="adhocOrUndefined")Z=F.indexOf(".")===-1?[F]:F.split("."),U=fC(this,Z,{typeOnly:!0});if(U==="adhocOrUndefined"&&!Q){if(Z==null)Z=F.indexOf(".")===-1?[F]:F.split(".");let u=nY1(this.$__schema,Z);if(u!==void 0)K=u}B=sY1(B,!0);let V=(()=>{if(this.$__.priorDoc!=null)return this.$__.priorDoc.$__getValue(F);if(E)return;return this.$__getValue(F)})();if(U==="nested"&&B){if(typeof B==="object"&&B!=null){if(B.$__!=null)B=B.toObject(zg);if(B==null)return this.invalidate(F,new C6.CastError("Object",B,F)),this;let u=this.$isModified(F),x=this.$__.savedState!=null&&this.$__.savedState.hasOwnProperty(F);if(this.$__.savedState!=null&&!this.$isNew&&!this.$__.savedState.hasOwnProperty(F)){let y=this.$__getValue(F);this.$__.savedState[F]=y;let g=Object.keys(y||{});for(let p of g)this.$__.savedState[F+"."+p]=y[p]}if(!J)this.$__setValue(F,null),SC(this,F);else return this.$set(B,F,E,$);let T=Xg(this.$__schema,B,F);this.$__setValue(F,{});for(let y of T)this.$set(F+"."+y,B[y],E,{...$,_skipMarkModified:!0});if(V!=null&&(!u||x)&&w1.deepEqual(x?this.$__.savedState[F]:V,B))this.unmarkModified(F);else this.markModified(F);return this}return this.invalidate(F,new C6.CastError("Object",B,F)),this}let w;if(Z==null)Z=F.indexOf(".")===-1?[F]:F.split(".");if(typeof this.$__schema.aliases[Z[0]]==="string")Z[0]=this.$__schema.aliases[Z[0]];if(U==="adhocOrUndefined"&&K){let u;for(H=0;H<Z.length;++H){let x=Z.slice(0,H+1).join(".");if(H+1<Z.length&&this.$__schema.pathType(x)==="virtual")return oY1.set(F,B,this),this;if(w=this.$__schema.path(x),w==null)continue;if(w instanceof Jg){u=!0;break}else if(w.$isSchemaMap&&w.$__schemaType instanceof Jg&&H<Z.length-1){u=!0,w=w.$__schemaType;break}}if(w==null)w=fC(this,F);if(!u&&!w){if(K==="throw")throw new xC(F);return this}}else if(U==="virtual")return w=this.$__schema.virtualpath(F),w.applySetters(B,this),this;else w=this.$__path(F);let R=this._doc,I="";for(H=0;H<Z.length-1;++H)if(R=R instanceof Map?R.get(Z[H]):R[Z[H]],I+=(I.length!==0?".":"")+Z[H],!R){if(this.$set(I,{}),!this.$__isSelected(I))this.unmarkModified(I);R=this.$__getValue(I)}let j;if(Z.length<=1)j=F;else{let u=Z.length;for(H=0;H<u;++H){let x=Z.slice(0,H+1).join(".");if(this.$get(x,null,{getters:!1})===null){j=x;break}}if(!j)j=F}if(!w){if(this.$__set(j,F,$,E,Z,w,B,V),U==="nested"&&B==null)SC(this,F);return this}if(w.$isSingleNested||w.$isMongooseArray)zG1(this,F);if(B!=null&&J&&w.$isSingleNested){if(B instanceof b)B=B.toObject({virtuals:!1,transform:!1});let u=Object.keys(B);for(let x of u)this.$set(F+"."+x,B[x],E,$);return this}let k=!0;try{let u=(()=>{if(w.options==null)return!1;if(!(B instanceof b))return!1;let g=B.constructor,p=typeof w.options.ref==="function"&&!w.options.ref[XG1]?w.options.ref.call(this,this):w.options.ref,A1=p?.modelName||p;if(A1!=null&&(A1===g.modelName||A1===g.baseModelName))return!0;let L0=w.options.refPath;if(L0==null)return!1;let F2=B.get(L0);return F2===g.modelName||F2===g.baseModelName})(),x=!1;if(u&&B instanceof b&&(!B.$__.wasPopulated||w1.deepEqual(B.$__.wasPopulated.value,B._doc._id))){let g=w&&w.$isSingleNested?w.cast(B,this):B._doc._id;this.$populated(F,g,{[Hg]:B.constructor}),B.$__.wasPopulated={value:g},x=!0}let T,y=this.$__schema.options.typeKey;if(w.options&&Array.isArray(w.options[y])&&w.options[y].length&&w.options[y][0]&&w.options[y][0].ref&&WG1(B,w.options[y][0].ref)){T={[Hg]:B[0].constructor},this.$populated(F,B.map(function(g){return g._doc._id}),T);for(let g of B)g.$__.wasPopulated={value:g._doc._id};x=!0}if(!u||!w.$isSingleNested||!B.$__){let g=this;if(this.$__schema.singleNestedPaths[F]!=null&&Z.length>1)g=GG1(this,Z,this.schema);if($!=null&&$.overwriteImmutable)B=w.applySetters(B,g,!1,V,{path:F,overwriteImmutable:!0});else B=w.applySetters(B,g,!1,V,{path:F})}if(Array.isArray(B)&&!Array.isArray(w)&&w.$isMongooseDocumentArray&&B.length!==0&&B[0]!=null&&B[0].$__!=null&&B[0].$__.populated!=null){let g=Object.keys(B[0].$__.populated);for(let p of g)this.$populated(F+"."+p,B.map((A1)=>A1.$populated(p)),B[0].$__.populated[p].options);x=!0}if(!x&&this.$__.populated){if(Array.isArray(B)&&this.$__.populated[F]){for(let g=0;g<B.length;++g)if(B[g]instanceof b)B.set(g,B[g]._doc._id,!0)}delete this.$__.populated[F]}if(B!=null&&w.$isSingleNested)UG1(B,w,V);this.$markValid(F)}catch(u){if(u instanceof C6.StrictModeError&&u.isImmutableError)this.invalidate(F,u);else if(u instanceof C6.CastError){if(this.invalidate(u.path,u),u.$originalErrorPath)this.invalidate(F,new C6.CastError(w.instance,B,F,u.$originalErrorPath))}else this.invalidate(F,new C6.CastError(w.instance,B,F,u));k=!1}if(k){let u=null,x=null;if(!E){let g=this.$isSubdocument?this.ownerDocument():this;u=g.$__.savedState,x=this.$isSubdocument?this.$__.fullPath+"."+F:F,g.$__saveInitialState(x)}this.$__set(j,F,$,E,Z,w,B,V);let T=!!this.$__.session?.transaction,y=this.$__.session&&this.$__.session[qJ]&&this.$__.session[qJ].has(this)&&this.$__.session[qJ].get(this).modifiedPaths&&!this.$__.session[qJ].get(this).modifiedPaths.has(x);if(u!=null&&u.hasOwnProperty(x)&&(!T||y)&&w1.deepEqual(B,u[x]))this.unmarkModified(F)}if(w.$isSingleNested&&(this.isDirectModified(F)||B==null))SC(this,F);return this};/*!
 * ignore
 */function WG1(A,F){if(!Array.isArray(A))return!1;if(A.length===0)return!1;for(let B of A){if(!(B instanceof b))return!1;if(B.constructor.modelName==null)return!1;if(B.constructor.modelName!=F&&B.constructor.baseModelName!=F)return!1}return!0}b.prototype.set=b.prototype.$set;b.prototype.$__shouldModify=function(A,F,B,D,$,J,X,E){if(B&&B._skipMarkModified)return!1;if(this.$isNew)return!0;if(F in this.$__.activePaths.getStatePaths("modify"))return!0;if(X===void 0&&!this.$__isSelected(F))return!0;if(X===void 0&&F in this.$__.activePaths.getStatePaths("default"))return!1;if(this.$populated(F)&&X instanceof b&&CJ(X._doc._id,E))return!1;if(!CJ(X,E!==void 0?E:w1.getValue(F,this)))return!0;if(!D&&X!==null&&X!==void 0&&F in this.$__.activePaths.getStatePaths("default")&&CJ(X,J.getDefault(this,D)))return!0;return!1};b.prototype.$__set=function(A,F,B,D,$,J,X,E){kF=kF||Y5();let Y=this.$__shouldModify(A,F,B,D,$,J,X,E);if(Y){if(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[F]){if(delete this.$__.primitiveAtomics[F],Object.keys(this.$__.primitiveAtomics).length===0)delete this.$__.primitiveAtomics}if(this.markModified(A),Wg||(Wg=LC()),X&&w1.isMongooseArray(X)){if(X._registerAtomic("$set",X),w1.isMongooseDocumentArray(X))X.forEach(function(C){C&&C.__parentArray&&(C.__parentArray=X)})}}else if(Array.isArray(X)&&Array.isArray(E)&&w1.isMongooseArray(X)&&w1.isMongooseArray(E)){if(X[A6]=E[A6],X[OF]=E[OF],w1.isMongooseDocumentArray(X))X.forEach((C)=>{if(C!=null)C.$isNew=!1})}let G=this._doc,H=0,W=$.length,q="";for(;H<W;H++){let Q=H+1===W;if(q+=q?"."+$[H]:$[H],Zg.has($[H]))continue;if(Q)if(G instanceof Map)G.set($[H],X);else if(G.$isSingleNested){if(!($[H]in G))G[$[H]]=X,G._doc[$[H]]=X;else G._doc[$[H]]=X;if(Y)G.markModified($[H])}else G[$[H]]=X;else{let K=G instanceof Map,U=K?G.get($[H]):G[$[H]];if(w1.isPOJO(U))G=U;else if(U&&U instanceof kF)G=U;else if(U&&!Array.isArray(U)&&U.$isSingleNested)G=U;else if(U&&Array.isArray(U))G=U;else if(U==null){if(U={},K)G.set($[H],U);else G[$[H]]=U;G=U}else G=U}}};b.prototype.$__getValue=function(A){if(typeof A!=="string"&&!Array.isArray(A))throw new TypeError(`Invalid \`path\`. Must be either string or array. Got "${A}" (type ${typeof A})`);return w1.getValue(A,this._doc)};b.prototype.$inc=function A(F,B){if(B==null)B=1;if(Array.isArray(F))return F.forEach((Y)=>this.$inc(Y,B)),this;let D=this.$__path(F);if(D==null){if(this.$__.strictMode==="throw")throw new xC(F);else if(this.$__.strictMode===!0)return this}else if(D.instance!=="Number")return this.invalidate(F,new C6.CastError(D.instance,B,F)),this;let $=this.$__getValue(F)||0,J=!1,X=null,E=B;try{B=D.cast(B),X=D.applySetters($+B,this),E=X-$,J=!0}catch(Y){this.invalidate(F,new C6.CastError("number",B,F,Y))}if(J){if(this.$__.primitiveAtomics=this.$__.primitiveAtomics||{},this.$__.primitiveAtomics[F]==null)this.$__.primitiveAtomics[F]={$inc:E};else this.$__.primitiveAtomics[F].$inc+=E;this.markModified(F),this.$__setValue(F,X)}return this};b.prototype.$__setValue=function(A,F){return w1.setValue(A,F,this._doc),this};b.prototype.get=function(A,F,B){let D;if(B==null)B={};if(F)D=this.$__schema.interpretAsType(A,F,this.$__schema.options);let $=B.noDottedPath,J=$?this.$__schema.paths[A]:this.$__path(A);if(J==null){if(J=this.$__schema.virtualpath(A),J!=null)return J.applyGetters(void 0,this)}if($){let G=this._doc[A];if(D)G=D.cast(G);if(J!=null&&B.getters!==!1)return J.applyGetters(G,this);return G}if(J!=null&&J.instance==="Mixed"){let G=this.$__schema.virtualpath(A);if(G!=null)J=G}let X=A.indexOf(".")!==-1,E=this._doc,Y=X?A.split("."):[A];if(typeof this.$__schema.aliases[Y[0]]==="string")Y[0]=this.$__schema.aliases[Y[0]];for(let G=0,H=Y.length;G<H;G++){if(E&&E._doc)E=E._doc;if(E==null)E=void 0;else if(E instanceof Map)E=E.get(Y[G],{getters:!1});else if(G===H-1)E=w1.getValue(Y[G],E);else E=E[Y[G]]}if(D)E=D.cast(E);if(J!=null&&B.getters!==!1)E=J.applyGetters(E,this);else if(this.$__schema.nested[A]&&B.virtuals)return hC(this,T3(E)||{},{path:A});return E};/*!
 * ignore
 */b.prototype[JG1]=b.prototype.get;b.prototype.$get=b.prototype.get;b.prototype.$__path=function(A){let F=this.$__.adhocPaths,B=F&&F.hasOwnProperty(A)?F[A]:null;if(B)return B;return this.$__schema.path(A)};b.prototype.markModified=function(A,F){if(this.$__saveInitialState(A),this.$__.activePaths.modify(A),F!=null&&!this.$isSubdocument)this.$__.pathsToScopes=this.$__pathsToScopes||{},this.$__.pathsToScopes[A]=F};/*!
 * ignore
 */b.prototype.$__saveInitialState=function A(F){let B=this.$__.savedState,D=F;if(B!=null){let $=D.indexOf("."),J=$===-1?D:D.slice(0,$);if(!B.hasOwnProperty(J))B[J]=T3(this.$__getValue(J))}};b.prototype.unmarkModified=function(A){if(this.$__.activePaths.init(A),this.$__.pathsToScopes!=null)delete this.$__.pathsToScopes[A]};b.prototype.$ignore=function(A){this.$__.activePaths.ignore(A)};b.prototype.directModifiedPaths=function(){return Object.keys(this.$__.activePaths.getStatePaths("modify"))};b.prototype.$isEmpty=function(A){let F={minimize:!0,virtuals:!1,getters:!1,transform:!1};if(arguments.length!==0){let B=this.$get(A);if(B==null)return!0;if(typeof B!=="object")return!1;if(w1.isPOJO(B))return wg(B);return Object.keys(B.toObject(F)).length===0}return Object.keys(this.toObject(F)).length===0};/*!
 * ignore
 */function wg(A){if(A==null)return!0;if(typeof A!=="object"||Array.isArray(A))return!1;for(let F of Object.keys(A))if(!wg(A[F]))return!1;return!0}b.prototype.modifiedPaths=function(A){A=A||{};let F=Object.keys(this.$__.activePaths.getStatePaths("modify")),B=new Set,D=0,$=0,J=F.length;for(D=0;D<J;++D){let X=F[D],E=yC(X),Y=E.length;for($=0;$<Y;++$)B.add(E[$]);if(!A.includeChildren)continue;let G=0,H=this.$get(X);if(typeof H==="object"&&H!==null){if(H._doc)H=H._doc;let W=H.length;if(Array.isArray(H))for(G=0;G<W;++G){let q=X+"."+G;if(!B.has(q)){if(B.add(q),H[G]!=null&&H[G].$__){let C=H[G].modifiedPaths(),Q=0,K=C.length;for(Q=0;Q<K;++Q)B.add(q+"."+C[Q])}}}else{let q=Object.keys(H),C=0,Q=q.length;for(C=0;C<Q;++C)B.add(X+"."+q[C])}}}return Array.from(B)};b.prototype[Ug]=b.prototype.modifiedPaths;b.prototype.isModified=function(A,F,B){if(A){let D=F&&F.ignoreAtomics,$=this.$__.activePaths.states.modify;if($==null)return!1;if(typeof A==="string")A=A.indexOf(" ")===-1?[A]:A.split(" ");for(let Y of A)if($[Y]!=null)return!0;let J=B||this[Ug](),X=A.some(function(Y){return!!~J.indexOf(Y)}),E=Object.keys($);if(D)E=E.filter((Y)=>{let G=this.$__getValue(Y);if(G!=null&&G[A6]!=null&&G[A6].$set===void 0)return!1;return!0});return X||A.some(function(Y){return E.some(function(G){return G===Y||Y.startsWith(G+".")})})}return this.$__.activePaths.some("modify")};b.prototype.$isModified=b.prototype.isModified;b.prototype[DG1]=b.prototype.isModified;b.prototype.$isDefault=function(A){if(A==null)return this.$__.activePaths.some("default");if(typeof A==="string"&&A.indexOf(" ")===-1)return this.$__.activePaths.getStatePaths("default").hasOwnProperty(A);let F=A;if(!Array.isArray(F))F=F.split(" ");return F.some((B)=>this.$__.activePaths.getStatePaths("default").hasOwnProperty(B))};b.prototype.$isDeleted=function(A){if(arguments.length===0)return!!this.$__.isDeleted;return this.$__.isDeleted=!!A,this};b.prototype.isDirectModified=function(A){if(A==null)return this.$__.activePaths.some("modify");if(typeof A==="string"&&A.indexOf(" ")===-1){let B=this.$__.activePaths.getStatePaths("modify").hasOwnProperty(A);if(B||A.indexOf(".")===-1)return B;let D=A.split(".");for(let $=0;$<D.length-1;++$){let J=D.slice(0,$+1).join("."),X=this.$get(J);if(X!=null&&X.$__!=null&&X.isDirectModified(D.slice($+1).join(".")))return!0}return!1}let F=A;if(typeof F==="string")F=F.split(" ");return F.some((B)=>this.isDirectModified(B))};b.prototype.isInit=function(A){if(A==null)return this.$__.activePaths.some("init");if(typeof A==="string"&&A.indexOf(" ")===-1)return this.$__.activePaths.getStatePaths("init").hasOwnProperty(A);let F=A;if(!Array.isArray(F))F=F.split(" ");return F.some((B)=>this.$__.activePaths.getStatePaths("init").hasOwnProperty(B))};b.prototype.isSelected=function A(F){if(this.$__.selected==null)return!0;if(!F)return!1;if(F==="_id")return this.$__.selected._id!==0;if(F.indexOf(" ")!==-1)F=F.split(" ");if(Array.isArray(F))return F.some((J)=>this.$__isSelected(J));let B=Object.keys(this.$__.selected),D=null;if(B.length===1&&B[0]==="_id")return this.$__.selected._id===0;for(let J of B){if(J==="_id")continue;if(!Kg(this.$__.selected[J]))continue;D=!!this.$__.selected[J];break}if(D===null)return!0;if(F in this.$__.selected)return D;let $=F+".";for(let J of B){if(J==="_id")continue;if(J.startsWith($))return D||J!==$;if($.startsWith(J+"."))return D}return!D};b.prototype.$__isSelected=b.prototype.isSelected;b.prototype.isDirectSelected=function A(F){if(this.$__.selected==null)return!0;if(F==="_id")return this.$__.selected._id!==0;if(F.indexOf(" ")!==-1)F=F.split(" ");if(Array.isArray(F))return F.some(($)=>this.isDirectSelected($));let B=Object.keys(this.$__.selected),D=null;if(B.length===1&&B[0]==="_id")return this.$__.selected._id===0;for(let $ of B){if($==="_id")continue;if(!Kg(this.$__.selected[$]))continue;D=!!this.$__.selected[$];break}if(D===null)return!0;if(this.$__.selected.hasOwnProperty(F))return D;return!D};b.prototype.validate=async function A(F,B){if(typeof F==="function"||typeof B==="function"||typeof arguments[2]==="function")throw new C6("Document.prototype.validate() no longer accepts a callback");if(this.$op="validate",arguments.length===1){if(typeof arguments[0]==="object"&&!Array.isArray(arguments[0]))B=arguments[0],F=null}if(B&&typeof B.pathsToSkip==="string"){let $=B.pathsToSkip.indexOf(" ")===-1;B.pathsToSkip=$?[B.pathsToSkip]:B.pathsToSkip.split(" ")}let D=B&&B._skipParallelValidateCheck;if(this.$isSubdocument!=null);else if(this.$__.validating&&!D)throw new mY1(this);else if(!D)this.$__.validating=!0;return new Promise(($,J)=>{this.$__validate(F,B,(X)=>{if(this.$op=null,this.$__.validating=null,X!=null)return J(X);$()})})};b.prototype.$validate=b.prototype.validate;/*!
 * ignore
 */function qG1(A){let F=Object.keys(A.$__.activePaths.getStatePaths("require")),B=0,D=F.length;for(B=0;B<D;++B){let $=F[B],J=A.$__schema.path($);if(J!=null&&typeof J.originalRequiredValue==="function"){A.$__.cachedRequired=A.$__.cachedRequired||{};try{A.$__.cachedRequired[$]=J.originalRequiredValue.call(A,A)}catch(X){A.invalidate($,X)}}}}/*!
 * ignore
 */function Lg(A,F,B,D){let $={};qG1(A);let J=new Set(Object.keys(A.$__.activePaths.getStatePaths("require")).filter(function(Y){if(!A.$__isSelected(Y)&&!A.$isModified(Y))return!1;if(A.$__.cachedRequired!=null&&Y in A.$__.cachedRequired)return A.$__.cachedRequired[Y];return!0}));Object.keys(A.$__.activePaths.getStatePaths("init")).forEach(X),Object.keys(A.$__.activePaths.getStatePaths("modify")).forEach(X),Object.keys(A.$__.activePaths.getStatePaths("default")).forEach(X);function X(Y){if(Y.endsWith(".$*"))return;J.add(Y)}if(!D){let Y=[];for(let H of Object.keys(A.$__schema.paths)){let W=A.$__schema.path(H);if(W.$isSingleNested){let q=A.$get(H);if(q)Y.push(q)}else if(W.$isMongooseDocumentArray){let q=A.$get(H);if(q&&q.length){for(let C of q)if(C)Y.push(C)}}}let G=A.modifiedPaths();for(let H of Y)if(H.$basePath){let W=H.$__pathRelativeToParent();for(let C of H.modifiedPaths())J.delete(W+"."+C);let q=H.$parent();if(q==null)throw new Error("Cannot validate subdocument that does not have a parent");if(A.$isModified(W,null,G)&&!q.$__.activePaths.getStatePaths("modify").hasOwnProperty(W)&&!q.$isDefault(W)){if(J.add(W),A.$__.pathsToScopes==null)A.$__.pathsToScopes={};if(A.$__.pathsToScopes[W]=H.$isDocumentArrayElement?H.__parentArray:H.$parent(),$[W]={skipSchemaValidators:!0},H.$isDocumentArrayElement&&H.__index!=null)$[W].index=H.__index}}}for(let Y of J){let G=A.$__schema.path(Y);if(!G)continue;if(G.$isMongooseDocumentArray){for(let H of J)if(H==null||H.startsWith(G.path+"."))J.delete(H)}if(!G.caster&&G.validators.length===0&&!G.$parentSchemaDocArray)J.delete(Y);else if(G.$isMongooseArray&&!G.$isMongooseDocumentArray&&!G.$embeddedSchemaType.$isMongooseArray&&G.validators.length===0&&G.$embeddedSchemaType.validators.length===0)J.delete(Y)}if(Array.isArray(F))J=QG1(J,F);else if(Array.isArray(B))J=KG1(J,B);CG1(A,J);let E={skipArrays:!0};for(let Y of J)if(A.$__schema.nested[Y]){let G=A.$__getValue(Y);if(FG1(G))G=G.toObject({transform:!1});let H=iY1(G,Y,E,A.$__schema);Object.keys(H).filter((W)=>!A.$__schema.singleNestedPaths.hasOwnProperty(W)).forEach(X)}for(let Y of J){let G=A.$__schema.path(Y);if(!G)continue;if(G.$parentSchemaDocArray&&typeof G.$parentSchemaDocArray.path==="string")J.add(G.$parentSchemaDocArray.path);if(!G.$isSchemaMap)continue;let H=A.$__getValue(Y);if(H==null)continue;for(let W of H.keys())J.add(Y+"."+W)}return J=Array.from(J),[J,$]}function CG1(A,F){for(let B of F){let D=A.$__schema.path(B);if(!D)continue;if(!D.$isMongooseArray||!Array.isArray(D)&&D.$isMongooseDocumentArray&&!(D&&D.schemaOptions&&D.schemaOptions.required))continue;if(D.$isMongooseArray&&!D.$isMongooseDocumentArray&&!D.$embeddedSchemaType.$isMongooseArray&&D.$embeddedSchemaType.validators.length===0)continue;let $=A.$__getValue(B);zJ($,F,B)}}function zJ(A,F,B){if(A!=null){let D=A.length;for(let $=0;$<D;++$)if(Array.isArray(A[$]))zJ(A[$],F,B+"."+$);else F.add(B+"."+$)}}/*!
 * ignore
 */b.prototype.$__validate=function(A,F,B){if(this.$__.saveOptions&&this.$__.saveOptions.pathsToSave&&!A)A=[...this.$__.saveOptions.pathsToSave];else if(typeof A==="function")B=A,F=null,A=null;else if(typeof F==="function")B=F,F=null;let D=F&&typeof F==="object"&&"validateModifiedOnly"in F,$=F&&F.pathsToSkip||null,J;if(D)J=!!F.validateModifiedOnly;else J=this.$__schema.options.validateModifiedOnly;let X=F&&F.validateAllPaths;if(X){if($)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(A)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`");if(D&&J)throw new TypeError("Cannot set both `validateAllPaths` and `validateModifiedOnly`")}let E=this,Y=()=>{let U=this.$__.validationError;if(this.$__.validationError=null,this.$__.validating=null,J&&U!=null){let Z=Object.keys(U.errors);for(let V of Z)if(!this.$isModified(V))delete U.errors[V];if(Object.keys(U.errors).length===0)U=void 0}if(this.$__.cachedRequired={},this.$emit("validate",E),this.constructor.emit("validate",E),U){for(let Z in U.errors)if(!this[BG1]&&U.errors[Z]instanceof C6.CastError)this.invalidate(Z,U.errors[Z]);return U}},G,H;if(X){G=new Set(Object.keys(this.$__schema.paths));for(let U of G){let Z=this.$__schema.path(U);if(!Z||!Z.$isMongooseArray)continue;let V=this.$__getValue(U);if(!V)continue;zJ(V,G,U)}G=[...G],H={}}else{let U=Lg(this,A,$,F&&F._nestedValidate);G=J?U[0].filter((Z)=>this.$isModified(Z)):U[0],H=U[1]}if(typeof A==="string")A=A.split(" ");if(G.length===0)return Eg(function(){let U=Y();if(U)return E.$__schema.s.hooks.execPost("validate:error",E,[E],{error:U},function(Z){B(Z)});B(null,E)});let W={},q=0,C=this.$__.saveOptions?.pathsToSave;if(Array.isArray(C)){C=new Set(C);for(let U of G){if(!C.has(U))continue;Q(U)}}else for(let U of G)Q(U);function Q(U){if(U==null||W[U])return;W[U]=!0,q++,Eg(function(){let Z=E.$__schema.path(U);if(!Z)return--q||K();if(!E.$isValid(U)){--q||K();return}if(Z[YG1]!=null&&U!==Z.path)return--q||K();let V=E.$__getValue(U),w;if(w=E.$populated(U))V=w;else if(V!=null&&V.$__!=null&&V.$__.wasPopulated)V=V._doc._id;let R=E.$__.pathsToScopes!=null&&U in E.$__.pathsToScopes?E.$__.pathsToScopes[U]:E,I={...H[U],path:U,validateAllPaths:X,_nestedValidate:!0};Z.doValidate(V,function(j){if(j){if((Z.$isSingleNested||Z.$isArraySubdocument||Z.$isMongooseDocumentArray)&&j instanceof KJ)return--q||K();E.invalidate(U,j,void 0,!0)}--q||K()},R,I)})}function K(){let U=Y();if(U)return E.$__schema.s.hooks.execPost("validate:error",E,[E],{error:U},function(Z){B(Z)});B(null,E)}};/*!
 * ignore
 */function QG1(A,F){let B=new Set(F),D=new Map([]);for(let J of F){if(J.indexOf(".")===-1)continue;let X=J.split("."),E=X[0];for(let Y=1;Y<X.length;++Y)D.set(E,J),E=E+"."+X[Y]}let $=new Set;for(let J of A)if(B.has(J))$.add(J);else if(D.has(J))$.add(D.get(J));return $}/*!
 * ignore
 */function KG1(A,F){return F=new Set(F),A=Array.from(A).filter((B)=>!F.has(B)),new Set(A)}b.prototype.validateSync=function(A,F){let B=this;if(arguments.length===1&&typeof arguments[0]==="object"&&!Array.isArray(arguments[0]))F=arguments[0],A=null;let D=F&&typeof F==="object"&&"validateModifiedOnly"in F,$;if(D)$=!!F.validateModifiedOnly;else $=this.$__schema.options.validateModifiedOnly;let J=F&&F.pathsToSkip,X=F&&F.validateAllPaths;if(X){if(J)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(A)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`")}if(typeof A==="string")A=A.indexOf(" ")===-1?[A]:A.split(" ");else if(typeof J==="string"&&J.indexOf(" ")!==-1)J=J.split(" ");let E,Y;if(X){E=new Set(Object.keys(this.$__schema.paths));for(let W of E){let q=this.$__schema.path(W);if(!q||!q.$isMongooseArray)continue;let C=this.$__getValue(W);if(!C)continue;zJ(C,E,W)}E=[...E],Y={}}else{let W=Lg(this,A,J);E=$?W[0].filter((q)=>this.$isModified(q)):W[0],Y=W[1]}let G={};for(let W=0,q=E.length;W<q;++W){let C=E[W];if(G[C])continue;G[C]=!0;let Q=B.$__schema.path(C);if(!Q)continue;if(!B.$isValid(C))continue;let K=B.$__getValue(C),U=Q.doValidateSync(K,B,{skipSchemaValidators:Y[C],path:C,validateModifiedOnly:$,validateAllPaths:X});if(U){if((Q.$isSingleNested||Q.$isArraySubdocument||Q.$isMongooseDocumentArray)&&U instanceof KJ)continue;B.invalidate(C,U,void 0,!0)}}let H=B.$__.validationError;if(B.$__.validationError=void 0,B.$emit("validate",B),B.constructor.emit("validate",B),H){for(let W in H.errors)if(H.errors[W]instanceof C6.CastError)B.invalidate(W,H.errors[W])}return H};b.prototype.invalidate=function(A,F,B,D){if(!this.$__.validationError)this.$__.validationError=new KJ(this);if(this.$__.validationError.errors[A])return;if(!F||typeof F==="string")F=new Cg({path:A,message:F,type:D||"user defined",value:B});if(this.$__.validationError===F)return this.$__.validationError;return this.$__.validationError.addError(A,F),this.$__.validationError};b.prototype.$markValid=function(A){if(!this.$__.validationError||!this.$__.validationError.errors[A])return;if(delete this.$__.validationError.errors[A],Object.keys(this.$__.validationError.errors).length===0)this.$__.validationError=null};/*!
 * ignore
 */function zG1(A,F){if(!A.$__.validationError)return;let B=Object.keys(A.$__.validationError.errors);for(let D of B)if(D.startsWith(F+"."))delete A.$__.validationError.errors[D];if(Object.keys(A.$__.validationError.errors).length===0)A.$__.validationError=null}/*!
 * ignore
 */function UG1(A,F,B){let D=F.schema;if(D==null)return;for(let $ of Object.keys(D.paths)){let J=D.paths[$];if(J.$immutableSetter==null)continue;let X=B==null?void 0:B.$__getValue($);J.$immutableSetter.call(A,X)}}b.prototype.$isValid=function(A){if(this.$__.validationError==null||Object.keys(this.$__.validationError.errors).length===0)return!0;if(A==null)return!1;if(A.indexOf(" ")!==-1)A=A.split(" ");if(Array.isArray(A))return A.some((F)=>this.$__.validationError.errors[F]==null);return this.$__.validationError.errors[A]==null};b.prototype.$__reset=function A(){let F=this,B=!this.$isSubdocument?this.$getAllSubdocs({useCache:!0}):null;if(B&&B.length>0)for(let D of B)D.$__reset();return this.$__dirty().forEach(function(D){let $=D.value;if($&&$[A6])$[OF]=$[A6],$[A6]={}}),this.$__.backup={},this.$__.backup.activePaths={modify:Object.assign({},this.$__.activePaths.getStatePaths("modify")),default:Object.assign({},this.$__.activePaths.getStatePaths("default"))},this.$__.backup.validationError=this.$__.validationError,this.$__.backup.errors=this.$errors,this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("default"),this.$__.validationError=void 0,this.$errors=void 0,F=this,this.$__schema.requiredPaths().forEach(function(D){F.$__.activePaths.require(D)}),this};/*!
 * ignore
 */b.prototype.$__undoReset=function A(){if(this.$__.backup==null||this.$__.backup.activePaths==null)return;this.$__.activePaths.states.modify=this.$__.backup.activePaths.modify,this.$__.activePaths.states.default=this.$__.backup.activePaths.default,this.$__.validationError=this.$__.backup.validationError,this.$errors=this.$__.backup.errors;for(let F of this.$__dirty()){let B=F.value;if(B&&B[A6]&&B[OF])B[A6]=B[OF]}if(!this.$isSubdocument)for(let F of this.$getAllSubdocs())F.$__undoReset()};b.prototype.$__dirty=function(){let A=this,F=this.$__.activePaths.map("modify",function($){return{path:$,value:A.$__getValue($),schema:A.$__path($)}});F=F.concat(this.$__.activePaths.map("default",function($){if($==="_id"||A.$__getValue($)==null)return;return{path:$,value:A.$__getValue($),schema:A.$__path($)}}));let B=new Map(F.filter(($)=>$!=null).map(($)=>[$.path,$.value])),D=[];return F.forEach(function($){if(!$)return;let J=null,X=yC($.path);for(let E=0;E<X.length-1;E++)if(B.has(X[E])){J=B.get(X[E]);break}if(J==null)D.push($);else if(J!=null&&J[A6]!=null&&J.hasAtomics())J[A6]={},J[A6].$set=J}),D};b.prototype.$__setSchema=function(A){lY1(A.tree,this,void 0,A.options);for(let F of Object.keys(A.virtuals))A.virtuals[F]._applyDefaultGetters();if(A.path("schema")==null)this.schema=A;this.$__schema=A,this[$G1]=A};b.prototype.$__getArrayPathsToValidate=function(){return QJ||(QJ=P7()),this.$__.activePaths.map("init","modify",function(A){return this.$__getValue(A)}.bind(this)).filter(function(A){return A&&Array.isArray(A)&&w1.isMongooseDocumentArray(A)&&A.length}).reduce(function(A,F){return A.concat(F)},[]).filter(function(A){return A})};b.prototype.$getAllSubdocs=function(A){if(A?.useCache&&this.$__.saveOptions?.__subdocs)return this.$__.saveOptions.__subdocs;QJ||(QJ=P7()),kF=kF||Y5();let F=[];function B(D){let $=[];for(let{model:J}of D.$__schema.childSchemas){let X=D.$__getValue(J.path);if(X==null)continue;if(X.$__)$.push(X);if(Array.isArray(X)){for(let E of X)if(E!=null&&E.$__)$.push(E)}if(X instanceof Map){for(let E of X.values())if(E!=null&&E.$__)$.push(E)}}for(let J of $)B(J);F.push(...$)}if(B(this),this.$__.saveOptions)this.$__.saveOptions.__subdocs=F;return F};/*!
 * Runs queued functions
 */function ZG1(A){let F=A.$__schema&&A.$__schema.callQueue;if(!F.length)return;for(let B of F)if(B[0]!=="pre"&&B[0]!=="post"&&B[0]!=="on")A[B[0]].apply(A,B[1])}/*!
 * ignore
 */b.prototype.$__handleReject=function A(F){if(this.$listeners("error").length)this.$emit("error",F);else if(this.constructor.listeners&&this.constructor.listeners("error").length)this.constructor.emit("error",F)};b.prototype.$toObject=function(A,F){let B=this.$__schema._defaultToObjectOptions(F),D=this.$__hasOnlyPrimitiveValues();A=w1.isPOJO(A)?{...A}:{},A._calledWithOptions=A._calledWithOptions||{...A};let $;if(A._calledWithOptions.minimize!=null)$=A.minimize;else if(this.$__schemaTypeOptions?.minimize!=null)$=this.$__schemaTypeOptions.minimize;else if(B!=null&&B.minimize!=null)$=B.minimize;else $=this.$__schema.options.minimize;if(A.minimize=$,!D)A._seen=A._seen||new Map;let J=A._calledWithOptions.depopulate??B?.depopulate??A.depopulate??!1;if(J&&A._isNested&&this.$__.wasPopulated)return T3(this.$__.wasPopulated.value||this._doc._id,A);if(J)A.depopulate=!0;if(B!=null){for(let C of Object.keys(B))if(A[C]==null)A[C]=B[C]}A._isNested=!0,A.json=F,A.minimize=$;let X=A._parentOptions;A._parentOptions=this.$isSubdocument?A:null;let E=A._calledWithOptions.schemaFieldsOnly??A.schemaFieldsOnly??B.schemaFieldsOnly??!1,Y;if(D&&!A.flattenObjectIds)Y=this.$__toObjectShallow(E);else if(E){Y={};for(let C of Object.keys(this.$__schema.paths)){let Q=this.$__getValue(C);if(Q===void 0)continue;let K=C,U=Y;if(C.indexOf(".")!==-1){let Z=C.split(".");K=Z[Z.length-1];for(let V=0;V<Z.length-1;++V)U[Z[V]]=U[Z[V]]??{},U=U[Z[V]]}if(Q===null){U[K]=null;continue}U[K]=T3(Q,A)}}else Y=T3(this._doc,A)||{};let G=A._calledWithOptions.getters??A.getters??B.getters??!1;if(G){if(VG1(this,Y),A.minimize)Y=tY1(Y)||{}}let H=A._calledWithOptions.virtuals??B.virtuals??X?.virtuals??void 0;if(H||G&&H!==!1)hC(this,Y,A,A);if(A.versionKey===!1&&this.$__schema.options.versionKey)delete Y[this.$__schema.options.versionKey];let W=A._calledWithOptions.transform??!0,q=void 0;if(W===!0)q=B.transform;else if(typeof W==="function")q=W;if(W)wG1(this,Y);if(A.useProjection)LG1(this,Y);if(typeof q==="function"){let C=q(this,Y,A);if(typeof C!=="undefined")Y=C}return Y};/*!
 * Internal shallow clone alternative to `$toObject()`: much faster, no options processing
 */b.prototype.$__toObjectShallow=function A(F){let B={};if(this._doc!=null){let D=F?Object.keys(this.$__schema.paths):Object.keys(this._doc);for(let $ of D){let J=this._doc[$];if(J instanceof Date)B[$]=new Date(J);else if(J!==void 0)B[$]=J}}return B};b.prototype.toObject=function(A){return this.$toObject(A)};/*!
 * Applies virtuals properties to `json`.
 */function hC(A,F,B,D){let $=A.$__schema,J=$.virtuals,X=Object.keys(J),E=X.length,Y=E,G,H,W=A._doc,q,C=typeof(D&&D.aliases)==="boolean"?D.aliases:!0;B=B||{};let Q=null;if(Array.isArray(B.virtuals))Q=new Set(B.virtuals);else if(B.virtuals&&B.virtuals.pathsToSkip){Q=new Set(X);for(let K=0;K<B.virtuals.pathsToSkip.length;K++)if(Q.has(B.virtuals.pathsToSkip[K]))Q.delete(B.virtuals.pathsToSkip[K])}if(!W)return F;for(E=0;E<Y;++E){if(G=X[E],Q!=null&&!Q.has(G))continue;if(!C&&$.aliases.hasOwnProperty(G))continue;if(H=G,B.path!=null){if(!G.startsWith(B.path+"."))continue;H=G.substring(B.path.length+1)}if(H.indexOf(".")===-1&&H===G){if(q=J[G].applyGetters(void 0,A),q===void 0)continue;q=T3(q,B),F[H]=q;continue}let K=H.split(".");if(q=T3(A.get(G),B),q===void 0)continue;let U=K.length;W=F;for(let Z=0;Z<U-1;++Z)W[K[Z]]=W[K[Z]]||{},W=W[K[Z]];W[K[U-1]]=q}return F}function VG1(A,F){let B=A.$__schema,D=Object.keys(B.paths),$=D.length,J,X=A._doc,E;if(!X)return F;while($--){J=D[$];let Y=J.split("."),G=Y.length,H=G-1,W=F,q;if(X=A._doc,!A.$__isSelected(J))continue;for(let C=0;C<G;++C){if(q=Y[C],E=X[q],W!=null&&typeof W!=="object")break;else if(C===H){if(W[q]=B.paths[J].applyGetters(W[q],A),Array.isArray(W[q])&&B.paths[J].$embeddedSchemaType)for(let Q=0;Q<W[q].length;++Q)W[q][Q]=B.paths[J].$embeddedSchemaType.applyGetters(W[q][Q],A)}else if(E==null){if(q in X)W[q]=E;break}else W=W[q]||(W[q]={});X=E}}return F}function wG1(A,F){let B=A.$__schema,D=Object.keys(B.paths||{});if(!A._doc)return F;for(let J of D){let X=B.paths[J],E=X.options.transform??X.constructor?.defaultOptions?.transform,Y=X.$embeddedSchemaType?.options?.transform??X.$embeddedSchemaType?.constructor?.defaultOptions?.transform;if(typeof E==="function"){let G=A.$get(J);if(G===void 0)continue;let H=E.call(A,G);qg(J,H),w1.setValue(J,H,F)}else if(typeof Y==="function"){let G=A.$get(J);if(G===void 0)continue;let H=[].concat(G);for(let W=0;W<H.length;++W){let q=Y.call(A,H[W]);H[W]=q,qg(J,q)}F[J]=H}}return F}function qg(A,F){if(AG1(F))throw new Error("`transform` function must be synchronous, but the transform on path `"+A+"` returned a promise.")}/*!
 * ignore
 */function LG1(A,F){let B=A.$__schema,D=Object.keys(B.paths||{});if(!A._doc)return F;let J=A.$__.selected;if(J===void 0)J={},eY1.applyPaths(J,B);if(J==null||Object.keys(J).length===0)return F;for(let X of D)if(J[X]!=null&&!J[X])delete F[X];return F}b.prototype.toJSON=function(A){return this.$toObject(A,!0)};/*!
 * ignore
 */b.prototype.ownerDocument=function(){return this};b.prototype.parent=function(){if(this.$isSubdocument||this.$__.wasPopulated)return this.$__.parent;return this};b.prototype.$parent=b.prototype.parent;b.prototype.inspect=function(A){let F=w1.isPOJO(A),B;if(F)B=A,B.minimize=!1;let D=arguments.length>0?this.toObject(B):this.toObject();if(D==null)return"MongooseDocument { "+D+" }";return D};if(bC.custom)b.prototype[bC.custom]=b.prototype.inspect;b.prototype.toString=function(){let A=this.inspect();if(typeof A==="string")return A;return bC(A)};b.prototype.equals=function(A){if(!A)return!1;let F=this.$__getValue("_id"),B=A.$__!=null?A.$__getValue("_id"):A;if(!F&&!B)return CJ(this,A);return F&&F.equals?F.equals(B):F===B};b.prototype.populate=async function A(){let F={},B=[...arguments];if(typeof B[B.length-1]==="function")throw new C6("Document.prototype.populate() no longer accepts a callback");if(B.length!==0){let J=w1.populate.apply(null,B);for(let X of J)F[X.path]=X}let D=w1.object.vals(F),$=this.constructor;if(this.$__isNested){$=this.$__[EG1].constructor;let J=this.$__.nestedPath;D.forEach(function(X){X.path=J+"."+X.path})}if(this.$session()!=null){let J=this.$session();D.forEach((X)=>{if(X.options==null){X.options={session:J};return}if(!("session"in X.options))X.options.session=J})}return D.forEach((J)=>{J._localModel=$}),$.populate(this,D)};b.prototype.$getPopulatedDocs=function A(){let F=[];if(this.$__.populated!=null)F=F.concat(Object.keys(this.$__.populated));let B=[];for(let D of F){let $=this.$get(D);if(Array.isArray($))B=B.concat($);else if($ instanceof b)B.push($)}return B};b.prototype.populated=function(A,F,B){if(F==null||F===!0){if(!this.$__.populated)return;if(typeof A!=="string")return;let $=A.endsWith(".$*")?A.replace(/\.\$\*$/,""):A,J=this.$__.populated[$];if(J)return F===!0?J:J.value;return}this.$__.populated||(this.$__.populated={}),this.$__.populated[A]={value:F,options:B};let D=A.split(".");for(let $=0;$<D.length-1;++$){let J=D.slice(0,$+1).join("."),X=this.$get(J);if(X!=null&&X.$__!=null&&this.$populated(J)){let E=D.slice($+1).join(".");X.$populated(E,F,B);break}}return F};b.prototype.$populated=b.prototype.populated;b.prototype.$assertPopulated=function A(F,B){if(Array.isArray(F))return F.forEach((D)=>this.$assertPopulated(D,B)),this;if(arguments.length>1)this.$set(B);if(!this.$populated(F))throw new C6(`Expected path "${F}" to be populated`);return this};b.prototype.depopulate=function(A){if(typeof A==="string")A=A.indexOf(" ")===-1?[A]:A.split(" ");let F,B=this.$$populatedVirtuals?Object.keys(this.$$populatedVirtuals):[],D=this.$__&&this.$__.populated||{};if(arguments.length===0){for(let J of B)delete this.$$populatedVirtuals[J],delete this._doc[J],delete D[J];let $=Object.keys(D);for(let J of $){if(F=this.$populated(J),!F)continue;if(delete D[J],Array.isArray(F)){let X=w1.getValue(J,this._doc);if(X.isMongooseArray){let E=X.__array;for(let Y=0;Y<E.length;++Y){let G=E[Y];if(G==null)continue;E[Y]=G instanceof b?G._doc._id:G._id}}else w1.setValue(J,F,this._doc)}else w1.setValue(J,F,this._doc)}return this}for(let $ of A)if(F=this.$populated($),delete D[$],B.indexOf($)!==-1)delete this.$$populatedVirtuals[$],delete this._doc[$];else if(F)if(Array.isArray(F)){let J=w1.getValue($,this._doc);if(J.isMongooseArray){let X=J.__array;for(let E=0;E<X.length;++E){let Y=X[E];if(Y==null)continue;X[E]=Y instanceof b?Y._doc._id:Y._id}}else w1.setValue($,F,this._doc)}else w1.setValue($,F,this._doc);return this};b.prototype.$__fullPath=function(A){return A||""};b.prototype.getChanges=function(){let A=this.$__delta();return A?A[1]:{}};b.prototype.$__delta=function A(){let F=this.$__dirty(),B=this.$__schema.options.optimisticConcurrency;if(B)if(Array.isArray(B)){let Y=new Set(B);if(this.modifiedPaths().find((H)=>Y.has(H)))this.$__.version=F.length?3:1}else this.$__.version=F.length?3:1;if(!F.length&&this.$__.version!==3)return;let D={},$={},J=F.length,X=[],E=0;if(D._id=this._doc._id,(D&&D._id&&D._id.$__||null)!=null)D._id=D._id.toObject({transform:!1,depopulate:!0});for(;E<J;++E){let Y=F[E],G=Y.value,H=RG1(this,Y.path,G);if(H){X.push(H);continue}if(!this.$populated(Y.path,!0)&&this.$__.selected){let q=Y.path.split("."),C=q[0];if(this.$__.selected[C]&&this.$__.selected[C].$elemMatch)if(q.length>1&&q[1]==0&&typeof D[C]==="undefined")D[C]=this.$__.selected[C],q[1]="$",Y.path=q.join(".");else{X.push(Y.path);continue}}if(this.$isDefault(Y.path)&&this.$__.selected){if(Y.path.indexOf(".")===-1&&Gg(this.$__.selected,Y.path))continue;if(yC(Y.path).find((C)=>Gg(this.$__.isSelected,C)))continue}if(X.length)continue;if(G===void 0)w9(this,D,$,Y,1,"$unset");else if(G===null)w9(this,D,$,Y,null);else if(w1.isMongooseArray(G)&&G.$path()&&G[A6])NG1(this,D,$,Y,G);else if(G[bY1.pathSymbol]&&Buffer.isBuffer(G))G=G.toObject(),w9(this,D,$,Y,G);else if(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[Y.path]!=null){let q=this.$__.primitiveAtomics[Y.path],C=pY1(q);w9(this,D,$,Y,q[C],C)}else G=T3(G,{depopulate:!0,transform:!1,virtuals:!1,getters:!1,omitUndefined:!0,_isNested:!0}),w9(this,D,$,Y,G)}if(X.length)return new xY1(X);if(this.$__.version)this.$__version(D,$);if(Object.keys($).length===0)return[D,null];return[D,$]};function RG1(A,F,B){let D=A.$populated(F,!0);if(!D&&A.$__.selected){let J=F.split(".")[0];if(A.$__.selected[J+".$"])return J}if(!(D&&w1.isMongooseArray(B)))return;if(D.options.match||D.options.options&&w1.object.hasOwnProperty(D.options.options,"limit")||D.options.options&&D.options.options.skip||D.options.select&&(D.options.select._id===0||/\s?-_id\s?/.test(D.options.select))){let J=B[A6];if(Object.keys(J).length===0||J.$set||J.$pop)return F}}function w9(A,F,B,D,$,J){if(J||(J="$set"),!B[J])B[J]={};if(B[J][D.path]=$,A.$__schema.options.versionKey===!1)return;if(PG1(A,D.path))return;if((3&A.$__.version)===3)return;if(A.$__schema.options.optimisticConcurrency)return;switch(J){case"$set":case"$unset":case"$pop":case"$pull":case"$pullAll":case"$push":case"$addToSet":case"$inc":break;default:return}if(J==="$push"||J==="$addToSet"||J==="$pullAll"||J==="$pull")if(/\.\d+\.|\.\d+$/.test(D.path))A.$__.version=3;else A.$__.version=2;else if(/^\$p/.test(J))A.$__.version=3;else if(Array.isArray($))A.$__.version=3;else if(/\.\d+\.|\.\d+$/.test(D.path))A.$__.version=1}function NG1(A,F,B,D,$){if(B.$set&&B.$set[D.path])return;if(typeof $.$__getAtomics==="function"){$.$__getAtomics().forEach(function(W){let q=W[0],C=W[1];w9(A,F,B,D,C,q)});return}let J=$[A6],X=Object.keys(J),E=X.length,Y,G;if(E===0){if(w1.isMongooseObject($))$=$.toObject({depopulate:1,_isNested:!0});else if($.valueOf)$=$.valueOf();return w9(A,F,B,D,$)}function H(W){return w1.isMongooseObject(W)?W.toObject({depopulate:1,_isNested:!0}):W}while(E--){if(G=X[E],Y=J[G],w1.isMongooseObject(Y))Y=Y.toObject({depopulate:!0,transform:!1,_isNested:!0});else if(Array.isArray(Y))Y=Y.map(H);else if(Y.valueOf)Y=Y.valueOf();if(G==="$addToSet")Y={$each:Y};w9(A,F,B,D,Y,G)}}function PG1(A,F){let B=A.$__schema.options.skipVersioning;if(!B)return!1;return F=F.replace(/\.\d+\./,"."),B[F]}b.prototype.$clone=function(){let F=new this.constructor;if(F.$isNew=this.$isNew,this._doc)F._doc=T3(this._doc,{retainDocuments:!0});if(this.$__){let D=new this.$__.constructor;for(let $ of Object.getOwnPropertyNames(this.$__)){if($==="activePaths")continue;D[$]=T3(this.$__[$])}Object.assign(D.activePaths,T3({...this.$__.activePaths})),F.$__=D}return F};b.prototype.$createModifiedPathsSnapshot=function A(){let F=new WeakMap;if(!this.$isSubdocument){let B=this.$getAllSubdocs();for(let D of B)F.set(D,D.$__.activePaths.clone())}return new yY1(F,this.$__.activePaths.clone(),this.$__.version)};b.prototype.$restoreModifiedPathsSnapshot=function A(F){if(this.$__.activePaths=F.activePaths.clone(),this.$__.version=F.version,!this.$isSubdocument){let B=this.$getAllSubdocs();for(let D of B)if(F.subdocSnapshot.has(D))D.$__.activePaths=F.subdocSnapshot.get(D)}return this};b.prototype.$clearModifiedPaths=function A(){if(this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("init"),this.$__.version=0,!this.$isSubdocument){let F=this.$getAllSubdocs();for(let B of F)B.$clearModifiedPaths()}return this};/*!
 * Check if the given document only has primitive values
 */b.prototype.$__hasOnlyPrimitiveValues=function A(){return!this.$__.populated&&!this.$__.wasPopulated&&(this._doc==null||Object.values(this._doc).every((F)=>{return F==null||typeof F!=="object"||w1.isNativeObject(F)&&!Array.isArray(F)||Yg(F,"ObjectId")||Yg(F,"Decimal128")}))};/*!
 * Module exports.
 */b.VERSION_WHERE=1;b.VERSION_INC=2;b.VERSION_ALL=3;b.ValidationError=KJ;Ng.exports=Rg=b});var Q1=z((hG1)=>{/*!
 * Module dependencies.
 */var IG1=B6().UUID,MG1=FC(),kg=_6(),jG1=R4(),Og=DC(),mC=I0(),TG1=A3(),kG1=Z9(),ug=b$(),Sg=N_(),L9=Q2(),OG1=a8(),uG1=Rq(),uF=wF(),SG1=p$(),fG1=i$(),SF=z7(),{trustedSymbol:H5}=r8(),vC;hG1.specialProperties=SF;hG1.isMongooseArray=ug.isMongooseArray;hG1.isMongooseDocumentArray=Sg.isMongooseDocumentArray;hG1.registerMongooseArray=ug.registerMongooseArray;hG1.registerMongooseDocumentArray=Sg.registerMongooseDocumentArray;var dC=/\s/,lC=/\s+/;hG1.toCollectionName=function(A,F){if(A==="system.profile")return A;if(A==="system.indexes")return A;if(typeof F==="function"){if(typeof A!=="string")throw new TypeError("Collection name must be a string");if(A.length===0)throw new TypeError("Collection name cannot be empty");return F(A)}return A};hG1.deepEqual=function A(F,B){if(F===B)return!0;if(typeof F!=="object"||typeof B!=="object")return F===B;if(F instanceof Date&&B instanceof Date)return F.getTime()===B.getTime();if(L9(F,"ObjectId")&&L9(B,"ObjectId")||L9(F,"Decimal128")&&L9(B,"Decimal128"))return F.toString()===B.toString();if(F instanceof RegExp&&B instanceof RegExp)return F.source===B.source&&F.ignoreCase===B.ignoreCase&&F.multiline===B.multiline&&F.global===B.global&&F.dotAll===B.dotAll&&F.unicode===B.unicode&&F.sticky===B.sticky&&F.hasIndices===B.hasIndices;if(F==null||B==null)return!1;if(F.prototype!==B.prototype)return!1;if(F instanceof Map||B instanceof Map){if(!(F instanceof Map)||!(B instanceof Map))return!1;return A(Array.from(F.keys()),Array.from(B.keys()))&&A(Array.from(F.values()),Array.from(B.values()))}if(F instanceof Number&&B instanceof Number)return F.valueOf()===B.valueOf();if(Buffer.isBuffer(F))return hG1.buffer.areEqual(F,B);if(Array.isArray(F)||Array.isArray(B)){if(!Array.isArray(F)||!Array.isArray(B))return!1;let X=F.length;if(X!==B.length)return!1;for(let E=0;E<X;++E)if(!A(F[E],B[E]))return!1;return!0}if(F.$__!=null)F=F._doc;else if(uF(F))F=F.toObject();if(B.$__!=null)B=B._doc;else if(uF(B))B=B.toObject();let D=Object.keys(F),$=Object.keys(B),J=D.length;if(J!==$.length)return!1;for(let X=J-1;X>=0;X--)if(D[X]!==$[X])return!1;for(let X of D)if(!A(F[X],B[X]))return!1;return!0};hG1.last=function(A){if(A.length>0)return A[A.length-1];return};/*!
 * ignore
 */hG1.promiseOrCallback=SG1;/*!
 * ignore
 */hG1.cloneArrays=function A(F){if(!Array.isArray(F))return F;return F.map((B)=>hG1.cloneArrays(B))};/*!
 * ignore
 */hG1.omit=function A(F,B){if(B==null)return Object.assign({},F);if(!Array.isArray(B))B=[B];let D=Object.assign({},F);for(let $ of B)delete D[$];return D};hG1.clonePOJOsAndArrays=function A(F){if(F==null)return F;if(F.$__!=null)return F;if(OG1(F)){F={...F};for(let B of Object.keys(F))F[B]=hG1.clonePOJOsAndArrays(F[B]);return F}if(Array.isArray(F)){F=[...F];for(let B=0;B<F.length;++B)F[B]=hG1.clonePOJOsAndArrays(F[B]);return F}return F};hG1.merge=function A(F,B,D,$){D=D||{};let J=Object.keys(B),X=0,E=J.length,Y;if(B[H5])F[H5]=B[H5];$=$||"";let G=D.omitNested||{};while(X<E){if(Y=J[X++],D.omit&&D.omit[Y])continue;if(G[$])continue;if(SF.has(Y))continue;if(F[Y]==null)F[Y]=hG1.clonePOJOsAndArrays(B[Y]);else if(hG1.isObject(B[Y])){if(!hG1.isObject(F[Y]))F[Y]={};if(B[Y]!=null){if(D.isDiscriminatorSchemaMerge&&(B[Y].$isSingleNested&&F[Y].$isMongooseDocumentArray)||B[Y].$isMongooseDocumentArray&&F[Y].$isSingleNested)continue;else if(B[Y].instanceOfSchema){if(F[Y].instanceOfSchema)fG1(F[Y],B[Y].clone(),D.isDiscriminatorSchemaMerge);else F[Y]=B[Y].clone();continue}else if(L9(B[Y],"ObjectId")){F[Y]=new jG1(B[Y]);continue}}A(F[Y],B[Y],D,$?$+"."+Y:Y)}else if(D.overwrite)F[Y]=B[Y]}return F};hG1.toObject=function A(F){vC||(vC=D3());let B;if(F==null)return F;if(F instanceof vC)return F.toObject();if(Array.isArray(F)){B=[];for(let D of F)B.push(A(D));return B}if(hG1.isPOJO(F)){if(B={},F[H5])B[H5]=F[H5];for(let D of Object.keys(F)){if(SF.has(D))continue;B[D]=A(F[D])}return B}return F};hG1.isObject=kG1;hG1.isPOJO=a8();hG1.isNonBuiltinObject=function A(F){return typeof F==="object"&&!hG1.isNativeObject(F)&&!hG1.isMongooseType(F)&&!(F instanceof IG1)&&F!=null};hG1.isNativeObject=function(A){return Array.isArray(A)||A instanceof Date||A instanceof Boolean||A instanceof Number||A instanceof String};hG1.isEmptyObject=function(A){return A!=null&&typeof A==="object"&&Object.keys(A).length===0};hG1.hasKey=function A(F,B){let D=Object.keys(F);for(let $ of D){if($===B)return!0;if(hG1.isPOJO(F[$])&&hG1.hasKey(F[$],B))return!0}return!1};hG1.tick=function A(F){if(typeof F!=="function")return;return function(){try{F.apply(this,arguments)}catch(B){TG1(function(){throw B})}}};hG1.isMongooseType=function(A){return L9(A,"ObjectId")||L9(A,"Decimal128")||A instanceof Buffer};hG1.isMongooseObject=uF;hG1.expires=function A(F){if(!(F&&F.constructor.name==="Object"))return;if(!("expires"in F))return;F.expireAfterSeconds=typeof F.expires!=="string"?F.expires:Math.round(MG1(F.expires)/1000),delete F.expires};hG1.populate=function A(F,B,D,$,J,X,E,Y){let G=null;if(arguments.length===1){if(F instanceof Og)return F._docs={},F._childDocs=[],[F];if(Array.isArray(F))return H(F).map((q)=>hG1.populate(q)[0]);if(hG1.isObject(F))G=Object.assign({},F);else G={path:F}}else if(typeof D==="object")G={path:F,select:B,match:D,options:$};else G={path:F,select:B,model:D,match:$,options:J,populate:X,justOne:E,count:Y};if(typeof G.path!=="string"&&!(Array.isArray(G.path)&&G.path.every((W)=>typeof W==="string")))throw new TypeError("utils.populate: invalid path. Expected string or array of strings. Got typeof `"+typeof F+"`");return _G1(G);function H(W){let q=[];return W.forEach(function(C){if(dC.test(C.path))C.path.split(lC).forEach(function(K){let U=Object.assign({},C);U.path=K,q.push(U)});else q.push(C)}),q}};function _G1(A){if(Array.isArray(A.populate)){let D=[];A.populate.forEach(function($){if(dC.test($.path)){let J=Object.assign({},$);J.path.split(lC).forEach(function(E){J.path=E,D.push(hG1.populate(J)[0])})}else D.push(hG1.populate($)[0])}),A.populate=hG1.populate(D)}else if(A.populate!=null&&typeof A.populate==="object")A.populate=hG1.populate(A.populate);let F=[],B=dC.test(A.path)?A.path.split(lC):Array.isArray(A.path)?A.path:[A.path];if(A.options!=null)A.options=mC(A.options);for(let D of B)F.push(new Og(Object.assign({},A,{path:D})));return F}hG1.getValue=function(A,F,B){return kg.get(A,F,gG1,B)};/*!
 * ignore
 */var xG1=Object.freeze({getters:!1});function gG1(A,F){if(F==="$*"&&A instanceof Map)return A;let B=A?._doc||A;if(B!=null&&B.isMongooseArrayProxy)B=B.__array;return B instanceof Map?B.get(F,xG1):B[F]}hG1.setValue=function(A,F,B,D,$){kg.set(A,F,B,"_doc",D,$)};hG1.object={};hG1.object.vals=function A(F){let B=Object.keys(F),D=B.length,$=[];while(D--)$.push(F[B[D]]);return $};var bG1=Object.prototype.hasOwnProperty;hG1.object.hasOwnProperty=function(A,F){return bG1.call(A,F)};hG1.isNullOrUndefined=function(A){return A===null||A===void 0};/*!
 * ignore
 */hG1.array={};hG1.array.flatten=function A(F,B,D){return D||(D=[]),F.forEach(function($){if(Array.isArray($))A($,B,D);else if(!B||B($))D.push($)}),D};/*!
 * ignore
 */var yG1=Object.prototype.hasOwnProperty;hG1.hasUserDefinedProperty=function(A,F){if(A==null)return!1;if(Array.isArray(F)){for(let B of F)if(hG1.hasUserDefinedProperty(A,B))return!0;return!1}if(yG1.call(A,F))return!0;if(typeof A==="object"&&F in A){let B=A[F];return B!==Object.prototype[F]&&B!==Array.prototype[F]}return!1};/*!
 * ignore
 */var Pg=Math.pow(2,32)-1;hG1.isArrayIndex=function(A){if(typeof A==="number")return A>=0&&A<=Pg;if(typeof A==="string"){if(!/^\d+$/.test(A))return!1;return A=+A,A>=0&&A<=Pg}return!1};hG1.array.unique=function(A){let F=new Set,B=new Set,D=[];for(let $ of A)if(typeof $==="number"||typeof $==="string"||$==null){if(F.has($))continue;D.push($),F.add($)}else if(L9($,"ObjectId")){if(B.has($.toString()))continue;D.push($),B.add($.toString())}else D.push($);return D};hG1.buffer={};hG1.buffer.areEqual=function(A,F){if(!Buffer.isBuffer(A))return!1;if(!Buffer.isBuffer(F))return!1;if(A.length!==F.length)return!1;for(let B=0,D=A.length;B<D;++B)if(A[B]!==F[B])return!1;return!0};hG1.getFunctionName=uG1;hG1.decorate=function(A,F){for(let B in F){if(SF.has(B))continue;A[B]=F[B]}};hG1.mergeClone=function(A,F){if(uF(F))F=F.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});let B=Object.keys(F),D=B.length,$=0,J;while($<D){if(J=B[$++],SF.has(J))continue;if(typeof A[J]==="undefined")A[J]=mC(F[J],{transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});else{let X=F[J];if(X!=null&&X.valueOf&&!(X instanceof Date))X=X.valueOf();if(hG1.isObject(X)){let E=X;if(uF(X)&&!X.isMongooseBuffer)E=E.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});if(X.isMongooseBuffer)E=Buffer.from(E);hG1.mergeClone(A[J],E)}else A[J]=mC(X,{flattenDecimals:!1})}}};hG1.each=function(A,F){for(let B of A)F(B)};hG1.renameObjKey=function(A,F,B){return Object.keys(A).reduce(($,J)=>{if(J===F)$[B]=A[F];else $[J]=A[J];return $},{})};/*!
 * ignore
 */hG1.getOption=function(A){let F=Array.prototype.slice.call(arguments,1);for(let B of F){if(B==null)continue;if(B[A]!=null)return B[A]}return null};/*!
 * ignore
 */hG1.noop=function(){};hG1.errorToPOJO=function A(F){if(!(F instanceof Error))throw new Error("`error` must be `instanceof Error`.");let D={};for(let $ of Object.getOwnPropertyNames(F))D[$]=F[$];return D};/*!
 * ignore
 */hG1.warn=function A(F){return process.emitWarning(F,{code:"MONGOOSE"})};hG1.injectTimestampsOption=function A(F,B){if(B==null)return;F.timestamps=B}});var n0=z((wJ,dg)=>{/*!
 * Module dependencies.
 */var fF=G6(),vg=f6(),ZH1=l$(),VH1=AC(),VJ=I0(),iC=X_(),wH1=Y_(),nC=H_(),xg=A3(),LH1=$1().schemaTypeSymbol,M7=Q1(),mg=$1().validatorErrorSymbol,RH1=$1().documentIsModified,gg=$1().populateModelSymbol,sC=fF.CastError,aC=fF.ValidatorError,NH1={_skipMarkModified:!0};function L1(A,F,B){this[LH1]=!0,this.path=A,this.instance=B,this.validators=[],this.getters=this.constructor.hasOwnProperty("getters")?this.constructor.getters.slice():[],this.setters=this.constructor.hasOwnProperty("setters")?this.constructor.setters.slice():[],this.splitPath(),F=F||{};let D=this.constructor.defaultOptions||{},$=Object.keys(D);for(let E of $)if(E==="validate")this.validate(D.validate);else if(D.hasOwnProperty(E)&&!Object.prototype.hasOwnProperty.call(F,E))F[E]=D[E];if(F.select==null)delete F.select;let J=this.OptionsConstructor||vg;if(this.options=new J(F),this._index=null,M7.hasUserDefinedProperty(this.options,"immutable"))this.$immutable=this.options.immutable,iC(this);let X=Object.keys(this.options);for(let E of X){if(E==="cast"){if(Array.isArray(this.options[E]))this.castFunction.apply(this,this.options[E]);else this.castFunction(this.options[E]);continue}if(M7.hasUserDefinedProperty(this.options,E)&&typeof this[E]==="function"){if(E==="index"&&this._index){if(F.index===!1){let H=this._index;if(typeof H==="object"&&H!=null){if(H.unique)throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true');if(H.sparse)throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}this._index=!1}continue}let Y=F[E];if(E==="default"){this.default(Y);continue}let G=Array.isArray(Y)?Y:[Y];this[E].apply(this,G)}}Object.defineProperty(this,"$$context",{enumerable:!1,configurable:!1,writable:!0,value:null})}L1.prototype.OptionsConstructor=vg;L1.prototype.path;L1.prototype.validators;L1.prototype.isRequired;L1.prototype.splitPath=function(){if(this._presplitPath!=null)return this._presplitPath;if(this.path==null)return;return this._presplitPath=this.path.indexOf(".")===-1?[this.path]:this.path.split("."),this._presplitPath};L1.cast=function A(F){if(arguments.length===0)return this._cast;if(F===!1)F=(B)=>B;return this._cast=F,this._cast};L1.prototype.castFunction=function A(F,B){if(arguments.length===0)return this._castFunction;if(F===!1)F=this.constructor._defaultCaster||((D)=>D);if(typeof F==="string")return this._castErrorMessage=F,this._castFunction;if(F!=null)this._castFunction=F;if(B!=null)this._castErrorMessage=B;return this._castFunction};L1.prototype.cast=function A(){throw new Error("Base SchemaType class does not implement a `cast()` function")};L1.set=function A(F,B){if(!this.hasOwnProperty("defaultOptions"))this.defaultOptions=Object.assign({},this.defaultOptions);this.defaultOptions[F]=B};L1.get=function(A){this.getters=this.hasOwnProperty("getters")?this.getters:[],this.getters.push(A)};L1.prototype.default=function(A){if(arguments.length===1){if(A===void 0){this.defaultValue=void 0;return}if(A!=null&&A.instanceOfSchema)throw new fF("Cannot set default value of path `"+this.path+"` to a mongoose Schema instance.");return this.defaultValue=A,this.defaultValue}else if(arguments.length>1)this.defaultValue=[...arguments];return this.defaultValue};L1.prototype.index=function(A){return this._index=A,M7.expires(this._index),this};L1.prototype.unique=function A(F,B){if(this._index===!1){if(!F)return;throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true')}if(!this.options.hasOwnProperty("index")&&F===!1)return this;if(this._index==null||this._index===!0)this._index={};else if(typeof this._index==="string")this._index={type:this._index};if(this._index.unique=!!F,typeof B==="string")this._duplicateKeyErrorMessage=B;return this};L1.prototype.text=function(A){if(this._index===!1){if(!A)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `text` set to true')}if(!this.options.hasOwnProperty("index")&&A===!1)return this;if(this._index===null||this._index===void 0||typeof this._index==="boolean")this._index={};else if(typeof this._index==="string")this._index={type:this._index};return this._index.text=A,this};L1.prototype.sparse=function(A){if(this._index===!1){if(!A)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}if(!this.options.hasOwnProperty("index")&&A===!1)return this;if(this._index==null||typeof this._index==="boolean")this._index={};else if(typeof this._index==="string")this._index={type:this._index};return this._index.sparse=A,this};L1.prototype.immutable=function(A){return this.$immutable=A,iC(this),this};L1.prototype.transform=function(A){return this.options.transform=A,this};L1.prototype.set=function(A){if(typeof A!=="function")throw new TypeError("A setter must be a function.");return this.setters.push(A),this};L1.prototype.get=function(A){if(typeof A!=="function")throw new TypeError("A getter must be a function.");return this.getters.push(A),this};L1.prototype.validateAll=function(A){for(let F=0;F<A.length;F++)this.validate(A[F]);return this};L1.prototype.validate=function(A,F,B){if(typeof A==="function"||A&&M7.getFunctionName(A.constructor)==="RegExp"){let X;if(typeof F==="function")X={validator:A,message:F},X.type=B||"user defined";else if(F instanceof Object&&!B){if(X=nC(F)?Object.assign({},F):VJ(F),!X.message)X.message=X.msg;X.validator=A,X.type=X.type||"user defined"}else{if(F==null)F=fF.messages.general.default;if(!B)B="user defined";X={message:F,type:B,validator:A}}return this.validators.push(X),this}let D,$,J;for(D=0,$=arguments.length;D<$;D++){if(J=arguments[D],!M7.isPOJO(J)){let X="Invalid validator. Received ("+typeof J+") "+J+". See https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.validate()";throw new Error(X)}this.validate(J.validator,J)}return this};L1.prototype.required=function(A,F){let B={};if(arguments.length>0&&A==null)return this.validators=this.validators.filter(function(J){return J.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;if(typeof A==="object")B=A,F=B.message||F,A=A.isRequired;if(A===!1)return this.validators=this.validators.filter(function(J){return J.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;let D=this;if(this.isRequired=!0,this.requiredValidator=function(J){let X=this&&this.$__&&this.$__.cachedRequired;if(X!=null&&!this.$__isSelected(D.path)&&!this[RH1](D.path))return!0;if(X!=null&&D.path in X){let E=X[D.path]?D.checkRequired(J,this):!0;return delete X[D.path],E}else if(typeof A==="function")return A.apply(this)?D.checkRequired(J,this):!0;return D.checkRequired(J,this)},this.originalRequiredValue=A,typeof A==="string")F=A,A=void 0;let $=F||fF.messages.general.required;return this.validators.unshift(Object.assign({},B,{validator:this.requiredValidator,message:$,type:"required"})),this};L1.prototype.ref=function(A){return this.options.ref=A,this};L1.prototype.getDefault=function(A,F,B){let D;if(typeof this.defaultValue==="function")if(this.defaultValue===Date.now||this.defaultValue===Array||this.defaultValue.name.toLowerCase()==="objectid")D=this.defaultValue.call(A);else D=this.defaultValue.call(A,A);else D=this.defaultValue;if(D!==null&&D!==void 0){if(typeof D==="object"&&(!this.options||!this.options.shared))D=VJ(D);if(B&&B.skipCast)return this._applySetters(D,A);let $=this.applySetters(D,A,F,void 0,NH1);if($&&!Array.isArray($)&&$.$isSingleNested)$.$__parent=A;return $}return D};L1.prototype._applySetters=function(A,F,B,D,$){let J=A;if(B)return J;let X=this.setters;for(let E=X.length-1;E>=0;E--)J=X[E].call(F,J,D,this,$);return J};/*!
 * ignore
 */L1.prototype._castNullish=function A(F){return F};L1.prototype.applySetters=function(A,F,B,D,$){let J=this._applySetters(A,F,B,D,$);if(J==null)return this._castNullish(J);return J=this.cast(J,F,B,D,$),J};L1.prototype.applyGetters=function(A,F){let B=A,D=this.getters,$=D.length;if($===0)return B;for(let J=0;J<$;++J)B=D[J].call(F,B,this);return B};L1.prototype.select=function A(F){return this.selected=!!F,this};L1.prototype.doValidate=function(A,F,B,D){let $=!1,J=this.path;if(typeof F!=="function")throw new TypeError(`Must pass callback function to doValidate(), got ${typeof F}`);let X=this.validators.filter((G)=>typeof G==="object"&&G!==null),E=X.length;if(!E)return F(null);for(let G=0,H=X.length;G<H;++G){if($)break;let W=X[G],q=W.validator,C,Q=nC(W)?Object.assign({},W):VJ(W);if(Q.path=D&&D.path?D.path:J,Q.fullPath=this.$fullPath,Q.value=A,q instanceof RegExp){Y(q.test(A),Q,B);continue}if(typeof q!=="function")continue;if(A===void 0&&q!==this.requiredValidator){Y(!0,Q,B);continue}try{if(Q.propsParameter)C=q.call(B,A,Q);else C=q.call(B,A)}catch(K){if(C=!1,Q.reason=K,K.message)Q.message=K.message}if(C!=null&&typeof C.then==="function")C.then(function(K){Y(K,Q,B)},function(K){Q.reason=K,Q.message=K.message,C=!1,Y(C,Q,B)});else Y(C,Q,B)}function Y(G,H,W){if($)return;if(G===void 0||G){if(--E<=0)xg(function(){F(null)})}else $=new(H.ErrorConstructor||aC)(H,W),$[mg]=!0,xg(function(){F($)})}};function bg(A,F){if(A!==void 0&&!A){let D=new(F.ErrorConstructor||aC)(F);return D[mg]=!0,D}}L1.prototype.doValidateSync=function(A,F,B){let D=this.path;if(!this.validators.length)return null;let J=this.validators;if(A===void 0)if(this.validators.length!==0&&this.validators[0].type==="required")J=[this.validators[0]];else return null;let X=null,E=0,Y=J.length;for(E=0;E<Y;++E){let G=J[E];if(G===null||typeof G!=="object")continue;let H=G.validator,W=nC(G)?Object.assign({},G):VJ(G);W.path=B&&B.path?B.path:D,W.fullPath=this.$fullPath,W.value=A;let q=!1;if(wH1(H))continue;if(H instanceof RegExp){X=bg(H.test(A),W);continue}if(typeof H!=="function")continue;try{if(W.propsParameter)q=H.call(F,A,W);else q=H.call(F,A)}catch(C){q=!1,W.reason=C}if(q!=null&&typeof q.then==="function")continue;if(X=bg(q,W),X)break}return X};L1._isRef=function(A,F,B,D){let $=D&&A.options&&(A.options.ref||A.options.refPath);if(!$&&B&&B.$__!=null){let J=B.$__fullPath(A.path,!0),X=B.ownerDocument();$=J!=null&&X.$populated(J)||B.$populated(A.path)}if($){if(F==null)return!0;if(!Buffer.isBuffer(F)&&F._bsontype!=="Binary"&&M7.isObject(F))return!0;return D}return!1};/*!
 * ignore
 */L1.prototype._castRef=function A(F,B,D,$){if(F==null)return F;if(F.$__!=null)return F.$__.wasPopulated=F.$__.wasPopulated||{value:F._doc._id},F;if(Buffer.isBuffer(F)||!M7.isObject(F)){if(D)return F;throw new sC(this.instance,F,this.path,null,this)}let J=B.$__fullPath(this.path,!0),E=B.ownerDocument().$populated(J,!0),Y=F;if(!B.$__.populated||!B.$__.populated[J]||!B.$__.populated[J].options||!B.$__.populated[J].options.options||!B.$__.populated[J].options.options.lean){let G=E?E.options[gg]:B.constructor.db.model(this.options.ref);Y=G.hydrate(F,null,$),Y.$__.wasPopulated={value:Y._doc._id,options:{[gg]:G}}}return Y};/*!
 * ignore
 */function yg(A,F){return this.castForQuery(null,A,F)}/*!
 * ignore
 */function PH1(A,F){let B=this;if(!Array.isArray(A))return[this.castForQuery(null,A,F)];return A.map(function(D){return B.castForQuery(null,D,F)})}function hg(A,F){let B=this;if(!Array.isArray(A))return[this.castForQuery(null,A,F)];return A.map(function(D){if(Array.isArray(D)&&D.length===0)return D;return B.castForQuery(null,D,F)})}/*!
 * ignore
 */L1.prototype.$conditionalHandlers={$all:PH1,$eq:yg,$in:hg,$ne:yg,$nin:hg,$exists:ZH1,$type:VH1};L1.prototype.castForQuery=function(A,F,B){let D;if(A!=null){if(D=this.$conditionalHandlers[A],!D)throw new Error("Can't use "+A);return D.call(this,F,B)}try{return this.applySetters(F,B)}catch($){if($ instanceof sC&&$.path===this.path&&this.$fullPath!=null)$.path=this.$fullPath;throw $}};L1.checkRequired=function(A){if(arguments.length!==0)this._checkRequired=A;return this._checkRequired};L1.prototype.checkRequired=function(A){return A!=null};L1.prototype.clone=function(){let A=Object.assign({},this.options),F=new this.constructor(this.path,A,this.instance);if(F.validators=this.validators.slice(),this.requiredValidator!==void 0)F.requiredValidator=this.requiredValidator;if(this.defaultValue!==void 0)F.defaultValue=this.defaultValue;if(this.$immutable!==void 0&&this.options.immutable===void 0)F.$immutable=this.$immutable,iC(F);if(this._index!==void 0)F._index=this._index;if(this.selected!==void 0)F.selected=this.selected;if(this.isRequired!==void 0)F.isRequired=this.isRequired;if(this.originalRequiredValue!==void 0)F.originalRequiredValue=this.originalRequiredValue;return F.getters=this.getters.slice(),F.setters=this.setters.slice(),F};L1.prototype.getEmbeddedSchemaType=function A(){return this.$embeddedSchemaType};/*!
 * If _duplicateKeyErrorMessage is a string, replace unique index errors "E11000 duplicate key error" with this string.
 *
 * @api private
 */L1.prototype._duplicateKeyErrorMessage=null;L1.prototype.toJSONSchema=function A(){throw new Error("Converting unsupported SchemaType to JSON Schema: "+this.instance)};L1.prototype.autoEncryptionType=function A(){return null};/*!
 * Module exports.
 */dg.exports=wJ=L1;wJ.CastError=sC;wJ.ValidatorError=aC});var rC=z((SO1,lg)=>{var k3=F3();class x6{constructor(A){if(Object.assign(this,A),A!=null&&A.options!=null)this.options=Object.assign({},A.options)}}Object.defineProperty(x6.prototype,"ref",k3);Object.defineProperty(x6.prototype,"refPath",k3);Object.defineProperty(x6.prototype,"localField",k3);Object.defineProperty(x6.prototype,"foreignField",k3);Object.defineProperty(x6.prototype,"justOne",k3);Object.defineProperty(x6.prototype,"count",k3);Object.defineProperty(x6.prototype,"match",k3);Object.defineProperty(x6.prototype,"options",k3);Object.defineProperty(x6.prototype,"skip",k3);Object.defineProperty(x6.prototype,"limit",k3);Object.defineProperty(x6.prototype,"perDocumentLimit",k3);lg.exports=x6});var LJ=z((fO1,cg)=>{cg.exports=function A(F,B,D){if(F==null)return F;if(F._doc!=null)F=F._doc;if(arguments.length>=3){if(typeof F!=="object")return;if(D===void 0)return;if(F instanceof Map)F.set(B,D);else F[B]=D;return D}if(B==="$*")return F instanceof Map?Array.from(F.values()):Object.keys(F).map(($)=>F[$]);if(F instanceof Map)return F.get(B);return F[B]}});var tC=z((_O1,sg)=>{var IH1=T1(),MH1=qC(),pg=LJ(),ig=_6(),jH1=i("util"),TH1=Q1(),ng=/(\.\d+$|\.\d+\.)/g;sg.exports=function A(F,B,D,$,J){if(F==null)return[];if(typeof F==="string"&&J!=null&&MH1(J,F))throw new IH1("refPath `"+F+"` must not be excluded in projection, got "+jH1.inspect(J));if(ng.test(D)){let Y=D.split(ng);if(Y[Y.length-1]==="")throw new Error("Can't populate individual element in an array");let G="",H=F;for(let C=0;C<Y.length;C+=2){let Q=Y[C];if(H.startsWith(Q+"."))G+=H.substring(0,Q.length)+Y[C+1],H=H.substring(Q.length+1);else if(C===Y.length-1){G+=H,H="";break}else throw new Error("Could not normalize ref path, chunk "+Q+" not in populated path")}let W=ig.get(G,B,pg),q=Array.isArray(W)?W:[W];return q=TH1.array.flatten(q),q}let X=ig.get(F,B,pg),E;if($!=null&&$.virtuals.hasOwnProperty(F))E=[$.virtuals[F].applyGetters(void 0,B)];else E=Array.isArray(X)?X:[X];return E}});var RJ=z((xO1,ag)=>{var kH1=tC(),OH1=Q1(),uH1=$1().modelSymbol;function j4(A,F){this.path=F,this.getters=[],this.setters=[],this.options=Object.assign({},A)}j4.prototype._applyDefaultGetters=function(){if(this.getters.length>0||this.setters.length>0)return;let F="$"+this.path;this.getters.push(function(){return this.$locals[F]}),this.setters.push(function(B){this.$locals[F]=B})};/*!
 * ignore
 */j4.prototype.clone=function(){let A=new j4(this.options,this.path);return A.getters=[].concat(this.getters),A.setters=[].concat(this.setters),A};j4.prototype.get=function(A){return this.getters.push(A),this};j4.prototype.set=function(A){return this.setters.push(A),this};j4.prototype.applyGetters=function(A,F){if(OH1.hasUserDefinedProperty(this.options,["ref","refPath"])&&F.$$populatedVirtuals&&F.$$populatedVirtuals.hasOwnProperty(this.path))A=F.$$populatedVirtuals[this.path];let B=A;for(let D of this.getters)B=D.call(F,B,this,F);return B};j4.prototype.applySetters=function(A,F){let B=A;for(let D of this.setters)B=D.call(F,B,this,F);return B};j4.prototype._getModelNamesForPopulate=function A(F){if(this.options.refPath)return kH1(this.options.refPath,F,this.path);let B=null;if(typeof this.options.ref==="function"&&!this.options.ref[uH1])B=this.options.ref.call(F,F);else B=this.options.ref;if(B!=null&&!Array.isArray(B))return[B];return B};/*!
 * exports
 */ag.exports=j4});var oC=z((gO1,rg)=>{rg.exports=function A(F){let B={_id:{auto:!0}};B._id[F.options.typeKey]="ObjectId",F.add(B)}});var eC=z((bO1,tg)=>{tg.exports=function A(F,B){let D=F.discriminatorMapping&&F.discriminatorMapping.value;if(D&&!("sparse"in B)){let $=F.options.discriminatorKey;B.partialFilterExpression=B.partialFilterExpression||{},B.partialFilterExpression[$]=D}return B}});var eg=z((yO1,og)=>{var AQ=f0(),SH1=Z9(),fH1=eC();og.exports=function A(F){let B=[],D=new WeakMap,$=F.constructor.indexTypes,J=new Map;return X(F),B;function X(Y,G,H){if(D.has(Y))return;D.set(Y,!0),G=G||"";let W=Object.keys(Y.paths);for(let q of W){let C=Y.paths[q];if(H!=null&&H.paths[q])continue;if(C._duplicateKeyErrorMessage!=null)Y._duplicateKeyErrorMessagesByPath=Y._duplicateKeyErrorMessagesByPath||{},Y._duplicateKeyErrorMessagesByPath[q]=C._duplicateKeyErrorMessage;if(C.$isMongooseDocumentArray||C.$isSingleNested){if(AQ(C,"options.excludeIndexes")!==!0&&AQ(C,"schemaOptions.excludeIndexes")!==!0&&AQ(C,"schema.options.excludeIndexes")!==!0)X(C.schema,G+q+".");if(C.schema.discriminators!=null){let K=C.schema.discriminators,U=Object.keys(K);for(let Z of U)X(K[Z],G+q+".",C.schema)}if(C.$isMongooseDocumentArray)continue}let Q=C._index||C.caster&&C.caster._index;if(Q!==!1&&Q!==null&&Q!==void 0){let K={},U=SH1(Q),Z=U?Q:{},V=typeof Q==="string"?Q:U?Q.type:!1;if(V&&$.indexOf(V)!==-1)K[G+q]=V;else if(Z.text)K[G+q]="text",delete Z.text;else{let R=!1;if(Q==="descending"||Q==="desc")R=!0;else if(Q==="ascending"||Q==="asc")R=!1;else R=Number(Q)===-1;K[G+q]=R?-1:1}if(delete Z.type,!("background"in Z))Z.background=!0;if(Y.options.autoIndex!=null)Z._autoIndex=Y.options.autoIndex;let w=Z&&Z.name;if(typeof w==="string")if(J.has(w))Object.assign(J.get(w),K);else B.push([K,Z]),J.set(w,K);else B.push([K,Z]),J.set(w,K)}}if(D.delete(Y),G)E(Y,G);else Y._indexes.forEach(function(q){let C=q[1];if(!("background"in C))C.background=!0;fH1(Y,C)}),B=B.concat(Y._indexes)}function E(Y,G){let H=Y._indexes,W=H.length;for(let q=0;q<W;++q){let C=H[q][0],Q=H[q][1],K=Object.keys(C),U=K.length,Z={};for(let w=0;w<U;++w){let R=K[w];Z[G+R]=C[R]}let V=Object.assign({},Q);if(Q!=null&&Q.partialFilterExpression!=null){V.partialFilterExpression={};let w=Q.partialFilterExpression;for(let R of Object.keys(w))V.partialFilterExpression[G+R]=w[R]}B.push([Z,V])}}}});var FQ=z((hO1,Ab)=>{Ab.exports=function A(F){switch(F){case"p":F="primary";break;case"pp":F="primaryPreferred";break;case"s":F="secondary";break;case"sp":F="secondaryPreferred";break;case"n":F="nearest";break}return F}});var Bb=z((vO1,Fb)=>{/*!
 * ignore
 */Fb.exports=function A(F){if(!(!F.paths.id&&F.paths._id&&F.options.id))return F;if(F.aliases&&F.aliases.id)return F;return F.virtual("id").get(_H1),F};function _H1(){if(this._id!=null)return this._id.toString();return null}});var $b=z((mO1,Db)=>{Db.exports=function A(F,B){let D=Object.keys(F),$=Object.keys(B);if(D.length!==$.length)return!1;for(let J=0;J<D.length;J++){let X=D[J];if(X!==$[J]||F[X]!==B[X])return!1}return!0}});var Xb=z((dO1,Jb)=>{Jb.exports=function A(F,B,D,$){if($.justOne||$.count){if(F[B]=Array.isArray(D)?D[0]:D,typeof F[B]!=="object")F[B]=$.count?D:null}else F[B]=Array.isArray(D)?D:D==null?[]:[D],F[B]=F[B].filter(function(J){return J&&typeof J==="object"});return F[B]}});var _F=z((lO1,Eb)=>{Eb.exports=function A(F){return F.replace(/\.\$(\[[^\]]*\])?(?=\.)/g,".0").replace(/\.\$(\[[^\]]*\])?$/g,".0")}});var NJ=z((cO1,Yb)=>{Yb.exports=xH1;/*!
 * ignore
 */function xH1(A,F){if(A==null)return null;if(typeof A==="boolean")return F;if(typeof A[F]==="boolean")return A[F]?F:null;if(!(F in A))return F;return A[F]}});var DQ=z((pO1,Gb)=>{var gH1=_F(),T4=NJ();Gb.exports=j7;/*!
 * ignore
 */function j7(A,F,B){if(F==null)return;if(Object.keys(F).some((E)=>E[0]==="$")){if(F.$push)X(F.$push);if(F.$addToSet)X(F.$addToSet);if(F.$set!=null){let E=Object.keys(F.$set);for(let Y of E)BQ(B,Y,F.$set,A)}if(F.$setOnInsert!=null){let E=Object.keys(F.$setOnInsert);for(let Y of E)BQ(B,Y,F.$setOnInsert,A)}}let J=Object.keys(F).filter((E)=>E[0]!=="$");for(let E of J)BQ(B,E,F,A);function X(E){for(let Y of Object.keys(E)){let G=B.path(Y.replace(/\.\$\./i,".").replace(/.\$$/,""));if(E[Y]&&G&&G.$isMongooseDocumentArray&&G.schema.options.timestamps){let H=G.schema.options.timestamps,W=T4(H,"createdAt"),q=T4(H,"updatedAt");if(E[Y].$each)E[Y].$each.forEach(function(C){if(q!=null)C[q]=A;if(W!=null)C[W]=A;j7(A,C,G.schema)});else{if(q!=null)E[Y][q]=A;if(W!=null)E[Y][W]=A;j7(A,E[Y],G.schema)}}}}}function bH1(A,F,B){let D=F.schema.options.timestamps,$=A.length;if(!D){for(let E=0;E<$;++E)j7(B,A[E],F.schema);return}let J=T4(D,"createdAt"),X=T4(D,"updatedAt");for(let E=0;E<$;++E){if(X!=null)A[E][X]=B;if(J!=null)A[E][J]=B;j7(B,A[E],F.schema)}}function yH1(A,F,B){let D=F.schema.options.timestamps;if(!D){j7(B,A,F.schema);return}let $=T4(D,"createdAt"),J=T4(D,"updatedAt");if(J!=null)A[J]=B;if($!=null)A[$]=B;j7(B,A,F.schema)}function BQ(A,F,B,D){let $=gH1(F),J=A.path($);if(!J)return;let X=[],E=$.split(".");for(let Y=E.length-1;Y>0;--Y){let G=A.path(E.slice(0,Y).join("."));if(G!=null&&(G.$isMongooseDocumentArray||G.$isSingleNested))X.push({parentPath:F.split(".").slice(0,Y).join("."),parentSchemaType:G})}if(Array.isArray(B[F])&&J.$isMongooseDocumentArray)bH1(B[F],J,D);else if(B[F]&&J.$isSingleNested)yH1(B[F],J,D);else if(X.length>0)for(let Y of X){let{parentPath:G,parentSchemaType:H}=Y,W=H.schema.options.timestamps,q=T4(W,"updatedAt");if(!W||q==null)continue;if(H.$isSingleNested)B[G+"."+q]=D;else if(H.$isMongooseDocumentArray){let C=F.substring(G.length+1);if(/^\d+$/.test(C)){B[G+"."+C][q]=D;continue}let Q=C.indexOf(".");C=Q!==-1?C.substring(0,Q):C,B[G+"."+C+"."+q]=D}}else if(J.schema!=null&&J.schema!=A&&B[F]){let Y=J.schema.options.timestamps,G=T4(Y,"createdAt"),H=T4(Y,"updatedAt");if(!Y)return;if(H!=null)B[F][H]=D;if(G!=null)B[F][G]=D}}});var $Q=z((iO1,Hb)=>{/*!
 * ignore
 */var hH1=f0();Hb.exports=vH1;/*!
 * ignore
 */function vH1(A,F,B,D,$,J){let X=D,E=X,Y=hH1($,"timestamps",!0);if(!Y||X==null)return D;let G=Y!=null&&Y.createdAt===!1,H=Y!=null&&Y.updatedAt===!1;if(J){if(D&&D.$set)D=D.$set,X.$set={},E=X.$set;if(!H&&B&&!D[B])E[B]=A;if(!G&&F&&!D[F])E[F]=A;return X}if(D=D||{},Array.isArray(X)){if(B==null)return X;return X.push({$set:{[B]:A}}),X}if(X.$set=X.$set||{},!H&&B&&(!D.$currentDate||!D.$currentDate[B])){let W=!1;if(B.indexOf(".")!==-1){let q=B.split(".");for(let C=1;C<q.length;++C){let Q=q.slice(-C).join("."),K=q.slice(0,-C).join(".");if(D[K]!=null){D[K][Q]=A,W=!0;break}else if(D.$set&&D.$set[K]){D.$set[K][Q]=A,W=!0;break}}}if(!W)X.$set[B]=A;if(X.hasOwnProperty(B))delete X[B]}if(!G&&F){if(D[F])delete D[F];if(D.$set&&D.$set[F])delete D.$set[F];let W=!1;if(F.indexOf(".")!==-1){let q=F.split(".");for(let C=1;C<q.length;++C){let Q=q.slice(-C).join("."),K=q.slice(0,-C).join(".");if(D[K]!=null){D[K][Q]=A,W=!0;break}else if(D.$set&&D.$set[K]){D.$set[K][Q]=A,W=!0;break}}}if(!W)X.$setOnInsert=X.$setOnInsert||{},X.$setOnInsert[F]=A}if(Object.keys(X.$set).length===0)delete X.$set;return X}});var qb=z((nO1,Wb)=>{Wb.exports=function A(F,B,D,$,J){let X=B!=null&&B.updatedAt===!1,E=B!=null&&B.createdAt===!1,Y=D!=null?D():F.ownerDocument().constructor.base.now();if(!E&&(F.isNew||F.$isSubdocument)&&$&&!F.$__getValue($)&&F.$__isSelected($))F.$set($,Y,void 0,{overwriteImmutable:!0});if(!X&&J&&(F.isNew||F.$isModified())){let G=Y;if(F.isNew&&$!=null)G=F.$__getValue($);F.$set(J,G)}}});var zb=z((sO1,Kb)=>{var mH1=DQ(),dH1=$Q(),lH1=f0(),Cb=NJ(),cH1=qb(),pH1=L7(),Qb=new Set(["replaceOne","findOneAndReplace"]);Kb.exports=function A(F,B){let D=F.childSchemas.find($);function $(W){return!!W.schema.options.timestamps}if(!B&&!D)return;let J=Cb(B,"createdAt"),X=Cb(B,"updatedAt"),E=B!=null&&B.hasOwnProperty("currentTime")?B.currentTime:null,Y={};if(F.$timestamps={createdAt:J,updatedAt:X},J&&!F.paths[J]){let W=F.base!=null?F.base.get("timestamps.createdAt.immutable"):null,q=W!=null?W:!0;Y[J]={[F.options.typeKey||"type"]:Date,immutable:q}}if(X&&!F.paths[X])Y[X]=Date;F.add(Y),F.pre("save",function W(q){let C=lH1(this,"$__.saveOptions.timestamps");if(C===!1)return q();cH1(this,C,E,J,X),q()}),F.methods.initializeTimestamps=function(){let W=E!=null?E():this.constructor.base.now();if(J&&!this.get(J))this.$set(J,W);if(X&&!this.get(X))this.$set(X,W);if(this.$isSubdocument)return this;let q=this.$getAllSubdocs();for(let C of q)if(C.initializeTimestamps)C.initializeTimestamps();return this},H[pH1.builtInMiddleware]=!0;let G={query:!0,model:!1};F.pre("findOneAndReplace",G,H),F.pre("findOneAndUpdate",G,H),F.pre("replaceOne",G,H),F.pre("update",G,H),F.pre("updateOne",G,H),F.pre("updateMany",G,H);function H(W){let q=E!=null?E():this.model.base.now();if(Qb.has(this.op)&&this.getUpdate()==null)this.setUpdate({});dH1(q,J,X,this.getUpdate(),this._mongooseOptions,Qb.has(this.op)),mH1(q,this.getUpdate(),this.model.schema),W()}}});var Zb=z((aO1,Ub)=>{var iH1=T1(),nH1=i("util");Ub.exports=sH1;function sH1(A,F){if(typeof A==="string")return;if(typeof A==="function")return;throw new iH1('Invalid ref at path "'+F+'". Got '+nH1.inspect(A,{depth:0}))}});var PJ=z((eH1)=>{/*!
 * ignore
 */var Vb=Object.freeze(["countDocuments","distinct","estimatedDocumentCount","find","findOne","findOneAndReplace","findOneAndUpdate","replaceOne","updateMany","updateOne","deleteMany","deleteOne","findOneAndDelete"]);eH1.queryOperations=Vb;/*!
 * ignore
 */var aH1=Vb.concat(["validate"]);eH1.queryMiddlewareFunctions=aH1;/*!
 * ignore
 */var rH1=["aggregate"];eH1.aggregateMiddlewareFunctions=rH1;/*!
 * ignore
 */var tH1=["bulkWrite","createCollection","insertMany"];eH1.modelMiddlewareFunctions=tH1;/*!
 * ignore
 */var oH1=["validate","save","remove","updateOne","deleteOne","init"];eH1.documentMiddlewareFunctions=oH1});var IJ=z((tO1,wb)=>{var JW1=L7(),XW1=p$();/*!
 * ignore
 */wb.exports=xF;/*!
 * ignore
 */xF.middlewareFunctions=["deleteOne","save","validate","remove","updateOne","init"];/*!
 * ignore
 */var EW1=new Set(xF.middlewareFunctions.flatMap((A)=>[A,`$__${A}`]));function xF(A,F,B){B=B||{};let D={useErrorHandlers:!0,numCallbackParams:1,nullResultByDefault:!0,contextParameter:!0},$=B.decorateDoc?A:A.prototype;A.$appliedHooks=!0;for(let G of Object.keys(F.paths)){let H=F.paths[G],W=null;if(H.$isSingleNested)W=H.caster;else if(H.$isMongooseDocumentArray)W=H.Constructor;else continue;if(W.$appliedHooks)continue;if(xF(W,H.schema,{...B,isChildSchema:!0}),W.discriminators!=null){let q=Object.keys(W.discriminators);for(let C of q)xF(W.discriminators[C],W.discriminators[C].schema,B)}}let J=F.s.hooks.filter((G)=>{if(G.name==="updateOne"||G.name==="deleteOne")return!!G.document;if(G.name==="remove"||G.name==="init")return G.document==null||!!G.document;if(G.query!=null||G.document!=null)return G.document!==!1;return!0}).filter((G)=>{if(F.methods[G.name])return!G.fn[JW1.builtInMiddleware];return!0});A._middleware=J,$.$__originalValidate=$.$__originalValidate||$.$__validate;let X=B&&B.isChildSchema?["save","validate","deleteOne"]:["save","validate"];for(let G of X){let H=G==="validate"?"$__originalValidate":`$__${G}`,W=J.createWrapper(G,$[H],null,D);$[`$__${G}`]=W}$.$__init=J.createWrapperSync("init",$.$__init,null,D);let E=Object.keys(F.methods),Y=Object.assign({},D,{checkForPromise:!0});for(let G of E){if(EW1.has(G))continue;if(!J.hasHooks(G))continue;let H=$[G];$[G]=function(){let W=Array.prototype.slice.call(arguments),q=W.slice(-1).pop(),C=typeof q==="function"?W.slice(0,W.length-1):W;return XW1(q,(Q)=>{return this[`$__${G}`].apply(this,C.concat([Q]))},A.events)},$[`$__${G}`]=J.createWrapper(G,H,null,Y)}}});var Rb=z((oO1,Lb)=>{Lb.exports=B6().Double});var MJ=z((eO1,jb)=>{var YW1=R7(),GW1=T1(),Nb=I0(),HW1=Q1().deepEqual,WW1=o2(),qW1=FJ(),Pb=i("util"),CW1=z7(),JQ=Q2(),QW1=t$(),Ib=$1().populateModelSymbol;/*!
 * ignore
 */class a3 extends Map{constructor(A,F,B,D){if(WW1(A)==="Object")A=Object.keys(A).reduce(($,J)=>$.concat([[J,A[J]]]),[]);super(A);this.$__parent=B!=null&&B.$__!=null?B:null,this.$__path=F,this.$__schemaType=D==null?new YW1(F):D,this.$__runDeferred()}$init(A,F){if(Mb(A),super.set(A,F),F!=null&&F.$isSingleNested)F.$basePath=this.$__path+"."+A}$__set(A,F){super.set(A,F)}get(A,F){if(JQ(A,"ObjectId"))A=A.toString();if(F=F||{},F.getters===!1)return super.get(A);return this.$__schemaType.applyGetters(super.get(A),this.$__parent)}set(A,F){if(JQ(A,"ObjectId"))A=A.toString();if(Mb(A),F=qW1(F),this.$__schemaType==null){this.$__deferred=this.$__deferred||[],this.$__deferred.push({key:A,value:F});return}let B,D=this.$__parent,$=D!=null&&D.$__&&D.$__.populated?D.$populated(X.call(this),!0)||D.$populated(this.$__path,!0):null,J=this.get(A);if($!=null){if(this.$__schemaType.$isSingleNested)throw new GW1(`Cannot manually populate single nested subdoc underneath Map at path "${this.$__path}". Try using an array instead of a Map.`);if(Array.isArray(F)&&this.$__schemaType.$isMongooseArray)F=F.map((E)=>{if(E.$__==null)E=new $.options[Ib](E);return E.$__.wasPopulated={value:E._doc._id},E});else if(F!=null){if(F.$__==null)F=new $.options[Ib](F);F.$__.wasPopulated={value:F._doc._id}}}else try{let E=this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested||this.$__schemaType.$isMongooseArray||this.$__schemaType.$isSchemaMap?{path:X.call(this)}:null;F=this.$__schemaType.applySetters(F,this.$__parent,!1,this.get(A),E)}catch(E){if(this.$__parent!=null&&this.$__parent.$__!=null){this.$__parent.invalidate(X.call(this),E);return}throw E}if(super.set(A,F),D!=null&&D.$__!=null&&!HW1(F,J)){let E=X.call(this);if(D.markModified(E),this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested)QW1(D,E)}function X(){if(B)return B;return B=this.$__path+"."+A,B}}clear(){super.clear();let A=this.$__parent;if(A!=null)A.markModified(this.$__path)}delete(A){if(JQ(A,"ObjectId"))A=A.toString();return this.set(A,void 0),super.delete(A)}toBSON(){return new Map(this)}toObject(A){if(A&&A.flattenMaps){let F={},B=this.keys();for(let D of B)F[D]=Nb(this.get(D),A);return F}return new Map(this)}$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)}toJSON(A){if(typeof(A&&A.flattenMaps)==="boolean"?A.flattenMaps:!0){let F={},B=this.keys();for(let D of B)F[D]=Nb(this.get(D),A);return F}return new Map(this)}inspect(){return new Map(this)}$__runDeferred(){if(!this.$__deferred)return;for(let A of this.$__deferred)this.set(A.key,A.value);this.$__deferred=null}}if(Pb.inspect.custom)Object.defineProperty(a3.prototype,Pb.inspect.custom,{enumerable:!1,writable:!1,configurable:!1,value:a3.prototype.inspect});Object.defineProperty(a3.prototype,"$__set",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(a3.prototype,"$__parent",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(a3.prototype,"$__path",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(a3.prototype,"$__schemaType",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(a3.prototype,"$isMongooseMap",{enumerable:!1,writable:!1,configurable:!1,value:!0});Object.defineProperty(a3.prototype,"$__deferredCalls",{enumerable:!1,writable:!1,configurable:!1,value:!0});function Mb(A){let F=typeof A;if(F!=="string")throw new TypeError(`Mongoose maps only support string keys, got ${F}`);if(A.startsWith("$"))throw new Error(`Mongoose maps do not support keys that start with "$", got "${A}"`);if(A.includes("."))throw new Error(`Mongoose maps do not support keys that contain ".", got "${A}"`);if(CW1.has(A))throw new Error(`Mongoose maps do not support reserved key name "${A}"`)}jb.exports=a3});var kb=z((Au1,Tb)=>{Tb.exports=B6().UUID});var W5=z((KW1)=>{/*!
 * Module exports.
 */KW1.Array=LC();KW1.Buffer=D5();KW1.Document=KW1.Embedded=Y5();KW1.DocumentArray=P7();KW1.Double=Rb();KW1.Decimal128=g$();KW1.ObjectId=R4();KW1.Map=MJ();KW1.Subdocument=DJ();KW1.UUID=kb()});var ub=z((Du1,Ob)=>{var MW1=f6();class gF extends MW1{}var XQ=F3();Object.defineProperty(gF.prototype,"enum",XQ);Object.defineProperty(gF.prototype,"of",XQ);Object.defineProperty(gF.prototype,"castNonArrays",XQ);/*!
 * ignore
 */Ob.exports=gF});var fb=z(($u1,Sb)=>{Sb.exports=EQ;function EQ(A){if(!Array.isArray(A))return{min:0,max:0,containsNonArrayItem:!0};if(A.length===0)return{min:1,max:1,containsNonArrayItem:!1};if(A.length===1&&!Array.isArray(A[0]))return{min:1,max:1,containsNonArrayItem:!1};let F=EQ(A[0]);for(let B=1;B<A.length;++B){let D=EQ(A[B]);if(D.min<F.min)F.min=D.min;if(D.max>F.max)F.max=D.max;F.containsNonArrayItem=F.containsNonArrayItem||D.containsNonArrayItem}return F.min=F.min+1,F.max=F.max+1,F}});var bF=z((Ju1,xb)=>{var _b=i("assert");xb.exports=function A(F){if(F==null)return F;if(F==="")return null;if(typeof F==="string"||typeof F==="boolean")F=Number(F);if(_b.ok(!isNaN(F)),F instanceof Number)return F.valueOf();if(typeof F==="number")return F;if(!Array.isArray(F)&&typeof F.valueOf==="function")return Number(F.valueOf());if(F.toString&&!Array.isArray(F)&&F.toString()==Number(F))return Number(F);_b.ok(!1)}});var YQ=z((Xu1,gb)=>{gb.exports=function A(F){if(F==null||typeof F!=="object")return F;if(Array.isArray(F)){for(let B=F.length-1;B>=0;--B)if(F[B]===void 0)F.splice(B,1)}for(let B of Object.keys(F))if(F[B]===void 0)delete F[B];return F}});var hb=z((Eu1,yb)=>{var q5=_2(),bb=V9(),jJ=bF(),jW1=YQ(),TW1=new Set(["$and","$or"]),kW1=new Set(["$cmp","$eq","$lt","$lte","$gt","$gte"]),OW1=new Set(["$multiply","$divide","$log","$mod","$trunc","$avg","$max","$min","$stdDevPop","$stdDevSamp","$sum"]),uW1=new Set(["$abs","$exp","$ceil","$floor","$ln","$log10","$sqrt","$sin","$cos","$tan","$asin","$acos","$atan","$atan2","$asinh","$acosh","$atanh","$sinh","$cosh","$tanh","$degreesToRadians","$radiansToDegrees"]),SW1=new Set(["$arrayElemAt","$first","$last"]),fW1=new Set(["$year","$month","$week","$dayOfMonth","$dayOfYear","$hour","$minute","$second","$isoDayOfWeek","$isoWeekYear","$isoWeek","$millisecond"]),_W1=new Set(["$not"]);yb.exports=function A(F,B,D){if(typeof F==="boolean")return F;if(typeof F!=="object"||F===null)throw new Error("`$expr` must be an object or boolean literal");return J3(F,B,D)};function J3(A,F,B){if(yF(A)||A===null)return A;if(A.$cond!=null)if(Array.isArray(A.$cond))A.$cond=A.$cond.map(($)=>J3($,F,B));else A.$cond.if=J3(A.$cond.if,F,B),A.$cond.then=J3(A.$cond.then,F,B),A.$cond.else=J3(A.$cond.else,F,B);else if(A.$ifNull!=null)A.$ifNull.map(($)=>J3($,F,B));else if(A.$switch!=null){if(Array.isArray(A.$switch.branches))A.$switch.branches=A.$switch.branches.map(($)=>J3($,F,B));if("default"in A.$switch)A.$switch.default=J3(A.$switch.default,F,B)}let D=Object.keys(A);for(let $ of D)if(TW1.has($))A[$]=A[$].map((J)=>J3(J,F,B));else if(kW1.has($))A[$]=bW1(A[$],F,B);else if(OW1.has($))A[$]=gW1(A[$],F,B);else if(uW1.has($))A[$]=GQ(A[$],F,B);else if(_W1.has($))A[$]=J3(A[$],F,B);if(A.$in)A.$in=xW1(A.$in,F,B);if(A.$size)A.$size=GQ(A.$size,F,B);if(A.$round){let $=A.$round;if(!Array.isArray($)||$.length<1||$.length>2)throw new q5("Array",$,"$round");A.$round=$.map((J)=>GQ(J,F,B))}return jW1(A),A}function GQ(A){if(!TJ(A))return A;try{return jJ(A)}catch(F){throw new q5("Number",A)}}function xW1(A,F,B){let D=A[1];if(!yF(D))return A;let $=A[0],J=F.path(D.slice(1));if(J===null){if(B===!1)return A;else if(B==="throw")throw new bb("$in");return}if(!J.$isMongooseArray)throw new Error("Path must be an array for $in");return[J.$isMongooseDocumentArray?J.$embeddedSchemaType.cast($):J.caster.cast($),D]}function gW1(A){if(!Array.isArray(A)){if(!TJ(A))return A;try{return jJ(A)}catch(F){throw new q5("Number",A)}}return A.map((F)=>{if(!TJ(F))return F;try{return jJ(F)}catch(B){throw new q5("Number",F)}})}function bW1(A,F,B){if(!Array.isArray(A)||A.length!==2)throw new Error("Comparison operator must be an array of length 2");A[0]=J3(A[0],F,B);let D=A[0];if(TJ(A[1])){let $=null,J=null,X=null;if(yF(D))$=D.slice(1),J=F.path($);else if(typeof D==="object"&&D!=null){for(let Y of Object.keys(D))if(fW1.has(Y)&&yF(D[Y]))$=D[Y].slice(1)+"."+Y,X=jJ;else if(SW1.has(Y)&&yF(D[Y])){if($=D[Y].slice(1)+"."+Y,J=F.path(D[Y].slice(1)),J!=null){if(J.$isMongooseDocumentArray)J=J.$embeddedSchemaType;else if(J.$isMongooseArray)J=J.caster}}}let E=typeof A[1]==="object"&&A[1]!=null&&A[1].$literal!=null;if(J!=null)if(E)A[1]={$literal:J.cast(A[1].$literal)};else A[1]=J.cast(A[1]);else if(X!=null)if(E)try{A[1]={$literal:X(A[1].$literal)}}catch(Y){throw new q5(X.name.replace(/^cast/,""),A[1],$+".$literal")}else try{A[1]=X(A[1])}catch(Y){throw new q5(X.name.replace(/^cast/,""),A[1],$)}else if($!=null&&B===!0)return;else if($!=null&&B==="throw")throw new bb($)}else A[1]=J3(A[1]);return A}function yF(A){return typeof A==="string"&&A[0]==="$"}function TJ(A){if(typeof A==="string"&&A[0]==="$")return!1;if(typeof A==="object"&&A!==null&&Object.keys(A).find((F)=>F[0]==="$"))return A.$literal!=null;return!0}});var kJ=z((Yu1,vb)=>{var yW1=_2();vb.exports=function A(F,B){if(F==null)return F;if(F._id&&typeof F._id==="string")return F._id;if(F.toString&&F.toString!==Object.prototype.toString&&!Array.isArray(F))return F.toString();throw new yW1("string",F,B)}});var cb=z((Gu1,lb)=>{var hW1=_2(),mb=d$(),db=kJ();lb.exports=function A(F,B){if(F==null||typeof F!=="object")throw new hW1("$text",F,B);if(F.$search!=null)F.$search=db(F.$search,B+".$search");if(F.$language!=null)F.$language=db(F.$language,B+".$language");if(F.$caseSensitive!=null)F.$caseSensitive=mb(F.$caseSensitive,B+".$castSensitive");if(F.$diacriticSensitive!=null)F.$diacriticSensitive=mb(F.$diacriticSensitive,B+".$diacriticSensitive");return F}});var hF=z((Hu1,pb)=>{var vW1=new Set(["$ref","$id","$db"]);pb.exports=function A(F){return F[0]==="$"&&!vW1.has(F)}});var T7=z((Wu1,rb)=>{/*!
 * Module dependencies.
 */var ib=_2(),HQ=V9(),mW1=vF(),dW1=hb(),lW1=kJ(),cW1=cb(),pW1=f0(),nb=AJ(),sb=hF(),iW1=i("util"),qQ=Z9(),WQ=wF(),ab=Q1(),nW1=["Polygon","MultiPolygon"];rb.exports=function A(F,B,D,$){if(Array.isArray(B))throw new Error("Query filter must be an object, got an array ",iW1.inspect(B));if(B==null)return B;if(F!=null&&F.discriminators!=null&&B[F.options.discriminatorKey]!=null)F=nb(F,B[F.options.discriminatorKey])||F;let J=Object.keys(B),X=J.length,E,Y,G,H,W,q,C;D=D||{};while(X--)if(W=J[X],C=B[W],W==="$or"||W==="$nor"||W==="$and"){if(!Array.isArray(C))throw new ib("Array",C,W);for(let Q=C.length-1;Q>=0;Q--){if(C[Q]==null||typeof C[Q]!=="object")throw new ib("Object",C[Q],W+"."+Q);let K=Object.keys(C[Q]).length,U=C[Q][F.options.discriminatorKey];if(U==null)C[Q]=A(F,C[Q],D,$);else{let Z=nb($.schema,U);C[Q]=A(Z?Z:F,C[Q],D,$)}if(Object.keys(C[Q]).length===0&&K!==0)C.splice(Q,1)}if(C.length===0)delete B[W]}else if(W==="$where"){if(q=typeof C,q!=="string"&&q!=="function")throw new Error("Must have a string or function for $where");if(q==="function")B[W]=C.toString();continue}else if(W==="$expr"){C=dW1(C,F);continue}else if(W==="$elemMatch")C=A(F,C,D,$);else if(W==="$text")C=cW1(C,W);else if(W==="$comment"&&!F.paths.hasOwnProperty("$comment"))C=lW1(C,W),B[W]=C;else{if(!F)continue;if(G=F.path(W),!G){let Q=W.split("."),K=Q.length;while(K--){let U=Q.slice(0,K).join("."),Z=Q.slice(K).join("."),V=F.path(U),w=V&&V.schema&&V.schema.options&&V.schema.options.discriminatorKey;if(V!=null&&(V.schema&&V.schema.discriminators)!=null&&w!=null&&Z!==w){let R=pW1(B,U+"."+w),I=V.schema.discriminators;if(typeof R==="string"&&I[R]!=null)G=I[R].path(Z);else if(R!=null&&Object.keys(R).length===1&&Array.isArray(R.$in)&&R.$in.length===1&&typeof R.$in[0]==="string"&&I[R.$in[0]]!=null)G=I[R.$in[0]].path(Z)}}}if(!G){let Q=W.split("."),K=Q.length,U,Z,V;while(K--)if(U=Q.slice(0,K).join("."),G=F.path(U),G)break;if(G){if(G.caster&&G.caster.schema){V={},Z=Q.slice(K).join("."),V[Z]=C;let I=A(G.caster.schema,V,D,$)[Z];if(I===void 0)delete B[W];else B[W]=I}else B[W]=C;continue}if(qQ(C)){let I="";if(C.$near)I="$near";else if(C.$nearSphere)I="$nearSphere";else if(C.$within)I="$within";else if(C.$geoIntersects)I="$geoIntersects";else if(C.$geoWithin)I="$geoWithin";if(I){let j=new mW1.Number("__QueryCasting__"),k=C[I];if(C.$maxDistance!=null)C.$maxDistance=j.castForQuery(null,C.$maxDistance,$);if(C.$minDistance!=null)C.$minDistance=j.castForQuery(null,C.$minDistance,$);if(I==="$within"){let u=k.$center||k.$centerSphere||k.$box||k.$polygon;if(!u)throw new Error("Bad $within parameter: "+JSON.stringify(C));k=u}else if(I==="$near"&&typeof k.type==="string"&&Array.isArray(k.coordinates))k=k.coordinates;else if((I==="$near"||I==="$nearSphere"||I==="$geoIntersects")&&k.$geometry&&typeof k.$geometry.type==="string"&&Array.isArray(k.$geometry.coordinates)){if(k.$maxDistance!=null)k.$maxDistance=j.castForQuery(null,k.$maxDistance,$);if(k.$minDistance!=null)k.$minDistance=j.castForQuery(null,k.$minDistance,$);if(WQ(k.$geometry))k.$geometry=k.$geometry.toObject({transform:!1,virtuals:!1});k=k.$geometry.coordinates}else if(I==="$geoWithin"){if(k.$geometry){if(WQ(k.$geometry))k.$geometry=k.$geometry.toObject({virtuals:!1});let u=k.$geometry.type;if(nW1.indexOf(u)===-1)throw new Error('Invalid geoJSON type for $geoWithin "'+u+'", must be "Polygon" or "MultiPolygon"');k=k.$geometry.coordinates}else if(k=k.$box||k.$polygon||k.$center||k.$centerSphere,WQ(k))k=k.toObject({virtuals:!1})}CQ(k,j,$);continue}}if(F.nested[W])continue;let w="strict"in D?D.strict:F.options.strict,R=sW1(D,F._userProvidedOptions,F.options,$);if(D.upsert&&w){if(w==="throw")throw new HQ(W);throw new HQ(W,'Path "'+W+'" is not in schema, strict mode is `true`, and upsert is `true`.')}if(R==="throw")throw new HQ(W,'Path "'+W+`" is not in schema and strictQuery is 'throw'.`);else if(R)delete B[W]}else if(C==null)continue;else if(ab.isPOJO(C))if(Y=Object.keys(C).some(sb),!Y)B[W]=G.castForQuery(null,C,$);else{let Q=Object.keys(C),K,U=Q.length;while(U--)if(K=Q[U],H=C[K],K==="$elemMatch"){if(H&&G!=null&&G.schema!=null)A(G.schema,H,D,$);else if(H&&G!=null&&G.$isMongooseArray)if(ab.isPOJO(H)&&H.$not!=null)A(F,H,D,$);else C[K]=G.castForQuery(K,H,$)}else if(K==="$not"){if(H&&G){if(E=Object.keys(H),E.length&&sb(E[0]))for(let Z in H)H[Z]=G.castForQuery(Z,H[Z],$);else C[K]=G.castForQuery(K,H,$);continue}}else C[K]=G.castForQuery(K,H,$)}else if(Array.isArray(C)&&["Buffer","Array"].indexOf(G.instance)===-1&&!D.sanitizeFilter){let Q=[],K=C;for(let U of K)Q.push(G.castForQuery(null,U,$));B[W]={$in:Q}}else B[W]=G.castForQuery(null,C,$)}return B};function CQ(A,F,B){if(Array.isArray(A))A.forEach(function(D,$){if(Array.isArray(D)||qQ(D))return CQ(D,F,B);A[$]=F.castForQuery(null,D,B)});else{let D=Object.keys(A),$=D.length;while($--){let J=D[$],X=A[J];if(Array.isArray(X)||qQ(X))CQ(X,F,B),A[J]=X;else A[J]=F.castForQuery({val:X,context:B})}}}function sW1(A,F,B,D){if("strictQuery"in A)return A.strictQuery;if("strictQuery"in F)return F.strictQuery;let $=D&&D.mongooseCollection&&D.mongooseCollection.conn&&D.mongooseCollection.conn.base&&D.mongooseCollection.conn.base.options;if($){if("strictQuery"in $)return $.strictQuery}return B.strictQuery}});var ob=z((qu1,tb)=>{var aW1=f6();class C5 extends aW1{}var OJ=F3();Object.defineProperty(C5.prototype,"min",OJ);Object.defineProperty(C5.prototype,"max",OJ);Object.defineProperty(C5.prototype,"enum",OJ);Object.defineProperty(C5.prototype,"populate",OJ);/*!
 * ignore
 */tb.exports=C5});var b2=z((Cu1,eb)=>{eb.exports=function A(F,B,D,$){if(D){if($)return{bsonType:B};return{bsonType:[B,"null"]}}else{if($)return{type:F};return{type:[F,"null"]}}}});var mF=z((Qu1,Fy)=>{/*!
 * Module requirements.
 */var rW1=_2();/*!
 * ignore
 */function tW1(A){let F=this;if(Array.isArray(A))return A.map(function(B){return Ay(F.path,B)});else if(Buffer.isBuffer(A))return A;return Ay(F.path,A)}/*!
 * ignore
 */function Ay(A,F){let B=Number(F);if(isNaN(B))throw new rW1("number",F,A);return B}Fy.exports=tW1});var zQ=z((Ku1,By)=>{/*!
 * Module requirements.
 */var fJ=G6(),oW1=ob(),k4=n0(),eW1=bF(),Aq1=b2(),uJ=mF(),QQ=Q1(),KQ=k4.CastError;function U0(A,F){k4.call(this,A,F,"Number")}U0.get=k4.get;U0.set=k4.set;U0.setters=[];/*!
 * ignore
 */U0._cast=eW1;U0.cast=function A(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */U0._defaultCaster=(A)=>{if(typeof A!=="number")throw new Error;return A};U0.schemaName="Number";U0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */U0.prototype=Object.create(k4.prototype);U0.prototype.constructor=U0;U0.prototype.OptionsConstructor=oW1;/*!
 * ignore
 */U0._checkRequired=(A)=>typeof A==="number"||A instanceof Number;U0.checkRequired=k4.checkRequired;U0.prototype.checkRequired=function A(F,B){if(typeof F==="object"&&k4._isRef(this,F,B,!0))return F!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():U0.checkRequired())(F)};U0.prototype.min=function(A,F){if(this.minValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.minValidator},this);if(A!==null&&A!==void 0){let B=F||fJ.messages.Number.min;B=B.replace(/{MIN}/,A),this.validators.push({validator:this.minValidator=function(D){return D==null||D>=A},message:B,type:"min",min:A})}return this};U0.prototype.max=function(A,F){if(this.maxValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.maxValidator},this);if(A!==null&&A!==void 0){let B=F||fJ.messages.Number.max;B=B.replace(/{MAX}/,A),this.validators.push({validator:this.maxValidator=function(D){return D==null||D<=A},message:B,type:"max",max:A})}return this};U0.prototype.enum=function(A,F){if(this.enumValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.enumValidator},this);if(!Array.isArray(A)){if(QQ.isPOJO(A)&&A.values!=null)F=A.message,A=A.values;else if(typeof A==="number")A=Array.prototype.slice.call(arguments),F=null;if(QQ.isPOJO(A))A=Object.values(A);F=F||fJ.messages.Number.enum}return F=F==null?fJ.messages.Number.enum:F,this.enumValidator=(B)=>B==null||A.indexOf(B)!==-1,this.validators.push({validator:this.enumValidator,message:F,type:"enum",enumValues:A}),this};U0.prototype.cast=function(A,F,B,D,$){if(typeof A!=="number"&&k4._isRef(this,A,F,B)){if(A==null||QQ.isNonBuiltinObject(A))return this._castRef(A,F,B,$)}let J=A&&typeof A._id!=="undefined"?A._id:A,X;if(typeof this._castFunction==="function")X=this._castFunction;else if(typeof this.constructor.cast==="function")X=this.constructor.cast();else X=U0.cast();try{return X(J)}catch(E){throw new KQ("Number",J,this.path,E,this)}};/*!
 * ignore
 */function SJ(A){return this.cast(A)}function Fq1(A){let F=this;if(!Array.isArray(A))return[this.cast(A)];return A.map(function(B){return F.cast(B)})}U0.prototype.$conditionalHandlers={...k4.prototype.$conditionalHandlers,$bitsAllClear:uJ,$bitsAnyClear:uJ,$bitsAllSet:uJ,$bitsAnySet:uJ,$gt:SJ,$gte:SJ,$lt:SJ,$lte:SJ,$mod:Fq1};U0.prototype.castForQuery=function(A,F,B){let D;if(A!=null){if(D=this.$conditionalHandlers[A],!D)throw new KQ("number",F,this.path,null,this);return D.call(this,F,B)}try{F=this.applySetters(F,B)}catch($){if($ instanceof KQ&&$.path===this.path&&this.$fullPath!=null)$.path=this.$fullPath;throw $}return F};U0.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function"||this.path==="_id";return Aq1("number","number",F?.useBsonType,B)};/*!
 * Module exports.
 */By.exports=U0});var dF=z((Dq1)=>{/*!
 * Module requirements.
 */var Bq1=zQ();/*!
 * ignore
 */Dq1.castToNumber=Dy;Dq1.castArraysOfNumbers=$y;/*!
 * ignore
 */function Dy(A){return Bq1.cast()(A)}function $y(A,F){A.forEach(function(B,D){if(Array.isArray(B))$y(B,F);else A[D]=Dy.call(F,B)})}});var VQ=z((Gq1)=>{/*!
 * Module requirements.
 */var Jy=dF().castArraysOfNumbers,lF=dF().castToNumber;/*!
 * ignore
 */Gq1.cast$geoIntersects=Yq1;Gq1.cast$near=Xq1;Gq1.cast$within=Eq1;function Xq1(A){let F=_J();if(Array.isArray(A))return Jy(A,this),A;if(ZQ(this,A),A&&A.$geometry)return UQ(A,this);if(!Array.isArray(A))throw new TypeError("$near must be either an array or an object with a $geometry property");return F.prototype.castForQuery.call(this,null,A)}function UQ(A,F){switch(A.$geometry.type){case"Polygon":case"LineString":case"Point":Jy(A.$geometry.coordinates,F);break;default:break}return ZQ(F,A),A}function Eq1(A){if(ZQ(this,A),A.$box||A.$polygon){let F=A.$box?"$box":"$polygon";A[F].forEach((B)=>{if(!Array.isArray(B)){let D="Invalid $within $box argument. Expected an array, received "+B;throw new TypeError(D)}B.forEach((D,$)=>{B[$]=lF.call(this,D)})})}else if(A.$center||A.$centerSphere){let F=A.$center?"$center":"$centerSphere";A[F].forEach((B,D)=>{if(Array.isArray(B))B.forEach(($,J)=>{B[J]=lF.call(this,$)});else A[F][D]=lF.call(this,B)})}else if(A.$geometry)UQ(A,this);return A}function Yq1(A){if(!A.$geometry)return;return UQ(A,this),A}function ZQ(A,F){if(F.$maxDistance)F.$maxDistance=lF.call(A,F.$maxDistance);if(F.$minDistance)F.$minDistance=lF.call(A,F.$minDistance)}});var _J=z((Zu1,Gy)=>{/*!
 * Module dependencies.
 */var Cq1=l$(),Qq1=AC(),Ey=T1(),Kq1=ub(),X3=n0(),gJ=X3.CastError,bJ=R7(),zq1=rC(),Xy=RJ(),Uq1=fb(),wQ=T7(),Zq1=I0(),Vq1=o2(),wq1=hF(),yJ=i("util"),R9=Q1(),Lq1=dF().castToNumber,Rq1=b2(),LQ=VQ(),Nq1=$3(),cF,xJ,Yy=Symbol("mongoose#isNestedArray"),Pq1=Object.freeze({});function b1(A,F,B,D){xJ||(xJ=W5().Embedded);let $="type";if(D&&D.typeKey)$=D.typeKey;if(this.schemaOptions=D,F){let E={};if(R9.isPOJO(F))if(F[$])E=Zq1(F),delete E[$],F=F[$];else F=bJ;if(B!=null&&B.ref!=null&&E.ref==null)E.ref=B.ref;if(F===Object)F=bJ;let Y=typeof F==="string"?F:R9.getFunctionName(F),G=vF(),H=G.hasOwnProperty(Y)?G[Y]:F;if(this.casterConstructor=H,this.casterConstructor instanceof b1)this.casterConstructor[Yy]=!0;if(typeof H==="function"&&!H.$isArraySubdocument&&!H.$isSchemaMap){let W=this.caster instanceof xJ?null:A;this.caster=new H(W,E)}else if(this.caster=H,!(this.caster instanceof xJ))this.caster.path=A;this.$embeddedSchemaType=this.caster}this.$isMongooseArray=!0,X3.call(this,A,B,"Array");let J,X;if(this.defaultValue!=null)J=this.defaultValue,X=typeof J==="function";if(!("defaultValue"in this)||this.defaultValue!=null){let E=function(){return X?J.call(this):J!=null?[].concat(J):[]};E.$runBeforeSetters=!X,this.default(E)}}b1.schemaName="Array";b1.options={castNonArrays:!0};/*!
 * ignore
 */b1.defaultOptions={};b1.set=X3.set;b1.setters=[];b1.get=X3.get;/*!
 * Inherits from SchemaType.
 */b1.prototype=Object.create(X3.prototype);b1.prototype.constructor=b1;b1.prototype.OptionsConstructor=Kq1;/*!
 * ignore
 */b1._checkRequired=X3.prototype.checkRequired;b1.checkRequired=X3.checkRequired;/*!
 * Virtuals defined on this array itself.
 */b1.prototype.virtuals=null;b1.prototype.checkRequired=function A(F,B){if(typeof F==="object"&&X3._isRef(this,F,B,!0))return!!F;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():b1.checkRequired())(F)};b1.prototype.enum=function(){let A=this;while(!0){let B=A&&A.caster&&A.caster.instance;if(B==="Array"){A=A.caster;continue}if(B!=="String"&&B!=="Number")throw new Error("`enum` can only be set on an array of strings or numbers , not "+B);break}let F=arguments;if(!Array.isArray(arguments)&&R9.isObject(arguments))F=R9.object.vals(F);return A.caster.enum.apply(A.caster,F),this};b1.prototype.applyGetters=function(A,F){if(F!=null&&F.$__!=null&&F.$populated(this.path))return A;return X3.prototype.applyGetters.call(this,A,F)};b1.prototype._applySetters=function(A,F,B,D){if(this.casterConstructor.$isMongooseArray&&b1.options.castNonArrays&&!this[Yy]){let $=0,J=this;while(J!=null&&J.$isMongooseArray&&!J.$isMongooseDocumentArray)++$,J=J.casterConstructor;if(A!=null&&A.length!==0){let X=Uq1(A);if(X.min===X.max&&X.max<$&&X.containsNonArrayItem)for(let E=X.max;E<$;++E)A=[A]}}return X3.prototype._applySetters.call(this,A,F,B,D)};b1.prototype.cast=function(A,F,B,D,$){cF||(cF=W5().Array);let J,X;if(Array.isArray(A)){if(!A.length&&F){let C=F.schema.indexedPaths(),Q=this.path;for(J=0,X=C.length;J<X;++J){let U=C[J][0][Q];if(U==="2dsphere"||U==="2d")return}let K=this.path.endsWith(".coordinates")?this.path.substring(0,this.path.lastIndexOf(".")):null;if(K!=null){for(J=0,X=C.length;J<X;++J)if(C[J][0][K]==="2dsphere")return}}$=$||Pq1;let G=R9.isMongooseArray(A)?A.__array:A,H=$.path||this.path;if($.arrayPathIndex!=null)H+="."+$.arrayPathIndex;if(A=cF(G,H,F,this),G=A.__array,B&&F!=null&&F.$__!=null&&F.$populated(this.path))return A;let W=this.caster,q=W.$isMongooseArray;if(W&&this.casterConstructor!==bJ)try{let C=G.length;for(J=0;J<C;J++){let Q={};if(q){if($.arrayPath!=null)Q.arrayPathIndex=J;else if(W._arrayParentPath!=null)Q.arrayPathIndex=J}if($.hydratedPopulatedDocs)Q.hydratedPopulatedDocs=$.hydratedPopulatedDocs;G[J]=W.applySetters(G[J],F,B,void 0,Q)}}catch(C){throw new gJ("["+C.kind+"]",yJ.inspect(A),this.path+"."+J,C,this)}return A}let E=this.options.castNonArrays!=null?this.options.castNonArrays:b1.options.castNonArrays;if(B||E){if(!!F&&!!B)F.markModified(this.path);return this.cast([A],F,B)}throw new gJ("Array",yJ.inspect(A),this.path,null,this)};/*!
 * ignore
 */b1.prototype._castForPopulate=function A(F,B){if(cF||(cF=W5().Array),Array.isArray(F)){let D,$=F.__array?F.__array:F,J=$.length,X=this.caster;if(X&&this.casterConstructor!==bJ)try{for(D=0;D<J;D++){let E={};if(X.$isMongooseArray&&X._arrayParentPath!=null)E.arrayPathIndex=D;$[D]=X.cast($[D],B,!1,void 0,E)}}catch(E){throw new gJ("["+E.kind+"]",yJ.inspect(F),this.path+"."+D,E,this)}return F}throw new gJ("Array",yJ.inspect(F),this.path,null,this)};b1.prototype.$toObject=b1.prototype.toObject;/*!
 * ignore
 */b1.prototype.discriminator=function(...A){let F=this;while(F.$isMongooseArray&&!F.$isMongooseDocumentArray)if(F=F.casterConstructor,F==null||typeof F==="function")throw new Ey("You can only add an embedded discriminator on a document array, "+this.path+" is a plain array");return F.discriminator(...A)};/*!
 * ignore
 */b1.prototype.clone=function(){let A=Object.assign({},this.options),F=new this.constructor(this.path,this.caster,A,this.schemaOptions);if(F.validators=this.validators.slice(),this.requiredValidator!==void 0)F.requiredValidator=this.requiredValidator;return F};b1.prototype._castForQuery=function(A,F){let B=this.casterConstructor;if(A&&B.discriminators&&B.schema&&B.schema.options&&B.schema.options.discriminatorKey)if(typeof A[B.schema.options.discriminatorKey]==="string"&&B.discriminators[A[B.schema.options.discriminatorKey]])B=B.discriminators[A[B.schema.options.discriminatorKey]];else{let Y=Nq1(B.discriminators,A[B.schema.options.discriminatorKey]);if(Y)B=Y}let D=this.casterConstructor.prototype,$=D&&D.castForQuery,J=D&&D.cast,X=B.castForQuery,E=this.caster;if(Array.isArray(A))this.setters.reverse().forEach((Y)=>{A=Y.call(this,A,this)}),A=A.map(function(Y){if(R9.isObject(Y)&&Y.$elemMatch)return Y;if($)return Y=$.call(E,null,Y,F),Y;else if(J)return Y=J.call(E,Y),Y;else if(X)return Y=X.call(E,null,Y,F),Y;if(Y!=null)return Y=new B(Y),Y;return Y});else if($)A=$.call(E,null,A,F);else if(J)A=J.call(E,A);else if(X)A=X.call(E,null,A,F);else if(A!=null)A=new B(A);return A};b1.prototype.castForQuery=function(A,F,B){let D;if(A!=null){if(D=this.$conditionalHandlers[A],!D)throw new Error("Can't use "+A+" with Array.");return D.call(this,F,B)}else return this._castForQuery(F,B)};b1.prototype.virtual=function A(F,B){if(F instanceof Xy||Vq1(F)==="VirtualType")return this.virtual(F.path,F.options);if(B=new zq1(B),R9.hasUserDefinedProperty(B,["ref","refPath"]))throw new Ey("Cannot set populate virtual as a property of an array");let D=new Xy(B,F);if(this.virtuals===null)this.virtuals={};return this.virtuals[F]=D,D};function Iq1(A,F){if(!Array.isArray(A))A=[A];return A=A.map((B)=>{if(!R9.isObject(B))return B;if(B.$elemMatch!=null)return{$elemMatch:wQ(this.casterConstructor.schema,B.$elemMatch,null,this&&this.$$context)};let D={};return D[this.path]=B,wQ(this.casterConstructor.schema,D,null,this&&this.$$context)[this.path]},this),this.castForQuery(null,A,F)}function Mq1(A,F){let B=Object.keys(A),D=B.length;for(let $=0;$<D;++$){let J=B[$],X=A[J];if(wq1(J)&&X!=null)A[J]=this.castForQuery(J,X,F)}return A}var H0=b1.prototype.$conditionalHandlers={};H0.$all=Iq1;H0.$options=String;H0.$elemMatch=Mq1;H0.$geoIntersects=LQ.cast$geoIntersects;H0.$or=RQ("$or");H0.$and=RQ("$and");H0.$nor=RQ("$nor");function RQ(A){return function F(B,D){if(!Array.isArray(B))throw new TypeError("conditional "+A+" requires an array");let $=[];for(let J of B)$.push(wQ(this.casterConstructor.schema??D.schema,J,null,this&&this.$$context));return $}}H0.$near=H0.$nearSphere=LQ.cast$near;H0.$within=H0.$geoWithin=LQ.cast$within;H0.$size=H0.$minDistance=H0.$maxDistance=Lq1;H0.$exists=Cq1;H0.$type=Qq1;H0.$eq=H0.$gt=H0.$gte=H0.$lt=H0.$lte=H0.$not=H0.$regex=H0.$ne=b1.prototype._castForQuery;H0.$nin=X3.prototype.$conditionalHandlers.$nin;H0.$in=X3.prototype.$conditionalHandlers.$in;b1.prototype.toJSONSchema=function A(F){let B=this.getEmbeddedSchemaType(),D=this.options.required&&typeof this.options.required!=="function";return{...Rq1("array","array",F?.useBsonType,D),items:B.toJSONSchema(F)}};b1.prototype.autoEncryptionType=function A(){return"array"};/*!
 * Module exports.
 */Gy.exports=b1});var qy=z((Vu1,Wy)=>{var{Long:jq1}=B6(),NQ=9223372036854775807n,PQ=-9223372036854775808n,Hy=`Mongoose only supports BigInts between ${PQ} and ${NQ} because MongoDB does not support arbitrary precision integers`;Wy.exports=function A(F){if(F==null)return F;if(F==="")return null;if(typeof F==="bigint"){if(F>NQ||F<PQ)throw new Error(Hy);return F}if(F instanceof jq1)return F.toBigInt();if(typeof F==="string"||typeof F==="number"){if(F=BigInt(F),F>NQ||F<PQ)throw new Error(Hy);return F}throw new Error(`Cannot convert value to BigInt: "${F}"`)}});var Ky=z((wu1,Qy)=>{/*!
 * Module dependencies.
 */var Cy=_2(),Q5=n0(),Tq1=qy(),kq1=b2();function M0(A,F){Q5.call(this,A,F,"BigInt")}M0.schemaName="BigInt";M0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */M0.prototype=Object.create(Q5.prototype);M0.prototype.constructor=M0;/*!
 * ignore
 */M0._cast=Tq1;M0.set=Q5.set;M0.setters=[];M0.get=Q5.get;M0.cast=function A(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */M0._checkRequired=(A)=>A!=null;M0.checkRequired=Q5.checkRequired;M0.prototype.checkRequired=function(A){return this.constructor._checkRequired(A)};M0.prototype.cast=function(A){let F;if(typeof this._castFunction==="function")F=this._castFunction;else if(typeof this.constructor.cast==="function")F=this.constructor.cast();else F=M0.cast();try{return F(A)}catch(B){throw new Cy("BigInt",A,this.path,B,this)}};/*!
 * ignore
 */M0.$conditionalHandlers={...Q5.prototype.$conditionalHandlers,$gt:hJ,$gte:hJ,$lt:hJ,$lte:hJ};/*!
 * ignore
 */function hJ(A,F){return this.castForQuery(null,A,F)}M0.prototype.castForQuery=function(A,F,B){let D;if(A!=null){if(D=M0.$conditionalHandlers[A],D)return D.call(this,F);return this.applySetters(F,B)}try{return this.applySetters(F,B)}catch($){if($ instanceof Cy&&$.path===this.path&&this.$fullPath!=null)$.path=this.$fullPath;throw $}};M0.prototype._castNullish=function A(F){if(typeof F==="undefined")return F;if((typeof this.constructor.cast==="function"?this.constructor.cast():M0.cast())==null)return F;return F};M0.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function";return kq1("string","long",F?.useBsonType,B)};M0.prototype.autoEncryptionType=function A(){return"long"};/*!
 * Module exports.
 */Qy.exports=M0});var Zy=z((Lu1,Uy)=>{/*!
 * Module dependencies.
 */var zy=_2(),K5=n0(),pF=d$(),Oq1=b2();function W0(A,F){K5.call(this,A,F,"Boolean")}W0.schemaName="Boolean";W0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */W0.prototype=Object.create(K5.prototype);W0.prototype.constructor=W0;/*!
 * ignore
 */W0._cast=pF;W0.set=K5.set;W0.setters=[];W0.get=K5.get;W0.cast=function A(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */W0._defaultCaster=(A)=>{if(A!=null&&typeof A!=="boolean")throw new Error;return A};/*!
 * ignore
 */W0._checkRequired=(A)=>A===!0||A===!1;W0.checkRequired=K5.checkRequired;W0.prototype.checkRequired=function(A){return this.constructor._checkRequired(A)};Object.defineProperty(W0,"convertToTrue",{get:()=>pF.convertToTrue,set:(A)=>{pF.convertToTrue=A}});Object.defineProperty(W0,"convertToFalse",{get:()=>pF.convertToFalse,set:(A)=>{pF.convertToFalse=A}});W0.prototype.cast=function(A){let F;if(typeof this._castFunction==="function")F=this._castFunction;else if(typeof this.constructor.cast==="function")F=this.constructor.cast();else F=W0.cast();try{return F(A)}catch(B){throw new zy("Boolean",A,this.path,B,this)}};W0.$conditionalHandlers={...K5.prototype.$conditionalHandlers};W0.prototype.castForQuery=function(A,F,B){let D;if(A!=null){if(D=W0.$conditionalHandlers[A],D)return D.call(this,F);return this.applySetters(F,B)}try{return this.applySetters(F,B)}catch($){if($ instanceof zy&&$.path===this.path&&this.$fullPath!=null)$.path=this.$fullPath;throw $}};W0.prototype._castNullish=function A(F){if(typeof F==="undefined")return F;let B=typeof this.constructor.cast==="function"?this.constructor.cast():W0.cast();if(B==null)return F;if(B.convertToFalse instanceof Set&&B.convertToFalse.has(F))return!1;if(B.convertToTrue instanceof Set&&B.convertToTrue.has(F))return!0;return F};W0.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function";return Oq1("boolean","bool",F?.useBsonType,B)};W0.prototype.autoEncryptionType=function A(){return"bool"};/*!
 * Module exports.
 */Uy.exports=W0});var wy=z((Ru1,Vy)=>{var uq1=f6();class IQ extends uq1{}var Sq1=F3();Object.defineProperty(IQ.prototype,"subtype",Sq1);/*!
 * ignore
 */Vy.exports=IQ});var Ny=z((Nu1,Ry)=>{/*!
 * Module dependencies.
 */var z5=D5(),fq1=wy(),O4=n0(),_q1=b2(),vJ=mF(),Ly=Q1(),MQ=z5.Binary,dJ=O4.CastError;function r0(A,F){O4.call(this,A,F,"Buffer")}r0.schemaName="Buffer";r0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */r0.prototype=Object.create(O4.prototype);r0.prototype.constructor=r0;r0.prototype.OptionsConstructor=fq1;/*!
 * ignore
 */r0._checkRequired=(A)=>!!(A&&A.length);r0.set=O4.set;r0.setters=[];r0.get=O4.get;r0.checkRequired=O4.checkRequired;r0.prototype.checkRequired=function(A,F){if(O4._isRef(this,A,F,!0))return!!A;return this.constructor._checkRequired(A)};r0.prototype.cast=function(A,F,B,D,$){let J;if(O4._isRef(this,A,F,B)){if(A&&A.isMongooseBuffer)return A;if(Buffer.isBuffer(A)){if(!A||!A.isMongooseBuffer){if(A=new z5(A,[this.path,F]),this.options.subtype!=null)A._subtype=this.options.subtype}return A}if(A instanceof MQ){if(J=new z5(A.value(!0),[this.path,F]),typeof A.sub_type!=="number")throw new dJ("Buffer",A,this.path,null,this);return J._subtype=A.sub_type,J}if(A==null||Ly.isNonBuiltinObject(A))return this._castRef(A,F,B,$)}if(A&&A._id)A=A._id;if(A&&A.isMongooseBuffer)return A;if(Buffer.isBuffer(A)){if(!A||!A.isMongooseBuffer){if(A=new z5(A,[this.path,F]),this.options.subtype!=null)A._subtype=this.options.subtype}return A}if(A instanceof MQ){if(J=new z5(A.value(!0),[this.path,F]),typeof A.sub_type!=="number")throw new dJ("Buffer",A,this.path,null,this);return J._subtype=A.sub_type,J}if(A===null)return A;let X=typeof A;if(X==="string"||X==="number"||Array.isArray(A)||X==="object"&&A.type==="Buffer"&&Array.isArray(A.data)){if(X==="number")A=[A];if(J=new z5(A,[this.path,F]),this.options.subtype!=null)J._subtype=this.options.subtype;return J}if(Ly.isPOJO(A)&&(A.$binary instanceof MQ||typeof A.$binary==="string")){let E=this.cast(Buffer.from(A.$binary,"base64"));if(A.$type!=null)return E._subtype=A.$type,E}throw new dJ("Buffer",A,this.path,null,this)};r0.prototype.subtype=function(A){return this.options.subtype=A,this};/*!
 * ignore
 */function mJ(A,F){return this.castForQuery(null,A,F)}r0.prototype.$conditionalHandlers={...O4.prototype.$conditionalHandlers,$bitsAllClear:vJ,$bitsAnyClear:vJ,$bitsAllSet:vJ,$bitsAnySet:vJ,$gt:mJ,$gte:mJ,$lt:mJ,$lte:mJ};r0.prototype.castForQuery=function(A,F,B){let D;if(A!=null){if(D=this.$conditionalHandlers[A],!D)throw new Error("Can't use "+A+" with Buffer.");return D.call(this,F)}let $;try{$=this.applySetters(F,B)}catch(J){if(J instanceof dJ&&J.path===this.path&&this.$fullPath!=null)J.path=this.$fullPath;throw J}return $?$.toObject({transform:!1,virtuals:!1}):$};r0.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function";return _q1("string","binData",F?.useBsonType,B)};r0.prototype.autoEncryptionType=function A(){return"binData"};/*!
 * Module exports.
 */Ry.exports=r0});var Iy=z((Pu1,Py)=>{var xq1=f6();class iF extends xq1{}var jQ=F3();Object.defineProperty(iF.prototype,"min",jQ);Object.defineProperty(iF.prototype,"max",jQ);Object.defineProperty(iF.prototype,"expires",jQ);/*!
 * ignore
 */Py.exports=iF});var jy=z((Iu1,My)=>{var TQ=i("assert");My.exports=function A(F){if(F==null||F==="")return null;if(F instanceof Date)return TQ.ok(!isNaN(F.valueOf())),F;let B;if(TQ.ok(typeof F!=="boolean"),F instanceof Number||typeof F==="number")B=new Date(F);else if(typeof F==="string"&&!isNaN(Number(F))&&(Number(F)>=275761||Number(F)<-271820))B=new Date(Number(F));else if(typeof F.valueOf==="function")B=new Date(F.valueOf());else B=new Date(F);if(!isNaN(B.valueOf()))return B;TQ.ok(!1)}});var uy=z((Mu1,Oy)=>{/*!
 * Module requirements.
 */var Ty=G6(),gq1=Iy(),N9=n0(),bq1=jy(),yq1=b2(),hq1=o2(),vq1=Q1(),ky=N9.CastError;function q0(A,F){N9.call(this,A,F,"Date")}q0.schemaName="Date";q0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */q0.prototype=Object.create(N9.prototype);q0.prototype.constructor=q0;q0.prototype.OptionsConstructor=gq1;/*!
 * ignore
 */q0._cast=bq1;q0.set=N9.set;q0.setters=[];q0.get=N9.get;q0.cast=function A(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */q0._defaultCaster=(A)=>{if(A!=null&&!(A instanceof Date))throw new Error;return A};q0.prototype.expires=function(A){if(hq1(this._index)!=="Object")this._index={};return this._index.expires=A,vq1.expires(this._index),this};/*!
 * ignore
 */q0._checkRequired=(A)=>A instanceof Date;q0.checkRequired=N9.checkRequired;q0.prototype.checkRequired=function(A,F){if(typeof A==="object"&&N9._isRef(this,A,F,!0))return A!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():q0.checkRequired())(A)};q0.prototype.min=function(A,F){if(this.minValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.minValidator},this);if(A){let B=F||Ty.messages.Date.min;if(typeof B==="string")B=B.replace(/{MIN}/,A===Date.now?"Date.now()":A.toString());let D=this;this.validators.push({validator:this.minValidator=function($){let J=A;if(typeof A==="function"&&A!==Date.now)J=J.call(this);let X=J===Date.now?J():D.cast(J);return $===null||$.valueOf()>=X.valueOf()},message:B,type:"min",min:A})}return this};q0.prototype.max=function(A,F){if(this.maxValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.maxValidator},this);if(A){let B=F||Ty.messages.Date.max;if(typeof B==="string")B=B.replace(/{MAX}/,A===Date.now?"Date.now()":A.toString());let D=this;this.validators.push({validator:this.maxValidator=function($){let J=A;if(typeof J==="function"&&J!==Date.now)J=J.call(this);let X=J===Date.now?J():D.cast(J);return $===null||$.valueOf()<=X.valueOf()},message:B,type:"max",max:A})}return this};q0.prototype.cast=function(A){let F;if(typeof this._castFunction==="function")F=this._castFunction;else if(typeof this.constructor.cast==="function")F=this.constructor.cast();else F=q0.cast();try{return F(A)}catch(B){throw new ky("date",A,this.path,B,this)}};function lJ(A){return this.cast(A)}q0.prototype.$conditionalHandlers={...N9.prototype.$conditionalHandlers,$gt:lJ,$gte:lJ,$lt:lJ,$lte:lJ};q0.prototype.castForQuery=function(A,F,B){if(A==null)try{return this.applySetters(F,B)}catch($){if($ instanceof ky&&$.path===this.path&&this.$fullPath!=null)$.path=this.$fullPath;throw $}let D=this.$conditionalHandlers[A];if(!D)throw new Error("Can't use "+A+" with Date.");return D.call(this,F)};q0.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function";return yq1("string","date",F?.useBsonType,B)};q0.prototype.autoEncryptionType=function A(){return"date"};/*!
 * Module exports.
 */Oy.exports=q0});var fy=z((ju1,Sy)=>{var k7=g$(),mq1=i("assert");Sy.exports=function A(F){if(F==null)return F;if(typeof F==="object"&&typeof F.$numberDecimal==="string")return k7.fromString(F.$numberDecimal);if(F instanceof k7)return F;if(typeof F==="string")return k7.fromString(F);if(typeof Buffer==="function"&&Buffer.isBuffer(F))return new k7(F);if(typeof Uint8Array==="function"&&F instanceof Uint8Array)return new k7(F);if(typeof F==="number")return k7.fromString(String(F));if(typeof F.valueOf==="function"&&typeof F.valueOf()==="string")return k7.fromString(F.valueOf());mq1.ok(!1)}});var xy=z((Tu1,_y)=>{/*!
 * Module dependencies.
 */var u4=n0(),dq1=u4.CastError,lq1=fy(),cq1=b2(),kQ=Q2();function d0(A,F){u4.call(this,A,F,"Decimal128")}d0.schemaName="Decimal128";d0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */d0.prototype=Object.create(u4.prototype);d0.prototype.constructor=d0;/*!
 * ignore
 */d0._cast=lq1;d0.set=u4.set;d0.setters=[];d0.get=u4.get;d0.cast=function A(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */d0._defaultCaster=(A)=>{if(A!=null&&!kQ(A,"Decimal128"))throw new Error;return A};/*!
 * ignore
 */d0._checkRequired=(A)=>kQ(A,"Decimal128");d0.checkRequired=u4.checkRequired;d0.prototype.checkRequired=function A(F,B){if(u4._isRef(this,F,B,!0))return!!F;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():d0.checkRequired())(F)};d0.prototype.cast=function(A,F,B,D,$){if(u4._isRef(this,A,F,B)){if(kQ(A,"Decimal128"))return A;return this._castRef(A,F,B,$)}let J;if(typeof this._castFunction==="function")J=this._castFunction;else if(typeof this.constructor.cast==="function")J=this.constructor.cast();else J=d0.cast();try{return J(A)}catch(X){throw new dq1("Decimal128",A,this.path,X,this)}};/*!
 * ignore
 */function cJ(A){return this.cast(A)}d0.prototype.$conditionalHandlers={...u4.prototype.$conditionalHandlers,$gt:cJ,$gte:cJ,$lt:cJ,$lte:cJ};d0.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function";return cq1("string","decimal",F?.useBsonType,B)};d0.prototype.autoEncryptionType=function A(){return"decimal"};/*!
 * Module exports.
 */_y.exports=d0});var yy=z((ku1,by)=>{var pq1=f6();class pJ extends pq1{}var gy=F3();Object.defineProperty(pJ.prototype,"_id",gy);Object.defineProperty(pJ.prototype,"minimize",gy);by.exports=pJ});var OQ=z((Ou1,hy)=>{hy.exports=function A(F,B,D){if(F.length===0)return D();let $=F.length,J=null;for(let X of F)B(X,function(E){if(J!=null)return;if(E!=null)return J=E,D(J);if(--$<=0)return D()})}});var my=z((uu1,vy)=>{var iq1=OQ();/*!
 * ignore
 */vy.exports=function A(F){F.s.hooks.pre("save",!1,function D($){if(this.$isSubdocument){$();return}let J=this,X=this.$getAllSubdocs({useCache:!0});if(!X.length){$();return}iq1(X,function(E,Y){E.$__schema.s.hooks.execPre("save",E,function(G){Y(G)})},function(E){if(J.$__.saveOptions)J.$__.saveOptions.__subdocs=null;if(E)return J.$__schema.s.hooks.execPost("save:error",J,[J],{error:E},function(Y){$(Y)});$()})},null,!0),F.s.hooks.post("save",async function D(){let $=this.$__.removedSubdocs;if(!$||!$.length)return;let J=[];for(let X of $)J.push(new Promise((E,Y)=>{X.$__schema.s.hooks.execPost("deleteOne",X,[X],function(G){if(G)return Y(G);E()})}));this.$__.removedSubdocs=null,await Promise.all(J)}),F.s.hooks.post("save",async function D(){if(this.$isSubdocument)return;let $=this,J=this.$getAllSubdocs({useCache:!0});if(!J.length)return;let X=[];for(let E of J)X.push(new Promise((Y,G)=>{E.$__schema.s.hooks.execPost("save",E,[E],function(H){if(H)return G(H);Y()})}));try{await Promise.all(X)}catch(E){await new Promise((Y,G)=>{this.$__schema.s.hooks.execPost("save:error",$,[$],{error:E},function(H){if(H)return G(H);Y()})})}},null,!0)}});var cy=z((Su1,SQ)=>{var nq1=$1().objectIdSymbol,dy=Q1();/*!
 * ignore
 */SQ.exports=function A(F){F.post("init",function B(){return uQ.call(this),this}),F.pre("save",function B(D){ly.call(this),D()}),F.pre("remove",function B(D){ly.call(this),D()}),F.post("save",function B(){uQ.call(this)})};/*!
 * ignore
 */function ly(){let A,F;if(this.$__.shardval){A=Object.keys(this.$__.shardval),F=A.length,this.$where=this.$where||{};for(let B=0;B<F;++B)this.$where[A[B]]=this.$__.shardval[A[B]]}}/*!
 * ignore
 */SQ.exports.storeShard=uQ;/*!
 * ignore
 */function uQ(){let A=this.$__schema.options.shardKey||this.$__schema.options.shardkey;if(!dy.isPOJO(A))return;let F=this.$__.shardval={},B=Object.keys(A),D=B.length,$;for(let J=0;J<D;++J)if($=this.$__getValue(B[J]),$==null)F[B[J]]=$;else if(dy.isMongooseObject($))F[B[J]]=$.toObject({depopulate:!0,_isNested:!0});else if($ instanceof Date||$[nq1])F[B[J]]=$;else if(typeof $.valueOf==="function")F[B[J]]=$.valueOf();else F[B[J]]=$}});var ny=z((fu1,iy)=>{var U5=$1().arrayAtomicsSymbol,fQ=$1().sessionNewDocuments,sq1=Q1();iy.exports=function A(F){F.pre("save",function B(){let D=this.$session();if(D==null)return;if(D.transaction==null||D[fQ]==null)return;if(!D[fQ].has(this)){let $={};if(this.isNew)$.isNew=!0;if(this.$__schema.options.versionKey)$.versionKey=this.get(this.$__schema.options.versionKey);$.modifiedPaths=new Set(Object.keys(this.$__.activePaths.getStatePaths("modify"))),$.atomics=aq1(this),D[fQ].set(this,$)}})};function aq1(A,F){let B=new Map;F=F||new Map;let D=Object.keys(A.$__.activePaths.init).concat(Object.keys(A.$__.activePaths.modify));for(let J of D){let X=A.$__getValue(J);if(X!=null&&Array.isArray(X)&&sq1.isMongooseDocumentArray(X)&&X.length&&X[U5]!=null&&Object.keys(X[U5]).length!==0){let E=F.get(J)||{};B.set(J,py(E,X[U5]))}}let $=A.$__dirty();for(let J of $){let{path:X,value:E}=J;if(E!=null&&E[U5]!=null&&Object.keys(E[U5]).length!==0){let Y=F.get(X)||{};B.set(X,py(Y,E[U5]))}}return B}function py(A,F){if(A=A||{},F.$pullAll!=null)A.$pullAll=(A.$pullAll||[]).concat(F.$pullAll);if(F.$push!=null)A.$push=A.$push||{},A.$push.$each=(A.$push.$each||[]).concat(F.$push.$each);if(F.$addToSet!=null)A.$addToSet=(A.$addToSet||[]).concat(F.$addToSet);if(F.$set!=null)A.$set=Array.isArray(F.$set)?[...F.$set]:Object.assign({},F.$set);return A}});var ay=z((_u1,sy)=>{/*!
 * ignore
 */sy.exports=function A(F){F.pre("save",!1,function D($,J){let X=this;if(this.$isSubdocument)return $();let E=J&&typeof J==="object"&&"validateBeforeSave"in J,Y;if(E)Y=!!J.validateBeforeSave;else Y=this.$__schema.options.validateBeforeSave;if(Y){let H=J&&typeof J==="object"&&"validateModifiedOnly"in J?{validateModifiedOnly:J.validateModifiedOnly}:null;this.$validate(H).then(()=>{this.$op="save",$()},(W)=>{X.$__schema.s.hooks.execPost("save:error",X,[X],{error:W},function(q){X.$op="save",$(q)})})}else $()},null,!0)}});var _Q=z((rq1)=>{rq1.saveSubdocs=my();rq1.sharding=cy();rq1.trackTransaction=ny();rq1.validateBeforeSave=ay()});var oy=z((gu1,ty)=>{var ry=_Q();ty.exports=function A(F){for(let B of Object.values(ry))B(F,{deduplicate:!0});F.plugins=Object.values(ry).map((B)=>({fn:B,opts:{deduplicate:!0}})).concat(F.plugins)}});var Fh=z((bu1,Ah)=>{var FC1=i$(),BC1=z7(),DC1=Q2(),$C1=R4(),ey=Z9();Ah.exports=function A(F,B,D,$){let J=Object.keys(B),X=0,E=J.length,Y;if(D=D||"",$=$||new WeakSet,$.has(B))return;$.add(B);while(X<E){if(Y=J[X++],!D){if(Y==="discriminators"||Y==="base"||Y==="_applyDiscriminators"||Y==="_userProvidedOptions"||Y==="options"||Y==="tree")continue}if(D==="tree"&&B!=null&&B.instanceOfSchema)continue;if(BC1.has(Y))continue;if(F[Y]==null)F[Y]=B[Y];else if(ey(B[Y])){if(!ey(F[Y]))F[Y]={};if(B[Y]!=null){if(B[Y].$isSingleNested&&F[Y].$isMongooseDocumentArray||B[Y].$isMongooseDocumentArray&&F[Y].$isSingleNested||B[Y].$isMongooseDocumentArrayElement&&F[Y].$isMongooseDocumentArrayElement)continue;else if(B[Y].instanceOfSchema){if(F[Y].instanceOfSchema)FC1(F[Y],B[Y].clone(),!0);else F[Y]=B[Y].clone();continue}else if(DC1(B[Y],"ObjectId")){F[Y]=new $C1(B[Y]);continue}}A(F[Y],B[Y],D?D+"."+Y:Y,$)}}if(B!=null&&B.instanceOfSchema)F.tree=Object.assign({},B.tree,F.tree)}});var iJ=z((yu1,$h)=>{var Bh=R7(),JC1=oy(),XC1=I0(),EC1=e$().defineKey,YC1=f0(),xQ=Q1(),GC1=Fh(),Dh={toJSON:!0,toObject:!0,_id:!0,id:!0,virtuals:!0,methods:!0};function HC1(A,F){if(A.encryptionType()==null&&F.encryptionType()==null)return;let B=$(D(A),D(F));for(let J of B){if(A._hasEncryptedField(J)&&F._hasEncryptedField(J))throw new Error(`encrypted fields cannot be declared on both the base schema and the child schema in a discriminator. path=${J}`);if(A._hasEncryptedField(J)||F._hasEncryptedField(J))throw new Error(`encrypted fields cannot have the same path as a non-encrypted field for discriminators. path=${J}`)}function D(J){return[...Object.keys(J.paths),...Object.keys(J.singleNestedPaths)]}function*$(J,X){let E=new Set(J);for(let Y of X)if(E.has(Y))yield Y}}/*!
 * ignore
 */$h.exports=function A(F,B,D,$,J,X,E){if(!(D&&D.instanceOfSchema))throw new Error("You must pass a valid discriminator Schema");if(X=X==null?!0:X,F.schema.discriminatorMapping&&!F.schema.discriminatorMapping.isRoot)throw new Error('Discriminator "'+B+'" can only be a discriminator of the root model');if(J){let q=YC1(F.base,"options.applyPluginsToDiscriminators",!1)||!X;F.base._applyPlugins(D,{skipTopLevel:!q})}else if(!X)JC1(D);let Y=F.schema.options.discriminatorKey,G=F.schema.path(Y);if(G!=null){if(!xQ.hasUserDefinedProperty(G.options,"select"))G.options.select=!0;G.options.$skipDiscriminatorCheck=!0}else{let q={};q[Y]={default:void 0,select:!0,$skipDiscriminatorCheck:!0},q[Y][F.schema.options.typeKey]=String,F.schema.add(q),EC1({prop:Y,prototype:F.prototype,options:F.schema.options})}if(D.path(Y)&&D.path(Y).options.$skipDiscriminatorCheck!==!0)throw new Error('Discriminator "'+B+'" cannot have field with name "'+Y+'"');let H=B;if(typeof $==="string"&&$.length||$!=null)H=$;HC1(F.schema,D);function W(q,C){if(q._baseSchema=C,C.paths._id&&C.paths._id.options&&!C.paths._id.options.auto)q.remove("_id");let Q=Object.keys(C.paths),K=[];for(let k of Q){if(q.nested[k]){K.push(k);continue}if(k.indexOf(".")===-1)continue;let u=k.split(".").slice(0,-1),x="";for(let T of u)if(x+=(x.length?".":"")+T,q.paths[x]instanceof Bh||q.singleNestedPaths[x]instanceof Bh)K.push(k)}q.obj={...q.obj},GC1(q,C),q._gatherChildSchemas();for(let k of K)delete q.paths[k];q.childSchemas.forEach((k)=>{k.model.prototype.$__setSchema(k.schema)});let U={};if(U[Y]={default:H,select:!0,set:function(k){if(k===H||Array.isArray(H)&&xQ.deepEqual(k,H))return H;throw new Error(`Can't set discriminator key "`+Y+'"')},$skipDiscriminatorCheck:!0},U[Y][q.options.typeKey]=G?G.options[q.options.typeKey]:String,q.add(U),q.discriminatorMapping={key:Y,value:H,isRoot:!1},C.options.collection)q.options.collection=C.options.collection;let Z=q.options.toJSON,V=q.options.toObject,w=q.options._id,R=q.options.id,I=Object.keys(q.options);q.options.discriminatorKey=C.options.discriminatorKey;let j=q._userProvidedOptions;for(let k of I)if(!Dh[k]){if(k in j&&!xQ.deepEqual(q.options[k],C.options[k]))throw new Error("Can't customize discriminator option "+k+" (can only modify "+Object.keys(Dh).join(", ")+")")}q.options=XC1(C.options);for(let k of Object.keys(j))q.options[k]=j[k];if(Z)q.options.toJSON=Z;if(V)q.options.toObject=V;if(typeof w!=="undefined")q.options._id=w;if(q.options.id=R,X)q.s.hooks=F.schema.s.hooks.merge(q.s.hooks);if(J)q.plugins=Array.prototype.slice.call(C.plugins);q.callQueue=C.callQueue.concat(q.callQueue),delete q._requiredpaths}if(W(D,F.schema),!F.discriminators)F.discriminators={};if(!F.schema.discriminatorMapping)F.schema.discriminatorMapping={key:Y,value:null,isRoot:!0};if(!F.schema.discriminators)F.schema.discriminators={};if(F.schema.discriminators[B]=D,F.discriminators[B]&&!D.options.overwriteModels&&!E)throw new Error('Discriminator with name "'+B+'" already exists');return D}});var nJ=z((hu1,Jh)=>{var WC1=$3();Jh.exports=function A(F,B,D){let $=F.schema.options.discriminatorKey,J=B!=null&&B[$];if(J==null)J=D;if(F.discriminators&&J!=null)if(F.discriminators[J])F=F.discriminators[J];else{let X=WC1(F.discriminators,J);if(X)F=X}return F}});var gQ=z((vu1,Xh)=>{var qC1=oC();Xh.exports=function A(F,B){if(B==null||B._id==null)return F;if(F=F.clone(),!B._id)F.remove("_id"),F.options._id=!1;else if(!F.paths._id)qC1(F),F.options._id=!0;return F}});var yQ=z((mu1,Eh)=>{/*!
 * Module dependencies.
 */var CC1=T1();class bQ extends CC1{constructor(A,F){let B=`Cannot create use schema for property "${A}" because the schema has the ${F} option enabled.`;super(B)}}Object.defineProperty(bQ.prototype,"name",{value:"InvalidSchemaOptionError"});/*!
 * exports
 */Eh.exports=bQ});var dQ=z((du1,Wh)=>{/*!
 * Module dependencies.
 */var Yh=_2(),hQ=i("events").EventEmitter,QC1=s$(),KC1=yy(),Z5=n0(),zC1=r$(),UC1=l$(),Gh=dF().castToNumber,ZC1=b2(),VC1=iJ(),vQ=VQ(),mQ=nJ(),wC1=gQ(),LC1=I3().internalToObjectOptions,RC1=E5(),NC1=Q1(),PC1=yQ(),sJ;Wh.exports=F0;function F0(A,F,B){if(A.options.timeseries)throw new PC1(F,"timeseries");let D=F0.defaultOptions&&F0.defaultOptions._id;if(D!=null)B=B||{},B._id=D;A=wC1(A,B),this.caster=Hh(A,null,B),this.caster.path=F,this.caster.prototype.$basePath=F,this.schema=A,this.$isSingleNested=!0,this.base=A.base,Z5.call(this,F,B,"Embedded")}/*!
 * ignore
 */F0.prototype=Object.create(Z5.prototype);F0.prototype.constructor=F0;F0.prototype.OptionsConstructor=KC1;/*!
 * ignore
 */function Hh(A,F,B){sJ||(sJ=DJ());let D=function J(X,E,Y){if(this.$__parent=Y,sJ.apply(this,arguments),Y==null)return;this.$session(Y.$session())};A._preCompile();let $=F!=null?F.prototype:sJ.prototype;D.prototype=Object.create($),D.prototype.$__setSchema(A),D.prototype.constructor=D,D.prototype.$__schemaTypeOptions=B,D.$__required=B?.required,D.base=A.base,D.schema=A,D.$isSingleNested=!0,D.events=new hQ,D.prototype.toBSON=function(){return this.toObject(LC1)};for(let J in A.methods)D.prototype[J]=A.methods[J];for(let J in A.statics)D[J]=A.statics[J];for(let J in hQ.prototype)D[J]=hQ.prototype[J];return D}F0.prototype.$conditionalHandlers.$geoWithin=function A(F,B){return{$geometry:this.castForQuery(null,F.$geometry,B)}};/*!
 * ignore
 */F0.prototype.$conditionalHandlers.$near=F0.prototype.$conditionalHandlers.$nearSphere=vQ.cast$near;F0.prototype.$conditionalHandlers.$within=F0.prototype.$conditionalHandlers.$geoWithin=vQ.cast$within;F0.prototype.$conditionalHandlers.$geoIntersects=vQ.cast$geoIntersects;F0.prototype.$conditionalHandlers.$minDistance=Gh;F0.prototype.$conditionalHandlers.$maxDistance=Gh;F0.prototype.$conditionalHandlers.$exists=UC1;F0.prototype.cast=function(A,F,B,D,$){if(A&&A.$isSingleNested&&A.parent===F)return A;if(A!=null&&(typeof A!=="object"||Array.isArray(A)))throw new QC1(this.path,A);let J=this.schema.path(this.schema.options.discriminatorKey),X=J==null?null:J.getDefault(F),E=mQ(this.caster,A,X),Y,G=F&&F.$__&&F.$__.selected,H=this.path,W=G==null?null:Object.keys(G).reduce((q,C)=>{if(C.startsWith(H+"."))q=q||{},q[C.substring(H.length+1)]=G[C];return q},null);if(B){Y=new E(void 0,W,F,!1,{defaults:!1}),delete Y.$__.defaults,Y.$init(A);let q=RC1(W);zC1(Y,W,q)}else{if($=Object.assign({},$,{priorDoc:D}),Object.keys(A).length===0)return new E({},W,F,void 0,$);return new E(A,W,F,void 0,$)}return Y};F0.prototype.castForQuery=function(A,F,B,D){let $;if(A!=null){if($=this.$conditionalHandlers[A],!$)throw new Error("Can't use "+A);return $.call(this,F)}if(F==null)return F;let J=mQ(this.caster,F);if(F instanceof J)return F;if(this.options.runSetters)F=this._applySetters(F,B);let X=D!=null&&D.strict!=null?D.strict:void 0;try{F=new J(F,X)}catch(E){if(!(E instanceof Yh))throw new Yh("Embedded",F,this.path,E,this);throw E}return F};F0.prototype.doValidate=function(A,F,B,D){let $=mQ(this.caster,A);if(A&&!(A instanceof $))A=new $(A,null,B!=null&&B.$__!=null?B:null);if(D&&D.skipSchemaValidators){if(!A)return F(null);return A.validate().then(()=>F(null),(J)=>F(J))}Z5.prototype.doValidate.call(this,A,function(J){if(J)return F(J);if(!A)return F(null);A.validate().then(()=>F(null),(X)=>F(X))},B,D)};F0.prototype.doValidateSync=function(A,F,B){if(!B||!B.skipSchemaValidators){let D=Z5.prototype.doValidateSync.call(this,A,F);if(D)return D}if(!A)return;return A.validateSync()};F0.prototype.discriminator=function(A,F,B){B=B||{};let D=NC1.isPOJO(B)?B.value:B,$=typeof B.clone==="boolean"?B.clone:!0;if(F.instanceOfSchema&&$)F=F.clone();return F=VC1(this.caster,A,F,D,null,null,B.overwriteExisting),this.caster.discriminators[A]=Hh(F,this.caster),this.caster.discriminators[A]};/*!
 * ignore
 */F0.defaultOptions={};F0.set=Z5.set;F0.setters=[];F0.get=Z5.get;/*!
 * ignore
 */F0.prototype.toJSON=function A(){return{path:this.path,options:this.options}};/*!
 * ignore
 */F0.prototype.clone=function(){let A=new this.constructor(this.schema,this.path,{...this.options,_skipApplyDiscriminators:!0});if(A.validators=this.validators.slice(),this.requiredValidator!==void 0)A.requiredValidator=this.requiredValidator;return A.caster.discriminators=Object.assign({},this.caster.discriminators),A._appliedDiscriminators=this._appliedDiscriminators,A};F0.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function";return{...this.schema.toJSONSchema(F),...ZC1("object","object",F?.useBsonType,B)}}});var Ch=z((lu1,qh)=>{/*!
 * Module dependencies.
 */var IC1=T1(),lQ=n0(),MC1=dQ(),jC1=nJ();function S4(A,F){if(this.$parentSchemaType=F&&F.$parentSchemaType,!this.$parentSchemaType)throw new IC1("Cannot create DocumentArrayElement schematype without a parent");delete F.$parentSchemaType,lQ.call(this,A,F,"DocumentArrayElement"),this.$isMongooseDocumentArrayElement=!0}S4.schemaName="DocumentArrayElement";S4.defaultOptions={};/*!
 * Inherits from SchemaType.
 */S4.prototype=Object.create(lQ.prototype);S4.prototype.constructor=S4;S4.prototype.cast=function(...A){return this.$parentSchemaType.cast(...A)[0]};S4.prototype.doValidate=function(A,F,B,D){let $=jC1(this.caster,A);if(A&&!(A instanceof $))A=new $(A,B,null,null,D&&D.index!=null?D.index:null);return MC1.prototype.doValidate.call(this,A,F,B,D)};S4.prototype.clone=function(){this.options.$parentSchemaType=this.$parentSchemaType;let A=lQ.prototype.clone.apply(this,arguments);return delete this.options.$parentSchemaType,A.caster=this.caster,A.schema=this.schema,A};/*!
 * Module exports.
 */qh.exports=S4});var zh=z((cu1,Kh)=>{var TC1=f6();class aJ extends TC1{}var Qh=F3();Object.defineProperty(aJ.prototype,"excludeIndexes",Qh);Object.defineProperty(aJ.prototype,"_id",Qh);/*!
 * ignore
 */Kh.exports=aJ});var Ih=z((pu1,Ph)=>{/*!
 * Module dependencies.
 */var Uh=_2(),kC1=Ch(),cQ=i("events").EventEmitter,iQ=_J(),OC1=zh(),nF=n0(),Zh=T7(),Vh=b2(),uC1=iJ(),wh=gQ(),SC1=FJ(),fC1=hF(),V5=Q1(),rJ=nJ(),_C1=yQ(),Lh=$1().arrayAtomicsSymbol,pQ=$1().arrayPathSymbol,xC1=$1().documentArrayParent,f4,O7;function w0(A,F,B,D){if(F.options&&F.options.timeseries)throw new _C1(A,"timeseries");let $=w0.defaultOptions&&w0.defaultOptions._id;if($!=null)D=D||{},D._id=$;if(D!=null&&D._id!=null)F=wh(F,D);else if(B!=null&&B._id!=null)F=wh(F,B);let J=Nh(F,B);J.prototype.$basePath=A,iQ.call(this,A,J,B),this.schema=F,this.schemaOptions=D||{},this.$isMongooseDocumentArray=!0,this.Constructor=J,J.base=F.base;let X=this.defaultValue;if(!("defaultValue"in this)||X!=null)this.default(function(){let Y=X.call(this);if(Y!=null&&!Array.isArray(Y))Y=[Y];return Y});let E=this;this.$embeddedSchemaType=new kC1(A+".$",{required:this&&this.schemaOptions&&this.schemaOptions.required||!1,$parentSchemaType:E}),this.$embeddedSchemaType.caster=this.Constructor,this.$embeddedSchemaType.schema=this.schema}w0.schemaName="DocumentArray";w0.options={castNonArrays:!0};/*!
 * Inherits from SchemaArray.
 */w0.prototype=Object.create(iQ.prototype);w0.prototype.constructor=w0;w0.prototype.OptionsConstructor=OC1;w0.prototype.$conditionalHandlers={...iQ.prototype.$conditionalHandlers};/*!
 * ignore
 */function Nh(A,F,B){O7||(O7=Y5());function D(){if(O7.apply(this,arguments),this.__parentArray==null||this.__parentArray.getArrayParent()==null)return;this.$session(this.__parentArray.getArrayParent().$session())}A._preCompile();let $=B!=null?B.prototype:O7.prototype;D.prototype=Object.create($),D.prototype.$__setSchema(A),D.schema=A,D.prototype.constructor=D,D.$isArraySubdocument=!0,D.events=new cQ,D.base=A.base;for(let J in A.methods)D.prototype[J]=A.methods[J];for(let J in A.statics)D[J]=A.statics[J];for(let J in cQ.prototype)D[J]=cQ.prototype[J];return D.options=F,D}w0.prototype.discriminator=function(A,F,B){if(typeof A==="function")A=V5.getFunctionName(A);B=B||{};let D=V5.isPOJO(B)?B.value:B,$=typeof B.clone==="boolean"?B.clone:!0;if(F.instanceOfSchema&&$)F=F.clone();F=uC1(this.casterConstructor,A,F,D,null,null,B?.overwriteExisting);let J=Nh(F,null,this.casterConstructor);J.baseCasterConstructor=this.casterConstructor;try{Object.defineProperty(J,"name",{value:A})}catch(X){}return this.casterConstructor.discriminators[A]=J,this.casterConstructor.discriminators[A]};w0.prototype.doValidate=function(A,F,B,D){f4||(f4=P7());let $=this;try{nF.prototype.doValidate.call(this,A,J,B)}catch(X){return F(X)}function J(X){if(X)return F(X);let E=A&&A.length,Y;if(!E)return F();if(D&&D.updateValidator)return F();if(!V5.isMongooseDocumentArray(A))A=new f4(A,$.path,B);function G(H){if(H!=null)Y=H;--E||F(Y)}for(let H=0,W=E;H<W;++H){let q=A[H];if(q==null){--E||F(Y);continue}if(!(q instanceof O7)){let C=rJ($.casterConstructor,A[H]);q=A[H]=new C(q,A,void 0,void 0,H)}if(D!=null&&D.validateModifiedOnly&&!q.$isModified()){--E||F(Y);continue}q.$__validate(null,D,G)}}};w0.prototype.doValidateSync=function(A,F,B){let D=nF.prototype.doValidateSync.call(this,A,F);if(D!=null)return D;let $=A&&A.length,J=null;if(!$)return;for(let X=0,E=$;X<E;++X){let Y=A[X];if(!Y)continue;if(!(Y instanceof O7)){let H=rJ(this.casterConstructor,A[X]);Y=A[X]=new H(Y,A,void 0,void 0,X)}if(B!=null&&B.validateModifiedOnly&&!Y.$isModified())continue;let G=Y.validateSync(B);if(G&&J==null)J=G}return J};/*!
 * ignore
 */w0.prototype.getDefault=function(A,F,B){let D=typeof this.defaultValue==="function"?this.defaultValue.call(A):this.defaultValue;if(D==null)return D;if(B&&B.skipCast)return D;if(f4||(f4=P7()),!Array.isArray(D))D=[D];D=new f4(D,this.path,A);for(let $=0;$<D.length;++$){let X=new(rJ(this.casterConstructor,D[$]))({},D,void 0,void 0,$);X.$init(D[$]),X.isNew=!0,Object.assign(X.$__.activePaths.default,X.$__.activePaths.init),X.$__.activePaths.init={},D[$]=X}return D};var gC1=Object.freeze({transform:!1,virtuals:!1}),Rh=Object.freeze({skipId:!1,willInit:!0});w0.prototype.cast=function(A,F,B,D,$){if(f4||(f4=P7()),A!=null&&A[pQ]!=null&&A===D)return A;let J,X;$=$||{};let E=$.path||this.path;if(!Array.isArray(A)){if(!B&&!w0.options.castNonArrays)throw new Uh("DocumentArray",A,this.path,null,this);if(!!F&&B)F.markModified(E);return this.cast([A],F,B,D,$)}if(!$.skipDocumentArrayCast||V5.isMongooseDocumentArray(A))A=new f4(A,E,F,this);if(D!=null)A[Lh]=D[Lh]||{};if($.arrayPathIndex!=null)A[pQ]=E+"."+$.arrayPathIndex;let Y=V5.isMongooseDocumentArray(A)?A.__array:A,G=Y.length;for(let H=0;H<G;++H){if(!Y[H])continue;let W=rJ(this.casterConstructor,Y[H]),q=SC1(Y[H],!0);if(Y[H]!==q)Y[H]=q;if(Y[H]instanceof O7){if(Y[H][xC1]!==F)if(B){let C=new W(null,A,Rh,J,H);Y[H]=C.$init(Y[H])}else{let C=new W(Y[H],A,void 0,void 0,H);Y[H]=C}if(Y[H].__index==null)Y[H].$setIndex(H)}else if(Y[H]!=null)if(B){if(F)J||(J=bC1(this,F.$__.selected,B));else J=!0;X=new W(null,A,Rh,J,H),Y[H]=X.$init(Y[H])}else{if(D&&typeof D.id==="function")X=D.id(Y[H]._id);if(D&&X&&V5.deepEqual(X.toObject(gC1),Y[H]))X.set(Y[H]),Y[H]=X;else try{X=new W(Y[H],A,void 0,void 0,H),Y[H]=X}catch(C){throw new Uh("embedded",Y[H],A[pQ],C,this)}}}return A};/*!
 * ignore
 */w0.prototype.clone=function(){let A=Object.assign({},this.options),F=new this.constructor(this.path,this.schema,A,this.schemaOptions);if(F.validators=this.validators.slice(),this.requiredValidator!==void 0)F.requiredValidator=this.requiredValidator;return F.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),F._appliedDiscriminators=this._appliedDiscriminators,F};/*!
 * ignore
 */w0.prototype.applyGetters=function(A,F){return nF.prototype.applyGetters.call(this,A,F)};function bC1(A,F,B){if(!(B&&F))return;let D=A.path+".",$=Object.keys(F),J=$.length,X={},E,Y,G;while(J--)if(Y=$[J],Y.startsWith(D)){if(G=Y.substring(D.length),G==="$")continue;if(G.startsWith("$."))G=G.substring(2);E||(E=!0),X[G]=F[Y]}return E&&X||void 0}/*!
 * ignore
 */w0.defaultOptions={};w0.set=nF.set;w0.setters=[];w0.get=nF.get;/*!
 * Handle casting $elemMatch operators
 */w0.prototype.$conditionalHandlers.$elemMatch=yC1;function yC1(A,F){let B=Object.keys(A),D=B.length;for(let E=0;E<D;++E){let Y=B[E],G=A[Y];if(fC1(Y)&&G!=null)A[Y]=this.castForQuery(Y,G,F)}let $=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.options&&this.casterConstructor.schema.options.discriminatorKey,J=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.discriminators||{};if($!=null&&A[$]!=null&&J[A[$]]!=null)return Zh(J[A[$]],A,null,this&&this.$$context);let X=this.casterConstructor.schema??F.schema;return Zh(X,A,null,this&&this.$$context)}w0.prototype.toJSONSchema=function A(F){let B=Vh("object","object",F?.useBsonType,!1),D=this.options.required&&typeof this.options.required!=="function";return{...Vh("array","array",F?.useBsonType,D),items:{...B,...this.schema.toJSONSchema(F)}}};/*!
 * Module exports.
 */Ph.exports=w0});var jh=z((iu1,Mh)=>{var hC1=f6();class nQ extends hC1{}var vC1=F3();Object.defineProperty(nQ.prototype,"of",vC1);Mh.exports=nQ});var Oh=z((nu1,kh)=>{/*!
 * ignore
 */var sQ=MJ(),mC1=jh(),Th=n0(),dC1=b2();/*!
 * ignore
 */class sF extends Th{constructor(A,F){super(A,F,"Map");this.$isSchemaMap=!0}set(A,F){return Th.set(A,F)}cast(A,F,B,D,$){if(A instanceof sQ)return A;let J=$?.path??this.path;if(B){let X=new sQ({},J,F,this.$__schemaType);if(A instanceof global.Map)for(let E of A.keys()){let Y=A.get(E);if(Y==null)Y=X.$__schemaType._castNullish(Y);else Y=X.$__schemaType.cast(Y,F,!0,null,{path:J+"."+E});X.$init(E,Y)}else for(let E of Object.keys(A)){let Y=A[E];if(Y==null)Y=X.$__schemaType._castNullish(Y);else Y=X.$__schemaType.cast(Y,F,!0,null,{path:J+"."+E});X.$init(E,Y)}return X}return new sQ(A,J,F,this.$__schemaType)}clone(){let A=super.clone();if(this.$__schemaType!=null)A.$__schemaType=this.$__schemaType.clone();return A}getEmbeddedSchemaType(){return this.$__schemaType}toJSONSchema(A){let F=A?.useBsonType,B=this.getEmbeddedSchemaType(),D=this.options.required&&typeof this.options.required!=="function",$=dC1("object","object",F,D);return $.additionalProperties=B.toJSONSchema(A),$}autoEncryptionType(){return"object"}}sF.schemaName="Map";sF.prototype.OptionsConstructor=mC1;sF.defaultOptions={};kh.exports=sF});var fh=z((su1,Sh)=>{var lC1=f6();class tJ extends lC1{}var uh=F3();Object.defineProperty(tJ.prototype,"auto",uh);Object.defineProperty(tJ.prototype,"populate",uh);/*!
 * ignore
 */Sh.exports=tJ});var bh=z((au1,gh)=>{/*!
 * Module dependencies.
 */var cC1=fh(),_4=n0(),pC1=NC(),iC1=b2(),nC1=o2(),rQ=R4(),tQ=Q2(),_h=Q1(),sC1=_4.CastError,aQ;function j0(A,F){let B=typeof A==="string"&&A.length===24&&/^[a-f0-9]+$/i.test(A),D=F&&F.suppressWarning;if((B||typeof A==="undefined")&&!D)_h.warn("mongoose: To create a new ObjectId please try `Mongoose.Types.ObjectId` instead of using `Mongoose.Schema.ObjectId`. Set the `suppressWarning` option if you're trying to create a hex char path in your schema.");_4.call(this,A,F,"ObjectId")}j0.schemaName="ObjectId";j0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */j0.prototype=Object.create(_4.prototype);j0.prototype.constructor=j0;j0.prototype.OptionsConstructor=cC1;j0.get=_4.get;j0.set=_4.set;j0.setters=[];j0.prototype.auto=function(A){if(A)this.default(xh),this.set(aC1);return this};/*!
 * ignore
 */j0._checkRequired=(A)=>tQ(A,"ObjectId");/*!
 * ignore
 */j0._cast=pC1;j0.cast=function A(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */j0._defaultCaster=(A)=>{if(!tQ(A,"ObjectId"))throw new Error(A+" is not an instance of ObjectId");return A};j0.checkRequired=_4.checkRequired;j0.prototype.checkRequired=function A(F,B){if(_4._isRef(this,F,B,!0))return!!F;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():j0.checkRequired())(F)};j0.prototype.cast=function(A,F,B,D,$){if(!tQ(A,"ObjectId")&&_4._isRef(this,A,F,B)){if((nC1(A)||"").toLowerCase()==="objectid")return new rQ(A.toHexString());if(A==null||_h.isNonBuiltinObject(A))return this._castRef(A,F,B,$)}let J;if(typeof this._castFunction==="function")J=this._castFunction;else if(typeof this.constructor.cast==="function")J=this.constructor.cast();else J=j0.cast();try{return J(A)}catch(X){throw new sC1("ObjectId",A,this.path,X,this)}};/*!
 * ignore
 */function oJ(A){return this.cast(A)}j0.prototype.$conditionalHandlers={..._4.prototype.$conditionalHandlers,$gt:oJ,$gte:oJ,$lt:oJ,$lte:oJ};/*!
 * ignore
 */function xh(){return new rQ}xh.$runBeforeSetters=!0;function aC1(A){if(aQ||(aQ=D3()),this instanceof aQ){if(A===void 0)return new rQ}return A}j0.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function"||this.path==="_id";return iC1("string","objectId",F?.useBsonType,B)};j0.prototype.autoEncryptionType=function A(){return"objectId"};/*!
 * Module exports.
 */gh.exports=j0});var hh=z((ru1,yh)=>{var rC1=f6();class E3 extends rC1{}var r3=F3();Object.defineProperty(E3.prototype,"enum",r3);Object.defineProperty(E3.prototype,"match",r3);Object.defineProperty(E3.prototype,"lowercase",r3);Object.defineProperty(E3.prototype,"trim",r3);Object.defineProperty(E3.prototype,"uppercase",r3);Object.defineProperty(E3.prototype,"minLength",r3);Object.defineProperty(E3.prototype,"minlength",r3);Object.defineProperty(E3.prototype,"maxLength",r3);Object.defineProperty(E3.prototype,"maxlength",r3);Object.defineProperty(E3.prototype,"populate",r3);/*!
 * ignore
 */yh.exports=E3});var oQ=z((tu1,lh)=>{/*!
 * Module dependencies.
 */var x4=n0(),rF=G6(),tC1=hh(),oC1=kJ(),eC1=b2(),vh=Q1(),AQ1=Q2(),dh=x4.CastError;function v1(A,F){this.enumValues=[],this.regExp=null,x4.call(this,A,F,"String")}v1.schemaName="String";v1.defaultOptions={};/*!
 * Inherits from SchemaType.
 */v1.prototype=Object.create(x4.prototype);v1.prototype.constructor=v1;Object.defineProperty(v1.prototype,"OptionsConstructor",{configurable:!1,enumerable:!1,writable:!1,value:tC1});/*!
 * ignore
 */v1._cast=oC1;v1.cast=function A(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */v1._defaultCaster=(A)=>{if(A!=null&&typeof A!=="string")throw new Error;return A};v1.get=x4.get;v1.set=x4.set;v1.setters=[];/*!
 * ignore
 */v1._checkRequired=(A)=>(A instanceof String||typeof A==="string")&&A.length;v1.checkRequired=x4.checkRequired;v1.prototype.enum=function(){if(this.enumValidator)this.validators=this.validators.filter(function(D){return D.validator!==this.enumValidator},this),this.enumValidator=!1;if(arguments[0]===void 0||arguments[0]===!1)return this;let A,F;if(vh.isObject(arguments[0]))if(Array.isArray(arguments[0].values))A=arguments[0].values,F=arguments[0].message;else A=vh.object.vals(arguments[0]),F=rF.messages.String.enum;else A=arguments,F=rF.messages.String.enum;for(let D of A)if(D!==void 0)this.enumValues.push(this.cast(D));let B=this.enumValues;return this.enumValidator=function(D){return D==null||~B.indexOf(D)},this.validators.push({validator:this.enumValidator,message:F,type:"enum",enumValues:B}),this};v1.prototype.lowercase=function(A){if(arguments.length>0&&!A)return this;return this.set((F)=>{if(typeof F!=="string")F=this.cast(F);if(F)return F.toLowerCase();return F})};v1.prototype.uppercase=function(A){if(arguments.length>0&&!A)return this;return this.set((F)=>{if(typeof F!=="string")F=this.cast(F);if(F)return F.toUpperCase();return F})};v1.prototype.trim=function(A){if(arguments.length>0&&!A)return this;return this.set((F)=>{if(typeof F!=="string")F=this.cast(F);if(F)return F.trim();return F})};v1.prototype.minlength=function(A,F){if(this.minlengthValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.minlengthValidator},this);if(A!==null&&A!==void 0){let B=F||rF.messages.String.minlength;B=B.replace(/{MINLENGTH}/,A),this.validators.push({validator:this.minlengthValidator=function(D){return D===null||D.length>=A},message:B,type:"minlength",minlength:A})}return this};v1.prototype.minLength=v1.prototype.minlength;v1.prototype.maxlength=function(A,F){if(this.maxlengthValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.maxlengthValidator},this);if(A!==null&&A!==void 0){let B=F||rF.messages.String.maxlength;B=B.replace(/{MAXLENGTH}/,A),this.validators.push({validator:this.maxlengthValidator=function(D){return D===null||D.length<=A},message:B,type:"maxlength",maxlength:A})}return this};v1.prototype.maxLength=v1.prototype.maxlength;v1.prototype.match=function A(F,B){let D=B||rF.messages.String.match,$=function(J){if(!F)return!1;return F.lastIndex=0,J!=null&&J!==""?F.test(J):!0};return this.validators.push({validator:$,message:D,type:"regexp",regexp:F}),this};v1.prototype.checkRequired=function A(F,B){if(typeof F==="object"&&x4._isRef(this,F,B,!0))return F!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():v1.checkRequired())(F)};v1.prototype.cast=function(A,F,B,D,$){if(typeof A!=="string"&&x4._isRef(this,A,F,B))return this._castRef(A,F,B,$);let J;if(typeof this._castFunction==="function")J=this._castFunction;else if(typeof this.constructor.cast==="function")J=this.constructor.cast();else J=v1.cast();try{return J(A)}catch(X){throw new dh("string",A,this.path,null,this)}};/*!
 * ignore
 */function aF(A,F){return this.castForQuery(null,A,F)}/*!
 * ignore
 */function FQ1(A,F){let B=this;if(!Array.isArray(A))return[this.castForQuery(null,A,F)];return A.map(function(D){return B.castForQuery(null,D,F)})}/*!
 * ignore
 */function mh(A){if(A==null)return this._castNullish(A);return this.cast(A,this)}var BQ1={...x4.prototype.$conditionalHandlers,$all:FQ1,$gt:aF,$gte:aF,$lt:aF,$lte:aF,$options:mh,$regex:function A(F){if(Object.prototype.toString.call(F)==="[object RegExp]")return F;return mh.call(this,F)},$not:aF};Object.defineProperty(v1.prototype,"$conditionalHandlers",{configurable:!1,enumerable:!1,writable:!1,value:Object.freeze(BQ1)});v1.prototype.castForQuery=function(A,F,B){let D;if(A!=null){if(D=this.$conditionalHandlers[A],!D)throw new Error("Can't use "+A+" with String.");return D.call(this,F,B)}if(Object.prototype.toString.call(F)==="[object RegExp]"||AQ1(F,"BSONRegExp"))return F;try{return this.applySetters(F,B)}catch($){if($ instanceof dh&&$.path===this.path&&this.$fullPath!=null)$.path=this.$fullPath;throw $}};v1.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function";return eC1("string","string",F?.useBsonType,B)};v1.prototype.autoEncryptionType=function A(){return"string"};/*!
 * Module exports.
 */lh.exports=v1});var ph=z((ou1,FK)=>{var AK=D5(),eQ=/[0-9a-f]{8}-[0-9a-f]{4}-[0-9][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i,DQ1=AK.Binary;FK.exports=function A(F){if(F==null)return F;function B(D){let $=new AK(D);return $._subtype=4,$}if(typeof F==="string")if(eQ.test(F))return ch(F);else throw new Error(`"${F}" is not a valid UUID string`);if(Buffer.isBuffer(F))return B(F);if(F instanceof DQ1)return B(F.value(!0));if(F.toString&&F.toString!==Object.prototype.toString){if(eQ.test(F.toString()))return ch(F.toString())}throw new Error(`"${F}" cannot be casted to a UUID`)};FK.exports.UUID_FORMAT=eQ;function $Q1(A){return A!=null&&Buffer.from(A,"hex")}function ch(A){if(typeof A!=="string")A="";let F=A.replace(/[{}-]/g,""),B=$Q1(F),D=new AK(B);return D._subtype=4,D}});var th=z((eu1,rh)=>{/*!
 * Module dependencies.
 */var JQ1=D5(),P9=n0(),ih=P9.CastError,nh=ph(),XQ1=b2(),ah=Q1(),eJ=mF(),EQ1=nh.UUID_FORMAT,YQ1=JQ1.Binary;function AX(A){let F;if(typeof A!=="string"&&A!=null)return F=A.toString("hex"),F.substring(0,8)+"-"+F.substring(8,12)+"-"+F.substring(12,16)+"-"+F.substring(16,20)+"-"+F.substring(20,32);return A}function l0(A,F){P9.call(this,A,F,"UUID"),this.getters.push(function(B){if(B!=null&&B.$__!=null)return B;if(Buffer.isBuffer(B))return AX(B);else if(B instanceof YQ1)return AX(B.buffer);else if(ah.isPOJO(B)&&B.type==="Buffer"&&Array.isArray(B.data))return AX(Buffer.from(B.data));return B})}l0.schemaName="UUID";l0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */l0.prototype=Object.create(P9.prototype);l0.prototype.constructor=l0;/*!
 * ignore
 */l0._cast=nh;l0.get=P9.get;l0.set=P9.set;l0.setters=[];l0.cast=function A(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */l0._checkRequired=(A)=>A!=null;l0.checkRequired=P9.checkRequired;l0.prototype.checkRequired=function A(F){if(Buffer.isBuffer(F))F=AX(F);return F!=null&&EQ1.test(F)};l0.prototype.cast=function(A,F,B,D,$){if(ah.isNonBuiltinObject(A)&&P9._isRef(this,A,F,B))return this._castRef(A,F,B,$);let J;if(typeof this._castFunction==="function")J=this._castFunction;else if(typeof this.constructor.cast==="function")J=this.constructor.cast();else J=l0.cast();try{return J(A)}catch(X){throw new ih(l0.schemaName,A,this.path,X,this)}};/*!
 * ignore
 */function tF(A){return this.cast(A)}/*!
 * ignore
 */function BK(A){return A.map((F)=>{return this.cast(F)})}l0.prototype.$conditionalHandlers={...P9.prototype.$conditionalHandlers,$bitsAllClear:eJ,$bitsAnyClear:eJ,$bitsAllSet:eJ,$bitsAnySet:eJ,$all:BK,$gt:tF,$gte:tF,$in:BK,$lt:tF,$lte:tF,$ne:tF,$nin:BK};l0.prototype.castForQuery=function(A,F,B){let D;if(A!=null){if(D=this.$conditionalHandlers[A],!D)throw new Error("Can't use "+A+" with UUID.");return D.call(this,F,B)}try{return this.applySetters(F,B)}catch($){if($ instanceof ih&&$.path===this.path&&this.$fullPath!=null)$.path=this.$fullPath;throw $}};l0.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function";return XQ1("string","binData",F?.useBsonType,B)};l0.prototype.autoEncryptionType=function A(){return"binData"};/*!
 * Module exports.
 */rh.exports=l0});var Av=z((AS1,eh)=>{var oh=i("assert"),DK=B6(),GQ1=Q2();eh.exports=function A(F){if(F==null||F==="")return null;let B;if(GQ1(F,"Long"))B=F.toNumber();else if(typeof F==="string")try{return B=DK.Double.fromString(F),B}catch{oh.ok(!1)}else if(typeof F==="object"){let D=F.valueOf()??F.toString();if(typeof D==="string")try{return B=DK.Double.fromString(F),B}catch{oh.ok(!1)}else B=Number(D)}else B=Number(F);return new DK.Double(B)}});var Bv=z((FS1,Fv)=>{/*!
 * Module dependencies.
 */var HQ1=_2(),w5=n0(),WQ1=Av(),qQ1=b2();function s0(A,F){w5.call(this,A,F,"Double")}s0.schemaName="Double";s0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */s0.prototype=Object.create(w5.prototype);s0.prototype.constructor=s0;/*!
 * ignore
 */s0._cast=WQ1;s0.set=w5.set;s0.setters=[];s0.get=w5.get;/*!
 * ignore
 */s0._defaultCaster=(A)=>{if(A!=null){if(A._bsontype!=="Double")throw new Error}return A};s0.cast=function A(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */s0._checkRequired=(A)=>A!=null;s0.checkRequired=w5.checkRequired;s0.prototype.checkRequired=function(A){return this.constructor._checkRequired(A)};s0.prototype.cast=function(A){let F;if(typeof this._castFunction==="function")F=this._castFunction;else if(typeof this.constructor.cast==="function")F=this.constructor.cast();else F=s0.cast();try{return F(A)}catch(B){throw new HQ1("Double",A,this.path,B,this)}};/*!
 * ignore
 */function FX(A){return this.cast(A)}s0.prototype.$conditionalHandlers={...w5.prototype.$conditionalHandlers,$gt:FX,$gte:FX,$lt:FX,$lte:FX};s0.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function";return qQ1("number","double",F?.useBsonType,B)};s0.prototype.autoEncryptionType=function A(){return"double"};/*!
 * Module exports.
 */Fv.exports=s0});var $v=z((BS1,Dv)=>{var CQ1=Q2(),QQ1=i("assert");Dv.exports=function A(F){if(F==null)return F;if(F==="")return null;let B=CQ1(F,"Long")?F.toNumber():Number(F),D=2147483647,$=-2147483648;if(B===(B|0)&&B>=$&&B<=D)return B;QQ1.ok(!1)}});var Ev=z((DS1,Xv)=>{/*!
 * Module dependencies.
 */var Jv=_2(),L5=n0(),KQ1=$v(),zQ1=b2(),BX=mF();function _0(A,F){L5.call(this,A,F,"Int32")}_0.schemaName="Int32";_0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */_0.prototype=Object.create(L5.prototype);_0.prototype.constructor=_0;/*!
 * ignore
 */_0._cast=KQ1;_0.set=L5.set;_0.setters=[];_0.get=L5.get;/*!
 * ignore
 */_0._defaultCaster=(A)=>{if(A!=null){if(typeof A!=="number"||A!==(A|0)||A<-2147483648||A>2147483647)throw new Error}return A};_0.cast=function A(F){if(arguments.length===0)return this._cast;if(F===!1)F=this._defaultCaster;return this._cast=F,this._cast};/*!
 * ignore
 */_0._checkRequired=(A)=>A!=null;_0.checkRequired=L5.checkRequired;_0.prototype.checkRequired=function(A){return this.constructor._checkRequired(A)};_0.prototype.cast=function(A){let F;if(typeof this._castFunction==="function")F=this._castFunction;else if(typeof this.constructor.cast==="function")F=this.constructor.cast();else F=_0.cast();try{return F(A)}catch(B){throw new Jv("Int32",A,this.path,B,this)}};/*!
 * ignore
 */_0.$conditionalHandlers={...L5.prototype.$conditionalHandlers,$gt:DX,$gte:DX,$lt:DX,$lte:DX,$bitsAllClear:BX,$bitsAnyClear:BX,$bitsAllSet:BX,$bitsAnySet:BX};/*!
 * ignore
 */function DX(A,F){return this.castForQuery(null,A,F)}_0.prototype.castForQuery=function(A,F,B){let D;if(A!=null){if(D=_0.$conditionalHandlers[A],D)return D.call(this,F);return this.applySetters(F,B)}try{return this.applySetters(F,B)}catch($){if($ instanceof Jv&&$.path===this.path&&this.$fullPath!=null)$.path=this.$fullPath;throw $}};_0.prototype.toJSONSchema=function A(F){let B=this.options.required&&typeof this.options.required!=="function";return zQ1("number","int",F?.useBsonType,B)};_0.prototype.autoEncryptionType=function A(){return"int"};/*!
 * Module exports.
 */Xv.exports=_0});var vF=z((UQ1)=>{/*!
 * Module exports.
 */UQ1.Array=_J();UQ1.BigInt=Ky();UQ1.Boolean=Zy();UQ1.Buffer=Ny();UQ1.Date=uy();UQ1.Decimal128=UQ1.Decimal=xy();UQ1.DocumentArray=Ih();UQ1.Map=Oh();UQ1.Mixed=R7();UQ1.Number=zQ();UQ1.ObjectId=bh();UQ1.String=oQ();UQ1.Subdocument=dQ();UQ1.UUID=th();UQ1.Double=Bv();UQ1.Int32=Ev();UQ1.Oid=UQ1.ObjectId;UQ1.Object=UQ1.Mixed;UQ1.Bool=UQ1.Boolean;UQ1.ObjectID=UQ1.ObjectId});var I7=z((GK,wv)=>{/*!
 * Module dependencies.
 */var xQ1=i("events").EventEmitter,gQ1=U7(),g4=T1(),EK=n0(),Hv=f6(),bQ1=rC(),YK=RJ(),Wv=oC(),U2=I0(),qv=f0(),yQ1=o2(),hQ1=eg(),XX=FQ(),vQ1=Bb(),Cv=$b(),mQ1=i$(),$X=_6(),dQ1=Xb(),lQ1=zb(),J0=Q1(),cQ1=Zb(),pQ1=/\.\d+(\.|$)/,I9,iQ1=PJ().queryMiddlewareFunctions,nQ1=IJ().middlewareFunctions,Qv=iQ1.concat(nQ1).reduce((A,F)=>A.add(F),new Set),JK=J0.isPOJO,Kv=0,sQ1=/^\d+$/;function t(A,F){if(!(this instanceof t))return new t(A,F);if(this.obj=A,this.paths={},this.aliases={},this.subpaths={},this.virtuals={},this.singleNestedPaths={},this.nested={},this.inherits={},this.callQueue=[],this._indexes=[],this._searchIndexes=[],this.methods=F&&F.methods||{},this.methodOptions={},this.statics=F&&F.statics||{},this.tree={},this.query=F&&F.query||{},this.childSchemas=[],this.plugins=[],this.$id=++Kv,this.mapPaths=[],this.encryptedFields={},this.s={hooks:new gQ1},this.options=this.defaultOptions(F),Array.isArray(A))for(let $ of A)this.add($);else if(A)this.add(A);if(F&&F.virtuals){let $=F.virtuals,J=Object.keys($);for(let X of J){let E=$[X].options?$[X].options:void 0,Y=this.virtual(X,E);if($[X].get)Y.get($[X].get);if($[X].set)Y.set($[X].set)}}let B=A&&A._id&&J0.isObject(A._id);if(!this.paths._id&&this.options._id&&!B)Wv(this);this.setupTimestamp(this.options.timestamps)}function zv(A,F){for(let B of Object.keys(F)){let D=null;if(F[B]!=null)D=F[B];else{let J=qv(A.paths[B],"options");if(J==null)continue;D=J.alias}if(!D)continue;let $=A.paths[B].path;if(Array.isArray(D)){for(let J of D){if(typeof J!=="string")throw new Error("Invalid value for alias option on "+$+", got "+J);A.aliases[J]=$,A.virtual(J).get(function(X){return function(){if(typeof this.get==="function")return this.get(X);return this[X]}}($)).set(function(X){return function(E){return this.$set(X,E)}}($))}continue}if(typeof D!=="string")throw new Error("Invalid value for alias option on "+$+", got "+D);A.aliases[D]=$,A.virtual(D).get(function(J){return function(){if(typeof this.get==="function")return this.get(J);return this[J]}}($)).set(function(J){return function(X){return this.$set(J,X)}}($))}}/*!
 * Inherit from EventEmitter.
 */t.prototype=Object.create(xQ1.prototype);t.prototype.constructor=t;t.prototype.instanceOfSchema=!0;/*!
 * ignore
 */Object.defineProperty(t.prototype,"$schemaType",{configurable:!1,enumerable:!1,writable:!0});Object.defineProperty(t.prototype,"childSchemas",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(t.prototype,"virtuals",{configurable:!1,enumerable:!0,writable:!0});t.prototype.obj;t.prototype.paths;t.prototype.tree;t.prototype.clone=function(){let A=this._clone();return A.on("init",(F)=>this.emit("init",F)),A};/*!
 * ignore
 */t.prototype._clone=function A(F){F=F||(this.base==null?t:this.base.Schema);let B=new F({},this._userProvidedOptions);B.base=this.base,B.obj=this.obj,B.options=U2(this.options),B.callQueue=this.callQueue.map(function(D){return D}),B.methods=U2(this.methods),B.methodOptions=U2(this.methodOptions),B.statics=U2(this.statics),B.query=U2(this.query),B.plugins=Array.prototype.slice.call(this.plugins),B._indexes=U2(this._indexes),B._searchIndexes=U2(this._searchIndexes),B.s.hooks=this.s.hooks.clone(),B.tree=U2(this.tree),B.paths=Object.fromEntries(Object.entries(this.paths).map(([D,$])=>[D,$.clone()])),B.nested=U2(this.nested),B.subpaths=U2(this.subpaths);for(let D of Object.values(B.paths))if(D.$isSingleNested){let $=D.path;for(let J of Object.keys(D.schema.paths))B.singleNestedPaths[$+"."+J]=D.schema.paths[J];for(let J of Object.keys(D.schema.singleNestedPaths))B.singleNestedPaths[$+"."+J]=D.schema.singleNestedPaths[J];for(let J of Object.keys(D.schema.subpaths))B.singleNestedPaths[$+"."+J]=D.schema.subpaths[J];for(let J of Object.keys(D.schema.nested))B.singleNestedPaths[$+"."+J]="nested"}if(B._gatherChildSchemas(),B.virtuals=U2(this.virtuals),B.$globalPluginsApplied=this.$globalPluginsApplied,B.$isRootDiscriminator=this.$isRootDiscriminator,B.$implicitlyCreated=this.$implicitlyCreated,B.$id=++Kv,B.$originalSchemaId=this.$id,B.mapPaths=[].concat(this.mapPaths),this.discriminatorMapping!=null)B.discriminatorMapping=Object.assign({},this.discriminatorMapping);if(this.discriminators!=null)B.discriminators=Object.assign({},this.discriminators);if(this._applyDiscriminators!=null)B._applyDiscriminators=new Map(this._applyDiscriminators);return B.aliases=Object.assign({},this.aliases),B.encryptedFields=U2(this.encryptedFields),B};t.prototype.pick=function(A,F){let B=new t({},F||this.options);if(!Array.isArray(A))throw new g4('Schema#pick() only accepts an array argument, got "'+typeof A+'"');for(let D of A)if(this._hasEncryptedField(D)){let $=this.encryptedFields[D],J=this.path(D);B.add({[D]:{encrypt:$,[this.options.typeKey]:J}})}else if(this.nested[D])B.add({[D]:qv(this.tree,D)});else{let $=this.path(D);if($==null)throw new g4("Path `"+D+"` is not in the schema");B.add({[D]:$})}if(!this._hasEncryptedFields())B.options.encryptionType=null;return B};t.prototype.omit=function(A,F){let B=new t(this,F||this.options);if(!Array.isArray(A))throw new g4('Schema#omit() only accepts an array argument, got "'+typeof A+'"');B.remove(A);for(let D in B.singleNestedPaths)if(A.includes(D))delete B.singleNestedPaths[D];return B};t.prototype.defaultOptions=function(A){this._userProvidedOptions=A==null?{}:U2(A);let F=this.base&&this.base.options||{},B="strict"in F?F.strict:!0,D="strictQuery"in F?F.strictQuery:!1,$="id"in F?F.id:!0;if(A={strict:B,strictQuery:D,bufferCommands:!0,capped:!1,versionKey:"__v",optimisticConcurrency:!1,minimize:!0,autoIndex:null,discriminatorKey:"__t",shardKey:null,read:null,validateBeforeSave:!0,validateModifiedOnly:!1,_id:!0,id:$,typeKey:"type",...A},A.versionKey&&typeof A.versionKey!=="string")throw new g4("`versionKey` must be falsy or string, got `"+typeof A.versionKey+"`");if(typeof A.read==="string")A.read=XX(A.read);else if(Array.isArray(A.read)&&typeof A.read[0]==="string")A.read={mode:XX(A.read[0]),tags:A.read[1]};if(A.optimisticConcurrency&&!A.versionKey)throw new g4("Must set `versionKey` if using `optimisticConcurrency`");return A};t.prototype.discriminator=function(A,F,B){return this._applyDiscriminators=this._applyDiscriminators||new Map,this._applyDiscriminators.set(A,{schema:F,options:B}),this};/*!
 * Get this schema's default toObject/toJSON options, including Mongoose global
 * options.
 */t.prototype._defaultToObjectOptions=function(A){let F=A?"toJSON":"toObject";if(this._defaultToObjectOptionsMap&&this._defaultToObjectOptionsMap[F])return this._defaultToObjectOptionsMap[F];let B=this.base&&this.base.options&&this.base.options[F]||{},D=this.options[F]||{},$=Object.assign({},B,D);return this._defaultToObjectOptionsMap=this._defaultToObjectOptionsMap||{},this._defaultToObjectOptionsMap[F]=$,$};t.prototype.encryptionType=function A(A){if(arguments.length===0)return this.options.encryptionType;if(!(typeof A==="string"||A===null))throw new Error("invalid `encryptionType`: ${encryptionType}");this.options.encryptionType=A};t.prototype.add=function A(F,B){if(F instanceof t||F!=null&&F.instanceOfSchema)return mQ1(this,F),this;if(F._id===!1&&B==null)this.options._id=!1;if(B=B||"",B==="__proto__."||B==="constructor."||B==="prototype.")return this;let D=Object.keys(F),$=this.options.typeKey;for(let X of D){if(J0.specialProperties.has(X))continue;let E=B+X,Y=F[X];if(Y==null)throw new TypeError("Invalid value for schema path `"+E+'`, got value "'+Y+'"');if(X==="_id"&&Y===!1)continue;let G=!1;if(typeof Y==="string"){let H=this.base!=null?this.base.Schema.Types:t.Types,W=Y.charAt(0).toUpperCase()+Y.substring(1);G=H[W]!=null}if(X!=="_id"&&(typeof Y!=="object"&&typeof Y!=="function"&&!G||Y==null))throw new TypeError(`Invalid schema configuration: \`${Y}\` is not a valid type at path \`${X}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);if(Y instanceof YK||(Y.constructor&&Y.constructor.name||null)==="VirtualType"){this.virtual(Y);continue}if(Array.isArray(Y)&&Y.length===1&&Y[0]==null)throw new TypeError("Invalid value for schema Array path `"+E+'`, got value "'+Y[0]+'"');if(!(JK(Y)||Y instanceof Hv)){if(B)this.nested[B.substring(0,B.length-1)]=!0;if(this.path(B+X,Y),Y[0]!=null&&!Y[0].instanceOfSchema&&J0.isPOJO(Y[0].discriminators)){let H=this.path(B+X);for(let W in Y[0].discriminators)H.discriminator(W,Y[0].discriminators[W])}}else if(Object.keys(Y).length<1){if(B)this.nested[B.substring(0,B.length-1)]=!0;this.path(E,Y)}else if(!Y[$]||$==="type"&&JK(Y.type)&&Y.type.type)this.nested[E]=!0,this.add(Y,E+".");else{let H=Y[$];if(JK(H)&&Object.keys(H).length>0){if(B)this.nested[B.substring(0,B.length-1)]=!0;let W={};if(this._userProvidedOptions.typeKey)W.typeKey=this._userProvidedOptions.typeKey;if(this._userProvidedOptions.strict!=null)W.strict=this._userProvidedOptions.strict;if(this._userProvidedOptions.toObject!=null)W.toObject=J0.omit(this._userProvidedOptions.toObject,["transform"]);if(this._userProvidedOptions.toJSON!=null)W.toJSON=J0.omit(this._userProvidedOptions.toJSON,["transform"]);let q=new t(H,W);q.$implicitlyCreated=!0;let C=Object.assign({},Y,{[$]:q});this.path(B+X,C)}else{if(B)this.nested[B.substring(0,B.length-1)]=!0;if(this.path(B+X,Y),Y!=null&&!Y.instanceOfSchema&&J0.isPOJO(Y.discriminators)){let W=this.path(B+X);for(let q in Y.discriminators)W.discriminator(q,Y.discriminators[q])}}}if(Y.instanceOfSchema&&Y.encryptionType()!=null){if(this.encryptionType()!=Y.encryptionType())throw new Error("encryptionType of a nested schema must match the encryption type of the parent schema.");for(let[H,W]of Object.entries(Y.encryptedFields)){let q=E+"."+H;this._addEncryptedField(q,W)}}else if(typeof Y==="object"&&"encrypt"in Y){let{encrypt:H}=Y;if(this.encryptionType()==null)throw new Error("encryptionType must be provided");this._addEncryptedField(E,H)}else this._removeEncryptedField(E)}let J=Object.fromEntries(Object.entries(F).map(([X])=>[B+X,null]));return zv(this,J),this};t.prototype._addEncryptedField=function A(F,B){if(this.path(F).autoEncryptionType()==null)throw new Error(`Invalid BSON type for FLE field: '${F}'`);this.encryptedFields[F]=U2(B)};t.prototype._removeEncryptedField=function A(F){delete this.encryptedFields[F]};t.prototype._hasEncryptedFields=function A(){return Object.keys(this.encryptedFields).length>0};t.prototype._hasEncryptedField=function A(F){return F in this.encryptedFields};t.prototype._buildEncryptedFields=function(){return{fields:Object.entries(this.encryptedFields).map(([F,B])=>{let D=this.path(F).autoEncryptionType();return{path:F,bsonType:D,...B}})}};t.prototype._buildSchemaMap=function(){function A(D,$,J){let X=0,E=D[X];for(;X<D.length-1;++X,E=D[X])$[E]=$[E]==null?{bsonType:"object",properties:{}}:$[E],$=$[E].properties;$[E]=J}let F=(D,[$,J])=>{let X=this.path($).autoEncryptionType(),E=$.split("."),Y={encrypt:{...J,bsonType:X}};return A(E,D,Y),D};return{bsonType:"object",properties:Object.entries(this.encryptedFields).reduce(F,{})}};t.prototype.alias=function F(A,F){return zv(this,{[A]:F}),this};t.prototype.removeIndex=function A(F){if(arguments.length>1)throw new Error("removeIndex() takes only 1 argument");if(typeof F!=="object"&&typeof F!=="string")throw new Error("removeIndex() may only take either an object or a string as an argument");if(typeof F==="object"){for(let B=this._indexes.length-1;B>=0;--B)if(Cv(this._indexes[B][0],F))this._indexes.splice(B,1)}else for(let B=this._indexes.length-1;B>=0;--B)if(this._indexes[B][1]!=null&&this._indexes[B][1].name===F)this._indexes.splice(B,1);return this};t.prototype.clearIndexes=function A(){return this._indexes.length=0,this};t.prototype.searchIndex=function A(F){return this._searchIndexes.push(F),this};t.reserved=Object.create(null);t.prototype.reserved=t.reserved;var z2=t.reserved;z2.prototype=z2.emit=z2.listeners=z2.removeListener=z2.collection=z2.errors=z2.get=z2.init=z2.isModified=z2.isNew=z2.populated=z2.remove=z2.save=z2.toObject=z2.validate=1;z2.collection=1;t.prototype.path=function(A,F){if(F===void 0){if(this.paths[A]!=null)return this.paths[A];let Y=Uv(A),G=aQ1(this,A,Y);if(G!=null)return G;let H=Zv(this,A);if(H!=null)return H;if(G=this.hasMixedParent(Y),G!=null)return G;return pQ1.test(A)?tQ1(this,A,Y):void 0}let B=A.split(".")[0];if(z2[B]&&!this.options.suppressReservedKeysWarning){let Y=`\`${B}\` is a reserved schema pathname and may break some functionality. You are allowed to use it, but use at your own risk. To disable this warning pass \`suppressReservedKeysWarning\` as a schema option.`;J0.warn(Y)}if(typeof F==="object"&&J0.hasUserDefinedProperty(F,"ref"))cQ1(F.ref,A);let D=A.split(/\./),$=D.pop(),J=this.tree,X="";for(let Y of D){if(J0.specialProperties.has(Y))throw new Error("Cannot set special property `"+Y+"` on a schema");if(X=X+=(X.length>0?".":"")+Y,!J[Y])this.nested[X]=!0,J[Y]={};if(typeof J[Y]!=="object"){let G="Cannot set nested path `"+A+"`. Parent path `"+X+"` already set to type "+J[Y].name+".";throw new Error(G)}J=J[Y]}J[$]=U2(F),this.paths[A]=this.interpretAsType(A,F,this.options);let E=this.paths[A];if(this.childSchemas=this.childSchemas.filter((Y)=>Y.path!==A),E.$isSchemaMap){let Y=A+".$*";if(this.paths[Y]=E.$__schemaType,this.mapPaths.push(this.paths[Y]),E.$__schemaType.$isSingleNested)this.childSchemas.push({schema:E.$__schemaType.schema,model:E.$__schemaType.caster,path:A})}if(E.$isSingleNested){for(let Y of Object.keys(E.schema.paths))this.singleNestedPaths[A+"."+Y]=E.schema.paths[Y];for(let Y of Object.keys(E.schema.singleNestedPaths))this.singleNestedPaths[A+"."+Y]=E.schema.singleNestedPaths[Y];for(let Y of Object.keys(E.schema.subpaths))this.singleNestedPaths[A+"."+Y]=E.schema.subpaths[Y];for(let Y of Object.keys(E.schema.nested))this.singleNestedPaths[A+"."+Y]="nested";Object.defineProperty(E.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),E.caster.base=this.base,this.childSchemas.push({schema:E.schema,model:E.caster,path:A})}else if(E.$isMongooseDocumentArray)Object.defineProperty(E.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),E.casterConstructor.base=this.base,this.childSchemas.push({schema:E.schema,model:E.casterConstructor,path:A});if(E.$isMongooseArray&&E.caster instanceof EK){let Y=A,G=E,H=[];while(G.$isMongooseArray){if(Y=Y+".$",G.$isMongooseDocumentArray)G.$embeddedSchemaType._arrayPath=Y,G.$embeddedSchemaType._arrayParentPath=A,G=G.$embeddedSchemaType;else G.caster._arrayPath=Y,G.caster._arrayParentPath=A,G=G.caster;this.subpaths[Y]=G}for(let W of H)this.subpaths[W.path]=W}if(E.$isMongooseDocumentArray){for(let Y of Object.keys(E.schema.paths)){let G=E.schema.paths[Y];if(this.subpaths[A+"."+Y]=G,typeof G==="object"&&G!=null&&G.$parentSchemaDocArray==null)G.$parentSchemaDocArray=E}for(let Y of Object.keys(E.schema.subpaths)){let G=E.schema.subpaths[Y];if(this.subpaths[A+"."+Y]=G,typeof G==="object"&&G!=null&&G.$parentSchemaDocArray==null)G.$parentSchemaDocArray=E}for(let Y of Object.keys(E.schema.singleNestedPaths)){let G=E.schema.singleNestedPaths[Y];if(this.subpaths[A+"."+Y]=G,typeof G==="object"&&G!=null&&G.$parentSchemaDocArray==null)G.$parentSchemaDocArray=E}}return this};/*!
 * ignore
 */t.prototype._gatherChildSchemas=function A(){let F=[];for(let B of Object.keys(this.paths)){if(typeof B!=="string")continue;let D=this.paths[B];if(D.$isMongooseDocumentArray||D.$isSingleNested)F.push({schema:D.schema,model:D.caster,path:B});else if(D.$isSchemaMap&&D.$__schemaType.$isSingleNested)F.push({schema:D.$__schemaType.schema,model:D.$__schemaType.caster,path:B})}return this.childSchemas=F,F};/*!
 * ignore
 */function aQ1(A,F,B){if(A.paths.hasOwnProperty(F))return A.paths[F];if(A.subpaths.hasOwnProperty(B)){let D=A.subpaths[B];if(D==="nested")return;return D}if(A.singleNestedPaths.hasOwnProperty(B)&&typeof A.singleNestedPaths[B]==="object"){let D=A.singleNestedPaths[B];if(D==="nested")return;return D}return null}/*!
 * ignore
 */function Uv(A){if(!/\.\d+/.test(A))return A;return A.replace(/\.\d+\./g,".$.").replace(/\.\d+$/,".$")}/*!
 * ignore
 */function Zv(A,F){if(A.mapPaths.length===0)return null;for(let B of A.mapPaths){let D=B.path.replace(/\.\$\*/g,"");if(F===D||F.startsWith(D+".")&&F.slice(D.length+1).indexOf(".")===-1)return B;else if(B.schema&&F.startsWith(D+".")){let $=F.slice(D.length+1);return $=$.slice($.indexOf(".")+1),B.schema.paths[$]}else if(B.$isSchemaMap&&F.startsWith(D+".")){let $=F.slice(D.length+1);$=$.slice($.indexOf(".")+1);let J=B.$__schemaType._presplitPath;if($.indexOf(".")===-1&&J[J.length-1]==="$*")return B.$__schemaType;else if($.indexOf(".")!==-1&&B.$__schemaType.schema&&J[J.length-1]==="$*")return B.$__schemaType.schema.path($.slice($.indexOf(".")+1))}}return null}Object.defineProperty(t.prototype,"base",{configurable:!0,enumerable:!1,writable:!0,value:null});t.prototype.interpretAsType=function(A,F,B){if(F instanceof EK){if(F.path===A)return F;let Y=F.clone();return Y.path=A,Y}let D=this.base!=null?this.base.Schema.Types:t.Types,$=this.base!=null?this.base.Types:W5();if(!J0.isPOJO(F)&&!(F instanceof Hv)){if(J0.getFunctionName(F.constructor)!=="Object"){let G=F;F={},F[B.typeKey]=G}}let J=F[B.typeKey]&&(F[B.typeKey]instanceof Function||B.typeKey!=="type"||!F.type.type)?F[B.typeKey]:{};if(J instanceof EK){if(J.path===A)return J;let Y=J.clone();return Y.path=A,Y}let X;if(J0.isPOJO(J)||J==="mixed")return new D.Mixed(A,F);if(Array.isArray(J)||J===Array||J==="array"||J===D.Array){let Y=J===Array||J==="array"?F.cast||F.of:J[0];if(Y&&Y.instanceOfSchema){if(!(Y instanceof t))if(this.options._isMerging)Y=new t(Y);else throw new TypeError("Schema for array path `"+A+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${A}: new Schema(...)`);return new D.DocumentArray(A,Y,F)}if(Y&&Y[B.typeKey]&&Y[B.typeKey].instanceOfSchema){if(!(Y[B.typeKey]instanceof t))if(this.options._isMerging)Y[B.typeKey]=new t(Y[B.typeKey]);else throw new TypeError("Schema for array path `"+A+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${A}: new Schema(...)`);return new D.DocumentArray(A,Y[B.typeKey],F,Y)}if(typeof Y!=="undefined"){if(Array.isArray(Y)||Y.type===Array||Y.type=="Array"){if(Y&&Y.type=="Array")Y.type=Array;return new D.Array(A,this.interpretAsType(A,Y,B),F)}}let G=Y!=null&&Y[B.typeKey]&&(B.typeKey!=="type"||!Y.type.type)?Y[B.typeKey]:Y;if(typeof Y==="string")Y=D[Y.charAt(0).toUpperCase()+Y.substring(1)];else if(J0.isPOJO(G))if(Object.keys(G).length){let H={minimize:B.minimize};if(B.typeKey)H.typeKey=B.typeKey;if(B.hasOwnProperty("strict"))H.strict=B.strict;if(B.hasOwnProperty("strictQuery"))H.strictQuery=B.strictQuery;if(B.hasOwnProperty("toObject"))H.toObject=J0.omit(B.toObject,["transform"]);if(B.hasOwnProperty("toJSON"))H.toJSON=J0.omit(B.toJSON,["transform"]);if(this._userProvidedOptions.hasOwnProperty("_id"))H._id=this._userProvidedOptions._id;else if(t.Types.DocumentArray.defaultOptions._id!=null)H._id=t.Types.DocumentArray.defaultOptions._id;let W=new t(G,H);return W.$implicitlyCreated=!0,new D.DocumentArray(A,W,F)}else return new D.Array(A,D.Mixed,F);if(Y){if(J=Y[B.typeKey]&&(B.typeKey!=="type"||!Y.type.type)?Y[B.typeKey]:Y,Array.isArray(J))return new D.Array(A,this.interpretAsType(A,J,B),F);if(X=typeof J==="string"?J:J.schemaName||J0.getFunctionName(J),X==="ClockDate")X="Date";if(X===void 0)throw new TypeError(`Invalid schema configuration: Could not determine the embedded type for array \`${A}\`. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(!D.hasOwnProperty(X))throw new TypeError(`Invalid schema configuration: \`${X}\` is not a valid type within the array \`${A}\`.See https://bit.ly/mongoose-schematypes for a list of valid schema types.`)}return new D.Array(A,Y||D.Mixed,F,B)}if(J&&J.instanceOfSchema)return new D.Subdocument(J,A,F);if(Buffer.isBuffer(J))X="Buffer";else if(typeof J==="function"||typeof J==="object")X=J.schemaName||J0.getFunctionName(J);else if(J===$.ObjectId)X="ObjectId";else if(J===$.Decimal128)X="Decimal128";else X=J==null?""+J:J.toString();if(X)X=X.charAt(0).toUpperCase()+X.substring(1);if(X==="ObjectID")X="ObjectId";if(X==="ClockDate")X="Date";if(X===void 0)throw new TypeError(`Invalid schema configuration: \`${A}\` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(D[X]==null)throw new TypeError(`Invalid schema configuration: \`${X}\` is not a valid type at path \`${A}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);let E=new D[X](A,F);if(E.$isSchemaMap)rQ1(this,E,A,F,B);return E};/*!
 * ignore
 */function rQ1(A,F,B,D,$){let J=B+".$*",X={type:{}};if(J0.hasUserDefinedProperty(D,"of")){if(J0.isPOJO(D.of)&&Object.keys(D.of).length>0&&!J0.hasUserDefinedProperty(D.of,A.options.typeKey))X={[A.options.typeKey]:new t(D.of)};else if(J0.isPOJO(D.of))X=Object.assign({},D.of);else X={[A.options.typeKey]:D.of};if(X[A.options.typeKey]&&X[A.options.typeKey].instanceOfSchema)X[A.options.typeKey].eachPath((G,H)=>{if(H.options.select===!0||H.options.select===!1)throw new g4('Cannot use schema-level projections (`select: true` or `select: false`) within maps at path "'+B+"."+G+'"')});if(J0.hasUserDefinedProperty(D,"ref"))X.ref=D.ref}F.$__schemaType=A.interpretAsType(J,X,$)}t.prototype.eachPath=function(A){let F=Object.keys(this.paths),B=F.length;for(let D=0;D<B;++D)A(F[D],this.paths[F[D]]);return this};t.prototype.requiredPaths=function A(F){if(this._requiredpaths&&!F)return this._requiredpaths;let B=Object.keys(this.paths),D=B.length,$=[];while(D--){let J=B[D];if(this.paths[J].isRequired)$.push(J)}return this._requiredpaths=$,this._requiredpaths};t.prototype.indexedPaths=function A(){if(this._indexedpaths)return this._indexedpaths;return this._indexedpaths=this.indexes(),this._indexedpaths};t.prototype.pathType=function(A){if(this.paths.hasOwnProperty(A))return"real";if(this.virtuals.hasOwnProperty(A))return"virtual";if(this.nested.hasOwnProperty(A))return"nested";let F=Uv(A);if(this.subpaths.hasOwnProperty(F)||this.subpaths.hasOwnProperty(A))return"real";let B=this.singleNestedPaths.hasOwnProperty(F)||this.singleNestedPaths.hasOwnProperty(A);if(B)return B==="nested"?"nested":"real";if(Zv(this,A)!=null)return"real";if(/\.\d+\.|\.\d+$/.test(A))return Vv(this,A,F);return"adhocOrUndefined"};t.prototype.hasMixedParent=function(A){let F=A.split(/\./g);A="";for(let B=0;B<F.length;++B)if(A=B>0?A+"."+F[B]:F[B],this.paths.hasOwnProperty(A)&&this.paths[A]instanceof I9.Mixed)return this.paths[A];return null};t.prototype.setupTimestamp=function(A){return lQ1(this,A)};function Vv(A,F,B){let D=F.split(/\.(\d+)\.|\.(\d+)$/).filter(Boolean);if(D.length<2)return A.paths.hasOwnProperty(D[0])?A.paths[D[0]]:"adhocOrUndefined";let $=A.path(D[0]),J=!1;if(!$)return"adhocOrUndefined";let X=D.length-1;for(let E=1;E<D.length;++E){J=!1;let Y=D[E];if(E===X&&$&&!/\D/.test(Y)){if($.$isMongooseDocumentArray)$=$.$embeddedSchemaType;else if($ instanceof I9.Array)$=$.caster;else $=void 0;break}if(!/\D/.test(Y)){if($ instanceof I9.Array&&E!==X)$=$.caster;continue}if(!($&&$.schema)){$=void 0;break}J=$.schema.pathType(Y)==="nested",$=$.schema.path(Y)}if(A.subpaths[B]=$,$)return"real";if(J)return"nested";return"adhocOrUndefined"}/*!
 * ignore
 */function tQ1(A,F,B){return Vv(A,F,B),A.subpaths[B]}t.prototype.queue=function(A,F){return this.callQueue.push([A,F]),this};t.prototype.pre=function(A){if(A instanceof RegExp){let F=Array.prototype.slice.call(arguments,1);for(let B of Qv)if(A.test(B))this.pre.apply(this,[B].concat(F));return this}if(Array.isArray(A)){let F=Array.prototype.slice.call(arguments,1);for(let B of A)this.pre.apply(this,[B].concat(F));return this}return this.s.hooks.pre.apply(this.s.hooks,arguments),this};t.prototype.post=function(A){if(A instanceof RegExp){let F=Array.prototype.slice.call(arguments,1);for(let B of Qv)if(A.test(B))this.post.apply(this,[B].concat(F));return this}if(Array.isArray(A)){let F=Array.prototype.slice.call(arguments,1);for(let B of A)this.post.apply(this,[B].concat(F));return this}return this.s.hooks.post.apply(this.s.hooks,arguments),this};t.prototype.plugin=function(A,F){if(typeof A!=="function")throw new Error('First param to `schema.plugin()` must be a function, got "'+typeof A+'"');if(F&&F.deduplicate){for(let B of this.plugins)if(B.fn===A)return this}return this.plugins.push({fn:A,opts:F}),A(this,F),this};t.prototype.method=function(A,F,B){if(typeof A!=="string")for(let D in A)this.methods[D]=A[D],this.methodOptions[D]=U2(B);else this.methods[A]=F,this.methodOptions[A]=U2(B);return this};t.prototype.static=function(A,F){if(typeof A!=="string")for(let B in A)this.statics[B]=A[B];else this.statics[A]=F;return this};t.prototype.index=function(A,F){if(A||(A={}),F||(F={}),F.expires)J0.expires(F);for(let B in A)if(this.aliases[B])A=J0.renameObjKey(A,B,this.aliases[B]);for(let B of Object.keys(A))if(A[B]==="ascending"||A[B]==="asc")A[B]=1;else if(A[B]==="descending"||A[B]==="desc")A[B]=-1;for(let B of this.indexes())if(F.name==null&&B[1].name==null&&Cv(B[0],A))J0.warn(`Duplicate schema index on ${JSON.stringify(A)} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.`);return this._indexes.push([A,F]),this};t.prototype.set=function(A,F,B){if(arguments.length===1)return this.options[A];switch(A){case"read":if(typeof F==="string")this.options[A]={mode:XX(F),tags:B};else if(Array.isArray(F)&&typeof F[0]==="string")this.options[A]={mode:XX(F[0]),tags:F[1]};else this.options[A]=F;this._userProvidedOptions[A]=this.options[A];break;case"timestamps":this.setupTimestamp(F),this.options[A]=F,this._userProvidedOptions[A]=this.options[A];break;case"_id":if(this.options[A]=F,this._userProvidedOptions[A]=this.options[A],F&&!this.paths._id)Wv(this);else if(!F&&this.paths._id!=null&&this.paths._id.auto)this.remove("_id");break;default:this.options[A]=F,this._userProvidedOptions[A]=this.options[A];break}if(A==="strict")oF(this,{strict:F});if(A==="strictQuery")oF(this,{strictQuery:F});if(A==="toObject")F={...F},delete F.transform,oF(this,{toObject:F});if(A==="toJSON")F={...F},delete F.transform,oF(this,{toJSON:F});return this};/*!
 * Recursively set options on implicitly created schemas
 */function oF(A,F){for(let{schema:B}of A.childSchemas){if(!B.$implicitlyCreated)continue;Object.assign(B.options,F),oF(B,F)}}t.prototype.get=function(A){return this.options[A]};var oQ1="2d 2dsphere hashed text".split(" ");Object.defineProperty(t,"indexTypes",{get:function(){return oQ1},set:function(){throw new Error("Cannot overwrite Schema.indexTypes")}});t.prototype.indexes=function(){return hQ1(this)};t.prototype.virtual=function(A,F){if(A instanceof YK||yQ1(A)==="VirtualType")return this.virtual(A.path,A.options);if(F=new bQ1(F),J0.hasUserDefinedProperty(F,["ref","refPath"])){if(F.localField==null)throw new Error("Reference virtuals require `localField` option");if(F.foreignField==null)throw new Error("Reference virtuals require `foreignField` option");let $=this.virtual(A);if($.options=F,this.pre("init",function E(Y,G){if($X.has(A,Y)){let H=$X.get(A,Y);if(!this.$$populatedVirtuals)this.$$populatedVirtuals={};if(F.justOne||F.count)this.$$populatedVirtuals[A]=Array.isArray(H)?H[0]:H;else this.$$populatedVirtuals[A]=Array.isArray(H)?H:H==null?[]:[H];if(G?.hydratedPopulatedDocs&&!F.count){let W=$._getModelNamesForPopulate(this),q=this.$$populatedVirtuals[A];if(!Array.isArray(q)&&!q.$__&&W?.length===1){let C=this.db.model(W[0]);this.$$populatedVirtuals[A]=C.hydrate(q)}else if(Array.isArray(q)&&W?.length===1){let C=this.db.model(W[0]);for(let K=0;K<q.length;++K)if(!q[K].$__)q[K]=C.hydrate(q[K],null,{hydratedPopulatedDocs:!0});let Q=F.foreignField;this.$populated(A,q.map((K)=>K==null?K:K.get(typeof Q==="function"?Q.call(K,K):Q)),{populateModelSymbol:C})}}$X.unset(A,Y)}}),$.set(function(E){if(!this.$$populatedVirtuals)this.$$populatedVirtuals={};return dQ1(this.$$populatedVirtuals,A,E,F)}),typeof F.get==="function")$.get(F.get);let J=A.split("."),X=J[0];for(let E=0;E<J.length-1;++E){if(this.paths[X]==null)continue;if(this.paths[X].$isMongooseDocumentArray||this.paths[X].$isSingleNested){let Y=J.slice(E+1).join(".");this.paths[X].schema.virtual(Y,F);break}else if(this.paths[X].$isSchemaMap){let Y=J.slice(E+2).join(".");this.paths[X].$__schemaType.schema.virtual(Y,F);break}X+="."+J[E+1]}return $}let B=this.virtuals,D=A.split(".");if(this.pathType(A)==="real")throw new Error('Virtual path "'+A+'" conflicts with a real path in the schema');if(B[A]=D.reduce(function($,J,X){return $[J]||($[J]=X===D.length-1?new YK(F,A):{}),$[J]},this.tree),F&&F.applyToArray&&D.length>1){let $=this.path(D.slice(0,-1).join("."));if($&&$.$isMongooseArray)return $.virtual(D[D.length-1],F);else throw new g4(`Path "${$}" is not an array`)}return B[A]};t.prototype.virtualpath=function(A){return this.virtuals.hasOwnProperty(A)?this.virtuals[A]:null};t.prototype.remove=function(A){if(typeof A==="string")A=[A];if(Array.isArray(A))A.forEach(function(F){if(this.path(F)==null&&!this.nested[F])return;if(this.nested[F]){let B=Object.keys(this.paths).concat(Object.keys(this.nested));for(let D of B)if(D.startsWith(F+"."))delete this.paths[D],delete this.nested[D],XK(this,D);delete this.nested[F],XK(this,F);return}delete this.paths[F],XK(this,F),this._removeEncryptedField(F)},this);return this};/*!
 * ignore
 */function XK(A,F){let B=F.split("."),D=B.pop(),$=A.tree;for(let J of B)$=$[J];delete $[D]}t.prototype.removeVirtual=function(A){if(typeof A==="string")A=[A];if(Array.isArray(A)){for(let F of A)if(this.virtuals[F]==null)throw new g4(`Attempting to remove virtual "${F}" that does not exist.`);for(let F of A)if(delete this.paths[F],delete this.virtuals[F],F.indexOf(".")!==-1)$X.unset(F,this.tree);else delete this.tree[F]}return this};t.prototype.loadClass=function(A,F){if(A===Object.prototype||A===Function.prototype||A.prototype.hasOwnProperty("$isMongooseModelPrototype")||A.prototype.hasOwnProperty("$isMongooseDocumentPrototype"))return this;if(this.loadClass(Object.getPrototypeOf(A),F),!F)Object.getOwnPropertyNames(A).forEach(function(B){if(B.match(/^(length|name|prototype|constructor|__proto__)$/))return;let D=Object.getOwnPropertyDescriptor(A,B);if(D.hasOwnProperty("value"))this.static(B,D.value)},this);return Object.getOwnPropertyNames(A.prototype).forEach(function(B){if(B.match(/^(constructor)$/))return;let D=Object.getOwnPropertyDescriptor(A.prototype,B);if(!F){if(typeof D.value==="function")this.method(B,D.value)}if(typeof D.get==="function"){if(this.virtuals[B])this.virtuals[B].getters=[];this.virtual(B).get(D.get)}if(typeof D.set==="function"){if(this.virtuals[B])this.virtuals[B].setters=[];this.virtual(B).set(D.set)}},this),this};/*!
 * ignore
 */t.prototype._getSchema=function(A){let F=this,B=F.path(A),D=[];if(B)return B.$fullPath=A,B;function $(X,E){let Y=X.length+1,G,H;while(Y--)if(H=X.slice(0,Y).join("."),G=E.path(H),G){if(D.push(H),G.caster){if(G.caster instanceof I9.Mixed)return G.caster.$fullPath=D.join("."),G.caster;if(Y!==X.length){if(Y+1===X.length&&G.$embeddedSchemaType&&(X[Y]==="$"||JX(X[Y])))return G.$embeddedSchemaType;if(G.schema){let W;if(X[Y]==="$"||JX(X[Y])){if(Y+1===X.length)return G.$embeddedSchemaType;if(W=$(X.slice(Y+1),G.schema),W)W.$parentSchemaDocArray=W.$parentSchemaDocArray||(G.schema.$isSingleNested?null:G);return W}if(W=$(X.slice(Y),G.schema),W)W.$parentSchemaDocArray=W.$parentSchemaDocArray||(G.schema.$isSingleNested?null:G);return W}}}else if(G.$isSchemaMap){if(Y>=X.length)return G;if(Y+1>=X.length)return G.$__schemaType;if(G.$__schemaType instanceof I9.Mixed)return G.$__schemaType;if(G.$__schemaType.schema!=null)return $(X.slice(Y+1),G.$__schemaType.schema)}return G.$fullPath=D.join("."),G}}let J=A.split(".");for(let X=0;X<J.length;++X){if(J[X]==="$"||JX(J[X]))J[X]="0";if(sQ1.test(J[X]))J[X]="$"}return $(J,F)};/*!
 * ignore
 */t.prototype._getPathType=function(A){let F=this;if(F.path(A))return"real";function D($,J){let X=$.length+1,E,Y;while(X--)if(Y=$.slice(0,X).join("."),E=J.path(Y),E){if(E.caster){if(E.caster instanceof I9.Mixed)return{schema:E,pathType:"mixed"};if(X!==$.length&&E.schema){if($[X]==="$"||JX($[X])){if(X===$.length-1)return{schema:E,pathType:"nested"};return D($.slice(X+1),E.schema)}return D($.slice(X),E.schema)}return{schema:E,pathType:E.$isSingleNested?"nested":"array"}}return{schema:E,pathType:"real"}}else if(X===$.length&&J.nested[Y])return{schema:J,pathType:"nested"};return{schema:E||J,pathType:"undefined"}}return D(A.split("."),F)};t.prototype._transformDuplicateKeyError=function A(F){if(!this._duplicateKeyErrorMessagesByPath)return F;if(F.code!==11000&&F.code!==11001)return F;if(F.keyPattern!=null){let B=F.keyPattern,D=Object.keys(B);if(D.length!==1)return F;let $=D[0];if(!this._duplicateKeyErrorMessagesByPath.hasOwnProperty($))return F;return new g4(this._duplicateKeyErrorMessagesByPath[$],{cause:F})}return F};/*!
 * ignore
 */function JX(A){return A.startsWith("$[")&&A.endsWith("]")}t.prototype._preCompile=function A(){this.plugin(vQ1,{deduplicate:!0})};t.prototype.toJSONSchema=function A(F){let B=F?.useBsonType??!1,D=B?{required:[],properties:{}}:{type:"object",required:[],properties:{}};for(let $ of Object.keys(this.paths)){let J=this.paths[$];if(J._presplitPath.indexOf("$*")!==-1)continue;let X=J._presplitPath.length>1,E=D;if(X)for(let H=0;H<J._presplitPath.length-1;++H){let W=J._presplitPath[H];if(E.properties[W]==null)E.properties[W]=B?{bsonType:["object","null"],properties:{}}:{type:["object","null"],properties:{}};E=E.properties[W]}let Y=J._presplitPath[J._presplitPath.length-1],G=!1;if($==="_id"){if(!E.required)E.required=[];E.required.push("_id"),G=!0}else if(J.options.required&&typeof J.options.required!=="function"){if(!E.required)E.required=[];E.required.push(Y),G=!0}if(E.properties[Y]=J.toJSONSchema(F),J.options.enum)E.properties[Y].enum=G?J.options.enum:[...J.options.enum,null]}if(D.required.length===0)delete D.required;return D};/*!
 * Module exports.
 */wv.exports=GK=t;t.Types=I9=vF();/*!
 * ignore
 */GK.ObjectId=I9.ObjectId});var WK=z((XS1,Lv)=>{/*!
 * Module dependencies.
 */var eQ1=G6();class HK extends eQ1{constructor(A,F,B,D){let $=A.map((J)=>J.message).join(", ");if($.length>200)$=$.slice(0,200)+"...";super(`${D} failed with ${A.length} Mongoose validation errors: ${$}`);this.validationErrors=A,this.results=F,this.rawResult=B,this.operation=D}}Object.defineProperty(HK.prototype,"name",{value:"MongooseBulkWriteError"});/*!
 * exports
 */Lv.exports=HK});var Nv=z((ES1,Rv)=>{/*!
 * Module dependencies.
 */var AK1=T1();class qK extends AK1{constructor(A,F){super(A);this.errors=F}}Object.defineProperty(qK.prototype,"name",{value:"SyncIndexesError"});Rv.exports=qK});var CK=z((YS1,Pv)=>{Pv.exports=function A(F,B,D,$){if(F[$])return;if(F[$]=!0,!D||!D.skipTopLevel){let Y=null;for(let G of B){let H=G[1]==null?null:G[1].tags;if(!Array.isArray(H)){F.plugin(G[0],G[1]);continue}if(Y=Y||new Set(F.options.pluginTags||[]),!H.find((W)=>Y.has(W)))continue;F.plugin(G[0],G[1])}}if(D=Object.assign({},D),delete D.skipTopLevel,D.applyPluginsToChildSchemas!==!1)for(let Y of Object.keys(F.paths)){let G=F.paths[Y];if(G.schema!=null)A(G.schema,B,D,$),G.caster.prototype.$__setSchema(G.schema)}let J=F.discriminators;if(J==null)return;let X=D.applyPluginsToDiscriminators,E=Object.keys(J);for(let Y of E){let G=J[Y];A(G,B,{skipTopLevel:!X},$)}}});var EX=z((FK1,QK)=>{/*!
 * ignore
 */var Iv=null;FK1.get=function(){return Iv};FK1.set=function(A){Iv=A}});var KK=z((GS1,Mv)=>{function $K1(){return{ok:1,nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[],writeErrors:[],insertedIds:[],writeConcernErrors:[]}}Mv.exports=$K1});var Tv=z((HS1,jv)=>{var JK1=T1();class zK extends JK1{constructor(A,F){super(A);this.errors=F}}Object.defineProperty(zK.prototype,"name",{value:"CreateCollectionsError"});jv.exports=zK});var UK=z((WS1,Ov)=>{var kv=J5().modifiedPaths;Ov.exports=function A(F){let B=Object.keys(F),D={},$={};for(let J of B){if(J.startsWith("$")){kv(F[J],"",D);continue}$[J]=F[J]}return kv($,"",D),D}});var ZK=z((qS1,uv)=>{var XK1=UK();uv.exports=function A(F){if(F==null)return{};let B=XK1(F);return Object.keys(B).reduce((D,$)=>{let J=$.match(/\$\[[^\]]+\]/g);if(J==null)return D;for(let X of J){let E=$.indexOf(X);if(E!==$.lastIndexOf(X))throw new Error(`Path '${$}' contains the same array filter multiple times`);D[X.substring(2,X.length-1)]=$.substring(0,E-1).replace(/\$\[[^\]]+\]/g,"0")}return D},{})}});var _v=z((CS1,fv)=>{var EK1=_F(),Sv=f0(),YK1=$3(),GK1=ZK();fv.exports=function A(F,B,D,$,J){let X=$.indexOf(".")===-1?[$]:$.split("."),E=null,Y="adhocOrUndefined";D=D||{},B=B||{};let G=J!=null&&Array.isArray(J.arrayFilters)?J.arrayFilters:[],H=GK1(B),W=0;for(let q=0;q<X.length;++q){let C=X.slice(W,q+1).join("."),Q=EK1(C);if(E=F.path(Q),E==null)continue;if(Y=F.pathType(Q),(E.$isSingleNested||E.$isMongooseDocumentArrayElement)&&E.schema.discriminators!=null){let K=Sv(E,"schema.options.discriminatorKey"),U=Q+"."+K,Z=U.replace(/\.\d+\./,"."),V=null;if(U in D)V=D[U];if(Z in D)V=D[Z];let w=Q.replace(/\.\d+$/,"");if(E.$isMongooseDocumentArrayElement&&Sv(D[w],"$elemMatch."+K)!=null)V=D[w].$elemMatch[K];let R=C+"."+K;if(R in B)V=B[R];if(U in B)V=B[U];for(let u of Object.keys(H)){let x=H[u]+"."+K,T=u+"."+K;if(x===Z){let y=G.find((g)=>g.hasOwnProperty(T));if(y!=null)V=y[T]}}if(V==null)continue;let I=YK1(E.caster.discriminators,V),j=I&&I.schema;if(j==null)continue;let k=X.slice(q+1).join(".");if(E=j.path(k),F=j,W=q+1,E!=null){Y=j._getPathType(k);break}}}return{type:Y,schematype:E}}});var gv=z((QS1,xv)=>{var HK1=V9();xv.exports=function A(F,B,D,$,J,X,E){if(F==null||!F.options||!F.options.immutable)return!1;let Y=F.options.immutable;if(typeof Y==="function")Y=Y.call(E,E);if(!Y)return!1;if(X&&X.overwriteImmutable)return!1;if(B===!1)return!1;if(B==="throw")throw new HK1(null,`Field ${J} is immutable and strict = 'throw'`);return delete D[$],!0}});var hv=z((KS1,yv)=>{var WK1=f0();yv.exports=function A(F,B,D){if(B==null)return;let $=Object.keys(B);for(let J of $){let X=J.startsWith("$");if(J==="$set"){let E=Object.keys(B[J]);for(let Y of E)bv(F,B[J],Y,B,D)}else if(!X)bv(F,B,J,B,D)}};function bv(A,F,B,D,$){let J=A.path(B);if(J==null)return;let X=WK1(J,"options.immutable",null);if(X==null)return;if(typeof X==="function")X=X.call($,$);if(!X)return;D.$setOnInsert=D.$setOnInsert||{},D.$setOnInsert[B]=F[B],delete F[B]}});var wK=z((zS1,vv)=>{var VK=z7();vv.exports=function A(F,B,D){if(B.indexOf(".")===-1){if(VK.has(B))return;F[B]=D;return}let $=B.split("."),J=$.pop(),X=F;for(let E of $){if(VK.has(E))continue;if(X[E]==null)X[E]={};X=X[E]}if(!VK.has(J))X[J]=D}});var MK=z((US1,sv)=>{var YX=_2(),eF=T1(),mv=oQ(),dv=V9(),qK1=V7(),NK=bF(),CK1=T7(),QK1=o2(),LK=$3(),RK=_v(),lv=gv(),KK1=hv(),iv=L7().schemaMixedSymbol,zK1=wK(),N5=Q1(),{internalToObjectOptions:UK1}=I3(),PK=new Set(["$currentDate","$inc","$min","$max","$mul","$rename","$set","$setOnInsert","$unset","$addToSet","$pop","$pull","$push","$pullAll","$bit"]);sv.exports=function A(F,B,D,$,J){if(B==null)return;if(D=D||{},Array.isArray(B)){let W=B.length;for(let q=0;q<W;++q){let C=Object.keys(B[q]);for(let Q of C)B[q][Q]=ZK1(Q,B[q][Q])}return B}if(F!=null&&J!=null&&N5.hasUserDefinedProperty(J,F.options.discriminatorKey)&&typeof J[F.options.discriminatorKey]!=="object"&&F.discriminators!=null){let W=J[F.options.discriminatorKey],q=LK($.model.discriminators,W);F=F.discriminators[W]||q&&q.schema||F}else if(F!=null&&D.overwriteDiscriminatorKey&&N5.hasUserDefinedProperty(B,F.options.discriminatorKey)&&F.discriminators!=null){let W=B[F.options.discriminatorKey],q=LK($.model.discriminators,W);F=F.discriminators[W]||q&&q.schema||F}else if(F!=null&&D.overwriteDiscriminatorKey&&B.$set!=null&&N5.hasUserDefinedProperty(B.$set,F.options.discriminatorKey)&&F.discriminators!=null){let W=B.$set[F.options.discriminatorKey],q=LK($.model.discriminators,W);F=F.discriminators[W]||q&&q.schema||F}if(D.upsert)KK1(F,B,$);let X=Object.keys(B),E=X.length,Y={},G,H=!1;J=J||{};while(E--){let W=X[E];if(!PK.has(W)){if(!Y.$set)if(B.$set)Y.$set=B.$set;else Y.$set={};if(Y.$set[W]=B[W],X.splice(E,1),!~X.indexOf("$set"))X.push("$set")}else if(W==="$set"){if(!Y.$set)Y[W]=B[W]}else Y[W]=B[W]}E=X.length;while(E--){let W=X[E];if(G=Y[W],H=H||W.startsWith("$"),G!=null&&G.$__)G=G.toObject(UK1),Y[W]=G;if(G&&typeof G==="object"&&!Buffer.isBuffer(G)&&PK.has(W))nv(F,G,W,D,$,J);else{let q="Invalid atomic update value for "+W+". Expected an object, received "+typeof G;throw new Error(q)}if(W.startsWith("$")&&N5.isEmptyObject(G))delete Y[W]}if(Object.keys(Y).length===0&&D.upsert&&Object.keys(J).length>0)return{$setOnInsert:{...J}};return Y};/*!
 * ignore
 */function ZK1(A,F){if(A==="$unset"){if(typeof F!=="string"&&(!Array.isArray(F)||F.find((B)=>typeof B!=="string")))throw new eF("Invalid $unset in pipeline, must be  a string or an array of strings");return F}if(A==="$project"){if(F==null||typeof F!=="object")throw new eF("Invalid $project in pipeline, must be an object");return F}if(A==="$addFields"||A==="$set"){if(F==null||typeof F!=="object")throw new eF("Invalid "+A+" in pipeline, must be an object");return F}else if(A==="$replaceRoot"||A==="$replaceWith"){if(F==null||typeof F!=="object")throw new eF("Invalid "+A+" in pipeline, must be an object");return F}throw new eF('Invalid update pipeline operator: "'+A+'"')}function nv(A,F,B,D,$,J,X){let E=D.strict,Y=X?X+".":"",G=Object.keys(F),H=G.length,W=!1,q,C,Q,K=null,U=E!=null?E:A.options.strict;while(H--){if(C=G[H],Q=F[C],B==="$pull"){if(q=A._getSchema(Y+C),q==null){let V=RK(A,F,J,Y+C,D);if(V.schematype!=null)q=V.schematype}if(q!=null&&q.schema!=null){F[C]=CK1(q.schema,F[C],D,$),W=!0;continue}}let Z=Y?Y+C:C;if(A.discriminatorMapping!=null&&Z===A.options.discriminatorKey&&A.discriminatorMapping.value!==F[C]&&!D.overwriteDiscriminatorKey){if(U==="throw"){let V=new Error(`Can't modify discriminator key "`+Z+'" on discriminator model');K=u7(V,$,Z,K);continue}else if(U){delete F[C];continue}}if(QK1(Q)==="Object"){if(q=A._getSchema(Y+C),q==null){let V=RK(A,F,J,Y+C,D);if(V.schematype!=null)q=V.schematype}if(B!=="$setOnInsert"&&lv(q,E,F,C,Y+C,D,$))continue;if(q&&q.caster&&B in IK)if("$each"in Q){W=!0;try{F[C]={$each:R5(q,Q.$each,B,C,$,Y+C)}}catch(V){K=u7(V,$,C,K)}if(Q.$slice!=null)F[C].$slice=Q.$slice|0;if(Q.$sort)F[C].$sort=Q.$sort;if(Q.$position!=null)F[C].$position=NK(Q.$position)}else{if(q!=null&&q.$isSingleNested){let V=E==null?q.schema.options.strict:E;try{F[C]=q.castForQuery(null,Q,$,{strict:V})}catch(w){K=u7(w,$,C,K)}}else try{F[C]=R5(q,Q,B,C,$,Y+C)}catch(V){K=u7(V,$,C,K)}if(F[C]===void 0){delete F[C];continue}W=!0}else if(B==="$currentDate"||B in IK&&q){try{F[C]=R5(q,Q,B,C,$,Y+C)}catch(V){K=u7(V,$,C,K)}if(F[C]===void 0){delete F[C];continue}W=!0}else if(B==="$rename"){let V=new mv(`${Y}${C}.$rename`);try{F[C]=R5(V,Q,B,C,$,Y+C)}catch(w){K=u7(w,$,C,K)}if(F[C]===void 0){delete F[C];continue}W=!0}else{let V=Y+C,w=A._getPathType(V),R=E;if(w&&w.schema&&R==null)R=w.schema.options.strict;if(w.pathType==="undefined"){if(R==="throw")throw new dv(V);else if(R){delete F[C];continue}}W|=nv(A,Q,B,D,$,J,Y+C)||N5.isObject(Q)&&Object.keys(Q).length===0}}else{let V=C==="$each"||C==="$or"||C==="$and"||C==="$in"?X:Y+C;if(q=A._getSchema(V),B!=="$setOnInsert"&&lv(q,E,F,C,Y+C,D,$))continue;let w=A._getPathType(V);if(q==null){let j=RK(A,F,J,V,D);if(j.schematype!=null)q=j.schematype,w=j.type}let R=E;if(w&&w.schema&&E==null)R=w.schema.options.strict;if(R&&!q&&!/real|nested/.test(w.pathType))if(R==="throw"&&A.virtuals[V]==null)throw new dv(Y+C);else delete F[C];else{if(B==="$rename"){if(F[C]==null)throw new YX("String",F[C],`${Y}${C}.$rename`);let j=new mv(`${Y}${C}.$rename`);F[C]=j.castForQuery(null,F[C],$);continue}try{if(Y.length===0||C.indexOf(".")===-1)F[C]=R5(q,Q,B,C,$,Y+C);else if(R!==!1||q!=null)zK1(F,C,R5(q,Q,B,C,$,Y+C)),delete F[C]}catch(j){K=u7(j,$,C,K)}if(Array.isArray(F[C])&&(B==="$addToSet"||B==="$push")&&C!=="$each"){if(q&&q.caster&&!q.caster.$isMongooseArray&&!q.caster[iv])F[C]={$each:F[C]}}if(F[C]===void 0){delete F[C];continue}W=!0}}}if(K!=null)throw K;return W}/*!
 * ignore
 */function u7(A,F,B,D){if(typeof F!=="object"||!F.options.multipleCastError)throw A;return D=D||new qK1,D.addError(B,A),D}var cv={$pop:1,$inc:1},VK1={$unset:1},IK={$push:1,$addToSet:1,$set:1,$setOnInsert:1};/*!
 * ignore
 */var pv={$set:1,$setOnInsert:1};function R5(A,F,B,D,$,J){if(!A){if(B in cv)try{return NK(F)}catch(E){throw new YX("number",F,J)}return F}if(A.caster&&B in IK&&(N5.isObject(F)||Array.isArray(F))&&!pv[B]){let E=0,Y=A;while(Y.$isMongooseArray)++E,Y=Y.caster;let G=0,H=F;while(Array.isArray(H))++G,H=H[0];let W=E-G;while(G<E)F=[F],++G;let q=A.applySetters(Array.isArray(F)?F:[F],$);for(let C=0;C<W;++C)q=q[0];return q}if(B in VK1)return F;if(B in cv){if(F==null)throw new YX("number",F,A.path);if(B==="$inc")return A.castForQuery(null,F,$);try{return NK(F)}catch(E){throw new YX("number",F,A.path)}}if(B==="$currentDate"){if(typeof F==="object")return{$type:F.$type};return Boolean(F)}if(PK.has(D))return A.castForQuery(D,F,$);if(pv[B]){let E=F!=null&&A.$isMongooseArray&&A.$fullPath!=null&&!A.$fullPath.match(/\d+$/),Y=A[iv]!=null;if(E||Y)return A.applySetters(F,$);return A.castForQuery(null,F,$)}return A.castForQuery(null,F,$)}});var jK=z((ZS1,av)=>{var wK1=UK();av.exports=function A(F,B,D){if(!D||!(B&&B.upsert))return;if(!wK1(F)[D])if(B.overwrite)F[D]=0;else{if(!F.$setOnInsert)F.$setOnInsert={};F.$setOnInsert[D]=0}}});var TK=z((VS1,tv)=>{var rv=J5().modifiedPaths,LK1=f0();tv.exports=function(A,F,B,D){D=D||{};let $=D.setDefaultsOnInsert!=null?D.setDefaultsOnInsert:F.base.options.setDefaultsOnInsert;if(!D.upsert||$===!1)return B;let J=Object.keys(B||{}),X={},E={},Y=J.length,G={},H=!1;for(let C=0;C<Y;++C)if(J[C].startsWith("$"))rv(B[J[C]],"",G),H=!0;if(!H)rv(B,"",G);let W=Object.keys(A),q=W.length;for(let C=0;C<q;++C){let Q=W[C],K=A[Q];if(K&&typeof K==="object"){let U=Object.keys(K),Z=U.length,V=!1;for(let w=0;w<Z;++w)if(U[w].startsWith("$")){V=!0;break}if(V)continue}X[Q]=!0,G[Q]=!0}if(D&&D.overwrite&&!H)return B;return F.eachPath(function(C,Q){if(Q.path==="_id"&&Q.options.auto)return;let K=Q.getDefault(null,!0);if(RK1(G,C))return;if(typeof K==="undefined")return;if(Q.splitPath().includes("$*"))return;if(B=B||{},B.$setOnInsert=B.$setOnInsert||{},LK1(B,C)==null)B.$setOnInsert[C]=K;E[C]=K}),B};function RK1(A,F){if(A[F])return!0;let B=F.split("."),D=B[0];for(let J=1;J<B.length;++J){if(A[D])return!0;D+="."+B[J]}let $=Object.keys(A);if($.length){let J=F+".";for(let X of $)if(X.slice(0,F.length+1)===J)return!0}return!1}});var kK=z((wS1,c0)=>{var NK1=T1(),PK1=$3(),ov=DQ(),ev=$Q(),AB=T7(),Am=MK(),IK1=I0(),Fm=jK(),{inspect:MK1}=i("util"),Bm=TK();c0.exports=function A(F,B,D){let $=F.base.now();if(B.insertOne)return(J)=>c0.exports.castInsertOne(F,B.insertOne,D).then(()=>J(null),(X)=>J(X));else if(B.updateOne)return(J)=>{try{c0.exports.castUpdateOne(F,B.updateOne,D,$),J(null)}catch(X){J(X)}};else if(B.updateMany)return(J)=>{try{c0.exports.castUpdateMany(F,B.updateMany,D,$),J(null)}catch(X){J(X)}};else if(B.replaceOne)return(J)=>{c0.exports.castReplaceOne(F,B.replaceOne,D).then(()=>J(null),(X)=>J(X))};else if(B.deleteOne)return(J)=>{try{c0.exports.castDeleteOne(F,B.deleteOne),J(null)}catch(X){J(X)}};else if(B.deleteMany)return(J)=>{try{c0.exports.castDeleteMany(F,B.deleteMany),J(null)}catch(X){J(X)}};else return(J)=>{let X=new NK1(`Invalid op passed to \`bulkWrite()\`: ${MK1(B)}`);J(X,null)}};c0.exports.castInsertOne=async function A(F,B,D){let $=P5(F,B.document),J=new $(B.document);if($.schema.options.timestamps&&GX(B,D))J.initializeTimestamps();if(D.session!=null)J.$session(D.session);let X=$?.schema?.options?.versionKey;if(X&&J[X]==null)J[X]=0;if(B.document=J,D.skipValidation||B.skipValidation)return B;return await B.document.$validate(),B};c0.exports.castUpdateOne=function A(F,B,D,$){if(!B.filter)throw new Error("Must provide a filter object.");if(!B.update)throw new Error("Must provide an update object.");let J=P5(F,B.filter),X=J.schema,E=D.strict!=null?D.strict:J.schema.options.strict,Y=IK1(B.update);FB(X,B.filter);let G=GX(B,D);if(J.schema.$timestamps!=null&&G){let q=J.schema.$timestamps.createdAt,C=J.schema.$timestamps.updatedAt;ev($,q,C,Y,{})}if(G)ov($,Y,J.schema);let H=F.base.options.setDefaultsOnInsert;if((B.setDefaultsOnInsert==null?H:B.setDefaultsOnInsert)!==!1)Bm(B.filter,J.schema,Y,{setDefaultsOnInsert:!0,upsert:B.upsert});return Fm(Y,B,J.schema.options.versionKey),B.filter=AB(J.schema,B.filter,{strict:E,upsert:B.upsert}),B.update=Am(J.schema,Y,{strict:E,upsert:B.upsert,arrayFilters:B.arrayFilters,overwriteDiscriminatorKey:B.overwriteDiscriminatorKey},J,B.filter),B};c0.exports.castUpdateMany=function A(F,B,D,$){if(!B.filter)throw new Error("Must provide a filter object.");if(!B.update)throw new Error("Must provide an update object.");let J=P5(F,B.filter),X=J.schema,E=D.strict!=null?D.strict:J.schema.options.strict,Y=F.base.options.setDefaultsOnInsert;if((B.setDefaultsOnInsert==null?Y:B.setDefaultsOnInsert)!==!1)Bm(B.filter,J.schema,B.update,{setDefaultsOnInsert:!0,upsert:B.upsert});let H=GX(B,D);if(J.schema.$timestamps!=null&&H){let W=J.schema.$timestamps.createdAt,q=J.schema.$timestamps.updatedAt;ev($,W,q,B.update,{})}if(H)ov($,B.update,J.schema);FB(X,B.filter),Fm(B.update,B,J.schema.options.versionKey),B.filter=AB(J.schema,B.filter,{strict:E,upsert:B.upsert}),B.update=Am(J.schema,B.update,{strict:E,upsert:B.upsert,arrayFilters:B.arrayFilters,overwriteDiscriminatorKey:B.overwriteDiscriminatorKey},J,B.filter)};c0.exports.castReplaceOne=async function A(F,B,D){let $=P5(F,B.filter),J=$.schema,X=D.strict!=null?D.strict:$.schema.options.strict;FB(J,B.filter),B.filter=AB($.schema,B.filter,{strict:X,upsert:B.upsert});let E=new $(B.replacement,X,!0);if($.schema.options.timestamps&&GX(B,D))E.initializeTimestamps();if(D.session!=null)E.$session(D.session);let Y=$?.schema?.options?.versionKey;if(Y&&E[Y]==null)E[Y]=0;if(B.replacement=E,D.skipValidation||B.skipValidation){B.replacement=B.replacement.toBSON();return}await B.replacement.$validate(),B.replacement=B.replacement.toBSON()};c0.exports.castDeleteOne=function A(F,B){let D=P5(F,B.filter),$=D.schema;FB($,B.filter),B.filter=AB(D.schema,B.filter)};c0.exports.castDeleteMany=function A(F,B){let D=P5(F,B.filter),$=D.schema;FB($,B.filter),B.filter=AB(D.schema,B.filter)};c0.exports.cast={insertOne:c0.exports.castInsertOne,updateOne:c0.exports.castUpdateOne,updateMany:c0.exports.castUpdateMany,replaceOne:c0.exports.castReplaceOne,deleteOne:c0.exports.castDeleteOne,deleteMany:c0.exports.castDeleteMany};function FB(A,F){if(A==null)return;if(A.discriminatorMapping&&!A.discriminatorMapping.isRoot)F[A.discriminatorMapping.key]=A.discriminatorMapping.value}function P5(A,F){let B=A.schema.options.discriminatorKey;if(F!=null&&F.hasOwnProperty(B))A=PK1(A.discriminators,F[B])||A;return A}function GX(A,F){let B=A.timestamps,D=F.timestamps;if(B!=null)return B;else if(D!=null)return D;return!0}});var OK=z((LS1,Dm)=>{Dm.exports=function A(F,B,D){return F.mongoose=F.mongoose||{},F.mongoose.validationErrors=B,F.mongoose.results=D,F}});var Ym=z((RS1,Em)=>{/*!
 * Module dependencies.
 */var jK1=uq(),SK=i("events").EventEmitter,TK1=I7(),p0=ZF(),$m=WK(),x0=G6(),kK1=sq(),OK1=Nv(),uK1=CK(),SK1=I0(),fK1=EX(),_K1=f0(),xK1=KK(),Jm=A3(),fK=Q1(),gK1=Tv(),HX=kK(),{modelSymbol:WX}=$1(),bK1=zC(),uK=OK(),yK1=$1().arrayAtomicsSymbol,BB=$1().sessionNewDocuments,hK1=["MONGODB-X509"];function E1(A){if(this.base=A,this.collections={},this.models={},this.config={},this.replica=!1,this.options=null,this.otherDbs=[],this.relatedDbs={},this.states=p0,this._readyState=p0.disconnected,this._closeCalled=!1,this._hasOpened=!1,this.plugins=[],typeof A==="undefined"||!A.connections.length)this.id=0;else this.id=A.nextConnectionId;this._queue=[]}/*!
 * Inherit from EventEmitter
 */Object.setPrototypeOf(E1.prototype,SK.prototype);Object.defineProperty(E1.prototype,"readyState",{get:function(){if(this._readyState===p0.connected&&this._lastHeartbeatAt!=null&&this.client?.topology?.s?.description?.type!=="LoadBalanced"&&typeof this.client?.topology?.s?.description?.heartbeatFrequencyMS==="number"&&Date.now()-this._lastHeartbeatAt>=this.client.topology.s.description.heartbeatFrequencyMS*2)return p0.disconnected;return this._readyState},set:function(A){if(!(A in p0))throw new Error("Invalid connection state: "+A);if(this._readyState!==A){this._readyState=A;for(let F of this.otherDbs)F.readyState=A;if(p0.connected===A)this._hasOpened=!0;this.emit(p0[A])}}});E1.prototype.get=function A(F){if(this.config.hasOwnProperty(F))return this.config[F];return _K1(this.options,F)};E1.prototype.set=function A(F,B){if(this.config.hasOwnProperty(F))return this.config[F]=B,B;return this.options=this.options||{},this.options[F]=B,B};E1.prototype.collections;E1.prototype.name;E1.prototype.models;E1.prototype.id;Object.defineProperty(E1.prototype,"plugins",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(E1.prototype,"host",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(E1.prototype,"port",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(E1.prototype,"user",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(E1.prototype,"pass",{configurable:!0,enumerable:!0,writable:!0});E1.prototype.db;E1.prototype.client;E1.prototype.config;E1.prototype.createCollection=async function A(F,B){if(typeof B==="function"||arguments.length>=3&&typeof arguments[2]==="function")throw new x0("Connection.prototype.createCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.createCollection(F,B)};E1.prototype.bulkWrite=async function A(F,B){await this._waitForConnect(),B=B||{};let D=B.ordered==null?!0:B.ordered,$=this.base.transactionAsyncLocalStorage?.getStore();if((!B||!B.hasOwnProperty("session"))&&$?.session!=null)B={...B,session:$.session};let J=this.base.now(),X=null;if(D){let E=[];for(let Y of F){if(typeof Y.model!=="string"&&!Y.model?.[WX])throw new x0("Must specify model in Connection.prototype.bulkWrite() operations");let G=Y.model[WX]?Y.model:this.model(Y.model);if(Y.name==null)throw new x0("Must specify operation name in Connection.prototype.bulkWrite()");if(!HX.cast.hasOwnProperty(Y.name))throw new x0(`Unrecognized bulkWrite() operation name ${Y.name}`);await HX.cast[Y.name](G,Y,B,J),E.push({...Y,namespace:G.namespace()})}X=await this.client.bulkWrite(E,B)}else{let E=[],Y=[],G=[],H=[],W=[];for(let C=0;C<F.length;++C){let Q=F[C];if(typeof Q.model!=="string"&&!Q.model?.[WX]){let Z=new x0("Must specify model in Connection.prototype.bulkWrite() operations");G.push({index:C,error:Z}),W[C]=Z;continue}let K;try{K=Q.model[WX]?Q.model:this.model(Q.model)}catch(Z){G.push({index:C,error:Z});continue}if(Q.name==null){let Z=new x0("Must specify operation name in Connection.prototype.bulkWrite()");G.push({index:C,error:Z}),W[C]=Z;continue}if(!HX.cast.hasOwnProperty(Q.name)){let Z=new x0(`Unrecognized bulkWrite() operation name ${Q.name}`);G.push({index:C,error:Z}),W[C]=Z;continue}let U=null;try{U=HX.cast[Q.name](K,Q,B,J)}catch(Z){G.push({index:C,error:Z}),W[C]=Z;continue}if(bK1(U))H.push(U.then(()=>{E.push({...Q,namespace:K.namespace()}),Y.push(C)},(Z)=>{G.push({index:C,error:Z}),W[C]=Z}));else E.push({...Q,namespace:K.namespace()}),Y.push(C)}if(H.length>0)await Promise.all(H);if(G=G.sort((C,Q)=>C.index-Q.index).map((C)=>C.error),E.length===0){if(B.throwOnValidationError&&G.length)throw new $m(G,W,Q,"bulkWrite");let Q=new(this.base.driver.get()).BulkWriteResult(xK1(),!1);return uK(Q,G,W)}let q;[X,q]=await this.client.bulkWrite(E,B).then((C)=>[C,null]).catch((C)=>[null,C]);for(let C=0;C<Y.length;++C)W[Y[C]]=null;if(q){if(G.length>0)uK(q,G,W),q.mongoose=q.mongoose||{},q.mongoose.validationErrors=G}if(G.length>0)if(B.throwOnValidationError)throw new $m(G,W,X,"bulkWrite");else uK(X,G,W)}return X};E1.prototype.createCollections=async function A(F={}){let B={},D={},{continueOnError:$}=F;delete F.continueOnError;for(let J of Object.values(this.models))try{B[J.modelName]=await J.createCollection({})}catch(X){if(!$){D[J.modelName]=X;break}else B[J.modelName]=X}if(!$&&Object.keys(D).length){let J=Object.entries(D).map(([E,Y])=>`${E}: ${Y.message}`).join(", ");throw new gK1(J,D)}return B};E1.prototype.withSession=async function A(F){if(arguments.length===0)throw new Error("Please provide an executor function");return await this.client.withSession(F)};E1.prototype.startSession=async function A(F){if(arguments.length>=2&&typeof arguments[1]==="function")throw new x0("Connection.prototype.startSession() no longer accepts a callback");return await this._waitForConnect(),this.client.startSession(F)};E1.prototype.transaction=function A(F,B){return this.startSession().then((D)=>{return D[BB]=new Map,D.withTransaction(()=>vK1(F,D,this.base),B).then(($)=>{return delete D[BB],$}).catch(($)=>{throw delete D[BB],$}).finally(()=>{D.endSession().catch(()=>{})})})};/*!
 * Reset document state in between transaction retries re: gh-13698
 */async function vK1(A,F,B){try{return B.transactionAsyncLocalStorage==null?await A(F):await new Promise(($)=>{B.transactionAsyncLocalStorage.run({session:F},()=>$(A(F)))})}catch(D){throw mK1(F),D}}/*!
 * If transaction was aborted, we need to reset newly inserted documents' `isNew`.
 */function mK1(A){for(let F of A[BB].keys()){let B=A[BB].get(F);if(B.hasOwnProperty("isNew"))F.$isNew=B.isNew;if(B.hasOwnProperty("versionKey"))F.set(F.schema.options.versionKey,B.versionKey);if(B.modifiedPaths.length>0&&F.$__.activePaths.states.modify==null)F.$__.activePaths.states.modify={};for(let D of B.modifiedPaths){let $=F.$__.activePaths.paths[D];if($!=null)delete F.$__.activePaths[$][D];F.$__.activePaths.paths[D]="modify",F.$__.activePaths.states.modify[D]=!0}for(let D of B.atomics.keys()){let $=F.$__getValue(D);if($==null)continue;$[yK1]=B.atomics.get(D)}}}E1.prototype.dropCollection=async function A(F){if(arguments.length>=2&&typeof arguments[1]==="function")throw new x0("Connection.prototype.dropCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.dropCollection(F)};E1.prototype._waitForConnect=async function A(F){if((this.readyState===p0.connecting||this.readyState===p0.disconnected)&&this._shouldBufferCommands()){let B=this._getBufferTimeoutMS(),D=null,$=!1,J={},X=new Promise((E)=>{J.fn=E,this._queue.push(J)});if(F)await X;else await Promise.race([X,new Promise((E)=>{D=setTimeout(()=>{$=!0,E()},B)})]);if($){let E=this._queue.indexOf(J);if(E!==-1)this._queue.splice(E,1);let Y="Connection operation buffering timed out after "+B+"ms";throw new x0(Y)}else if(D!=null)clearTimeout(D)}};/*!
 * Get the default buffer timeout for this connection
 */E1.prototype._getBufferTimeoutMS=function A(){if(this.config.bufferTimeoutMS!=null)return this.config.bufferTimeoutMS;if(this.base!=null&&this.base.get("bufferTimeoutMS")!=null)return this.base.get("bufferTimeoutMS");return 1e4};E1.prototype.listCollections=async function A(){return await this._waitForConnect(),await this.db.listCollections().toArray()};E1.prototype.listDatabases=async function A(){throw new x0("listDatabases() not implemented by driver")};E1.prototype.dropDatabase=async function A(){if(arguments.length>=1&&typeof arguments[0]==="function")throw new x0("Connection.prototype.dropDatabase() no longer accepts a callback");await this._waitForConnect();for(let F of Object.values(this.models))delete F.$init;return this.db.dropDatabase()};/*!
 * ignore
 */E1.prototype._shouldBufferCommands=function A(){if(this.config.bufferCommands!=null)return this.config.bufferCommands;if(this.base.get("bufferCommands")!=null)return this.base.get("bufferCommands");return!0};E1.prototype.error=function A(F,B){if(B)return B(F),null;if(this.listeners("error").length>0)this.emit("error",F);return Promise.reject(F)};E1.prototype.onOpen=function(){this.readyState=p0.connected;for(let A of this._queue)A.fn.apply(A.ctx,A.args);this._queue=[];for(let A in this.collections)if(fK.object.hasOwnProperty(this.collections,A))this.collections[A].onOpen();this.emit("open")};E1.prototype.openUri=async function A(F,B){if(this.readyState===p0.connecting||this.readyState===p0.connected){if(this._connectionString===F)return this}this._closeCalled=!1;let D=!1;if(B&&"_fireAndForget"in B)D=B._fireAndForget,delete B._fireAndForget;try{dK1.apply(arguments)}catch($){if(D)throw $;throw this.$initialConnection=Promise.reject($),$}this.$initialConnection=this.createClient(F,B).then(()=>this).catch(($)=>{if(this.readyState=p0.disconnected,this.listeners("error").length>0)Jm(()=>this.emit("error",$));throw $});for(let $ of Object.values(this.models))$.init().catch(function J(){});if(D)return this;try{await this.$initialConnection}catch($){throw Xm($)}return this};E1.prototype.on=function A(F,B){if(F==="error"&&this.$initialConnection)this.$initialConnection.catch(()=>{});return SK.prototype.on.call(this,F,B)};E1.prototype.once=function A(F,B){if(F==="error"&&this.$initialConnection)this.$initialConnection.catch(()=>{});return SK.prototype.once.call(this,F,B)};/*!
 * ignore
 */function dK1(A,F,B){if(typeof F==="function"&&B==null)throw new x0("Connection.prototype.openUri() no longer accepts a callback");else if(typeof B==="function")throw new x0("Connection.prototype.openUri() no longer accepts a callback")}/*!
 * ignore
 */function Xm(A){if(A?.name==="MongoServerSelectionError"){let F=A;A=new kK1,A.assimilateError(F)}return A}E1.prototype.destroy=async function A(F){if(typeof F==="function"||arguments.length===2&&typeof arguments[1]==="function")throw new x0("Connection.prototype.destroy() no longer accepts a callback");if(F!=null&&typeof F==="object")this.$wasForceClosed=!!F.force;else this.$wasForceClosed=!!F;return this._close(F,!0)};E1.prototype.close=async function A(F){if(typeof F==="function"||arguments.length===2&&typeof arguments[1]==="function")throw new x0("Connection.prototype.close() no longer accepts a callback");if(F!=null&&typeof F==="object")this.$wasForceClosed=!!F.force;else this.$wasForceClosed=!!F;if(this._lastHeartbeatAt!=null)this._lastHeartbeatAt=null;for(let B of Object.values(this.models))delete B.$init;return this._close(F,!1)};E1.prototype._close=async function A(F,B){let D=this,$=this._closeCalled;if(this._closeCalled=!0,this._destroyCalled=B,this.client!=null)this.client._closeCalled=!0,this.client._destroyCalled=B;let J=this;switch(this.readyState){case p0.disconnected:if(B&&this.base.connections.indexOf(J)!==-1)this.base.connections.splice(this.base.connections.indexOf(J),1);if(!$)await this.doClose(F),this.onClose(F);break;case p0.connected:if(this.readyState=p0.disconnecting,await this.doClose(F),B&&D.base.connections.indexOf(J)!==-1)this.base.connections.splice(this.base.connections.indexOf(J),1);this.onClose(F);break;case p0.connecting:return new Promise((X,E)=>{let Y=()=>{if(this.removeListener("open",Y),this.removeListener("error",Y),B)this.destroy(F).then(X,E);else this.close(F).then(X,E)};this.once("open",Y),this.once("error",Y)});case p0.disconnecting:return new Promise((X)=>{this.once("close",()=>{if(B&&this.base.connections.indexOf(J)!==-1)this.base.connections.splice(this.base.connections.indexOf(J),1);X()})})}return this};E1.prototype.doClose=function A(){throw new Error("Connection#doClose unimplemented by driver")};E1.prototype.onClose=function A(F){this.readyState=p0.disconnected;for(let B in this.collections)if(fK.object.hasOwnProperty(this.collections,B))this.collections[B].onClose(F);this.emit("close",F);for(let B of this.otherDbs)this._destroyCalled?B.destroy({force:F,skipCloseClient:!0}):B.close({force:F,skipCloseClient:!0})};E1.prototype.collection=function(A,F){let B={autoIndex:this.config.autoIndex!=null?this.config.autoIndex:this.base.options.autoIndex,autoCreate:this.config.autoCreate!=null?this.config.autoCreate:this.base.options.autoCreate,autoSearchIndex:this.config.autoSearchIndex!=null?this.config.autoSearchIndex:this.base.options.autoSearchIndex};F=Object.assign({},B,F?SK1(F):{}),F.$wasForceClosed=this.$wasForceClosed;let D=this.base&&this.base.__driver&&this.base.__driver.Collection||fK1.get().Collection;if(!(A in this.collections))this.collections[A]=new D(A,this,F);return this.collections[A]};E1.prototype.plugin=function(A,F){return this.plugins.push([A,F]),this};E1.prototype.model=function A(F,B,D,$){if(!(this instanceof E1))throw new x0("`connection.model()` should not be run with `new`. If you are doing `new db.model(foo)(bar)`, use `db.model(foo)(bar)` instead");let J;if(typeof F==="function")J=F,F=J.name;if(typeof B==="string")D=B,B=!1;if(fK.isObject(B)){if(!B.instanceOfSchema)B=new TK1(B);else if(!(B instanceof this.base.Schema))B=B._clone(this.base.Schema)}if(B&&!B.instanceOfSchema)throw new Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");let X={cache:!1,overwriteModels:this.base.options.overwriteModels},E=Object.assign(X,$,{connection:this});if(this.models[F]&&!D&&E.overwriteModels!==!0){if(B&&B.instanceOfSchema&&B!==this.models[F].schema)throw new x0.OverwriteModelError(F);return this.models[F]}let Y;if(B&&B.instanceOfSchema){if(uK1(B,this.plugins,null,"$connectionPluginsApplied"),Y=this.base._model(J||F,B,D,E),!this.models[F])this.models[F]=Y;return Y.init().catch(function G(){}),Y}if(this.models[F]&&D)return Y=this.models[F],B=Y.prototype.schema,Y.__subclass(this,B,D);if(arguments.length===1){if(Y=this.models[F],!Y)throw new x0.MissingSchemaError(F);return Y}if(!Y)throw new x0.MissingSchemaError(F);if(this===Y.prototype.db&&(!D||D===Y.collection.name)){if(!this.models[F])this.models[F]=Y;return Y}return this.models[F]=Y.__subclass(this,B,D),this.models[F]};E1.prototype.deleteModel=function A(F){if(typeof F==="string"){let B=this.model(F);if(B==null)return this;let D=B.collection.name;delete this.models[F],delete this.collections[D],this.emit("deleteModel",B)}else if(F instanceof RegExp){let B=F,D=this.modelNames();for(let $ of D)if(B.test($))this.deleteModel($)}else throw new Error('First parameter to `deleteModel()` must be a string or regexp, got "'+F+'"');return this};E1.prototype.watch=function A(F,B){return new jK1((J)=>{Jm(()=>{if(this.readyState===p0.connecting)this.once("open",function(){let X=this.db.watch(F,B);J(null,X)});else{let X=this.db.watch(F,B);J(null,X)}})},F,B)};E1.prototype.asPromise=async function A(){try{return await this.$initialConnection,this}catch(F){throw Xm(F)}};E1.prototype.modelNames=function A(){return Object.keys(this.models)};E1.prototype.shouldAuthenticate=function A(){return this.user!=null&&(this.pass!=null||this.authMechanismDoesNotRequirePassword())};E1.prototype.authMechanismDoesNotRequirePassword=function A(){if(this.options&&this.options.auth)return hK1.indexOf(this.options.auth.authMechanism)>=0;return!0};E1.prototype.optionsProvideAuthenticationData=function A(F){return F&&F.user&&(F.pass||this.authMechanismDoesNotRequirePassword())};E1.prototype.getClient=function A(){return this.client};E1.prototype.setClient=function A(){throw new x0("Connection#setClient not implemented by driver")};/*!
 * Called internally by `openUri()` to create a MongoClient instance.
 */E1.prototype.createClient=function A(){throw new x0("Connection#createClient not implemented by driver")};E1.prototype.syncIndexes=async function A(F={}){let B={},D={},{continueOnError:$}=F;delete F.continueOnError;for(let J of Object.values(this.models))try{B[J.modelName]=await J.syncIndexes(F)}catch(X){if(!$){D[J.modelName]=X;break}else B[J.modelName]=X}if(!$&&Object.keys(D).length){let J=Object.entries(D).map(([E,Y])=>`${E}: ${Y.message}`).join(", ");throw new OK1(J,D)}return B};/*!
 * Module exports.
 */E1.STATES=p0;Em.exports=E1});var _K=z((NS1,lK1)=>{lK1.exports={name:"mongoose",description:"Mongoose MongoDB ODM",version:"8.16.0",author:"Guillermo Rauch <guillermo@learnboost.com>",keywords:["mongodb","document","model","schema","database","odm","data","datastore","query","nosql","orm","db"],type:"commonjs",license:"MIT",dependencies:{bson:"^6.10.4",kareem:"2.6.3",mongodb:"~6.17.0",mpath:"0.9.0",mquery:"5.0.0",ms:"2.1.3",sift:"17.1.3"},devDependencies:{"@babel/core":"7.27.4","@babel/preset-env":"7.27.2","@mongodb-js/mongodb-downloader":"^0.3.9","@typescript-eslint/eslint-plugin":"^8.19.1","@typescript-eslint/parser":"^8.19.1",acquit:"1.4.0","acquit-ignore":"0.2.1","acquit-require":"0.1.1",ajv:"8.17.1","assert-browserify":"2.0.0","babel-loader":"8.2.5","broken-link-checker":"^0.7.8",buffer:"^5.6.0",cheerio:"1.0.0","crypto-browserify":"3.12.1",dox:"1.0.0",eslint:"8.57.1","eslint-plugin-markdown":"^5.1.0","eslint-plugin-mocha-no-only":"1.2.0",express:"^4.19.2","fs-extra":"~11.3.0","highlight.js":"11.11.1","lodash.isequal":"4.5.0","lodash.isequalwith":"4.4.0","markdownlint-cli2":"^0.18.1",marked:"15.0.12",mkdirp:"^3.0.1",mocha:"11.5.0",moment:"2.30.1","mongodb-memory-server":"10.1.4","mongodb-runner":"^5.8.2",ncp:"^2.0.0",nyc:"15.1.0",pug:"3.0.3",q:"1.5.1",sinon:"20.0.0","stream-browserify":"3.0.0",tsd:"0.32.0",typescript:"5.8.3",uuid:"11.1.0",webpack:"5.99.9"},directories:{lib:"./lib/mongoose"},scripts:{"docs:clean":"npm run docs:clean:stable","docs:clean:stable":"rimraf index.html && rimraf -rf ./docs/*.html  && rimraf -rf ./docs/api && rimraf -rf ./docs/tutorials/*.html && rimraf -rf ./docs/typescript/*.html && rimraf -rf ./docs/*.html && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:5x":"rimraf index.html && rimraf -rf ./docs/5.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:6x":"rimraf index.html && rimraf -rf ./docs/6.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:copy:tmp":"mkdirp ./tmp/docs/css && mkdirp ./tmp/docs/js && mkdirp ./tmp/docs/images && mkdirp ./tmp/docs/tutorials && mkdirp ./tmp/docs/typescript && mkdirp ./tmp/docs/api && ncp ./docs/css ./tmp/docs/css --filter=.css$ && ncp ./docs/js ./tmp/docs/js --filter=.js$ && ncp ./docs/images ./tmp/docs/images && ncp ./docs/tutorials ./tmp/docs/tutorials && ncp ./docs/typescript ./tmp/docs/typescript && ncp ./docs/api ./tmp/docs/api && cp index.html ./tmp && cp docs/*.html ./tmp/docs/","docs:copy:tmp:5x":"rimraf ./docs/5.x && ncp ./tmp ./docs/5.x","docs:copy:tmp:6x":"rimraf ./docs/6.x && ncp ./tmp ./docs/6.x","docs:generate":"node ./scripts/website.js","docs:generate:sponsorData":"node ./scripts/loadSponsorData.js","docs:test":"npm run docs:generate","docs:view":"node ./scripts/static.js","docs:prepare:publish:stable":"git checkout gh-pages && git merge master && npm run docs:generate","docs:prepare:publish:5x":"git checkout 5.x && git merge 5.x && npm run docs:clean:stable && npm run docs:generate && npm run docs:copy:tmp && git checkout gh-pages && npm run docs:copy:tmp:5x","docs:prepare:publish:6x":"git checkout 6.x && git merge 6.x && npm run docs:clean:stable && env DOCS_DEPLOY=true npm run docs:generate && mv ./docs/6.x ./tmp && git checkout gh-pages && npm run docs:copy:tmp:6x","docs:prepare:publish:7x":"env DOCS_DEPLOY=true npm run docs:generate && git checkout gh-pages && rimraf ./docs/7.x && mv ./tmp ./docs/7.x","docs:check-links":"blc http://127.0.0.1:8089 -ro",lint:"eslint .","lint-js":"eslint . --ext .js --ext .cjs","lint-ts":"eslint . --ext .ts","lint-md":'markdownlint-cli2 "**/*.md" "#node_modules" "#benchmarks"',"build-browser":"(rm ./dist/* || true) && node ./scripts/build-browser.js",prepublishOnly:"npm run build-browser",release:"git pull && git push origin master --tags && npm publish","release-5x":"git pull origin 5.x && git push origin 5.x && git push origin 5.x --tags && npm publish --tag 5x","release-6x":"git pull origin 6.x && git push origin 6.x && git push origin 6.x --tags && npm publish --tag 6x",mongo:"node ./tools/repl.js","publish-7x":"npm publish --tag 7x","create-separate-require-instance":"rm -rf ./node_modules/mongoose-separate-require-instance && node ./scripts/create-tarball && tar -xzf mongoose.tgz -C ./node_modules && mv ./node_modules/package ./node_modules/mongoose-separate-require-instance",test:"mocha --exit ./test/*.test.js","test-deno":"deno run --allow-env --allow-read --allow-net --allow-run --allow-sys --allow-write ./test/deno.mjs","test-rs":"START_REPLICA_SET=1 mocha --timeout 30000 --exit ./test/*.test.js","test-tsd":"node ./test/types/check-types-filename && tsd","setup-test-encryption":"node scripts/setup-encryption-tests.js","test-encryption":"mocha --exit ./test/encryption/*.test.js",tdd:"mocha ./test/*.test.js --inspect --watch --recursive --watch-files ./**/*.{js,ts}","test-coverage":"nyc --reporter=html --reporter=text npm test","ts-benchmark":"cd ./benchmarks/typescript/simple && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check"},main:"./index.js",types:"./types/index.d.ts",engines:{node:">=16.20.1"},bugs:{url:"https://github.com/Automattic/mongoose/issues/new"},repository:{type:"git",url:"git://github.com/Automattic/mongoose.git"},homepage:"https://mongoosejs.com",browser:"./dist/browser.umd.js",config:{mongodbMemoryServer:{disablePostinstall:!0}},funding:{type:"opencollective",url:"https://opencollective.com/mongoose"},tsd:{directory:"test/types",compilerOptions:{esModuleInterop:!1,strict:!0,allowSyntheticDefaultImports:!0,strictPropertyInitialization:!1,noImplicitAny:!1,strictNullChecks:!0,module:"commonjs",target:"ES2017"}}}});var Hm=z((PS1,Gm)=>{var cK1=I0(),pK1=G6();function iK1(A,F){let B=F?F:{},D=B.readPreference?B.readPreference:rK1(A),$=cK1(B);return D&&D!=="primary"&&D!=="primaryPreferred"?nK1(D,$):$}function nK1(A,F){if(sK1(F)&&aK1(A))oK1();else return tK1(F)}function sK1(A){let F=A.config&&A.config.autoIndex,{autoCreate:B,autoIndex:D}=A;return!!(F||B||D)}function aK1(A){return A==="secondary"||A==="secondaryPreferred"}function rK1(A){let B=/(?:&|\?)readPreference=(\w+)(?:&|$)/.exec(A);return B?B[1]:null}function tK1(A){return A.config={autoIndex:!1},A.autoCreate=!1,A.autoIndex=!1,A}function oK1(){throw new pK1('MongoDB prohibits index creation on connections that read from non-primary replicas.  Connections that set "readPreference" to "secondary" or "secondaryPreferred" may not opt-in to the following connection options: autoCreate, autoIndex')}Gm.exports=iK1});var Wm=z((eK1)=>{eK1.setTimeout=setTimeout});var zm=z((MS1,Km)=>{/*!
 * Module dependencies.
 */var qm=Ym(),S7=G6(),Q6=ZF(),Cm=C7(),Fz1=_K(),Bz1=Hm(),Dz1=Wm().setTimeout,Qm=Q1(),$z1=I7();function O3(){qm.apply(this,arguments),this._listening=!1,this._lastHeartbeatAt=null}O3.STATES=Q6;/*!
 * Inherits from Connection.
 */Object.setPrototypeOf(O3.prototype,qm.prototype);O3.prototype.useDb=function(A,F){if(F=F||{},F.useCache&&this.relatedDbs[A])return this.relatedDbs[A];let B=new this.constructor;B.name=A,B.base=this.base,B.collections={},B.models={},B.replica=this.replica,B.config=Object.assign({},this.config,B.config),B.name=this.name,B.options=this.options,B._readyState=this._readyState,B._closeCalled=this._closeCalled,B._hasOpened=this._hasOpened,B._listening=!1,B._parent=this,B.host=this.host,B.port=this.port,B.user=this.user,B.pass=this.pass;let D=this;if(B.client=D.client,this.db&&this._readyState===Q6.connected)$();else this._queue.push({fn:$});function $(){B.client=D.client;let J={};if(F.hasOwnProperty("noListener"))J.noListener=F.noListener;B.db=D.client.db(A,J),B._lastHeartbeatAt=D._lastHeartbeatAt,B.onOpen()}if(B.name=A,F.noListener!==!0)this.otherDbs.push(B);if(B.otherDbs.push(this),F&&F.useCache)this.relatedDbs[B.name]=B,B.relatedDbs=this.relatedDbs;return B};O3.prototype.aggregate=function A(F,B){return new this.base.Aggregate(null,this).append(F).option(B??{})};O3.prototype.removeDb=function A(F){let B=this.otherDbs.filter((D)=>D.name===F);if(!B.length)throw new S7(`No connections to database "${F}" found`);for(let D of B)D._closeCalled=!0,D._destroyCalled=!0,D._readyState=Q6.disconnected,D.$wasForceClosed=!0;delete this.relatedDbs[F],this.otherDbs=this.otherDbs.filter((D)=>D.name!==F)};O3.prototype.doClose=async function A(F){if(this.client==null)return this;let B=!1;if(F!=null&&typeof F==="object")B=F.skipCloseClient,F=F.force;if(B)return this;return await this.client.close(F),await new Promise((D)=>Dz1(D,1)),this};O3.prototype.listDatabases=async function A(){return await this._waitForConnect(),await this.db.admin().listDatabases()};/*!
 * ignore
 */O3.prototype.createClient=async function A(F,B){if(typeof F!=="string")throw new S7(`The \`uri\` parameter to \`openUri()\` must be a string, got "${typeof F}". Make sure the first parameter to \`mongoose.connect()\` or \`mongoose.createConnection()\` is a string.`);if(this._destroyCalled)throw new S7("Connection has been closed and destroyed, and cannot be used for re-opening the connection. Please create a new connection with `mongoose.createConnection()` or `mongoose.connect()`.");if(this.readyState===Q6.connecting||this.readyState===Q6.connected){if(this._connectionString!==F)throw new S7("Can't call `openUri()` on an active connection with different connection strings. Make sure you aren't calling `mongoose.connect()` multiple times. See: https://mongoosejs.com/docs/connections.html#multiple_connections")}if(B=Bz1(F,B),B){let E=B.config&&B.config.autoIndex!=null?B.config.autoIndex:B.autoIndex;if(E!=null)this.config.autoIndex=E!==!1,delete B.config,delete B.autoIndex;if("autoCreate"in B)this.config.autoCreate=!!B.autoCreate,delete B.autoCreate;if("sanitizeFilter"in B)this.config.sanitizeFilter=B.sanitizeFilter,delete B.sanitizeFilter;if("autoSearchIndex"in B)this.config.autoSearchIndex=B.autoSearchIndex,delete B.autoSearchIndex;if("bufferTimeoutMS"in B)this.config.bufferTimeoutMS=B.bufferTimeoutMS,delete B.bufferTimeoutMS;if(B.user||B.pass)B.auth=B.auth||{},B.auth.username=B.user,B.auth.password=B.pass,this.user=B.user,this.pass=B.pass;if(delete B.user,delete B.pass,B.bufferCommands!=null)this.config.bufferCommands=B.bufferCommands,delete B.bufferCommands}else B={};this._connectionOptions=B;let D=B.dbName;if(D!=null)this.$dbName=D;if(delete B.dbName,!Qm.hasUserDefinedProperty(B,"driverInfo"))B.driverInfo={name:"Mongoose",version:Fz1.version};let{schemaMap:$,encryptedFieldsMap:J}=this._buildEncryptionSchemas();if((Object.keys($).length>0||Object.keys(J).length)&&!B.autoEncryption)throw new Error("Must provide `autoEncryption` when connecting with encrypted schemas.");if(Object.keys($).length>0)B.autoEncryption.schemaMap=$;if(Object.keys(J).length>0)B.autoEncryption.encryptedFieldsMap=J;this.readyState=Q6.connecting,this._connectionString=F;let X;try{X=new Cm.MongoClient(F,B)}catch(E){throw this.readyState=Q6.disconnected,E}this.client=X,X.setMaxListeners(0),await X.connect(),xK(this,X,B,D);for(let E of this.otherDbs)xK(E,X,{},E.name);return this};O3.prototype._buildEncryptionSchemas=function(){let A={},F={},B=Object.values(this.models).filter((J)=>J.schema._hasEncryptedFields());for(let J of B){let{schema:X,collection:{collectionName:E}}=J,Y=`${this.$dbName}.${E}`,G=X.encryptionType()==="csfle"?F:A;if(G[Y]??=new $z1({},{encryptionType:X.encryptionType()}),X.discriminatorMapping&&!X.discriminatorMapping.isRoot){let W=X._baseSchema;X.eachPath((q)=>{if(W.path(q))return;if(!G[Y]._hasEncryptedField(q))return;throw new Error(`Cannot have duplicate keys in discriminators with encryption. key=${q}`)})}G[Y].add(X)}let D=Object.fromEntries(Object.entries(F).map(([J,X])=>[J,X._buildSchemaMap()])),$=Object.fromEntries(Object.entries(A).map(([J,X])=>[J,X._buildEncryptedFields()]));return{schemaMap:D,encryptedFieldsMap:$}};/*!
 * ignore
 */O3.prototype.setClient=function A(F){if(!(F instanceof Cm.MongoClient))throw new S7("Must call `setClient()` with an instance of MongoClient");if(this.readyState!==Q6.disconnected)throw new S7("Cannot call `setClient()` on a connection that is already connected.");if(F.topology==null)throw new S7("Cannot call `setClient()` with a MongoClient that you have not called `connect()` on yet.");this._connectionString=F.s.url,xK(this,F,{},F.s.options.dbName);for(let B of Object.values(this.models))B.init().catch(function D(){});return this};/*!
 * ignore
 */function xK(A,F,B,D){let $=D!=null?F.db(D):F.db();A.db=$,A.client=F,A.host=F&&F.s&&F.s.options&&F.s.options.hosts&&F.s.options.hosts[0]&&F.s.options.hosts[0].host||void 0,A.port=F&&F.s&&F.s.options&&F.s.options.hosts&&F.s.options.hosts[0]&&F.s.options.hosts[0].port||void 0,A.name=D!=null?D:$.databaseName,A._closeCalled=F._closeCalled;let J=()=>{if(A.readyState!==Q6.connected)A.readyState=Q6.connected,A.emit("reconnect"),A.emit("reconnected"),A.onOpen()},X=F&&F.topology&&F.topology.description&&F.topology.description.type||"";if(X==="Single")F.on("serverDescriptionChanged",(E)=>{if(E.newDescription.type==="Unknown")A.readyState=Q6.disconnected;else J()});else if(X.startsWith("ReplicaSet"))F.on("topologyDescriptionChanged",(E)=>{let Y=E.newDescription;if(A.readyState===Q6.connected&&Y.type!=="ReplicaSetWithPrimary")A.readyState=Q6.disconnected;else if(A.readyState===Q6.disconnected&&Y.type==="ReplicaSetWithPrimary")J()});if(A._lastHeartbeatAt=null,F.on("serverHeartbeatSucceeded",()=>{A._lastHeartbeatAt=Date.now()}),B.monitorCommands)F.on("commandStarted",(E)=>A.emit("commandStarted",E)),F.on("commandFailed",(E)=>A.emit("commandFailed",E)),F.on("commandSucceeded",(E)=>A.emit("commandSucceeded",E));A.onOpen();for(let E in A.collections)if(Qm.object.hasOwnProperty(A.collections,E))A.collections[E].onOpen()}/*!
 * Module exports.
 */Km.exports=O3});var Um=z((Jz1)=>{/*!
 * Module exports.
 */Jz1.BulkWriteResult=nS();Jz1.Collection=Qf();Jz1.Connection=zm();Jz1.ClientEncryption=C7().ClientEncryption});var Vm=z((TS1,Zm)=>{/*!
 * Valid mongoose options
 */var Hz1=Object.freeze(["allowDiskUse","applyPluginsToChildSchemas","applyPluginsToDiscriminators","autoCreate","autoIndex","autoSearchIndex","bufferCommands","bufferTimeoutMS","cloneSchemas","createInitialConnection","debug","forceRepopulate","id","timestamps.createdAt.immutable","maxTimeMS","objectIdGetter","overwriteModels","returnOriginal","runValidators","sanitizeFilter","sanitizeProjection","selectPopulatedPaths","setDefaultsOnInsert","skipOriginalStackTraces","strict","strictPopulate","strictQuery","toJSON","toObject","transactionAsyncLocalStorage","translateAliases"]);Zm.exports=Hz1});var Lm=z((kS1,wm)=>{/*!
 * Module dependencies.
 */var Wz1=T1();class gK extends Wz1{constructor(A){let F=A.map((B)=>B.message).join(", ");if(F.length>50)F=F.slice(0,50)+"...";super(`eachAsync() finished with ${A.length} errors: ${F}`);this.errors=A}}Object.defineProperty(gK.prototype,"name",{value:"EachAsyncMultiError"});/*!
 * exports
 */wm.exports=gK});var yK=z((OS1,Nm)=>{/*!
 * Module dependencies.
 */var qz1=Lm(),bK=A3();Nm.exports=async function A(F,B,D){let $=D.parallel||1,J=D.batchSize,X=D.signal,E=D.continueOnError,Y=[],G=Cz1(),H=!1;return new Promise((C,Q)=>{if(X!=null){if(X.aborted)return C(null);X.addEventListener("abort",()=>{return H=!0,C(null)},{once:!0})}if(J!=null){if(typeof J!=="number")throw new TypeError("batchSize must be a number");else if(!Number.isInteger(J))throw new TypeError("batchSize must be an integer");else if(J<1)throw new TypeError("batchSize must be at least 1")}W((K,U)=>{if(K!=null)return Q(K);C(U)})});function W(C){let Q=0,K=0,U=null;for(let V=0;V<$;++V)G(Z());function Z(){let V=[],w=!1;return R;function R(I){if(w||H)return I();else if(U)return I();F(function(j,k){if(U!=null)return I();if(j!=null)if(j.name==="MongoCursorExhaustedError")k=null;else if(E)Y.push(j);else return U=j,C(j),I();if(k==null){if(w=!0,Q<=0){let T=E?Rm(Y):U;C(T)}else if(J&&V.length)q(V,K++,x);return I()}if(++Q,bK(()=>I()),J)V.push(k);if(J&&V.length!==J){bK(()=>G(R));return}let u=J?V:k;function x(T){if(J)Q-=V.length,V=[];else--Q;if(T!=null)if(E)Y.push(T);else return U=T,C(T);if((w||H)&&Q<=0){let y=E?Rm(Y):U;return C(y)}bK(()=>G(R))}q(u,K++,x)})}}}function q(C,Q,K){let U;try{U=B(C,Q)}catch(Z){return K(Z)}if(U&&typeof U.then==="function")U.then(function(){K(null)},function(Z){K(Z||new Error("`eachAsync()` promise rejected without error"))});else K(null)}};function Cz1(){let A=[],F=null,B=0;return function $(J){if(F===null&&A.length===0)return F=B++,J(D);A.push(J)};function D(){if(A.length!==0)F=B++,A.shift()(D);else F=null}}function Rm(A){if(A.length===0)return null;return new qz1(A)}});var um=z((uS1,Om)=>{/*!
 * Module dependencies.
 */var DB=T1(),Mm=i("stream").Readable,Qz1=yK(),jm=jF(),Kz1=U7(),hK=A3(),{once:zz1}=i("events"),Tm=i("util");function K6(A){Mm.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.skipped=!1,this.query=A,this._closed=!1;let F=A.model;this._mongooseOptions={},this._transforms=[],this.model=F,this.options={},F.hooks.execPre("find",A,(B)=>{if(B!=null){if(B instanceof Kz1.skipWrappedFunction){let D=B.args[0];if(D!=null&&(!Array.isArray(D)||D.length)){let $=new DB('Cannot `skipMiddlewareFunction()` with a value when using `.find().cursor()`, value must be nullish or empty array, got "'+Tm.inspect(D)+'".');this._markError($),this.listeners("error").length>0&&this.emit("error",$);return}this.skipped=!0,this.emit("cursor",null);return}this._markError(B),this.listeners("error").length>0&&this.emit("error",B);return}if(Object.assign(this.options,A._optionsForExec()),this._transforms=this._transforms.concat(A._transforms.slice()),this.options.transform)this._transforms.push(this.options.transform);if(this.options.batchSize)this.options._populateBatchSize=Math.min(this.options.batchSize,5000);if(A._mongooseOptions._asyncIterator)this._mongooseOptions._asyncIterator=!0;if(F.collection._shouldBufferCommands()&&F.collection.buffer)F.collection.queue.push([()=>Pm(A,this)]);else Pm(A,this)})}Tm.inherits(K6,Mm);/*!
 * ignore
 */function Pm(A,F){try{let B=A.model.collection.find(A._conditions,F.options);F.cursor=B,F.emit("cursor",B)}catch(B){F._markError(B),F.listeners("error").length>0&&F.emit("error",F._error)}}K6.prototype._read=function(){QX(this,(A,F)=>{if(A)return this.emit("error",A);if(!F){this.push(null),this.cursor.close(function(B){if(B)return this.emit("error",B)});return}this.push(F)})};K6.prototype.getDriverCursor=async function A(){if(this.cursor)return this.cursor;return await zz1(this,"cursor"),this.cursor};Object.defineProperty(K6.prototype,"map",{value:function(A){return this._transforms.push(A),this},enumerable:!0,configurable:!0,writable:!0});K6.prototype._markError=function(A){return this._error=A,this};K6.prototype.close=async function A(){if(typeof arguments[0]==="function")throw new DB("QueryCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close(),this._closed=!0,this.emit("close")}catch(F){throw this.listeners("error").length>0&&this.emit("error",F),F}};K6.prototype._destroy=function A(F,B){let D=null;if(!this.cursor)D=new Promise(($)=>{this.once("cursor",$)});else D=Promise.resolve();return D.then(()=>{this.cursor.close()}).then(()=>{this._closed=!0,B()}).catch(($)=>{B($)}),this};K6.prototype.rewind=function(){return km(this,()=>{this.cursor.rewind()}),this};K6.prototype.next=async function A(){if(typeof arguments[0]==="function")throw new DB("QueryCursor.prototype.next() no longer accepts a callback");if(this._closed)throw new DB("Cannot call `next()` on a closed cursor");return new Promise((F,B)=>{QX(this,function(D,$){if(D)return B(D);F($)})})};K6.prototype.eachAsync=function(A,F){if(typeof arguments[2]==="function")throw new DB("QueryCursor.prototype.eachAsync() no longer accepts a callback");if(typeof F==="function")F={};return F=F||{},Qz1((B)=>QX(this,B),A,F)};K6.prototype.options;K6.prototype.addCursorFlag=function(A,F){return km(this,()=>{this.cursor.addCursorFlag(A,F)}),this};if(Symbol.asyncIterator!=null)K6.prototype[Symbol.asyncIterator]=function A(){return this._mongooseOptions._asyncIterator=!0,this};function QX(A,F){let B=F;if(B=function(D,$){if(D)return F(D);if($===null)if(A._mongooseOptions._asyncIterator)return F(null,{done:!0});else return F(null,null);if(A._transforms.length&&$!==null)$=A._transforms.reduce(function(J,X){return X.call(A,J)},$);if(A._mongooseOptions._asyncIterator)return F(null,{value:$,done:!1});return F(null,$)},A._error)return hK(function(){B(A._error)});if(A.skipped)return hK(()=>B(null,null));if(A.cursor){if(A.query._mongooseOptions.populate&&!A._pop)A._pop=jm.preparePopulationOptionsMQ(A.query,A.query._mongooseOptions),A._pop.__noPromise=!0;if(A.query._mongooseOptions.populate&&A.options._populateBatchSize>1)if(A._batchDocs&&A._batchDocs.length)return qX(A,A._batchDocs.shift(),A._pop,B);else if(A._batchExhausted)return B(null,null);else{A._batchDocs=[],A.cursor.next().then((D)=>{CX.call({ctx:A,callback:B},null,D)},(D)=>{CX.call({ctx:A,callback:B},D)});return}else return A.cursor.next().then((D)=>{if(!D){B(null,null);return}if(!A.query._mongooseOptions.populate)return qX(A,D,null,B);A.query.model.populate(D,A._pop).then(($)=>{qX(A,$,A._pop,B)},($)=>{B($)})},(D)=>{B(D)})}else A.once("error",F),A.once("cursor",function(D){if(A.removeListener("error",F),D==null){if(A.skipped)return F(null,null);return}QX(A,F)})}/*!
 * ignore
 */function CX(A,F){if(A)return this.callback(A);if(!F)return this.ctx._batchExhausted=!0,Im.call(this);if(this.ctx._batchDocs.push(F),this.ctx._batchDocs.length<this.ctx.options._populateBatchSize)hK(()=>this.ctx.cursor.next().then((B)=>{CX.call(this,null,B)},(B)=>{CX.call(this,B)}));else Im.call(this)}/*!
 * ignore
 */function Im(){if(!this.ctx._batchDocs.length)return this.callback(null,null);this.ctx.query.model.populate(this.ctx._batchDocs,this.ctx._pop).then(()=>{qX(this.ctx,this.ctx._batchDocs.shift(),this.ctx._pop,this.callback)},(A)=>{this.callback(A)})}/*!
 * ignore
 */function qX(A,F,B,D){if(A.query._mongooseOptions.lean)return A.model.hooks.execPost("find",A.query,[[F]],(Y)=>{if(Y!=null)return D(Y);D(null,F)});let{model:$,_fields:J,_userProvidedFields:X,options:E}=A.query;jm.createModelAndInit($,F,J,X,E,B,(Y,G)=>{if(Y!=null)return D(Y);A.model.hooks.execPost("find",A.query,[[G]],(H)=>{if(H!=null)return D(H);D(null,G)})})}/*!
 * ignore
 */function km(A,F){if(A.cursor)return F();A.once("cursor",function(B){if(B==null)return;F()})}Om.exports=K6});var mK=z((SS1,fm)=>{var vK=Q1();function Uz1(A,F,B){Sm(A,F,B,"maxTimeMS")}function Zz1(A,F,B){Sm(A,F,B,"allowDiskUse")}fm.exports={applyGlobalMaxTimeMS:Uz1,applyGlobalDiskUse:Zz1};function Sm(A,F,B,D){if(vK.hasUserDefinedProperty(A,D))return;if(vK.hasUserDefinedProperty(F,D))A[D]=F[D];else if(vK.hasUserDefinedProperty(B,D))A[D]=B[D]}});var dK=z((fS1,_m)=>{_m.exports=function A(F,B){if(B.readConcern!==void 0)return;if(B&&B.session&&B.session.transaction)return;let D=F.options?.readConcern?.level;if(D!=null)B.readConcern={level:D}}});var lK=z((_S1,xm)=>{xm.exports=function A(F,B){if(B.writeConcern!=null)return;if(B&&B.session&&B.session.transaction)return;let D=F.options.writeConcern??{};if(Object.keys(D).length!=0){if(B.writeConcern={},!("w"in B)&&D.w!=null)B.writeConcern.w=D.w;if(!("j"in B)&&D.j!=null)B.writeConcern.j=D.j;if(!("wtimeout"in B)&&D.wtimeout!=null)B.writeConcern.wtimeout=D.wtimeout}else{if(!("w"in B)&&D.w!=null)B.w=D.w;if(!("j"in B)&&D.j!=null)B.j=D.j;if(!("wtimeout"in B)&&D.wtimeout!=null)B.wtimeout=D.wtimeout}}});var ym=z((xS1,bm)=>{var gm=hF();bm.exports=function A(F,B,D){if(!Object.keys(D).some(gm))return B.castForQuery(null,D,F);let J=Object.keys(D),X=J.length;while(X--){let E=J[X],Y=D[E];if(E==="$not"){if(Y&&B&&!B.caster){let G=Object.keys(Y);if(G.length&&gm(G[0]))for(let H of Object.keys(Y))Y[H]=B.castForQuery(H,Y[H],F);else D[E]=B.castForQuery(E,Y,F);continue}}else D[E]=B.castForQuery(E,Y,F)}return D}});var vm=z((gS1,hm)=>{var Vz1=/^\d+$/;hm.exports=function A(F,B,D){let $=F.path(B);if($!=null)return $;let J=B.split("."),X="",E=!1;for(let Y of J){if(E&&Vz1.test(Y))continue;if(X=X.length===0?Y:X+"."+Y,$=F.path(X),$!=null&&$.schema){if(F=$.schema,!E&&$.$isMongooseDocumentArray)E=!0;if(D&&D[X])F=F.discriminators[D[X]]??F;X=""}}return $}});var pm=z((bS1,cm)=>{var wz1=ym(),mm=_F(),dm=vm(),Lz1=ZK();cm.exports=function A(F){let B=F.options.arrayFilters,D=F.getUpdate(),$=F.schema,J=Lz1(D),X=$.options.strict;if(F._mongooseOptions.strict!=null)X=F._mongooseOptions.strict;if(F.model&&F.model.base.options.strictQuery!=null)X=F.model.base.options.strictQuery;if($._userProvidedOptions.strictQuery!=null)X=$._userProvidedOptions.strictQuery;if(F._mongooseOptions.strictQuery!=null)X=F._mongooseOptions.strictQuery;lm(B,$,X,J,F)};function lm(A,F,B,D,$){if(!Array.isArray(A))return;let J={};for(let X of A){if(X==null)throw new Error(`Got null array filter in ${A}`);let E=Object.keys(X).filter((Q)=>X[Q]!=null);if(E.length===0)continue;let Y=E[0];if(Y==="$and"||Y==="$or"){for(let Q of E)lm(X[Q],F,B,D,$);continue}let G=Y.indexOf("."),H=G===-1?Y:Y.substring(0,G);if(D[H]==null)continue;let W=mm(D[H]),q=dm(F,W,J),C=q!=null?q.schema:null;if(C!=null&&C.discriminators!=null&&X[H+"."+C.options.discriminatorKey])C=C.discriminators[X[H+"."+C.options.discriminatorKey]]||C,J[W]=X[H+"."+C.options.discriminatorKey];for(let Q of E){if(D[Q]===null)continue;if(Object.keys(D).length===0)continue;let K=Q.indexOf("."),U=K===-1?null:Q.substring(K),Z;if(U==null||C==null)Z=q;else U=mm(U),Z=dm(C,U,J);if(Z==null){if(!B)return;let V=U==null?W+".0":W+".0"+U;throw new Error(`Could not find path "${V}" in schema`)}if(typeof X[Q]==="object")X[Q]=wz1($,Z,X[Q]);else X[Q]=Z.castForQuery(null,X[Q])}}}});var KX=z((yS1,im)=>{var Rz1=X5(),Nz1=a8();/*!
 * ignore
 */im.exports=function A(F){if(F==null)return!1;let B=Object.keys(F),D=B.length;if(D===0)return!1;for(let $=0;$<D;++$){let J=B[$];if(J.startsWith("+"))continue;if(Rz1(F[J])&&!!F[J])if(Nz1(F[J]))return A(F[J]);else return!!F[J]}return!1}});var sm=z((hS1,nm)=>{nm.exports=function A(F,B){return F===B||B.startsWith(F+".")}});var om=z((jz1)=>{/*!
 * Module dependencies.
 */var cK=["__proto__","constructor","prototype"],zX=jz1.clone=function A(F,B){if(F===void 0||F===null)return F;if(Array.isArray(F))return jz1.cloneArray(F,B);if(F.constructor){if(/ObjectI[dD]$/.test(F.constructor.name))return typeof F.clone=="function"?F.clone():new F.constructor(F.id);if(F.constructor.name==="ReadPreference")return new F.constructor(F.mode,A(F.tags,B));if(F._bsontype=="Binary"&&F.buffer&&F.value)return typeof F.clone=="function"?F.clone():new F.constructor(F.value(!0),F.sub_type);if(F.constructor.name==="Date"||F.constructor.name==="Function")return new F.constructor(+F);if(F.constructor.name==="RegExp")return new RegExp(F);if(F.constructor.name==="Buffer")return Buffer.from(F)}if(Iz1(F))return jz1.cloneObject(F,B);if(F.valueOf)return F.valueOf()};/*!
 * ignore
 */jz1.cloneObject=function A(F,B){let D=B&&B.minimize,$={},J=Object.keys(F),X=J.length,E=!1,Y,G="",H=0;for(H=0;H<X;++H){if(G=J[H],cK.indexOf(G)!==-1)continue;if(Y=zX(F[G],B),!D||typeof Y!=="undefined")E||(E=!0),$[G]=Y}return D?E&&$:$};jz1.cloneArray=function A(F,B){let D=[],$=F.length,J=0;for(;J<$;J++)D.push(zX(F[J],B));return D};jz1.merge=function A(F,B){let D=Object.keys(B);for(let $ of D){if(cK.indexOf($)!==-1)continue;if(typeof F[$]==="undefined")F[$]=B[$];else if(jz1.isObject(B[$]))A(F[$],B[$]);else F[$]=B[$]}};jz1.mergeClone=function A(F,B){let D=Object.keys(B);for(let $ of D){if(cK.indexOf($)!==-1)continue;if(typeof F[$]==="undefined")F[$]=zX(B[$]);else if(jz1.isObject(B[$]))A(F[$],B[$]);else F[$]=zX(B[$])}};jz1.readPref=function A(F){switch(F){case"p":F="primary";break;case"pp":F="primaryPreferred";break;case"s":F="secondary";break;case"sp":F="secondaryPreferred";break;case"n":F="nearest";break}return F};jz1.readConcern=function A(F){if(typeof F==="string"){switch(F){case"l":F="local";break;case"a":F="available";break;case"m":F="majority";break;case"lz":F="linearizable";break;case"s":F="snapshot";break}F={level:F}}return F};var Pz1=Object.prototype.toString;jz1.toString=function(A){return Pz1.call(A)};var Iz1=jz1.isObject=function(A){return jz1.toString(A)=="[object Object]"};jz1.keys=Object.keys;jz1.create=typeof Object.create=="function"?Object.create:Mz1;function Mz1(A){if(arguments.length>1)throw new Error("Adding properties is not supported");function F(){}return F.prototype=A,new F}jz1.inherits=function(A,F){A.prototype=jz1.create(F.prototype),A.prototype.constructor=A};jz1.isArgumentsObject=function(A){return Object.prototype.toString.call(A)==="[object Arguments]"}});var pK=z((dS1,em)=>{function bz1(A){B.debug=B,B.default=B,B.coerce=Y,B.disable=X,B.enable=$,B.enabled=E,B.humanize=FC(),B.destroy=G,Object.keys(A).forEach((H)=>{B[H]=A[H]}),B.names=[],B.skips=[],B.formatters={};function F(H){let W=0;for(let q=0;q<H.length;q++)W=(W<<5)-W+H.charCodeAt(q),W|=0;return B.colors[Math.abs(W)%B.colors.length]}B.selectColor=F;function B(H){let W,q=null,C,Q;function K(...U){if(!K.enabled)return;let Z=K,V=Number(new Date),w=V-(W||V);if(Z.diff=w,Z.prev=W,Z.curr=V,W=V,U[0]=B.coerce(U[0]),typeof U[0]!=="string")U.unshift("%O");let R=0;U[0]=U[0].replace(/%([a-zA-Z%])/g,(j,k)=>{if(j==="%%")return"%";R++;let u=B.formatters[k];if(typeof u==="function"){let x=U[R];j=u.call(Z,x),U.splice(R,1),R--}return j}),B.formatArgs.call(Z,U),(Z.log||B.log).apply(Z,U)}if(K.namespace=H,K.useColors=B.useColors(),K.color=B.selectColor(H),K.extend=D,K.destroy=B.destroy,Object.defineProperty(K,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(q!==null)return q;if(C!==B.namespaces)C=B.namespaces,Q=B.enabled(H);return Q},set:(U)=>{q=U}}),typeof B.init==="function")B.init(K);return K}function D(H,W){let q=B(this.namespace+(typeof W==="undefined"?":":W)+H);return q.log=this.log,q}function $(H){B.save(H),B.namespaces=H,B.names=[],B.skips=[];let W=(typeof H==="string"?H:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let q of W)if(q[0]==="-")B.skips.push(q.slice(1));else B.names.push(q)}function J(H,W){let q=0,C=0,Q=-1,K=0;while(q<H.length)if(C<W.length&&(W[C]===H[q]||W[C]==="*"))if(W[C]==="*")Q=C,K=q,C++;else q++,C++;else if(Q!==-1)C=Q+1,K++,q=K;else return!1;while(C<W.length&&W[C]==="*")C++;return C===W.length}function X(){let H=[...B.names,...B.skips.map((W)=>"-"+W)].join(",");return B.enable(""),H}function E(H){for(let W of B.skips)if(J(H,W))return!1;for(let W of B.names)if(J(H,W))return!0;return!1}function Y(H){if(H instanceof Error)return H.stack||H.message;return H}function G(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return B.enable(B.load()),B}em.exports=bz1});var Fd=z((Ad,UX)=>{Ad.formatArgs=hz1;Ad.save=vz1;Ad.load=mz1;Ad.useColors=yz1;Ad.storage=dz1();Ad.destroy=(()=>{let A=!1;return()=>{if(!A)A=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();Ad.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function yz1(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let A;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&(A=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(A[1],10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function hz1(A){if(A[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+A[0]+(this.useColors?"%c ":" ")+"+"+UX.exports.humanize(this.diff),!this.useColors)return;let F="color: "+this.color;A.splice(1,0,F,"color: inherit");let B=0,D=0;A[0].replace(/%[a-zA-Z%]/g,($)=>{if($==="%%")return;if(B++,$==="%c")D=B}),A.splice(D,0,F)}Ad.log=console.debug||console.log||(()=>{});function vz1(A){try{if(A)Ad.storage.setItem("debug",A);else Ad.storage.removeItem("debug")}catch(F){}}function mz1(){let A;try{A=Ad.storage.getItem("debug")||Ad.storage.getItem("DEBUG")}catch(F){}if(!A&&typeof process!=="undefined"&&"env"in process)A=process.env.DEBUG;return A}function dz1(){try{return localStorage}catch(A){}}UX.exports=pK()(Ad);var{formatters:lz1}=UX.exports;lz1.j=function(A){try{return JSON.stringify(A)}catch(F){return"[UnexpectedJSONParseError]: "+F.message}}});var Jd=z((Dd,VX)=>{var tz1=i("tty"),ZX=i("util");Dd.init=$U1;Dd.log=FU1;Dd.formatArgs=ez1;Dd.save=BU1;Dd.load=DU1;Dd.useColors=oz1;Dd.destroy=ZX.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Dd.colors=[6,2,3,4,5,1];try{let A=(()=>{throw new Error("Cannot require module "+"supports-color");})();if(A&&(A.stderr||A).level>=2)Dd.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}catch(A){}Dd.inspectOpts=Object.keys(process.env).filter((A)=>{return/^debug_/i.test(A)}).reduce((A,F)=>{let B=F.substring(6).toLowerCase().replace(/_([a-z])/g,($,J)=>{return J.toUpperCase()}),D=process.env[F];if(/^(yes|on|true|enabled)$/i.test(D))D=!0;else if(/^(no|off|false|disabled)$/i.test(D))D=!1;else if(D==="null")D=null;else D=Number(D);return A[B]=D,A},{});function oz1(){return"colors"in Dd.inspectOpts?Boolean(Dd.inspectOpts.colors):tz1.isatty(process.stderr.fd)}function ez1(A){let{namespace:F,useColors:B}=this;if(B){let D=this.color,$="\x1B[3"+(D<8?D:"8;5;"+D),J=`  ${$};1m${F} \x1B[0m`;A[0]=J+A[0].split(`
`).join(`
`+J),A.push($+"m+"+VX.exports.humanize(this.diff)+"\x1B[0m")}else A[0]=AU1()+F+" "+A[0]}function AU1(){if(Dd.inspectOpts.hideDate)return"";return new Date().toISOString()+" "}function FU1(...A){return process.stderr.write(ZX.formatWithOptions(Dd.inspectOpts,...A)+`
`)}function BU1(A){if(A)process.env.DEBUG=A;else delete process.env.DEBUG}function DU1(){return process.env.DEBUG}function $U1(A){A.inspectOpts={};let F=Object.keys(Dd.inspectOpts);for(let B=0;B<F.length;B++)A.inspectOpts[F[B]]=Dd.inspectOpts[F[B]]}VX.exports=pK()(Dd);var{formatters:Bd}=VX.exports;Bd.o=function(A){return this.inspectOpts.colors=this.useColors,ZX.inspect(A,this.inspectOpts).split(`
`).map((F)=>F.trim()).join(" ")};Bd.O=function(A){return this.inspectOpts.colors=this.useColors,ZX.inspect(A,this.inspectOpts)}});var Xd=z((pS1,iK)=>{if(typeof process==="undefined"||process.type==="renderer"||!1||process.__nwjs)iK.exports=Fd();else iK.exports=Jd()});var Yd=z((Ed)=>{var g0=Ed;g0.distinct=function(A){if(A._fields&&Object.keys(A._fields).length>0)return"field selection and slice";let F=Object.keys(g0.distinct),B;return F.every(function(D){if(A.options[D])return B=D,!1;return!0}),B};g0.distinct.select=g0.distinct.slice=g0.distinct.sort=g0.distinct.limit=g0.distinct.skip=g0.distinct.batchSize=g0.distinct.hint=g0.distinct.tailable=!0;g0.findOneAndUpdate=g0.findOneAndRemove=function(A){let F=Object.keys(g0.findOneAndUpdate),B;return F.every(function(D){if(A.options[D])return B=D,!1;return!0}),B};g0.findOneAndUpdate.limit=g0.findOneAndUpdate.skip=g0.findOneAndUpdate.batchSize=g0.findOneAndUpdate.tailable=!0;g0.count=function(A){if(A._fields&&Object.keys(A._fields).length>0)return"field selection and slice";let F=Object.keys(g0.count),B;return F.every(function(D){if(A.options[D])return B=D,!1;return!0}),B};g0.count.slice=g0.count.batchSize=g0.count.tailable=!0});var sK=z((qU1,Gd)=>{qU1.isNode=typeof process!="undefined"&&typeof Gd=="object"&&typeof global=="object"&&typeof Buffer=="function"&&process.argv;qU1.isMongo=!qU1.isNode&&typeof printjson=="function"&&typeof ObjectId=="function"&&typeof rs=="function"&&typeof sh=="function";qU1.isBrowser=!qU1.isNode&&!qU1.isMongo&&typeof window!="undefined";qU1.type=qU1.isNode?"node":qU1.isMongo?"mongo":qU1.isBrowser?"browser":"unknown"});var JB=z((Wd,qd)=>{var aK=["find","findOne","updateMany","updateOne","replaceOne","count","distinct","findOneAndDelete","findOneAndUpdate","aggregate","findCursor","deleteOne","deleteMany"];function rK(){}for(let A=0,F=aK.length;A<F;++A){let B=aK[A];rK.prototype[B]=QU1(B)}qd.exports=Wd=rK;rK.methods=aK;function QU1(A){return function(){throw new Error("collection."+A+" not implemented")}}});var zd=z((Qd,Kd)=>{var KU1=JB();class Cd extends KU1{constructor(A){super();this.collection=A,this.collectionName=A.collectionName}async find(A,F){return this.collection.find(A,F).toArray()}async findOne(A,F){return this.collection.findOne(A,F)}async count(A,F){return this.collection.count(A,F)}async distinct(A,F,B){return this.collection.distinct(A,F,B)}async updateMany(A,F,B){return this.collection.updateMany(A,F,B)}async updateOne(A,F,B){return this.collection.updateOne(A,F,B)}async replaceOne(A,F,B){return this.collection.replaceOne(A,F,B)}async deleteOne(A,F){return this.collection.deleteOne(A,F)}async deleteMany(A,F){return this.collection.deleteMany(A,F)}async findOneAndDelete(A,F){return this.collection.findOneAndDelete(A,F)}async findOneAndUpdate(A,F,B){return this.collection.findOneAndUpdate(A,F,B)}findCursor(A,F){return this.collection.find(A,F)}}Kd.exports=Qd=Cd});var Zd=z((nS1,Ud)=>{var tK=sK();if(tK.type=="unknown")throw new Error("Unknown environment");Ud.exports=tK.isNode?zd():tK.isMongo?JB():JB()});var Fz=z((wd,Ld)=>{var zU1=i("assert"),UU1=i("util"),l1=om(),b4=Xd()("mquery");function v(A,F){if(!(this instanceof v))return new v(A,F);let B=this.constructor.prototype;if(this.op=B.op||void 0,this.options=Object.assign({},B.options),this._conditions=B._conditions?l1.clone(B._conditions):{},this._fields=B._fields?l1.clone(B._fields):void 0,this._updateDoc=B._updateDoc?l1.clone(B._updateDoc):void 0,this._path=B._path||void 0,this._distinctDoc=B._distinctDoc||void 0,this._collection=B._collection||void 0,this._traceFunction=B._traceFunction||void 0,F)this.setOptions(F);if(A)this.find(A)}var _7="$geoWithin";Object.defineProperty(v,"use$geoWithin",{get:function(){return _7=="$geoWithin"},set:function(A){if(A===!0)_7="$geoWithin";else _7="$within"}});v.prototype.toConstructor=function A(){function F(D,$){if(!(this instanceof F))return new F(D,$);v.call(this,D,$)}l1.inherits(F,v);let B=F.prototype;return B.options={},B.setOptions(this.options),B.op=this.op,B._conditions=l1.clone(this._conditions),B._fields=l1.clone(this._fields),B._updateDoc=l1.clone(this._updateDoc),B._path=this._path,B._distinctDoc=this._distinctDoc,B._collection=this._collection,B._traceFunction=this._traceFunction,F};v.prototype.setOptions=function(A){if(!(A&&l1.isObject(A)))return this;let F=l1.keys(A),B;for(let D=0;D<F.length;++D)if(B=F[D],typeof this[B]=="function"){let $=Array.isArray(A[B])?A[B]:[A[B]];this[B].apply(this,$)}else this.options[B]=A[B];return this};v.prototype.collection=function A(F){return this._collection=new v.Collection(F),this};v.prototype.collation=function(A){return this.options.collation=A,this};v.prototype.$where=function(A){return this._conditions.$where=A,this};v.prototype.where=function(){if(!arguments.length)return this;if(!this.op)this.op="find";let A=typeof arguments[0];if(A=="string"){if(this._path=arguments[0],arguments.length===2)this._conditions[this._path]=arguments[1];return this}if(A=="object"&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw new TypeError("path must be a string or object")};v.prototype.equals=function A(F){this._ensurePath("equals");let B=this._path;return this._conditions[B]=F,this};v.prototype.eq=function A(F){this._ensurePath("eq");let B=this._path;return this._conditions[B]=F,this};v.prototype.or=function A(F){let B=this._conditions.$or||(this._conditions.$or=[]);if(!Array.isArray(F))F=[F];return B.push.apply(B,F),this};v.prototype.nor=function A(F){let B=this._conditions.$nor||(this._conditions.$nor=[]);if(!Array.isArray(F))F=[F];return B.push.apply(B,F),this};v.prototype.and=function A(F){let B=this._conditions.$and||(this._conditions.$and=[]);if(!Array.isArray(F))F=[F];return B.push.apply(B,F),this};/*!
 * gt, gte, lt, lte, ne, in, nin, all, regex, size, maxDistance
 *
 *     Thing.where('type').nin(array)
 */"gt gte lt lte ne in nin all regex size maxDistance minDistance".split(" ").forEach(function(A){v.prototype[A]=function(){let F,B;if(arguments.length===1)this._ensurePath(A),B=arguments[0],F=this._path;else B=arguments[1],F=arguments[0];let D=this._conditions[F]===null||typeof this._conditions[F]==="object"?this._conditions[F]:this._conditions[F]={};return D["$"+A]=B,this}});v.prototype.mod=function(){let A,F;if(arguments.length===1)this._ensurePath("mod"),A=arguments[0],F=this._path;else if(arguments.length===2&&!Array.isArray(arguments[1]))this._ensurePath("mod"),A=[arguments[0],arguments[1]],F=this._path;else if(arguments.length===3)A=[arguments[1],arguments[2]],F=arguments[0];else A=arguments[1],F=arguments[0];let B=this._conditions[F]||(this._conditions[F]={});return B.$mod=A,this};v.prototype.exists=function(){let A,F;if(arguments.length===0)this._ensurePath("exists"),A=this._path,F=!0;else if(arguments.length===1)if(typeof arguments[0]==="boolean")this._ensurePath("exists"),A=this._path,F=arguments[0];else A=arguments[0],F=!0;else if(arguments.length===2)A=arguments[0],F=arguments[1];let B=this._conditions[A]||(this._conditions[A]={});return B.$exists=F,this};v.prototype.elemMatch=function(){if(arguments[0]==null)throw new TypeError("Invalid argument");let A,F,B;if(typeof arguments[0]==="function")this._ensurePath("elemMatch"),F=this._path,A=arguments[0];else if(l1.isObject(arguments[0]))this._ensurePath("elemMatch"),F=this._path,B=arguments[0];else if(typeof arguments[1]==="function")F=arguments[0],A=arguments[1];else if(arguments[1]&&l1.isObject(arguments[1]))F=arguments[0],B=arguments[1];else throw new TypeError("Invalid argument");if(A)B=new v,A(B),B=B._conditions;let D=this._conditions[F]||(this._conditions[F]={});return D.$elemMatch=B,this};v.prototype.within=function A(){if(this._ensurePath("within"),this._geoComparison=_7,arguments.length===0)return this;if(arguments.length===2)return this.box.apply(this,arguments);else if(2<arguments.length)return this.polygon.apply(this,arguments);let F=arguments[0];if(!F)throw new TypeError("Invalid argument");if(F.center)return this.circle(F);if(F.box)return this.box.apply(this,F.box);if(F.polygon)return this.polygon.apply(this,F.polygon);if(F.type&&F.coordinates)return this.geometry(F);throw new TypeError("Invalid argument")};v.prototype.box=function(){let A,F;if(arguments.length===3)A=arguments[0],F=[arguments[1],arguments[2]];else if(arguments.length===2)this._ensurePath("box"),A=this._path,F=[arguments[0],arguments[1]];else throw new TypeError("Invalid argument");let B=this._conditions[A]||(this._conditions[A]={});return B[this._geoComparison||_7]={$box:F},this};v.prototype.polygon=function(){let A,F;if(typeof arguments[0]=="string")A=Array.from(arguments),F=A.shift();else this._ensurePath("polygon"),F=this._path,A=Array.from(arguments);let B=this._conditions[F]||(this._conditions[F]={});return B[this._geoComparison||_7]={$polygon:A},this};v.prototype.circle=function(){let A,F;if(arguments.length===1)this._ensurePath("circle"),A=this._path,F=arguments[0];else if(arguments.length===2)A=arguments[0],F=arguments[1];else throw new TypeError("Invalid argument");if(!(("radius"in F)&&F.center))throw new Error("center and radius are required");let B=this._conditions[A]||(this._conditions[A]={}),D=F.spherical?"$centerSphere":"$center",$=this._geoComparison||_7;if(B[$]={},B[$][D]=[F.center,F.radius],"unique"in F)B[$].$uniqueDocs=!!F.unique;return this};v.prototype.near=function A(){let F,B;if(this._geoComparison="$near",arguments.length===0)return this;else if(arguments.length===1)this._ensurePath("near"),F=this._path,B=arguments[0];else if(arguments.length===2)F=arguments[0],B=arguments[1];else throw new TypeError("Invalid argument");if(!B.center)throw new Error("center is required");let D=this._conditions[F]||(this._conditions[F]={}),$=B.spherical?"$nearSphere":"$near";if(Array.isArray(B.center)){D[$]=B.center;let J="maxDistance"in B?B.maxDistance:null;if(J!=null)D.$maxDistance=J;if(B.minDistance!=null)D.$minDistance=B.minDistance}else{if(B.center.type!="Point"||!Array.isArray(B.center.coordinates))throw new Error(UU1.format("Invalid GeoJSON specified for %s",$));if(D[$]={$geometry:B.center},"maxDistance"in B)D[$].$maxDistance=B.maxDistance;if("minDistance"in B)D[$].$minDistance=B.minDistance}return this};v.prototype.intersects=function A(){if(this._ensurePath("intersects"),this._geoComparison="$geoIntersects",arguments.length===0)return this;let F=arguments[0];if(F!=null&&F.type&&F.coordinates)return this.geometry(F);throw new TypeError("Invalid argument")};v.prototype.geometry=function A(){if(!(this._geoComparison=="$within"||this._geoComparison=="$geoWithin"||this._geoComparison=="$near"||this._geoComparison=="$geoIntersects"))throw new Error("geometry() must come after `within()`, `intersects()`, or `near()");let F,B;if(arguments.length===1)this._ensurePath("geometry"),B=this._path,F=arguments[0];else throw new TypeError("Invalid argument");if(!(F.type&&Array.isArray(F.coordinates)))throw new TypeError("Invalid argument");let D=this._conditions[B]||(this._conditions[B]={});return D[this._geoComparison]={$geometry:F},this};v.prototype.select=function A(){let F=arguments[0];if(!F)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");let B=this._fields||(this._fields={}),D=typeof F,$,J;if((D=="string"||l1.isArgumentsObject(F))&&typeof F.length=="number"||Array.isArray(F)){if(D=="string")F=F.split(/\s+/);for($=0,J=F.length;$<J;++$){let X=F[$];if(!X)continue;let E=X[0]=="-"?0:1;if(E===0)X=X.substring(1);B[X]=E}return this}if(l1.isObject(F)){let X=l1.keys(F);for($=0;$<X.length;++$)B[X[$]]=F[X[$]];return this}throw new TypeError("Invalid select() argument. Must be string or object.")};v.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let A,F;if(arguments.length===1){let D=arguments[0];if(typeof D==="object"&&!Array.isArray(D)){let $=Object.keys(D),J=$.length;for(let X=0;X<J;++X)this.slice($[X],D[$[X]]);return this}this._ensurePath("slice"),A=this._path,F=arguments[0]}else if(arguments.length===2)if(typeof arguments[0]==="number")this._ensurePath("slice"),A=this._path,F=[arguments[0],arguments[1]];else A=arguments[0],F=arguments[1];else if(arguments.length===3)A=arguments[0],F=[arguments[1],arguments[2]];let B=this._fields||(this._fields={});return B[A]={$slice:F},this};v.prototype.sort=function(A){if(!A)return this;let F,B,D;this._validate("sort");let $=typeof A;if(Array.isArray(A)){B=A.length;for(F=0;F<A.length;++F){if(!Array.isArray(A[F]))throw new Error("Invalid sort() argument, must be array of arrays");ZU1(this.options,A[F][0],A[F][1])}return this}if(arguments.length===1&&$=="string"){A=A.split(/\s+/),B=A.length;for(F=0;F<B;++F){if(D=A[F],!D)continue;let J=D[0]=="-"?-1:1;if(J===-1)D=D.substring(1);Vd(this.options,D,J)}return this}if(l1.isObject(A)){let J=l1.keys(A);for(F=0;F<J.length;++F)D=J[F],Vd(this.options,D,A[D]);return this}if(typeof Map!=="undefined"&&A instanceof Map)return VU1(this.options,A),this;throw new TypeError("Invalid sort() argument. Must be a string, object, or array.")};/*!
 * @ignore
 */var oK={1:1,"-1":-1,asc:1,ascending:1,desc:-1,descending:-1};function Vd(A,F,B){if(Array.isArray(A.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let D;if(B&&B.$meta){D=A.sort||(A.sort={}),D[F]={$meta:B.$meta};return}D=A.sort||(A.sort={});let $=String(B||1).toLowerCase();if($=oK[$],!$)throw new TypeError("Invalid sort value: { "+F+": "+B+" }");D[F]=$}function ZU1(A,F,B){if(A.sort=A.sort||[],!Array.isArray(A.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let D=String(B||1).toLowerCase();if(D=oK[D],!D)throw new TypeError("Invalid sort value: [ "+F+", "+B+" ]");A.sort.push([F,D])}function VU1(A,F){if(A.sort=A.sort||new Map,!(A.sort instanceof Map))throw new TypeError("Can't mix sort syntaxes. Use either array or object or map consistently");F.forEach(function(B,D){let $=String(B||1).toLowerCase();if($=oK[$],!$)throw new TypeError("Invalid sort value: < "+D+": "+B+" >");A.sort.set(D,$)})}/*!
 * limit, skip, batchSize, comment
 *
 * Sets these associated options.
 *
 *     query.comment('feed query');
 */["limit","skip","batchSize","comment"].forEach(function(A){v.prototype[A]=function(F){return this._validate(A),this.options[A]=F,this}});v.prototype.maxTime=v.prototype.maxTimeMS=function(A){return this._validate("maxTime"),this.options.maxTimeMS=A,this};v.prototype.hint=function(){if(arguments.length===0)return this;this._validate("hint");let A=arguments[0];if(l1.isObject(A)){let F=this.options.hint||(this.options.hint={});for(let B in A)F[B]=A[B];return this}if(typeof A==="string")return this.options.hint=A,this;throw new TypeError("Invalid hint. "+A)};v.prototype.j=function A(F){return this.options.j=F,this};v.prototype.slaveOk=function(A){return this.options.slaveOk=arguments.length?!!A:!0,this};v.prototype.read=v.prototype.setReadPreference=function(A){if(arguments.length>1&&!v.prototype.read.deprecationWarningIssued)console.error("Deprecation warning: 'tags' argument is not supported anymore in Query.read() method. Please use mongodb.ReadPreference object instead."),v.prototype.read.deprecationWarningIssued=!0;return this.options.readPreference=l1.readPref(A),this};v.prototype.readConcern=v.prototype.r=function(A){return this.options.readConcern=l1.readConcern(A),this};v.prototype.tailable=function(){return this._validate("tailable"),this.options.tailable=arguments.length?!!arguments[0]:!0,this};v.prototype.writeConcern=v.prototype.w=function A(F){if(typeof F==="object"){if(typeof F.j!=="undefined")this.options.j=F.j;if(typeof F.w!=="undefined")this.options.w=F.w;if(typeof F.wtimeout!=="undefined")this.options.wtimeout=F.wtimeout}else this.options.w=F==="m"?"majority":F;return this};v.prototype.wtimeout=v.prototype.wTimeout=function A(F){return this.options.wtimeout=F,this};v.prototype.merge=function(A){if(!A)return this;if(!v.canMerge(A))throw new TypeError("Invalid argument. Expected instanceof mquery or plain object");if(A instanceof v){if(A._conditions)l1.merge(this._conditions,A._conditions);if(A._fields)this._fields||(this._fields={}),l1.merge(this._fields,A._fields);if(A.options)this.options||(this.options={}),l1.merge(this.options,A.options);if(A._updateDoc)this._updateDoc||(this._updateDoc={}),l1.mergeClone(this._updateDoc,A._updateDoc);if(A._distinctDoc)this._distinctDoc=A._distinctDoc;return this}return l1.merge(this._conditions,A),this};v.prototype.find=function(A){if(this.op="find",v.canMerge(A))this.merge(A);return this};v.prototype._find=async function A(){let F=this._conditions,B=this._optionsForExec();if(this.$useProjection)B.projection=this._fieldsForExec();else B.fields=this._fieldsForExec();return b4("_find",this._collection.collectionName,F,B),this._collection.find(F,B)};v.prototype.cursor=function A(F){if(this.op){if(this.op!=="find")throw new TypeError(".cursor only support .find method")}else this.find(F);let B=this._conditions,D=this._optionsForExec();if(this.$useProjection)D.projection=this._fieldsForExec();else D.fields=this._fieldsForExec();return b4("findCursor",this._collection.collectionName,B,D),this._collection.findCursor(B,D)};v.prototype.findOne=function(A){if(this.op="findOne",v.canMerge(A))this.merge(A);return this};v.prototype._findOne=async function A(){let F=this._conditions,B=this._optionsForExec();if(this.$useProjection)B.projection=this._fieldsForExec();else B.fields=this._fieldsForExec();return b4("findOne",this._collection.collectionName,F,B),this._collection.findOne(F,B)};v.prototype.count=function(A){if(this.op="count",this._validate(),v.canMerge(A))this.merge(A);return this};v.prototype._count=async function A(){let F=this._conditions,B=this._optionsForExec();return b4("count",this._collection.collectionName,F,B),this._collection.count(F,B)};v.prototype.distinct=function(A,F){if(this.op="distinct",this._validate(),!F&&typeof A==="string")F=A,A=void 0;if(typeof F=="string")this._distinctDoc=F;if(v.canMerge(A))this.merge(A);return this};v.prototype._distinct=async function A(){if(!this._distinctDoc)throw new Error("No value for `distinct` has been declared");let F=this._conditions,B=this._optionsForExec();return b4("distinct",this._collection.collectionName,F,B),this._collection.distinct(this._distinctDoc,F,B)};v.prototype.updateMany=function A(F,B,D){if(arguments.length===1)B=F,F=D=void 0;return eK(this,"updateMany",F,B,D)};v.prototype._updateMany=async function(){return Az(this,"updateMany")};v.prototype.updateOne=function A(F,B,D){if(arguments.length===1)B=F,F=D=void 0;return eK(this,"updateOne",F,B,D)};v.prototype._updateOne=async function(){return Az(this,"updateOne")};v.prototype.replaceOne=function A(F,B,D){if(arguments.length===1)B=F,F=D=void 0;return this.setOptions({overwrite:!0}),eK(this,"replaceOne",F,B,D)};v.prototype._replaceOne=async function(){return Az(this,"replaceOne")};/*!
 * Internal helper for updateMany, updateOne
 */function eK(A,F,B,D,$){if(A.op=F,v.canMerge(B))A.merge(B);if(D)A._mergeUpdate(D);if(l1.isObject($))A.setOptions($);return A}async function Az(A,F){let B=A._optionsForExec(),D=A._conditions,$=A._updateForExec();return b4("update",A._collection.collectionName,D,$,B),A._collection[F](D,$,B)}v.prototype.deleteOne=function(A){if(this.op="deleteOne",v.canMerge(A))this.merge(A);return this};v.prototype._deleteOne=async function(){let A=this._optionsForExec();delete A.justOne;let F=this._conditions;return b4("deleteOne",this._collection.collectionName,F,A),this._collection.deleteOne(F,A)};v.prototype.deleteMany=function(A){if(this.op="deleteMany",v.canMerge(A))this.merge(A);return this};v.prototype._deleteMany=async function(){let A=this._optionsForExec();delete A.justOne;let F=this._conditions;return b4("deleteOne",this._collection.collectionName,F,A),this._collection.deleteMany(F,A)};v.prototype.findOneAndUpdate=function(A,F,B){if(this.op="findOneAndUpdate",this._validate(),arguments.length===1)F=A,A=B=void 0;if(v.canMerge(A))this.merge(A);if(F)this._mergeUpdate(F);return B&&this.setOptions(B),this};v.prototype._findOneAndUpdate=async function(){let A=this._conditions,F=this._updateForExec(),B=this._optionsForExec();return this._collection.findOneAndUpdate(A,F,B)};v.prototype.findOneAndRemove=v.prototype.findOneAndDelete=function(A,F){if(this.op="findOneAndRemove",this._validate(),v.canMerge(A))this.merge(A);return F&&this.setOptions(F),this};v.prototype._findOneAndRemove=async function(){let A=this._optionsForExec(),F=this._conditions;return this._collection.findOneAndDelete(F,A)};v.prototype.setTraceFunction=function(A){return this._traceFunction=A,this};v.prototype.exec=async function A(F){if(typeof F==="string")this.op=F;zU1.ok(this.op,"Missing query type: (find, etc)");let B="_"+this.op;if(typeof this[B]!=="function")throw new TypeError(`this[${B}] is not a function`);return this[B]()};v.prototype.then=async function(A,F){return this.exec().then(A,F)};v.prototype.cursor=function(){if(this.op!="find")throw new Error("cursor() is only available for find");let A=this._conditions,F=this._optionsForExec();if(this.$useProjection)F.projection=this._fieldsForExec();else F.fields=this._fieldsForExec();return b4("cursor",this._collection.collectionName,A,F),this._collection.findCursor(A,F)};v.prototype.selected=function A(){return!!(this._fields&&Object.keys(this._fields).length>0)};v.prototype.selectedInclusively=function A(){if(!this._fields)return!1;let F=Object.keys(this._fields);if(F.length===0)return!1;for(let B=0;B<F.length;++B){let D=F[B];if(this._fields[D]===0)return!1;if(this._fields[D]&&typeof this._fields[D]==="object"&&this._fields[D].$meta)return!1}return!0};v.prototype.selectedExclusively=function A(){if(!this._fields)return!1;let F=Object.keys(this._fields);if(F.length===0)return!1;for(let B=0;B<F.length;++B){let D=F[B];if(this._fields[D]===0)return!0}return!1};v.prototype._mergeUpdate=function(A){if(!this._updateDoc)this._updateDoc={};if(A instanceof v){if(A._updateDoc)l1.mergeClone(this._updateDoc,A._updateDoc)}else l1.mergeClone(this._updateDoc,A)};v.prototype._optionsForExec=function(){return l1.clone(this.options)};v.prototype._fieldsForExec=function(){return l1.clone(this._fields)};v.prototype._updateForExec=function(){let A=l1.clone(this._updateDoc),F=l1.keys(A),B={};for(let D of F){if(this.options.overwrite){B[D]=A[D];continue}if(D[0]!=="$"){if(!B.$set)if(A.$set)B.$set=A.$set;else B.$set={};if(B.$set[D]=A[D],!~F.indexOf("$set"))F.push("$set")}else if(D==="$set"){if(!B.$set)B[D]=A[D]}else B[D]=A[D]}return this._compiledUpdate=B,B};v.prototype._ensurePath=function(A){if(!this._path){let F=A+"() must be used after where() when called with these arguments";throw new Error(F)}};/*!
 * Permissions
 */v.permissions=Yd();v._isPermitted=function(A,F){let B=v.permissions[F];if(!B)return!0;return B[A]!==!0};v.prototype._validate=function(A){let F,B;if(A===void 0){if(B=v.permissions[this.op],typeof B!="function")return!0;F=B(this)}else if(!v._isPermitted(A,this.op))F=A;if(F)throw new Error(F+" cannot be used with "+this.op)};v.canMerge=function(A){return A instanceof v||l1.isObject(A)};v.setGlobalTraceFunction=function(A){v.traceFunction=A};/*!
 * Exports.
 */v.utils=l1;v.env=sK();v.Collection=Zd();v.BaseCollection=JB();Ld.exports=wd=v});var Bz=z((sS1,Rd)=>{Rd.exports=function A(F,B){if(typeof F==="string")F=F.split(/\s+/);if(!Array.isArray(F)&&Object.prototype.toString.call(F)!=="[object Arguments]")return F;let $=F.length,J={};for(let X=0;X<$;++X){let E=F[X];if(!E)continue;let Y=E[0]=="-"?0:1;if(!B&&Y===0)E=E.substring(1);J[E]=Y}return J}});var Id=z((aS1,Pd)=>{Pd.exports=function A(F,B){let D=Object.keys(F).map(($)=>Object.keys(F[$])).reduce(($,J)=>$.concat(J),[]);return B.filter(($)=>{return Nd($,D)})};function Nd(A,F){let B=Object.keys(A)[0];if(B==="$and"||B==="$or"){if(!Array.isArray(A[B]))return!1;return A[B].find((J)=>Nd(J,F))!=null}let D=B.indexOf("."),$=D===-1?B:B.slice(0,D);return F.find((J)=>J.includes("$["+$+"]"))!=null}});var LX=z((rS1,Md)=>{/*!
 * ignore
 */Md.exports=function A(F){if(typeof F!=="object"||F===null)return!1;let B=Object.keys(F),D=B.length;for(let $=0;$<D;++$)if(B[$][0]==="$")return!0;return!1}});var Dz=z((tS1,jd)=>{var wU1=LX(),{trustedSymbol:LU1}=r8();jd.exports=function A(F){if(F==null||typeof F!=="object")return F;if(Array.isArray(F)){for(let D of F)A(D);return F}let B=Object.keys(F);for(let D of B){let $=F[D];if($!=null&&$[LU1])continue;if(D==="$and"||D==="$or"){A($);continue}if(wU1($)){let J=Object.keys($);if(J.length===1&&J[0]==="$eq")continue;F[D]={$eq:F[D]}}}return F}});var kd=z((oS1,Td)=>{Td.exports=function A(F){if(F==null)return;let B=Object.keys(F);for(let D=0;D<B.length;++D)if(typeof F[B[D]]==="string")F[B[D]]=1}});var Sd=z((eS1,ud)=>{var RU1=E5(),NU1=KX();/*!
 * ignore
 */ud.exports=function A(F,B,D){if(D==null)return;let $=Object.keys(D);if(B=B||{},NU1(F))for(let J of $){if(!Od(B,J))F[J]=1;else if(B[J]===0)delete F[J];let X=D[J]?.refPath;if(typeof X==="string"){if(!Od(B,X))F[X]=1;else if(B[X]===0)delete F[X]}}else if(RU1(F))for(let J of $){if(B[J]==null)delete F[J];let X=D[J]?.refPath;if(typeof X==="string"&&B[X]==null)delete F[X]}};/*!
 * ignore
 */function Od(A,F){let B=F.split("."),D=B.length,$=B[0];for(let J=1;J<D;++J){if(A[$]!=null||A[$+".$"]!=null)return!0;$+="."+B[J]}return A[$]!=null||A[$+".$"]!=null}});var bd=z((Af1,gd)=>{/*!
 * Module dependencies.
 */var fd=V7(),PU1=_F(),_d=J5().flatten,xd=J5().modifiedPaths;gd.exports=function(A,F,B,D,$){let J=Object.keys(B||{}),X={},E={},Y={},G={},H=J.length,W=!1,q={},C,Q,K;for(K=0;K<H;++K)if(J[K].startsWith("$")){if(W=!0,J[K]==="$push"||J[K]==="$addToSet"){let p=Object.keys(B[J[K]]);for(let A1=0;A1<p.length;++A1)if(C=B[J[K]][p[A1]],C&&C.$each)G[p[A1]]=(G[p[A1]]||[]).concat(C.$each);else G[p[A1]]=(G[p[A1]]||[]).concat([C]);continue}xd(B[J[K]],"",q);let T=_d(B[J[K]],null,null,F),y=Object.keys(T),g=y.length;for(let p=0;p<g;++p){let A1=PU1(y[p]);if(Q=J[K],A1.includes("$"))continue;if(Q==="$set"||Q==="$setOnInsert"||Q==="$pull"||Q==="$pullAll")E[A1]=T[y[p]],Y[A1]=Q==="$pull"||Q==="$pullAll";else if(Q==="$unset")E[A1]=void 0;X[A1]=!0}}if(!W)xd(B,"",q),E=_d(B,null,null,F),X=Object.keys(E);let U=Object.keys(E),Z=U.length,V=[],w=[],R=[],I=A;function j(T,y){let g=F._getSchema(U[T]);if(g==null)return;if(g.instance==="Mixed"&&g.path!==U[T])return;if(y&&Array.isArray(y.$in))y.$in.forEach((p,A1)=>{V.push(function(L0){g.doValidate(p,function(F2){if(F2)F2.path=U[A1]+".$in."+A1,w.push(F2);L0(null)},I,{updateValidator:!0})})});else{if(Y[U[T]]&&g.$isMongooseArray)return;if(g.$isMongooseDocumentArrayElement&&y!=null&&y.$__!=null)R.push(U[T]),V.push(function(p){g.doValidate(y,function(A1){if(A1)if(A1.errors)for(let L0 of Object.keys(A1.errors)){let F2=A1.errors[L0];F2.path=U[T]+"."+L0,w.push(F2)}else A1.path=U[T],w.push(A1);return p(null)},I,{updateValidator:!0})});else V.push(function(p){for(let A1 of R)if(U[T].startsWith(A1+"."))return p(null);if(g.$isSingleNested)R.push(U[T]);g.doValidate(y,function(A1){if(g.schema!=null&&g.schema.options.storeSubdocValidationError===!1&&A1 instanceof fd)return p(null);if(A1)A1.path=U[T],w.push(A1);p(null)},I,{updateValidator:!0})})}}for(K=0;K<Z;++K)j(K,E[U[K]]);let k=Object.keys(G);for(let T of k){let y=F._getSchema(T);if(y&&y.$isMongooseDocumentArray)V.push(function(g){y.doValidate(G[T],x(T,w,g),D&&D.context==="query"?A:null)});else{y=F._getSchema(T+".0");for(let g of G[T])V.push(function(p){y.doValidate(g,x(T,w,p),D&&D.context==="query"?A:null,{updateValidator:!0})})}}if($!=null){let T=V.length;if(T===0)return u($);for(let y of V)y(function(){if(--T<=0)u($)});return}return function(T){let y=V.length;if(y===0)return u(T);for(let g of V)g(function(){if(--y<=0)u(T)})};function u(T){if(w.length){let y=new fd(null);for(let g of w)y.addError(g.path,g);return T(y)}T(null)}function x(T,y,g){return function(p){if(p)p.path=T,y.push(p);g(null)}}}});var PX=z((Ff1,td)=>{/*!
 * Module dependencies.
 */var EB=_2(),IU1=m$(),Jz=U7(),y2=T1(),M9=a$(),yd=um(),hd=V7(),{applyGlobalMaxTimeMS:YB,applyGlobalDiskUse:GB}=mK(),MU1=FQ(),jU1=dK(),TU1=lK(),kU1=T7(),OU1=pm(),NX=bF(),uU1=MK(),z6=I0(),SU1=$3(),HB=jF(),fU1=I3().internalToObjectOptions,_U1=E5(),xU1=KX(),gU1=BJ(),vd=sm(),dd=_6(),g6=Fz(),bU1=Bz(),yU1=Id(),hU1=Dz(),vU1=kd(),mU1=Sd(),ld=TK(),RX=z7(),dU1=bd(),XB=i("util"),C0=Q1(),lU1=PJ().queryMiddlewareFunctions,cU1=new Set(["allowDiskUse","batchSize","collation","comment","explain","hint","j","lean","limit","maxTimeMS","populate","projection","read","select","skip","slice","sort","tailable","w","writeConcern","wtimeout"]),pU1=new Map([["countDocuments","_countDocuments"],["distinct","__distinct"],["estimatedDocumentCount","_estimatedDocumentCount"],["find","_find"],["findOne","_findOne"],["findOneAndReplace","_findOneAndReplace"],["findOneAndUpdate","_findOneAndUpdate"],["replaceOne","_replaceOne"],["updateMany","_updateMany"],["updateOne","_updateOne"],["deleteMany","_deleteMany"],["deleteOne","_deleteOne"],["findOneAndDelete","_findOneAndDelete"]]);function h(A,F,B,D){if(!this._mongooseOptions)this._mongooseOptions={};F=F||{},this._transforms=[],this._hooks=new Jz,this._executionStack=null;let $=Object.keys(F);for(let X of $)this._mongooseOptions[X]=F[X];if(D)this.mongooseCollection=D;if(B)this.model=B,this.schema=B.schema;if(this.model&&this.model._mapreduce)this.lean();if(g6.call(this,null,F),D)this.collection(D);if(A)this.find(A);this.options=this.options||{},this.$useProjection=!0;let J=this&&this.schema&&this.schema.options&&this.schema.options.collation||null;if(J!=null)this.options.collation=J}function cd(A){if(A==null)return!0;if(typeof A!=="object")return!0;if(Object.keys(A).length===0)return!0;for(let F of["$and","$or","$nor"])if(Array.isArray(A[F])){if(A[F].length===0||A[F].every((B)=>cd(B)))return!0}return!1}function M5(A,F){if(F&&F.requireFilter&&cd(A))throw new Error("Empty or invalid filter not allowed with requireFilter enabled")}/*!
 * inherit mquery
 */h.prototype=new g6;h.prototype.constructor=h;h.prototype.count=void 0;h.prototype.findOneAndRemove=void 0;h.base=g6.prototype;/*!
 * Overwrite mquery's `_distinct`, because Mongoose uses that name
 * to store the field to apply distinct on.
 */Object.defineProperty(h.prototype,"_distinct",{configurable:!0,writable:!0,enumerable:!0,value:void 0});h.use$geoWithin=g6.use$geoWithin;h.prototype.toConstructor=function A(){let F=this.model,B=this.mongooseCollection,D=function(X,E){if(!(this instanceof D))return new D(X,E);this._mongooseOptions=z6($._mongooseOptions),h.call(this,X,E||null,F,B)};XB.inherits(D,F.Query);let $=D.prototype;$.options={};let J=Object.assign({},this.options);if(J.sort!=null)$.sort(J.sort),delete J.sort;return $.setOptions(J),$.op=this.op,$._validateOp(),$._conditions=z6(this._conditions),$._fields=z6(this._fields),$._update=z6(this._update,{flattenDecimals:!1}),$._path=this._path,$._distinct=this._distinct,$._collection=this._collection,$._mongooseOptions=this._mongooseOptions,D};h.prototype.clone=function(){let A=this.model,F=this.mongooseCollection,B=new this.model.Query({},{},A,F),D=Object.assign({},this.options);if(D.sort!=null)B.sort(D.sort),delete D.sort;return B.setOptions(D),B.op=this.op,B._validateOp(),B._conditions=z6(this._conditions),B._fields=z6(this._fields),B._update=z6(this._update,{flattenDecimals:!1}),B._path=this._path,B._distinct=this._distinct,B._collection=this._collection,B._mongooseOptions=this._mongooseOptions,B};h.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let A,F;if(arguments.length===1){let D=arguments[0];if(typeof D==="object"&&!Array.isArray(D)){let $=Object.keys(D),J=$.length;for(let X=0;X<J;++X)this.slice($[X],D[$[X]]);return this}this._ensurePath("slice"),A=this._path,F=arguments[0]}else if(arguments.length===2)if(typeof arguments[0]==="number")this._ensurePath("slice"),A=this._path,F=[arguments[0],arguments[1]];else A=arguments[0],F=arguments[1];else if(arguments.length===3)A=arguments[0],F=[arguments[1],arguments[2]];let B={};return B[A]={$slice:F},this.select(B),this};/*!
 * ignore
 */var iU1=new Set(lU1);h.prototype._validateOp=function(){if(this.op!=null&&!iU1.has(this.op))this.error(new Error('Query has invalid `op`: "'+this.op+'"'))};h.prototype.mod=function(){let A,F;if(arguments.length===1)this._ensurePath("mod"),A=arguments[0],F=this._path;else if(arguments.length===2&&!Array.isArray(arguments[1]))this._ensurePath("mod"),A=[arguments[0],arguments[1]],F=this._path;else if(arguments.length===3)A=[arguments[1],arguments[2]],F=arguments[0];else A=arguments[1],F=arguments[0];let B=this._conditions[F]||(this._conditions[F]={});return B.$mod=A,this};h.prototype.limit=function A(F){if(this._validate("limit"),typeof F==="string")try{F=NX(F)}catch(B){throw new EB("Number",F,"limit")}return this.options.limit=F,this};h.prototype.skip=function A(F){if(this._validate("skip"),typeof F==="string")try{F=NX(F)}catch(B){throw new EB("Number",F,"skip")}return this.options.skip=F,this};h.prototype.projection=function(A){if(arguments.length===0)return this._fields;return this._fields={},this._userProvidedFields={},this.select(A),this._fields};h.prototype.select=function A(){let F=arguments[0];if(!F)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");let B=this._fields||(this._fields={}),D=this._userProvidedFields||(this._userProvidedFields={}),$=void 0;if(this.model!=null&&C0.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection"))$=this.model.db.options.sanitizeProjection;else if(this.model!=null&&C0.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection"))$=this.model.base.options.sanitizeProjection;else $=this._mongooseOptions.sanitizeProjection;function J(X){return typeof X==="string"&&$?X=1:X}if(F=bU1(F,!0),C0.isObject(F)){if(this.selectedInclusively())Object.entries(F).forEach(([X,E])=>{if(E){if(B["-"+X]!=null)delete B["-"+X];B[X]=D[X]=J(E)}else Object.keys(D).forEach((Y)=>{if(vd(X,Y))delete B[Y],delete D[Y]})});else if(this.selectedExclusively())Object.entries(F).forEach(([X,E])=>{if(!E){if(B["+"+X]!=null)delete B["+"+X];B[X]=D[X]=J(E)}else Object.keys(D).forEach((Y)=>{if(vd(X,Y))delete B[Y],delete D[Y]})});else{let X=Object.keys(F);for(let E=0;E<X.length;++E){let Y=F[X[E]],G=X[E];B[G]=J(Y),D[G]=J(Y)}}return this}throw new TypeError("Invalid select() argument. Must be string or object.")};h.prototype.schemaLevelProjections=function A(F){return this._mongooseOptions.schemaLevelProjections=F,this};h.prototype.sanitizeProjection=function A(F){return this._mongooseOptions.sanitizeProjection=F,this};h.prototype.read=function A(F,B){if(typeof F==="string")F=MU1(F),this.options.readPreference={mode:F,tags:B};else this.options.readPreference=F;return this};h.prototype.toString=function A(){if(this.op==="count"||this.op==="countDocuments"||this.op==="find"||this.op==="findOne"||this.op==="deleteMany"||this.op==="deleteOne"||this.op==="findOneAndDelete"||this.op==="remove")return`${this.model.modelName}.${this.op}(${XB.inspect(this._conditions)})`;if(this.op==="distinct")return`${this.model.modelName}.distinct('${this._distinct}', ${XB.inspect(this._conditions)})`;if(this.op==="findOneAndReplace"||this.op==="findOneAndUpdate"||this.op==="replaceOne"||this.op==="update"||this.op==="updateMany"||this.op==="updateOne")return`${this.model.modelName}.${this.op}(${XB.inspect(this._conditions)}, ${XB.inspect(this._update)})`;return`${this.model.modelName}.${this.op}()`};h.prototype.session=function A(F){if(F==null)delete this.options.session;return this.options.session=F,this};h.prototype.writeConcern=function A(F){if(F==null)return delete this.options.writeConcern,this;return this.options.writeConcern=F,this};h.prototype.w=function A(F){if(F==null)delete this.options.w;if(this.options.writeConcern!=null)this.options.writeConcern.w=F;else this.options.w=F;return this};h.prototype.j=function A(F){if(F==null)delete this.options.j;if(this.options.writeConcern!=null)this.options.writeConcern.j=F;else this.options.j=F;return this};h.prototype.wtimeout=function A(F){if(F==null)delete this.options.wtimeout;if(this.options.writeConcern!=null)this.options.writeConcern.wtimeout=F;else this.options.wtimeout=F;return this};h.prototype.getOptions=function(){return this.options};h.prototype.setOptions=function(A,F){if(F){if(this._mongooseOptions=A&&z6(A)||{},this.options=A||{},"populate"in A)this.populate(this._mongooseOptions);return this}if(A==null)return this;if(typeof A!=="object")throw new Error('Options must be an object, got "'+A+'"');if(A=Object.assign({},A),Array.isArray(A.populate)){let B=A.populate;delete A.populate;let D=B.length;for(let $=0;$<D;++$)this.populate(B[$])}if("setDefaultsOnInsert"in A)this._mongooseOptions.setDefaultsOnInsert=A.setDefaultsOnInsert,delete A.setDefaultsOnInsert;if("overwriteDiscriminatorKey"in A)this._mongooseOptions.overwriteDiscriminatorKey=A.overwriteDiscriminatorKey,delete A.overwriteDiscriminatorKey;if("overwriteImmutable"in A)this._mongooseOptions.overwriteImmutable=A.overwriteImmutable,delete A.overwriteImmutable;if("sanitizeProjection"in A){if(A.sanitizeProjection&&!this._mongooseOptions.sanitizeProjection)vU1(this._fields);this._mongooseOptions.sanitizeProjection=A.sanitizeProjection,delete A.sanitizeProjection}if("sanitizeFilter"in A)this._mongooseOptions.sanitizeFilter=A.sanitizeFilter,delete A.sanitizeFilter;if("timestamps"in A)this._mongooseOptions.timestamps=A.timestamps,delete A.timestamps;if("defaults"in A)this._mongooseOptions.defaults=A.defaults;if("translateAliases"in A)this._mongooseOptions.translateAliases=A.translateAliases,delete A.translateAliases;if("schemaLevelProjections"in A)this._mongooseOptions.schemaLevelProjections=A.schemaLevelProjections,delete A.schemaLevelProjections;if(A.lean==null&&this.schema&&"lean"in this.schema.options)this._mongooseOptions.lean=this.schema.options.lean;if(typeof A.limit==="string")try{A.limit=NX(A.limit)}catch(B){throw new EB("Number",A.limit,"limit")}if(typeof A.skip==="string")try{A.skip=NX(A.skip)}catch(B){throw new EB("Number",A.skip,"skip")}for(let B of Object.keys(A))if(cU1.has(B)){let D=Array.isArray(A[B])?A[B]:[A[B]];this[B].apply(this,D)}else this.options[B]=A[B];return this};h.prototype.explain=function A(F){if(arguments.length===0)this.options.explain=!0;else if(F===!1)delete this.options.explain;else this.options.explain=F;return this};h.prototype.allowDiskUse=function(A){if(arguments.length===0)this.options.allowDiskUse=!0;else if(A===!1)delete this.options.allowDiskUse;else this.options.allowDiskUse=A;return this};h.prototype.maxTimeMS=function(A){return this.options.maxTimeMS=A,this};h.prototype.getFilter=function(){return this._conditions};h.prototype.getQuery=function(){return this._conditions};h.prototype.setQuery=function(A){this._conditions=A};h.prototype.getUpdate=function(){return this._update};h.prototype.setUpdate=function(A){this._update=A};h.prototype._fieldsForExec=function(){if(this._fields==null)return null;if(Object.keys(this._fields).length===0)return null;return z6(this._fields)};h.prototype._updateForExec=function(){let A=z6(this._update,{transform:!1,depopulate:!0}),F=Object.keys(A),B=F.length,D={};while(B--){let $=F[B];if($[0]!=="$"){if(!D.$set)if(A.$set)D.$set=A.$set;else D.$set={};if(D.$set[$]=A[$],F.splice(B,1),!~F.indexOf("$set"))F.push("$set")}else if($==="$set"){if(!D.$set)D[$]=A[$]}else D[$]=A[$]}return D};h.prototype._optionsForExec=function(A){let F=z6(this.options);if(delete F.populate,A=A||this.model,!A)return F;jU1(A.schema,F),TU1(A.schema,F);let B=this.model?.db?.base.transactionAsyncLocalStorage?.getStore();if(!this.options.hasOwnProperty("session")&&B?.session!=null)F.session=B.session;let D=A&&A.schema&&A.schema.options&&A.schema.options.read;if(!("readPreference"in F)&&D)F.readPreference=D;if(F.upsert!==void 0)F.upsert=!!F.upsert;if(F.writeConcern){if(F.j)F.writeConcern.j=F.j,delete F.j;if(F.w)F.writeConcern.w=F.w,delete F.w;if(F.wtimeout)F.writeConcern.wtimeout=F.wtimeout,delete F.wtimeout}if(this._applyPaths(),this._fields!=null){this._fields=this._castFields(this._fields);let $=this._fieldsForExec();if($!=null)F.projection=$}return F};h.prototype.lean=function(A){return this._mongooseOptions.lean=arguments.length?A:!0,this};h.prototype.set=function(A,F){if(typeof A==="object"){let B=Object.keys(A);for(let D of B)this.set(D,A[D]);return this}if(this._update=this._update||{},A in this._update)delete this._update[A];return this._update.$set=this._update.$set||{},this._update.$set[A]=F,this};h.prototype.get=function A(F){let B=this._update;if(B==null)return;let D=B.$set;if(D==null)return B[F];if(C0.hasUserDefinedProperty(B,F))return B[F];if(C0.hasUserDefinedProperty(D,F))return D[F];return};h.prototype.error=function A(F){if(arguments.length===0)return this._error;return this._error=F,this};h.prototype._unsetCastError=function A(){if(this._error==null||!(this._error instanceof EB))return;return this.error(null)};h.prototype.mongooseOptions=function(A){if(arguments.length>0)this._mongooseOptions=A;return this._mongooseOptions};h.prototype._castConditions=function(){let A=void 0;if(this.model?.db.options?.sanitizeFilter!=null)A=this.model.db.options.sanitizeFilter;else if(this.model?.base.options?.sanitizeFilter!=null)A=this.model.base.options.sanitizeFilter;else A=this._mongooseOptions.sanitizeFilter;if(A)hU1(this._conditions);try{this.cast(this.model),this._unsetCastError()}catch(F){this.error(F)}};/*!
 * ignore
 */function pd(A){try{OU1(A)}catch(F){A.error(F)}}h.prototype._find=async function A(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();let F=this._mongooseOptions,B=this._userProvidedFields||{};YB(this.options,this.model.db.options,this.model.base.options),GB(this.options,this.model.db.options,this.model.base.options);let D={session:this&&this.options&&this.options.session||null,lean:F.lean||null},$=this._optionsForExec(),J=this._conditions,X=$.projection,E=await this.mongooseCollection.find(J,$);if($.explain)return E.explain();let Y=await E.toArray();if(Y.length===0)return Y;if(!F.populate){let H=this.schema.options.versionKey;if(F.lean&&F.lean.versionKey===!1&&H)Y.forEach((W)=>{if(H in W)delete W[H]});return F.lean?nd(this.model.schema,Y,null,D):this._completeMany(Y,X,B,D)}let G=HB.preparePopulationOptionsMQ(this,F);if(F.lean)return this.model.populate(Y,G);return Y=await this._completeMany(Y,X,B,D),await this.model.populate(Y,G),Y};h.prototype.find=function(A){if(typeof A==="function"||typeof arguments[1]==="function")throw new y2("Query.prototype.find() no longer accepts a callback");if(this.op="find",g6.canMerge(A))this.merge(A),WB(this);else if(A!=null)this.error(new M9(A,"filter","find"));return this};h.prototype.merge=function(A){if(!A)return this;let F={overwrite:!0};if(A instanceof h){if(A._conditions){if(F.omit={},this._conditions&&this._conditions.$and&&A._conditions.$and)F.omit.$and=!0,this._conditions.$and=this._conditions.$and.concat(A._conditions.$and);if(this._conditions&&this._conditions.$or&&A._conditions.$or)F.omit.$or=!0,this._conditions.$or=this._conditions.$or.concat(A._conditions.$or);C0.merge(this._conditions,A._conditions,F)}if(A._fields)this._fields||(this._fields={}),C0.merge(this._fields,A._fields,F);if(A.options)this.options||(this.options={}),C0.merge(this.options,A.options,F);if(A._update)this._update||(this._update={}),C0.mergeClone(this._update,A._update);if(A._distinct)this._distinct=A._distinct;return C0.merge(this._mongooseOptions,A._mongooseOptions),this}else if(this.model!=null&&A instanceof this.model.base.Types.ObjectId)return C0.merge(this._conditions,{_id:A},F),this;else if(A&&A.$__)A=A.toObject(fU1);if(F.omit={},Array.isArray(A.$and)){if(F.omit.$and=!0,!this._conditions)this._conditions={};this._conditions.$and=(this._conditions.$and||[]).concat(A.$and.map((B)=>C0.isPOJO(B)?C0.merge({},B):B))}if(Array.isArray(A.$or)){if(F.omit.$or=!0,!this._conditions)this._conditions={};this._conditions.$or=(this._conditions.$or||[]).concat(A.$or.map((B)=>C0.isPOJO(B)?C0.merge({},B):B))}return C0.merge(this._conditions,A,F),this};h.prototype.collation=function(A){if(this.options==null)this.options={};return this.options.collation=A,this};h.prototype._completeOne=function(A,F,B,D){if(!A&&!this.options.includeResultMetadata)return D(null,null);let $=this.model,J=this._userProvidedFields||{},X=this._mongooseOptions,E=this.options;if(!E.lean&&X.lean)E.lean=X.lean;if(E.explain)return D(null,A);if(!X.populate){let G=this.schema.options.versionKey;if(X.lean&&X.lean.versionKey===!1&&G){if(G in A)delete A[G]}return X.lean?Xz($.schema,A,null,F,E,D):md($,A,F,E,B,J,null,D)}let Y=HB.preparePopulationOptionsMQ(this,this._mongooseOptions);if(X.lean)return $.populate(A,Y).then((G)=>{Xz($.schema,G,null,F,E,D)},(G)=>{D(G)});md($,A,F,E,B,J,[],(G,H)=>{if(G!=null)return D(G);$.populate(H,Y).then((W)=>{D(null,W)},(W)=>{D(W)})})};h.prototype._completeMany=async function A(F,B,D,$){let J=this.model;return Promise.all(F.map((X)=>new Promise((E,Y)=>{let G=X;if(X=HB.createModel(J,X,B,D),$.session!=null)X.$session($.session);X.$init(G,$,(H)=>{if(H!=null)return Y(H);E(X)})})))};h.prototype._findOne=async function A(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();YB(this.options,this.model.db.options,this.model.base.options),GB(this.options,this.model.db.options,this.model.base.options);let F=this._optionsForExec(),B=await this.mongooseCollection.findOne(this._conditions,F);return new Promise((D,$)=>{this._completeOne(B,null,F.projection,(J,X)=>{if(J)return $(J);D(X)})})};h.prototype.findOne=function(A,F,B){if(typeof A==="function"||typeof F==="function"||typeof B==="function"||typeof arguments[3]==="function")throw new y2("Query.prototype.findOne() no longer accepts a callback");if(this.op="findOne",this._validateOp(),B)this.setOptions(B);if(F)this.select(F);if(g6.canMerge(A))this.merge(A),WB(this);else if(A!=null)this.error(new M9(A,"filter","findOne"));return this};h.prototype._countDocuments=async function A(){this._applyTranslateAliases();try{this.cast(this.model)}catch(D){this.error(D)}if(this.error())throw this.error();YB(this.options,this.model.db.options,this.model.base.options),GB(this.options,this.model.db.options,this.model.base.options);let F=this._optionsForExec(),B=this._conditions;return this.mongooseCollection.countDocuments(B,F)};/*!
 * If `translateAliases` option is set, call `Model.translateAliases()`
 * on the following query properties: filter, projection, update, distinct.
 */h.prototype._applyTranslateAliases=function A(){let F=!1;if("translateAliases"in this._mongooseOptions)F=this._mongooseOptions.translateAliases;else if(this.model?.schema?._userProvidedOptions?.translateAliases!=null)F=this.model.schema._userProvidedOptions.translateAliases;else if(this.model?.base?.options?.translateAliases!=null)F=this.model.base.options.translateAliases;if(!F)return;if(this.model?.schema?.aliases&&Object.keys(this.model.schema.aliases).length>0){if(this.model.translateAliases(this._conditions,!0),this.model.translateAliases(this._fields,!0),this.model.translateAliases(this._update,!0),this._distinct!=null&&this.model.schema.aliases[this._distinct]!=null)this._distinct=this.model.schema.aliases[this._distinct]}};h.prototype._estimatedDocumentCount=async function A(){if(this.error())throw this.error();let F=this._optionsForExec();return this.mongooseCollection.estimatedDocumentCount(F)};h.prototype.estimatedDocumentCount=function(A){if(typeof A==="function"||typeof arguments[1]==="function")throw new y2("Query.prototype.estimatedDocumentCount() no longer accepts a callback");if(this.op="estimatedDocumentCount",this._validateOp(),A!=null)this.setOptions(A);return this};h.prototype.countDocuments=function(A,F){if(typeof A==="function"||typeof F==="function"||typeof arguments[2]==="function")throw new y2("Query.prototype.countDocuments() no longer accepts a callback");if(this.op="countDocuments",this._validateOp(),g6.canMerge(A))this.merge(A);if(F!=null)this.setOptions(F);return this};h.prototype.__distinct=async function A(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();YB(this.options,this.model.db.options,this.model.base.options),GB(this.options,this.model.db.options,this.model.base.options);let F=this._optionsForExec();return this.mongooseCollection.distinct(this._distinct,this._conditions,F)};h.prototype.distinct=function(A,F,B){if(typeof A==="function"||typeof F==="function"||typeof B==="function"||typeof arguments[3]==="function")throw new y2("Query.prototype.distinct() no longer accepts a callback");if(this.op="distinct",this._validateOp(),g6.canMerge(F))this.merge(F),WB(this);else if(F!=null)this.error(new M9(F,"filter","distinct"));if(A!=null)this._distinct=A;if(B!=null)this.setOptions(B);return this};h.prototype.sort=function(A,F){if(arguments.length>2)throw new Error("sort() takes at most 2 arguments");if(F!=null&&typeof F!=="object")throw new Error("sort() options argument must be an object or nullish");if(this.options.sort==null)this.options.sort={};if(F&&F.override)this.options.sort={};let B=this.options.sort;if(typeof A==="string"){let D=A.indexOf(" ")===-1?[A]:A.split(" ");for(let $ of D){let J=$[0]=="-"?-1:1;if(J===-1)$=$.slice(1);if(RX.has($))continue;B[$]=J}}else if(Array.isArray(A))for(let D of A){if(!Array.isArray(D))throw new TypeError("Invalid sort() argument, must be array of arrays");let $=""+D[0];if(RX.has($))continue;B[$]=$z(D[1],$)}else if(typeof A==="object"&&A!=null&&!(A instanceof Map))for(let D of Object.keys(A)){if(RX.has(D))continue;B[D]=$z(A[D],D)}else if(A instanceof Map)for(let D of A.keys()){if(D=""+D,RX.has(D))continue;B[D]=$z(A.get(D),D)}else if(A!=null)throw new TypeError("Invalid sort() argument. Must be a string, object, array, or map.");return this};/*!
 * Convert sort values
 */function $z(A,F){if(A===1||A==="asc"||A==="ascending")return 1;if(A===-1||A==="desc"||A==="descending")return-1;if(A?.$meta!=null)return{$meta:A.$meta};throw new TypeError("Invalid sort value: { "+F+": "+A+" }")}h.prototype.deleteOne=function A(F,B){if(typeof F==="function"||typeof B==="function"||typeof arguments[2]==="function")throw new y2("Query.prototype.deleteOne() no longer accepts a callback");if(this.op="deleteOne",this.setOptions(B),g6.canMerge(F))this.merge(F),WB(this);else if(F!=null)this.error(new M9(F,"filter","deleteOne"));return this};h.prototype._deleteOne=async function A(){if(this._applyTranslateAliases(),this._castConditions(),M5(this._conditions,this.options),this.error()!=null)throw this.error();let F=this._optionsForExec();return this.mongooseCollection.deleteOne(this._conditions,F)};h.prototype.deleteMany=function(A,F){if(typeof A==="function"||typeof F==="function"||typeof arguments[2]==="function")throw new y2("Query.prototype.deleteMany() no longer accepts a callback");if(this.setOptions(F),this.op="deleteMany",g6.canMerge(A))this.merge(A),WB(this);else if(A!=null)this.error(new M9(A,"filter","deleteMany"));return this};h.prototype._deleteMany=async function A(){if(this._applyTranslateAliases(),this._castConditions(),M5(this._conditions,this.options),this.error()!=null)throw this.error();let F=this._optionsForExec();return this.mongooseCollection.deleteMany(this._conditions,F)};function md(A,F,B,D,$,J,X,E){if(D.includeResultMetadata&&F==null)return Y(null),null;HB.createModelAndInit(A,F,$,J,D,X,Y);function Y(G,H){if(G)return E(G);if(D.includeResultMetadata){if(F&&H){if(D.session!=null)H.$session(D.session);B.value=H}else B.value=null;return E(null,B)}if(D.session!=null)H.$session(D.session);E(null,H)}}function WB(A){if(!A||!A.model||!A.model.schema)return;let F=A.model.schema;if(F&&F.discriminatorMapping&&!F.discriminatorMapping.isRoot)A._conditions[F.discriminatorMapping.key]=F.discriminatorMapping.value}h.prototype.findOneAndUpdate=function(A,F,B){if(typeof A==="function"||typeof F==="function"||typeof B==="function"||typeof arguments[3]==="function")throw new y2("Query.prototype.findOneAndUpdate() no longer accepts a callback");switch(this.op="findOneAndUpdate",this._validateOp(),this._validate(),arguments.length){case 2:B=void 0;break;case 1:F=A,A=B=void 0;break}if(g6.canMerge(A))this.merge(A);else if(A!=null)this.error(new M9(A,"filter","findOneAndUpdate"));if(F)this._mergeUpdate(F);if(B=B?z6(B):{},B.projection)this.select(B.projection),delete B.projection;if(B.fields)this.select(B.fields),delete B.fields;let D=this&&this.model&&this.model.base&&this.model.base.options&&this.model.base.options.returnOriginal;if(B.new==null&&B.returnDocument==null&&B.returnOriginal==null&&D!=null)B.returnOriginal=D;return this.setOptions(B),this};h.prototype._findOneAndUpdate=async function A(){if(this._applyTranslateAliases(),this._castConditions(),M5(this._conditions,this.options),pd(this),this.error())throw this.error();if(YB(this.options,this.model.db.options,this.model.base.options),GB(this.options,this.model.db.options,this.model.base.options),"strict"in this.options)this._mongooseOptions.strict=this.options.strict;let F=this._optionsForExec(this.model);id(F),this._update=this._castUpdate(this._update);let B=Object.assign({},F,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});if(this._update=ld(this._conditions,this.model.schema,this._update,B),!this._update||Object.keys(this._update).length===0)if(F.upsert){let X=z6(this._update);delete X._id,this._update={$set:X}}else return this._executionStack=null,await this._findOne();else if(this._update instanceof Error)throw this._update;else if(this._update.$set&&Object.keys(this._update.$set).length===0)delete this._update.$set;if(Ez(this,"runValidators",!1))await this.validate(this._update,F,!1);if(this._update.toBSON)this._update=this._update.toBSON();let $=await this.mongooseCollection.findOneAndUpdate(this._conditions,this._update,F);for(let X of this._transforms)$=X($);let J=!F.includeResultMetadata?$:$.value;return new Promise((X,E)=>{this._completeOne(J,$,F.projection,(Y,G)=>{if(Y)return E(Y);X(G)})})};h.prototype.findOneAndDelete=function(A,F){if(typeof A==="function"||typeof F==="function"||typeof arguments[2]==="function")throw new y2("Query.prototype.findOneAndDelete() no longer accepts a callback");if(this.op="findOneAndDelete",this._validateOp(),this._validate(),g6.canMerge(A))this.merge(A);return F&&this.setOptions(F),this};h.prototype._findOneAndDelete=async function A(){if(this._applyTranslateAliases(),this._castConditions(),M5(this._conditions,this.options),this.error()!=null)throw this.error();let F=this.options.includeResultMetadata,B=this._conditions,D=this._optionsForExec(this.model),$=await this.mongooseCollection.findOneAndDelete(B,D);for(let X of this._transforms)$=X($);let J=!F?$:$.value;return new Promise((X,E)=>{this._completeOne(J,$,D.projection,(Y,G)=>{if(Y)return E(Y);X(G)})})};h.prototype.findOneAndReplace=function(A,F,B){if(typeof A==="function"||typeof F==="function"||typeof B==="function"||typeof arguments[4]==="function")throw new y2("Query.prototype.findOneAndReplace() no longer accepts a callback");if(this.op="findOneAndReplace",this._validateOp(),this._validate(),g6.canMerge(A))this.merge(A);else if(A!=null)this.error(new M9(A,"filter","findOneAndReplace"));if(F!=null)this._mergeUpdate(F);B=B||{};let D=this&&this.model&&this.model.base&&this.model.base.options&&this.model.base.options.returnOriginal;if(B.new==null&&B.returnDocument==null&&B.returnOriginal==null&&D!=null)B.returnOriginal=D;return this.setOptions(B),this};h.prototype._findOneAndReplace=async function A(){if(this._applyTranslateAliases(),this._castConditions(),M5(this._conditions,this.options),this.error()!=null)throw this.error();if("strict"in this.options)this._mongooseOptions.strict=this.options.strict,delete this.options.strict;let F=this._conditions,B=this._optionsForExec();id(B);let D=this.options.includeResultMetadata,$={skipId:!0};if("strict"in this._mongooseOptions)$.strict=this._mongooseOptions.strict;let J=Ez(this,"runValidators",!1);try{let Y=new this.model(this._update,null,$);if(J)await Y.validate();else if(Y.$__.validationError)throw Y.$__.validationError;this._update=Y.toBSON()}catch(Y){if(Y instanceof hd)throw Y;let G=new hd;throw G.errors[Y.path]=Y,G}let X=await this.mongooseCollection.findOneAndReplace(F,this._update,B);for(let Y of this._transforms)X=Y(X);let E=!D?X:X.value;return new Promise((Y,G)=>{this._completeOne(E,X,B.projection,(H,W)=>{if(H)return G(H);Y(W)})})};h.prototype.findById=function(A,F,B){return this.findOne({_id:A},F,B)};h.prototype.findByIdAndUpdate=function(A,F,B){return this.findOneAndUpdate({_id:A},F,B)};h.prototype.findByIdAndDelete=function(A,F){return this.findOneAndDelete({_id:A},F)};function id(A){if("new"in A)A.returnDocument=A.new?"after":"before",delete A.new;if("returnOriginal"in A)A.returnDocument=A.returnOriginal?"before":"after",delete A.returnOriginal;if(typeof A.returnDocument==="string")A.returnOriginal=A.returnDocument==="before"}function Ez(A,F,B){let D=A._optionsForExec(A.model);if(F in D)return D[F];if(F in A.model.base.options)return A.model.base.options[F];return B}/*!
 * ignore
 */function Xz(A,F,B,D,$,J){if($.lean&&typeof $.lean.transform==="function"){$.lean.transform(F);for(let X=0;X<A.childSchemas.length;X++){let E=B?B+"."+A.childSchemas[X].model.path:A.childSchemas[X].model.path,Y=A.childSchemas[X].schema,G=dd.get(E,F);if(G==null)continue;if(Array.isArray(G))for(let H=0;H<G.length;H++)$.lean.transform(G[H]);else $.lean.transform(G);Xz(Y,G,E,D,$)}if(J)return J(null,F);else return}if($.includeResultMetadata)return J(null,D);return J(null,F)}/*!
 * ignore
 */function nd(A,F,B,D){if(D.lean&&typeof D.lean.transform==="function"){for(let $ of F)D.lean.transform($);for(let $=0;$<A.childSchemas.length;$++){let J=B?B+"."+A.childSchemas[$].model.path:A.childSchemas[$].model.path,X=A.childSchemas[$].schema,E=dd.get(J,F);if(E==null)continue;E=E.flat();for(let Y=0;Y<E.length;Y++)D.lean.transform(E[Y]);nd(X,E,J,D)}}return F}h.prototype._mergeUpdate=function(A){if(!this._update)this._update=Array.isArray(A)?[]:{};if(A==null||typeof A==="object"&&Object.keys(A).length===0)return;if(A instanceof h){if(Array.isArray(this._update))throw new Error("Cannot mix array and object updates");if(A._update)C0.mergeClone(this._update,A._update)}else if(Array.isArray(A)){if(!Array.isArray(this._update))throw new Error("Cannot mix array and object updates");this._update=this._update.concat(A)}else{if(Array.isArray(this._update))throw new Error("Cannot mix array and object updates");C0.mergeClone(this._update,A)}};/*!
 * ignore
 */async function Yz(A){if(this._applyTranslateAliases(),this._castConditions(),M5(this._conditions,this.options),pd(this),this.error()!=null)throw this.error();let F=this._conditions,B=this._optionsForExec(this.model);this._update=z6(this._update,B);let D=A==="replaceOne";if(D)this._update=new this.model(this._update,null,!0);else{if(this._update=this._castUpdate(this._update),this._update==null||Object.keys(this._update).length===0)return{acknowledged:!1};let J=Object.assign({},B,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});this._update=ld(this._conditions,this.model.schema,this._update,J)}if(Array.isArray(B.arrayFilters))B.arrayFilters=yU1(this._update,B.arrayFilters);if(Ez(this,"runValidators",!1))await this.validate(this._update,B,D);if(this._update.toBSON)this._update=this._update.toBSON();return this.mongooseCollection[A](F,this._update,B)}h.prototype.validate=async function A(F,B,D){if(typeof arguments[3]==="function")throw new y2("Query.prototype.validate() no longer accepts a callback");if(await ad(this,"validate"),D)await F.$validate();else await new Promise(($,J)=>{dU1(this,this.model.schema,F,B,(X)=>{if(X!=null)return J(X);$()})});await sd(this,null,null,"validate")};h.prototype._updateMany=async function A(){return Yz.call(this,"updateMany")};h.prototype._updateOne=async function A(){return Yz.call(this,"updateOne")};h.prototype._replaceOne=async function A(){return Yz.call(this,"replaceOne")};h.prototype.updateMany=function(A,F,B,D){if(typeof B==="function")D=B,B=null;else if(typeof F==="function")D=F,F=A,A={},B=null;else if(typeof A==="function")D=A,A=void 0,F=void 0,B=void 0;else if(typeof A==="object"&&!F&&!B&&!D)F=A,A=void 0,B=void 0,D=void 0;return Gz(this,"updateMany",A,F,B,D)};h.prototype.updateOne=function(A,F,B,D){if(typeof B==="function")D=B,B=null;else if(typeof F==="function")D=F,F=A,A={},B=null;else if(typeof A==="function")D=A,A=void 0,F=void 0,B=void 0;else if(typeof A==="object"&&!F&&!B&&!D)F=A,A=void 0,B=void 0,D=void 0;return Gz(this,"updateOne",A,F,B,D)};h.prototype.replaceOne=function(A,F,B,D){if(typeof B==="function")D=B,B=null;else if(typeof F==="function")D=F,F=A,A={},B=null;else if(typeof A==="function")D=A,A=void 0,F=void 0,B=void 0;else if(typeof A==="object"&&!F&&!B&&!D)F=A,A=void 0,B=void 0,D=void 0;return Gz(this,"replaceOne",A,F,B,D)};function Gz(A,F,B,D,$,J){if(A.op=F,A._validateOp(),D=D||{},$!=null){if("strict"in $)A._mongooseOptions.strict=$.strict}if(!(B instanceof h)&&B!=null&&B.toString()!=="[object Object]")A.error(new M9(B,"filter",F));else A.merge(B);if(C0.isObject($))A.setOptions($);if(A._mergeUpdate(D),J)return A.exec(J),A;return A}h.prototype.transform=function(A){return this._transforms.push(A),this};h.prototype.orFail=function(A){return this.transform((F)=>{switch(this.op){case"find":if(F.length===0)throw I5(A,this);break;case"findOne":if(F==null)throw I5(A,this);break;case"replaceOne":case"updateMany":case"updateOne":if(F&&F.matchedCount===0)throw I5(A,this);break;case"findOneAndDelete":case"findOneAndUpdate":case"findOneAndReplace":if(this.options.includeResultMetadata&&F!=null&&F.value==null)throw I5(A,this);if(!this.options.includeResultMetadata&&F==null)throw I5(A,this);break;case"deleteMany":case"deleteOne":if(F.deletedCount===0)throw I5(A,this);break;default:break}return F}),this};function I5(A,F){if(typeof A==="function")A=A.call(F);if(A==null)A=new IU1(F.getQuery(),F.model.modelName);return A}h.prototype.isPathSelectedInclusive=function(A){return gU1(this._fields,A)};h.prototype.exec=async function A(F){if(typeof F==="function"||arguments.length>=2&&typeof arguments[1]==="function")throw new y2("Query.prototype.exec() no longer accepts a callback");if(typeof F==="string")this.op=F;if(this.op==null)throw new y2("Query must have `op` before executing");if(this.model==null)throw new y2("Query must have an associated model before executing");let B=pU1.get(this.op);if(!B)throw new y2('Query has invalid `op`: "'+this.op+'"');if(this.options&&this.options.sort&&typeof this.options.sort==="object"&&this.options.sort.hasOwnProperty(""))throw new Error('Invalid field "" passed to sort()');if(this._executionStack!=null){let X=this.toString();if(X.length>60)X=X.slice(0,60)+"...";let E=new y2("Query was already executed: "+X);if(!this.model.base.options.skipOriginalStackTraces)E.originalStack=this._executionStack;throw E}else this._executionStack=this.model.base.options.skipOriginalStackTraces?!0:new Error().stack;let D=null;try{await sU1(this)}catch(X){if(X instanceof Jz.skipWrappedFunction)D=X;else throw X}let $,J=null;try{await ad(this),$=D?D.args[0]:await this[B]();for(let X of this._transforms)$=X($)}catch(X){if(X instanceof Jz.skipWrappedFunction)$=X.args[0];else J=X;J=this.model.schema._transformDuplicateKeyError(J)}return $=await sd(this,$,J),await nU1(this),$};/*!
 * ignore
 */function nU1(A){return new Promise((F,B)=>{A._hooks.execPost("exec",A,[],{},(D)=>{if(D)return B(D);F()})})}/*!
 * ignore
 */function sd(A,F,B,D){if(A._queryMiddleware==null){if(B!=null)throw B;return F}return new Promise(($,J)=>{let X=B?{error:B}:{};A._queryMiddleware.execPost(D||A.op,A,[F],X,(E,Y)=>{if(E)return J(E);$(Y)})})}/*!
 * ignore
 */function sU1(A){return new Promise((F,B)=>{A._hooks.execPre("exec",A,[],(D)=>{if(D!=null)return B(D);F()})})}/*!
 * ignore
 */function ad(A,F){if(A._queryMiddleware==null)return;return new Promise((B,D)=>{A._queryMiddleware.execPre(F||A.op,A,[],($)=>{if($!=null)return D($);B()})})}h.prototype.then=function(A,F){return this.exec().then(A,F)};h.prototype.catch=function(A){return this.exec().then(null,A)};h.prototype.finally=function(A){return this.exec().finally(A)};h.prototype[Symbol.toStringTag]=function A(){return`Query { ${this.op} }`};h.prototype.pre=function(A){return this._hooks.pre("exec",A),this};h.prototype.post=function(A){return this._hooks.post("exec",A),this};h.prototype._castUpdate=function A(F){let B=this.schema,D=B.options.discriminatorKey,$=B._baseSchema?B._baseSchema:B;if(this._mongooseOptions.overwriteDiscriminatorKey&&F[D]!=null&&$.discriminators){let X=Object.values($.discriminators).find((E)=>E.discriminatorMapping.value===F[D]);if(X!=null)B=X}let J;if("upsert"in this.options)J=this.options.upsert;return uU1(B,F,{strict:this._mongooseOptions.strict,upsert:J,arrayFilters:this.options.arrayFilters,overwriteDiscriminatorKey:this._mongooseOptions.overwriteDiscriminatorKey,overwriteImmutable:this._mongooseOptions.overwriteImmutable},this,this._conditions)};h.prototype.populate=function(){let A=Array.from(arguments);if(!A.some(Boolean))return this;let F=C0.populate.apply(null,A);if(this.options!=null){let $=this.options.readConcern,J=this.options.readPreference;for(let X of F){if($!=null&&(X&&X.options&&X.options.readConcern)==null)X.options=X.options||{},X.options.readConcern=$;if(J!=null&&(X&&X.options&&X.options.readPreference)==null)X.options=X.options||{},X.options.readPreference=J}}let B=this._mongooseOptions;if(B.lean!=null){let $=B.lean;for(let J of F)if((J&&J.options&&J.options.lean)==null)J.options=J.options||{},J.options.lean=$}if(!C0.isObject(B.populate))B.populate={};let D=B.populate;for(let $ of F){let J=$.path;if(D[J]&&D[J].populate&&$.populate)$.populate=D[J].populate.concat($.populate);D[$.path]=$}return this};h.prototype.getPopulatedPaths=function A(){let F=this._mongooseOptions.populate||{},B=Object.keys(F);for(let D of Object.keys(F)){let $=F[D];if(!Array.isArray($.populate))continue;rd(B,$.populate,D+".")}return B};/*!
 * ignore
 */function rd(A,F,B){for(let D of F){if(A.push(B+D.path),!Array.isArray(D.populate))continue;rd(A,D.populate,B+D.path+".")}}h.prototype.cast=function(A,F){F||(F=this._conditions),A=A||this.model;let B=A.schema.options.discriminatorKey;if(F!=null&&F.hasOwnProperty(B))A=SU1(A.discriminators,F[B])||A;let D={upsert:this.options&&this.options.upsert};if(this.options){if("strict"in this.options)D.strict=this.options.strict;if("strictQuery"in this.options)D.strictQuery=this.options.strictQuery}if("sanitizeFilter"in this._mongooseOptions)D.sanitizeFilter=this._mongooseOptions.sanitizeFilter;try{return kU1(A.schema,F,D,this)}catch($){if(typeof $.setModel==="function")$.setModel(A);throw $}};h.prototype._castFields=function A(F){let B,D,$,J,X;if(F){$=Object.keys(F),D=[];for(let E=0;E<$.length;++E)if(J=$[E],F[J].$elemMatch)B||(B={}),B[J]=F[J],D.push(J)}if(B){try{X=this.cast(this.model,B)}catch(E){return E}for(let E=0;E<D.length;++E)J=D[E],F[J]=X[J]}return F};h.prototype._applyPaths=function A(){if(!this.model)return;this._fields=this._fields||{};let F=void 0;if(this.model!=null&&C0.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection"))F=this.model.db.options.sanitizeProjection;else if(this.model!=null&&C0.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection"))F=this.model.base.options.sanitizeProjection;else F=this._mongooseOptions.sanitizeProjection;if(this._mongooseOptions.schemaLevelProjections??!0)HB.applyPaths(this._fields,this.model.schema,F);let D=!0;if("selectPopulatedPaths"in this.model.base.options)D=this.model.base.options.selectPopulatedPaths;if("selectPopulatedPaths"in this.model.schema.options)D=this.model.schema.options.selectPopulatedPaths;if(D)mU1(this._fields,this._userProvidedFields,this._mongooseOptions.populate)};h.prototype.cursor=function A(F){if(F)this.setOptions(F);try{this.cast(this.model)}catch(B){return new yd(this)._markError(B)}return new yd(this)};h.prototype.tailable=function(A,F){if(A!=null&&typeof A.constructor==="function"&&A.constructor.name==="Object")F=A,A=!0;if(A===void 0)A=!0;if(F&&typeof F==="object")for(let B of Object.keys(F))if(B==="awaitData"||B==="awaitdata")this.options.awaitData=!!F[B];else this.options[B]=F[B];return this.options.tailable=arguments.length?!!A:!0,this};h.prototype.near=function(){let A=[],F=this._mongooseOptions.nearSphere;if(arguments.length===1)if(Array.isArray(arguments[0]))A.push({center:arguments[0],spherical:F});else if(typeof arguments[0]==="string")A.push(arguments[0]);else if(C0.isObject(arguments[0])){if(typeof arguments[0].spherical!=="boolean")arguments[0].spherical=F;A.push(arguments[0])}else throw new TypeError("invalid argument");else if(arguments.length===2)if(typeof arguments[0]==="number"&&typeof arguments[1]==="number")A.push({center:[arguments[0],arguments[1]],spherical:F});else if(typeof arguments[0]==="string"&&Array.isArray(arguments[1]))A.push(arguments[0]),A.push({center:arguments[1],spherical:F});else if(typeof arguments[0]==="string"&&C0.isObject(arguments[1])){if(A.push(arguments[0]),typeof arguments[1].spherical!=="boolean")arguments[1].spherical=F;A.push(arguments[1])}else throw new TypeError("invalid argument");else if(arguments.length===3)if(typeof arguments[0]==="string"&&typeof arguments[1]==="number"&&typeof arguments[2]==="number")A.push(arguments[0]),A.push({center:[arguments[1],arguments[2]],spherical:F});else throw new TypeError("invalid argument");else throw new TypeError("invalid argument");return h.base.near.apply(this,A)};h.prototype.nearSphere=function(){return this._mongooseOptions.nearSphere=!0,this.near.apply(this,arguments),this};if(Symbol.asyncIterator!=null)h.prototype[Symbol.asyncIterator]=function A(){return this._mongooseOptions._asyncIterator=!0,this.cursor()};h.prototype.box=function(A,F){if(!Array.isArray(A)&&C0.isObject(A))F=A.ur,A=A.ll;return h.base.box.call(this,A,F)};h.prototype.center=h.base.circle;h.prototype.centerSphere=function(){if(arguments[0]!=null&&typeof arguments[0].constructor==="function"&&arguments[0].constructor.name==="Object")arguments[0].spherical=!0;if(arguments[1]!=null&&typeof arguments[1].constructor==="function"&&arguments[1].constructor.name==="Object")arguments[1].spherical=!0;h.base.circle.apply(this,arguments)};h.prototype.selectedInclusively=function A(){return xU1(this._fields)};h.prototype.selectedExclusively=function A(){return _U1(this._fields)};h.prototype.model;/*!
 * Export
 */td.exports=h});var Dl=z((Bf1,Bl)=>{/*!
 * Module dependencies.
 */var qB=T1(),Al=i("stream").Readable,aU1=yK(),rU1=A3(),tU1=U7(),Fl=i("util");function U6(A){Al.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.agg=A,this._transforms=[];let{_connection:F,_model:B}=A;if(delete A.options.cursor.useMongooseAggCursor,this._mongooseOptions={},F)this.cursor=F.db.aggregate(A._pipeline,A.options||{}),setImmediate(()=>this.emit("cursor",this.cursor));else oU1(B,this,A)}Fl.inherits(U6,Al);/*!
 * ignore
 */function oU1(A,F,B){if(!A.collection.buffer)A.hooks.execPre("aggregate",B,function(D){if(D!=null){od(F,D);return}if(typeof B.options?.cursor?.transform==="function")F._transforms.push(B.options.cursor.transform);F.cursor=A.collection.aggregate(B._pipeline,B.options||{}),F.emit("cursor",F.cursor)});else A.collection.emitter.once("queue",function(){A.hooks.execPre("aggregate",B,function(D){if(D!=null){od(F,D);return}if(typeof B.options?.cursor?.transform==="function")F._transforms.push(B.options.cursor.transform);F.cursor=A.collection.aggregate(B._pipeline,B.options||{}),F.emit("cursor",F.cursor)})})}function od(A,F){if(F instanceof tU1.skipWrappedFunction){let B=F.args[0];if(B!=null&&(!Array.isArray(B)||B.length)){let D=new qB('Cannot `skipMiddlewareFunction()` with a value when using `.aggregate().cursor()`, value must be nullish or empty array, got "'+Fl.inspect(B)+'".');A._markError(D),A.listeners("error").length>0&&A.emit("error",D);return}A.emit("cursor",null);return}A._markError(F),A.listeners("error").length>0&&A.emit("error",F)}U6.prototype._read=function(){let A=this;IX(this,function(F,B){if(F)return A.emit("error",F);if(!B){A.push(null),A.cursor.close(function(D){if(D)return A.emit("error",D)});return}A.push(B)})};if(Symbol.asyncIterator!=null){let A="Mongoose does not support using async iterators with an existing aggregation cursor. See https://bit.ly/mongoose-async-iterate-aggregation";U6.prototype[Symbol.asyncIterator]=function(){throw new qB(A)}}Object.defineProperty(U6.prototype,"map",{value:function(A){return this._transforms.push(A),this},enumerable:!0,configurable:!0,writable:!0});U6.prototype._markError=function(A){return this._error=A,this};U6.prototype.close=async function A(){if(typeof arguments[0]==="function")throw new qB("AggregationCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close()}catch(F){throw this.listeners("error").length>0&&this.emit("error",F),F}this.emit("close")};U6.prototype._destroy=function A(F,B){let D=null;if(!this.cursor)D=new Promise(($)=>{this.once("cursor",$)});else D=Promise.resolve();return D.then(()=>this.cursor.close()).then(()=>{this._closed=!0,B()}).catch(($)=>{B($)}),this};U6.prototype.next=async function A(){if(typeof arguments[0]==="function")throw new qB("AggregationCursor.prototype.next() no longer accepts a callback");return new Promise((F,B)=>{IX(this,(D,$)=>{if(D!=null)return B(D);F($)})})};U6.prototype.eachAsync=function(A,F){if(typeof arguments[2]==="function")throw new qB("AggregationCursor.prototype.eachAsync() no longer accepts a callback");let B=this;if(typeof F==="function")F={};return F=F||{},aU1(function(D){return IX(B,D)},A,F)};if(Symbol.asyncIterator!=null)U6.prototype[Symbol.asyncIterator]=function(){return this.transformNull()._transformForAsyncIterator()};/*!
 * ignore
 */U6.prototype._transformForAsyncIterator=function(){if(this._transforms.indexOf(ed)===-1)this.map(ed);return this};/*!
 * ignore
 */U6.prototype.transformNull=function(A){if(arguments.length===0)A=!0;return this._mongooseOptions.transformNull=A,this};/*!
 * ignore
 */function ed(A){return A==null?{done:!0}:{value:A,done:!1}}U6.prototype.addCursorFlag=function(A,F){let B=this;return eU1(this,function(){B.cursor.addCursorFlag(A,F)}),this};/*!
 * ignore
 */function eU1(A,F){if(A.cursor)return F();A.once("cursor",function(){F()})}function IX(A,F){let B=F;if(A._transforms.length)B=function(D,$){if(D||$===null&&!A._mongooseOptions.transformNull)return F(D,$);F(D,A._transforms.reduce(function(J,X){return X(J)},$))};if(A._error)return rU1(function(){B(A._error)});if(A.cursor)return A.cursor.next().then((D)=>{if(!D)return B(null,null);B(null,D)},(D)=>B(D));else A.once("error",F),A.once("cursor",function(){IX(A,F)})}Bl.exports=U6});var Hz=z((Df1,$l)=>{$l.exports=function A(F,B,D){let $=B&&B.discriminatorMapping;if(D=D||"",$&&!$.isRoot){let J=F,X=(D.length>0?D+".":D)+$.key,E=$.value;if(J[0]!=null&&J[0].$match&&(J[0].$match[X]===void 0||J[0].$match[X]===E))J[0].$match[X]=E;else if(J[0]!=null&&J[0].$geoNear)J[0].$geoNear.query=J[0].$geoNear.query||{},J[0].$geoNear.query[X]=E;else if(J[0]!=null&&J[0].$search)if(J[1]&&J[1].$match!=null)J[1].$match[X]=J[1].$match[X]||E;else{let Y={};Y[X]=E,J.splice(1,0,{$match:Y})}else{let Y={};Y[X]=E,J.unshift({$match:Y})}}}});var Xl=z(($f1,Jl)=>{Jl.exports=function A(F){if(!Array.isArray(F))return;for(let B of F){if(B==null)continue;let D=B.$group||B.$bucket||B.$bucketAuto;if(D!=null)for(let J of Object.keys(D))AZ1(D[J]);let $=Object.keys(B)[0];if($&&typeof B[$]==="object"){let J=B[$];for(let X of Object.keys(J))if(J[X]!=null&&J[X].$function!=null&&typeof J[X].$function.body==="function")J[X].$function.body=J[X].$function.body.toString()}if(B.$facet!=null)for(let J of Object.keys(B.$facet))A(B.$facet[J])}};function AZ1(A){if(A==null||A.$accumulator==null)return;for(let F of["init","accumulate","merge","finalize"])if(typeof A.$accumulator[F]==="function")A.$accumulator[F]=String(A.$accumulator[F])}});var qz=z((Jf1,Wl)=>{/*!
 * Module dependencies
 */var Gl=Dl(),x7=T1(),Hl=PX(),{applyGlobalMaxTimeMS:FZ1,applyGlobalDiskUse:BZ1}=mK(),DZ1=I0(),$Z1=o2(),Wz=Hz(),JZ1=Xl(),El=Q1(),{modelSymbol:XZ1}=$1(),EZ1=Hl.prototype.read,YZ1=Hl.prototype.readConcern,Yl=new Set(["$$DESCEND","$$PRUNE","$$KEEP"]);function u1(A,F){if(this._pipeline=[],F==null||F[XZ1])this._model=F;else this._connection=F;if(this.options={},arguments.length===1&&Array.isArray(A))this.append.apply(this,A)}u1.prototype.options;u1.prototype._optionsForExec=function(){let A=this.options||{},F=this.model()?.db?.base.transactionAsyncLocalStorage?.getStore();if(!A.hasOwnProperty("session")&&F?.session!=null)A.session=F.session;return A};u1.prototype.model=function(A){if(arguments.length===0)return this._model;if(this._model=A,A.schema!=null){if(this.options.readPreference==null&&A.schema.options.read!=null)this.options.readPreference=A.schema.options.read;if(this.options.collation==null&&A.schema.options.collation!=null)this.options.collation=A.schema.options.collation}return A};u1.prototype.append=function(){let A=arguments.length===1&&Array.isArray(arguments[0])?arguments[0]:[...arguments];if(!A.every(GZ1))throw new Error("Arguments must be aggregate pipeline operators");return this._pipeline=this._pipeline.concat(A),this};u1.prototype.addFields=function(A){if(typeof A!=="object"||A===null||Array.isArray(A))throw new Error("Invalid addFields() argument. Must be an object");return this.append({$addFields:Object.assign({},A)})};u1.prototype.project=function(A){let F={};if(typeof A==="object"&&!Array.isArray(A))Object.keys(A).forEach(function(B){F[B]=A[B]});else if(arguments.length===1&&typeof A==="string")A.split(/\s+/).forEach(function(B){if(!B)return;let D=B[0]==="-"?0:1;if(D===0)B=B.substring(1);F[B]=D});else throw new Error("Invalid project() argument. Must be string or object");return this.append({$project:F})};u1.prototype.near=function(A){if(A==null)throw new x7("Aggregate `near()` must be called with non-nullish argument");if(A.near==null)throw new x7("Aggregate `near()` argument must have a `near` property");let F=Array.isArray(A.near)?A.near:A.near.coordinates;if(typeof A.near==="object"&&(!Array.isArray(F)||F.length<2||F.find((D)=>typeof D!=="number")))throw new x7(`Aggregate \`near()\` argument has invalid coordinates, got "${F}"`);let B={};return B.$geoNear=A,this.append(B)};/*!
 * define methods
 */"group match skip limit out densify fill".split(" ").forEach(function(A){u1.prototype[A]=function(F){let B={};return B["$"+A]=F,this.append(B)}});u1.prototype.unwind=function(){let A=[...arguments],F=[];for(let B of A)if(B&&typeof B==="object")F.push({$unwind:B});else if(typeof B==="string")F.push({$unwind:B[0]==="$"?B:"$"+B});else throw new Error('Invalid arg "'+B+'" to unwind(), must be string or object');return this.append.apply(this,F)};u1.prototype.replaceRoot=function(A){let F;if(typeof A==="string")F=A.startsWith("$")?A:"$"+A;else F=A;return this.append({$replaceRoot:{newRoot:F}})};u1.prototype.count=function(A){return this.append({$count:A})};u1.prototype.sortByCount=function(A){if(A&&typeof A==="object")return this.append({$sortByCount:A});else if(typeof A==="string")return this.append({$sortByCount:A[0]==="$"?A:"$"+A});else throw new TypeError('Invalid arg "'+A+'" to sortByCount(), must be string or object')};u1.prototype.lookup=function(A){return this.append({$lookup:A})};u1.prototype.graphLookup=function(A){let F={};if(A){if(!El.isObject(A))throw new TypeError("Invalid graphLookup() argument. Must be an object.");El.mergeClone(F,A);let B=F.startWith;if(B&&typeof B==="string")F.startWith=F.startWith.startsWith("$")?F.startWith:"$"+F.startWith}return this.append({$graphLookup:F})};u1.prototype.sample=function(A){return this.append({$sample:{size:A}})};u1.prototype.sort=function(A){let F={};if($Z1(A)==="Object"){let B=["desc","descending",-1];Object.keys(A).forEach(function(D){if(A[D]instanceof Object&&A[D].$meta){F[D]=A[D];return}F[D]=B.indexOf(A[D])===-1?1:-1})}else if(arguments.length===1&&typeof A==="string")A.split(/\s+/).forEach(function(B){if(!B)return;let D=B[0]==="-"?-1:1;if(D===-1)B=B.substring(1);F[B]=D});else throw new TypeError("Invalid sort() argument. Must be a string or object.");return this.append({$sort:F})};u1.prototype.unionWith=function(A){return this.append({$unionWith:A})};u1.prototype.read=function(A,F){return EZ1.call(this,A,F),this};u1.prototype.readConcern=function(A){return YZ1.call(this,A),this};u1.prototype.redact=function(A,F,B){if(arguments.length===3){if(typeof F==="string"&&!Yl.has(F)||typeof B==="string"&&!Yl.has(B))throw new Error("If thenExpr or elseExpr is string, it must be either $$DESCEND, $$PRUNE or $$KEEP");A={$cond:{if:A,then:F,else:B}}}else if(arguments.length!==1)throw new TypeError("Invalid arguments");return this.append({$redact:A})};u1.prototype.explain=async function A(F){if(typeof F==="function"||typeof arguments[1]==="function")throw new x7("Aggregate.prototype.explain() no longer accepts a callback");let B=this._model;if(!this._pipeline.length)throw new Error("Aggregate has empty pipeline");Wz(this._pipeline,this._model.schema),await new Promise((X,E)=>{B.hooks.execPre("aggregate",this,(Y)=>{if(Y){let G={error:Y};return B.hooks.execPost("aggregate",this,[null],G,(H)=>{E(H)})}else X()})});let D=B.collection.aggregate(this._pipeline,this.options);if(F==null)F=!0;let $=null;try{$=await D.explain(F)}catch(X){await new Promise((E,Y)=>{let G={error:X};B.hooks.execPost("aggregate",this,[null],G,(H)=>{if(H)return Y(H);return E()})})}let J={error:null};return await new Promise((X,E)=>{B.hooks.execPost("aggregate",this,[$],J,(Y)=>{if(Y)return E(Y);return X()})}),$};u1.prototype.allowDiskUse=function(A){return this.options.allowDiskUse=A,this};u1.prototype.hint=function(A){return this.options.hint=A,this};u1.prototype.session=function(A){if(A==null)delete this.options.session;else this.options.session=A;return this};u1.prototype.option=function(A){for(let F in A)this.options[F]=A[F];return this};u1.prototype.cursor=function(A){return this._optionsForExec(),this.options.cursor=A||{},new Gl(this)};u1.prototype.collation=function(A){return this.options.collation=A,this};u1.prototype.facet=function(A){return this.append({$facet:A})};u1.prototype.search=function(A){return this.append({$search:A})};u1.prototype.pipeline=function(){return this._pipeline};u1.prototype.exec=async function A(){if(!this._model&&!this._connection)throw new Error("Aggregate not bound to any Model");if(typeof arguments[0]==="function")throw new x7("Aggregate.prototype.exec() no longer accepts a callback");if(this._connection){if(!this._pipeline.length)throw new x7("Aggregate has empty pipeline");return this._optionsForExec(),await(await this._connection.client.db().aggregate(this._pipeline,this.options)).toArray()}let F=this._model,B=this._model.collection;if(FZ1(this.options,F.db.options,F.base.options),BZ1(this.options,F.db.options,F.base.options),this._optionsForExec(),this.options&&this.options.cursor)return new Gl(this);if(Wz(this._pipeline,this._model.schema),JZ1(this._pipeline),await new Promise((X,E)=>{F.hooks.execPre("aggregate",this,(Y)=>{if(Y){let G={error:Y};return F.hooks.execPost("aggregate",this,[null],G,(H)=>{E(H)})}else X()})}),!this._pipeline.length)throw new x7("Aggregate has empty pipeline");let D=DZ1(this.options||{}),$;try{$=await(await B.aggregate(this._pipeline,D)).toArray()}catch(X){await new Promise((E,Y)=>{let G={error:X};F.hooks.execPost("aggregate",this,[null],G,(H)=>{if(H)return Y(H);E()})})}let J={error:null};return await new Promise((X,E)=>{F.hooks.execPost("aggregate",this,[$],J,(Y)=>{if(Y)return E(Y);return X()})}),$};u1.prototype.then=function(A,F){return this.exec().then(A,F)};u1.prototype.catch=function(A){return this.exec().then(null,A)};u1.prototype.finally=function(A){return this.exec().finally(A)};if(Symbol.asyncIterator!=null)u1.prototype[Symbol.asyncIterator]=function(){return this.cursor({useMongooseAggCursor:!0}).transformNull()._transformForAsyncIterator()};/*!
 * Helpers
 */function GZ1(A){if(typeof A!=="object"||A===null)return!1;let F=Object.keys(A);return F.length===1&&F[0][0]==="$"}u1._prepareDiscriminatorPipeline=Wz;/*!
 * Exports
 */Wl.exports=u1});var Cl=z((Xf1,ql)=>{var HZ1=I0();class Cz{constructor(A){if(A==null)return;Object.assign(this,HZ1(A))}}Cz.prototype.__subdocs=null;ql.exports=Cz});var Kl=z((Ef1,Ql)=>{Ql.exports=function A(F,B){let D=Object.keys(B.paths),$=D.length;for(let J=0;J<$;++J){let X="",E=D[J],Y=B.paths[E],G=Y.splitPath(),H=G.length,W=F;for(let q=0;q<H;++q){if(W==null)break;let C=G[q];if(X+=(!X.length?"":".")+C,q===H-1){if(typeof W[C]!=="undefined"){if(Y.$isSingleNested)A(W[C],Y.caster.schema);else if(Y.$isMongooseDocumentArray&&Array.isArray(W[C]))W[C].forEach((K)=>A(K,Y.schema));break}let Q=Y.getDefault(F,!1,{skipCast:!0});if(typeof Q!=="undefined"){if(W[C]=Q,Y.$isSingleNested)A(Q,Y.caster.schema);else if(Y.$isMongooseDocumentArray&&Array.isArray(Q))Q.forEach((K)=>A(K,Y.schema))}}else{if(W[C]==null)W[C]={};W=W[C]}}}}});var Kz=z((Yf1,zl)=>{zl.exports=Qz;function Qz(A,F=new WeakSet,B=!1){if(F.has(A))return;F.add(A);for(let D of Object.keys(A.paths)){let $=A.paths[D];if(!$.schema)continue;if(Qz($.schema,F),!$.schema._applyDiscriminators)continue;if($._appliedDiscriminators&&!B)continue;for(let J of $.schema._applyDiscriminators.keys()){let{schema:X,options:E}=$.schema._applyDiscriminators.get(J);Qz(X,F),$.discriminator(J,X,B?{...E,overwriteExisting:!0}:E)}$._appliedDiscriminators=!0}}});var Zl=z((Gf1,Ul)=>{var WZ1=f0(),qZ1=Q1();Ul.exports=function A(F,B){let D=zz();function $(J,X){Object.defineProperty(F.prototype,J,{get:function(){let E={};for(let Y in X.methods[J])E[Y]=X.methods[J][Y].bind(this);return E},configurable:!0})}for(let J of Object.keys(B.methods)){let X=B.methods[J];if(B.tree.hasOwnProperty(J))throw new Error('You have a method and a property in your schema both named "'+J+'"');if(typeof X==="function"&&D.prototype[J]===X){delete B.methods[J];continue}if(B.reserved[J]&&!WZ1(B,`methodOptions.${J}.suppressWarning`,!1))qZ1.warn(`mongoose: the method name "${J}" is used by mongoose internally, overwriting it may cause bugs. If you're sure you know what you're doing, you can suppress this error by using \`schema.method('${J}', fn, { suppressWarning: true })\`.`);if(typeof X==="function")F.prototype[J]=X;else $(J,B)}F.$appliedMethods=!0;for(let J of Object.keys(B.paths)){let X=B.paths[J];if(X.$isSingleNested&&!X.caster.$appliedMethods)A(X.caster,X.schema);if(X.$isMongooseDocumentArray&&!X.Constructor.$appliedMethods)A(X.Constructor,X.schema)}}});var Ll=z((Hf1,wl)=>{var Vl=YC(),CZ1=E5(),QZ1=KX(),TX=Q1().isPOJO;wl.exports=function A(F,B,D){if(B==null)return F;if(F==null)return F;let $=null;if(QZ1(B))$=!1;else if(CZ1(B))$=!0;if($==null)return F;else if($)return D=D||Vl(B),MX(F,B,D);else return D=D||Vl(B),jX(F,B,D)};function MX(A,F,B,D,$){if(A==null||typeof A!=="object")return A;if(Array.isArray(A))return A.map((X)=>MX(X,F,B,D,$));let J={...A};D=$?D||{}:F;for(let X of Object.keys(J)){let E=$?$+"."+X:X;if(F.hasOwnProperty(E)||D.hasOwnProperty(X))if(TX(F[E])||TX(D[X]))J[X]=MX(J[X],F,B,D[X],E);else delete J[X];else if(B[E])J[X]=MX(J[X],F,B,D[X],E)}return J}function jX(A,F,B,D,$){if(A==null||typeof A!=="object")return A;if(Array.isArray(A))return A.map((X)=>jX(X,F,B,D,$));let J={...A};D=$?D||{}:F;for(let X of Object.keys(J)){let E=$?$+"."+X:X;if(F.hasOwnProperty(E)||D.hasOwnProperty(X)){if(TX(F[E])||TX(D[X]))J[X]=jX(J[X],F,B,D[X],E);continue}else if(B[E])J[X]=jX(J[X],F,B,D[X],E);else delete J[X]}return J}});var Nl=z((Wf1,Rl)=>{Rl.exports=function A(F){let B=!1;for(let D of Object.keys(F))if(F[D]==="text")B=!0;return B}});var Il=z((qf1,Pl)=>{var KZ1=Nl();Pl.exports=function A(F,B,D){if(KZ1(F))return;if(D.hasOwnProperty("collation")&&!B.hasOwnProperty("collation"))B.collation=D.collation}});var jl=z((Cf1,Ml)=>{var zZ1=p$(),{queryMiddlewareFunctions:UZ1,aggregateMiddlewareFunctions:ZZ1,modelMiddlewareFunctions:VZ1,documentMiddlewareFunctions:wZ1}=PJ(),LZ1=Array.from(new Set([...UZ1,...ZZ1,...VZ1,...wZ1]));Ml.exports=function A(F,B,D){let $={useErrorHandlers:!0,numCallbackParams:1};F.$__insertMany=B.createWrapper("insertMany",F.$__insertMany,F,$),B=B.filter((J)=>{if(LZ1.indexOf(J.name)!==-1)return!!J.model;return J.model!==!1});for(let J of Object.keys(D))if(B.hasHooks(J)){let X=F[J];F[J]=function(){let E=arguments.length,Y=E>0?arguments[E-1]:null,G=typeof Y==="function"?Y:null,H=Array.prototype.slice.call(arguments,0,G==null?E:E-1);return zZ1(G,(W)=>{B.execPre(J,F,H,function(q){if(q!=null)return W(q);let C=0,Q=X.apply(F,H.concat(K));if(Q!=null&&typeof Q.then==="function")Q.then((U)=>K(null,U),(U)=>K(U));function K(U,Z){if(C++>0)return;if(U!=null)return W(U);B.execPost(J,F,[Z],function(V){if(V!=null)return W(V);W(null,Z)})}})},F.events)}}}});var kl=z((Qf1,Tl)=>{Tl.exports=function A(F,B){for(let D in B.statics)F[D]=B.statics[D]}});var _l=z((Kf1,fl)=>{var Ol=NJ(),RZ1=_6();fl.exports=ul;function ul(A,F,B){if(F==null)return F;return NZ1(A,F,B),Sl(A,F,B)}function NZ1(A,F,B){for(let D of A.childSchemas){let $=D.model.path,J=D.schema;if(!$)continue;let X=RZ1.get($,F);if(X==null||Array.isArray(X)&&X.flat(1/0).length===0)continue;ul(J,X,B)}}function Sl(A,F,B){if(F==null||typeof F!=="object")return;if(Array.isArray(F)){for(let E of F)Sl(A,E,B);return}if(A.discriminators&&Object.keys(A.discriminators).length>0)for(let E of Object.keys(A.discriminators)){let Y=A.discriminators[E],G=Y.discriminatorMapping.key,H=Y.discriminatorMapping.value;if(F[G]==H){A=Y;break}}let D=Ol(A.options.timestamps,"createdAt"),$=Ol(A.options.timestamps,"updatedAt"),J=B?.currentTime,X=null;if(J!=null)X=J();else if(A.base?.now)X=A.base.now();else X=new Date;if(D&&F[D]==null&&!B?.isUpdate)F[D]=X;if($)F[$]=X}});var bl=z((zf1,gl)=>{var PZ1=_6();gl.exports=xl;function xl(A,F,B){if(F==null)return F;let D=B,$=null;if(Array.isArray(B)){D=[],$=[];for(let J of B)if(J.length===1)$.push(J[0]);else D.push(J)}return IZ1(A,F,D),Uz(A,F,$)}function IZ1(A,F,B){let D=!1;for(let $ of A.childSchemas){let J=$.model.path,X=$.schema;if(!J)continue;let E=PZ1.get(J,F);if(E==null||Array.isArray(E)&&E.flat(1/0).length===0)continue;let Y=null;if(Array.isArray(B)){Y=[];for(let G of B)if(G[0]==J)Y.push(G.slice(1));if(Y.length===0)continue}xl(X,E,Y),D=!0}if(B&&B.length&&!D)Uz(A,F,B)}function Uz(A,F,B){if(F==null||typeof F!=="object")return;if(Array.isArray(F)){for(let D of F)Uz(A,D,B);return}if(A.discriminators&&Object.keys(A.discriminators).length>0)for(let D of Object.keys(A.discriminators)){let $=A.discriminators[D],J=$.discriminatorMapping.key,X=$.discriminatorMapping.value;if(F[J]==X){A=$;break}}if(B==null)B=Object.keys(A.virtuals);for(let D of B){if(A.virtuals[D]==null)continue;let $=A.virtuals[D],J=Array.isArray(D)?D:D.indexOf(".")===-1?[D]:D.split("."),X=F;for(let G=0;G<J.length-1;++G)X[J[G]]=J[G]in X?X[J[G]]:{},X=X[J[G]];let E=$.applyGetters(X[J[J.length-1]],F);if($.options&&($.options.ref||$.options.refPath)&&E===void 0)if($.options.justOne)E=null;else E=[];X[J[J.length-1]]=E}}});var kX=z((Uf1,yl)=>{yl.exports=function A(F){if(!(this instanceof A))return new A(F);return this.val=F,this}});var CB=z((Zf1,hl)=>{/*!
 * ignore
 */hl.exports=new WeakMap});var ll=z((Vf1,dl)=>{var MZ1=I0(),vl=CB(),jZ1=$1().modelSymbol,TZ1=Q1();dl.exports=ml;var OX=Symbol("mongoose#assignRawDocsToIdStructure#hasArray");function ml(A,F,B,D,$){let J=[],X=D.isVirtual&&D.justOne&&A.length>1?!1:D.sort&&A.length>1,E=D.$nullIfNotFound,Y,G,H;if(TZ1.isMongooseArray(A))A=A.__array;let W=0,q=A.length;if(X&&$&&D[OX]===void 0){D[OX]=!1;for(let C in B)if(Array.isArray(B[C])){D[OX]=!0;break}}for(W=0;W<q;++W){if(H=A[W],Array.isArray(H)){ml(H,F,B,D,!0),J.push(H);continue}if(H===null&&X===!1){J.push(H);continue}if(H?.constructor?.name==="Binary"&&H.sub_type===4&&typeof H.toUUID==="function")G=String(H.toUUID());else if(H?.constructor?.name==="Buffer"&&H._subtype===4&&typeof H.toUUID==="function")G=String(H.toUUID());else G=String(H);if(Y=F[G],D.clone&&Y!=null)if(D.lean){let C=vl.get(Y);Y=MZ1(Y),vl.set(Y,C)}else Y=Y.constructor.hydrate(Y._doc);if($)if(Y)if(X){let C=B[G];if(D[OX])J.push(Y);else J[C]=Y}else J.push(Y);else if(H!=null&&H[jZ1]!=null)J.push(H);else J.push(D.retainNullValues||E?null:H);else J[W]=Y||null}if(A.length=0,J.length)J.forEach(function(C,Q){A[Q]=C})}});var Zz=z((wf1,cl)=>{cl.exports=uX;/*!
 * ignore
 */function uX(A,F){if(A.virtuals[F])return{virtual:A.virtuals[F],path:void 0};let B=F.split("."),D="",$="";for(let J=0;J<B.length;++J){if(D+=(D.length>0?".":"")+B[J],A.virtuals[D]){if(J===B.length-1)return{virtual:A.virtuals[D],path:$};continue}if(A.nested[D])continue;if(A.paths[D]&&A.paths[D].schema){A=A.paths[D].schema;let X=B.slice(J+1).join(".");if(A.virtuals[X]){if(J===B.length-2)return{virtual:A.virtuals[X],nestedSchemaPath:[$,D].filter((E)=>!!E).join(".")};continue}if(J+1<B.length&&A.discriminators)for(let E of Object.keys(A.discriminators)){let Y=uX(A.discriminators[E],X);if(Y!=null){let G=[$,D,Y.nestedSchemaPath].filter((H)=>!!H).join(".");return{virtual:Y.virtual,nestedSchemaPath:G}}}$+=($.length>0?".":"")+D,D="";continue}else if(A.paths[D]?.$isSchemaMap&&A.paths[D].$__schemaType?.schema){A=A.paths[D].$__schemaType.schema,++J;let X=B.slice(J+1).join(".");if(A.virtuals[X]){if(J===B.length-2)return{virtual:A.virtuals[X],nestedSchemaPath:[$,D,"$*"].filter((E)=>!!E).join(".")};continue}if(J+1<B.length&&A.discriminators)for(let E of Object.keys(A.discriminators)){let Y=uX(A.discriminators[E],X);if(Y!=null){let G=[$,D,Y.nestedSchemaPath,"$*"].filter((H)=>!!H).join(".");return{virtual:Y.virtual,nestedSchemaPath:G}}}$+=($.length>0?".":"")+"$*"+D,D=""}if(A.discriminators)for(let X of Object.keys(A.discriminators)){let E=uX(A.discriminators[X],F);if(E)return E}return null}}});var il=z((SX,pl)=>{(function(A,F){typeof SX==="object"&&typeof pl!=="undefined"?F(SX):typeof define==="function"&&define.amd?define(["exports"],F):(A=typeof globalThis!=="undefined"?globalThis:A||self,F(A.sift={}))})(SX,function(A){var F=function(L,N){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,f){M.__proto__=f}||function(M,f){for(var a in f)if(Object.prototype.hasOwnProperty.call(f,a))M[a]=f[a]},F(L,N)};function B(L,N){if(typeof N!=="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");F(L,N);function M(){this.constructor=L}L.prototype=N===null?Object.create(N):(M.prototype=N.prototype,new M)}typeof SuppressedError==="function"&&SuppressedError;var D=function(L){var N="[object "+L+"]";return function(M){return $(M)===N}},$=function(L){return Object.prototype.toString.call(L)},J=function(L){if(L instanceof Date)return L.getTime();else if(E(L))return L.map(J);else if(L&&typeof L.toJSON==="function")return L.toJSON();return L},X=function(L){return L==null?null:L},E=D("Array"),Y=D("Object"),G=D("Function"),H=function(L,N){return L.hasOwnProperty(N)&&!G(L[N])},W=function(L){return L&&(L.constructor===Object||L.constructor===Array||L.constructor.toString()==="function Object() { [native code] }"||L.constructor.toString()==="function Array() { [native code] }")&&!L.toJSON},q=function(L,N){if(L==null&&L==N)return!0;if(L===N)return!0;if(Object.prototype.toString.call(L)!==Object.prototype.toString.call(N))return!1;if(E(L)){if(L.length!==N.length)return!1;for(var M=0,f=L.length;M<f;M++)if(!q(L[M],N[M]))return!1;return!0}else if(Y(L)){if(Object.keys(L).length!==Object.keys(N).length)return!1;for(var a in L)if(!q(L[a],N[a]))return!1;return!0}return!1},C=function(L,N,M,f,a,X1){var U1=N[f];if(E(L)&&isNaN(Number(U1))&&!H(L,U1)){for(var f1=0,L2=L.length;f1<L2;f1++)if(!C(L[f1],N,M,f,f1,L))return!1}if(f===N.length||L==null)return M(L,a,X1,f===0,f===N.length);return C(L[U1],N,M,f+1,U1,L)},Q=function(){function L(N,M,f,a){this.params=N,this.owneryQuery=M,this.options=f,this.name=a,this.init()}return L.prototype.init=function(){},L.prototype.reset=function(){this.done=!1,this.keep=!1},L}(),K=function(L){B(N,L);function N(M,f,a,X1){var U1=L.call(this,M,f,a)||this;return U1.children=X1,U1}return N.prototype.reset=function(){this.keep=!1,this.done=!1;for(var M=0,f=this.children.length;M<f;M++)this.children[M].reset()},N.prototype.childrenNext=function(M,f,a,X1,U1){var f1=!0,L2=!0;for(var w6=0,b3=this.children.length;w6<b3;w6++){var y9=this.children[w6];if(!y9.done)y9.next(M,f,a,X1,U1);if(!y9.keep)L2=!1;if(y9.done){if(!y9.keep)break}else f1=!1}this.done=f1,this.keep=L2},N}(Q),U=function(L){B(N,L);function N(M,f,a,X1,U1){var f1=L.call(this,M,f,a,X1)||this;return f1.name=U1,f1}return N}(K),Z=function(L){B(N,L);function N(){var M=L!==null&&L.apply(this,arguments)||this;return M.propop=!0,M}return N.prototype.next=function(M,f,a,X1){this.childrenNext(M,f,a,X1)},N}(K),V=function(L){B(N,L);function N(M,f,a,X1,U1){var f1=L.call(this,f,a,X1,U1)||this;return f1.keyPath=M,f1.propop=!0,f1._nextNestedValue=function(L2,w6,b3,y9,zi){return f1.childrenNext(L2,w6,b3,y9,zi),!f1.done},f1}return N.prototype.next=function(M,f,a){C(M,this.keyPath,this._nextNestedValue,0,f,a)},N}(K),w=function(L,N){if(L instanceof Function)return L;if(L instanceof RegExp)return function(f){var a=typeof f==="string"&&L.test(f);return L.lastIndex=0,a};var M=J(L);return function(f){return N(M,J(f))}},R=function(L){B(N,L);function N(){var M=L!==null&&L.apply(this,arguments)||this;return M.propop=!0,M}return N.prototype.init=function(){this._test=w(this.params,this.options.compare)},N.prototype.next=function(M,f,a){if(!Array.isArray(a)||a.hasOwnProperty(f)){if(this._test(M,f,a))this.done=!0,this.keep=!0}},N}(Q),I=function(L,N,M){return new R(L,N,M)},j=function(L){return function(N,M,f,a){return L(N,M,f,a)}},k=function(L){return j(function(N,M,f,a){var X1=typeof J(N),U1=L(N);return new R(function(f1){var L2=X(f1);return typeof J(L2)===X1&&U1(L2)},M,f,a)})},u=function(L,N,M,f){var a=f.operations[L];if(!a)x(L);return a(N,M,f,L)},x=function(L){throw new Error("Unsupported operation: ".concat(L))},T=function(L,N){for(var M in L)if(N.operations.hasOwnProperty(M)||M.charAt(0)==="$")return!0;return!1},y=function(L,N,M,f,a){if(T(N,a)){var X1=p(N,M,a),U1=X1[0],f1=X1[1];if(f1.length)throw new Error("Property queries must contain only operations, or exact objects.");return new V(L,N,f,a,U1)}return new V(L,N,f,a,[new R(N,f,a)])},g=function(L,N,M){if(N===void 0)N=null;var f=M===void 0?{}:M,a=f.compare,X1=f.operations,U1={compare:a||q,operations:Object.assign({},X1||{})},f1=p(L,null,U1),L2=f1[0],w6=f1[1],b3=[];if(L2.length)b3.push(new V([],L,N,U1,L2));if(b3.push.apply(b3,w6),b3.length===1)return b3[0];return new Z(L,N,U1,b3)},p=function(L,N,M){var f=[],a=[];if(!W(L))return f.push(new R(L,L,M)),[f,a];for(var X1 in L)if(M.operations.hasOwnProperty(X1)){var U1=u(X1,L[X1],L,M);if(U1){if(!U1.propop&&N&&!M.operations[N])throw new Error("Malformed query. ".concat(X1," cannot be matched against property."))}if(U1!=null)f.push(U1)}else if(X1.charAt(0)==="$")x(X1);else a.push(y(X1.split("."),L[X1],X1,L,M));return[f,a]},A1=function(L){return function(N,M,f){return L.reset(),L.next(N,M,f),L.keep}},L0=function(L,N){if(N===void 0)N={};return A1(g(L,null,N))},F2=function(L){B(N,L);function N(){var M=L!==null&&L.apply(this,arguments)||this;return M.propop=!0,M}return N.prototype.init=function(){this._test=w(this.params,this.options.compare)},N.prototype.reset=function(){L.prototype.reset.call(this),this.keep=!0},N.prototype.next=function(M){if(this._test(M))this.done=!0,this.keep=!1},N}(Q),Q0=function(L){B(N,L);function N(){var M=L!==null&&L.apply(this,arguments)||this;return M.propop=!0,M}return N.prototype.init=function(){if(!this.params||typeof this.params!=="object")throw new Error("Malformed query. $elemMatch must by an object.");this._queryOperation=g(this.params,this.owneryQuery,this.options)},N.prototype.reset=function(){L.prototype.reset.call(this),this._queryOperation.reset()},N.prototype.next=function(M){if(E(M)){for(var f=0,a=M.length;f<a;f++){this._queryOperation.reset();var X1=M[f];this._queryOperation.next(X1,f,M,!1),this.keep=this.keep||this._queryOperation.keep}this.done=!0}else this.done=!1,this.keep=!1},N}(Q),B2=function(L){B(N,L);function N(){var M=L!==null&&L.apply(this,arguments)||this;return M.propop=!0,M}return N.prototype.init=function(){this._queryOperation=g(this.params,this.owneryQuery,this.options)},N.prototype.reset=function(){L.prototype.reset.call(this),this._queryOperation.reset()},N.prototype.next=function(M,f,a,X1){this._queryOperation.next(M,f,a,X1),this.done=this._queryOperation.done,this.keep=!this._queryOperation.keep},N}(Q),l2=function(L){B(N,L);function N(){var M=L!==null&&L.apply(this,arguments)||this;return M.propop=!0,M}return N.prototype.init=function(){},N.prototype.next=function(M){if(E(M)&&M.length===this.params)this.done=!0,this.keep=!0},N}(Q),w2=function(L){if(L.length===0)throw new Error("$and/$or/$nor must be a nonempty array")},$4=function(L){B(N,L);function N(){var M=L!==null&&L.apply(this,arguments)||this;return M.propop=!1,M}return N.prototype.init=function(){var M=this;w2(this.params),this._ops=this.params.map(function(f){return g(f,null,M.options)})},N.prototype.reset=function(){this.done=!1,this.keep=!1;for(var M=0,f=this._ops.length;M<f;M++)this._ops[M].reset()},N.prototype.next=function(M,f,a){var X1=!1,U1=!1;for(var f1=0,L2=this._ops.length;f1<L2;f1++){var w6=this._ops[f1];if(w6.next(M,f,a),w6.keep){X1=!0,U1=w6.keep;break}}this.keep=U1,this.done=X1},N}(Q),Gi=function(L){B(N,L);function N(){var M=L!==null&&L.apply(this,arguments)||this;return M.propop=!1,M}return N.prototype.next=function(M,f,a){L.prototype.next.call(this,M,f,a),this.keep=!this.keep},N}($4),JU=function(L){B(N,L);function N(){var M=L!==null&&L.apply(this,arguments)||this;return M.propop=!0,M}return N.prototype.init=function(){var M=this,f=Array.isArray(this.params)?this.params:[this.params];this._testers=f.map(function(a){if(T(a,M.options))throw new Error("cannot nest $ under ".concat(M.name.toLowerCase()));return w(a,M.options.compare)})},N.prototype.next=function(M,f,a){var X1=!1,U1=!1;for(var f1=0,L2=this._testers.length;f1<L2;f1++){var w6=this._testers[f1];if(w6(M)){X1=!0,U1=!0;break}}this.keep=U1,this.done=X1},N}(Q),Hi=function(L){B(N,L);function N(M,f,a,X1){var U1=L.call(this,M,f,a,X1)||this;return U1.propop=!0,U1._in=new JU(M,f,a,X1),U1}return N.prototype.next=function(M,f,a,X1){if(this._in.next(M,f,a),E(a)&&!X1){if(this._in.keep)this.keep=!1,this.done=!0;else if(f==a.length-1)this.keep=!0,this.done=!0}else this.keep=!this._in.keep,this.done=!0},N.prototype.reset=function(){L.prototype.reset.call(this),this._in.reset()},N}(Q),Wi=function(L){B(N,L);function N(){var M=L!==null&&L.apply(this,arguments)||this;return M.propop=!0,M}return N.prototype.next=function(M,f,a,X1,U1){if(!U1)this.done=!0,this.keep=!this.params;else if(a.hasOwnProperty(f)===this.params)this.done=!0,this.keep=!0},N}(Q),qi=function(L){B(N,L);function N(M,f,a,X1){var U1=L.call(this,M,f,a,M.map(function(f1){return g(f1,f,a)}),X1)||this;return U1.propop=!1,w2(M),U1}return N.prototype.next=function(M,f,a,X1){this.childrenNext(M,f,a,X1)},N}(U),Ci=function(L){B(N,L);function N(M,f,a,X1){var U1=L.call(this,M,f,a,M.map(function(f1){return g(f1,f,a)}),X1)||this;return U1.propop=!0,U1}return N.prototype.next=function(M,f,a,X1){this.childrenNext(M,f,a,X1)},N}(U),XU=function(L,N,M){return new R(L,N,M)},EU=function(L,N,M,f){return new F2(L,N,M,f)},YU=function(L,N,M,f){return new $4(L,N,M,f)},GU=function(L,N,M,f){return new Gi(L,N,M,f)},HU=function(L,N,M,f){return new Q0(L,N,M,f)},WU=function(L,N,M,f){return new Hi(L,N,M,f)},qU=function(L,N,M,f){return new JU(L,N,M,f)},CU=k(function(L){return function(N){return N!=null&&N<L}}),QU=k(function(L){return function(N){return N===L||N<=L}}),KU=k(function(L){return function(N){return N!=null&&N>L}}),zU=k(function(L){return function(N){return N===L||N>=L}}),UU=function(L,N,M){var f=L[0],a=L[1];return new R(function(X1){return J(X1)%f===a},N,M)},ZU=function(L,N,M,f){return new Wi(L,N,M,f)},VU=function(L,N,M){return new R(new RegExp(L,N.$options),N,M)},wU=function(L,N,M,f){return new B2(L,N,M,f)},LU={number:function(L){return typeof L==="number"},string:function(L){return typeof L==="string"},bool:function(L){return typeof L==="boolean"},array:function(L){return Array.isArray(L)},null:function(L){return L===null},timestamp:function(L){return L instanceof Date}},RU=function(L,N,M){return new R(function(f){if(typeof L==="string"){if(!LU[L])throw new Error("Type alias does not exist");return LU[L](f)}return f!=null?f instanceof L||f.constructor===L:!1},N,M)},NU=function(L,N,M,f){return new qi(L,N,M,f)},PU=function(L,N,M,f){return new Ci(L,N,M,f)},IU=function(L,N,M){return new l2(L,N,M,"$size")},MU=function(){return null},jU=function(L,N,M){var f;if(G(L))f=L;else if(!process.env.CSP_ENABLED)f=new Function("obj","return "+L);else throw new Error('In CSP mode, sift does not support strings in "$where" condition');return new R(function(a){return f.bind(a)(a)},N,M)},Qi=Object.freeze({__proto__:null,$Size:l2,$all:PU,$and:NU,$elemMatch:HU,$eq:XU,$exists:ZU,$gt:KU,$gte:zU,$in:qU,$lt:CU,$lte:QU,$mod:UU,$ne:EU,$nin:WU,$nor:GU,$not:wU,$options:MU,$or:YU,$regex:VU,$size:IU,$type:RU,$where:jU}),TU=function(L,N,M){var f=M===void 0?{}:M,a=f.compare,X1=f.operations;return g(L,N,{compare:a,operations:Object.assign({},Qi,X1||{})})},Ki=function(L,N){if(N===void 0)N={};var M=TU(L,null,N);return A1(M)};A.$Size=l2,A.$all=PU,A.$and=NU,A.$elemMatch=HU,A.$eq=XU,A.$exists=ZU,A.$gt=KU,A.$gte=zU,A.$in=qU,A.$lt=CU,A.$lte=QU,A.$mod=UU,A.$ne=EU,A.$nin=WU,A.$nor=GU,A.$not=wU,A.$options=MU,A.$or=YU,A.$regex=VU,A.$size=IU,A.$type=RU,A.$where=jU,A.EqualsOperation=R,A.createDefaultQueryOperation=TU,A.createEqualsOperation=I,A.createOperationTester=A1,A.createQueryOperation=g,A.createQueryTester=L0,A.default=Ki,Object.defineProperty(A,"__esModule",{value:!0})})});var sl=z((Lf1,Vz)=>{var nl=il();Vz.exports=nl.default;Object.assign(Vz.exports,nl)});var Ac=z((Rf1,el)=>{var kZ1=MJ(),OZ1=kX(),uZ1=ll(),fX=f0(),SZ1=Zz(),ol=CB(),al=LJ(),fZ1=CC(),wz=_6(),rl=sl().default,_X=Q1(),{populateModelSymbol:_Z1}=$1();el.exports=function A(F){let B=Object.assign({},fX(F,"allOptions.options.options"),fX(F,"allOptions.options")),D=Object.assign({},F.options,B,{justOne:F.justOne,isVirtual:F.isVirtual});D.$nullIfNotFound=F.isVirtual;let $=F.populatedModel,J=[].concat(F.rawIds);F.allIds=[].concat(F.allIds),uZ1(F.rawIds,F.rawDocs,F.rawOrder,D);let{docs:X,rawIds:E,options:Y}=F,G=F.count&&F.isVirtual,H,W=0;function q(C){if(++W,G)return C;if(C instanceof OZ1)return C.val;if(C===void 0)return C;let Q=F.allIds[H];if(F.path.endsWith(".$*"))return QB(C,Y,D,Q);if(F.justOne===!0&&Array.isArray(C)){let K=[];for(let U of C){let Z=ol.get(U);if(Z==null||Z===$)K.push(U)}while(C.length>K.length)Array.prototype.pop.apply(C,[]);for(let U=0;U<K.length;++U)C[U]=K[U];return QB(C[0],Y,D,Q)}else if(F.justOne===!1&&!Array.isArray(C))return QB([C],Y,D,Q);else if(F.justOne===!0&&!Array.isArray(C)&&Array.isArray(Q))return QB(C,Y,D,C==null?C:Q[W-1]);return QB(C,Y,D,Q)}for(H=0;H<X.length;++H){W=0;let C=F.path.endsWith(".$*")?F.path.slice(0,-3):F.path,Q=wz.get(C,X[H],al);if(Q==null&&!SZ1(F.originalModel.schema,C))continue;let K;if(G)K=xZ1(E[H]);else if(Array.isArray(F.match))K=Array.isArray(E[H])?E[H].filter((I)=>I==null||rl(F.match[H])(I)):[E[H]].filter((I)=>I==null||rl(F.match[H])(I))[0];else K=E[H];let U=F.originalModel.schema,Z=fX(X[H],"$__",null)!=null,V=Z?Q instanceof Map:_X.isPOJO(Q);if(V=V&&fX(U._getSchema(C),"$isSchemaMap"),!F.isVirtual&&V){let I=Q instanceof Map?Array.from(Q.keys()):Object.keys(Q);K=K.reduce((j,k,u)=>{return j.set(I[u],k),j},new Map)}if(Z&&Array.isArray(K)){for(let I of K)if(I!=null&&I.$__!=null)I.$__.parent=X[H]}else if(Z&&K!=null&&K.$__!=null)K.$__.parent=X[H];if(F.isVirtual&&Z){if(X[H].$populated(C,F.justOne?J[0]:J,F.allOptions),Array.isArray(K))K=K.map((I)=>I==null?void 0:I);wz.set(C,K,X[H],function I(j,k,u){if(arguments.length>=3)return j[k]=u,j[k];if(j instanceof Map&&k==="$*")return[...j.values()];return j[k]},q,!1);continue}let w=C.split("."),R=X[H];for(let I=0;I<w.length-1;++I){if(Array.isArray(R)&&!_X.isArrayIndex(w[I]))break;if(w[I]==="$*")break;if(R[w[I]]==null){let j=w.slice(0,I+1).join("."),k=U._getSchema(j);if(K==null&&k!=null&&k.$isMongooseArray)break;R[w[I]]={}}if(R=R[w[I]],typeof R!=="object")break}if(X[H].$__){if(F.allOptions.options[_Z1]=F.allOptions.model,X[H].$populated(C,F.unpopulatedValues[H],F.allOptions.options),K!=null&&K.$__!=null)K.$__.wasPopulated={value:F.unpopulatedValues[H]};if(K instanceof Map&&!K.$isMongooseMap)K=new kZ1(K,C,X[H],X[H].schema.path(C).$__schemaType)}if(wz.set(C,K,X[H],al,q,!1),X[H].$__)fZ1(X[H],[F.allOptions.options])}};function xZ1(A){if(Array.isArray(A)){if(A.some((F)=>Array.isArray(F)||F===null))return A.map((F)=>{if(F==null)return 0;if(Array.isArray(F))return F.filter((B)=>B!=null).length;return 1});return A.filter((F)=>F!=null).length}return A==null?0:1}function QB(A,F,B,D){let $=typeof B.transform==="function",J=$?B.transform:(X)=>X;if(Array.isArray(A)){let X=[],E=A.length;for(let H=0;H<E;++H){let W=A[H],q=Array.isArray(D)?D[H]:D;if(!Lz(W)&&(!B.retainNullValues||W!=null)&&!$)continue;else if(!B.retainNullValues&&W==null)continue;else if($)W=J(Lz(W)?W:null,q);if(tl(W,F),X.push(W),F.originalLimit&&X.length>=F.originalLimit)break}let Y=X.length;while(A.length>Y)Array.prototype.pop.apply(A,[]);let G=0;if(_X.isMongooseArray(A))for(G=0;G<Y;++G)A.set(G,X[G],!0);else for(G=0;G<Y;++G)A[G]=X[G];return A}if(Lz(A)||_X.isPOJO(A))return tl(A,F),J(A,D);if(A instanceof Map)return A;if(B.justOne===!1)return[];return A==null?J(A,D):J(null,D)}function tl(A,F){if(A!=null&&F.excludeId)if(typeof A.$__setValue==="function")delete A._doc._id;else delete A._id}function Lz(A){if(A==null)return!1;return Array.isArray(A)||A.$isMongooseMap||A.$__!=null||ol.has(A)}});var $c=z((Nf1,Dc)=>{var gZ1=kX(),bZ1=KC(),{trusted:xX}=r8(),Fc=LX();Dc.exports=function A(F,B,D,$,J){let X=yZ1(B);if(D.size===1){let E=Array.from(D)[0],Y=$.schema.path(E);if(E!=="_id"||!X._id)F=Bc(F,Y,J),X[E]=xX({$in:F});else if(E==="_id"&&X._id){let H=Fc(X[E])?X[E]:{$eq:X[E]};X[E]={...xX({$in:F}),...H}}let G=bZ1(E);for(let H=0;H<G.length-1;++H){let W=G[H];if(X[W]!=null&&X[W].$elemMatch!=null){X[W].$elemMatch[E.slice(W.length+1)]=xX({$in:F}),delete X[E];break}}}else{let E=[];if(Array.isArray(X.$or))X.$and=[{$or:X.$or},{$or:E}],delete X.$or;else X.$or=E;for(let Y of D)if(Y!=="_id"||!X._id){let G=$.schema.path(Y);F=Bc(F,G,J),E.push({[Y]:{$in:F}})}else if(Y==="_id"&&X._id){let G=Fc(X[Y])?X[Y]:{$eq:X[Y]};X[Y]={...xX({$in:F}),...G}}}return X};function Bc(A,F,B){if(A=A.filter((D)=>!(D instanceof gZ1)),!B)return A;return A.filter((D)=>{try{return F.cast(D),!0}catch($){return!1}})}function yZ1(A){if(Array.isArray(A)){if(A.length>1)return{$or:[].concat(A.map((F)=>Object.assign({},F)))};return Object.assign({},A[0])}return Object.assign({},A)}});var Yc=z((Pf1,Ec)=>{/*!
 * ignore
 */var Jc=R7(),hZ1=f0(),vZ1=$3(),Xc=CB(),j5=_6(),mZ1=$1().populateModelSymbol;Ec.exports=function A(F,B,D,$){let J=B.path($),X=D;if(J)return J;let E=B.discriminatorMapping&&B.discriminatorMapping.key;if(E&&F!=null){if(D!=null&&D[E]!=null){let H=vZ1(F.discriminators,D[E]);B=H?H.schema:B}else if(F.discriminators!=null)return Object.keys(F.discriminators).reduce((H,W)=>{let q=F.discriminators[W];return H.concat(A(q,q.schema,null,$))},[])}function Y(H,W,q,C){let Q=H.length+1,K,U;while(Q--){if(U=H.slice(0,Q).join("."),K=W.path(U),K==null)continue;if(K.caster){if(K.caster instanceof Jc)return K.caster;let w=null;if(K.schema!=null&&K.schema.discriminators!=null){let R=K.schema.discriminators,I=U+"."+K.schema.options.discriminatorKey,j=q?j5.get(I,q)||[]:[];w=Object.keys(R).reduce(function(k,u){let x=R[u].discriminatorMapping.value;if(D==null||j.indexOf(u)!==-1||j.indexOf(x)!==-1)k.push(R[u]);return k},[])}if(Q!==H.length&&K.schema){let R;if(H[Q]==="$"){if(Q+1===H.length)return K;if(R=Y(H.slice(Q+1),W,q?j5.get(U,q):null,C.concat(H.slice(0,Q))),R)R.$parentSchemaDocArray=R.$parentSchemaDocArray||(K.schema.$isSingleNested?null:K);return R}if(w!=null&&w.length>0){R=[];for(let I of w){let j=Y(H.slice(Q),I,q?j5.get(U,q):null,C.concat(H.slice(0,Q)));if(j!=null){if(j.$parentSchemaDocArray=j.$parentSchemaDocArray||(K.schema.$isSingleNested?null:K),j.$parentSchemaDocArray)R.$parentSchemaDocArray=j.$parentSchemaDocArray;R.push(j)}}return R}else{if(R=Y(H.slice(Q),K.schema,q?j5.get(U,q):null,C.concat(H.slice(0,Q))),R)R.$parentSchemaDocArray=R.$parentSchemaDocArray||(K.schema.$isSingleNested?null:K);return R}}else if(Q!==H.length&&K.$isMongooseArray&&K.casterConstructor.$isMongooseArray){let R=K;while(R.$isMongooseArray&&!R.$isMongooseDocumentArray)R=R.casterConstructor;let I=Y(H.slice(Q),R.schema,null,C.concat(H.slice(0,Q)));if(I!=null)return I;if(R.schema.discriminators){let j=[];for(let k of Object.keys(R.schema.discriminators)){let u=R.schema.discriminators[k]||R.schema,x=Y(H.slice(Q),u,null,C.concat(H.slice(0,Q)));if(x!=null)j.push(x)}if(j.length>0)return j}}}else if(K.$isSchemaMap&&K.$__schemaType instanceof Jc)return K.$__schemaType;let Z=C.concat([U]).join(".");if(X!=null&&X.$__&&X.$populated(Z,!0)&&Q<H.length){let w=X.$populated(Z,!0).options[mZ1];if(w!=null)return Y(H.slice(Q),w.schema,q?j5.get(U,q):null,C.concat(H.slice(0,Q)))}let V=hZ1(X,U);if(V!=null){let w=Array.isArray(V)&&V.length>0?Xc.get(V[0]):Xc.get(V),R=w!=null?w.schema:null;if(R!=null){let I=Y(H.slice(Q),R,q?j5.get(U,q):null,C.concat(H.slice(0,Q)));if(I!=null)return I.$parentSchemaDocArray=I.$parentSchemaDocArray||(R.$isSingleNested?null:R),I}}return K}}let G=$.split(".");for(let H=0;H<G.length;++H)if(G[H]==="$")G[H]="0";return Y(G,B,D,[])}});var Qc=z((If1,Cc)=>{var jz=G6(),dZ1=kX(),lZ1=I0(),Y3=f0(),cZ1=$3(),pZ1=o2(),Gc=Yc(),iZ1=Zz(),KB=LJ(),g7=_6(),gX=tC(),h2=Q1(),Pz=$1().modelSymbol,Rz=$1().populateModelSymbol,Iz=L7().schemaMixedSymbol,nZ1=eq();Cc.exports=function A(F,B,D){let $,J=B.length,X=[],E=D.model&&D.model.modelName||D.model,Y,G,H,W={},q=F.schema;if(D._localModel!=null&&D._localModel.schema.nested[D.path])return[];let C=iZ1(F.schema,D.path);if((C==null?null:C.virtual)!=null)return sZ1(F,B,D,C);let K=Gc(F,q,null,D.path);if(K=Array.isArray(K)?K:[K].filter((V)=>V!=null),!(D.strictPopulate===!1||D.options?.strictPopulate===!1)&&K.length===0&&D._localModel!=null)return new nZ1(D._fullPath||D.path);for(let V=0;V<J;V++){$=B[V];let w=null;if($.$__!=null&&$.populated(D.path)){if((D.forceRepopulate!=null?D.forceRepopulate:$.constructor.base.options.forceRepopulate)===!1)continue}let R=$!=null&&$.$__!=null?$.$__schema:q;if(Y=Gc(F,R,$,D.path),Y!=null&&Y.$isMongooseDocumentArray&&Y.options.ref==null&&Y.options.refPath==null)continue;if(Y&&Y.$parentSchemaDocArray&&Y3(D,"options.sort")!=null)return new jz("Cannot populate with `sort` on path "+D.path+" because it is a subproperty of a document array");H=null;let j=!1,k=null,u=null,x=null;if(Y!=null&&Y.instance==="Embedded"){if(Y.options.ref){let Q0={localField:D.path+"._id",foreignField:"_id",justOne:!0},B2=Z($,Y,E,F),l2=g7.get(D.path,$),w2=g7.get("_id",l2);Mz(F,X,W,B2.modelNames,D,Q0,w2,$,u,l2)}continue}if(Array.isArray(Y)){let Q0=Y;for(let B2 of Q0){let l2,w2;try{w2=Z($,B2,E,F),l2=w2.modelNames,j=j||w2.isRefPath,k=k||w2.refPath,w=w2.justOne}catch($4){return $4}if(j&&!w2.isRefPath)continue;if(!l2)continue;H=H||[];for(let $4 of l2)if(H.indexOf($4)===-1)H.push($4)}}else{try{let Q0=Z($,Y,E,F);if(H=Q0.modelNames,j=Q0.isRefPath,k=k||Q0.refPath,w=Q0.justOne,u=Y3(Y,"options.populate",null),j)x=H,H=Array.from(new Set(H))}catch(Q0){return Q0}if(!H)continue}let T={},y=D.path,g="_id";if("justOne"in D&&D.justOne!==void 0)w=D.justOne;else if(Y&&!Y[Iz]){if(D.path.endsWith("."+Y.path)||D.path===Y.path)w=Array.isArray(Y)?Y.every((Q0)=>!Q0.$isMongooseArray):!Y.$isMongooseArray}if(!H)continue;T.isVirtual=!1,T.justOne=w,T.localField=y,T.foreignField=g;let p=Wc($,y,F,D,null,Y),A1=String(h2.getValue(g,$));D._docs[A1]=Array.isArray(p)?p.slice():p;let L0=Y3(D,"match",null),F2=typeof L0==="function";if(F2)L0=L0.call($,$);if(kz(L0),T.match=L0,T.hasMatchFunction=F2,T.isRefPath=j,T.modelNamesInOrder=x,j)H=aZ1($,q,T,D,k,p)||H;try{Mz(F,X,W,H,D,T,p,$,u)}catch(Q0){return Q0}}return X;function Z(V,w,R,I){let j,k=!1,u=null,x=w;if(w&&w.instance==="Array")w=w.caster;if(w&&w.$isSchemaMap)w=w.$__schemaType;let T=w&&w.options&&w.options.ref;if(G=w&&w.options&&w.options.refPath,w!=null&&w[Iz]&&!T&&!G&&!R)return{modelNames:null};if(R)j=[R];else if(G!=null){if(typeof G==="function"){let y=D.path.slice(0,D.path.length-w.path.length-1),g=g7.get(y,V,KB),p=Array.isArray(g)?h2.array.flatten(g):g?[g]:[];j=new Set;for(let A1 of p)G=G.call(A1,A1,D.path),gX(G,V,D.path,q,D._queryProjection).forEach((L0)=>j.add(L0));j=Array.from(j)}else j=gX(G,V,D.path,q,D._queryProjection);k=!0}else{let y,g,p,A1,L0=I,F2=I.schema.options.discriminatorKey;if(!w&&F2&&(A1=h2.getValue(F2,V))){let Q0=cZ1(I.discriminators,A1)||I;if(Q0!=null)L0=Q0;else try{L0=Tz(I.db,A1)}catch(B2){return B2}if(p=L0.schema._getSchema(D.path),p&&p.caster)p=p.caster}else p=w;if(x&&x.path.endsWith(".$*"))u=!x.$isMongooseArray&&!x._arrayPath;else if(p!=null)u=!p.$isMongooseArray&&!p._arrayPath;if((y=Y3(p,"options.ref"))!=null)if(p!=null&&typeof y==="function"&&D.path.endsWith("."+p.path)){j=new Set;let Q0=D.path.slice(0,D.path.length-p.path.length-1),B2=g7.get(Q0,V,KB),l2=Array.isArray(B2)?h2.array.flatten(B2):B2?[B2]:[];for(let w2 of l2)j.add(Nz(y,w2));if(l2.length===0)j=[Nz(y,V)];else j=Array.from(j)}else y=Nz(y,V),j=[y];else if((p=Y3(w,"options.refPath"))!=null)if(k=!0,typeof g==="function"){let Q0=D.path.slice(0,D.path.length-p.path.length-1),B2=g7.get(Q0,V,KB),l2=Array.isArray(B2)?h2.array.flatten(B2):B2?[B2]:[];j=new Set;for(let w2 of l2)g=g.call(w2,w2,D.path),gX(g,V,D.path,q,D._queryProjection).forEach(($4)=>j.add($4));j=Array.from(j)}else j=gX(g,V,D.path,q,D._queryProjection)}if(!j)if(D._localModel==null)j=[I.modelName];else return{modelNames:j,justOne:u,isRefPath:k,refPath:G};if(!Array.isArray(j))j=[j];return{modelNames:j,justOne:u,isRefPath:k,refPath:G}}};/*!
 * ignore
 */function sZ1(A,F,B,D){let $=[],J={},X=D.virtual;for(let E of F){let Y=null,G={},H,W=D.nestedSchemaPath?D.nestedSchemaPath+".":"";if(typeof B.localField==="string")H=B.localField;else if(typeof X.options.localField==="function")H=W+X.options.localField.call(E,E);else if(Array.isArray(X.options.localField))H=X.options.localField.map((V)=>W+V);else H=W+X.options.localField;if(G.count=X.options.count,X.options.skip!=null&&!B.hasOwnProperty("skip"))B.skip=X.options.skip;if(X.options.limit!=null&&!B.hasOwnProperty("limit"))B.limit=X.options.limit;if(X.options.perDocumentLimit!=null&&!B.hasOwnProperty("perDocumentLimit"))B.perDocumentLimit=X.options.perDocumentLimit;let q=X.options.foreignField;if(!H||!q)return new jz(`Cannot populate virtual \`${B.path}\` on model \`${A.modelName}\`, because options \`localField\` and / or \`foreignField\` are missing`);if(typeof H==="function")H=H.call(E,E);if(typeof q==="function")q=q.call(E,E);G.isRefPath=!1;let C=null;if("justOne"in B&&B.justOne!==void 0)C=B.justOne;if(Y=X._getModelNamesForPopulate(E),X.options.refPath)C=!!X.options.justOne,G.isRefPath=!0;else if(X.options.ref)C=!!X.options.justOne;G.isVirtual=!0,G.virtual=X,G.justOne=C;let Q=Y3(G,"virtual.options.match",null)||Y3(G,"virtual.options.options.match",null),K=Y3(B,"match",null)||Q,U=typeof K==="function";if(U)K=K.call(E,E,G.virtual);if(Array.isArray(H)&&Array.isArray(q)&&H.length===q.length){K=Object.assign({},K);for(let V=1;V<H.length;++V)K[q[V]]=qc(g7.get(H[V],E,KB),A.schema),U=!0;H=H[0],q=q[0]}G.localField=H,G.foreignField=q,G.match=K,G.hasMatchFunction=U,kz(K);let Z=Wc(E,H,A,B,X);try{Mz(A,$,J,Y,B,G,Z,E)}catch(V){return V}}return $}/*!
 * ignore
 */function Mz(A,F,B,D,$,J,X,E,Y,G){let H=$.connection!=null?$.connection:A.db;if(G=G===void 0?X:G,Array.isArray(G))G=h2.cloneArrays(G);if(D==null)return;let W=h2.array.flatten(D),q=W.length;while(q--){let C=W[q];if(C==null)continue;let Q;if($.model&&$.model[Pz])Q=$.model;else if(C[Pz])Q=C,C=Q.modelName;else try{Q=Tz(H,C)}catch(V){if(X!==void 0)throw V;Q=null}let K=X,U=J.modelNamesInOrder?J.modelNamesInOrder:D;if(J.isRefPath&&Array.isArray(X)&&X.length===U.length)K=Hc(X,U,C);let Z=$.perDocumentLimit==null?Y3($,"options.perDocumentLimit",null):$.perDocumentLimit;if(!B[C]||Z!=null){let V={model:Q};if(J.isVirtual&&Y3(J.virtual,"options.options"))V.options=lZ1(J.virtual.options.options);else if(Y!=null)V.options=Object.assign({},Y);h2.merge(V,$),$[Rz]=Q,V[Rz]=Q,B[C]={model:Q,options:V,match:J.hasMatchFunction?[J.match]:J.match,docs:[E],ids:[K],allIds:[X],unpopulatedValues:[G],localField:new Set([J.localField]),foreignField:new Set([J.foreignField]),justOne:J.justOne,isVirtual:J.isVirtual,virtual:J.virtual,count:J.count,[Rz]:Q},F.push(B[C])}else if(B[C].localField.add(J.localField),B[C].foreignField.add(J.foreignField),B[C].docs.push(E),B[C].ids.push(K),B[C].allIds.push(X),B[C].unpopulatedValues.push(G),J.hasMatchFunction)B[C].match.push(J.match)}}function Tz(A,F){if(A.models[F]==null&&A._parent!=null)return Tz(A._parent,F);return A.model(F)}function Hc(A,F,B){if(!Array.isArray(F))return F===B?Array.isArray(A)?h2.array.flatten(A):[A]:[];if(Array.isArray(A)&&Array.isArray(F))return A.flatMap((D,$)=>Hc(D,F[$],B));return[]}/*!
 * ignore
 */function Nz(A,F){if(typeof A==="function"&&!A[Pz])return A.call(F,F);return A}/*!
 * ignore
 */function Wc(A,F,B,D,$,J){let X=B.schema._getPathType(F),E=X==="real"?B.schema.path(F):X.schema,Y=E&&E.getters?E.getters:[];F=E!=null&&E.instance==="Embedded"?F+"._id":F;let G=Y3(D,"options",{}),H="getters"in G?G.getters:Y3($,"options.getters",!1);if(Y.length!==0&&H){let W=A.$__!=null?A:B.hydrate(A),q=h2.getValue(F,A);if(Array.isArray(q)){let C=h2.getValue(F.split(".").slice(0,-1),W);return q.map((Q,K)=>E.applyGetters(Q,C[K]))}else return E.applyGetters(q,W)}else return qc(g7.get(F,A,KB),J)}function qc(A,F){if(A!=null&&A.$__!=null)return A._doc._id;if(A!=null&&A._id!=null&&(F==null||!F.$isSchemaMap))return A._id;if(Array.isArray(A)){let B=A.__array!=null?A.__array:A;for(let D=0;D<B.length;++D)if(B[D]!=null&&B[D].$__!=null)B[D]=B[D]._doc._id;if(h2.isMongooseArray(A)&&A.$schema())return A.$schema()._castForPopulate(A,A.$parent());return[].concat(A)}if(pZ1(A)==="Object"&&(F==null||F[Iz]==null)){let B=[];for(let D of Object.keys(A))B.push(A[D]);return B}if(A instanceof Map)return Array.from(A.values());return A}/*!
 * ignore
 */function aZ1(A,F,B,D,$,J){if(!B.isRefPath||$==null)return;let X=$.split("."),E="",Y=void 0;for(let G=0;G<X.length;++G){let H=X[G];E=E+(E.length===0?"":".")+H;let W=F.path(E);if(W!=null&&W.$isMongooseArray&&W.caster.discriminators!=null&&Object.keys(W.caster.discriminators).length!==0){let q=h2.getValue(E,A),C=D.path.substring(E.length+1),Q=W.caster.schema.options.discriminatorKey;Y=[];for(let K of q){let U=h2.getValue(Q,K),Z=W.caster.discriminators[U],V=Z&&Z.schema;if(V==null)continue;let w=V.path(C);if(w==null||w.options.refPath==null){let I=h2.getValue(B.localField.substring(E.length+1),K);J.forEach((j,k)=>{if(j===I)J[k]=dZ1(j)});continue}let R=h2.getValue(X.slice(G+1).join("."),K);Y.push(R)}}}return Y}function kz(A){if(A==null)return;if(typeof A!=="object")return;for(let F of Object.keys(A)){if(F==="$where")throw new jz("Cannot use $where filter with populate() match");if(A[F]!=null&&typeof A[F]==="object")kz(A[F])}}});var zc=z((Mf1,Kc)=>{var rZ1=f0();Kc.exports=function A(F){if(Array.isArray(F)){let D=Object.keys(F[0]);return D.length===1&&D[0]==="_id"&&F[0]._id!=="hashed"}if(typeof F!=="object")return!1;let B=rZ1(F,"key",{});return Object.keys(B).length===1&&B.hasOwnProperty("_id")}});var Vc=z((jf1,Zc)=>{var bX=f0(),Uc=Q1();Zc.exports=function A(F,B,D){if(D.textIndexVersion!=null){delete D.key._fts,delete D.key._ftsx;let E={...D.weights,...D.key};if(Object.keys(E).length!==Object.keys(F).length)return!1;for(let Y of Object.keys(E)){if(!(Y in F))return!1;let G=E[Y];if(G!==bX(B,"weights."+Y)&&!(G===1&&bX(B,"weights."+Y)==null))return!1}if(B.default_language!==D.default_language)return D.default_language==="english"&&B.default_language==null;return!0}let $=["unique","partialFilterExpression","sparse","expireAfterSeconds","collation"];for(let E of $){if(!(E in B)&&!(E in D))continue;if(E==="collation"){if(B[E]==null||D[E]==null)return B[E]==null&&D[E]==null;let Y=Object.keys(B.collation),G=B.collation,H=D.collation;for(let W of Y)if(bX(G,W)!==bX(H,W))return!1}else if(!Uc.deepEqual(B[E],D[E]))return!1}let J=Object.keys(F),X=Object.keys(D.key);if(J.length!==X.length)return!1;for(let E=0;E<J.length;++E){if(J[E]!==X[E])return!1;if(!Uc.deepEqual(F[J[E]],D.key[X[E]]))return!1}return!0}});var Lc=z((Tf1,wc)=>{wc.exports=function A(F,B){if(B.timeseries==null)return!1;let{timeField:D,metaField:$}=B.timeseries;if(typeof D!=="string"||typeof $!=="string")return!1;return Object.keys(F.key).length===2&&F.key[D]===1&&F.key[$]===1}});var Ic=z((kf1,Pc)=>{var tZ1=LX();function oZ1(A,F){return Nc({baseModelName:A.baseModelName,discriminatorMapping:A.schema.discriminatorMapping,indexes:F,indexesType:"schema"})}function eZ1(A,F){return Nc({baseModelName:A.baseModelName,discriminatorMapping:A.schema.discriminatorMapping,indexes:F,indexesType:"db"})}Pc.exports={getRelatedSchemaIndexes:oZ1,getRelatedDBIndexes:eZ1};function Nc({baseModelName:A,discriminatorMapping:F,indexes:B,indexesType:D}){let $=F&&F.key,J=F&&F.value;if(!$)return B;if(Boolean(A))return B.filter((E)=>{let Y=Rc(E,D);return Y&&Y[$]===J});return B.filter((E)=>{let Y=Rc(E,D);return!Y||!Y[$]||tZ1(Y[$])&&!("$eq"in Y[$])})}function Rc(A,F){if(F==="schema"){let B=A[1];return B&&B.partialFilterExpression}return A.partialFilterExpression}});var jc=z((Of1,Mc)=>{Mc.exports=AV1;/*!
 * ignore
 */function AV1(A,F,B){let D=0,$=0,J=null;if(F<=0)throw new Error("Limit must be positive");if(A.length===0)return B(null,[]);for(let G=0;G<A.length&&G<F;++G)X();function X(){A[$+D](Y($+D)),++D}let E=[];function Y(G){return(H,W)=>{if(--D,++$,J!=null)return;if(H!=null)return J=H,B(J);if(E[G]=W,$===A.length)return B(null,E);else if($+D<A.length)X()}}}});var kc=z((uf1,Tc)=>{Tc.exports=function A(F,B,D){if(B==null)return;for(let $=0;$<B.length;++$)if(Array.isArray(B[$]))A(F,B[$],D+"."+$);else F.push(D+"."+$)}});var _c=z((Sf1,fc)=>{var Oc=f0(),uc=_6(),Sc=Bz();/*!
 * ignore
 */fc.exports=function A(F,B,D){let $=Sc(Oc(B,"select",null),!0)||Sc(Oc(B,"options.select",null),!0);if($==null)return;for(let J of F){if(!$.hasOwnProperty("-"+J))continue;for(let X of D)if(X.$__!=null)uc.unset(J,X._doc);else uc.unset(J,X)}}});var zz=z((ec,Ap)=>{/*!
 * Module dependencies.
 */var FV1=qz(),BV1=uq(),t3=D3(),DV1=m$(),uz=i("events").EventEmitter,_z=U7(),vX=WK(),z1=G6(),$V1=a$(),JV1=lq(),yX=PX(),XV1=Cl(),Sz=I7(),hX=V7(),dc=hq(),xc=mq(),EV1=r$(),YV1=Kl(),GV1=Kz(),HV1=IJ(),lc=Zl(),WV1=Ll(),qV1=dK(),cc=Il(),CV1=jl(),pc=kl(),QV1=_l(),ic=lK(),KV1=bl(),zV1=Ac(),UV1=kK(),y4=I0(),ZV1=$c(),nc=jK(),Oz=KK(),sc=AJ(),VV1=iJ(),fz=OQ(),ZB=f0(),wV1=o2(),zB=$3(),LV1=Qc(),VB=A3(),xz=I3().internalToObjectOptions,gz=zc(),ac=Vc(),RV1=Lc(),{getRelatedDBIndexes:NV1,getRelatedSchemaIndexes:PV1}=Ic(),bz=eC(),IV1=BJ(),MV1=CB(),jV1=jc(),TV1=Hz(),rc=kc(),kV1=_c(),OV1=wK(),gc=i("util"),X0=Q1(),uV1=QC(),SV1=iq(),fV1=s$(),b7=OK(),y7=Symbol("mongoose#Model#collection"),h7=Symbol("mongoose#Model#db"),tc=$1().modelSymbol,UB=Symbol("mongoose#Model#subclassed"),{VERSION_INC:mX,VERSION_WHERE:bc,VERSION_ALL:_V1}=t3,xV1=Object.assign({},xz,{bson:!0});function m(A,F,B){if(F instanceof Sz)throw new TypeError("2nd argument to `Model` constructor must be a POJO or string, **not** a schema. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");if(typeof A==="string")throw new TypeError("First argument to `Model` constructor must be an object, **not** a string. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");t3.call(this,A,F,B)}Object.setPrototypeOf(m.prototype,t3.prototype);m.prototype.$isMongooseModelPrototype=!0;m.prototype.db;m.useConnection=function A(F){if(!F)throw new Error("Please provide a connection.");if(this.db)delete this.db.models[this.modelName],delete this.prototype.db,delete this.prototype[h7],delete this.prototype.collection,delete this.prototype.$collection,delete this.prototype[y7];this.db=F;let B=F.collection(this.modelName,F.options);return this.prototype.collection=B,this.prototype.$collection=B,this.prototype[y7]=B,this.prototype.db=F,this.prototype[h7]=F,this.collection=B,this.$__collection=B,F.models[this.modelName]=this,this};m.prototype.collection;m.prototype.$__collection;m.prototype.modelName;m.prototype.$where;m.prototype.baseModelName;m.events;m._middleware;/*!
 * ignore
 */function oc(A,F){if(A.$where==null)return;for(let B of Object.keys(A.$where))F[B]=A.$where[B]}/*!
 * ignore
 */m.prototype.$__handleSave=function(A,F){let B={};if(ic(this.$__schema,A),typeof A.writeConcern!=="undefined"){if(B.writeConcern={},"w"in A.writeConcern)B.writeConcern.w=A.writeConcern.w;if("j"in A.writeConcern)B.writeConcern.j=A.writeConcern.j;if("wtimeout"in A.writeConcern)B.writeConcern.wtimeout=A.writeConcern.wtimeout}else{if("w"in A)B.w=A.w;if("j"in A)B.j=A.j;if("wtimeout"in A)B.wtimeout=A.wtimeout}if("checkKeys"in A)B.checkKeys=A.checkKeys;let D=this.$session(),$=this[h7].base.transactionAsyncLocalStorage?.getStore();if(D!=null)B.session=D;else if(!A.hasOwnProperty("session")&&$?.session!=null)B.session=$.session;if(this.$isNew){let E=this.toObject(xV1);if((E||{})._id===void 0){VB(function(){F(new z1("document must have an _id before saving"))});return}this.$__version(!0,E),this[y7].insertOne(E,B).then((Y)=>F(null,Y),(Y)=>{T5(this,!0),F(Y,null)}),this.$__reset(),T5(this,!1),this.$__.inserting=!0;return}this.$__.inserting=!1;let J=this.$__delta();if(A.pathsToSave)for(let E in J[1].$set)if(A.pathsToSave.includes(E))continue;else if(A.pathsToSave.some((Y)=>E.slice(0,Y.length)===Y&&E.charAt(Y.length)==="."))continue;else delete J[1].$set[E];if(J){if(J instanceof z1){F(J);return}let E=this.$__where(J[0]);if(E instanceof z1){F(E);return}oc(this,E);let Y=J[1];if(this.$__schema.options.minimize)for(let G of Object.values(Y)){if(G==null)continue;for(let H of Object.keys(G)){if(G[H]==null||typeof G[H]!=="object")continue;if(!X0.isPOJO(G[H]))continue;if(uV1(G[H]),Object.keys(G[H]).length===0)delete G[H],Y.$unset=Y.$unset||{},Y.$unset[H]=1}}this[y7].updateOne(E,Y,B).then((G)=>{if(G==null)G={$where:E};else G.$where=E;F(null,G)},(G)=>{this.$__undoReset(),F(G)})}else{X.call(this);return}this.$__.modifiedPaths=this.modifiedPaths().concat(Object.keys(this.$__.activePaths.getStatePaths("default"))),this.$__reset(),T5(this,!1);function X(){let E=Object.assign({},A,B),Y=this.$__where(),G=this.$__schema.options.optimisticConcurrency;if(G&&!Array.isArray(G)){let H=this.$__schema.options.versionKey,W=this.$__getValue(H);if(W!=null)Y[H]=W}qV1(this.$__schema,E),this.constructor.collection.findOne(Y,E).then((H)=>{F(null,{$where:Y,matchedCount:!H?0:1})}).catch(F)}};/*!
 * ignore
 */m.prototype.$__save=function(A,F){this.$__handleSave(A,(B,D)=>{if(B)return B=this.$__schema._transformDuplicateKeyError(B),this.$__schema.s.hooks.execPost("save:error",this,[this],{error:B},(E)=>{F(E,this)});let $=0;if((A!=null?A.writeConcern!=null?A.writeConcern.w:A.w:0)!==0){if(D!=null)if(Array.isArray(D))$=D.length;else if(D.matchedCount!=null)$=D.matchedCount;else $=D;if(this.$__.version&&!this.$__.inserting){let E=mX===(mX&this.$__.version);this.$__.version=void 0;let Y=this.$__schema.options.versionKey,G=this.$__getValue(Y)||0;if($<=0){this.$__undoReset();let H=this.$__.$versionError||new dc(this,G,this.$__.modifiedPaths);return F(H)}if(E)this.$__setValue(Y,G+1)}if(D!=null&&$<=0)return this.$__undoReset(),B=new DV1(D.$where,this.constructor.modelName,$,D),this.$__schema.s.hooks.execPost("save:error",this,[this],{error:B},(Y)=>{F(Y,this)})}this.$__.saving=void 0,this.$__.savedState={},this.$emit("save",this,$),this.constructor.emit("save",this,$),F(null,this)})};/*!
 * ignore
 */function gV1(A,F,B){let D=A.$__schema.options.versionKey;if(!D)return null;let $=A.$__getValue(D)||0;return new dc(A,$,F.concat(B))}m.prototype.save=async function A(F){if(typeof F==="function"||typeof arguments[1]==="function")throw new z1("Model.prototype.save() no longer accepts a callback");let B;if(this.$op="save",this.$__.saving)B=new xc(this);else this.$__.saving=new xc(this);if(F=new XV1(F),F.hasOwnProperty("session"))this.$session(F.session);if(this.$__.timestamps!=null)F.timestamps=this.$__.timestamps;if(this.$__.$versionError=gV1(this,this.modifiedPaths(),Object.keys(this.$__.activePaths.getStatePaths("default"))),B)throw this.$__handleReject(B),B;return this.$__.saveOptions=F,await new Promise((D,$)=>{this.$__save(F,(J)=>{if(this.$__.saving=null,this.$__.saveOptions=null,this.$__.$versionError=null,this.$op=null,J!=null)return this.$__handleReject(J),$(J);D()})}),this};m.prototype.$save=m.prototype.save;m.prototype.$__version=function(A,F){let B=this.$__schema.options.versionKey;if(A===!0){if(B)OV1(F,B,0),this.$__setValue(B,0);return}if(B===!1)return;if(!this.$__isSelected(B))return;if(bc===(bc&this.$__.version)){let D=this.$__getValue(B);if(D!=null)A[B]=D}if(mX===(mX&this.$__.version))if(ZB(F.$set,B,null)!=null)++F.$set[B];else F.$inc=F.$inc||{},F.$inc[B]=1};m.prototype.increment=function A(){return this.$__.version=_V1,this};m.prototype.$__where=function A(F){if(F||(F={}),!F._id)F._id=this._doc._id;if(this._doc._id===void 0)return new z1("No _id found on document!");return F};m.prototype.deleteOne=function A(F){if(typeof F==="function"||typeof arguments[1]==="function")throw new z1("Model.prototype.deleteOne() no longer accepts a callback");if(!F)F={};if(F.hasOwnProperty("session"))this.$session(F.session);let B=this,D=this.$__where();if(D instanceof Error)throw D;let $=B.constructor.deleteOne(D,F);if(this.$session()!=null){if(!("session"in $.options))$.options.session=this.$session()}return $.pre(function J(X){B.constructor._middleware.execPre("deleteOne",B,[B],X)}),$.pre(function J(X){fz(B.$getAllSubdocs(),(E,Y)=>{E.constructor._middleware.execPre("deleteOne",E,[E],Y)},X)}),$.pre(function J(X){if(B.$__.isDeleted)return X(_z.skipWrappedFunction());return X()}),$.post(function J(X){fz(B.$getAllSubdocs(),(E,Y)=>{E.constructor._middleware.execPost("deleteOne",E,[E],{},Y)},X)}),$.post(function J(X){B.constructor._middleware.execPost("deleteOne",B,[B],{},X)}),$};m.prototype.$model=function A(F){if(arguments.length===0)return this.constructor;return this[h7].model(F)};m.prototype.model=m.prototype.$model;m.exists=function A(F,B){if(N1(this,"exists"),typeof arguments[2]==="function")throw new z1("Model.exists() no longer accepts a callback");return this.findOne(F).select({_id:1}).lean().setOptions(B)};m.discriminator=function(A,F,B){let D;if(typeof A==="function"){if(D=A,A=X0.getFunctionName(D),!(D.prototype instanceof m))throw new z1("The provided class "+A+" must extend Model")}B=B||{};let $=X0.isPOJO(B)?B.value:B,J=typeof B.clone==="boolean"?B.clone:!0,X=typeof B.mergePlugins==="boolean"?B.mergePlugins:!0,E=typeof B.overwriteModels==="boolean"?B.overwriteModels:!1;if(N1(this,"discriminator"),X0.isObject(F)&&!F.instanceOfSchema)F=new Sz(F);if(F instanceof Sz&&J)F=F.clone();if(F=VV1(this,A,F,$,X,B.mergeHooks,E),this.db.models[A]&&!F.options.overwriteModels&&!E)throw new JV1(A);F.$isRootDiscriminator=!0,F.$globalPluginsApplied=!0,D=this.db.model(D||A,F,this.$__collection.name),this.discriminators[A]=D;let Y=this.discriminators[A];if(Object.setPrototypeOf(Y.prototype,this.prototype),Object.defineProperty(Y,"baseModelName",{value:this.modelName,configurable:!0,writable:!1}),lc(Y,F),pc(Y,F),this[UB]!=null)for(let G of this[UB])G.discriminators=G.discriminators||{},G.discriminators[A]=D.__subclass(D.db,F,G.collection.name);return Y};function N1(A,F){if(A==null||A===global)throw new z1("`Model."+F+"()` cannot run without a model as `this`. Make sure you are calling `MyModel."+F+"()` where `MyModel` is a Mongoose model.");else if(A[tc]==null)throw new z1("`Model."+F+"()` cannot run without a model as `this`. Make sure you are not calling `new Model."+F+"()`")}/*!
 * Give the constructor the ability to emit events.
 */for(let A in uz.prototype)m[A]=uz.prototype[A];m.init=function A(){if(N1(this,"init"),typeof arguments[0]==="function")throw new z1("Model.init() no longer accepts a callback");if(this.schema.emit("init",this),this.$init!=null)return this.$init;let F=this.db,B=async()=>{if(!X0.getOption("autoIndex",this.schema.options,F.config,F.base.options))return;return await this.ensureIndexes({_automatic:!0})},D=async()=>{if(!X0.getOption("autoSearchIndex",this.schema.options,F.config,F.base.options))return;return await this.ensureSearchIndexes()},$=async()=>{let E=X0.getOption("autoCreate",this.schema.options,F.config);if(E==null)await F._waitForConnect(!0),E=X0.getOption("autoCreate",this.schema.options,F.config,F.base.options);if(!E)return;return await this.createCollection()};this.$init=$().then(()=>B()).then(()=>D());let J=this.$init.catch,X=this;return this.$init.catch=function(){return X.$caught=!0,J.apply(X.$init,arguments)},this.$init};m.createCollection=async function A(F){if(N1(this,"createCollection"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new z1("Model.createCollection() no longer accepts a callback");let B=await new Promise((Y,G)=>{this.hooks.execPre("createCollection",this,[F],(H)=>{if(H!=null){if(H instanceof _z.skipWrappedFunction)return Y(!0);return G(H)}Y()})}),D=this&&this.schema&&this.schema.options&&this.schema.options.collectionOptions;if(D!=null)F=Object.assign({},D,F);let $=this&&this.schema&&this.schema.options&&this.schema.options.collation;if($!=null)F=Object.assign({collation:$},F);let J=this&&this.schema&&this.schema.options&&this.schema.options.capped;if(J!=null){if(typeof J==="number")F=Object.assign({capped:!0,size:J},F);else if(typeof J==="object")F=Object.assign({capped:!0},J,F)}let X=this&&this.schema&&this.schema.options&&this.schema.options.timeseries;if(X!=null){if(F=Object.assign({timeseries:X},F),F.expireAfterSeconds!=null);else if(F.expires!=null)X0.expires(F);else if(this.schema.options.expireAfterSeconds!=null)F.expireAfterSeconds=this.schema.options.expireAfterSeconds;else if(this.schema.options.expires!=null)F.expires=this.schema.options.expires,X0.expires(F)}let E=this&&this.schema&&this.schema.options&&this.schema.options.clusteredIndex;if(E!=null)F=Object.assign({clusteredIndex:{...E,unique:!0}},F);try{if(!B)await this.db.createCollection(this.$__collection.collectionName,F)}catch(Y){if(Y!=null&&(Y.name!=="MongoServerError"||Y.code!==48))await new Promise((G,H)=>{let W={error:Y};this.hooks.execPost("createCollection",this,[null],W,(q)=>{if(q!=null)return H(q);G()})})}return await new Promise((Y,G)=>{this.hooks.execPost("createCollection",this,[this.$__collection],(H)=>{if(H!=null)return G(H);Y()})}),this.$__collection};m.syncIndexes=async function A(F){if(N1(this,"syncIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new z1("Model.syncIndexes() no longer accepts a callback");if(F?.autoCreate??this.schema.options?.autoCreate??this.db.config.autoCreate??!0)try{await this.createCollection()}catch(J){if(J!=null&&(J.name!=="MongoServerError"||J.code!==48))throw J}let D=await this.diffIndexes({indexOptionsToCreate:!0}),$=await this.cleanIndexes({...F,toDrop:D.toDrop});return await this.createIndexes({...F,toCreate:D.toCreate}),$};m.createSearchIndex=async function A(F){return N1(this,"createSearchIndex"),await this.$__collection.createSearchIndex(F)};m.updateSearchIndex=async function A(F,B){return N1(this,"updateSearchIndex"),await this.$__collection.updateSearchIndex(F,B)};m.dropSearchIndex=async function A(F){return N1(this,"dropSearchIndex"),await this.$__collection.dropSearchIndex(F)};m.listSearchIndexes=async function A(F){return N1(this,"listSearchIndexes"),await(await this.$__collection.listSearchIndexes(F)).toArray()};m.diffIndexes=async function A(F){if(typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new z1("Model.syncIndexes() no longer accepts a callback");let B=this,D=await B.listIndexes().catch((Y)=>{if(Y.codeName=="NamespaceNotFound")return;throw Y});if(D===void 0)D=[];D=NV1(B,D);let $=B.schema,J=PV1(B,$.indexes()),X=yV1($,J,D),E=bV1($,J,D,X,F);return{toDrop:X,toCreate:E}};function bV1(A,F,B,D,$){let J=[],X=$?.indexOptionsToCreate??!1;for(let[E,Y]of F){let G=!1,H=bz(A,y4(Y));for(let W of B){if(gz(W))continue;if(ac(E,H,W)&&!D.includes(W.name)){G=!0;break}}if(!G)if(X)J.push([E,Y]);else J.push(E)}return J}function yV1(A,F,B){let D=[];for(let $ of B){let J=!1;if(gz($))continue;if(RV1($,A.options))continue;for(let[X,E]of F){let Y=bz(A,y4(E));if(cc(X,Y,A.options),ac(X,Y,$)){J=!0;break}}if(J)continue;D.push($.name)}return D}m.cleanIndexes=async function A(F){if(N1(this,"cleanIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new z1("Model.cleanIndexes() no longer accepts a callback");let B=this;if(Array.isArray(F&&F.toDrop))return await yc(F.toDrop,B,F);let D=await B.diffIndexes();return await yc(D.toDrop,B,F)};async function yc(A,F,B){if(A.length===0)return[];let D=F.$__collection;if(B&&B.hideIndexes)await Promise.all(A.map(($)=>{return F.db.db.command({collMod:D.collectionName,index:{name:$,hidden:!0}})}));else await Promise.all(A.map(($)=>D.dropIndex($)));return A}m.listIndexes=async function A(){if(N1(this,"listIndexes"),typeof arguments[0]==="function")throw new z1("Model.listIndexes() no longer accepts a callback");if(this.$__collection.buffer)await new Promise((F)=>{this.$__collection.addQueue(F)});return this.$__collection.listIndexes().toArray()};m.ensureIndexes=async function A(F){if(N1(this,"ensureIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new z1("Model.ensureIndexes() no longer accepts a callback");await new Promise((B,D)=>{hV1(this,F,($)=>{if($!=null)return D($);B()})})};m.createIndexes=async function A(F){if(N1(this,"createIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new z1("Model.createIndexes() no longer accepts a callback");return this.ensureIndexes(F)};/*!
 * ignore
 */function hV1(A,F,B){let D=Array.isArray(F?.toCreate)?F.toCreate:A.schema.indexes(),$;F=F||{};let J=function(W){if(W&&!A.$caught)A.emit("error",W);A.emit("index",W||$),B&&B(W||$)};for(let W of D)if(gz(W))X0.warn('mongoose: Cannot specify a custom index on `_id` for model name "'+A.modelName+'", MongoDB does not allow overwriting the default `_id` index. See https://bit.ly/mongodb-id-index');if(!D.length){VB(function(){J()});return}let X=function(W,q,C,Q){A.emit("index-single-done",W,q,C,Q)},E=function(W,q){A.emit("index-single-start",W,q)},Y=A.schema._baseSchema,G=Y?Y.indexes():[];VB(function(){if(F._automatic&&!A.collection.collection)A.collection.addQueue(H,[]);else H()});function H(){if(F._automatic){if(A.schema.options.autoIndex===!1||A.schema.options.autoIndex==null&&A.db.config.autoIndex===!1)return J()}let W=D.shift();if(!W)return J();if(F._automatic&&W[1]._autoIndex===!1)return H();if(G.find((K)=>X0.deepEqual(K,W)))return H();let q=y4(W[0]),C=y4(W[1]);if(delete C._autoIndex,bz(A.schema,C),ic(A.schema,C),cc(q,C,A.schema.options),E(q,F),"background"in F)C.background=F.background;let Q=null;try{Q=A.collection.createIndex(q,C)}catch(K){if(!$)$=K;if(!A.$caught)A.emit("error",K);X(K,q,C),H();return}Q.then((K)=>{X(null,q,C,K),H()},(K)=>{if(!$)$=K;if(!A.$caught)A.emit("error",K);X(K,q,C),H()})}}m.createSearchIndexes=async function A(){N1(this,"createSearchIndexes");let F=[];for(let B of this.schema._searchIndexes)F.push(await this.createSearchIndex(B));return F};m.schema;m.db;m.collection;m.$__collection;m.base;m.discriminators;m.translateAliases=function A(F,B){N1(this,"translateAliases");let D=($,J)=>{let X,E=[],Y=$.split("."),G=this.schema;for(let W in Y){let q=Y[W];if(G&&G.aliases[q]){if(X=G.aliases[q],B&&X in F)throw new z1(`Provided object has both field "${q}" and its alias "${X}"`);E.push(X)}else X=q,E.push(q);if(G&&G.paths[X])G=G.paths[X].schema;else G=null}let H=E.join(".");if(F instanceof Map)F.set(H,J);else F[H]=J;if(H!==$)if(F instanceof Map)F.delete($);else delete F[$];return F};if(typeof F==="object"){if(F instanceof Map)for(let $ of new Map(F))F=D($[0],$[1]);else for(let $ of Object.keys(F))if(F=D($,F[$]),$[0]==="$")if(Array.isArray(F[$]))for(let J in F[$])F[$][J]=this.translateAliases(F[$][J]);else this.translateAliases(F[$]);return F}else return F};m.deleteOne=function A(F,B){if(N1(this,"deleteOne"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new z1("Model.prototype.deleteOne() no longer accepts a callback");let D=new this.Query({},{},this,this.$__collection);return D.setOptions(B),D.deleteOne(F)};m.deleteMany=function A(F,B){if(N1(this,"deleteMany"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new z1("Model.deleteMany() no longer accepts a callback");let D=new this.Query({},{},this,this.$__collection);return D.setOptions(B),D.deleteMany(F)};m.find=function A(F,B,D){if(N1(this,"find"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new z1("Model.find() no longer accepts a callback");let $=new this.Query({},{},this,this.$__collection);return $.select(B),$.setOptions(D),$.find(F)};m.findById=function A(F,B,D){if(N1(this,"findById"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new z1("Model.findById() no longer accepts a callback");if(typeof F==="undefined")F=null;return this.findOne({_id:F},B,D)};m.findOne=function A(F,B,D){if(N1(this,"findOne"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new z1("Model.findOne() no longer accepts a callback");let $=new this.Query({},{},this,this.$__collection);return $.select(B),$.setOptions(D),$.findOne(F)};m.estimatedDocumentCount=function A(F){return N1(this,"estimatedDocumentCount"),new this.Query({},{},this,this.$__collection).estimatedDocumentCount(F)};m.countDocuments=function A(F,B){if(N1(this,"countDocuments"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new z1("Model.countDocuments() no longer accepts a callback");let D=new this.Query({},{},this,this.$__collection);if(B!=null)D.setOptions(B);return D.countDocuments(F)};m.distinct=function A(F,B,D){if(N1(this,"distinct"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new z1("Model.distinct() no longer accepts a callback");let $=new this.Query({},{},this,this.$__collection);if(D!=null)$.setOptions(D);return $.distinct(F,B)};m.where=function A(F,B){N1(this,"where");let D=new this.Query({},{},this,this.$__collection).find({});return D.where.apply(D,arguments)};m.$where=function A(){N1(this,"$where");let F=new this.Query({},{},this,this.$__collection).find({});return F.$where.apply(F,arguments)};m.findOneAndUpdate=function(A,F,B){if(N1(this,"findOneAndUpdate"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new z1("Model.findOneAndUpdate() no longer accepts a callback");let D;if(B)D=B.fields||B.projection;F=y4(F,{depopulate:!0,_isNested:!0}),nc(F,B,this.schema.options.versionKey);let $=new this.Query({},{},this,this.$__collection);return $.select(D),$.findOneAndUpdate(A,F,B)};m.findByIdAndUpdate=function(A,F,B){if(N1(this,"findByIdAndUpdate"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new z1("Model.findByIdAndUpdate() no longer accepts a callback");if(A instanceof t3)A=A._doc._id;return this.findOneAndUpdate.call(this,{_id:A},F,B)};m.findOneAndDelete=function(A,F){if(N1(this,"findOneAndDelete"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new z1("Model.findOneAndDelete() no longer accepts a callback");let B;if(F)B=F.select,F.select=void 0;let D=new this.Query({},{},this,this.$__collection);return D.select(B),D.findOneAndDelete(A,F)};m.findByIdAndDelete=function(A,F){if(N1(this,"findByIdAndDelete"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new z1("Model.findByIdAndDelete() no longer accepts a callback");return this.findOneAndDelete({_id:A},F)};m.findOneAndReplace=function(A,F,B){if(N1(this,"findOneAndReplace"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new z1("Model.findOneAndReplace() no longer accepts a callback");let D;if(B)D=B.select,B.select=void 0;let $=new this.Query({},{},this,this.$__collection);return $.select(D),$.findOneAndReplace(A,F,B)};m.create=async function A(F,B){if(typeof B==="function"||typeof arguments[2]==="function")throw new z1("Model.create() no longer accepts a callback");N1(this,"create");let D,$=this.schema.options.discriminatorKey;if(Array.isArray(F))D=F,B=B!=null&&typeof B==="object"?B:{};else{let E=arguments[arguments.length-1];if(B={},typeof E==="function"||typeof B==="function"||typeof arguments[2]==="function")throw new z1("Model.create() no longer accepts a callback");else if(D=[...arguments],D.length>1&&!E)D.pop();if(D.length===2&&D[0]!=null&&D[1]!=null&&D[0].session==null&&E&&wV1(E.session)==="ClientSession"&&!this.schema.path("session"))X0.warn("WARNING: to pass a `session` to `Model.create()` in Mongoose, you **must** pass an array as the first argument. See: https://mongoosejs.com/docs/api/model.html#Model.create()")}if(D.length===0)return Array.isArray(F)?[]:null;let J=[],X=typeof B.aggregateErrors==="boolean"?!B.aggregateErrors:!0;if(delete B.aggregateErrors,B.session&&!B.ordered&&D.length>1)throw new z1("Cannot call `create()` with a session and multiple documents unless `ordered: true` is set");if(B.ordered){for(let E=0;E<D.length;E++)try{let Y=D[E],G=this.discriminators&&Y[$]!=null?this.discriminators[Y[$]]||zB(this.discriminators,Y[$]):this;if(G==null)throw new z1(`Discriminator "${Y[$]}" not found for model "${this.modelName}"`);let H=Y;if(!(H instanceof G))H=new G(H);await H.$save(B),J.push(H)}catch(Y){if(!X)J.push(Y);else throw Y}return J}else if(!X)J=await Promise.allSettled(D.map(async(E)=>{let Y=this.discriminators&&E[$]!=null?this.discriminators[E[$]]||zB(this.discriminators,E[$]):this;if(Y==null)throw new z1(`Discriminator "${E[$]}" not found for model "${this.modelName}"`);let G=E;if(!(G instanceof Y))G=new Y(G);return await G.$save(B),G})),J=J.map((E)=>E.status==="fulfilled"?E.value:E.reason);else{let E=null;if(J=await Promise.all(D.map(async(Y)=>{let G=this.discriminators&&Y[$]!=null?this.discriminators[Y[$]]||zB(this.discriminators,Y[$]):this;if(G==null)throw new z1(`Discriminator "${Y[$]}" not found for model "${this.modelName}"`);try{let H=Y;if(!(H instanceof G))H=new G(H);return await H.$save(B),H}catch(H){if(!E)E=H}})),E)throw E}if(!Array.isArray(F)&&D.length===1)return J[0];return J};m.insertOne=async function A(F,B){N1(this,"insertOne");let D=this.schema.options.discriminatorKey,$=this.discriminators&&F[D]!=null?this.discriminators[F[D]]||zB(this.discriminators,F[D]):this;if($==null)throw new z1(`Discriminator "${F[D]}" not found for model "${this.modelName}"`);if(!(F instanceof $))F=new $(F);return await F.$save(B)};m.watch=function(A,F){N1(this,"watch");let B=(D)=>{if(A=A||[],TV1(A,this.schema,"fullDocument"),this.$__collection.buffer)this.$__collection.addQueue(()=>{if(this.closed)return;let $=this.$__collection.watch(A,F);D(null,$)});else{let $=this.$__collection.watch(A,F);D(null,$)}};return F=F||{},F.model=this,new BV1(B,A,F)};m.startSession=function(){return N1(this,"startSession"),this.db.startSession.apply(this.db,arguments)};m.insertMany=async function A(F,B){if(N1(this,"insertMany"),typeof B==="function"||typeof arguments[2]==="function")throw new z1("Model.insertMany() no longer accepts a callback");return new Promise((D,$)=>{this.$__insertMany(F,B,(J,X)=>{if(J!=null)return $(J);D(X)})})};m.$__insertMany=function(A,F,B){let D=this;if(typeof F==="function")B=F,F=null;B=B||X0.noop,F=F||{};let $=F.limit||1000,J=!!F.rawResult,X=typeof F.ordered==="boolean"?F.ordered:!0,E=typeof F.throwOnValidationError==="boolean"?F.throwOnValidationError:!1,Y=!!F.lean,G=this.db.base.transactionAsyncLocalStorage?.getStore();if((!F||!F.hasOwnProperty("session"))&&G?.session!=null)F={...F,session:G.session};if(!Array.isArray(A))A=[A];let H=[],W=new Map,q=X?null:new Array(A.length),C=A.map((Q,K)=>(U)=>{if(Y)return VB(()=>U(null,Q));let Z=!1;if(!(Q instanceof D)){if(Q!=null&&typeof Q!=="object")return U(new $V1(Q,"arr."+K,"insertMany"));try{Q=new D(Q),Z=!0}catch(V){return U(V)}}if(F.session!=null)Q.$session(F.session);if(Y)return VB(()=>U(null,Q));Q.$validate(Z?{_skipParallelValidateCheck:!0}:null).then(()=>{U(null,Q)},(V)=>{if(X===!1)return H.push(V),W.set(V,K),q[K]=V,U(null,null);U(V)})});jV1(C,$,function(Q,K){if(Q){B(Q,null);return}let U=new Map,Z=new Map;for(let R=0;R<K.length;++R)U.set(K[R],R);let V=K.filter(function(R){return R!=null});for(let R=0;R<V.length;++R)Z.set(R,U.get(V[R]));if(H.length>0)H.sort((R,I)=>{return W.get(R)-W.get(I)});if(V.length===0){if(E)return B(new vX(H,q,null,"insertMany"));if(J){let R={acknowledged:!0,insertedCount:0,insertedIds:{}};return b7(R,H,H),B(null,R)}B(null,[]);return}let w=Y?V:V.map(function(R){if(R.$__schema.options.versionKey)R[R.$__schema.options.versionKey]=0;if((!F||F.timestamps!==!1)&&R.initializeTimestamps&&(!R.$__||R.$__.timestamps!==!1))R.initializeTimestamps();if(R.$__hasOnlyPrimitiveValues())return R.$__toObjectShallow();return R.toObject(xz)});D.$__collection.insertMany(w,F).then((R)=>{if(!Y)for(let I of V)I.$__reset(),T5(I,!1);if(X===!1&&E&&H.length>0){for(let I=0;I<q.length;++I)if(q[I]===void 0)q[I]=K[I];return B(new vX(H,q,R,"insertMany"))}if(J){if(X===!1){for(let I=0;I<q.length;++I)if(q[I]===void 0)q[I]=K[I];b7(R,H,q)}return B(null,R)}if(F.populate!=null)return D.populate(V,F.populate).then((I)=>{B(null,I)},(I)=>{if(I!=null)I.insertedDocs=V;throw I});B(null,V)},(R)=>{if(R.writeErrors==null&&(R.result&&R.result.result&&R.result.result.writeErrors)!=null)R.writeErrors=R.result.result.writeErrors;let I=R&&R.writeErrors,j=new Set((R&&R.writeErrors||[]).map((u)=>u.index));if(R.writeErrors!=null)for(let u=0;u<R.writeErrors.length;++u){let x=Z.get(R.writeErrors[u].index);if(R.writeErrors[u]={...R.writeErrors[u],index:x},!X)q[x]=R.writeErrors[u]}if(!X){for(let u=0;u<q.length;++u)if(q[u]===void 0)q[u]=K[u];R.results=q}let k=-1;if(R.insertedDocs=V.filter((u,x)=>{let T=!I||j.has(x);if(X){if(k>-1)return x<k;if(T)k=x}return!T}).map(function u(x){if(Y)return x;return x.$__reset(),T5(x,!1),x}),J&&X===!1)b7(R,H,q);B(R,null)})})};/*!
 * ignore
 */function T5(A,F){A.$isNew=F,A.$emit("isNew",F),A.constructor.emit("isNew",F);let B=A.$getAllSubdocs({useCache:!0});for(let D of B)D.$isNew=F,D.$emit("isNew",F)}m.bulkWrite=async function A(F,B){if(N1(this,"bulkWrite"),typeof B==="function"||typeof arguments[2]==="function")throw new z1("Model.bulkWrite() no longer accepts a callback");B=B||{};let D=await new Promise((Y,G)=>{this.hooks.execPre("bulkWrite",this,[F,B],(H)=>{if(H!=null){if(H instanceof _z.skipWrappedFunction)return Y(H);return G(H)}Y()})});if(D)return D.args[0];let $=B.ordered==null?!0:B.ordered;if(F.length===0){let G=new(this.base.driver.get()).BulkWriteResult(Oz(),!1);return G.n=0,b7(G,[],[]),G}let J=B?._skipCastBulkWrite?[]:F.map((Y)=>UV1(this,Y,B)),X=this.db.base.transactionAsyncLocalStorage?.getStore();if((!B||!B.hasOwnProperty("session"))&&X?.session!=null)B={...B,session:X.session};let E=null;if($){await new Promise((Y,G)=>{fz(J,(H,W)=>H(W),(H)=>{if(H)return G(H);Y()})});try{E=await this.$__collection.bulkWrite(F,B)}catch(Y){await new Promise((G,H)=>{let W={error:Y};this.hooks.execPost("bulkWrite",this,[null],W,(q)=>{if(q!=null)return H(q);G()})})}}else{let Y=J.length,G=[],H=[],W=[];await new Promise((K)=>{if(J.length===0)return K();for(let U=0;U<J.length;++U)J[U]((Z)=>{if(Z==null)G.push(U);else H.push({index:U,error:Z}),W[U]=Z;if(--Y<=0)K()})}),H=H.sort((K,U)=>K.index-U.index).map((K)=>K.error);let q=G;if(G=G.sort().map((K)=>F[K]),G.length===0){if(B.throwOnValidationError&&H.length)throw new vX(H,W,E,"bulkWrite");let U=new(this.base.driver.get()).BulkWriteResult(Oz(),!1);return U.result=Oz(),b7(U,H,W),U}let C;[E,C]=await this.$__collection.bulkWrite(G,B).then((K)=>[K,null]).catch((K)=>[null,K]);let Q={};if(C?.writeErrors)for(let K of C.writeErrors)Q[K.err.index]=K;for(let K=0;K<q.length;++K)W[q[K]]=Q[K]??null;if(C){if(H.length>0)b7(C,H,W);await new Promise((K,U)=>{let Z={error:C};this.hooks.execPost("bulkWrite",this,[null],Z,(V)=>{if(V!=null)return U(V);K()})})}if(H.length>0)if(B.throwOnValidationError)throw new vX(H,W,E,"bulkWrite");else b7(E,H,W)}return await new Promise((Y,G)=>{this.hooks.execPost("bulkWrite",this,[E],(H)=>{if(H!=null)return G(H);Y()})}),E};m.bulkSave=async function A(F,B){if(B=B||{},B.timestamps!=null)for(let H of F)H.$__.saveOptions=H.$__.saveOptions||{},H.$__.saveOptions.timestamps=B.timestamps;else for(let H of F)if(H.$__.timestamps!=null)H.$__.saveOptions=H.$__.saveOptions||{},H.$__.saveOptions.timestamps=H.$__.timestamps;await Promise.all(F.map((H)=>vV1(H,B)));let D=this.buildBulkWriteOperations(F,B),$={skipValidation:!0,_skipCastBulkWrite:!0,...B},{bulkWriteResult:J,bulkWriteError:X}=await this.bulkWrite(D,$).then((H)=>({bulkWriteResult:H,bulkWriteError:null}),(H)=>({bulkWriteResult:null,bulkWriteError:H}));if(X!=null&&X.name!=="MongoBulkWriteError")throw X;let E=J?.matchedCount??0,Y=J?.insertedCount??0;if(D.length>0&&E+Y<D.length&&!X)throw new SV1(this.modelName,F,J);let G=[];for(let H=0;H<F.length;H++){let W=F[H];if((X&&X.writeErrors.find((C)=>{return(C.err.op._id||C.err.op.q._id).toString()===W._doc._id.toString()}))==null)G.push(W)}if(await Promise.all(G.map((H)=>mV1(H))),X!=null)throw X;return J};function vV1(A,F){return new Promise((B,D)=>{A.schema.s.hooks.execPre("save",A,[F],($)=>{if($){D($);return}B()})})}function mV1(A){return new Promise((F,B)=>{if(A.$isNew)T5(A,!1);A.$__reset(),A.schema.s.hooks.execPost("save",A,[A],{},(D)=>{if(D){B(D);return}F()})})}m.applyDefaults=function A(F){if(F==null)return F;if(F.$__!=null){EV1(F,F.$__.fields,F.$__.exclude);for(let B of F.$getAllSubdocs())A(B,B.$__.fields,B.$__.exclude);return F}return YV1(F,this.schema),F};m.applyVirtuals=function A(F,B){if(F==null)return F;if(F.$__!=null)return F;return KV1(this.schema,F,B),F};m.applyTimestamps=function A(F,B){if(F==null)return F;if(F.$__!=null)return F;return QV1(this.schema,F,B),F};m.castObject=function A(F,B){B=B||{};let D={},$=this.schema,J=$.options.discriminatorKey;if($.discriminators!=null&&F!=null&&F[J]!=null)$=sc($,F[J])||$;let X=Object.keys($.paths);for(let Y of X){let G=$.path(Y);if(!G||!G.$isMongooseArray)continue;let H=ZB(F,Y);rc(X,H,Y)}let E=null;for(let Y of X){let G=$.path(Y);if(G==null)continue;let H=ZB(F,Y,void 0);if(H==null)continue;let W=Y.indexOf(".")===-1?[Y]:Y.split("."),q=D;for(let C=0;C<W.length-1;++C){if(q[W[C]]==null)q[W[C]]=isNaN(W[C+1])?{}:[];q=q[W[C]]}if(G.$isMongooseDocumentArray){let C=G.options?.castNonArrays??G.constructor.options.castNonArrays;if(!Array.isArray(H)){if(!C){if(!B.ignoreCastErrors)E=E||new hX,E.addError(Y,new fV1(Y,H))}else q[W[W.length-1]]=[m.castObject.call(G.caster,H)];continue}}if(G.$isSingleNested||G.$isMongooseDocumentArrayElement){try{H=m.castObject.call(G.caster,H)}catch(C){if(!B.ignoreCastErrors)E=E||new hX,E.addError(Y,C);continue}q[W[W.length-1]]=H;continue}try{H=G.cast(H),q[W[W.length-1]]=H}catch(C){if(!B.ignoreCastErrors)E=E||new hX,E.addError(Y,C);continue}}if(E!=null)throw E;return D};m.buildBulkWriteOperations=function A(F,B){if(!Array.isArray(F))throw new Error(`bulkSave expects an array of documents to be passed, received \`${F}\` instead`);return $(),F.map((J,X)=>{if(!B.skipValidation){if(!(J instanceof t3))throw new Error(`documents.${X} was not a mongoose document, documents must be an array of mongoose documents (instanceof mongoose.Document).`);if(B.validateBeforeSave==null||B.validateBeforeSave){let H=J.validateSync();if(H!=null)throw H}}if(J.isNew){let H={insertOne:{document:J}};return X0.injectTimestampsOption(H.insertOne,B.timestamps),H}let Y=J.$__delta();if(Y!=null&&!X0.isEmptyObject(Y[0])){let H=J.$__where(Y[0]),W=Y[1];oc(J,H);let q=this.schema.options.shardKey;if(q){let Q=Object.keys(q),K=Q.length;for(let U=0;U<K;++U)H[Q[U]]=J[Q[U]]}J.$__version(H,Y);let C={updateOne:{filter:H,update:W}};return X0.injectTimestampsOption(C.updateOne,B.timestamps),C}return null}).filter((J)=>J!==null);function $(){if(B=B||{},B.skipValidation==null)B.skipValidation=!1}};m.hydrate=function(A,F,B){if(N1(this,"hydrate"),F!=null){if(A!=null&&A.$__!=null)A=A.toObject(xz);A=WV1(A,F)}let D=jF().createModel(this,A,F);return D.$init(A,B),D};m.updateMany=function A(F,B,D){if(N1(this,"updateMany"),B==null)throw new z1("updateMany `update` parameter cannot be nullish");return yz(this,"updateMany",F,B,D)};m.updateOne=function A(F,B,D){return N1(this,"updateOne"),yz(this,"updateOne",F,B,D)};m.replaceOne=function A(F,B,D){N1(this,"replaceOne");let $=this&&this.schema&&this.schema.options&&this.schema.options.versionKey||null;if($&&!B[$])B[$]=0;return yz(this,"replaceOne",F,B,D)};function yz(A,F,B,D,$){let J=new A.Query({},{},A,A.collection);if(B instanceof t3)B=B.toObject();else B=y4(B);$=typeof $==="function"?$:y4($);let X=A&&A.schema&&A.schema.options&&A.schema.options.versionKey||null;return nc(D,$,X),J[F](B,D,$)}m.aggregate=function A(F,B){if(N1(this,"aggregate"),typeof B==="function"||typeof arguments[2]==="function")throw new z1("Model.aggregate() no longer accepts a callback");let D=new FV1(F||[]);if(D.model(this),B!=null)D.option(B);return D};m.validate=async function A(F,B,D){if(arguments.length<3||arguments.length===3&&typeof arguments[2]==="function")D=F;if(typeof D==="function"||typeof arguments[3]==="function")throw new z1("Model.validate() no longer accepts a callback");let $=this.schema,J=$.options.discriminatorKey;if($.discriminators!=null&&F!=null&&F[J]!=null)$=sc($,F[J])||$;let X=Object.keys($.paths);if(B!=null){let G=typeof B==="string"?new Set(B.split(" ")):Array.isArray(B)?new Set(B):new Set(X);X=X.filter((H)=>{if(B.pathsToSkip){if(Array.isArray(B.pathsToSkip)){if(B.pathsToSkip.find((C)=>C==H))return!1}else if(typeof B.pathsToSkip=="string"){if(B.pathsToSkip.includes(H))return!1}}let W=H.split("."),q=W[0];for(let C of W){if(G.has(q))return!0;q+="."+C}return G.has(H)})}for(let G of X){let H=$.path(G);if(!H||!H.$isMongooseArray||H.$isMongooseDocumentArray)continue;let W=ZB(F,G);rc(X,W,G)}let E=null;X=new Set(X);try{F=this.castObject(F)}catch(G){E=G;for(let H of Object.keys(E.errors||{}))X.delete(H)}let Y=X.size;return new Promise((G,H)=>{for(let q of X){let C=$.path(q);if(C==null){W();continue}let Q=q.indexOf(".")===-1?[q]:q.split("."),K=F;for(let Z=0;Z<Q.length-1;++Z)K=K[Q[Z]];let U=ZB(F,q,void 0);C.doValidate(U,(Z)=>{if(Z)E=E||new hX,E.addError(q,Z);W()},D,{path:q})}function W(){if(--Y<=0)if(E)H(E);else G(F)}})};m.populate=async function A(F,B){if(N1(this,"populate"),typeof B==="function"||typeof arguments[2]==="function")throw new z1("Model.populate() no longer accepts a callback");if(B=X0.populate(B),B.length===0)return F;if(B.find((D)=>D.ordered))for(let D of B)await hc(this,F,D);else{let D=[];for(let $ of B)D.push(hc(this,F,$));await Promise.all(D)}return F};/*!
 * Populates `docs` for a single `populateOptions` instance.
 */var dV1=/\s?-_id\s?/,lV1=/\s?-_id\s?/g;async function hc(A,F,B){if(B.strictPopulate==null){if(B._localModel!=null&&B._localModel.schema._userProvidedOptions.strictPopulate!=null)B.strictPopulate=B._localModel.schema._userProvidedOptions.strictPopulate;else if(B._localModel!=null&&A.base.options.strictPopulate!=null)B.strictPopulate=A.base.options.strictPopulate;else if(A.base.options.strictPopulate!=null)B.strictPopulate=A.base.options.strictPopulate}if(!Array.isArray(F))F=[F];if(F.length===0||F.every(X0.isNullOrUndefined))return;let D=LV1(A,F,B);if(D instanceof z1)throw D;let $=D.length,J=[];function X(G){return G!==void 0}let E=!1,Y=[];for(let G=0;G<$;++G){let H=D[G],W=H.options.select,q=X0.array.flatten(H.ids,X);q=X0.array.unique(q);let C={};if(C.sort=H&&H.options&&H.options.options&&H.options.options.sort||void 0,C.excludeId=dV1.test(W)||W&&W._id===0,H.options&&H.options.options&&H.options.options.lean&&H.options.options.lean.transform)H.options.options._leanTransform=H.options.options.lean.transform,H.options.options.lean=!0;if(q.length===0||q.every(X0.isNullOrUndefined)){mc(A,[],H,C);continue}if(E=!0,typeof B.foreignField==="string")H.foreignField.clear(),H.foreignField.add(B.foreignField);let Q=ZV1(q,H.match,H.foreignField,H.model,H.options.skipInvalidIds);if(C.excludeId)if(typeof W==="string")W=W.replace(lV1," ");else if(Array.isArray(W))W=W.filter((K)=>K!=="-_id");else W={...W},delete W._id;if(H.options.options&&H.options.options.limit!=null)C.originalLimit=H.options.options.limit;else if(H.options.limit!=null)C.originalLimit=H.options.limit;Y.push([H,Q,W,C])}if(!E){if(D.length!==0)return;if(B.populate!=null){let G=X0.populate(B.populate).map((H)=>Object.assign({},H,{path:B.path+"."+H.path}));return A.populate(F,G)}return}if(B.ordered)for(let G of Y)await vc.apply(null,G).then((H)=>{J=J.concat(H)});else{let G=[];for(let H of Y)G.push(vc.apply(null,H).then((W)=>{J=J.concat(W)}));await Promise.all(G)}for(let G of Y){let H=G[0],W=G[3];for(let q of J)H.options._childDocs.push(q);mc(A,J,H,W)}for(let G of Y)kV1(G[0].foreignField,G[0].options,J);for(let G of Y){let H=G[0];if(H.options&&H.options.options&&H.options.options._leanTransform)for(let W of J)H.options.options._leanTransform(W)}}/*!
 * ignore
 */function vc(A,F,B){let D=y4(A.options.populate),$=Object.assign({skip:A.options.skip,limit:A.options.limit,perDocumentLimit:A.options.perDocumentLimit},A.options.options);if(A.count)delete $.skip;if($.perDocumentLimit!=null)$.limit=$.perDocumentLimit,delete $.perDocumentLimit;else if($.limit!=null)$.limit=$.limit*A.ids.length;let J=A.model.find(F,B,$);for(let X of A.foreignField)if(X!=="_id"&&J.selectedInclusively()&&!IV1(J._fields,X))J.select(X);if(A.count)for(let X of A.foreignField)J.select(X);if(D){if(A.model.baseModelName!=null)if(Array.isArray(D))D.forEach((E)=>{E.strictPopulate=!1});else if(typeof D==="string")D={path:D,strictPopulate:!1};else D.strictPopulate=!1;let X=A.options._fullPath||A.options.path;if(Array.isArray(D))for(let E of D)E._fullPath=X+"."+E.path;else if(typeof D==="object")D._fullPath=X+"."+D.path;J.populate(D)}return J.exec().then((X)=>{for(let E of X)MV1.set(E,A.model);return X})}/*!
 * ignore
 */function mc(A,F,B,D){let{options:$,isVirtual:J,justOne:X}=B,E,Y=$&&$.options&&$.options.lean||!1,G=F.length,H={},W={},q,C,Q=y4(B.allIds);for(let K=0;K<G;K++){if(C=F[K],C==null)continue;for(let U of B.foreignField){if(E=X0.getValue(U,C),Array.isArray(E)){E=X0.array.unique(X0.array.flatten(E));for(let Z of E){if(Z instanceof t3)Z=Z._doc._id;if(Z?.constructor?.name==="Binary"&&Z.sub_type===4&&typeof Z.toUUID==="function")q=String(Z.toUUID());else if(Z?.constructor?.name==="Buffer"&&Z._subtype===4&&typeof Z.toUUID==="function")q=String(Z.toUUID());else q=String(Z);if(W[q])if(Array.isArray(W[q]))W[q].push(C),H[q].push(K);else W[q]=[W[q],C],H[q]=[H[q],K];else if(J&&!X)W[q]=[C],H[q]=[K];else W[q]=C,H[q]=K}}else{if(E instanceof t3)E=E._doc._id;if(E?.constructor?.name==="Binary"&&E.sub_type===4&&typeof E.toUUID==="function")q=String(E.toUUID());else if(E?.constructor?.name==="Buffer"&&E._subtype===4&&typeof E.toUUID==="function")q=String(E.toUUID());else q=String(E);if(W[q]){if(Array.isArray(W[q]))W[q].push(C),H[q].push(K);else if(J||W[q].constructor!==C.constructor||(W[q]instanceof t3?String(W[q]._doc._id):String(W[q]._id))!==(C instanceof t3?String(C._doc._id):String(C._id)))W[q]=[W[q],C],H[q]=[H[q],K]}else W[q]=C,H[q]=K}if(!Y)C.$__.wasPopulated=C.$__.wasPopulated||{value:E}}}zV1({originalModel:A,rawIds:B.isVirtual?Q:B.allIds,allIds:Q,unpopulatedValues:B.unpopulatedValues,foreignField:B.foreignField,rawDocs:W,rawOrder:H,docs:B.docs,path:$.path,options:D,justOne:B.justOne,isVirtual:B.isVirtual,allOptions:B,populatedModel:B.model,lean:Y,virtual:B.virtual,count:B.count,match:B.match})}m.compile=function A(F,B,D,$,J){if(B.options.versionKey!==!1&&!B.paths[B.options.versionKey]){let W={};W[B.options.versionKey]=Number,B.add(W)}let E;if(typeof F==="function"&&F.prototype instanceof m)E=F,F=E.name,B.loadClass(E,!1),E.prototype.$isMongooseModelPrototype=!0;else E=function W(q,C,Q){if(W.hooks.execPreSync("createModel",q),!(this instanceof W))return new W(q,C,Q);let K=W.schema.options.discriminatorKey;if(W.discriminators==null||q==null||q[K]==null){m.call(this,q,C,Q);return}let U=W.discriminators[q[K]]||zB(W.discriminators,q[K]);if(U!=null)return new U(q,C,Q);m.call(this,q,C,Q)};if(E.hooks=B.s.hooks.clone(),E.base=J,E.modelName=F,!(E.prototype instanceof m))Object.setPrototypeOf(E,m),Object.setPrototypeOf(E.prototype,m.prototype);E.model=function W(q){return this.db.model(q)},E.db=$,E.prototype.db=$,E.prototype[h7]=$,E.discriminators=E.prototype.discriminators=void 0,E[tc]=!0,E.events=new uz,B._preCompile();let G={schemaUserProvidedOptions:B._userProvidedOptions||{},capped:B.options.capped,Promise:E.base.Promise,modelName:F};if(B.options.autoCreate!==void 0)G.autoCreate=B.options.autoCreate;let H=$.collection(D,G);return E.prototype.collection=H,E.prototype.$collection=H,E.prototype[y7]=H,E.prototype.$__setSchema(B),lc(E,B),pc(E,B),HV1(E,B),CV1(E,B.s.hooks,B.statics),E.schema=E.prototype.$__schema,E.collection=H,E.$__collection=H,E.Query=function(){yX.apply(this,arguments)},Object.setPrototypeOf(E.Query.prototype,yX.prototype),E.Query.base=yX.base,E.Query.prototype.constructor=yX,E._applyQueryMiddleware(),cV1(E,B.query),E};m.clientEncryption=function A(){let F=this.base.driver.get().ClientEncryption;if(!F)throw new Error("The mongodb driver must be used to obtain a ClientEncryption object.");let B=this.collection?.conn?.client;if(!B)return null;let D=B.options.autoEncryption;if(!D)return null;let{keyVaultNamespace:$,keyVaultClient:J,kmsProviders:X,credentialProviders:E,proxyOptions:Y,tlsOptions:G}=D;return new F(J??B,{keyVaultNamespace:$,kmsProviders:X,credentialProviders:E,proxyOptions:Y,tlsOptions:G})};m.$__updateConnection=function A(F){this.db=F,this.prototype.db=F,this.prototype[h7]=F;let B=F.collection(this.collection.collectionName,this.collection.opts);this.prototype.collection=B,this.prototype.$collection=B,this.prototype[y7]=B,this.collection=B,this.$__collection=B};function cV1(A,F){for(let B in F)A.Query.prototype[B]=F[B]}m.__subclass=function A(F,B,D){let $=this,J=function H(W,q,C){if(!(this instanceof H))return new H(W,q,C);$.call(this,W,q,C)};if(Object.setPrototypeOf(J,$),Object.setPrototypeOf(J.prototype,$.prototype),J.db=F,J.prototype.db=F,J.prototype[h7]=F,$[UB]=$[UB]||[],$[UB].push(J),$.discriminators!=null){J.discriminators={};for(let H of Object.keys($.discriminators))J.discriminators[H]=$.discriminators[H].__subclass($.db,$.discriminators[H].schema,D)}let X=B&&typeof B!=="string"?B:$.prototype.$__schema,E=X.options||{},Y=X._userProvidedOptions||{};if(!D)D=$.prototype.$__schema.get("collection")||X0.toCollectionName($.modelName,this.base.pluralize());let G={schemaUserProvidedOptions:Y,capped:X&&E.capped};return J.prototype.collection=F.collection(D,G),J.prototype.$collection=J.prototype.collection,J.prototype[y7]=J.prototype.collection,J.collection=J.prototype.collection,J.$__collection=J.collection,J.init().catch(()=>{}),J};m.recompileSchema=function A(){if(this.prototype.$__setSchema(this.schema),this.schema._applyDiscriminators!=null)for(let F of this.schema._applyDiscriminators.keys())this.discriminator(F,this.schema._applyDiscriminators.get(F));delete this.schema._defaultToObjectOptionsMap,GV1(this.schema,new WeakSet,!0)};m.inspect=function(){return`Model { ${this.modelName} }`};m.namespace=function A(){return this.db.name+"."+this.collection.collectionName};if(gc.inspect.custom)m[gc.inspect.custom]=m.inspect;/*!
 * Applies query middleware from this model's schema to this model's
 * Query constructor.
 */m._applyQueryMiddleware=function A(){let F=this.Query,B=this.schema.s.hooks.filter((D)=>{let $=pV1(D);if(D.name==="validate")return!!$.query;if(D.name==="deleteOne"||D.name==="updateOne")return!!$.query||Object.keys($).length===0;if(D.query!=null||D.document!=null)return!!D.query;return!0});F.prototype._queryMiddleware=B};function pV1(A){let F={};if(A.hasOwnProperty("query"))F.query=A.query;if(A.hasOwnProperty("document"))F.document=A.document;return F}/*!
 * Module exports.
 */Ap.exports=ec=m});var Bp=z((wB,Fp)=>{Fp.exports=sV1;wB.pluralization=[[/human$/gi,"humans"],[/(m)an$/gi,"$1en"],[/(pe)rson$/gi,"$1ople"],[/(child)$/gi,"$1ren"],[/^(ox)$/gi,"$1en"],[/(ax|test)is$/gi,"$1es"],[/(octop|vir)us$/gi,"$1i"],[/(alias|status)$/gi,"$1es"],[/(bu)s$/gi,"$1ses"],[/(buffal|tomat|potat)o$/gi,"$1oes"],[/([ti])um$/gi,"$1a"],[/sis$/gi,"ses"],[/(?:([^f])fe|([lr])f)$/gi,"$1$2ves"],[/(hive)$/gi,"$1s"],[/([^aeiouy]|qu)y$/gi,"$1ies"],[/(x|ch|ss|sh)$/gi,"$1es"],[/(matr|vert|ind)ix|ex$/gi,"$1ices"],[/([m|l])ouse$/gi,"$1ice"],[/(kn|w|l)ife$/gi,"$1ives"],[/(quiz)$/gi,"$1zes"],[/^goose$/i,"geese"],[/s$/gi,"s"],[/([^a-z])$/,"$1"],[/$/gi,"s"]];var iV1=wB.pluralization;wB.uncountables=["advice","energy","excretion","digestion","cooperation","health","justice","labour","machinery","equipment","information","pollution","sewage","paper","money","species","series","rain","rice","fish","sheep","moose","deer","news","expertise","status","media"];var nV1=wB.uncountables;function sV1(A){let F;if(A=A.toLowerCase(),!~nV1.indexOf(A)){if(F=iV1.filter(function(B){return A.match(B[0])}),F[0])return A.replace(F[0][0],F[0][1])}return A}});var Yp=z((ff1,Ep)=>{/*!
 * Module requirements
 */var Jp=T1(),Dp=i("util"),$p=gq();class j9 extends Jp{constructor(){super("");this.errors={}}toString(){return $p(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(A,F){if(F instanceof j9){let{errors:B}=F;for(let D of Object.keys(B))this.addError(D,B[D]);return}this.errors[A]=F,this.message=$p(this)}}if(Dp.inspect.custom)j9.prototype[Dp.inspect.custom]=j9.prototype.inspect;Object.defineProperty(j9.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(j9.prototype,"name",{value:"SetOptionError"});class Xp extends Jp{constructor(A){super(`"${A}" is not a valid option to set`)}}j9.SetOptionInnerError=Xp;/*!
 * Module exports
 */Ep.exports=j9});var Hp=z(()=>{var Gp=Q1();if(typeof jest!=="undefined"&&!process.env.SUPPRESS_JEST_WARNINGS){if(typeof window!=="undefined")Gp.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's default jsdom test environment. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning.");if(setTimeout.clock!=null&&typeof setTimeout.clock.Date==="function")Gp.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's mock timers enabled. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning.")}});var zp=z((Qp,Kp)=>{/*!
 * Module dependencies.
 */var Wp=D3(),qp=i("events").EventEmitter,Cp=G6(),aV1=I7(),rV1=R4(),tV1=Cp.ValidationError,oV1=IJ(),eV1=Z9();function G3(A,F,B,D,$){if(!(this instanceof G3))return new G3(A,F,B,D,$);if(eV1(F)&&!F.instanceOfSchema)F=new aV1(F);if(F=this.schema||F,!this.schema&&F.options._id){if(A=A||{},A._id===void 0)A._id=new rV1}if(!F)throw new Cp.MissingSchemaError;this.$__setSchema(F),Wp.call(this,A,B,D,$),oV1(this,F,{decorateDoc:!0});for(let J in F.methods)this[J]=F.methods[J];for(let J in F.statics)this[J]=F.statics[J]}/*!
 * Inherit from the NodeJS document
 */G3.prototype=Object.create(Wp.prototype);G3.prototype.constructor=G3;/*!
 * ignore
 */G3.events=new qp;/*!
 * Browser doc exposes the event emitter API
 */G3.$emitter=new qp;["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"].forEach(function(A){G3[A]=function(){return G3.$emitter[A].apply(G3.$emitter,arguments)}});/*!
 * Module exports.
 */G3.ValidationError=tV1;Kp.exports=Qp=G3});var Zp=z((gf1,hz)=>{/*!
 * Module dependencies.
 */var Aw1=D3(),Fw1=zp(),Up=!1;hz.exports=function A(){if(Up)return Fw1;return Aw1};/*!
 * ignore
 */hz.exports.setBrowser=function(A){Up=A}});var Tp=z((Mp,jp)=>{/*!
 * Module dependencies.
 */var Bw1=D3(),Dw1=i("events").EventEmitter,wp=U7(),h4=I7(),$w1=n0(),LB=vF(),Jw1=RJ(),lX=ZF(),Vp=Vm(),Xw1=W5(),Ew1=PX(),Lp=zz(),Yw1=CK(),Gw1=_Q(),Rp=EX(),Hw1=Bp(),vz=Q1(),Ww1=_K(),qw1=T7(),Cw1=qz(),Qw1=r8().trusted,Kw1=Dz(),zw1=Q2(),k5=T1(),dX=Yp(),Uw1=Kz(),Np=Symbol.for("mongoose:default"),Pp=Symbol("mongoose:defaultConnection");Hp();var Zw1=/^[0-9A-Fa-f]{24}$/,{AsyncLocalStorage:Ip}=i("async_hooks");function e(A){if(this.connections=[],this.nextConnectionId=0,this.models={},this.events=new Dw1,this.__driver=Rp.get(),this.options=Object.assign({pluralization:!0,autoIndex:!0,autoCreate:!0,autoSearchIndex:!1},A),(vz.getOption("createInitialConnection",this.options)??!0)&&this.__driver!=null)mz(this);if(this.options.pluralization)this._pluralize=Hw1;if(!A||!A[Np]){let B=this;this.Schema=function(){return this.base=B,h4.apply(this,arguments)},this.Schema.prototype=Object.create(h4.prototype),Object.assign(this.Schema,h4),this.Schema.base=this,this.Schema.Types=Object.assign({},h4.Types)}else for(let B of["Schema","model"])this[B]=e.prototype[B];if(this.Schema.prototype.base=this,A?.transactionAsyncLocalStorage)this.transactionAsyncLocalStorage=new Ip;Object.defineProperty(this,"plugins",{configurable:!1,enumerable:!0,writable:!1,value:Object.values(Gw1).map((B)=>[B,{deduplicate:!0}])})}e.prototype.cast=qw1;e.prototype.STATES=lX;e.prototype.ConnectionStates=lX;e.prototype.driver=Rp;e.prototype.setDriver=function A(F){let B=this instanceof e?this:v2;if(B.__driver===F)return B;if(B.connections&&B.connections.find((X)=>X.readyState!==lX.disconnected))throw new k5("Cannot modify Mongoose driver if a connection is already open. Call `mongoose.disconnect()` before modifying the driver");if(B.__driver=F,Array.isArray(F.plugins)){for(let X of F.plugins)if(typeof X==="function")B.plugin(X)}if(F.SchemaTypes!=null)Object.assign(v2.Schema.Types,F.SchemaTypes);let $=F.Connection,J=B.connections[0];if(B.connections=[new $(B)],B.connections[0].models=B.models,J==null)return B;for(let X of Object.values(B.models)){if(X.db!==J)continue;X.$__updateConnection(B.connections[0])}return B};e.prototype.set=function A(F,B){let D=this instanceof e?this:v2;if(arguments.length===1&&typeof F!=="object"){if(Vp.indexOf(F)===-1){let X=new dX;throw X.addError(F,new dX.SetOptionInnerError(F)),X}return D.options[F]}let $={};if(arguments.length===2)$={[F]:B};if(arguments.length===1&&typeof F==="object")$=F;let J=void 0;for(let[X,E]of Object.entries($)){if(Vp.indexOf(X)===-1){if(!J)J=new dX;J.addError(X,new dX.SetOptionInnerError(X));continue}if(D.options[X]=E,X==="objectIdGetter")if(E)Object.defineProperty(D.Types.ObjectId.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}});else delete D.Types.ObjectId.prototype._id;else if(X==="transactionAsyncLocalStorage"){if(E&&!D.transactionAsyncLocalStorage)D.transactionAsyncLocalStorage=new Ip;else if(!E&&D.transactionAsyncLocalStorage)delete D.transactionAsyncLocalStorage}else if(X==="createInitialConnection"){if(E&&!D.connection)mz(D);else if(E===!1&&D.connection&&D.connection[Pp]){if(D.connection.readyState===lX.disconnected&&Object.keys(D.connection.models).length===0)D.connections.shift()}}}if(J)throw J;return D};e.prototype.get=e.prototype.set;e.prototype.createConnection=function A(F,B){let D=this instanceof e?this:v2,J=new D.__driver.Connection(D);if(D.connections.push(J),D.nextConnectionId++,D.events.emit("createConnection",J),arguments.length>0)J.openUri(F,{...B,_fireAndForget:!0});return J};e.prototype.connect=async function A(F,B){if(typeof B==="function"||arguments.length>=3&&typeof arguments[2]==="function")throw new k5("Mongoose.prototype.connect() no longer accepts a callback");let D=this instanceof e?this:v2;if(D.connection==null)mz(D);return D.connection.openUri(F,B).then(()=>D)};e.prototype.disconnect=async function A(){if(arguments.length>=1&&typeof arguments[0]==="function")throw new k5("Mongoose.prototype.disconnect() no longer accepts a callback");let F=this instanceof e?this:v2;if(F.connections.length<=0)return;await Promise.all(F.connections.map((D)=>D.close()))};e.prototype.startSession=function A(){let F=this instanceof e?this:v2;return F.connection.startSession.apply(F.connection,arguments)};e.prototype.pluralize=function A(F){let B=this instanceof e?this:v2;if(arguments.length>0)B._pluralize=F;return B._pluralize};e.prototype.model=function A(F,B,D,$){let J=this instanceof e?this:v2;if(typeof B==="string")D=B,B=!1;if(arguments.length===1){let G=J.models[F];if(!G)throw new J.Error.MissingSchemaError(F);return G}if(vz.isObject(B)&&!(B instanceof h4))B=new h4(B);if(B&&!(B instanceof h4))throw new J.Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");$=$||{};let X=B;if(B){if(J.get("cloneSchemas"))B=B.clone();J._applyPlugins(B)}let E=J.options.hasOwnProperty("overwriteModels")?J.options.overwriteModels:$.overwriteModels;if(J.models.hasOwnProperty(F)&&$.cache!==!1&&E!==!0){if(X&&X.instanceOfSchema&&X!==J.models[F].schema)throw new J.Error.OverwriteModelError(F);if(D&&D!==J.models[F].collection.name){let G=J.models[F];return B=G.prototype.schema,G.__subclass(J.connection,B,D)}return J.models[F]}if(B==null)throw new J.Error.MissingSchemaError(F);let Y=J._model(F,B,D,$);return J.connection.models[F]=Y,J.models[F]=Y,Y};/*!
 * ignore
 */e.prototype._model=function A(F,B,D,$){let J=this instanceof e?this:v2,X;if(typeof F==="function"){if(X=F,F=X.name,!(X.prototype instanceof Lp))throw new J.Error("The provided class "+F+" must extend Model")}if(B){if(J.get("cloneSchemas"))B=B.clone();J._applyPlugins(B)}if(B==null||!("pluralization"in B.options))B.options.pluralization=J.options.pluralization;if(!D)D=B.get("collection")||vz.toCollectionName(F,J.pluralize());Uw1(B);let E=$.connection||J.connection;if(X=J.Model.compile(X||F,B,D,E,J),X.init().catch(function Y(){}),E.emit("model",X),B._applyDiscriminators!=null)for(let Y of B._applyDiscriminators.keys()){let{schema:G,options:H}=B._applyDiscriminators.get(Y);X.discriminator(Y,G,H)}return X};e.prototype.deleteModel=function A(F){let B=this instanceof e?this:v2;return B.connection.deleteModel(F),delete B.models[F],B};e.prototype.modelNames=function A(){let F=this instanceof e?this:v2;return Object.keys(F.models)};e.prototype._applyPlugins=function A(F,B){let D=this instanceof e?this:v2;B=B||{},B.applyPluginsToDiscriminators=D.options&&D.options.applyPluginsToDiscriminators||!1,B.applyPluginsToChildSchemas=typeof(D.options&&D.options.applyPluginsToChildSchemas)==="boolean"?D.options.applyPluginsToChildSchemas:!0,Yw1(F,D.plugins,B,"$globalPluginsApplied")};e.prototype.plugin=function A(F,B){let D=this instanceof e?this:v2;return D.plugins.push([F,B]),D};e.prototype.__defineGetter__("connection",function(){return this.connections[0]});e.prototype.__defineSetter__("connection",function(A){if(A instanceof this.__driver.Connection)this.connections[0]=A,this.models=A.models});e.prototype.connections;e.prototype.nextConnectionId;e.prototype.Aggregate=Cw1;Object.defineProperty(e.prototype,"Collection",{get:function(){return this.__driver.Collection},set:function(A){this.__driver.Collection=A}});Object.defineProperty(e.prototype,"Connection",{get:function(){return this.__driver.Connection},set:function(A){if(A===this.__driver.Connection)return;this.__driver.Connection=A}});e.prototype.version=Ww1.version;e.prototype.Mongoose=e;e.prototype.Schema=h4;e.prototype.SchemaType=$w1;e.prototype.SchemaTypes=h4.Types;e.prototype.VirtualType=Jw1;e.prototype.Types=Xw1;e.prototype.Query=Ew1;e.prototype.Model=Lp;e.prototype.Document=Bw1;e.prototype.DocumentProvider=Zp();e.prototype.ObjectId=LB.ObjectId;e.prototype.isValidObjectId=function A(F){return(this instanceof e?this:v2).Types.ObjectId.isValid(F)};e.prototype.isObjectIdOrHexString=function A(F){return zw1(F,"ObjectId")||typeof F==="string"&&Zw1.test(F)};e.prototype.syncIndexes=function A(F){return(this instanceof e?this:v2).connection.syncIndexes(F)};e.prototype.Decimal128=LB.Decimal128;e.prototype.Mixed=LB.Mixed;e.prototype.Date=LB.Date;e.prototype.Number=LB.Number;e.prototype.Error=k5;e.prototype.MongooseError=k5;e.prototype.now=function A(){return new Date};e.prototype.CastError=k5.CastError;e.prototype.SchemaTypeOptions=f6();e.prototype.mquery=Fz();e.prototype.sanitizeFilter=Kw1;e.prototype.trusted=Qw1;e.prototype.skipMiddlewareFunction=wp.skipWrappedFunction;e.prototype.overwriteMiddlewareResult=wp.overwriteResult;e.prototype.omitUndefined=YQ();/*!
 * Create a new default connection (`mongoose.connection`) for a Mongoose instance.
 * No-op if there is already a default connection.
 */function mz(A){if(A.connection)return;let F=A.createConnection();F[Pp]=!0,F.models=A.models}var v2=jp.exports=Mp=new e({[Np]:!0})});var up=z((bf1,Op)=>{/*!
 * Module dependencies.
 */var kp=Um();EX().set(kp);var dz=Tp();dz.setDriver(kp);dz.Mongoose.prototype.mongo=C7();Op.exports=dz});var T9=z((yf1,H1)=>{var q1=up();H1.exports=q1;H1.exports.default=q1;H1.exports.mongoose=q1;H1.exports.cast=q1.cast;H1.exports.STATES=q1.STATES;H1.exports.setDriver=q1.setDriver;H1.exports.set=q1.set;H1.exports.get=q1.get;H1.exports.createConnection=q1.createConnection;H1.exports.connect=q1.connect;H1.exports.disconnect=q1.disconnect;H1.exports.startSession=q1.startSession;H1.exports.pluralize=q1.pluralize;H1.exports.model=q1.model;H1.exports.deleteModel=q1.deleteModel;H1.exports.modelNames=q1.modelNames;H1.exports.plugin=q1.plugin;H1.exports.connections=q1.connections;H1.exports.version=q1.version;H1.exports.Aggregate=q1.Aggregate;H1.exports.Mongoose=q1.Mongoose;H1.exports.Schema=q1.Schema;H1.exports.SchemaType=q1.SchemaType;H1.exports.SchemaTypes=q1.SchemaTypes;H1.exports.VirtualType=q1.VirtualType;H1.exports.Types=q1.Types;H1.exports.Query=q1.Query;H1.exports.Model=q1.Model;H1.exports.Document=q1.Document;H1.exports.ObjectId=q1.ObjectId;H1.exports.isValidObjectId=q1.isValidObjectId;H1.exports.isObjectIdOrHexString=q1.isObjectIdOrHexString;H1.exports.syncIndexes=q1.syncIndexes;H1.exports.Decimal128=q1.Decimal128;H1.exports.Mixed=q1.Mixed;H1.exports.Date=q1.Date;H1.exports.Number=q1.Number;H1.exports.Error=q1.Error;H1.exports.MongooseError=q1.MongooseError;H1.exports.now=q1.now;H1.exports.CastError=q1.CastError;H1.exports.SchemaTypeOptions=q1.SchemaTypeOptions;H1.exports.mongo=q1.mongo;H1.exports.mquery=q1.mquery;H1.exports.sanitizeFilter=q1.sanitizeFilter;H1.exports.trusted=q1.trusted;H1.exports.skipMiddlewareFunction=q1.skipMiddlewareFunction;H1.exports.overwriteMiddlewareResult=q1.overwriteMiddlewareResult});var DE=(A,F,B)=>{return(D,$)=>{let J=-1;return X(0);async function X(E){if(E<=J)throw new Error("next() called multiple times");J=E;let Y,G=!1,H;if(A[E])H=A[E][0][0],D.req.routeIndex=E;else H=E===A.length&&$||void 0;if(H)try{Y=await H(D,()=>X(E+1))}catch(W){if(W instanceof Error&&F)D.error=W,Y=await F(W,D),G=!0;else throw W}else if(D.finalized===!1&&B)Y=await B(D);if(Y&&(D.finalized===!1||G))D.res=Y;return D}}};var kU=Symbol();var OU=async(A,F=Object.create(null))=>{let{all:B=!1,dot:D=!1}=F,J=(A instanceof SB?A.raw.headers:A.headers).get("Content-Type");if(J?.startsWith("multipart/form-data")||J?.startsWith("application/x-www-form-urlencoded"))return Ri(A,{all:B,dot:D});return{}};async function Ri(A,F){let B=await A.formData();if(B)return Ni(B,F);return{}}function Ni(A,F){let B=Object.create(null);if(A.forEach((D,$)=>{if(!(F.all||$.endsWith("[]")))B[$]=D;else Pi(B,$,D)}),F.dot)Object.entries(B).forEach(([D,$])=>{if(D.includes("."))Ii(B,D,$),delete B[D]});return B}var Pi=(A,F,B)=>{if(A[F]!==void 0)if(Array.isArray(A[F]))A[F].push(B);else A[F]=[A[F],B];else if(!F.endsWith("[]"))A[F]=B;else A[F]=[B]},Ii=(A,F,B)=>{let D=A,$=F.split(".");$.forEach((J,X)=>{if(X===$.length-1)D[J]=B;else{if(!D[J]||typeof D[J]!=="object"||Array.isArray(D[J])||D[J]instanceof File)D[J]=Object.create(null);D=D[J]}})};var JE=(A)=>{let F=A.split("/");if(F[0]==="")F.shift();return F},uU=(A)=>{let{groups:F,path:B}=Mi(A),D=JE(B);return ji(D,F)},Mi=(A)=>{let F=[];return A=A.replace(/\{[^}]+\}/g,(B,D)=>{let $=`@${D}`;return F.push([$,B]),$}),{groups:F,path:A}},ji=(A,F)=>{for(let B=F.length-1;B>=0;B--){let[D]=F[B];for(let $=A.length-1;$>=0;$--)if(A[$].includes(D)){A[$]=A[$].replace(D,F[B][1]);break}}return A},fB={},SU=(A,F)=>{if(A==="*")return"*";let B=A.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(B){let D=`${A}#${F}`;if(!fB[D])if(B[2])fB[D]=F&&F[0]!==":"&&F[0]!=="*"?[D,B[1],new RegExp(`^${B[2]}(?=/${F})`)]:[A,B[1],new RegExp(`^${B[2]}$`)];else fB[D]=[A,B[1],!0];return fB[D]}return null},_B=(A,F)=>{try{return F(A)}catch{return A.replace(/(?:%[0-9A-Fa-f]{2})+/g,(B)=>{try{return F(B)}catch{return B}})}},Ti=(A)=>_B(A,decodeURI),XE=(A)=>{let F=A.url,B=F.indexOf("/",F.charCodeAt(9)===58?13:8),D=B;for(;D<F.length;D++){let $=F.charCodeAt(D);if($===37){let J=F.indexOf("?",D),X=F.slice(B,J===-1?void 0:J);return Ti(X.includes("%25")?X.replace(/%25/g,"%2525"):X)}else if($===63)break}return F.slice(B,D)};var fU=(A)=>{let F=XE(A);return F.length>1&&F.at(-1)==="/"?F.slice(0,-1):F},h9=(A,F,...B)=>{if(B.length)F=h9(F,...B);return`${A?.[0]==="/"?"":"/"}${A}${F==="/"?"":`${A?.at(-1)==="/"?"":"/"}${F?.[0]==="/"?F.slice(1):F}`}`},xB=(A)=>{if(A.charCodeAt(A.length-1)!==63||!A.includes(":"))return null;let F=A.split("/"),B=[],D="";return F.forEach(($)=>{if($!==""&&!/\:/.test($))D+="/"+$;else if(/\:/.test($))if(/\?/.test($)){if(B.length===0&&D==="")B.push("/");else B.push(D);let J=$.replace("?","");D+="/"+J,B.push(D)}else D+="/"+$}),B.filter(($,J,X)=>X.indexOf($)===J)},$E=(A)=>{if(!/[%+]/.test(A))return A;if(A.indexOf("+")!==-1)A=A.replace(/\+/g," ");return A.indexOf("%")!==-1?_B(A,gB):A},_U=(A,F,B)=>{let D;if(!B&&F&&!/[%+]/.test(F)){let X=A.indexOf(`?${F}`,8);if(X===-1)X=A.indexOf(`&${F}`,8);while(X!==-1){let E=A.charCodeAt(X+F.length+1);if(E===61){let Y=X+F.length+2,G=A.indexOf("&",Y);return $E(A.slice(Y,G===-1?void 0:G))}else if(E==38||isNaN(E))return"";X=A.indexOf(`&${F}`,X+1)}if(D=/[%+]/.test(A),!D)return}let $={};D??=/[%+]/.test(A);let J=A.indexOf("?",8);while(J!==-1){let X=A.indexOf("&",J+1),E=A.indexOf("=",J);if(E>X&&X!==-1)E=-1;let Y=A.slice(J+1,E===-1?X===-1?void 0:X:E);if(D)Y=$E(Y);if(J=X,Y==="")continue;let G;if(E===-1)G="";else if(G=A.slice(E+1,X===-1?void 0:X),D)G=$E(G);if(B){if(!($[Y]&&Array.isArray($[Y])))$[Y]=[];$[Y].push(G)}else $[Y]??=G}return F?$[F]:$},xU=_U,gU=(A,F)=>{return _U(A,F,!0)},gB=decodeURIComponent;var bU=(A)=>_B(A,gB),SB=class{raw;#F;#A;routeIndex=0;path;bodyCache={};constructor(A,F="/",B=[[]]){this.raw=A,this.path=F,this.#A=B,this.#F={}}param(A){return A?this.#B(A):this.#J()}#B(A){let F=this.#A[0][this.routeIndex][1][A],B=this.#$(F);return B?/\%/.test(B)?bU(B):B:void 0}#J(){let A={},F=Object.keys(this.#A[0][this.routeIndex][1]);for(let B of F){let D=this.#$(this.#A[0][this.routeIndex][1][B]);if(D&&typeof D==="string")A[B]=/\%/.test(D)?bU(D):D}return A}#$(A){return this.#A[1]?this.#A[1][A]:A}query(A){return xU(this.url,A)}queries(A){return gU(this.url,A)}header(A){if(A)return this.raw.headers.get(A)??void 0;let F={};return this.raw.headers.forEach((B,D)=>{F[D]=B}),F}async parseBody(A){return this.bodyCache.parsedBody??=await OU(this,A)}#D=(A)=>{let{bodyCache:F,raw:B}=this,D=F[A];if(D)return D;let $=Object.keys(F)[0];if($)return F[$].then((J)=>{if($==="json")J=JSON.stringify(J);return new Response(J)[A]()});return F[A]=B[A]()};json(){return this.#D("json")}text(){return this.#D("text")}arrayBuffer(){return this.#D("arrayBuffer")}blob(){return this.#D("blob")}formData(){return this.#D("formData")}addValidatedData(A,F){this.#F[A]=F}valid(A){return this.#F[A]}get url(){return this.raw.url}get method(){return this.raw.method}get[kU](){return this.#A}get matchedRoutes(){return this.#A[0].map(([[,A]])=>A)}get routePath(){return this.#A[0].map(([[,A]])=>A)[this.routeIndex].path}};var yU={Stringify:1,BeforeStream:2,Stream:3},ki=(A,F)=>{let B=new String(A);return B.isEscaped=!0,B.callbacks=F,B};var EE=async(A,F,B,D,$)=>{if(typeof A==="object"&&!(A instanceof String)){if(!(A instanceof Promise))A=A.toString();if(A instanceof Promise)A=await A}let J=A.callbacks;if(!J?.length)return Promise.resolve(A);if($)$[0]+=A;else $=[A];let X=Promise.all(J.map((E)=>E({phase:F,buffer:$,context:D}))).then((E)=>Promise.all(E.filter(Boolean).map((Y)=>EE(Y,F,!1,D,$))).then(()=>$[0]));if(B)return ki(await X,J);else return X};var Oi="text/plain; charset=UTF-8",YE=(A,F)=>{return{"Content-Type":A,...F}},hU=class{#F;#A;env={};#B;finalized=!1;error;#J;#$;#D;#H;#Y;#G;#E;#W;#q;constructor(A,F){if(this.#F=A,F)this.#$=F.executionCtx,this.env=F.env,this.#G=F.notFoundHandler,this.#q=F.path,this.#W=F.matchResult}get req(){return this.#A??=new SB(this.#F,this.#q,this.#W),this.#A}get event(){if(this.#$&&"respondWith"in this.#$)return this.#$;else throw Error("This context has no FetchEvent")}get executionCtx(){if(this.#$)return this.#$;else throw Error("This context has no ExecutionContext")}get res(){return this.#D||=new Response(null,{headers:this.#E??=new Headers})}set res(A){if(this.#D&&A){A=new Response(A.body,A);for(let[F,B]of this.#D.headers.entries()){if(F==="content-type")continue;if(F==="set-cookie"){let D=this.#D.headers.getSetCookie();A.headers.delete("set-cookie");for(let $ of D)A.headers.append("set-cookie",$)}else A.headers.set(F,B)}}this.#D=A,this.finalized=!0}render=(...A)=>{return this.#Y??=(F)=>this.html(F),this.#Y(...A)};setLayout=(A)=>this.#H=A;getLayout=()=>this.#H;setRenderer=(A)=>{this.#Y=A};header=(A,F,B)=>{if(this.finalized)this.#D=new Response(this.#D.body,this.#D);let D=this.#D?this.#D.headers:this.#E??=new Headers;if(F===void 0)D.delete(A);else if(B?.append)D.append(A,F);else D.set(A,F)};status=(A)=>{this.#J=A};set=(A,F)=>{this.#B??=new Map,this.#B.set(A,F)};get=(A)=>{return this.#B?this.#B.get(A):void 0};get var(){if(!this.#B)return{};return Object.fromEntries(this.#B)}#X(A,F,B){let D=this.#D?new Headers(this.#D.headers):this.#E??new Headers;if(typeof F==="object"&&"headers"in F){let J=F.headers instanceof Headers?F.headers:new Headers(F.headers);for(let[X,E]of J)if(X.toLowerCase()==="set-cookie")D.append(X,E);else D.set(X,E)}if(B)for(let[J,X]of Object.entries(B))if(typeof X==="string")D.set(J,X);else{D.delete(J);for(let E of X)D.append(J,E)}let $=typeof F==="number"?F:F?.status??this.#J;return new Response(A,{status:$,headers:D})}newResponse=(...A)=>this.#X(...A);body=(A,F,B)=>this.#X(A,F,B);text=(A,F,B)=>{return!this.#E&&!this.#J&&!F&&!B&&!this.finalized?new Response(A):this.#X(A,F,YE(Oi,B))};json=(A,F,B)=>{return this.#X(JSON.stringify(A),F,YE("application/json",B))};html=(A,F,B)=>{let D=($)=>this.#X($,F,YE("text/html; charset=UTF-8",B));return typeof A==="object"?EE(A,yU.Stringify,!1,{}).then(D):D(A)};redirect=(A,F)=>{return this.header("Location",String(A)),this.newResponse(null,F??302)};notFound=()=>{return this.#G??=()=>new Response,this.#G(this)}};var k0="ALL",vU="all",mU=["get","post","put","delete","options","patch"],bB="Can not add a route since the matcher is already built.",yB=class extends Error{};var dU="__COMPOSED_HANDLER";var ui=(A)=>{return A.text("404 Not Found",404)},lU=(A,F)=>{if("getResponse"in A){let B=A.getResponse();return F.newResponse(B.body,B)}return console.error(A),F.text("Internal Server Error",500)},GE=class{get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath="/";#F="/";routes=[];constructor(A={}){[...mU,vU].forEach(($)=>{this[$]=(J,...X)=>{if(typeof J==="string")this.#F=J;else this.#J($,this.#F,J);return X.forEach((E)=>{this.#J($,this.#F,E)}),this}}),this.on=($,J,...X)=>{for(let E of[J].flat()){this.#F=E;for(let Y of[$].flat())X.map((G)=>{this.#J(Y.toUpperCase(),this.#F,G)})}return this},this.use=($,...J)=>{if(typeof $==="string")this.#F=$;else this.#F="*",J.unshift($);return J.forEach((X)=>{this.#J(k0,this.#F,X)}),this};let{strict:B,...D}=A;Object.assign(this,D),this.getPath=B??!0?A.getPath??XE:fU}#A(){let A=new GE({router:this.router,getPath:this.getPath});return A.errorHandler=this.errorHandler,A.#B=this.#B,A.routes=this.routes,A}#B=ui;errorHandler=lU;route(A,F){let B=this.basePath(A);return F.routes.map((D)=>{let $;if(F.errorHandler===lU)$=D.handler;else $=async(J,X)=>(await DE([],F.errorHandler)(J,()=>D.handler(J,X))).res,$[dU]=D.handler;B.#J(D.method,D.path,$)}),this}basePath(A){let F=this.#A();return F._basePath=h9(this._basePath,A),F}onError=(A)=>{return this.errorHandler=A,this};notFound=(A)=>{return this.#B=A,this};mount(A,F,B){let D,$;if(B)if(typeof B==="function")$=B;else if($=B.optionHandler,B.replaceRequest===!1)D=(E)=>E;else D=B.replaceRequest;let J=$?(E)=>{let Y=$(E);return Array.isArray(Y)?Y:[Y]}:(E)=>{let Y=void 0;try{Y=E.executionCtx}catch{}return[E.env,Y]};D||=(()=>{let E=h9(this._basePath,A),Y=E==="/"?0:E.length;return(G)=>{let H=new URL(G.url);return H.pathname=H.pathname.slice(Y)||"/",new Request(H,G)}})();let X=async(E,Y)=>{let G=await F(D(E.req.raw),...J(E));if(G)return G;await Y()};return this.#J(k0,h9(A,"*"),X),this}#J(A,F,B){A=A.toUpperCase(),F=h9(this._basePath,F);let D={basePath:this._basePath,path:F,method:A,handler:B};this.router.add(A,F,[B,D]),this.routes.push(D)}#$(A,F){if(A instanceof Error)return this.errorHandler(A,F);throw A}#D(A,F,B,D){if(D==="HEAD")return(async()=>new Response(null,await this.#D(A,F,B,"GET")))();let $=this.getPath(A,{env:B}),J=this.router.match(D,$),X=new hU(A,{path:$,matchResult:J,env:B,executionCtx:F,notFoundHandler:this.#B});if(J[0].length===1){let Y;try{Y=J[0][0][0][0](X,async()=>{X.res=await this.#B(X)})}catch(G){return this.#$(G,X)}return Y instanceof Promise?Y.then((G)=>G||(X.finalized?X.res:this.#B(X))).catch((G)=>this.#$(G,X)):Y??this.#B(X)}let E=DE(J[0],this.errorHandler,this.#B);return(async()=>{try{let Y=await E(X);if(!Y.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return Y.res}catch(Y){return this.#$(Y,X)}})()}fetch=(A,...F)=>{return this.#D(A,F[1],F[0],A.method)};request=(A,F,B,D)=>{if(A instanceof Request)return this.fetch(F?new Request(A,F):A,B,D);return A=A.toString(),this.fetch(new Request(/^https?:\/\//.test(A)?A:`http://localhost${h9("/",A)}`,F),B,D)};fire=()=>{addEventListener("fetch",(A)=>{A.respondWith(this.#D(A.request,A,void 0,A.request.method))})}};var hB="[^/]+",r5=".*",t5="(?:|/.*)",n7=Symbol(),Si=new Set(".\\+*[^]$()");function fi(A,F){if(A.length===1)return F.length===1?A<F?-1:1:-1;if(F.length===1)return 1;if(A===r5||A===t5)return 1;else if(F===r5||F===t5)return-1;if(A===hB)return 1;else if(F===hB)return-1;return A.length===F.length?A<F?-1:1:F.length-A.length}var vB=class{#F;#A;#B=Object.create(null);insert(A,F,B,D,$){if(A.length===0){if(this.#F!==void 0)throw n7;if($)return;this.#F=F;return}let[J,...X]=A,E=J==="*"?X.length===0?["","",r5]:["","",hB]:J==="/*"?["","",t5]:J.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/),Y;if(E){let G=E[1],H=E[2]||hB;if(G&&E[2]){if(H=H.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(H))throw n7}if(Y=this.#B[H],!Y){if(Object.keys(this.#B).some((W)=>W!==r5&&W!==t5))throw n7;if($)return;if(Y=this.#B[H]=new vB,G!=="")Y.#A=D.varIndex++}if(!$&&G!=="")B.push([G,Y.#A])}else if(Y=this.#B[J],!Y){if(Object.keys(this.#B).some((G)=>G.length>1&&G!==r5&&G!==t5))throw n7;if($)return;Y=this.#B[J]=new vB}Y.insert(X,F,B,D,$)}buildRegExpStr(){let F=Object.keys(this.#B).sort(fi).map((B)=>{let D=this.#B[B];return(typeof D.#A==="number"?`(${B})@${D.#A}`:Si.has(B)?`\\${B}`:B)+D.buildRegExpStr()});if(typeof this.#F==="number")F.unshift(`#${this.#F}`);if(F.length===0)return"";if(F.length===1)return F[0];return"(?:"+F.join("|")+")"}};var cU=class{#F={varIndex:0};#A=new vB;insert(A,F,B){let D=[],$=[];for(let X=0;;){let E=!1;if(A=A.replace(/\{[^}]+\}/g,(Y)=>{let G=`@\\${X}`;return $[X]=[G,Y],X++,E=!0,G}),!E)break}let J=A.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let X=$.length-1;X>=0;X--){let[E]=$[X];for(let Y=J.length-1;Y>=0;Y--)if(J[Y].indexOf(E)!==-1){J[Y]=J[Y].replace(E,$[X][1]);break}}return this.#A.insert(J,F,D,this.#F,B),D}buildRegExp(){let A=this.#A.buildRegExpStr();if(A==="")return[/^$/,[],[]];let F=0,B=[],D=[];return A=A.replace(/#(\d+)|@(\d+)|\.\*\$/g,($,J,X)=>{if(J!==void 0)return B[++F]=Number(J),"$()";if(X!==void 0)return D[Number(X)]=++F,"";return""}),[new RegExp(`^${A}`),B,D]}};var pU=[],_i=[/^$/,[],Object.create(null)],iU=Object.create(null);function nU(A){return iU[A]??=new RegExp(A==="*"?"":`^${A.replace(/\/\*$|([.\\+*[^\]$()])/g,(F,B)=>B?`\\${B}`:"(?:|/.*)")}$`)}function xi(){iU=Object.create(null)}function gi(A){let F=new cU,B=[];if(A.length===0)return _i;let D=A.map((G)=>[!/\*|\/:/.test(G[0]),...G]).sort(([G,H],[W,q])=>G?1:W?-1:H.length-q.length),$=Object.create(null);for(let G=0,H=-1,W=D.length;G<W;G++){let[q,C,Q]=D[G];if(q)$[C]=[Q.map(([U])=>[U,Object.create(null)]),pU];else H++;let K;try{K=F.insert(C,H,q)}catch(U){throw U===n7?new yB(C):U}if(q)continue;B[H]=Q.map(([U,Z])=>{let V=Object.create(null);Z-=1;for(;Z>=0;Z--){let[w,R]=K[Z];V[w]=R}return[U,V]})}let[J,X,E]=F.buildRegExp();for(let G=0,H=B.length;G<H;G++)for(let W=0,q=B[G].length;W<q;W++){let C=B[G][W]?.[1];if(!C)continue;let Q=Object.keys(C);for(let K=0,U=Q.length;K<U;K++)C[Q[K]]=E[C[Q[K]]]}let Y=[];for(let G in X)Y[G]=B[X[G]];return[J,Y,$]}function s7(A,F){if(!A)return;for(let B of Object.keys(A).sort((D,$)=>$.length-D.length))if(nU(B).test(F))return[...A[B]];return}var HE=class{name="RegExpRouter";#F;#A;constructor(){this.#F={[k0]:Object.create(null)},this.#A={[k0]:Object.create(null)}}add(A,F,B){let D=this.#F,$=this.#A;if(!D||!$)throw new Error(bB);if(!D[A])[D,$].forEach((E)=>{E[A]=Object.create(null),Object.keys(E[k0]).forEach((Y)=>{E[A][Y]=[...E[k0][Y]]})});if(F==="/*")F="*";let J=(F.match(/\/:/g)||[]).length;if(/\*$/.test(F)){let E=nU(F);if(A===k0)Object.keys(D).forEach((Y)=>{D[Y][F]||=s7(D[Y],F)||s7(D[k0],F)||[]});else D[A][F]||=s7(D[A],F)||s7(D[k0],F)||[];Object.keys(D).forEach((Y)=>{if(A===k0||A===Y)Object.keys(D[Y]).forEach((G)=>{E.test(G)&&D[Y][G].push([B,J])})}),Object.keys($).forEach((Y)=>{if(A===k0||A===Y)Object.keys($[Y]).forEach((G)=>E.test(G)&&$[Y][G].push([B,J]))});return}let X=xB(F)||[F];for(let E=0,Y=X.length;E<Y;E++){let G=X[E];Object.keys($).forEach((H)=>{if(A===k0||A===H)$[H][G]||=[...s7(D[H],G)||s7(D[k0],G)||[]],$[H][G].push([B,J-Y+E+1])})}}match(A,F){xi();let B=this.#B();return this.match=(D,$)=>{let J=B[D]||B[k0],X=J[2][$];if(X)return X;let E=$.match(J[0]);if(!E)return[[],pU];let Y=E.indexOf("",1);return[J[1][Y],E]},this.match(A,F)}#B(){let A=Object.create(null);return Object.keys(this.#A).concat(Object.keys(this.#F)).forEach((F)=>{A[F]||=this.#J(F)}),this.#F=this.#A=void 0,A}#J(A){let F=[],B=A===k0;if([this.#F,this.#A].forEach((D)=>{let $=D[A]?Object.keys(D[A]).map((J)=>[J,D[A][J]]):[];if($.length!==0)B||=!0,F.push(...$);else if(A!==k0)F.push(...Object.keys(D[k0]).map((J)=>[J,D[k0][J]]))}),!B)return null;else return gi(F)}};var WE=class{name="SmartRouter";#F=[];#A=[];constructor(A){this.#F=A.routers}add(A,F,B){if(!this.#A)throw new Error(bB);this.#A.push([A,F,B])}match(A,F){if(!this.#A)throw new Error("Fatal error");let B=this.#F,D=this.#A,$=B.length,J=0,X;for(;J<$;J++){let E=B[J];try{for(let Y=0,G=D.length;Y<G;Y++)E.add(...D[Y]);X=E.match(A,F)}catch(Y){if(Y instanceof yB)continue;throw Y}this.match=E.match.bind(E),this.#F=[E],this.#A=void 0;break}if(J===$)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,X}get activeRouter(){if(this.#A||this.#F.length!==1)throw new Error("No active router has been determined yet.");return this.#F[0]}};var o5=Object.create(null),qE=class{#F;#A;#B;#J=0;#$=o5;constructor(A,F,B){if(this.#A=B||Object.create(null),this.#F=[],A&&F){let D=Object.create(null);D[A]={handler:F,possibleKeys:[],score:0},this.#F=[D]}this.#B=[]}insert(A,F,B){this.#J=++this.#J;let D=this,$=uU(F),J=[];for(let X=0,E=$.length;X<E;X++){let Y=$[X],G=$[X+1],H=SU(Y,G),W=Array.isArray(H)?H[0]:Y;if(W in D.#A){if(D=D.#A[W],H)J.push(H[1]);continue}if(D.#A[W]=new qE,H)D.#B.push(H),J.push(H[1]);D=D.#A[W]}return D.#F.push({[A]:{handler:B,possibleKeys:J.filter((X,E,Y)=>Y.indexOf(X)===E),score:this.#J}}),D}#D(A,F,B,D){let $=[];for(let J=0,X=A.#F.length;J<X;J++){let E=A.#F[J],Y=E[F]||E[k0],G={};if(Y!==void 0){if(Y.params=Object.create(null),$.push(Y),B!==o5||D&&D!==o5)for(let H=0,W=Y.possibleKeys.length;H<W;H++){let q=Y.possibleKeys[H],C=G[Y.score];Y.params[q]=D?.[q]&&!C?D[q]:B[q]??D?.[q],G[Y.score]=!0}}}return $}search(A,F){let B=[];this.#$=o5;let $=[this],J=JE(F),X=[];for(let E=0,Y=J.length;E<Y;E++){let G=J[E],H=E===Y-1,W=[];for(let q=0,C=$.length;q<C;q++){let Q=$[q],K=Q.#A[G];if(K)if(K.#$=Q.#$,H){if(K.#A["*"])B.push(...this.#D(K.#A["*"],A,Q.#$));B.push(...this.#D(K,A,Q.#$))}else W.push(K);for(let U=0,Z=Q.#B.length;U<Z;U++){let V=Q.#B[U],w=Q.#$===o5?{}:{...Q.#$};if(V==="*"){let x=Q.#A["*"];if(x)B.push(...this.#D(x,A,Q.#$)),x.#$=w,W.push(x);continue}if(!G)continue;let[R,I,j]=V,k=Q.#A[R],u=J.slice(E).join("/");if(j instanceof RegExp){let x=j.exec(u);if(x){if(w[I]=x[0],B.push(...this.#D(k,A,Q.#$,w)),Object.keys(k.#A).length){k.#$=w;let T=x[0].match(/\//)?.length??0;(X[T]||=[]).push(k)}continue}}if(j===!0||j.test(G))if(w[I]=G,H){if(B.push(...this.#D(k,A,w,Q.#$)),k.#A["*"])B.push(...this.#D(k.#A["*"],A,w,Q.#$))}else k.#$=w,W.push(k)}}$=W.concat(X.shift()??[])}if(B.length>1)B.sort((E,Y)=>{return E.score-Y.score});return[B.map(({handler:E,params:Y})=>[E,Y])]}};var CE=class{name="TrieRouter";#F;constructor(){this.#F=new qE}add(A,F,B){let D=xB(F);if(D){for(let $=0,J=D.length;$<J;$++)this.#F.insert(A,D[$],B);return}this.#F.insert(A,F,B)}match(A,F){return this.#F.search(A,F)}};var L6=class extends GE{constructor(A={}){super(A);this.router=A.router??new WE({routers:[new HE,new CE]})}};function bi(){let{process:A,Deno:F}=globalThis;return!(typeof F?.noColor==="boolean"?F.noColor:A!==void 0?"NO_COLOR"in A?.env:!1)}async function sU(){let{navigator:A}=globalThis,F="cloudflare:workers";return!(A!==void 0&&A.userAgent==="Cloudflare-Workers"?await(async()=>{try{return"NO_COLOR"in((await import("cloudflare:workers")).env??{})}catch{return!1}})():!bi())}var yi=(A)=>{let[F,B]=[",","."];return A.map(($)=>$.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+F)).join(B)},hi=(A)=>{let F=Date.now()-A;return yi([F<1000?F+"ms":Math.round(F/1000)+"s"])},vi=async(A)=>{if(await sU())switch(A/100|0){case 5:return`\x1B[31m${A}\x1B[0m`;case 4:return`\x1B[33m${A}\x1B[0m`;case 3:return`\x1B[36m${A}\x1B[0m`;case 2:return`\x1B[32m${A}\x1B[0m`}return`${A}`};async function aU(A,F,B,D,$=0,J){let X=F==="<--"?`${F} ${B} ${D}`:`${F} ${B} ${D} ${await vi($)} ${J}`;A(X)}var rU=(A=console.log)=>{return async function F(B,D){let{method:$,url:J}=B.req,X=J.slice(J.indexOf("/",8));await aU(A,"<--",$,X);let E=Date.now();await D(),await aU(A,"-->",$,X,B.res.status,hi(E))}};var tU=(A)=>{let B={...{origin:"*",allowMethods:["GET","HEAD","PUT","POST","DELETE","PATCH"],allowHeaders:[],exposeHeaders:[]},...A},D=((J)=>{if(typeof J==="string")if(J==="*")return()=>J;else return(X)=>J===X?X:null;else if(typeof J==="function")return J;else return(X)=>J.includes(X)?X:null})(B.origin),$=((J)=>{if(typeof J==="function")return J;else if(Array.isArray(J))return()=>J;else return()=>[]})(B.allowMethods);return async function J(X,E){function Y(H,W){X.res.headers.set(H,W)}let G=D(X.req.header("origin")||"",X);if(G)Y("Access-Control-Allow-Origin",G);if(B.origin!=="*"){let H=X.req.header("Vary");if(H)Y("Vary",H);else Y("Vary","Origin")}if(B.credentials)Y("Access-Control-Allow-Credentials","true");if(B.exposeHeaders?.length)Y("Access-Control-Expose-Headers",B.exposeHeaders.join(","));if(X.req.method==="OPTIONS"){if(B.maxAge!=null)Y("Access-Control-Max-Age",B.maxAge.toString());let H=$(X.req.header("origin")||"",X);if(H.length)Y("Access-Control-Allow-Methods",H.join(","));let W=B.allowHeaders;if(!W?.length){let q=X.req.header("Access-Control-Request-Headers");if(q)W=q.split(/\s*,\s*/)}if(W?.length)Y("Access-Control-Allow-Headers",W.join(",")),X.res.headers.append("Vary","Access-Control-Request-Headers");return X.res.headers.delete("Content-Length"),X.res.headers.delete("Content-Type"),new Response(null,{headers:X.res.headers,status:204,statusText:"No Content"})}await E()}};var Sp=c4(T9(),1),fp=async()=>{let A=Bun.env.MONGO;if(!A)throw new Error("Missing MongoDB URI");try{console.log("Connecting to MongoDB");let F=await Sp.connect(A,{timeoutMS:1e4});return console.log("MongoDB connected!"),F}catch(F){throw new Error("Cannot connect to MongoDB")}};var lz=(A)=>{return pz(A.replace(/_|-/g,(F)=>({_:"/","-":"+"})[F]??F))},cz=(A)=>Vw1(A).replace(/\/|\+/g,(F)=>({"/":"_","+":"-"})[F]??F),Vw1=(A)=>{let F="",B=new Uint8Array(A);for(let D=0,$=B.length;D<$;D++)F+=String.fromCharCode(B[D]);return btoa(F)},pz=(A)=>{let F=atob(A),B=new Uint8Array(new ArrayBuffer(F.length)),D=F.length/2;for(let $=0,J=F.length-1;$<=D;$++,J--)B[$]=F.charCodeAt($),B[J]=F.charCodeAt(J);return B};var iz=((A)=>{return A.HS256="HS256",A.HS384="HS384",A.HS512="HS512",A.RS256="RS256",A.RS384="RS384",A.RS512="RS512",A.PS256="PS256",A.PS384="PS384",A.PS512="PS512",A.ES256="ES256",A.ES384="ES384",A.ES512="ES512",A.EdDSA="EdDSA",A})(iz||{});var ww1={deno:"Deno",bun:"Bun",workerd:"Cloudflare-Workers",node:"Node.js"},_p=()=>{let A=globalThis;if(typeof navigator!=="undefined"&&typeof navigator.userAgent==="string"){for(let[B,D]of Object.entries(ww1))if(Lw1(D))return B}if(typeof A?.EdgeRuntime==="string")return"edge-light";if(A?.fastly!==void 0)return"fastly";if(A?.process?.release?.name==="node")return"node";return"other"},Lw1=(A)=>{return navigator.userAgent.startsWith(A)};var xp=class extends Error{constructor(A){super(`${A} is not an implemented algorithm`);this.name="JwtAlgorithmNotImplemented"}},RB=class extends Error{constructor(A){super(`invalid JWT token: ${A}`);this.name="JwtTokenInvalid"}},gp=class extends Error{constructor(A){super(`token (${A}) is being used before it's valid`);this.name="JwtTokenNotBefore"}},bp=class extends Error{constructor(A){super(`token (${A}) expired`);this.name="JwtTokenExpired"}},yp=class extends Error{constructor(A,F){super(`Incorrect "iat" claim must be a older than "${A}" (iat: "${F}")`);this.name="JwtTokenIssuedAt"}},nz=class extends Error{constructor(A){super(`jwt header is invalid: ${JSON.stringify(A)}`);this.name="JwtHeaderInvalid"}},hp=class extends Error{constructor(A){super(`required "kid" in jwt header: ${JSON.stringify(A)}`);this.name="JwtHeaderRequiresKid"}},vp=class extends Error{constructor(A){super(`token(${A}) signature mismatched`);this.name="JwtTokenSignatureMismatched"}},O5=((A)=>{return A.Encrypt="encrypt",A.Decrypt="decrypt",A.Sign="sign",A.Verify="verify",A.DeriveKey="deriveKey",A.DeriveBits="deriveBits",A.WrapKey="wrapKey",A.UnwrapKey="unwrapKey",A})(O5||{});var k9=new TextEncoder,mp=new TextDecoder;async function lp(A,F,B){let D=pp(F),$=await Rw1(A,D);return await crypto.subtle.sign(D,$,B)}async function cp(A,F,B,D){let $=pp(F),J=await Nw1(A,$);return await crypto.subtle.verify($,J,B,D)}function sz(A){return pz(A.replace(/-+(BEGIN|END).*/g,"").replace(/\s/g,""))}async function Rw1(A,F){if(!crypto.subtle||!crypto.subtle.importKey)throw new Error("`crypto.subtle.importKey` is undefined. JWT auth middleware requires it.");if(ip(A)){if(A.type!=="private"&&A.type!=="secret")throw new Error(`unexpected key type: CryptoKey.type is ${A.type}, expected private or secret`);return A}let B=[O5.Sign];if(typeof A==="object")return await crypto.subtle.importKey("jwk",A,F,!1,B);if(A.includes("PRIVATE"))return await crypto.subtle.importKey("pkcs8",sz(A),F,!1,B);return await crypto.subtle.importKey("raw",k9.encode(A),F,!1,B)}async function Nw1(A,F){if(!crypto.subtle||!crypto.subtle.importKey)throw new Error("`crypto.subtle.importKey` is undefined. JWT auth middleware requires it.");if(ip(A)){if(A.type==="public"||A.type==="secret")return A;A=await dp(A)}if(typeof A==="string"&&A.includes("PRIVATE")){let D=await crypto.subtle.importKey("pkcs8",sz(A),F,!0,[O5.Sign]);A=await dp(D)}let B=[O5.Verify];if(typeof A==="object")return await crypto.subtle.importKey("jwk",A,F,!1,B);if(A.includes("PUBLIC"))return await crypto.subtle.importKey("spki",sz(A),F,!1,B);return await crypto.subtle.importKey("raw",k9.encode(A),F,!1,B)}async function dp(A){if(A.type!=="private")throw new Error(`unexpected key type: ${A.type}`);if(!A.extractable)throw new Error("unexpected private key is unextractable");let F=await crypto.subtle.exportKey("jwk",A),{kty:B}=F,{alg:D,e:$,n:J}=F,{crv:X,x:E,y:Y}=F;return{kty:B,alg:D,e:$,n:J,crv:X,x:E,y:Y,key_ops:[O5.Verify]}}function pp(A){switch(A){case"HS256":return{name:"HMAC",hash:{name:"SHA-256"}};case"HS384":return{name:"HMAC",hash:{name:"SHA-384"}};case"HS512":return{name:"HMAC",hash:{name:"SHA-512"}};case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"RS384":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"RS512":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"PS256":return{name:"RSA-PSS",hash:{name:"SHA-256"},saltLength:32};case"PS384":return{name:"RSA-PSS",hash:{name:"SHA-384"},saltLength:48};case"PS512":return{name:"RSA-PSS",hash:{name:"SHA-512"},saltLength:64};case"ES256":return{name:"ECDSA",hash:{name:"SHA-256"},namedCurve:"P-256"};case"ES384":return{name:"ECDSA",hash:{name:"SHA-384"},namedCurve:"P-384"};case"ES512":return{name:"ECDSA",hash:{name:"SHA-512"},namedCurve:"P-521"};case"EdDSA":return{name:"Ed25519",namedCurve:"Ed25519"};default:throw new xp(A)}}function ip(A){if(_p()==="node"&&!!crypto.webcrypto)return A instanceof crypto.webcrypto.CryptoKey;return A instanceof CryptoKey}var az=(A)=>cz(k9.encode(JSON.stringify(A)).buffer).replace(/=/g,""),Pw1=(A)=>cz(A).replace(/=/g,""),rz=(A)=>JSON.parse(mp.decode(lz(A)));function np(A){if(typeof A==="object"&&A!==null){let F=A;return"alg"in F&&Object.values(iz).includes(F.alg)&&(!("typ"in F)||F.typ==="JWT")}return!1}var sp=async(A,F,B="HS256")=>{let D=az(A),$;if(typeof F==="object"&&"alg"in F)B=F.alg,$=az({alg:B,typ:"JWT",kid:F.kid});else $=az({alg:B,typ:"JWT"});let J=`${$}.${D}`,X=await lp(F,B,k9.encode(J)),E=Pw1(X);return`${J}.${E}`},tz=async(A,F,B="HS256")=>{let D=A.split(".");if(D.length!==3)throw new RB(A);let{header:$,payload:J}=oz(A);if(!np($))throw new nz($);let X=Date.now()/1000|0;if(J.nbf&&J.nbf>X)throw new gp(A);if(J.exp&&J.exp<=X)throw new bp(A);if(J.iat&&X<J.iat)throw new yp(X,J.iat);let E=A.substring(0,A.lastIndexOf("."));if(!await cp(F,B,lz(D[2]),k9.encode(E)))throw new vp(A);return J},ap=async(A,F,B)=>{let D=Iw1(A);if(!np(D))throw new nz(D);if(!D.kid)throw new hp(D);if(F.jwks_uri){let J=await fetch(F.jwks_uri,B);if(!J.ok)throw new Error(`failed to fetch JWKS from ${F.jwks_uri}`);let X=await J.json();if(!X.keys)throw new Error('invalid JWKS response. "keys" field is missing');if(!Array.isArray(X.keys))throw new Error('invalid JWKS response. "keys" field is not an array');if(F.keys)F.keys.push(...X.keys);else F.keys=X.keys}else if(!F.keys)throw new Error('verifyFromJwks requires options for either "keys" or "jwks_uri" or both');let $=F.keys.find((J)=>J.kid===D.kid);if(!$)throw new RB(A);return await tz(A,$,$.alg||D.alg)},oz=(A)=>{try{let[F,B]=A.split("."),D=rz(F),$=rz(B);return{header:D,payload:$}}catch{throw new RB(A)}},Iw1=(A)=>{try{let[F]=A.split(".");return rz(F)}catch{throw new RB(A)}};var cX={sign:sp,verify:tz,decode:oz,verifyFromJwks:ap};var NB=cX.verify,Mw1=cX.decode,PB=cX.sign;var pX=c4(T9(),1),jw1=new pX.Schema({username:{type:String,required:!0,unique:!0},password:{type:String,required:!0},role:{type:String,enum:["admin","maintainer"],required:!0},firstname:{type:String,required:!0},lastname:{type:String,required:!0},created_at:{type:Date,required:!0,default:new Date},is_first_time:{type:Boolean,required:!0,default:!0}},{strict:!0}),O9=pX.model("User",jw1),b6={createAdmin:async(A)=>{return await new O9({...A,role:"admin"}).save()},createMaintainer:async(A)=>{return await new O9({...A,role:"maintainer"}).save()},getByUsername:async(A)=>{return await O9.findOne({username:A})},getById:async(A)=>{return await O9.findById(A)},updatePassword:async(A,F)=>{return await O9.findByIdAndUpdate(A,{password:F,is_first_time:!1},{new:!0})},getAll:async()=>{return await O9.find().select("-password")},delete:async(A)=>{return await O9.findByIdAndDelete(A)},updateRole:async(A,F)=>{return await O9.findByIdAndUpdate(A,{role:F},{new:!0}).select("-password")}};var d={};Li(d,{void:()=>WL1,util:()=>S1,unknown:()=>GL1,union:()=>KL1,undefined:()=>XL1,tuple:()=>ZL1,transformer:()=>TL1,symbol:()=>JL1,string:()=>$i,strictObject:()=>QL1,setErrorMap:()=>Ow1,set:()=>LL1,record:()=>VL1,quotelessJson:()=>Tw1,promise:()=>jL1,preprocess:()=>uL1,pipeline:()=>SL1,ostring:()=>fL1,optional:()=>kL1,onumber:()=>_L1,oboolean:()=>xL1,objectUtil:()=>AU,object:()=>CL1,number:()=>Ji,nullable:()=>OL1,null:()=>EL1,never:()=>HL1,nativeEnum:()=>ML1,nan:()=>BL1,map:()=>wL1,makeIssue:()=>IB,literal:()=>PL1,lazy:()=>NL1,late:()=>AL1,isValid:()=>u9,isDirty:()=>nX,isAsync:()=>S5,isAborted:()=>iX,intersection:()=>UL1,instanceof:()=>FL1,getParsedType:()=>o3,getErrorMap:()=>u5,function:()=>RL1,enum:()=>IL1,effect:()=>TL1,discriminatedUnion:()=>zL1,defaultErrorMap:()=>v4,datetimeRegex:()=>Fi,date:()=>$L1,custom:()=>Di,coerce:()=>gL1,boolean:()=>Xi,bigint:()=>DL1,array:()=>qL1,any:()=>YL1,addIssueToContext:()=>o,ZodVoid:()=>jB,ZodUnknown:()=>S9,ZodUnion:()=>y5,ZodUndefined:()=>g5,ZodType:()=>k1,ZodTuple:()=>A4,ZodTransformer:()=>x3,ZodSymbol:()=>MB,ZodString:()=>u3,ZodSet:()=>l7,ZodSchema:()=>k1,ZodRecord:()=>TB,ZodReadonly:()=>p5,ZodPromise:()=>c7,ZodPipeline:()=>uB,ZodParsedType:()=>r,ZodOptional:()=>f3,ZodObject:()=>T0,ZodNumber:()=>f9,ZodNullable:()=>d4,ZodNull:()=>b5,ZodNever:()=>e3,ZodNativeEnum:()=>d5,ZodNaN:()=>OB,ZodMap:()=>kB,ZodLiteral:()=>m5,ZodLazy:()=>v5,ZodIssueCode:()=>c,ZodIntersection:()=>h5,ZodFunction:()=>_5,ZodFirstPartyTypeKind:()=>W1,ZodError:()=>m2,ZodEnum:()=>x9,ZodEffects:()=>x3,ZodDiscriminatedUnion:()=>sX,ZodDefault:()=>l5,ZodDate:()=>m7,ZodCatch:()=>c5,ZodBranded:()=>aX,ZodBoolean:()=>x5,ZodBigInt:()=>_9,ZodArray:()=>S3,ZodAny:()=>d7,Schema:()=>k1,ParseStatus:()=>Z2,OK:()=>d2,NEVER:()=>bL1,INVALID:()=>G1,EMPTY_PATH:()=>uw1,DIRTY:()=>v7,BRAND:()=>ew1});var S1;(function(A){A.assertEqual=($)=>{};function F($){}A.assertIs=F;function B($){throw new Error}A.assertNever=B,A.arrayToEnum=($)=>{let J={};for(let X of $)J[X]=X;return J},A.getValidEnumValues=($)=>{let J=A.objectKeys($).filter((E)=>typeof $[$[E]]!=="number"),X={};for(let E of J)X[E]=$[E];return A.objectValues(X)},A.objectValues=($)=>{return A.objectKeys($).map(function(J){return $[J]})},A.objectKeys=typeof Object.keys==="function"?($)=>Object.keys($):($)=>{let J=[];for(let X in $)if(Object.prototype.hasOwnProperty.call($,X))J.push(X);return J},A.find=($,J)=>{for(let X of $)if(J(X))return X;return},A.isInteger=typeof Number.isInteger==="function"?($)=>Number.isInteger($):($)=>typeof $==="number"&&Number.isFinite($)&&Math.floor($)===$;function D($,J=" | "){return $.map((X)=>typeof X==="string"?`'${X}'`:X).join(J)}A.joinValues=D,A.jsonStringifyReplacer=($,J)=>{if(typeof J==="bigint")return J.toString();return J}})(S1||(S1={}));var AU;(function(A){A.mergeShapes=(F,B)=>{return{...F,...B}}})(AU||(AU={}));var r=S1.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),o3=(A)=>{switch(typeof A){case"undefined":return r.undefined;case"string":return r.string;case"number":return Number.isNaN(A)?r.nan:r.number;case"boolean":return r.boolean;case"function":return r.function;case"bigint":return r.bigint;case"symbol":return r.symbol;case"object":if(Array.isArray(A))return r.array;if(A===null)return r.null;if(A.then&&typeof A.then==="function"&&A.catch&&typeof A.catch==="function")return r.promise;if(typeof Map!=="undefined"&&A instanceof Map)return r.map;if(typeof Set!=="undefined"&&A instanceof Set)return r.set;if(typeof Date!=="undefined"&&A instanceof Date)return r.date;return r.object;default:return r.unknown}};var c=S1.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Tw1=(A)=>{return JSON.stringify(A,null,2).replace(/"([^"]+)":/g,"$1:")};class m2 extends Error{get errors(){return this.issues}constructor(A){super();this.issues=[],this.addIssue=(B)=>{this.issues=[...this.issues,B]},this.addIssues=(B=[])=>{this.issues=[...this.issues,...B]};let F=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,F);else this.__proto__=F;this.name="ZodError",this.issues=A}format(A){let F=A||function($){return $.message},B={_errors:[]},D=($)=>{for(let J of $.issues)if(J.code==="invalid_union")J.unionErrors.map(D);else if(J.code==="invalid_return_type")D(J.returnTypeError);else if(J.code==="invalid_arguments")D(J.argumentsError);else if(J.path.length===0)B._errors.push(F(J));else{let X=B,E=0;while(E<J.path.length){let Y=J.path[E];if(E!==J.path.length-1)X[Y]=X[Y]||{_errors:[]};else X[Y]=X[Y]||{_errors:[]},X[Y]._errors.push(F(J));X=X[Y],E++}}};return D(this),B}static assert(A){if(!(A instanceof m2))throw new Error(`Not a ZodError: ${A}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,S1.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(A=(F)=>F.message){let F={},B=[];for(let D of this.issues)if(D.path.length>0)F[D.path[0]]=F[D.path[0]]||[],F[D.path[0]].push(A(D));else B.push(A(D));return{formErrors:B,fieldErrors:F}}get formErrors(){return this.flatten()}}m2.create=(A)=>{return new m2(A)};var kw1=(A,F)=>{let B;switch(A.code){case c.invalid_type:if(A.received===r.undefined)B="Required";else B=`Expected ${A.expected}, received ${A.received}`;break;case c.invalid_literal:B=`Invalid literal value, expected ${JSON.stringify(A.expected,S1.jsonStringifyReplacer)}`;break;case c.unrecognized_keys:B=`Unrecognized key(s) in object: ${S1.joinValues(A.keys,", ")}`;break;case c.invalid_union:B="Invalid input";break;case c.invalid_union_discriminator:B=`Invalid discriminator value. Expected ${S1.joinValues(A.options)}`;break;case c.invalid_enum_value:B=`Invalid enum value. Expected ${S1.joinValues(A.options)}, received '${A.received}'`;break;case c.invalid_arguments:B="Invalid function arguments";break;case c.invalid_return_type:B="Invalid function return type";break;case c.invalid_date:B="Invalid date";break;case c.invalid_string:if(typeof A.validation==="object")if("includes"in A.validation){if(B=`Invalid input: must include "${A.validation.includes}"`,typeof A.validation.position==="number")B=`${B} at one or more positions greater than or equal to ${A.validation.position}`}else if("startsWith"in A.validation)B=`Invalid input: must start with "${A.validation.startsWith}"`;else if("endsWith"in A.validation)B=`Invalid input: must end with "${A.validation.endsWith}"`;else S1.assertNever(A.validation);else if(A.validation!=="regex")B=`Invalid ${A.validation}`;else B="Invalid";break;case c.too_small:if(A.type==="array")B=`Array must contain ${A.exact?"exactly":A.inclusive?"at least":"more than"} ${A.minimum} element(s)`;else if(A.type==="string")B=`String must contain ${A.exact?"exactly":A.inclusive?"at least":"over"} ${A.minimum} character(s)`;else if(A.type==="number")B=`Number must be ${A.exact?"exactly equal to ":A.inclusive?"greater than or equal to ":"greater than "}${A.minimum}`;else if(A.type==="date")B=`Date must be ${A.exact?"exactly equal to ":A.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(A.minimum))}`;else B="Invalid input";break;case c.too_big:if(A.type==="array")B=`Array must contain ${A.exact?"exactly":A.inclusive?"at most":"less than"} ${A.maximum} element(s)`;else if(A.type==="string")B=`String must contain ${A.exact?"exactly":A.inclusive?"at most":"under"} ${A.maximum} character(s)`;else if(A.type==="number")B=`Number must be ${A.exact?"exactly":A.inclusive?"less than or equal to":"less than"} ${A.maximum}`;else if(A.type==="bigint")B=`BigInt must be ${A.exact?"exactly":A.inclusive?"less than or equal to":"less than"} ${A.maximum}`;else if(A.type==="date")B=`Date must be ${A.exact?"exactly":A.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(A.maximum))}`;else B="Invalid input";break;case c.custom:B="Invalid input";break;case c.invalid_intersection_types:B="Intersection results could not be merged";break;case c.not_multiple_of:B=`Number must be a multiple of ${A.multipleOf}`;break;case c.not_finite:B="Number must be finite";break;default:B=F.defaultError,S1.assertNever(A)}return{message:B}},v4=kw1;var rp=v4;function Ow1(A){rp=A}function u5(){return rp}var IB=(A)=>{let{data:F,path:B,errorMaps:D,issueData:$}=A,J=[...B,...$.path||[]],X={...$,path:J};if($.message!==void 0)return{...$,path:J,message:$.message};let E="",Y=D.filter((G)=>!!G).slice().reverse();for(let G of Y)E=G(X,{data:F,defaultError:E}).message;return{...$,path:J,message:E}},uw1=[];function o(A,F){let B=u5(),D=IB({issueData:F,data:A.data,path:A.path,errorMaps:[A.common.contextualErrorMap,A.schemaErrorMap,B,B===v4?void 0:v4].filter(($)=>!!$)});A.common.issues.push(D)}class Z2{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(A,F){let B=[];for(let D of F){if(D.status==="aborted")return G1;if(D.status==="dirty")A.dirty();B.push(D.value)}return{status:A.value,value:B}}static async mergeObjectAsync(A,F){let B=[];for(let D of F){let $=await D.key,J=await D.value;B.push({key:$,value:J})}return Z2.mergeObjectSync(A,B)}static mergeObjectSync(A,F){let B={};for(let D of F){let{key:$,value:J}=D;if($.status==="aborted")return G1;if(J.status==="aborted")return G1;if($.status==="dirty")A.dirty();if(J.status==="dirty")A.dirty();if($.value!=="__proto__"&&(typeof J.value!=="undefined"||D.alwaysSet))B[$.value]=J.value}return{status:A.value,value:B}}}var G1=Object.freeze({status:"aborted"}),v7=(A)=>({status:"dirty",value:A}),d2=(A)=>({status:"valid",value:A}),iX=(A)=>A.status==="aborted",nX=(A)=>A.status==="dirty",u9=(A)=>A.status==="valid",S5=(A)=>typeof Promise!=="undefined"&&A instanceof Promise;var B1;(function(A){A.errToObj=(F)=>typeof F==="string"?{message:F}:F||{},A.toString=(F)=>typeof F==="string"?F:F?.message})(B1||(B1={}));class _3{constructor(A,F,B,D){this._cachedPath=[],this.parent=A,this.data=F,this._path=B,this._key=D}get path(){if(!this._cachedPath.length)if(Array.isArray(this._key))this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var tp=(A,F)=>{if(u9(F))return{success:!0,data:F.value};else{if(!A.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let B=new m2(A.common.issues);return this._error=B,this._error}}}};function P1(A){if(!A)return{};let{errorMap:F,invalid_type_error:B,required_error:D,description:$}=A;if(F&&(B||D))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(F)return{errorMap:F,description:$};return{errorMap:(X,E)=>{let{message:Y}=A;if(X.code==="invalid_enum_value")return{message:Y??E.defaultError};if(typeof E.data==="undefined")return{message:Y??D??E.defaultError};if(X.code!=="invalid_type")return{message:E.defaultError};return{message:Y??B??E.defaultError}},description:$}}class k1{get description(){return this._def.description}_getType(A){return o3(A.data)}_getOrReturnCtx(A,F){return F||{common:A.parent.common,data:A.data,parsedType:o3(A.data),schemaErrorMap:this._def.errorMap,path:A.path,parent:A.parent}}_processInputParams(A){return{status:new Z2,ctx:{common:A.parent.common,data:A.data,parsedType:o3(A.data),schemaErrorMap:this._def.errorMap,path:A.path,parent:A.parent}}}_parseSync(A){let F=this._parse(A);if(S5(F))throw new Error("Synchronous parse encountered promise.");return F}_parseAsync(A){let F=this._parse(A);return Promise.resolve(F)}parse(A,F){let B=this.safeParse(A,F);if(B.success)return B.data;throw B.error}safeParse(A,F){let B={common:{issues:[],async:F?.async??!1,contextualErrorMap:F?.errorMap},path:F?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:A,parsedType:o3(A)},D=this._parseSync({data:A,path:B.path,parent:B});return tp(B,D)}"~validate"(A){let F={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:A,parsedType:o3(A)};if(!this["~standard"].async)try{let B=this._parseSync({data:A,path:[],parent:F});return u9(B)?{value:B.value}:{issues:F.common.issues}}catch(B){if(B?.message?.toLowerCase()?.includes("encountered"))this["~standard"].async=!0;F.common={issues:[],async:!0}}return this._parseAsync({data:A,path:[],parent:F}).then((B)=>u9(B)?{value:B.value}:{issues:F.common.issues})}async parseAsync(A,F){let B=await this.safeParseAsync(A,F);if(B.success)return B.data;throw B.error}async safeParseAsync(A,F){let B={common:{issues:[],contextualErrorMap:F?.errorMap,async:!0},path:F?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:A,parsedType:o3(A)},D=this._parse({data:A,path:B.path,parent:B}),$=await(S5(D)?D:Promise.resolve(D));return tp(B,$)}refine(A,F){let B=(D)=>{if(typeof F==="string"||typeof F==="undefined")return{message:F};else if(typeof F==="function")return F(D);else return F};return this._refinement((D,$)=>{let J=A(D),X=()=>$.addIssue({code:c.custom,...B(D)});if(typeof Promise!=="undefined"&&J instanceof Promise)return J.then((E)=>{if(!E)return X(),!1;else return!0});if(!J)return X(),!1;else return!0})}refinement(A,F){return this._refinement((B,D)=>{if(!A(B))return D.addIssue(typeof F==="function"?F(B,D):F),!1;else return!0})}_refinement(A){return new x3({schema:this,typeName:W1.ZodEffects,effect:{type:"refinement",refinement:A}})}superRefine(A){return this._refinement(A)}constructor(A){this.spa=this.safeParseAsync,this._def=A,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:(F)=>this["~validate"](F)}}optional(){return f3.create(this,this._def)}nullable(){return d4.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return S3.create(this)}promise(){return c7.create(this,this._def)}or(A){return y5.create([this,A],this._def)}and(A){return h5.create(this,A,this._def)}transform(A){return new x3({...P1(this._def),schema:this,typeName:W1.ZodEffects,effect:{type:"transform",transform:A}})}default(A){let F=typeof A==="function"?A:()=>A;return new l5({...P1(this._def),innerType:this,defaultValue:F,typeName:W1.ZodDefault})}brand(){return new aX({typeName:W1.ZodBranded,type:this,...P1(this._def)})}catch(A){let F=typeof A==="function"?A:()=>A;return new c5({...P1(this._def),innerType:this,catchValue:F,typeName:W1.ZodCatch})}describe(A){return new this.constructor({...this._def,description:A})}pipe(A){return uB.create(this,A)}readonly(){return p5.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var Sw1=/^c[^\s-]{8,}$/i,fw1=/^[0-9a-z]+$/,_w1=/^[0-9A-HJKMNP-TV-Z]{26}$/i,xw1=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,gw1=/^[a-z0-9_-]{21}$/i,bw1=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,yw1=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,hw1=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,vw1="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",FU,mw1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,dw1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,lw1=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,cw1=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,pw1=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,iw1=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ep="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",nw1=new RegExp(`^${ep}$`);function Ai(A){let F="[0-5]\\d";if(A.precision)F=`${F}\\.\\d{${A.precision}}`;else if(A.precision==null)F=`${F}(\\.\\d+)?`;let B=A.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${F})${B}`}function sw1(A){return new RegExp(`^${Ai(A)}$`)}function Fi(A){let F=`${ep}T${Ai(A)}`,B=[];if(B.push(A.local?"Z?":"Z"),A.offset)B.push("([+-]\\d{2}:?\\d{2})");return F=`${F}(${B.join("|")})`,new RegExp(`^${F}$`)}function aw1(A,F){if((F==="v4"||!F)&&mw1.test(A))return!0;if((F==="v6"||!F)&&lw1.test(A))return!0;return!1}function rw1(A,F){if(!bw1.test(A))return!1;try{let[B]=A.split("."),D=B.replace(/-/g,"+").replace(/_/g,"/").padEnd(B.length+(4-B.length%4)%4,"="),$=JSON.parse(atob(D));if(typeof $!=="object"||$===null)return!1;if("typ"in $&&$?.typ!=="JWT")return!1;if(!$.alg)return!1;if(F&&$.alg!==F)return!1;return!0}catch{return!1}}function tw1(A,F){if((F==="v4"||!F)&&dw1.test(A))return!0;if((F==="v6"||!F)&&cw1.test(A))return!0;return!1}class u3 extends k1{_parse(A){if(this._def.coerce)A.data=String(A.data);if(this._getType(A)!==r.string){let $=this._getOrReturnCtx(A);return o($,{code:c.invalid_type,expected:r.string,received:$.parsedType}),G1}let B=new Z2,D=void 0;for(let $ of this._def.checks)if($.kind==="min"){if(A.data.length<$.value)D=this._getOrReturnCtx(A,D),o(D,{code:c.too_small,minimum:$.value,type:"string",inclusive:!0,exact:!1,message:$.message}),B.dirty()}else if($.kind==="max"){if(A.data.length>$.value)D=this._getOrReturnCtx(A,D),o(D,{code:c.too_big,maximum:$.value,type:"string",inclusive:!0,exact:!1,message:$.message}),B.dirty()}else if($.kind==="length"){let J=A.data.length>$.value,X=A.data.length<$.value;if(J||X){if(D=this._getOrReturnCtx(A,D),J)o(D,{code:c.too_big,maximum:$.value,type:"string",inclusive:!0,exact:!0,message:$.message});else if(X)o(D,{code:c.too_small,minimum:$.value,type:"string",inclusive:!0,exact:!0,message:$.message});B.dirty()}}else if($.kind==="email"){if(!hw1.test(A.data))D=this._getOrReturnCtx(A,D),o(D,{validation:"email",code:c.invalid_string,message:$.message}),B.dirty()}else if($.kind==="emoji"){if(!FU)FU=new RegExp(vw1,"u");if(!FU.test(A.data))D=this._getOrReturnCtx(A,D),o(D,{validation:"emoji",code:c.invalid_string,message:$.message}),B.dirty()}else if($.kind==="uuid"){if(!xw1.test(A.data))D=this._getOrReturnCtx(A,D),o(D,{validation:"uuid",code:c.invalid_string,message:$.message}),B.dirty()}else if($.kind==="nanoid"){if(!gw1.test(A.data))D=this._getOrReturnCtx(A,D),o(D,{validation:"nanoid",code:c.invalid_string,message:$.message}),B.dirty()}else if($.kind==="cuid"){if(!Sw1.test(A.data))D=this._getOrReturnCtx(A,D),o(D,{validation:"cuid",code:c.invalid_string,message:$.message}),B.dirty()}else if($.kind==="cuid2"){if(!fw1.test(A.data))D=this._getOrReturnCtx(A,D),o(D,{validation:"cuid2",code:c.invalid_string,message:$.message}),B.dirty()}else if($.kind==="ulid"){if(!_w1.test(A.data))D=this._getOrReturnCtx(A,D),o(D,{validation:"ulid",code:c.invalid_string,message:$.message}),B.dirty()}else if($.kind==="url")try{new URL(A.data)}catch{D=this._getOrReturnCtx(A,D),o(D,{validation:"url",code:c.invalid_string,message:$.message}),B.dirty()}else if($.kind==="regex"){if($.regex.lastIndex=0,!$.regex.test(A.data))D=this._getOrReturnCtx(A,D),o(D,{validation:"regex",code:c.invalid_string,message:$.message}),B.dirty()}else if($.kind==="trim")A.data=A.data.trim();else if($.kind==="includes"){if(!A.data.includes($.value,$.position))D=this._getOrReturnCtx(A,D),o(D,{code:c.invalid_string,validation:{includes:$.value,position:$.position},message:$.message}),B.dirty()}else if($.kind==="toLowerCase")A.data=A.data.toLowerCase();else if($.kind==="toUpperCase")A.data=A.data.toUpperCase();else if($.kind==="startsWith"){if(!A.data.startsWith($.value))D=this._getOrReturnCtx(A,D),o(D,{code:c.invalid_string,validation:{startsWith:$.value},message:$.message}),B.dirty()}else if($.kind==="endsWith"){if(!A.data.endsWith($.value))D=this._getOrReturnCtx(A,D),o(D,{code:c.invalid_string,validation:{endsWith:$.value},message:$.message}),B.dirty()}else if($.kind==="datetime"){if(!Fi($).test(A.data))D=this._getOrReturnCtx(A,D),o(D,{code:c.invalid_string,validation:"datetime",message:$.message}),B.dirty()}else if($.kind==="date"){if(!nw1.test(A.data))D=this._getOrReturnCtx(A,D),o(D,{code:c.invalid_string,validation:"date",message:$.message}),B.dirty()}else if($.kind==="time"){if(!sw1($).test(A.data))D=this._getOrReturnCtx(A,D),o(D,{code:c.invalid_string,validation:"time",message:$.message}),B.dirty()}else if($.kind==="duration"){if(!yw1.test(A.data))D=this._getOrReturnCtx(A,D),o(D,{validation:"duration",code:c.invalid_string,message:$.message}),B.dirty()}else if($.kind==="ip"){if(!aw1(A.data,$.version))D=this._getOrReturnCtx(A,D),o(D,{validation:"ip",code:c.invalid_string,message:$.message}),B.dirty()}else if($.kind==="jwt"){if(!rw1(A.data,$.alg))D=this._getOrReturnCtx(A,D),o(D,{validation:"jwt",code:c.invalid_string,message:$.message}),B.dirty()}else if($.kind==="cidr"){if(!tw1(A.data,$.version))D=this._getOrReturnCtx(A,D),o(D,{validation:"cidr",code:c.invalid_string,message:$.message}),B.dirty()}else if($.kind==="base64"){if(!pw1.test(A.data))D=this._getOrReturnCtx(A,D),o(D,{validation:"base64",code:c.invalid_string,message:$.message}),B.dirty()}else if($.kind==="base64url"){if(!iw1.test(A.data))D=this._getOrReturnCtx(A,D),o(D,{validation:"base64url",code:c.invalid_string,message:$.message}),B.dirty()}else S1.assertNever($);return{status:B.value,value:A.data}}_regex(A,F,B){return this.refinement((D)=>A.test(D),{validation:F,code:c.invalid_string,...B1.errToObj(B)})}_addCheck(A){return new u3({...this._def,checks:[...this._def.checks,A]})}email(A){return this._addCheck({kind:"email",...B1.errToObj(A)})}url(A){return this._addCheck({kind:"url",...B1.errToObj(A)})}emoji(A){return this._addCheck({kind:"emoji",...B1.errToObj(A)})}uuid(A){return this._addCheck({kind:"uuid",...B1.errToObj(A)})}nanoid(A){return this._addCheck({kind:"nanoid",...B1.errToObj(A)})}cuid(A){return this._addCheck({kind:"cuid",...B1.errToObj(A)})}cuid2(A){return this._addCheck({kind:"cuid2",...B1.errToObj(A)})}ulid(A){return this._addCheck({kind:"ulid",...B1.errToObj(A)})}base64(A){return this._addCheck({kind:"base64",...B1.errToObj(A)})}base64url(A){return this._addCheck({kind:"base64url",...B1.errToObj(A)})}jwt(A){return this._addCheck({kind:"jwt",...B1.errToObj(A)})}ip(A){return this._addCheck({kind:"ip",...B1.errToObj(A)})}cidr(A){return this._addCheck({kind:"cidr",...B1.errToObj(A)})}datetime(A){if(typeof A==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:A});return this._addCheck({kind:"datetime",precision:typeof A?.precision==="undefined"?null:A?.precision,offset:A?.offset??!1,local:A?.local??!1,...B1.errToObj(A?.message)})}date(A){return this._addCheck({kind:"date",message:A})}time(A){if(typeof A==="string")return this._addCheck({kind:"time",precision:null,message:A});return this._addCheck({kind:"time",precision:typeof A?.precision==="undefined"?null:A?.precision,...B1.errToObj(A?.message)})}duration(A){return this._addCheck({kind:"duration",...B1.errToObj(A)})}regex(A,F){return this._addCheck({kind:"regex",regex:A,...B1.errToObj(F)})}includes(A,F){return this._addCheck({kind:"includes",value:A,position:F?.position,...B1.errToObj(F?.message)})}startsWith(A,F){return this._addCheck({kind:"startsWith",value:A,...B1.errToObj(F)})}endsWith(A,F){return this._addCheck({kind:"endsWith",value:A,...B1.errToObj(F)})}min(A,F){return this._addCheck({kind:"min",value:A,...B1.errToObj(F)})}max(A,F){return this._addCheck({kind:"max",value:A,...B1.errToObj(F)})}length(A,F){return this._addCheck({kind:"length",value:A,...B1.errToObj(F)})}nonempty(A){return this.min(1,B1.errToObj(A))}trim(){return new u3({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new u3({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new u3({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((A)=>A.kind==="datetime")}get isDate(){return!!this._def.checks.find((A)=>A.kind==="date")}get isTime(){return!!this._def.checks.find((A)=>A.kind==="time")}get isDuration(){return!!this._def.checks.find((A)=>A.kind==="duration")}get isEmail(){return!!this._def.checks.find((A)=>A.kind==="email")}get isURL(){return!!this._def.checks.find((A)=>A.kind==="url")}get isEmoji(){return!!this._def.checks.find((A)=>A.kind==="emoji")}get isUUID(){return!!this._def.checks.find((A)=>A.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((A)=>A.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((A)=>A.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((A)=>A.kind==="cuid2")}get isULID(){return!!this._def.checks.find((A)=>A.kind==="ulid")}get isIP(){return!!this._def.checks.find((A)=>A.kind==="ip")}get isCIDR(){return!!this._def.checks.find((A)=>A.kind==="cidr")}get isBase64(){return!!this._def.checks.find((A)=>A.kind==="base64")}get isBase64url(){return!!this._def.checks.find((A)=>A.kind==="base64url")}get minLength(){let A=null;for(let F of this._def.checks)if(F.kind==="min"){if(A===null||F.value>A)A=F.value}return A}get maxLength(){let A=null;for(let F of this._def.checks)if(F.kind==="max"){if(A===null||F.value<A)A=F.value}return A}}u3.create=(A)=>{return new u3({checks:[],typeName:W1.ZodString,coerce:A?.coerce??!1,...P1(A)})};function ow1(A,F){let B=(A.toString().split(".")[1]||"").length,D=(F.toString().split(".")[1]||"").length,$=B>D?B:D,J=Number.parseInt(A.toFixed($).replace(".","")),X=Number.parseInt(F.toFixed($).replace(".",""));return J%X/10**$}class f9 extends k1{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(A){if(this._def.coerce)A.data=Number(A.data);if(this._getType(A)!==r.number){let $=this._getOrReturnCtx(A);return o($,{code:c.invalid_type,expected:r.number,received:$.parsedType}),G1}let B=void 0,D=new Z2;for(let $ of this._def.checks)if($.kind==="int"){if(!S1.isInteger(A.data))B=this._getOrReturnCtx(A,B),o(B,{code:c.invalid_type,expected:"integer",received:"float",message:$.message}),D.dirty()}else if($.kind==="min"){if($.inclusive?A.data<$.value:A.data<=$.value)B=this._getOrReturnCtx(A,B),o(B,{code:c.too_small,minimum:$.value,type:"number",inclusive:$.inclusive,exact:!1,message:$.message}),D.dirty()}else if($.kind==="max"){if($.inclusive?A.data>$.value:A.data>=$.value)B=this._getOrReturnCtx(A,B),o(B,{code:c.too_big,maximum:$.value,type:"number",inclusive:$.inclusive,exact:!1,message:$.message}),D.dirty()}else if($.kind==="multipleOf"){if(ow1(A.data,$.value)!==0)B=this._getOrReturnCtx(A,B),o(B,{code:c.not_multiple_of,multipleOf:$.value,message:$.message}),D.dirty()}else if($.kind==="finite"){if(!Number.isFinite(A.data))B=this._getOrReturnCtx(A,B),o(B,{code:c.not_finite,message:$.message}),D.dirty()}else S1.assertNever($);return{status:D.value,value:A.data}}gte(A,F){return this.setLimit("min",A,!0,B1.toString(F))}gt(A,F){return this.setLimit("min",A,!1,B1.toString(F))}lte(A,F){return this.setLimit("max",A,!0,B1.toString(F))}lt(A,F){return this.setLimit("max",A,!1,B1.toString(F))}setLimit(A,F,B,D){return new f9({...this._def,checks:[...this._def.checks,{kind:A,value:F,inclusive:B,message:B1.toString(D)}]})}_addCheck(A){return new f9({...this._def,checks:[...this._def.checks,A]})}int(A){return this._addCheck({kind:"int",message:B1.toString(A)})}positive(A){return this._addCheck({kind:"min",value:0,inclusive:!1,message:B1.toString(A)})}negative(A){return this._addCheck({kind:"max",value:0,inclusive:!1,message:B1.toString(A)})}nonpositive(A){return this._addCheck({kind:"max",value:0,inclusive:!0,message:B1.toString(A)})}nonnegative(A){return this._addCheck({kind:"min",value:0,inclusive:!0,message:B1.toString(A)})}multipleOf(A,F){return this._addCheck({kind:"multipleOf",value:A,message:B1.toString(F)})}finite(A){return this._addCheck({kind:"finite",message:B1.toString(A)})}safe(A){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:B1.toString(A)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:B1.toString(A)})}get minValue(){let A=null;for(let F of this._def.checks)if(F.kind==="min"){if(A===null||F.value>A)A=F.value}return A}get maxValue(){let A=null;for(let F of this._def.checks)if(F.kind==="max"){if(A===null||F.value<A)A=F.value}return A}get isInt(){return!!this._def.checks.find((A)=>A.kind==="int"||A.kind==="multipleOf"&&S1.isInteger(A.value))}get isFinite(){let A=null,F=null;for(let B of this._def.checks)if(B.kind==="finite"||B.kind==="int"||B.kind==="multipleOf")return!0;else if(B.kind==="min"){if(F===null||B.value>F)F=B.value}else if(B.kind==="max"){if(A===null||B.value<A)A=B.value}return Number.isFinite(F)&&Number.isFinite(A)}}f9.create=(A)=>{return new f9({checks:[],typeName:W1.ZodNumber,coerce:A?.coerce||!1,...P1(A)})};class _9 extends k1{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(A){if(this._def.coerce)try{A.data=BigInt(A.data)}catch{return this._getInvalidInput(A)}if(this._getType(A)!==r.bigint)return this._getInvalidInput(A);let B=void 0,D=new Z2;for(let $ of this._def.checks)if($.kind==="min"){if($.inclusive?A.data<$.value:A.data<=$.value)B=this._getOrReturnCtx(A,B),o(B,{code:c.too_small,type:"bigint",minimum:$.value,inclusive:$.inclusive,message:$.message}),D.dirty()}else if($.kind==="max"){if($.inclusive?A.data>$.value:A.data>=$.value)B=this._getOrReturnCtx(A,B),o(B,{code:c.too_big,type:"bigint",maximum:$.value,inclusive:$.inclusive,message:$.message}),D.dirty()}else if($.kind==="multipleOf"){if(A.data%$.value!==BigInt(0))B=this._getOrReturnCtx(A,B),o(B,{code:c.not_multiple_of,multipleOf:$.value,message:$.message}),D.dirty()}else S1.assertNever($);return{status:D.value,value:A.data}}_getInvalidInput(A){let F=this._getOrReturnCtx(A);return o(F,{code:c.invalid_type,expected:r.bigint,received:F.parsedType}),G1}gte(A,F){return this.setLimit("min",A,!0,B1.toString(F))}gt(A,F){return this.setLimit("min",A,!1,B1.toString(F))}lte(A,F){return this.setLimit("max",A,!0,B1.toString(F))}lt(A,F){return this.setLimit("max",A,!1,B1.toString(F))}setLimit(A,F,B,D){return new _9({...this._def,checks:[...this._def.checks,{kind:A,value:F,inclusive:B,message:B1.toString(D)}]})}_addCheck(A){return new _9({...this._def,checks:[...this._def.checks,A]})}positive(A){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:B1.toString(A)})}negative(A){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:B1.toString(A)})}nonpositive(A){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:B1.toString(A)})}nonnegative(A){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:B1.toString(A)})}multipleOf(A,F){return this._addCheck({kind:"multipleOf",value:A,message:B1.toString(F)})}get minValue(){let A=null;for(let F of this._def.checks)if(F.kind==="min"){if(A===null||F.value>A)A=F.value}return A}get maxValue(){let A=null;for(let F of this._def.checks)if(F.kind==="max"){if(A===null||F.value<A)A=F.value}return A}}_9.create=(A)=>{return new _9({checks:[],typeName:W1.ZodBigInt,coerce:A?.coerce??!1,...P1(A)})};class x5 extends k1{_parse(A){if(this._def.coerce)A.data=Boolean(A.data);if(this._getType(A)!==r.boolean){let B=this._getOrReturnCtx(A);return o(B,{code:c.invalid_type,expected:r.boolean,received:B.parsedType}),G1}return d2(A.data)}}x5.create=(A)=>{return new x5({typeName:W1.ZodBoolean,coerce:A?.coerce||!1,...P1(A)})};class m7 extends k1{_parse(A){if(this._def.coerce)A.data=new Date(A.data);if(this._getType(A)!==r.date){let $=this._getOrReturnCtx(A);return o($,{code:c.invalid_type,expected:r.date,received:$.parsedType}),G1}if(Number.isNaN(A.data.getTime())){let $=this._getOrReturnCtx(A);return o($,{code:c.invalid_date}),G1}let B=new Z2,D=void 0;for(let $ of this._def.checks)if($.kind==="min"){if(A.data.getTime()<$.value)D=this._getOrReturnCtx(A,D),o(D,{code:c.too_small,message:$.message,inclusive:!0,exact:!1,minimum:$.value,type:"date"}),B.dirty()}else if($.kind==="max"){if(A.data.getTime()>$.value)D=this._getOrReturnCtx(A,D),o(D,{code:c.too_big,message:$.message,inclusive:!0,exact:!1,maximum:$.value,type:"date"}),B.dirty()}else S1.assertNever($);return{status:B.value,value:new Date(A.data.getTime())}}_addCheck(A){return new m7({...this._def,checks:[...this._def.checks,A]})}min(A,F){return this._addCheck({kind:"min",value:A.getTime(),message:B1.toString(F)})}max(A,F){return this._addCheck({kind:"max",value:A.getTime(),message:B1.toString(F)})}get minDate(){let A=null;for(let F of this._def.checks)if(F.kind==="min"){if(A===null||F.value>A)A=F.value}return A!=null?new Date(A):null}get maxDate(){let A=null;for(let F of this._def.checks)if(F.kind==="max"){if(A===null||F.value<A)A=F.value}return A!=null?new Date(A):null}}m7.create=(A)=>{return new m7({checks:[],coerce:A?.coerce||!1,typeName:W1.ZodDate,...P1(A)})};class MB extends k1{_parse(A){if(this._getType(A)!==r.symbol){let B=this._getOrReturnCtx(A);return o(B,{code:c.invalid_type,expected:r.symbol,received:B.parsedType}),G1}return d2(A.data)}}MB.create=(A)=>{return new MB({typeName:W1.ZodSymbol,...P1(A)})};class g5 extends k1{_parse(A){if(this._getType(A)!==r.undefined){let B=this._getOrReturnCtx(A);return o(B,{code:c.invalid_type,expected:r.undefined,received:B.parsedType}),G1}return d2(A.data)}}g5.create=(A)=>{return new g5({typeName:W1.ZodUndefined,...P1(A)})};class b5 extends k1{_parse(A){if(this._getType(A)!==r.null){let B=this._getOrReturnCtx(A);return o(B,{code:c.invalid_type,expected:r.null,received:B.parsedType}),G1}return d2(A.data)}}b5.create=(A)=>{return new b5({typeName:W1.ZodNull,...P1(A)})};class d7 extends k1{constructor(){super(...arguments);this._any=!0}_parse(A){return d2(A.data)}}d7.create=(A)=>{return new d7({typeName:W1.ZodAny,...P1(A)})};class S9 extends k1{constructor(){super(...arguments);this._unknown=!0}_parse(A){return d2(A.data)}}S9.create=(A)=>{return new S9({typeName:W1.ZodUnknown,...P1(A)})};class e3 extends k1{_parse(A){let F=this._getOrReturnCtx(A);return o(F,{code:c.invalid_type,expected:r.never,received:F.parsedType}),G1}}e3.create=(A)=>{return new e3({typeName:W1.ZodNever,...P1(A)})};class jB extends k1{_parse(A){if(this._getType(A)!==r.undefined){let B=this._getOrReturnCtx(A);return o(B,{code:c.invalid_type,expected:r.void,received:B.parsedType}),G1}return d2(A.data)}}jB.create=(A)=>{return new jB({typeName:W1.ZodVoid,...P1(A)})};class S3 extends k1{_parse(A){let{ctx:F,status:B}=this._processInputParams(A),D=this._def;if(F.parsedType!==r.array)return o(F,{code:c.invalid_type,expected:r.array,received:F.parsedType}),G1;if(D.exactLength!==null){let J=F.data.length>D.exactLength.value,X=F.data.length<D.exactLength.value;if(J||X)o(F,{code:J?c.too_big:c.too_small,minimum:X?D.exactLength.value:void 0,maximum:J?D.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:D.exactLength.message}),B.dirty()}if(D.minLength!==null){if(F.data.length<D.minLength.value)o(F,{code:c.too_small,minimum:D.minLength.value,type:"array",inclusive:!0,exact:!1,message:D.minLength.message}),B.dirty()}if(D.maxLength!==null){if(F.data.length>D.maxLength.value)o(F,{code:c.too_big,maximum:D.maxLength.value,type:"array",inclusive:!0,exact:!1,message:D.maxLength.message}),B.dirty()}if(F.common.async)return Promise.all([...F.data].map((J,X)=>{return D.type._parseAsync(new _3(F,J,F.path,X))})).then((J)=>{return Z2.mergeArray(B,J)});let $=[...F.data].map((J,X)=>{return D.type._parseSync(new _3(F,J,F.path,X))});return Z2.mergeArray(B,$)}get element(){return this._def.type}min(A,F){return new S3({...this._def,minLength:{value:A,message:B1.toString(F)}})}max(A,F){return new S3({...this._def,maxLength:{value:A,message:B1.toString(F)}})}length(A,F){return new S3({...this._def,exactLength:{value:A,message:B1.toString(F)}})}nonempty(A){return this.min(1,A)}}S3.create=(A,F)=>{return new S3({type:A,minLength:null,maxLength:null,exactLength:null,typeName:W1.ZodArray,...P1(F)})};function f5(A){if(A instanceof T0){let F={};for(let B in A.shape){let D=A.shape[B];F[B]=f3.create(f5(D))}return new T0({...A._def,shape:()=>F})}else if(A instanceof S3)return new S3({...A._def,type:f5(A.element)});else if(A instanceof f3)return f3.create(f5(A.unwrap()));else if(A instanceof d4)return d4.create(f5(A.unwrap()));else if(A instanceof A4)return A4.create(A.items.map((F)=>f5(F)));else return A}class T0 extends k1{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let A=this._def.shape(),F=S1.objectKeys(A);return this._cached={shape:A,keys:F},this._cached}_parse(A){if(this._getType(A)!==r.object){let Y=this._getOrReturnCtx(A);return o(Y,{code:c.invalid_type,expected:r.object,received:Y.parsedType}),G1}let{status:B,ctx:D}=this._processInputParams(A),{shape:$,keys:J}=this._getCached(),X=[];if(!(this._def.catchall instanceof e3&&this._def.unknownKeys==="strip")){for(let Y in D.data)if(!J.includes(Y))X.push(Y)}let E=[];for(let Y of J){let G=$[Y],H=D.data[Y];E.push({key:{status:"valid",value:Y},value:G._parse(new _3(D,H,D.path,Y)),alwaysSet:Y in D.data})}if(this._def.catchall instanceof e3){let Y=this._def.unknownKeys;if(Y==="passthrough")for(let G of X)E.push({key:{status:"valid",value:G},value:{status:"valid",value:D.data[G]}});else if(Y==="strict"){if(X.length>0)o(D,{code:c.unrecognized_keys,keys:X}),B.dirty()}else if(Y==="strip");else throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let Y=this._def.catchall;for(let G of X){let H=D.data[G];E.push({key:{status:"valid",value:G},value:Y._parse(new _3(D,H,D.path,G)),alwaysSet:G in D.data})}}if(D.common.async)return Promise.resolve().then(async()=>{let Y=[];for(let G of E){let H=await G.key,W=await G.value;Y.push({key:H,value:W,alwaysSet:G.alwaysSet})}return Y}).then((Y)=>{return Z2.mergeObjectSync(B,Y)});else return Z2.mergeObjectSync(B,E)}get shape(){return this._def.shape()}strict(A){return B1.errToObj,new T0({...this._def,unknownKeys:"strict",...A!==void 0?{errorMap:(F,B)=>{let D=this._def.errorMap?.(F,B).message??B.defaultError;if(F.code==="unrecognized_keys")return{message:B1.errToObj(A).message??D};return{message:D}}}:{}})}strip(){return new T0({...this._def,unknownKeys:"strip"})}passthrough(){return new T0({...this._def,unknownKeys:"passthrough"})}extend(A){return new T0({...this._def,shape:()=>({...this._def.shape(),...A})})}merge(A){return new T0({unknownKeys:A._def.unknownKeys,catchall:A._def.catchall,shape:()=>({...this._def.shape(),...A._def.shape()}),typeName:W1.ZodObject})}setKey(A,F){return this.augment({[A]:F})}catchall(A){return new T0({...this._def,catchall:A})}pick(A){let F={};for(let B of S1.objectKeys(A))if(A[B]&&this.shape[B])F[B]=this.shape[B];return new T0({...this._def,shape:()=>F})}omit(A){let F={};for(let B of S1.objectKeys(this.shape))if(!A[B])F[B]=this.shape[B];return new T0({...this._def,shape:()=>F})}deepPartial(){return f5(this)}partial(A){let F={};for(let B of S1.objectKeys(this.shape)){let D=this.shape[B];if(A&&!A[B])F[B]=D;else F[B]=D.optional()}return new T0({...this._def,shape:()=>F})}required(A){let F={};for(let B of S1.objectKeys(this.shape))if(A&&!A[B])F[B]=this.shape[B];else{let $=this.shape[B];while($ instanceof f3)$=$._def.innerType;F[B]=$}return new T0({...this._def,shape:()=>F})}keyof(){return Bi(S1.objectKeys(this.shape))}}T0.create=(A,F)=>{return new T0({shape:()=>A,unknownKeys:"strip",catchall:e3.create(),typeName:W1.ZodObject,...P1(F)})};T0.strictCreate=(A,F)=>{return new T0({shape:()=>A,unknownKeys:"strict",catchall:e3.create(),typeName:W1.ZodObject,...P1(F)})};T0.lazycreate=(A,F)=>{return new T0({shape:A,unknownKeys:"strip",catchall:e3.create(),typeName:W1.ZodObject,...P1(F)})};class y5 extends k1{_parse(A){let{ctx:F}=this._processInputParams(A),B=this._def.options;function D($){for(let X of $)if(X.result.status==="valid")return X.result;for(let X of $)if(X.result.status==="dirty")return F.common.issues.push(...X.ctx.common.issues),X.result;let J=$.map((X)=>new m2(X.ctx.common.issues));return o(F,{code:c.invalid_union,unionErrors:J}),G1}if(F.common.async)return Promise.all(B.map(async($)=>{let J={...F,common:{...F.common,issues:[]},parent:null};return{result:await $._parseAsync({data:F.data,path:F.path,parent:J}),ctx:J}})).then(D);else{let $=void 0,J=[];for(let E of B){let Y={...F,common:{...F.common,issues:[]},parent:null},G=E._parseSync({data:F.data,path:F.path,parent:Y});if(G.status==="valid")return G;else if(G.status==="dirty"&&!$)$={result:G,ctx:Y};if(Y.common.issues.length)J.push(Y.common.issues)}if($)return F.common.issues.push(...$.ctx.common.issues),$.result;let X=J.map((E)=>new m2(E));return o(F,{code:c.invalid_union,unionErrors:X}),G1}}get options(){return this._def.options}}y5.create=(A,F)=>{return new y5({options:A,typeName:W1.ZodUnion,...P1(F)})};var m4=(A)=>{if(A instanceof v5)return m4(A.schema);else if(A instanceof x3)return m4(A.innerType());else if(A instanceof m5)return[A.value];else if(A instanceof x9)return A.options;else if(A instanceof d5)return S1.objectValues(A.enum);else if(A instanceof l5)return m4(A._def.innerType);else if(A instanceof g5)return[void 0];else if(A instanceof b5)return[null];else if(A instanceof f3)return[void 0,...m4(A.unwrap())];else if(A instanceof d4)return[null,...m4(A.unwrap())];else if(A instanceof aX)return m4(A.unwrap());else if(A instanceof p5)return m4(A.unwrap());else if(A instanceof c5)return m4(A._def.innerType);else return[]};class sX extends k1{_parse(A){let{ctx:F}=this._processInputParams(A);if(F.parsedType!==r.object)return o(F,{code:c.invalid_type,expected:r.object,received:F.parsedType}),G1;let B=this.discriminator,D=F.data[B],$=this.optionsMap.get(D);if(!$)return o(F,{code:c.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[B]}),G1;if(F.common.async)return $._parseAsync({data:F.data,path:F.path,parent:F});else return $._parseSync({data:F.data,path:F.path,parent:F})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(A,F,B){let D=new Map;for(let $ of F){let J=m4($.shape[A]);if(!J.length)throw new Error(`A discriminator value for key \`${A}\` could not be extracted from all schema options`);for(let X of J){if(D.has(X))throw new Error(`Discriminator property ${String(A)} has duplicate value ${String(X)}`);D.set(X,$)}}return new sX({typeName:W1.ZodDiscriminatedUnion,discriminator:A,options:F,optionsMap:D,...P1(B)})}}function BU(A,F){let B=o3(A),D=o3(F);if(A===F)return{valid:!0,data:A};else if(B===r.object&&D===r.object){let $=S1.objectKeys(F),J=S1.objectKeys(A).filter((E)=>$.indexOf(E)!==-1),X={...A,...F};for(let E of J){let Y=BU(A[E],F[E]);if(!Y.valid)return{valid:!1};X[E]=Y.data}return{valid:!0,data:X}}else if(B===r.array&&D===r.array){if(A.length!==F.length)return{valid:!1};let $=[];for(let J=0;J<A.length;J++){let X=A[J],E=F[J],Y=BU(X,E);if(!Y.valid)return{valid:!1};$.push(Y.data)}return{valid:!0,data:$}}else if(B===r.date&&D===r.date&&+A===+F)return{valid:!0,data:A};else return{valid:!1}}class h5 extends k1{_parse(A){let{status:F,ctx:B}=this._processInputParams(A),D=($,J)=>{if(iX($)||iX(J))return G1;let X=BU($.value,J.value);if(!X.valid)return o(B,{code:c.invalid_intersection_types}),G1;if(nX($)||nX(J))F.dirty();return{status:F.value,value:X.data}};if(B.common.async)return Promise.all([this._def.left._parseAsync({data:B.data,path:B.path,parent:B}),this._def.right._parseAsync({data:B.data,path:B.path,parent:B})]).then(([$,J])=>D($,J));else return D(this._def.left._parseSync({data:B.data,path:B.path,parent:B}),this._def.right._parseSync({data:B.data,path:B.path,parent:B}))}}h5.create=(A,F,B)=>{return new h5({left:A,right:F,typeName:W1.ZodIntersection,...P1(B)})};class A4 extends k1{_parse(A){let{status:F,ctx:B}=this._processInputParams(A);if(B.parsedType!==r.array)return o(B,{code:c.invalid_type,expected:r.array,received:B.parsedType}),G1;if(B.data.length<this._def.items.length)return o(B,{code:c.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),G1;if(!this._def.rest&&B.data.length>this._def.items.length)o(B,{code:c.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),F.dirty();let $=[...B.data].map((J,X)=>{let E=this._def.items[X]||this._def.rest;if(!E)return null;return E._parse(new _3(B,J,B.path,X))}).filter((J)=>!!J);if(B.common.async)return Promise.all($).then((J)=>{return Z2.mergeArray(F,J)});else return Z2.mergeArray(F,$)}get items(){return this._def.items}rest(A){return new A4({...this._def,rest:A})}}A4.create=(A,F)=>{if(!Array.isArray(A))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new A4({items:A,typeName:W1.ZodTuple,rest:null,...P1(F)})};class TB extends k1{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(A){let{status:F,ctx:B}=this._processInputParams(A);if(B.parsedType!==r.object)return o(B,{code:c.invalid_type,expected:r.object,received:B.parsedType}),G1;let D=[],$=this._def.keyType,J=this._def.valueType;for(let X in B.data)D.push({key:$._parse(new _3(B,X,B.path,X)),value:J._parse(new _3(B,B.data[X],B.path,X)),alwaysSet:X in B.data});if(B.common.async)return Z2.mergeObjectAsync(F,D);else return Z2.mergeObjectSync(F,D)}get element(){return this._def.valueType}static create(A,F,B){if(F instanceof k1)return new TB({keyType:A,valueType:F,typeName:W1.ZodRecord,...P1(B)});return new TB({keyType:u3.create(),valueType:A,typeName:W1.ZodRecord,...P1(F)})}}class kB extends k1{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(A){let{status:F,ctx:B}=this._processInputParams(A);if(B.parsedType!==r.map)return o(B,{code:c.invalid_type,expected:r.map,received:B.parsedType}),G1;let D=this._def.keyType,$=this._def.valueType,J=[...B.data.entries()].map(([X,E],Y)=>{return{key:D._parse(new _3(B,X,B.path,[Y,"key"])),value:$._parse(new _3(B,E,B.path,[Y,"value"]))}});if(B.common.async){let X=new Map;return Promise.resolve().then(async()=>{for(let E of J){let Y=await E.key,G=await E.value;if(Y.status==="aborted"||G.status==="aborted")return G1;if(Y.status==="dirty"||G.status==="dirty")F.dirty();X.set(Y.value,G.value)}return{status:F.value,value:X}})}else{let X=new Map;for(let E of J){let{key:Y,value:G}=E;if(Y.status==="aborted"||G.status==="aborted")return G1;if(Y.status==="dirty"||G.status==="dirty")F.dirty();X.set(Y.value,G.value)}return{status:F.value,value:X}}}}kB.create=(A,F,B)=>{return new kB({valueType:F,keyType:A,typeName:W1.ZodMap,...P1(B)})};class l7 extends k1{_parse(A){let{status:F,ctx:B}=this._processInputParams(A);if(B.parsedType!==r.set)return o(B,{code:c.invalid_type,expected:r.set,received:B.parsedType}),G1;let D=this._def;if(D.minSize!==null){if(B.data.size<D.minSize.value)o(B,{code:c.too_small,minimum:D.minSize.value,type:"set",inclusive:!0,exact:!1,message:D.minSize.message}),F.dirty()}if(D.maxSize!==null){if(B.data.size>D.maxSize.value)o(B,{code:c.too_big,maximum:D.maxSize.value,type:"set",inclusive:!0,exact:!1,message:D.maxSize.message}),F.dirty()}let $=this._def.valueType;function J(E){let Y=new Set;for(let G of E){if(G.status==="aborted")return G1;if(G.status==="dirty")F.dirty();Y.add(G.value)}return{status:F.value,value:Y}}let X=[...B.data.values()].map((E,Y)=>$._parse(new _3(B,E,B.path,Y)));if(B.common.async)return Promise.all(X).then((E)=>J(E));else return J(X)}min(A,F){return new l7({...this._def,minSize:{value:A,message:B1.toString(F)}})}max(A,F){return new l7({...this._def,maxSize:{value:A,message:B1.toString(F)}})}size(A,F){return this.min(A,F).max(A,F)}nonempty(A){return this.min(1,A)}}l7.create=(A,F)=>{return new l7({valueType:A,minSize:null,maxSize:null,typeName:W1.ZodSet,...P1(F)})};class _5 extends k1{constructor(){super(...arguments);this.validate=this.implement}_parse(A){let{ctx:F}=this._processInputParams(A);if(F.parsedType!==r.function)return o(F,{code:c.invalid_type,expected:r.function,received:F.parsedType}),G1;function B(X,E){return IB({data:X,path:F.path,errorMaps:[F.common.contextualErrorMap,F.schemaErrorMap,u5(),v4].filter((Y)=>!!Y),issueData:{code:c.invalid_arguments,argumentsError:E}})}function D(X,E){return IB({data:X,path:F.path,errorMaps:[F.common.contextualErrorMap,F.schemaErrorMap,u5(),v4].filter((Y)=>!!Y),issueData:{code:c.invalid_return_type,returnTypeError:E}})}let $={errorMap:F.common.contextualErrorMap},J=F.data;if(this._def.returns instanceof c7){let X=this;return d2(async function(...E){let Y=new m2([]),G=await X._def.args.parseAsync(E,$).catch((q)=>{throw Y.addIssue(B(E,q)),Y}),H=await Reflect.apply(J,this,G);return await X._def.returns._def.type.parseAsync(H,$).catch((q)=>{throw Y.addIssue(D(H,q)),Y})})}else{let X=this;return d2(function(...E){let Y=X._def.args.safeParse(E,$);if(!Y.success)throw new m2([B(E,Y.error)]);let G=Reflect.apply(J,this,Y.data),H=X._def.returns.safeParse(G,$);if(!H.success)throw new m2([D(G,H.error)]);return H.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...A){return new _5({...this._def,args:A4.create(A).rest(S9.create())})}returns(A){return new _5({...this._def,returns:A})}implement(A){return this.parse(A)}strictImplement(A){return this.parse(A)}static create(A,F,B){return new _5({args:A?A:A4.create([]).rest(S9.create()),returns:F||S9.create(),typeName:W1.ZodFunction,...P1(B)})}}class v5 extends k1{get schema(){return this._def.getter()}_parse(A){let{ctx:F}=this._processInputParams(A);return this._def.getter()._parse({data:F.data,path:F.path,parent:F})}}v5.create=(A,F)=>{return new v5({getter:A,typeName:W1.ZodLazy,...P1(F)})};class m5 extends k1{_parse(A){if(A.data!==this._def.value){let F=this._getOrReturnCtx(A);return o(F,{received:F.data,code:c.invalid_literal,expected:this._def.value}),G1}return{status:"valid",value:A.data}}get value(){return this._def.value}}m5.create=(A,F)=>{return new m5({value:A,typeName:W1.ZodLiteral,...P1(F)})};function Bi(A,F){return new x9({values:A,typeName:W1.ZodEnum,...P1(F)})}class x9 extends k1{_parse(A){if(typeof A.data!=="string"){let F=this._getOrReturnCtx(A),B=this._def.values;return o(F,{expected:S1.joinValues(B),received:F.parsedType,code:c.invalid_type}),G1}if(!this._cache)this._cache=new Set(this._def.values);if(!this._cache.has(A.data)){let F=this._getOrReturnCtx(A),B=this._def.values;return o(F,{received:F.data,code:c.invalid_enum_value,options:B}),G1}return d2(A.data)}get options(){return this._def.values}get enum(){let A={};for(let F of this._def.values)A[F]=F;return A}get Values(){let A={};for(let F of this._def.values)A[F]=F;return A}get Enum(){let A={};for(let F of this._def.values)A[F]=F;return A}extract(A,F=this._def){return x9.create(A,{...this._def,...F})}exclude(A,F=this._def){return x9.create(this.options.filter((B)=>!A.includes(B)),{...this._def,...F})}}x9.create=Bi;class d5 extends k1{_parse(A){let F=S1.getValidEnumValues(this._def.values),B=this._getOrReturnCtx(A);if(B.parsedType!==r.string&&B.parsedType!==r.number){let D=S1.objectValues(F);return o(B,{expected:S1.joinValues(D),received:B.parsedType,code:c.invalid_type}),G1}if(!this._cache)this._cache=new Set(S1.getValidEnumValues(this._def.values));if(!this._cache.has(A.data)){let D=S1.objectValues(F);return o(B,{received:B.data,code:c.invalid_enum_value,options:D}),G1}return d2(A.data)}get enum(){return this._def.values}}d5.create=(A,F)=>{return new d5({values:A,typeName:W1.ZodNativeEnum,...P1(F)})};class c7 extends k1{unwrap(){return this._def.type}_parse(A){let{ctx:F}=this._processInputParams(A);if(F.parsedType!==r.promise&&F.common.async===!1)return o(F,{code:c.invalid_type,expected:r.promise,received:F.parsedType}),G1;let B=F.parsedType===r.promise?F.data:Promise.resolve(F.data);return d2(B.then((D)=>{return this._def.type.parseAsync(D,{path:F.path,errorMap:F.common.contextualErrorMap})}))}}c7.create=(A,F)=>{return new c7({type:A,typeName:W1.ZodPromise,...P1(F)})};class x3 extends k1{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===W1.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(A){let{status:F,ctx:B}=this._processInputParams(A),D=this._def.effect||null,$={addIssue:(J)=>{if(o(B,J),J.fatal)F.abort();else F.dirty()},get path(){return B.path}};if($.addIssue=$.addIssue.bind($),D.type==="preprocess"){let J=D.transform(B.data,$);if(B.common.async)return Promise.resolve(J).then(async(X)=>{if(F.value==="aborted")return G1;let E=await this._def.schema._parseAsync({data:X,path:B.path,parent:B});if(E.status==="aborted")return G1;if(E.status==="dirty")return v7(E.value);if(F.value==="dirty")return v7(E.value);return E});else{if(F.value==="aborted")return G1;let X=this._def.schema._parseSync({data:J,path:B.path,parent:B});if(X.status==="aborted")return G1;if(X.status==="dirty")return v7(X.value);if(F.value==="dirty")return v7(X.value);return X}}if(D.type==="refinement"){let J=(X)=>{let E=D.refinement(X,$);if(B.common.async)return Promise.resolve(E);if(E instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return X};if(B.common.async===!1){let X=this._def.schema._parseSync({data:B.data,path:B.path,parent:B});if(X.status==="aborted")return G1;if(X.status==="dirty")F.dirty();return J(X.value),{status:F.value,value:X.value}}else return this._def.schema._parseAsync({data:B.data,path:B.path,parent:B}).then((X)=>{if(X.status==="aborted")return G1;if(X.status==="dirty")F.dirty();return J(X.value).then(()=>{return{status:F.value,value:X.value}})})}if(D.type==="transform")if(B.common.async===!1){let J=this._def.schema._parseSync({data:B.data,path:B.path,parent:B});if(!u9(J))return G1;let X=D.transform(J.value,$);if(X instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:F.value,value:X}}else return this._def.schema._parseAsync({data:B.data,path:B.path,parent:B}).then((J)=>{if(!u9(J))return G1;return Promise.resolve(D.transform(J.value,$)).then((X)=>({status:F.value,value:X}))});S1.assertNever(D)}}x3.create=(A,F,B)=>{return new x3({schema:A,typeName:W1.ZodEffects,effect:F,...P1(B)})};x3.createWithPreprocess=(A,F,B)=>{return new x3({schema:F,effect:{type:"preprocess",transform:A},typeName:W1.ZodEffects,...P1(B)})};class f3 extends k1{_parse(A){if(this._getType(A)===r.undefined)return d2(void 0);return this._def.innerType._parse(A)}unwrap(){return this._def.innerType}}f3.create=(A,F)=>{return new f3({innerType:A,typeName:W1.ZodOptional,...P1(F)})};class d4 extends k1{_parse(A){if(this._getType(A)===r.null)return d2(null);return this._def.innerType._parse(A)}unwrap(){return this._def.innerType}}d4.create=(A,F)=>{return new d4({innerType:A,typeName:W1.ZodNullable,...P1(F)})};class l5 extends k1{_parse(A){let{ctx:F}=this._processInputParams(A),B=F.data;if(F.parsedType===r.undefined)B=this._def.defaultValue();return this._def.innerType._parse({data:B,path:F.path,parent:F})}removeDefault(){return this._def.innerType}}l5.create=(A,F)=>{return new l5({innerType:A,typeName:W1.ZodDefault,defaultValue:typeof F.default==="function"?F.default:()=>F.default,...P1(F)})};class c5 extends k1{_parse(A){let{ctx:F}=this._processInputParams(A),B={...F,common:{...F.common,issues:[]}},D=this._def.innerType._parse({data:B.data,path:B.path,parent:{...B}});if(S5(D))return D.then(($)=>{return{status:"valid",value:$.status==="valid"?$.value:this._def.catchValue({get error(){return new m2(B.common.issues)},input:B.data})}});else return{status:"valid",value:D.status==="valid"?D.value:this._def.catchValue({get error(){return new m2(B.common.issues)},input:B.data})}}removeCatch(){return this._def.innerType}}c5.create=(A,F)=>{return new c5({innerType:A,typeName:W1.ZodCatch,catchValue:typeof F.catch==="function"?F.catch:()=>F.catch,...P1(F)})};class OB extends k1{_parse(A){if(this._getType(A)!==r.nan){let B=this._getOrReturnCtx(A);return o(B,{code:c.invalid_type,expected:r.nan,received:B.parsedType}),G1}return{status:"valid",value:A.data}}}OB.create=(A)=>{return new OB({typeName:W1.ZodNaN,...P1(A)})};var ew1=Symbol("zod_brand");class aX extends k1{_parse(A){let{ctx:F}=this._processInputParams(A),B=F.data;return this._def.type._parse({data:B,path:F.path,parent:F})}unwrap(){return this._def.type}}class uB extends k1{_parse(A){let{status:F,ctx:B}=this._processInputParams(A);if(B.common.async)return(async()=>{let $=await this._def.in._parseAsync({data:B.data,path:B.path,parent:B});if($.status==="aborted")return G1;if($.status==="dirty")return F.dirty(),v7($.value);else return this._def.out._parseAsync({data:$.value,path:B.path,parent:B})})();else{let D=this._def.in._parseSync({data:B.data,path:B.path,parent:B});if(D.status==="aborted")return G1;if(D.status==="dirty")return F.dirty(),{status:"dirty",value:D.value};else return this._def.out._parseSync({data:D.value,path:B.path,parent:B})}}static create(A,F){return new uB({in:A,out:F,typeName:W1.ZodPipeline})}}class p5 extends k1{_parse(A){let F=this._def.innerType._parse(A),B=(D)=>{if(u9(D))D.value=Object.freeze(D.value);return D};return S5(F)?F.then((D)=>B(D)):B(F)}unwrap(){return this._def.innerType}}p5.create=(A,F)=>{return new p5({innerType:A,typeName:W1.ZodReadonly,...P1(F)})};function op(A,F){let B=typeof A==="function"?A(F):typeof A==="string"?{message:A}:A;return typeof B==="string"?{message:B}:B}function Di(A,F={},B){if(A)return d7.create().superRefine((D,$)=>{let J=A(D);if(J instanceof Promise)return J.then((X)=>{if(!X){let E=op(F,D),Y=E.fatal??B??!0;$.addIssue({code:"custom",...E,fatal:Y})}});if(!J){let X=op(F,D),E=X.fatal??B??!0;$.addIssue({code:"custom",...X,fatal:E})}return});return d7.create()}var AL1={object:T0.lazycreate},W1;(function(A){A.ZodString="ZodString",A.ZodNumber="ZodNumber",A.ZodNaN="ZodNaN",A.ZodBigInt="ZodBigInt",A.ZodBoolean="ZodBoolean",A.ZodDate="ZodDate",A.ZodSymbol="ZodSymbol",A.ZodUndefined="ZodUndefined",A.ZodNull="ZodNull",A.ZodAny="ZodAny",A.ZodUnknown="ZodUnknown",A.ZodNever="ZodNever",A.ZodVoid="ZodVoid",A.ZodArray="ZodArray",A.ZodObject="ZodObject",A.ZodUnion="ZodUnion",A.ZodDiscriminatedUnion="ZodDiscriminatedUnion",A.ZodIntersection="ZodIntersection",A.ZodTuple="ZodTuple",A.ZodRecord="ZodRecord",A.ZodMap="ZodMap",A.ZodSet="ZodSet",A.ZodFunction="ZodFunction",A.ZodLazy="ZodLazy",A.ZodLiteral="ZodLiteral",A.ZodEnum="ZodEnum",A.ZodEffects="ZodEffects",A.ZodNativeEnum="ZodNativeEnum",A.ZodOptional="ZodOptional",A.ZodNullable="ZodNullable",A.ZodDefault="ZodDefault",A.ZodCatch="ZodCatch",A.ZodPromise="ZodPromise",A.ZodBranded="ZodBranded",A.ZodPipeline="ZodPipeline",A.ZodReadonly="ZodReadonly"})(W1||(W1={}));var FL1=(A,F={message:`Input not instance of ${A.name}`})=>Di((B)=>B instanceof A,F),$i=u3.create,Ji=f9.create,BL1=OB.create,DL1=_9.create,Xi=x5.create,$L1=m7.create,JL1=MB.create,XL1=g5.create,EL1=b5.create,YL1=d7.create,GL1=S9.create,HL1=e3.create,WL1=jB.create,qL1=S3.create,CL1=T0.create,QL1=T0.strictCreate,KL1=y5.create,zL1=sX.create,UL1=h5.create,ZL1=A4.create,VL1=TB.create,wL1=kB.create,LL1=l7.create,RL1=_5.create,NL1=v5.create,PL1=m5.create,IL1=x9.create,ML1=d5.create,jL1=c7.create,TL1=x3.create,kL1=f3.create,OL1=d4.create,uL1=x3.createWithPreprocess,SL1=uB.create,fL1=()=>$i().optional(),_L1=()=>Ji().optional(),xL1=()=>Xi().optional(),gL1={string:(A)=>u3.create({...A,coerce:!0}),number:(A)=>f9.create({...A,coerce:!0}),boolean:(A)=>x5.create({...A,coerce:!0}),bigint:(A)=>_9.create({...A,coerce:!0}),date:(A)=>m7.create({...A,coerce:!0})};var bL1=G1;var b0=async(A,F)=>{try{let B=await A.req.json();return{success:!0,data:F.parse(B)}}catch(B){if(console.error("ValidatePayload error:",B),B instanceof SyntaxError)return console.error("JSON parsing failed:",B.message),{success:!1,error:`JSON Parse error: ${B.message}`};if(B instanceof m2)return console.error("Zod validation failed:",B.message),{success:!1,error:JSON.parse(B.message).map((D)=>D.message).join(", ")};return console.error("Unknown validation error:",B),{success:!1,error:B.message||"Unknown validation error"}}},B0={AuthPayload:{login:d.object({username:d.string({required_error:"Missing username"}).min(1),password:d.string({required_error:"Missing password"}).min(1)}),create:d.object({username:d.string({required_error:"Missing username"}).min(1),password:d.string({required_error:"Missing password"}).min(1),firstname:d.string({required_error:"Missing firstname"}).min(1),lastname:d.string({required_error:"Missing lastname"}).min(1)}),changePassword:d.object({current_password:d.string({required_error:"Missing current password"}).min(1),new_password:d.string({required_error:"Missing new password"}).min(6,{message:"New password must be at least 6 characters"})}),changeRole:d.object({role:d.enum(["admin","maintainer"],{errorMap:()=>({message:"Role must be admin or maintainer"})})})},ScholarPayload:{create:d.object({name:d.string({required_error:"Missing scholar name"}).min(1,{message:"Scholar name is required"}),description:d.string({required_error:"Missing scholar description"}).min(1,{message:"Scholar description is required"})}),update:d.object({name:d.string().min(1,{message:"Scholar name cannot be empty"}).optional(),description:d.string().min(1,{message:"Scholar description cannot be empty"}).optional(),status:d.enum(["active","inactive"],{errorMap:()=>({message:"Status must be active or inactive"})}).optional()})},ScholarFieldPayload:{validationRule:d.object({min_length:d.number().optional(),max_length:d.number().optional(),required_files:d.number().optional(),max_file_size:d.number().optional(),allowed_extensions:d.array(d.string()).optional(),min_date:d.date().optional(),max_date:d.date().optional()}).optional(),tableConfig:d.object({rows:d.number({required_error:"Number of rows is required"}).min(1,{message:"Must have at least 1 row"}),columns:d.number({required_error:"Number of columns is required"}).min(1,{message:"Must have at least 1 column"}),row_labels:d.array(d.string()).optional(),column_labels:d.array(d.string()).optional()}).optional(),question:d.object({question_id:d.string({required_error:"Question ID is required"}).min(1),question_type:d.enum(["short_answer","long_answer","radio","checkbox","dropdown","table","date","time","file_upload"],{errorMap:()=>({message:"Invalid question type"})}),question_label:d.string({required_error:"Question label is required"}).min(1),required:d.boolean({invalid_type_error:"Required field must be boolean"}).default(!1).optional(),options:d.array(d.string()).optional(),allow_other:d.boolean({invalid_type_error:"Allow other field must be boolean"}).default(!1).optional(),validation:d.lazy(()=>B0.ScholarFieldPayload.validationRule),placeholder:d.string().optional(),help_text:d.string().optional(),table_config:d.lazy(()=>B0.ScholarFieldPayload.tableConfig),file_types:d.array(d.string()).optional(),allow_multiple:d.boolean({invalid_type_error:"Allow multiple files field must be boolean"}).default(!1).optional(),order:d.number({required_error:"Question order is required"}).min(0)}),createField:d.object({scholar_id:d.string({required_error:"Scholar ID is required"}).min(1),field_name:d.string({required_error:"Field name is required"}).min(1),field_label:d.string({required_error:"Field label is required"}).min(1),field_description:d.string().optional(),order:d.number({required_error:"Field order is required"}).min(0),questions:d.array(d.lazy(()=>B0.ScholarFieldPayload.question))}),updateField:d.object({field_name:d.string().min(1,{message:"Field name cannot be empty"}).optional(),field_label:d.string().min(1,{message:"Field label cannot be empty"}).optional(),field_description:d.string().optional(),order:d.number().min(0).optional(),questions:d.array(d.lazy(()=>B0.ScholarFieldPayload.question)).optional()}),createQuestion:d.lazy(()=>B0.ScholarFieldPayload.question),updateQuestion:d.lazy(()=>B0.ScholarFieldPayload.question.partial()),reorderFields:d.object({scholar_id:d.string({required_error:"Scholar ID is required"}).min(1),field_orders:d.array(d.object({id:d.string({required_error:"Field ID is required"}).min(1),order:d.number({required_error:"Order is required"}).min(0)}))}),reorderQuestions:d.object({field_id:d.string({required_error:"Field ID is required"}).min(1),question_orders:d.array(d.object({question_id:d.string({required_error:"Question ID is required"}).min(1),order:d.number({required_error:"Order is required"}).min(0)}))})},StudentPayload:{create:d.object({scholar_id:d.string({required_error:"Scholar ID is required"}).min(1).regex(/^[0-9a-fA-F]{24}$/,{message:"Invalid Scholar ID format"}),form_data:d.record(d.any()).optional().default({})}),update:d.object({form_data:d.record(d.any()).optional(),status:d.enum(["incomplete","completed"],{errorMap:()=>({message:"Invalid status"})}).optional()}),submitForm:d.object({form_data:d.record(d.any())}),generateTempPermission:d.object({student_id:d.string({required_error:"Student ID is required"}).min(1).regex(/^[0-9a-fA-F]{24}$/,{message:"Invalid Student ID format"}),expires_in:d.number().positive().optional().default(3600)}),verifyTempPermission:d.object({token:d.string({required_error:"Token is required"}).min(1),student_id:d.string({required_error:"Student ID is required"}).min(1).regex(/^[0-9a-fA-F]{24}$/,{message:"Invalid Student ID format"})})}};var rX=(A,F,B)=>{return{success:A,msg:F,data:B||typeof B==="boolean"?B:null}},R1=(A,F)=>[rX(!0,A,F),200],l=(A,F)=>{if(F)return[rX(!1,A),F];return[rX(!1,A),400]},K1=(A)=>[rX(!1,`${A}`),500];var l4={createAdmin:async(A)=>{try{let F=await b0(A,B0.AuthPayload.create);if(!F.success)return A.json(...l(F.error));if(await b6.getByUsername(F.data.username))return A.json(...l("\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E19\u0E35\u0E49\u0E21\u0E35\u0E2D\u0E22\u0E39\u0E48\u0E41\u0E25\u0E49\u0E27"));let B=Bun.password.hashSync(F.data.password),D=await b6.createAdmin({...F.data,password:B}),{password:$,...J}=D.toObject();return A.json(...R1("\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E1C\u0E39\u0E49\u0E14\u0E39\u0E41\u0E25\u0E23\u0E30\u0E1A\u0E1A\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!",J))}catch(F){return A.json(...K1(F))}},createMaintainer:async(A)=>{try{let F=await b0(A,B0.AuthPayload.create);if(!F.success)return A.json(...l(F.error));if(await b6.getByUsername(F.data.username))return A.json(...l("\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E19\u0E35\u0E49\u0E21\u0E35\u0E2D\u0E22\u0E39\u0E48\u0E41\u0E25\u0E49\u0E27"));let B=Bun.password.hashSync(F.data.password),D=await b6.createMaintainer({...F.data,password:B}),{password:$,...J}=D.toObject();return A.json(...R1("\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E1C\u0E39\u0E49\u0E14\u0E39\u0E41\u0E25\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!",J))}catch(F){return A.json(...K1(F))}},login:async(A)=>{try{let F=await b0(A,B0.AuthPayload.login);if(!F.success)return A.json(...l(F.error));let B=await b6.getByUsername(F.data.username);if(B===null)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19"));if(!Bun.password.verifySync(F.data.password,B.password))return A.json(...l("\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07",410));let D={id:B.id},$=Bun.env.JWT_SECRET;if(!$)throw new Error("JWT_SECRET is not defined");let J=await PB(D,$);return A.json(...R1("\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",{role:B.role,token:J,name:B.firstname,username:B.username}))}catch(F){return A.json(...K1(F))}},verify:async(A)=>{try{let F=A.get("user");if(!F)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19"));return A.json(...R1("\u0E15\u0E23\u0E27\u0E08\u0E2A\u0E2D\u0E1A\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",{id:F.id,name:F.firstname,role:F.role,is_first_time:F.is_first_time}))}catch(F){return A.json(...K1(F))}},changePassword:async(A)=>{try{let F=A.get("user");if(!F)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19"));let B=await b0(A,B0.AuthPayload.changePassword);if(!B.success)return A.json(...l(B.error));let D=await b6.getById(F.id);if(!D)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19"));if(!Bun.password.verifySync(B.data.current_password,D.password))return A.json(...l("\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E1B\u0E31\u0E08\u0E08\u0E38\u0E1A\u0E31\u0E19\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07",410));let $=Bun.password.hashSync(B.data.new_password);return await b6.updatePassword(F.id,$),A.json(...R1("\u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!"))}catch(F){return A.json(...K1(F))}},getAllUsers:async(A)=>{try{let F=await b6.getAll();return A.json(...R1("\u0E14\u0E36\u0E07\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",F))}catch(F){return A.json(...K1(F))}},deleteUser:async(A)=>{try{let F=A.req.param("id");if(!F)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A ID \u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19"));let B=A.get("user");if(!B)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19"));if(B.id===F)return A.json(...l("\u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E25\u0E1A\u0E1A\u0E31\u0E0D\u0E0A\u0E35\u0E02\u0E2D\u0E07\u0E15\u0E19\u0E40\u0E2D\u0E07\u0E44\u0E14\u0E49"));let D=await b6.delete(F);if(!D)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19",404));return A.json(...R1("\u0E25\u0E1A\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!",{id:D.id,username:D.username,firstname:D.firstname,lastname:D.lastname}))}catch(F){return A.json(...K1(F))}},changeUserRole:async(A)=>{try{let F=A.req.param("id");if(!F)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A ID \u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19"));let B=A.get("user");if(!B)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19"));if(B.id===F)return A.json(...l("\u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E1A\u0E17\u0E1A\u0E32\u0E17\u0E02\u0E2D\u0E07\u0E15\u0E19\u0E40\u0E2D\u0E07\u0E44\u0E14\u0E49"));let D=await b0(A,B0.AuthPayload.changeRole);if(!D.success)return A.json(...l(D.error));let $=await b6.updateRole(F,D.data.role);if(!$)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19",404));return A.json(...R1("\u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E1A\u0E17\u0E1A\u0E32\u0E17\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!",$))}catch(F){return A.json(...K1(F))}}};var Z6=async(A,F)=>{try{let B=A.req.header("Authorization");if(!B)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A Authorization header"));if(!B.startsWith("Bearer "))return A.json(...l("\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A Authorization header \u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"));let D=B.substring(7),$=Bun.env.JWT_SECRET;if(!$)throw new Error("JWT_SECRET is not defined");let J=await NB(D,$);if(!J.id)return A.json(...l("Token \u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"));let X=await b6.getById(J.id);if(!X)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19"));A.set("user",{id:X.id,username:X.username,firstname:X.firstname,lastname:X.lastname,role:X.role,is_first_time:X.is_first_time}),await F()}catch(B){return A.json(...K1(B))}},tX=async(A,F)=>{let B=A.get("user");if(!B)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19"));if(B.role!=="admin")return A.json(...l("\u0E44\u0E21\u0E48\u0E21\u0E35\u0E2A\u0E34\u0E17\u0E18\u0E34\u0E4C\u0E40\u0E02\u0E49\u0E32\u0E16\u0E36\u0E07\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E19\u0E35\u0E49"));await F()};var F4=new L6;F4.post("/login",l4.login);F4.post("/admin",Z6,l4.createAdmin);F4.post("/maintainer",Z6,l4.createMaintainer);F4.get("/verify",Z6,l4.verify);F4.put("/change-password",Z6,l4.changePassword);F4.get("/users",Z6,tX,l4.getAllUsers);F4.delete("/users/:id",Z6,tX,l4.deleteUser);F4.patch("/users/:id/role",Z6,tX,l4.changeUserRole);var oX=c4(T9(),1),yL1=new oX.Schema({name:{type:String,required:!0},description:{type:String,required:!0},status:{type:String,enum:["active","inactive"],required:!0,default:"active"},created_at:{type:Date,required:!0,default:new Date},updated_at:{type:Date,required:!0,default:new Date}},{strict:!0}),p7=oX.model("Scholar",yL1),B4={create:async(A)=>{return await new p7(A).save()},getAll:async()=>{return await p7.find()},getById:async(A)=>{return await p7.findById(A)},getActive:async()=>{return await p7.find({status:"active"})},update:async(A,F)=>{return await p7.findByIdAndUpdate(A,{...F,updated_at:new Date},{new:!0})},delete:async(A)=>{return await p7.findByIdAndDelete(A)},setStatus:async(A,F)=>{return await p7.findByIdAndUpdate(A,{status:F,updated_at:new Date},{new:!0})}};var g9=c4(T9(),1),hL1=new g9.Schema({min_length:{type:Number},max_length:{type:Number},required_files:{type:Number},max_file_size:{type:Number},allowed_extensions:[{type:String}],min_date:{type:Date},max_date:{type:Date}},{_id:!1}),vL1=new g9.Schema({rows:{type:Number,required:!0},columns:{type:Number,required:!0},row_labels:[{type:String}],column_labels:[{type:String}]},{_id:!1}),mL1=new g9.Schema({question_id:{type:String,required:!0},question_type:{type:String,enum:["short_answer","long_answer","radio","checkbox","dropdown","table","date","time","file_upload"],required:!0},question_label:{type:String,required:!0},required:{type:Boolean,required:!0,default:!1},options:[{type:String}],allow_other:{type:Boolean,default:!1},validation:hL1,placeholder:{type:String},help_text:{type:String},table_config:vL1,file_types:[{type:String}],allow_multiple:{type:Boolean,default:!1},order:{type:Number,required:!0}},{_id:!1}),eX=new g9.Schema({scholar_id:{type:g9.Schema.Types.ObjectId,ref:"Scholar",required:!0},field_name:{type:String,required:!0},field_label:{type:String,required:!0},field_description:{type:String},order:{type:Number,required:!0},questions:[mL1],created_at:{type:Date,required:!0,default:Date.now},updated_at:{type:Date,required:!0,default:Date.now}},{strict:!0});eX.index({scholar_id:1,order:1});var H3=g9.model("ScholarField",eX);eX.pre("save",function(A){this.updated_at=new Date,A()});eX.pre("findOneAndUpdate",function(A){this.set({updated_at:new Date}),A()});var V2={create:async(A)=>{return await new H3(A).save()},getByScholarId:async(A)=>{return await H3.find({scholar_id:A}).sort({order:1})},getById:async(A)=>{return await H3.findById(A)},update:async(A,F)=>{return await H3.findByIdAndUpdate(A,F,{new:!0})},delete:async(A)=>{return await H3.findByIdAndDelete(A)},deleteByScholarId:async(A)=>{return await H3.deleteMany({scholar_id:A})},reorderFields:async(A,F)=>{let B=F.map(({id:D,order:$})=>({updateOne:{filter:{_id:D,scholar_id:A},update:{order:$,updated_at:new Date}}}));return await H3.bulkWrite(B)},getMaxOrder:async(A)=>{return(await H3.findOne({scholar_id:A}).sort({order:-1}).select("order"))?.order??0},addQuestion:async(A,F)=>{return await H3.findByIdAndUpdate(A,{$push:{questions:F},updated_at:new Date},{new:!0})},updateQuestion:async(A,F,B)=>{return await H3.findOneAndUpdate({_id:A,"questions.question_id":F},{$set:{...Object.keys(B).reduce((D,$)=>{return D[`questions.$.${$}`]=B[$],D},{}),updated_at:new Date}},{new:!0})},removeQuestion:async(A,F)=>{return await H3.findByIdAndUpdate(A,{$pull:{questions:{question_id:F}},updated_at:new Date},{new:!0})},reorderQuestions:async(A,F)=>{let B=await H3.findById(A);if(!B)return null;return B.questions.forEach((D)=>{let $=F.find((J)=>J.question_id===D.question_id)?.order;if($!==void 0)D.order=$}),B.questions.sort((D,$)=>D.order-$.order),B.updated_at=new Date,await B.save()}};var i5=c4(T9(),1),dL1=new i5.Schema({scholar_id:{type:i5.Schema.Types.ObjectId,ref:"Scholar",required:!0},form_data:{type:i5.Schema.Types.Mixed,required:!0,default:{}},fullname:{type:String},status:{type:String,enum:["incomplete","completed"],required:!0,default:"incomplete"},submitted_at:{type:Date},created_at:{type:Date,required:!0,default:Date.now},updated_at:{type:Date,required:!0,default:Date.now}},{strict:!0}),V6=i5.model("Student",dL1),p1={create:async(A)=>{return await new V6(A).save()},getAll:async()=>{return await V6.find().populate("scholar_id")},getById:async(A)=>{return await V6.findById(A).populate("scholar_id")},getByScholar:async(A)=>{return await V6.find({scholar_id:A}).populate("scholar_id")},getByStatus:async(A)=>{return await V6.find({status:A}).populate("scholar_id")},update:async(A,F)=>{return await V6.findByIdAndUpdate(A,{...F,updated_at:new Date},{new:!0,runValidators:!0}).populate("scholar_id")},delete:async(A)=>{return await V6.findByIdAndDelete(A)},setStatus:async(A,F)=>{let B={status:F,updated_at:new Date};if(F==="completed")B.submitted_at=new Date;return await V6.findByIdAndUpdate(A,B,{new:!0,runValidators:!0}).populate("scholar_id")},submitForm:async(A,F,B)=>{let D={form_data:F,status:"completed",submitted_at:new Date,updated_at:new Date};if(B)D.fullname=B;return await V6.findByIdAndUpdate(A,D,{new:!0,runValidators:!0}).populate("scholar_id")},countByScholar:async(A)=>{return await V6.countDocuments({scholar_id:A})},deleteByScholar:async(A)=>{return await V6.deleteMany({scholar_id:A})},checkFormCompletion:async(A,F)=>{let B=await V6.findById(A);if(!B)return!1;let D=B.form_data||{};for(let $ of F){let J=D[$._id]||{};for(let X of $.questions){let E=J[X.question_id];if(E===null||E===void 0||E==="")return!1;if(Array.isArray(E)&&E.length===0)return!1;if(E==="other"&&X.allow_other){let Y=J[`${X.question_id}_other`];if(!Y||Y.trim()==="")return!1}if(Array.isArray(E)&&E.includes("other")&&X.allow_other){let Y=J[`${X.question_id}_other`];if(!Y||Y.trim()==="")return!1}if(X.question_type==="table"&&X.table_config){let Y=E||{},{rows:G,columns:H}=X.table_config;for(let W=1;W<G;W++)for(let q=1;q<H;q++){let C=`${W}_${q}`,Q=Y[C];if(!Q||Q.trim()==="")return!1}}}}return!0},updateAllStudentStatusForScholar:async(A,F)=>{try{let B=await V6.find({scholar_id:A}),D=[];for(let $ of B){let X=await p1.checkFormCompletion($._id.toString(),F)?"completed":"incomplete";if($.status!==X){let E={status:X,updated_at:new Date};if(X==="completed"&&!$.submitted_at)E.submitted_at=new Date;D.push({updateOne:{filter:{_id:$._id},update:E}})}}if(D.length>0)await V6.bulkWrite(D),console.log(`Updated ${D.length} students for scholar ${A}`)}catch(B){throw console.error("Error updating student statuses for scholar:",A,B),B}}};var n5=Bun.env.STORAGE_URL||"",lL1=(A)=>{return A instanceof File},y0={uploadFile:async(A)=>{try{if(!n5)throw new Error("STORAGE_URL not configured");let F=new FormData;return F.append("file",A),await(await fetch(`${n5}/storage/upload`,{method:"POST",body:F})).json()}catch(F){return{success:!1,msg:F instanceof Error?F.message:"Failed to upload file"}}},deleteFile:async(A)=>{try{if(!n5)throw new Error("STORAGE_URL not configured");return await(await fetch(`${n5}/storage/file/${A}`,{method:"DELETE"})).json()}catch(F){return{success:!1,msg:F instanceof Error?F.message:"Failed to delete file"}}},getFileUrl:(A)=>{if(!n5)return"";return`${n5}/storage/file/${A}`},extractFilenameFromUrl:(A)=>{let F=A.match(/\/storage\/file\/(.+)$/);return F?F[1]:null},processFormDataFiles:async(A)=>{let F={},B=[];for(let[D,$]of A.entries())if(lL1($))B.push((async()=>{let J=await y0.uploadFile($);if(J.success&&J.data)y0.setNestedValue(F,D,J.data.url);else throw new Error(`Failed to upload file ${D}: ${J.msg}`)})());else y0.setNestedValue(F,D,$);return await Promise.all(B),F},setNestedValue:(A,F,B)=>{let D=F.split("."),$=A;for(let J=0;J<D.length-1;J++){let X=D[J];if(!(X in $)||typeof $[X]!=="object"||$[X]===null)$[X]={};$=$[X]}$[D[D.length-1]]=B},parseFormDataToObject:(A)=>{let F={};for(let[B,D]of A.entries())if(typeof D==="string")try{let $=JSON.parse(D);y0.setNestedValue(F,B,$)}catch{y0.setNestedValue(F,B,D)}return F},cleanupOldFiles:async(A,F)=>{let B=y0.extractFileUrls(A),D=y0.extractFileUrls(F),$=B.filter((J)=>!D.includes(J));for(let J of $){let X=y0.extractFilenameFromUrl(J);if(X)await y0.deleteFile(X)}},extractFileUrls:(A)=>{let F=[];for(let[B,D]of Object.entries(A))if(typeof D==="object"&&D!==null){for(let[$,J]of Object.entries(D))if(typeof J==="string"&&J.includes("/storage/file/"))F.push(J)}return F}};var b9={create:async(A)=>{try{let F=await b0(A,B0.ScholarPayload.create);if(!F.success)return A.json(...l(F.error));let B=await B4.create(F.data);return A.json(...R1("\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E17\u0E38\u0E19\u0E01\u0E32\u0E23\u0E28\u0E36\u0E01\u0E29\u0E32\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!",B))}catch(F){return A.json(...K1(F))}},getAll:async(A)=>{try{let F=await B4.getAll();return A.json(...R1("\u0E14\u0E36\u0E07\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E38\u0E19\u0E01\u0E32\u0E23\u0E28\u0E36\u0E01\u0E29\u0E32\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",F))}catch(F){return A.json(...K1(F))}},getActive:async(A)=>{try{let F=await B4.getActive();return A.json(...R1("\u0E14\u0E36\u0E07\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E38\u0E19\u0E01\u0E32\u0E23\u0E28\u0E36\u0E01\u0E29\u0E32\u0E17\u0E35\u0E48\u0E40\u0E1B\u0E34\u0E14\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",F))}catch(F){return A.json(...K1(F))}},getById:async(A)=>{try{let F=A.req.param("id");if(!F)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A ID \u0E17\u0E38\u0E19\u0E01\u0E32\u0E23\u0E28\u0E36\u0E01\u0E29\u0E32"));let B=await B4.getById(F);if(!B)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E17\u0E38\u0E19\u0E01\u0E32\u0E23\u0E28\u0E36\u0E01\u0E29\u0E32",404));return A.json(...R1("\u0E14\u0E36\u0E07\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E38\u0E19\u0E01\u0E32\u0E23\u0E28\u0E36\u0E01\u0E29\u0E32\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",B))}catch(F){return A.json(...K1(F))}},update:async(A)=>{try{let F=A.req.param("id");if(!F)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A ID \u0E17\u0E38\u0E19\u0E01\u0E32\u0E23\u0E28\u0E36\u0E01\u0E29\u0E32"));let B=await b0(A,B0.ScholarPayload.update);if(!B.success)return A.json(...l(B.error));let D=await B4.update(F,B.data);if(!D)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E17\u0E38\u0E19\u0E01\u0E32\u0E23\u0E28\u0E36\u0E01\u0E29\u0E32",404));return A.json(...R1("\u0E2D\u0E31\u0E1B\u0E40\u0E14\u0E15\u0E17\u0E38\u0E19\u0E01\u0E32\u0E23\u0E28\u0E36\u0E01\u0E29\u0E32\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!",D))}catch(F){return A.json(...K1(F))}},delete:async(A)=>{try{let F=A.req.param("id");if(!F)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A ID \u0E17\u0E38\u0E19\u0E01\u0E32\u0E23\u0E28\u0E36\u0E01\u0E29\u0E32"));if(!await B4.getById(F))return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E17\u0E38\u0E19\u0E01\u0E32\u0E23\u0E28\u0E36\u0E01\u0E29\u0E32",404));let D=await p1.getByScholar(F);for(let J of D)if(J.form_data){let X=y0.extractFileUrls(J.form_data);for(let E of X){let Y=y0.extractFilenameFromUrl(E);if(Y)try{await y0.deleteFile(Y)}catch(G){console.warn(`Failed to delete file ${Y}:`,G)}}}await p1.deleteByScholar(F),await V2.deleteByScholarId(F);let $=await B4.delete(F);return A.json(...R1("\u0E25\u0E1A\u0E17\u0E38\u0E19\u0E01\u0E32\u0E23\u0E28\u0E36\u0E01\u0E29\u0E32\u0E41\u0E25\u0E30\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E40\u0E01\u0E35\u0E48\u0E22\u0E27\u0E02\u0E49\u0E2D\u0E07\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!",$))}catch(F){return A.json(...K1(F))}},setStatus:async(A)=>{try{let F=A.req.param("id"),B=A.req.param("status");if(!F)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A ID \u0E17\u0E38\u0E19\u0E01\u0E32\u0E23\u0E28\u0E36\u0E01\u0E29\u0E32"));if(!["active","inactive"].includes(B))return A.json(...l("\u0E2A\u0E16\u0E32\u0E19\u0E30\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"));let D=await B4.setStatus(F,B);if(!D)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E17\u0E38\u0E19\u0E01\u0E32\u0E23\u0E28\u0E36\u0E01\u0E29\u0E32",404));let $=B==="active"?"\u0E40\u0E1B\u0E34\u0E14\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19":"\u0E1B\u0E34\u0E14\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19";return A.json(...R1(`${$}\u0E17\u0E38\u0E19\u0E01\u0E32\u0E23\u0E28\u0E36\u0E01\u0E29\u0E32\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!`,D))}catch(F){return A.json(...K1(F))}}};var D4=new L6;D4.use("*",Z6);D4.get("/",b9.getAll);D4.get("/active",b9.getActive);D4.get("/:id",b9.getById);D4.post("/",b9.create);D4.put("/:id",b9.update);D4.delete("/:id",b9.delete);D4.patch("/:id/status/:status",b9.setStatus);var Ei=c4(T9(),1),s5=async(A)=>{try{let F=await V2.getByScholarId(A);await p1.updateAllStudentStatusForScholar(A,F)}catch(F){console.error("Error updating student statuses after field change:",F)}},g3={create:async(A)=>{try{let F=await b0(A,B0.ScholarFieldPayload.createField);if(!F.success)return A.json(...l(F.error));let B=await V2.create({...F.data,scholar_id:new Ei.Types.ObjectId(F.data.scholar_id)});return s5(F.data.scholar_id),A.json(...R1("\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E1F\u0E34\u0E25\u0E14\u0E4C\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!",B))}catch(F){return A.json(...K1(F))}},getByScholarId:async(A)=>{try{let F=A.req.param("scholarId");if(!F)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A ID \u0E17\u0E38\u0E19\u0E01\u0E32\u0E23\u0E28\u0E36\u0E01\u0E29\u0E32"));let B=await V2.getByScholarId(F);return A.json(...R1("\u0E14\u0E36\u0E07\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E1F\u0E34\u0E25\u0E14\u0E4C\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",B))}catch(F){return A.json(...K1(F))}},getById:async(A)=>{try{let F=A.req.param("id");if(!F)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A ID \u0E1F\u0E34\u0E25\u0E14\u0E4C"));let B=await V2.getById(F);if(!B)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E1F\u0E34\u0E25\u0E14\u0E4C",404));return A.json(...R1("\u0E14\u0E36\u0E07\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E1F\u0E34\u0E25\u0E14\u0E4C\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",B))}catch(F){return A.json(...K1(F))}},update:async(A)=>{try{let F=A.req.param("id");if(!F)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A ID \u0E1F\u0E34\u0E25\u0E14\u0E4C"));let B=await b0(A,B0.ScholarFieldPayload.updateField);if(!B.success)return A.json(...l(B.error));let D=await V2.update(F,B.data);if(!D)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E1F\u0E34\u0E25\u0E14\u0E4C",404));return s5(D.scholar_id.toString()),A.json(...R1("\u0E2D\u0E31\u0E1B\u0E40\u0E14\u0E15\u0E1F\u0E34\u0E25\u0E14\u0E4C\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!",D))}catch(F){return A.json(...K1(F))}},delete:async(A)=>{try{let F=A.req.param("id");if(!F)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A ID \u0E1F\u0E34\u0E25\u0E14\u0E4C"));let B=await V2.delete(F);if(!B)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E1F\u0E34\u0E25\u0E14\u0E4C",404));return s5(B.scholar_id.toString()),A.json(...R1("\u0E25\u0E1A\u0E1F\u0E34\u0E25\u0E14\u0E4C\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!",B))}catch(F){return A.json(...K1(F))}},reorderFields:async(A)=>{try{let F=await b0(A,B0.ScholarFieldPayload.reorderFields);if(!F.success)return A.json(...l(F.error));let B=await V2.reorderFields(F.data.scholar_id,F.data.field_orders);return A.json(...R1("\u0E40\u0E23\u0E35\u0E22\u0E07\u0E25\u0E33\u0E14\u0E31\u0E1A\u0E1F\u0E34\u0E25\u0E14\u0E4C\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!",B))}catch(F){return A.json(...K1(F))}},addQuestion:async(A)=>{try{let F=A.req.param("fieldId");if(!F)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A ID \u0E1F\u0E34\u0E25\u0E14\u0E4C"));let B=await b0(A,B0.ScholarFieldPayload.createQuestion);if(!B.success)return A.json(...l(B.error));let D=await V2.addQuestion(F,B.data);if(!D)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E1F\u0E34\u0E25\u0E14\u0E4C",404));return s5(D.scholar_id.toString()),A.json(...R1("\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E04\u0E33\u0E16\u0E32\u0E21\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!",D))}catch(F){return A.json(...K1(F))}},updateQuestion:async(A)=>{try{let F=A.req.param("fieldId"),B=A.req.param("questionId");if(!F)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A ID \u0E1F\u0E34\u0E25\u0E14\u0E4C"));if(!B)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A ID \u0E04\u0E33\u0E16\u0E32\u0E21"));let D=await b0(A,B0.ScholarFieldPayload.updateQuestion);if(!D.success)return A.json(...l(D.error));let $=await V2.updateQuestion(F,B,D.data);if(!$)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E1F\u0E34\u0E25\u0E14\u0E4C\u0E2B\u0E23\u0E37\u0E2D\u0E04\u0E33\u0E16\u0E32\u0E21",404));return s5($.scholar_id.toString()),A.json(...R1("\u0E2D\u0E31\u0E1B\u0E40\u0E14\u0E15\u0E04\u0E33\u0E16\u0E32\u0E21\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!",$))}catch(F){return A.json(...K1(F))}},removeQuestion:async(A)=>{try{let F=A.req.param("fieldId"),B=A.req.param("questionId");if(!F)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A ID \u0E1F\u0E34\u0E25\u0E14\u0E4C"));if(!B)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A ID \u0E04\u0E33\u0E16\u0E32\u0E21"));let D=await V2.removeQuestion(F,B);if(!D)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E1F\u0E34\u0E25\u0E14\u0E4C",404));return s5(D.scholar_id.toString()),A.json(...R1("\u0E25\u0E1A\u0E04\u0E33\u0E16\u0E32\u0E21\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!",D))}catch(F){return A.json(...K1(F))}},reorderQuestions:async(A)=>{try{let F=await b0(A,B0.ScholarFieldPayload.reorderQuestions);if(!F.success)return A.json(...l(F.error));let B=await V2.reorderQuestions(F.data.field_id,F.data.question_orders);if(!B)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E1F\u0E34\u0E25\u0E14\u0E4C",404));return A.json(...R1("\u0E40\u0E23\u0E35\u0E22\u0E07\u0E25\u0E33\u0E14\u0E31\u0E1A\u0E04\u0E33\u0E16\u0E32\u0E21\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!",B))}catch(F){return A.json(...K1(F))}}};var y6=new L6;y6.use("*",Z6);y6.get("/scholar/:scholarId",g3.getByScholarId);y6.get("/:id",g3.getById);y6.post("/",g3.create);y6.put("/:id",g3.update);y6.delete("/:id",g3.delete);y6.post("/reorder",g3.reorderFields);y6.post("/:fieldId/question",g3.addQuestion);y6.put("/:fieldId/question/:questionId",g3.updateQuestion);y6.delete("/:fieldId/question/:questionId",g3.removeQuestion);y6.post("/question/reorder",g3.reorderQuestions);var AE=async(A)=>{let F=A.req.header("content-type")||"";if(console.log("parseFormDataPayload - Content-Type:",F),F.includes("multipart/form-data")){console.log("Parsing multipart/form-data...");let B=await A.req.formData(),D={};console.log("FormData entries:");for(let[$,J]of B.entries())if(console.log(`  ${$}:`,J instanceof File?`File(${J.name}, ${J.size} bytes)`:J),!(J instanceof File))try{D[$]=JSON.parse(J)}catch{D[$]=J}return console.log("Parsed JSON data:",D),{formData:B,jsonData:D}}else{console.log("Parsing JSON...");let B=await A.req.json();return{formData:new FormData,jsonData:B}}};var $U=c4(T9(),1);var i7=(A)=>{return $U.Types.ObjectId.isValid(A)},DU=(A)=>{let F="",B="",D=!1,$=!1;for(let[J,X]of Object.entries(A)){if(D&&$)break;for(let[E,Y]of Object.entries(X)){if(D&&$)break;if(E.toLowerCase().includes("name")&&!E.toLowerCase().includes("surname")&&!D)F=String(Y||""),D=!0;if(E.toLowerCase().includes("surname")&&!$)B=String(Y||""),$=!0}}return`${F} ${B}`.trim()},h6={create:async(A)=>{try{let{formData:F,jsonData:B}=await AE(A),D=await b0({req:{json:()=>B}},B0.StudentPayload.create);if(!D.success)return A.json(...l(D.error));let $=D.data.form_data||{};if(F.entries().next().value)try{let E=await y0.processFormDataFiles(F);$={...$,...E}}catch(E){return A.json(...K1(E))}let J=DU($),X=await p1.create({scholar_id:new $U.Types.ObjectId(D.data.scholar_id),form_data:$,fullname:J||void 0});return A.json(...R1("\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!",X))}catch(F){return A.json(...K1(F))}},getAll:async(A)=>{try{let F=await p1.getAll();return A.json(...R1("\u0E14\u0E36\u0E07\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",F))}catch(F){return A.json(...K1(F))}},getById:async(A)=>{try{let F=A.req.param("id");if(!F)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A ID \u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19"));if(!i7(F))return A.json(...l("\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A ID \u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"));let B=await p1.getById(F);if(!B)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19"));return A.json(...R1("\u0E14\u0E36\u0E07\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",B))}catch(F){return A.json(...K1(F))}},getByScholar:async(A)=>{try{let F=A.req.param("scholarId");if(!F)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A ID \u0E17\u0E38\u0E19\u0E01\u0E32\u0E23\u0E28\u0E36\u0E01\u0E29\u0E32"));if(!i7(F))return A.json(...l("\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A ID \u0E17\u0E38\u0E19\u0E01\u0E32\u0E23\u0E28\u0E36\u0E01\u0E29\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"));let B=await p1.getByScholar(F);return A.json(...R1("\u0E14\u0E36\u0E07\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",B))}catch(F){return A.json(...K1(F))}},getByStatus:async(A)=>{try{let F=A.req.param("status");if(!["incomplete","completed"].includes(F))return A.json(...l("\u0E2A\u0E16\u0E32\u0E19\u0E30\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"));let B=await p1.getByStatus(F);return A.json(...R1("\u0E14\u0E36\u0E07\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",B))}catch(F){return A.json(...K1(F))}},update:async(A)=>{try{let F=A.req.param("id");if(console.log("Student update request for ID:",F),!F)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A ID \u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19"));if(!i7(F))return A.json(...l("\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A ID \u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"));let{formData:B,jsonData:D}=await AE(A),$=await b0({req:{json:()=>D}},B0.StudentPayload.update);if(!$.success)return console.log("Validation failed:",$.error),A.json(...l($.error));let J={...$.data};if($.data.form_data){let E=await p1.getById(F);if(!E)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19"));let Y=$.data.form_data,G=B.entries().next().value;if(console.log("Has FormData files:",!!G),G){console.log("Processing files from FormData...");try{let W=await y0.processFormDataFiles(B);console.log("File processing result:",W),Y={...Y,...W},await y0.cleanupOldFiles(E.form_data,Y)}catch(W){return console.error("Storage error:",W),A.json(...K1(W))}}J.form_data=Y;let H=DU(Y);if(H)J.fullname=H}if($.data.form_data)try{let E=await p1.getById(F);if(E){let Y=typeof E.scholar_id==="object"?E.scholar_id._id:E.scholar_id,G=await V2.getByScholarId(Y.toString());await p1.update(F,J);let W=await p1.checkFormCompletion(F,G)?"completed":"incomplete",q=await p1.setStatus(F,W);if(!q)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19"));return A.json(...R1("\u0E2D\u0E31\u0E1B\u0E40\u0E14\u0E15\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!",q))}}catch(E){console.error("Error checking completion:",E)}let X=await p1.update(F,J);if(!X)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19"));return A.json(...R1("\u0E2D\u0E31\u0E1B\u0E40\u0E14\u0E15\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!",X))}catch(F){return console.error("Update error:",F),A.json(...K1(F))}},delete:async(A)=>{try{let F=A.req.param("id");if(!F)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A ID \u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19"));if(!i7(F))return A.json(...l("\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A ID \u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"));let B=await p1.getById(F);if(!B)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19"));let D=y0.extractFileUrls(B.form_data);for(let J of D){let X=y0.extractFilenameFromUrl(J);if(X)await y0.deleteFile(X)}let $=await p1.delete(F);return A.json(...R1("\u0E25\u0E1A\u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!",null))}catch(F){return A.json(...K1(F))}},setStatus:async(A)=>{try{let F=A.req.param("id"),B=A.req.param("status");if(!F)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A ID \u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19"));if(!i7(F))return A.json(...l("\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A ID \u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"));if(!["incomplete","completed"].includes(B))return A.json(...l("\u0E2A\u0E16\u0E32\u0E19\u0E30\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"));let D=await p1.setStatus(F,B);if(!D)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19"));return A.json(...R1("\u0E2D\u0E31\u0E1B\u0E40\u0E14\u0E15\u0E2A\u0E16\u0E32\u0E19\u0E30\u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!",D))}catch(F){return A.json(...K1(F))}},submitForm:async(A)=>{try{let F=A.req.param("id");if(!F)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A ID \u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19"));if(!i7(F))return A.json(...l("\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A ID \u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"));let{formData:B,jsonData:D}=await AE(A),$=await b0({req:{json:()=>D}},B0.StudentPayload.submitForm);if(!$.success)return A.json(...l($.error));let J=await p1.getById(F);if(!J)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19"));let X=$.data.form_data;if(B.entries().next().value)try{let G=await y0.processFormDataFiles(B);X={...X,...G},await y0.cleanupOldFiles(J.form_data,X)}catch(G){return A.json(...K1(G))}let E=DU(X),Y=await p1.update(F,{form_data:X,fullname:E});if(!Y)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19"));try{let G=typeof Y.scholar_id==="object"?Y.scholar_id._id:Y.scholar_id,H=await V2.getByScholarId(G.toString()),q=await p1.checkFormCompletion(F,H)?"completed":"incomplete",C=await p1.setStatus(F,q);return A.json(...R1("\u0E2A\u0E48\u0E07\u0E1F\u0E2D\u0E23\u0E4C\u0E21\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!",C))}catch(G){console.error("Error checking completion in submitForm:",G);let H=await p1.setStatus(F,"completed");return A.json(...R1("\u0E2A\u0E48\u0E07\u0E1F\u0E2D\u0E23\u0E4C\u0E21\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!",H))}}catch(F){return A.json(...K1(F))}},getCountByScholar:async(A)=>{try{let F=A.req.param("scholarId");if(!F)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A ID \u0E17\u0E38\u0E19\u0E01\u0E32\u0E23\u0E28\u0E36\u0E01\u0E29\u0E32"));if(!i7(F))return A.json(...l("\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A ID \u0E17\u0E38\u0E19\u0E01\u0E32\u0E23\u0E28\u0E36\u0E01\u0E29\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"));let B=await p1.countByScholar(F);return A.json(...R1("\u0E14\u0E36\u0E07\u0E08\u0E33\u0E19\u0E27\u0E19\u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",{count:B}))}catch(F){return A.json(...K1(F))}},generateTempPermission:async(A)=>{try{let F=await b0(A,B0.StudentPayload.generateTempPermission);if(!F.success)return A.json(...l(F.error));if(!await p1.getById(F.data.student_id))return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19"));let D=Bun.env.JWT_SECRET;if(!D)throw new Error("JWT_SECRET is not defined");let $=Math.floor(Date.now()/1000)+(F.data.expires_in||3600),J=await PB({student_id:F.data.student_id,type:"temp_permission",exp:$},D);return A.json(...R1("\u0E2A\u0E23\u0E49\u0E32\u0E07 Token \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A\u0E41\u0E01\u0E49\u0E44\u0E02\u0E1F\u0E2D\u0E23\u0E4C\u0E21\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",{token:J,expires_at:new Date($*1000).toISOString(),student_id:F.data.student_id}))}catch(F){return A.json(...K1(F))}},verifyTempPermission:async(A)=>{try{let F=await b0(A,B0.StudentPayload.verifyTempPermission);if(!F.success)return A.json(...l(F.error));let B=Bun.env.JWT_SECRET;if(!B)throw new Error("JWT_SECRET is not defined");try{let D=await NB(F.data.token,B);if(D.type!=="temp_permission")return A.json(...l("Token \u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"));if(D.student_id!==F.data.student_id)return A.json(...l("Token \u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A Student ID"));let $=Math.floor(Date.now()/1000);if(D.exp<$)return A.json(...l("Token \u0E2B\u0E21\u0E14\u0E2D\u0E32\u0E22\u0E38\u0E41\u0E25\u0E49\u0E27"));let J=await p1.getById(F.data.student_id);if(!J)return A.json(...l("\u0E44\u0E21\u0E48\u0E1E\u0E1A\u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19"));return A.json(...R1("Token \u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07",{valid:!0,student_id:D.student_id,expires_at:new Date(D.exp*1000).toISOString(),student:J}))}catch(D){return A.json(...l("Token \u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E2B\u0E23\u0E37\u0E2D\u0E2B\u0E21\u0E14\u0E2D\u0E32\u0E22\u0E38"))}}catch(F){return A.json(...K1(F))}}};var F6=new L6;F6.post("/temp-permission/verify",h6.verifyTempPermission);F6.use("*",Z6);F6.get("/",h6.getAll);F6.get("/scholar/:scholarId",h6.getByScholar);F6.get("/scholar/:scholarId/count",h6.getCountByScholar);F6.get("/status/:status",h6.getByStatus);F6.get("/:id",h6.getById);F6.post("/",h6.create);F6.put("/:id",h6.update);F6.delete("/:id",h6.delete);F6.patch("/:id/status/:status",h6.setStatus);F6.post("/:id/submit",h6.submitForm);F6.post("/temp-permission/generate",h6.generateTempPermission);var a5=new L6;a5.route("/auth",F4);a5.route("/scholar",D4);a5.route("/scholar-field",y6);a5.route("/student",F6);var Wg1=await fp();fetch(Bun.env.STORAGE_URL).then((A)=>{if(A.status!==200)throw new Error("Cannot connect to STORAGE");console.log("Storage unit connected")});var Yi=Bun.env.ORIGIN||"";if(!Yi)console.error("No Environment Origin found");var FE=new L6().basePath("api"),cL1=Bun.env.DEVELOPMENT;if(cL1!=="PROD")FE.use(rU());FE.use(tU({origin:[Yi]}));FE.route("v1",a5);var qg1={fetch:FE.fetch,port:8000};export{Wg1 as mongo,qg1 as default};
